(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{105:function(e,t){},109:function(e,t,a){e.exports=a(158)},114:function(e,t,a){},152:function(e,t,a){},158:function(e,t,a){"use strict";a.r(t);var n=a(1),l=a.n(n),r=a(30),s=a.n(r),c=a(3),o=a(4),i=a(5),d=a(2),m=a(6),u=a(24),_=(a(9),a(178)),p=a(177),h=a(12),v=a.n(h);function g(e){if(localStorage.hasOwnProperty(e))return JSON.parse(localStorage.getItem(e))}function f(e){if(localStorage.hasOwnProperty(e))return localStorage.getItem(e)}function E(e){return b(e,"edit")?"View / Edit":b(e,"list_view")?"View":void 0}function b(e,t){var a=g("privileges"),n=!1;return Object.keys(a).map(function(l){l==e&&a[l].split(",").map(function(e){t==e&&(n=!0)})}),n}function y(){localStorage.setItem("logout","logout_"+Math.random())}function N(){localStorage.removeItem("privileges"),localStorage.removeItem("market"),localStorage.removeItem("access_token"),localStorage.removeItem("role_codes"),localStorage.removeItem("market_list"),localStorage.removeItem("user_id"),localStorage.removeItem("user_name"),localStorage.removeItem("app_version"),localStorage.removeItem("master_data"),localStorage.removeItem("master_data_version"),localStorage.removeItem("acc_prvdr_code"),localStorage.removeItem("acc_prvdr_logo")}function w(e,t){localStorage.setItem(e,JSON.stringify(t))}function C(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;(!g("master_data")||e&&g("master_data_version")!=t)&&(localStorage.setItem("master_data",JSON.stringify(e)),localStorage.setItem("master_data_version",JSON.stringify(t)))}function k(e){return g("app_config")[e]}window.addEventListener("storage",function(e){"logout"==e.key&&window.location.reload("/login")},!1);var S=a(19),x=a(99),A=a(173),O=a(100),j=(a(114),a(22)),D=a.n(j),F=a(28),M="/api/app",P=new Headers;function B(e){alert(e)}P.append("Content-Type","application/json");var L=function(e,t){return null==t&&(t={}),(!(arguments.length>2&&void 0!==arguments[2])||arguments[2])&&(t.token=g("access_token")),fetch(e,{method:"POST",body:JSON.stringify(t),headers:P}).then(W,B).then(z,I)};function T(e,t){return R.apply(this,arguments)}function R(){return(R=Object(F.a)(D.a.mark(function e(t,a){var n,l=arguments;return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(!(l.length>2&&void 0!==l[2])||l[2])&&(null==a&&(a={}),a.token=g("access_token")),e.next=4,fetch(t,{method:"POST",body:JSON.stringify(a),headers:P});case 4:return n=e.sent,e.next=7,n.json();case 7:return n=e.sent,e.abrupt("return",n);case 9:case"end":return e.stop()}},e)}))).apply(this,arguments)}function H(e,t){return q.apply(this,arguments)}function q(){return(q=Object(F.a)(D.a.mark(function e(t,a){var n,l,r,s=arguments;return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=!(s.length>2&&void 0!==s[2])||s[2],l=g("market"),g("access_token"),n&&(null==a&&(a={}),a.token=g("access_token"),a.country_code=l.country_code,a.time_zone=l.time_zone,a.type="disbursal_time_report",a.report="report_type"),e.next=6,fetch(t,{method:"POST",body:JSON.stringify(a),headers:P});case 6:return r=e.sent,e.next=9,r.json();case 9:return r=e.sent,e.abrupt("return",r);case 11:case"end":return e.stop()}},e)}))).apply(this,arguments)}function I(e){alert(e)}var z=function(e){var t="";return"error"===e.status?("401"==e.status_code?window.location.reload():"401"==e.status_code&&(t+="\n"+JSON.stringify(e.data)),alert(e.message+t),!1):e};function W(e){return e.text().then(function(t){var a=t&&JSON.parse(t),n=null;return e.ok?a:"401"==e.status?(n=a.message,N(),y(),void window.location.replace("/login")):(n=a&&a.message,Promise.reject(n))})}var V={login:function(e,t){var a=g("master_data_version");return L(M+"/user/login",{email:e,password:t,master_data_version:a},!1)},logout:function(e){L(M+"/user/logout"),N(),y()}};var Y=a(174),U=a(175),J=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(d.a)(t).call(this,e))).handleChange=function(e){a.setState(Object(S.a)({},e.target.id,e.target.value))},a.handleSubmit=function(e){e.preventDefault();var t=a.state.email,n=a.state.password;a.setState({loading:!0}),V.login(t,n).then(function(e){var t;e&&("success"===e.status?(t=e,localStorage.setItem("privileges",JSON.stringify(t.data.user.privileges)),localStorage.setItem("role_codes",JSON.stringify(t.data.user.role_codes)),localStorage.setItem("access_token",JSON.stringify(t.data.access_token)),localStorage.setItem("app_version",JSON.stringify(t.data.app_version)),localStorage.setItem("app_config",JSON.stringify(t.data.app_config)),C(t.data.master_data,t.data.master_data_version),t.data.user.market&&localStorage.setItem("market",JSON.stringify(t.data.user.market)),t.data.user.market_list&&localStorage.setItem("market_list",JSON.stringify(t.data.user.market_list)),t.data.user_id&&localStorage.setItem("user_id",JSON.stringify(t.data.user_id)),t.data.user_name&&localStorage.setItem("user_name",JSON.stringify(t.data.user_name)),a.props.onLogon()):a.setState({error:e.status,loading:!1}))})},a.state={email:"",password:"",submitted:!1,loading:!1,loggedin:!1,error:""},a.handleChange=a.handleChange.bind(Object(u.a)(Object(u.a)(a))),a.handleSubmit=a.handleSubmit.bind(Object(u.a)(Object(u.a)(a))),a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"validateForm",value:function(){return this.state.email.length>0&&this.state.password.length>0}},{key:"render",value:function(){if(g("role_codes"))return l.a.createElement(Y.a,{to:{pathname:"/"}});var e=this.state,t=e.loading,a=e.error;return l.a.createElement("div",{className:"Login no-padding",style:{height:"100vh",position:"relative"}},l.a.createElement("div",{className:"loginBox"},l.a.createElement("div",{className:"text-center"},l.a.createElement("img",{src:"/logo_white_new.png",width:"200",alt:"/logo_blue.png",className:"img-responsive"})),l.a.createElement("form",{onSubmit:this.handleSubmit},l.a.createElement(x.a,{controlId:"email",bssize:"large"},l.a.createElement(A.a.Label,null,"Email"),l.a.createElement(O.a,{autoFocus:!0,type:"email",value:this.state.email,onChange:this.handleChange})),l.a.createElement(x.a,{controlId:"password",bssize:"large"},l.a.createElement(A.a.Label,null,"Password"),l.a.createElement(O.a,{value:this.state.password,onChange:this.handleChange,type:"password"})),l.a.createElement("button",{bssize:"large",type:"submit",className:"btn btn-primary btn-block",disabled:!this.validateForm()},"Login"),t&&l.a.createElement("img",{src:"data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA==",alt:"Image not found"}),a&&l.a.createElement("div",{className:"alert alert-danger"},a))))}}]),t}(n.Component),K=Object(U.a)(J),G=function(e){function t(){var e;return Object(c.a)(this,t),e=Object(i.a)(this,Object(d.a)(t).call(this)),V.logout(),e}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return l.a.createElement(Y.a,{to:{pathname:"/login"}})}}]),t}(n.Component),Q=Object(U.a)(G),Z=a(21),X=a(27),$=a(168),ee=a(42),te=a.n(ee),ae=function(e){return L("/api/admin/market",e)},ne=a(26),le=a(17),re=a.n(le),se=a(172),ce=a(176),oe=a(38),ie=a(166);function de(e,t){return 0==t?"NA":Math.round(e/t*100)+" %"}function me(e){e.hasOwnProperty("status")||(e.status=null);var t=Object.keys(e)[0],a=e[t];return void 0==a||null==a||a.constructor!=Object||a.hasOwnProperty("status")||(e[t].status=null),e}function ue(e){if(null==e)return e;var t="",a=e.split("_");for(t=0;t<a.length;t++)a[t]=a[t].charAt(0).toUpperCase()+a[t].slice(1);return a.join(" ")}function _e(e){return le(e,"YYYY-MM-DD").format("DD MMM YYYY")}function pe(e){return isNaN(e)&&e?e.charAt(0).toUpperCase()+e.slice(1):e}function he(e,t,a){return e.filter(function(e){return e[t]==a})}function ve(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"YYYY-MM-DD h:mm a",r=(arguments.length>4&&void 0!==arguments[4]&&arguments[4],ge(e,t,a,n));return l.a.createElement(l.a.Fragment,null,l.a.createElement("span",{className:"hide"},e),r)}function ge(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"YYYY-MM-DD h:mm a",l="DD MMM YYYY";return 2==a&&(l="DD MMM YY"),t&&(l+=" h:mm a"),e instanceof le?e.format(l):null==e?"":le(e,n).format(l)}function fe(e,t){if(null!=e&&null!=t){var a=le.duration(le(e).diff(le(t))),n=a.days(),l=a.hours(),r=a.minutes(),s=(n>0?n+"d ":"")+(l>0?l+"h ":"")+(r>0?r+"m ":"");return""===s?"0m ago":s+"ago"}}function Ee(e){return Number(e)}function be(e){return e?e.length:0}function ye(e){var t="";return e.hasOwnProperty("first_name")&&e.first_name&&(t+=e.first_name),e.hasOwnProperty("middle_name")&&e.midde_name&&(t=t+" "+e.middle_name),e.hasOwnProperty("last_name")&&e.last_name&&(t=t+" "+e.last_name),t}function Ne(e,t){return(new Intl.NumberFormat).format(e)+" "+t}function we(e){return"enabled"===e?"Disable":"Enable"}function Ce(e){return"enabled"===e?"btn btn-danger do_disable":"btn do_enable"}function ke(e){return"in_progress"==e||0==e?"warning":"enabled"===e||"completed"==e?"success":"disabled"===e||"pending"==e||2==e?"danger":1==e?"secondary":"info"}function Se(e){return"enabled"===e?"E":"D"}function xe(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return e?e.substring(0,t)+"...":0}function Ae(e){return Object.keys(e).map(function(t){e[t]=""}),e}function Oe(e){return e.acc_prvdr_name+" ("+Ze(e.type,"account_type")+" - "+e.acc_purpose.map(function(e,t){return Ze(e)}).join(" | ")+") "+e.acc_number}function je(e){return l.a.createElement("span",{style:{float:"right"}},e)}function De(e,t){if(e&&t){var a=new RegExp("/"+t+"+$");return e.replace(a,"")}}function Fe(e){return l.a.createElement(l.a.Fragment,null,e.map(function(e,t){return l.a.createElement("span",{style:{paddingRight:3},key:t},Ze(e,"account_purpose"))}))}function Me(e){var t=e.logotype;return l.a.createElement("div",{style:{height:30,width:60}},l.a.createElement("img",{className:"img-fluid",src:"/img/".concat(t,"_logo_color.png"),alt:t}))}function Pe(e){var t=e.val,a=e.unit,n=e.align_center,r=e.position,s=e.notify,c=[{divider:1e9,suffix:"B"},{divider:1e6,suffix:"M"},{divider:1e3,suffix:"K"}];return l.a.createElement(se.a,{key:"tool-tip",placement:r,overlay:l.a.createElement(ie.a,{id:"tool-tip"},l.a.createElement("b",null,t.toLocaleString("en-GB",{maximumFractionDigits:1})))},s?l.a.createElement("i",{class:"fa-solid fa-circle-exclamation"}):l.a.createElement("p",{className:"no-margin",style:{fontWeight:600,textAlign:n?"center":""},dangerouslySetInnerHTML:{__html:function(e,t){for(var n=0;n<c.length;n++)if(e>=c[n].divider)return(e/c[n].divider).toFixed(0)+" "+c[n].suffix+" <span style='font-weight:lighter'>"+a+"</span>";return e.toFixed(0)+" <span style='font-weight:lighter'>"+a+"</span>"}(t)}}))}function Be(e){var t=e.val,a=e.type,n=new Date(t),r=n.getDate(),s=n.getFullYear(),c=n.toLocaleString("default",{month:"long"}),o=n.toLocaleTimeString(void 0,{hour:"2-digit",minute:"2-digit"});return l.a.createElement(l.a.Fragment,null,"date-monthName-year"===a?l.a.createElement("p",{className:"no-margin text-white headerTitle preHeaderpad",style:{fontWeight:600}},"Live Report - ",r+" "+c+" "+s+" ","at"," "+o):l.a.createElement("p",{className:"no-margin text-white headerTitle preHeaderpad",style:{fontWeight:600}},"Report Run Date - ",r+" "+c+" "+s," "))}Date.prototype.addDays=function(e){var t=new Date(this.valueOf);return t.setDate(t.getDate()+e),t};var Le=function(e){return L(M+"/touch",e)},Te=function(e,t){return L("/api/admin/"+e+"/update",t)},Re=function(e,t){return L("/api/admin/"+e+"/name_list",t)},He=function(e,t,a){return L(M+"/"+e+"/"+t,a)},qe=function(e){return L(M+"/common/loan_search_criteria",e)},Ie=function(e){return L(M+"/common/currency_code",e)},ze=function(e){return L("/api/admin/org/org_details",e)},We=function(e){return L(M+"/common/sms",e)},Ve=function(e){return L(M+"/common/update",e)},Ye=function(e){return L(M+"/common/app_users",e)},Ue=function(e){return L(M+"/user/master_data",e)},Je=function(e){return L(M+"/common/master_data",e)},Ke=function(){var e=g("master_data");if(""!=e)return e;alert("Master Data not configured for the application. Ensure you are using modern browser")},Ge=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return t?Qe(e,t):Ke().filter(function(t){return t.data_key===e})},Qe=function(e,t){return Ke().filter(function(a){return a.data_key===e&&a.parent_data_code===t})},Ze=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=Ke();return null!=t&&(a=Ge(t)),a&&a.length>0&&(a=a.filter(function(t){return t.data_code===e})),""==a&&e&&e.includes("_")?ue(e):""==a?pe(e):a&&1===a.length?a[0].data_value:e},Xe=function(e){return L(M+"/common/audit_history",e)},$e=[l.a.createElement("option",{key:"-2",value:"-2"},"[ loading . . . ]")],et=[l.a.createElement("option",{value:""},"[ No Results ]")],tt=[l.a.createElement("option",{key:"",value:""},"choose")],at=[l.a.createElement("option",{key:"",value:"{}"},"choose")],nt=a(68),lt=a(121),rt=function(e){function t(){var e;if(Object(c.a)(this,t),(e=Object(i.a)(this,Object(d.a)(t).call(this))).admin_roles=["super_admin","market_admin","ops_admin","it_admin"],e.fillSelect=function(t,a){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:["id","name"];t&&("success"===t.status?e.getSelectOptionsFromResult(t.data,a,n):alert(t.message+"\n"+JSON.stringify(t.data)))},e.add_status=function(e){return me(e)},e.setOptionsToStateFromApi=function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=t;null==a?a=e.def_req:a.hasOwnProperty("associated_with")&&(n=a.associated_with+"_"+t),Re(t,e.req(a)).then(function(t){e.resp(t),t&&("success"===t.status?e.getSelectOptionsFromResult(t.data,n):alert(t.message+"\n"+JSON.stringify(t.data)))})},e.setOptionsListToStateFromAppApi=function(t,a){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:["id","name"],r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;null==r&&(r=a),He(t,a,e.req(n)).then(function(t){e.resp(t),t&&("success"===t.status?e.getSelectOptionsFromResult(t.data.list,r,l):alert(t.message+"\n"+JSON.stringify(t.data)))})},e.getSelectOptionsFromResult=function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:["id","name"],r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],s=[];if(t.length>0){var c=n[0],o=n[1],i=!1;s=t.map(function(t,n){var r=t[c];return"obj"==c&&(r=JSON.stringify(r),i=!0),t.selected&&(e.selected[a]=r),l.a.createElement("option",{key:n,value:r},t[o])}),a+="_dd",s=0==r?Object(ne.a)(s):[].concat(i?Object(ne.a)(at):Object(ne.a)(tt),Object(ne.a)(s))}else s=et;return null!=a&&e.setState(Object(S.a)({},a,s)),s},e.handleAlert=function(){e.setState({modal_show:!1})},e.vaildationAlert=function(t){return l.a.createElement(l.a.Fragment,null,l.a.createElement(nt.a,{show:t,variant:"danger",size:"l"},l.a.createElement(nt.a.Header,null,l.a.createElement(nt.a.Title,null,"Alert")),l.a.createElement(nt.a.Body,null,l.a.createElement("h6",null,"Please enter required fields")),l.a.createElement(nt.a.Footer,null,l.a.createElement(lt.a,{onClick:e.handleAlert,variant:"danger"},"Ok"))))},e.getMultiSelectOptions=function(e){var t=Ge(e);if(t.length>0)return t.map(function(t,a){return{value:t.data_code,label:t.data_value,id:e+"_"+a}})},e.getSelectOptions=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=Ge(e,a),r=[];if(n.length>0)return r=n.map(function(e,t){return l.a.createElement("option",{key:t,value:e.data_code},e.data_value)}),t&&(r=[].concat(Object(ne.a)(tt),Object(ne.a)(r))),r},e.selected={},null==g("access_token"))return alert("You have been signed out. Please login again"),Object(i.a)(e);var a=g("market");null==a?alert("It looks like Market is not configured for the logged in user \nOR\n User is not assigned to a Market."):(e.country_code=a.country_code,e.lender_code="UGA"==e.country_code?"UFLW":"RWA"==e.country_code?"RFLW":null,e.currency_code=a.currency_code,e.time_zone=a.time_zone);var n=g("acc_prvdr_code");return n&&(e.acc_prvdr_code=n),e.def_req={country_code:e.country_code,status:"enabled"},e}return Object(m.a)(t,e),Object(o.a)(t,[{key:"server_time",value:function(){var e=this;return Le({country_code:this.country_code,time_zone:this.time_zone}).then(function(t){if(e.resp(),!t)return!1;"success"===t.status&&e.setState({server_time:t})})}},{key:"touch",value:function(){return Le({country_code:this.country_code,time_zone:this.time_zone}).then(function(e){return!!e&&("success"!==e.status&&(N(),y(),window.location.reload("/login"),!0))})}},{key:"touch_async",value:function(){var e=Object(F.a)(D.a.mark(function e(){var t,a;return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=!1,e.next=3,T(M+"/touch",{country_code:this.country_code,time_zone:this.time_zone});case 3:if(a=e.sent){e.next=6;break}return e.abrupt("return",!0);case 6:return"success"===a.status?t=!1:(N(),y(),alert("Session Expired"),window.location.reload("/login"),t=!0),e.abrupt("return",t);case 9:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"resp",value:function(e){this.setState({calling_api:!1})}},{key:"req",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return this.setState({calling_api:!0}),this.append_request(Object(Z.a)({},e),this,t,a)}},{key:"append_request",value:function(e,t,a,n){return null==e&&(e={}),e.hasOwnProperty("country_code")||"super_admin"!==g("role_codes")&&"it_admin"!==g("role_codes")||(e.country_code=t.country_code),null!=g("acc_prvdr_code")?e.acc_prvdr_code=g("acc_prvdr_code"):!e.hasOwnProperty("acc_prvdr_code")&&null!=n&&e[n].hasOwnProperty("acc_prvdr_code")&&(e.acc_prvdr_code=e[n].acc_prvdr_code,delete e[n].acc_prvdr_code),e.hasOwnProperty("time_zone")||(e.time_zone=t.time_zone),e=me(e)}}]),t}(n.Component),st=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(i.a)(this,Object(d.a)(t).call(this))).handleComponentChange=function(t,a){var n=t.target.id,l=t.target.value;console.log(n,l,a,e.state[a]);var r=e.state[a];r[n]=l,e.setState(Object(S.a)({},a,r))},e.handleComponentReset=function(t,a){e.setState(Object(S.a)({},a,{}))},e.handleComponentElemetChange=function(t,a,n){var l=e.state[t];l[a]=n,e.setState(Object(S.a)({},t,l))},e.handleResetOrgNAddr=function(t){var a=Ae(e.state.org),n=Ae(e.state.reg_address);e.setState({org:a,reg_address:n,div_style:"show_div"})},e.handleOrgChange=function(t){var a=Ae(e.state.org),n=Ae(e.state.reg_address);e.setState({org:a,reg_address:n,div_style:"disable_div"});var l={id:t.target.value};ze(e.req(l)).then(function(t){if(t&&null!=t.data){var a=t.data,n=a.reg_address;e.setState({org:a,reg_address:n})}})},e.handleComponentChange=e.handleComponentChange.bind(Object(u.a)(Object(u.a)(e))),e.handleComponentReset=e.handleComponentReset.bind(Object(u.a)(Object(u.a)(e))),e}return Object(m.a)(t,e),t}(rt),ct=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(i.a)(this,Object(d.a)(t).call(this))).non_data_fields=["div_style","show_button_style","edit_button_style","edit_mode"],e.handleChange=function(t){console.log(t,"event on flow component"),console.log("this.props.id"+e.props.id),e.props.onComponentChange(t,e.props.id),e.handleChangeForEdit(t)},e.toUpperHandleChange=function(t){t.target.value=t.target.value.toUpperCase(),e.handleChange(t)},e.handleChangeForEdit=function(t){if(!1!==e.props.editable&&e.state.edit_mode){var a,n=t.target.id,l=t.target.value;console.log(n,l),e.setState((a={},Object(S.a)(a,n,l),Object(S.a)(a,"save_button_style","show_button"),a))}},e.handleElementReset=function(t){e.handleElementChange(t,null)},e.handleElementChange=function(t,a){e.props.onComponentElementChange(e.props.id,t,a)},e.handleSelfChangeState=function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=t.target.id;null==a&&(a=t.target.value),e.setState(Object(S.a)({},n,a))},e.setChangeToState=function(t){var a=e.props.id,n=t.target.id,l=t.target.value,r=e.state[a];r[n]=l,e.setState(Object(S.a)({},a,r))},e.setChangeToProps=function(t){var a=e.props.id,n=t.target.id,l=t.target.value,r=e.props[a];r[n]=l,e.setState(Object(S.a)({},a,r))},e.handleDateChange=function(t,a){var n={};a=re()(a).format("YYYY-MM-DD"),n.target={id:t,value:a},e.handleChange(n)},e.handleSelfChange=function(t){var a=e.props.id,n=t.target.id,l=t.target.value,r=e[a];r[n]=l,e[a]=r},e.handleSelfDateChange=function(t,a){var n={};a=re()(a).format("YYYY-MM-DD"),n.target={id:t,value:a},e.handleSelfChange(n)},e.handleMakeCopy=function(t){return function(a){e.props.onComponentChange(a,e.props.id);var n=a.target.value;document.getElementById(t).value=n,e.props.data[t]=n}},e.load_dp_rel_mgr=function(t){e.setState({data_prvdr_rel_mgr_dd:null});var a=g("acc_prvdr_code");e.setOptionsToStateFromApi("rel_mgr",Object(Z.a)({},e.def_req,{associated_with:"acc_prvdr",associated_entity_code:a}))},e.load_flow_rel_mgr=function(t){e.setState({flow_rel_mgr_dd:null});e.setOptionsToStateFromApi("rel_mgr",Object(Z.a)({},e.def_req,{associated_with:"flow"}))},e.load_acc_prvdrs=function(){e.setState({acc_prvdrs_dd:null}),e.setOptionsListToStateFromAppApi("common","list",e.def_req,["acc_prvdr_code","name"],"acc_prvdrs")},e.handleReset=function(t){e.props.onComponentReset(t,e.props.id)},e.handleEdit=function(t){e.setState({edit_mode:!0}),e.setState({edit_button_style:"hide_button"}),e.setState({save_button_style:"disable_div"}),e.setState({div_style:""})},e.handleSave=function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=e.getRequest();Te(e.state.comp_name,e.req(n)).then(function(t){t&&("success"===t.status?(e.setState({div_style:"disable_div"}),e.setState({save_button_style:"hide_button"}),e.setState({edit_button_style:"show_button"}),alert(t.message),"reload"==a&&window.location.reload()):alert(t.message+"\n"+JSON.stringify(t.data)))})},e.getRequest=function(){var t=e.state;return t.id=e.props.data.id,t=Object(S.a)({},e.state.comp_name,t)},e.handleChange=e.handleChange.bind(Object(u.a)(Object(u.a)(e))),void 0==Object({NODE_ENV:"production",PUBLIC_URL:"",REACT_APP_ADMIN_API_ROOT:"/api/admin",REACT_APP_APP_API_ROOT:"/api/app",REACT_APP_CORE_API_ROOT:"/api/core",REACT_APP_URL:"http://app.flowglobal.net"}).REACT_APP_USE_ROOT_ONLY_DEV?e.root="":e.root="http://localhost:8000",e}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){"view"===this.props.mode?(this.setState({div_style:"disable_div"}),this.setState({edit_button_style:"show_button"}),this.setState({save_button_style:"hide_button"})):(this.setState({div_style:""}),this.setState({edit_button_style:"hide_button"}),this.setState({save_button_style:"hide_button"})),("disabled"===this.props.mode||"view"===this.props.mode&&"false"===this.props.editable)&&(this.setState({div_style:"disable_div"}),this.setState({button_style:"hide_button"}))}}]),t}(rt),ot=a(167);function it(e,t){return dt(e)?"Each day":t+" days"}function dt(e){return"each_day"===e||"1"===e}function mt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=new Intl.NumberFormat;return t?a.format(e)+" "+t:a.format(e)}function ut(e){var t="";return dt(arguments.length>1&&void 0!==arguments[1]?arguments[1]:null)&&(t=" (max duration)"),"1"==e?e+" day"+t:e+" days"+t}function _t(e,t){var a=mt(pt(e),t),n="Percent"===e.flow_fee_type?e.flow_fee+"% | ":"(FLAT) "+mt(e.flow_fee,t),l="";return"Percent"===e.flow_fee_type&&(l+=a),dt(e.flow_fee_duration)&&(l+=" / day"),n+l}function pt(e){return gt(e)*(e.flow_fee/100)}function ht(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a="";return dt(e.flow_fee_duration)&&(a=" *"),mt(vt(e),t)+a}function vt(e){var t=function(e){var t=e.flow_fee;return"Percent"===e.flow_fee_type&&(t=pt(e)),dt(e.flow_fee_duration)&&(t*=e.duration),Math.round(t)}(e);return gt(e)+t}function gt(e){return e.hasOwnProperty("max_loan_amount")?e.max_loan_amount:e.hasOwnProperty("loan_principal")?e.loan_principal:void 0}function ft(e){return l.a.createElement("input",{id:e.id,type:"button",onClick:e.onClick,value:E(e.entity),className:"btn-sm btn-primary"})}function Et(e){var t=b(e.entity,"edit");return l.a.createElement(l.a.Fragment,null,t&&l.a.createElement("input",{type:"button",class:"btn btn-secondary btn-std",onClick:e.onClick,value:"Edit"}))}function bt(e){return l.a.createElement(se.a,{overlay:l.a.createElement(ie.a,{id:"tooltip"},e.biz_name,"/",e.cust_name)},l.a.createElement("span",{className:"d-inline-block"},e.acc_number))}function yt(e){var t="FA Amount :"+mt(e.loan.loan_principal,e.currency_code)+"\nRepayment :"+ht(e.loan,e.currency_code);return l.a.createElement(se.a,{overlay:l.a.createElement(ie.a,{id:"tooltip"},t)},l.a.createElement("span",{className:"d-inline-block"},e.loan.product_name))}function Nt(e,t){var a=e.prod_csf_values,n=e.cs_model_code,r=e.result_configs;if(null!=t&&void 0!=t&&""!=t)var s=he(t,"csf_type","meta_txn_start_date")[0],c=he(t,"csf_type","meta_txn_end_date")[0],o=he(t,"csf_type","meta_txn_days")[0],i=he(t,"csf_type","meta_cal_days")[0],d=o.csf_normal_value+" days",m=[{code:"Txn Dates",value:ge(s.csf_normal_value,!1)+" to "+ge(c.csf_normal_value,!1)+" ("+i.csf_normal_value+" days)"},{code:"Nett Txn Days",value:d}].map(function(e,t){return l.a.createElement("div",null,l.a.createElement("span",{className:"cust_font"},"\xa0\xa0\xa0",Ze(e.code)," : ",e.value))});if(r)var u=r.map(function(e,t){return l.a.createElement("div",null,l.a.createElement("span",{className:"cust_font"},"\xa0\xa0\xa0 Score ",e.score_from," to ",e.score_to," - ",Ze(e.score_result_code)))});if(null!=a||void 0!=a){var _=a.map(function(e,t){return l.a.createElement("div",null,l.a.createElement("span",{className:"cust_font"},"\xa0\xa0\xa0",e.weightage,"% - ",Ze(e.csf_type)," : ",e.csf_gross_value," (",e.csf_value,"/10)"))});return l.a.createElement("div",null,l.a.createElement("b",{className:"cust_font"},"Score Model Name - ",Ze(n)," "),l.a.createElement("br",null),l.a.createElement("b",{className:"cust_font"},"Eligibility Criteria"),u,l.a.createElement("hr",null),l.a.createElement("b",{className:"cust_font"},"Score Factor Values"),_,m&&l.a.createElement(l.a.Fragment,null,l.a.createElement("hr",null),l.a.createElement("b",{className:"cust_font"},"Note"),m))}return l.a.createElement("label",null,e.result_msg)}function wt(e){return console.log(e.loan_product.cust_score),console.log(e.loan_product),console.log(e.meta_data),l.a.createElement(se.a,{trigger:"click",overlay:l.a.createElement(ce.a,null,Nt(e.loan_product,e.meta_data))},l.a.createElement("h4",null,l.a.createElement(ot.a,{className:"badge_style",variant:(t=e.loan_product.result_code,"eligible"===t?"success":"requires_flow_rm_approval"===t?"primary":"danger"),pill:!0},e.loan_product.cust_score||"NA")));var t}function Ct(e){var t=e.result_msg;return"eligible"===e.result_code&&(t=""),l.a.createElement(l.a.Fragment,null,t&&l.a.createElement(se.a,{overlay:l.a.createElement(ie.a,{id:"tooltip"},t)},l.a.createElement("label",{style:{paddingTop:"5px",color:"red"}},"Result Info")))}function kt(e){return l.a.createElement("div",null,void 0==e.overlay?l.a.createElement("span",{className:"d-inline-block"},e.base):l.a.createElement(se.a,{trigger:"click",overlay:l.a.createElement(ce.a,null,e.overlay)},l.a.createElement("span",{className:"d-inline-block"},e.base)))}function St(e){return l.a.createElement("div",null,e.full_text?l.a.createElement(se.a,{overlay:l.a.createElement(ie.a,{id:"tooltip"},e.full_text," / ",e.overlay)},l.a.createElement("span",{className:"d-inline-block"},e.no_reduce?e.full_text:xe(e.full_text))):l.a.createElement("span",{className:"d-inline-block"},"NA"))}function xt(e){return l.a.createElement("div",null,e.full_text?l.a.createElement(se.a,{overlay:l.a.createElement(ie.a,{id:"tooltip"},e.full_text)},l.a.createElement("span",{className:"d-inline-block"},e.no_reduce?e.full_text:xe(e.full_text))):l.a.createElement("span",{className:"d-inline-block"},"NA"))}function At(e){var t,a=e.data,n=e.timedata,r=e.item,s=e.action,c=e.time_limit,o=6e4*c[0],i=6e4*c[1];if("next_action_conf"===r)var d=null==a.loan_approved_date?a.loan_appl_date:a.loan_approved_date;else if("first_attempt_time"===r)d=a.first_attempt_time;else if("last_attempt_time"===r)d=a.attempt_time;else if("last_updated_at"===r)d=a.updated_at;else d="approved"===r?a.loan_approved_date:a.loan_appl_date;var m=!1,u=!1,_=!1;(t=le.duration(le(n).diff(le(d))))._milliseconds<o?(m=!1,u=!1,_=!0):t._milliseconds>=o&&t._milliseconds<=i?(m=!0,u=!1):t._milliseconds>i&&(m=!1,u=!0);var p=null;return"last_updated_at"!==r&&(p=a.loan_approver_name.split(" ")),l.a.createElement(l.a.Fragment,null,"applied"===r&&l.a.createElement(l.a.Fragment,null,_&&l.a.createElement("span",null,fe(n,a.loan_appl_date)),m&&l.a.createElement("span",{className:"text-redDark"},fe(n,a.loan_appl_date)),u&&l.a.createElement("span",{className:"text-redDark"},fe(n,a.loan_appl_date),l.a.createElement("i",{style:{paddingLeft:5},class:"fa-solid fa-triangle-exclamation excess_time_blinkerTable"}))),"approved"===r&&l.a.createElement(l.a.Fragment,null,_&&l.a.createElement("span",null,fe(n,a.loan_approved_date)),m&&l.a.createElement("span",{className:"text-redDark"},fe(n,a.loan_approved_date)),u&&l.a.createElement("span",{className:"text-redDark"},fe(n,a.loan_approved_date),l.a.createElement("i",{style:{paddingLeft:5},class:"fa-solid fa-triangle-exclamation excess_time_blinkerTable"}))),"first_attempt_time"===r&&l.a.createElement(l.a.Fragment,null,_&&l.a.createElement("span",null,fe(n,a.first_attempt_time)),m&&l.a.createElement("span",{className:"text-redDark"},fe(n,a.first_attempt_time)),u&&l.a.createElement("span",{className:"text-redDark"}," ",fe(n,a.first_attempt_time),l.a.createElement("i",{style:{paddingLeft:5},class:"fa-solid fa-triangle-exclamation excess_time_blinkerTable"}))),"last_attempt_time"===r&&l.a.createElement(l.a.Fragment,null,_&&l.a.createElement("span",null,fe(n,a.attempt_time)),m&&l.a.createElement("span",{className:"text-redDark"},fe(n,a.attempt_time)),u&&l.a.createElement("span",{className:"text-redDark"},fe(n,a.attempt_time),l.a.createElement("i",{style:{paddingLeft:5},class:"fa-solid fa-triangle-exclamation excess_time_blinkerTable"}))),"next_action"===r&&l.a.createElement(l.a.Fragment,null,m||u?l.a.createElement("span",{className:"text-uppercase"},l.a.createElement("i",{class:"fa-solid fa-phone text-white"},"\xa0\xa0"),p[0]):l.a.createElement("span",null,p[0])),"next_action_conf"===r&&l.a.createElement(l.a.Fragment,null,m||u?l.a.createElement("div",{className:"text-center"},l.a.createElement(lt.a,{className:"btn-std",onClick:function(){return s(a.cust_id,a.loan_doc_id)}},"Get Phone Confirmation")):null),"last_updated_at"===r&&l.a.createElement(l.a.Fragment,null,_&&l.a.createElement("span",null,fe(n,a.updated_at)),m&&l.a.createElement("span",{className:"text-redDark"},fe(n,a.updated_at)),u&&l.a.createElement("span",{className:"text-redDark"},fe(n,a.updated_at),l.a.createElement("i",{style:{paddingLeft:5},class:"fa-solid fa-triangle-exclamation excess_time_blinkerTable"}))))}var Ot=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={comp_name:"market"},a.handleChange1=function(e){var t={country_code:e.target.value};Ie(a.req(t)).then(function(e){e&&(a.props.data.currency_code=e.data[0].currency_code,a.setState({currency_code:e.data[0].currency_code}))})},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){Object(X.a)(Object(d.a)(t.prototype),"componentWillMount",this).call(this),this.setOptionsListToStateFromAppApi("common","country"),this.setOptionsListToStateFromAppApi("common","currency")}},{key:"render",value:function(){var e=this;return l.a.createElement("div",{id:""},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-2"},l.a.createElement("h4",null,this.props.title?this.props.title:"Market Details")),l.a.createElement("div",{className:this.state.button_style},l.a.createElement("div",{className:"col-md-1 ".concat(this.state.edit_button_style)},l.a.createElement(Et,{entity:"market",onClick:this.handleEdit})),l.a.createElement("div",{className:"col-md-1 ".concat(this.state.save_button_style)},l.a.createElement("input",{onClick:this.handleSave,type:"button",className:"btn btn-success",value:"Save"})))),l.a.createElement("div",{className:this.state.div_style},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-3"},l.a.createElement("span",null,"Country"),l.a.createElement("font",{className:"text-danger"},"   *  "),l.a.createElement("select",{id:"country_code",value:this.props.data.country_code,onChange:function(t){e.handleChange(t),e.handleChange1(t)},required:"required",className:"form-control"},this.state.country_dd||$e)),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("span",null,"Currency"),l.a.createElement("font",{className:"text-danger"},"   *  "),l.a.createElement("select",{id:"currency_code",value:this.props.data.currency_code,onChange:this.handleChange,className:"form-control",required:"required"},this.state.currency_dd||$e)),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("span",null,"ISD Code"),l.a.createElement("font",{className:"text-danger"},"   *  "),l.a.createElement("input",{type:"number",id:"isd_code",value:this.props.data.isd_code,maxLength:5,onChange:this.handleChange,required:!0,className:"form-control"})))))}}]),t}(ct),jt=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(i.a)(this,Object(d.a)(t).call(this))).state={comp_name:"address",addr_config:[],borrower_country:"disable_div"},e.handleCountryChange=function(t){e.handleReset(),e.addr_country_code=t.target.value,e.props.data.country_code=t.target.value,e.loadAddressUI(t.target.value),e.handleChange(t)},e.process=function(t,a,n){var l;l=a+", "+n,e.setState({gps_error:!1,gps_lat:a,gps_lon:n,gps_value:l})},e.success=function(t){var a=t.coords.latitude,n=t.coords.longitude,l=a+", "+n;e.setState({gps_error:!1,gps_lat:a,gps_lon:n,gps_value:l,loading:null});var r={target:{id:"gps",value:l}};e.handleChange(r)},e.error=function(t){e.setState({gps_error:"Unable to retrieve your location",loading:null})},e.locateMe=function(t){navigator.geolocation?(navigator.geolocation.getCurrentPosition(e.success,e.error,{enableHighAccuracy:!0,timeout:5e4}),e.setState({loading:"Finding your location..."})):e.setState({gps_error:"Geolocation is not supported by your browser"})},e.mounted=0,e.success=e.success.bind(Object(u.a)(Object(u.a)(e))),e.process=e.process.bind(Object(u.a)(Object(u.a)(e))),e}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){Object(X.a)(Object(d.a)(t.prototype),"componentWillMount",this).call(this),this.setOptionsListToStateFromAppApi("common","country")}},{key:"componentDidMount",value:function(){"view"==this.props.mode?(this.props.data.country_code=this.country_code,this.loadAddressUI(this.props.data.country_code),this.addr_country_code=this.props.data.country_code):this.loadAddressUI(this.country_code)}},{key:"loadAddressUI",value:function(e){var t=this;if(void 0!==e){this.setState({addr_config:[],loading_addr:"LOADING ADDRESS FORM. PLEASE WAIT"});var a;(a=this.req({country_code:e,status:"enabled"}),L("/api/admin/address/addr_config",a)).then(function(a){if(a)if(t.setState({loading_addr:null}),"success"==a.status&&a.data.addr_config.length>0)if(t.setState({addr_config:a.data.addr_config}),t.selects=t.getAllSelects(a.data.addr_config,t.props.mode),"view"==t.props.mode||"create"==t.props.mode)t.fillAllSelects(t.selects,e,"enabled");else{var n=a.data.addr_config[0].field_code;t.setState(Object(S.a)({},n+"_dd",$e)),t.setOptionsListToStateFromAppApi("common","dropdown",t.req({country_code:e,status:"enabled",field_code:n}),["data_code","data_value"],n)}else alert("Please ensure address form is configured correctly for "+e)})}else this.setState({addr_config:[],loading_addr:"NO COUNTRY TO LOAD"})}},{key:"createUI",value:function(){var e=this,t=(arguments.length>0&&void 0!==arguments[0]&&arguments[0],this.state.addr_config.map(function(t,a){var n=null;return"gps"==t.field_code&&(n=e.createGps(t.field_code,a)),"text"==t.field_type?n=e.createText(t.field_code,a):"select"==t.field_type&&(n=e.createSelect(t.field_code,a)),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("span",{className:"viewCus_label"},t.field_name),e.getMandatoryTag(t.field_type,t.validation_rules),n)}));return t.push(l.a.createElement("div",{className:"col-md-3"},l.a.createElement("button",{id:"gps",type:"button",className:"btn-sm btn-light",onClick:this.locateMe},"Locate Me"),this.state.gps_error&&l.a.createElement("p",null,this.state.gps_error))),l.a.createElement("div",null,l.a.createElement("div",{className:"row no-margin align-items-end labelTopgap"},t.shift(),t.shift(),t.shift(),t.shift()),l.a.createElement("div",{className:"row no-margin align-items-end labelTopgap"},t.shift(),t.shift(),t.shift(),t.shift()),l.a.createElement("div",{className:"row no-margin align-items-center labelTopgap",style:{paddingBottom:23}},t.shift(),t.shift(),t.shift(),t.shift()))}},{key:"createText",value:function(e,t){return l.a.createElement("input",{id:e,value:this.props.data[e],onChange:this.handleChange.bind(this),className:"form-control",type:"text",required:"required"})}},{key:"createGps",value:function(e,t){return l.a.createElement(l.a.Fragment,null,this.state.loading&&l.a.createElement("p",null,this.state.loading),this.state.gps_value?l.a.createElement("p",null,l.a.createElement("b",null,l.a.createElement("span",null,"Lat, Lon: ",this.state.gps_value))):l.a.createElement("p",null,l.a.createElement("b",null,l.a.createElement("span",null,"Lat, Lon: ",this.props.data[e]))))}},{key:"createSelect",value:function(e,t){return l.a.createElement("div",null,l.a.createElement("select",{id:e,value:this.props.data[e],onChange:this.loadChild.bind(this),className:"form-control",type:"text",required:"required"},this.state[e+"_dd"]))}},{key:"getMandatoryTag",value:function(e,t){if("select"===e||"required"===t)return l.a.createElement("font",{className:"text-danger"},"   *  ")}},{key:"fillAllSelects",value:function(e,t,a){var n=this,l=null;e.forEach(function(e){var r,s=e.field_code,c=null;l&&["district","country"].includes(s)?(r=n.props.data[l.field_code],c={country_code:t,status:a,field_code:s,parent_data_code:r}):c={country_code:t,status:a,field_code:s},n.setOptionsListToStateFromAppApi("common","dropdown",n.req(c),["data_code","data_value"],e.field_code),l=e})}},{key:"getAllSelects",value:function(e,t){var a=this,n=[];return e.forEach(function(e){if("select"===e.field_type){n.push(e);var l,r=e.field_code;l="view"==t?$e:[],a.setState(Object(S.a)({},r+"_dd",l))}}),n}},{key:"loadChild",value:function(e){this.handleChange(e);var t=e.target.id;this.getChildFieldCode(t);var a=this.child_field_code;if(null!=a){this.setState(Object(S.a)({},a+"_dd",$e));var n=e.target.value,l={country_code:this.country_code,status:"enabled",field_code:a,parent_data_code:n};this.setOptionsListToStateFromAppApi("common","dropdown",this.req(l),["data_code","data_value"],a)}}},{key:"getChildFieldCode",value:function(e){var t=this;this.state.addr_config.forEach(function(a){a.field_code===e&&(t.child_field_code=a.child_field_code)})}},{key:"render",value:function(){return l.a.createElement("div",{id:""},l.a.createElement("div",{className:"row floatAdvancetitleBox agreementDateHeaderBox align-items-center no-margin"},l.a.createElement("div",{className:"col-md-4"},l.a.createElement("h4",{className:"no-margin headerTitle"},this.props.title?this.props.title:"")),l.a.createElement("div",{className:"col-md-1 ".concat(this.state.edit_button_style)},l.a.createElement(Et,{entity:this.props.entity,onClick:this.handleEdit})),l.a.createElement("div",{className:"col-md-1 ".concat(this.state.save_button_style)},l.a.createElement("input",{onClick:this.handleSave,type:"button",className:"btn btn-success btn-std",value:"Save"}))),l.a.createElement("div",{className:this.state.div_style},l.a.createElement("div",{className:"row no-margin labelTopgap align-items-end"},l.a.createElement("div",{className:"col-md-3"},l.a.createElement("span",{className:"viewCus_label"},"Country"),l.a.createElement("font",{className:"text-danger"},"   *  "),this.props.screen?l.a.createElement("div",{className:this.state.borrower_country},l.a.createElement("input",{type:"text",id:"country_code",value:this.country_code,className:"form-control"})):l.a.createElement("select",{id:"country_code",value:this.props.data.country_code,onChange:this.handleCountryChange.bind(this),required:"required",className:"form-control"},this.state.country_dd||$e))),this.createUI(this.state.gps_value),this.state.loading_addr))}}]),t}(ct),Dt=a(20),Ft=a.n(Dt),Mt=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={org:null,comp_name:"org",dropdown_div_style:"disable_div"},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){Object(X.a)(Object(d.a)(t.prototype),"componentWillMount",this).call(this)}},{key:"render",value:function(){var e=this;return l.a.createElement("div",{id:""},l.a.createElement("div",{className:"row mt-4"},l.a.createElement("div",{className:"col-md-4"},l.a.createElement("h4",null,this.props.title?this.props.title:"Organisation Details")),l.a.createElement("div",{className:"col-md-1 ".concat(this.state.edit_button_style)},l.a.createElement(Et,{entity:this.props.entity,onClick:this.handleEdit})),l.a.createElement("div",{className:"col-md-1 ".concat(this.state.save_button_style)},l.a.createElement("input",{onClick:this.handleSave,type:"button",className:"btn btn-success",value:"Save"}))),l.a.createElement("div",{className:this.state.div_style},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-3"},l.a.createElement("span",null,"General Name"),l.a.createElement("font",{className:"text-danger"},"   *  "),l.a.createElement("input",{id:"name",value:this.props.data.name,onChange:this.toUpperHandleChange,onKeyUp:this.handleMakeCopy("inc_name"),className:"form-control",type:"text",required:"required"})),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("span",null,"Name of Incorporation"),l.a.createElement("input",{id:"inc_name",value:this.props.data.inc_name,onChange:this.handleChange,className:"form-control",type:"text"})),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("span",null,"Incorporation Number"),l.a.createElement("input",{id:"inc_number",value:this.props.data.inc_number,onChange:this.handleChange,className:"form-control",type:"text"})),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("span",null,"Date of Incorporation"),l.a.createElement(Ft.a,{value:ge(this.props.data.inc_date),closeOnSelect:!0,onChange:function(t){e.handleDateChange("inc_date",t)},dateFormat:"DD MMM YYYY",timeFormat:!1,required:"required"}))),l.a.createElement("br",null),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-3"},l.a.createElement("span",null,"TAX Identifier"),l.a.createElement("input",{id:"tax_id",value:this.props.data.tax_id,onChange:this.handleChange,className:"form-control",type:"text"})))))}}]),t}(ct),Pt=function(e){return L("/api/admin/file/upload",e)},Bt=function(e){return L("/api/admin/file/remove",e)},Lt=function(e){return L("/api/admin/file/rel_path",e)},Tt=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(i.a)(this,Object(d.a)(t).call(this))).state={action:"Upload",reset_btn:"show_div",view_btn:"hide_div"},e.resetFile=function(t){e.fileInput.value=null,e.setState({action:"Upload",file:null})},e.load_props_for_view=function(t){if(console.log("load_props_for_view"),t.borrower_id?(e.entity_type="borrowers",e.entity_id=t.borrower_id,e.entity_code=t.cust_id):t.person_id?(e.entity_type="persons",e.entity_id=t.person_id,e.entity_code=t.person_id):t.lender_id?(e.entity_type="lenders",e.entity_id=t.lender_id,e.entity_code=t.lender_code):t.data_prvdr_id?(e.entity_type="data_prvdrs",e.entity_id=t.data_prvdr_id,e.entity_code=t.acc_prvdr_code):t.acc_prvdr_id&&(e.entity_type="acc_providers",e.entity_id=t.acc_prvdr_id,e.entity_code=t.acc_prvdr_code),console.log("props."+t.db_file_name),console.log("this.props.id"+e.props.id),console.log("this.entity_code"+e.entity_code),console.log("this.db_file_name"+e.db_file_name),t.db_file_name){var a={entity_code:e.entity_code,file_of:e.props.id};Lt(e.req(a)).then(function(a){if(a){var n=a.data.file_rel_path;e.setState({action:"Remove",reset_btn:"hide_div",view_btn:"show_div",file_name:t.db_file_name,file_rel_path:n})}})}},e.handleUploadFile=function(t){if(t.preventDefault(),t.persist(),"Upload"==e.state.action){var a={file_of:e.props.id,cust_id:e.props.cust_id,aggr_doc_id:e.props.aggr_doc_id,file_data_type:e.state.file_data_type,file_data:e.state.file,file_name:e.state.file_name,file_type:e.state.file_type,country_code:e.country_code};a.file_data?Pt(e.req(a)).then(function(a){a&&e.processUploadResponse(a,t)}):alert("Please choose the file to upload")}else if("Remove"==e.state.action){if(window.confirm("Are you sure to remove the file? The file will be permanently deleted.")){var n={file_of:e.props.id,file_name:e.state.file_name,country_code:e.country_code,file_rel_path:e.state.file_rel_path,entity_type:e.entity_type,entity_id:e.entity_id};Bt(e.req(n)).then(function(t){e.setState({file:null,action:"Upload",reset_btn:"show_div",view_btn:"hide_div"}),t&&alert(t.message)})}}},e.handleViewButton=function(t){e.setState({modalBox:!0})},e.handleClose=function(t){e.setState({modalBox:!1})},e.loaded=!1,void 0==Object({NODE_ENV:"production",PUBLIC_URL:"",REACT_APP_ADMIN_API_ROOT:"/api/admin",REACT_APP_APP_API_ROOT:"/api/app",REACT_APP_CORE_API_ROOT:"/api/core",REACT_APP_URL:"http://app.flowglobal.net"}).REACT_APP_USE_ROOT_ONLY_DEV?e.root="":e.root="http://localhost:8000",e}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){this.setState({action:"Upload",reset_btn:"show_div",view_btn:"hide_div"})}},{key:"componentWillReceiveProps",value:function(e){console.log("componentWillReceiveProps----\x3e"),console.log(e),console.log(this.loaded),this.loaded||(console.log("componentWillReceiveProps - if"),"view"==e.mode&&(console.log("componentWillReceiveProps - if - if"),this.load_props_for_view(e)),this.loaded=!0)}},{key:"handleFileChange",value:function(e){var t=e.target.files;this.createImage(t[0])}},{key:"createImage",value:function(e){var t=this,a=new FileReader;a.onload=function(a){t.setState({file:a.target.result,file_type:e.type,file_name:e.name,file_data_type:"data-url"})},a.readAsDataURL(e)}},{key:"processUploadResponse",value:function(e,t){var a={target:{id:"orig_"+this.props.id,value:e.data.original_file_name}};t.target.id=this.props.id,t.target.value=e.data.file_name,t.target.value=e.data.file_name,"view"===this.props.mode?this.props.onEditUpload(t):"create"===this.props.mode&&(this.props.onCreateUpload(t),this.props.onCreateUpload(a)),this.setState({action:"Remove",reset_btn:"hide_div",view_btn:"show_div",file_rel_path:e.data.file_rel_path,file_name:e.data.file_name}),"create"===this.props.mode&&alert("File attached successfully. Please submit the form to complete file upload.")}},{key:"render",value:function(){var e=this;return l.a.createElement("div",{className:"row align-items-center"},l.a.createElement("div",{className:"col-md-6"},l.a.createElement("span",{className:"viewCus_label"},this.props.label?this.props.label:""),this.props.is_mandatory&&l.a.createElement("font",{className:"text-danger"},"   *  "),"cust_txn_file"==this.props.id&&l.a.createElement("a",{href:this.root+"/files/UGA/data_providers/sample_file.xls"},"( Download Sample File )"),"Remove"===this.state.action?l.a.createElement("b",null,l.a.createElement("label",null,this.state.file_name)):l.a.createElement("input",{type:"file",id:"file",onChange:function(t){return e.handleFileChange(t)},ref:function(t){return e.fileInput=t},className:"form-control"})),"cust_txn_file"==this.props.id?l.a.createElement("div",null):l.a.createElement("div",{className:this.state.view_btn},l.a.createElement("div",{className:"col-md-3"},l.a.createElement("input",{type:"button",className:"btn-sm btn-light",value:"View",onClick:this.handleViewButton}))),l.a.createElement("div",{id:this.props.id,value:this.state.file_name,className:"col-md-2",onClick:this.handleUploadFile},l.a.createElement("input",{type:"button",className:"btn-sm ".concat("Upload"==this.state.action?"btn-light":"btn-secondary"),value:this.state.action})),l.a.createElement("div",{className:this.state.reset_btn},l.a.createElement("div",{className:"col-md-3"},l.a.createElement("input",{type:"button",className:"btn-sm btn-secondary",value:"Reset File",onClick:this.resetFile}))),l.a.createElement("div",null,l.a.createElement(nt.a,{show:this.state.modalBox,onHide:this.handleClose,size:"Logo"==this.props.label?"sm":"lg"},l.a.createElement(nt.a.Header,{closeButton:!0,show:this.state.modalBox,onHide:this.handleClose},l.a.createElement(nt.a.Title,null,this.props.label)),l.a.createElement(nt.a.Body,null,"Logo"==this.props.label?l.a.createElement("img",{src:this.root+this.state.file_rel_path+"/m_"+this.state.file_name,alt:this.state.file_rel_path+"/m_"+this.state.file_name}):l.a.createElement("img",{src:this.root+this.state.file_rel_path+"/l_"+this.state.file_name,alt:this.state.file_rel_path+"/l_"+this.state.file_name})))))}}]),t}(ct),Rt=function(e){return L("/api/admin/person/create",e)},Ht=function(e){return L("/api/admin/user/app/password/email",e)},qt=function(e){return L("/api/admin/user/inv/password/email",e)},It=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={comp_name:"person",initials:null,date:new Date,create_user:!1},a.handleKeyUp=function(e){return function(t){a.props.onComponentChange(t,a.props.id);var n=t.target.value.charAt(0).toUpperCase();document.getElementById(e).value=n,a.props.data[e]=n}},a.handleUserCheckboxClick=function(e){e.target.checked?a.setState({create_user:!0}):a.setState({create_user:!1}),e.target.value=e.target.checked,a.handleChange(e)},a.sendResetPasswordMail=function(){var e={email:a.props.data.email_id};"app_user"===a.props.data.user?Ht(a.req(e)).then(function(e){a.resp(e)}):"investor_user"===a.props.data.user&&qt(a.req(e)).then(function(e){a.resp(e)})},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){Object(X.a)(Object(d.a)(t.prototype),"componentWillMount",this).call(this),this.setOptionsListToStateFromAppApi("common","list",this.def_req,["acc_prvdr_code","name"],"acc_prvdrs")}},{key:"render",value:function(){var e=this;return l.a.createElement("div",{id:"",className:"date-range"},l.a.createElement("div",{className:"row floatAdvancetitleBox agreementDateHeaderBox align-items-center no-margin"},l.a.createElement("div",{className:"col-md-4"},l.a.createElement("h4",{className:"no-margin headerTitle"},this.props.title?this.props.title:"")),l.a.createElement("div",{className:"col-md-1 ".concat(this.state.edit_button_style)},l.a.createElement(Et,{entity:this.props.entity,onClick:this.handleEdit})),l.a.createElement("div",{className:"col-md-1 ".concat(this.state.save_button_style)},l.a.createElement("input",{onClick:this.handleSave,type:"button",className:"btn btn-success btn-std",value:"Save"}))),l.a.createElement("div",{className:this.state.div_style},l.a.createElement("div",{className:"row no-margin labelTopgap align-items-end"},l.a.createElement("div",{className:"col-md-3"},l.a.createElement("span",null,"First Name"),l.a.createElement("font",{className:"text-danger"},"   *  "),l.a.createElement("input",{id:"first_name",value:this.props.data.first_name,onChange:this.toUpperHandleChange,type:"text",className:"upperCase form-control",required:"required"})),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("span",null,"Middle Name"),l.a.createElement("input",{id:"middle_name",onChange:this.toUpperHandleChange,value:this.props.data.middle_name,className:"form-control",type:"text"})),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("span",null,"Last Name"),l.a.createElement("font",{className:"text-danger"},"   *  "),l.a.createElement("input",{id:"last_name",value:this.props.data.last_name,onChange:this.toUpperHandleChange,className:"form-control",type:"text"})),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("span",null,"Date of birth"),l.a.createElement(Ft.a,{value:ge(this.props.data.dob),closeOnSelect:!0,onChange:function(t){e.handleDateChange("dob",t)},dateFormat:"DD MMM YYYY",timeFormat:!1,required:"required"}))),l.a.createElement("div",{className:"row no-margin labelTopgap align-items-end"},l.a.createElement("div",{className:"col-md-3"},l.a.createElement("span",null,"Gender"),l.a.createElement("font",{className:"text-danger"},"   *  "),l.a.createElement("select",{id:"gender",value:this.props.data.gender,onChange:this.handleChange,className:"form-control",type:"text"},this.getSelectOptions("gender"))),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("span",null,"Email ID"),"owner_person"===this.props.id?l.a.createElement("div",null):l.a.createElement("font",{className:"text-danger"},"   *  "),l.a.createElement("input",{id:"email_id",value:this.props.data.email_id,className:"form-control",onChange:this.handleChange,type:"text",required:"required",readOnly:this.props.data.user})),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("span",null,"Mobile Number"),l.a.createElement("font",{className:"text-danger"},"   *  "),l.a.createElement("input",{id:"mobile_num",value:this.props.data.mobile_num,onChange:this.handleChange,onKeyUp:this.handleMakeCopy("whatsapp"),className:"form-control",type:"text"})),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("span",null,"Alternate Biz Mobile Number 1"),l.a.createElement("font",{className:"text-danger"},"   *  "),l.a.createElement("input",{id:"alt_biz_mobile_num_1",value:this.props.data.alt_biz_mobile_num_1,onChange:this.handleChange,className:"form-control",type:"text"}))),l.a.createElement("div",{className:"row no-margin labelTopgap align-items-end"},l.a.createElement("div",{className:"col-md-3"},l.a.createElement("span",null,"Alternate Biz Mobile Number 2"),l.a.createElement("input",{id:"alt_biz_mobile_num_2",value:this.props.data.alt_biz_mobile_num_2,onChange:this.handleChange,className:"form-control",type:"text"})),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("span",null,"WhatsApp Number"),l.a.createElement("input",{id:"whatsapp",value:this.props.data.whatsapp,onChange:this.handleChange,className:"form-control",type:"text"})),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("span",null,"National ID"),l.a.createElement("font",{className:"text-danger"},"   *  "),l.a.createElement("input",{type:"text",id:"national_id",value:this.props.data.national_id,onChange:this.handleChange,className:"form-control",required:"required"})),!this.admin_roles.includes(g("role_codes"))&&l.a.createElement("div",{className:"col-md-3"},l.a.createElement("span",null,"Account Provider"),l.a.createElement("font",{className:"text-danger"},"   *  "),l.a.createElement("select",{id:"acc_prvdr_code",value:this.props.data.acc_prvdr_code,onChange:function(t){e.handleChange(t)},className:"form-control",type:"text",required:"required"},this.state.acc_prvdrs_dd))),"Business Owner Details"==this.props.title&&l.a.createElement("div",null,l.a.createElement("div",{className:"row no-margin labelTopgap align-items-center"},l.a.createElement("div",{className:"col-md-6"},l.a.createElement(Tt,{id:"photo_national_id",label:"National ID Photo",type:"image",mode:this.props.mode,person_id:this.props.data.id,db_file_name:this.props.data.photo_national_id,onEditUpload:function(t){e.handleChangeForEdit(t),e.handleSave(t,"reload")},onCreateUpload:this.handleChange}))),l.a.createElement("br",null),l.a.createElement("div",{className:"row no-margin labelTopgap align-items-center"},l.a.createElement("div",{className:"col-md-6"},l.a.createElement(Tt,{id:"photo_pps",label:"Passport Size Photo",person_id:this.props.data.id,db_file_name:this.props.data.photo_pps,type:"image",mode:this.props.mode,onEditUpload:function(t){e.handleChangeForEdit(t),e.handleSave(t,"reload")},onCreateUpload:this.handleChange}))),l.a.createElement("p",{className:"no-margin labelTopgap",style:{color:"red"}},"Note : Ensure the photos in the National ID, Passport Photo matches with the person in Selfie"),l.a.createElement("div",{className:"row no-margin labelTopgap align-items-center"},l.a.createElement("div",{className:"col-md-6"},l.a.createElement(Tt,{id:"photo_selfie",label:"Selfie with Customer",person_id:this.props.data.id,db_file_name:this.props.data.photo_selfie,type:"image",mode:this.props.mode,onEditUpload:function(t){e.handleChangeForEdit(t),e.handleSave(t,"reload")},onCreateUpload:this.handleChange})))),"person"===this.props.id&&l.a.createElement("div",{className:"row mb-5 mt-4 ml-2"},l.a.createElement("div",{class:"col-3"},null==this.props.data.user&&l.a.createElement("label",{className:"form-check-label"},l.a.createElement("input",{id:"create_user",type:"checkbox",className:"form-check-input",onClick:this.handleUserCheckboxClick}),"Create User"),this.props.data.user&&l.a.createElement("h5",null,ue(this.props.data.user))),l.a.createElement("div",{class:"col-3 ".concat(this.state.create_user?"":"d-none"," ")},l.a.createElement("select",{id:"role",name:"User Roles",onChange:this.handleChange,className:"form-control",type:"text",required:"required"},this.getSelectOptions("role_code"))),this.props.data.user&&l.a.createElement("div",{class:"col-3"},l.a.createElement(lt.a,{variant:"primary",onClick:this.sendResetPasswordMail,disabled:this.state.calling_api},"Send Reset Password E-mail"))),l.a.createElement("br",null)))}}]),t}(ct);It.defaultProps={designation:"text"};var zt=It,Wt=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={toList:!1,org:{},reg_address:{},head_person:{},market:{country_code:a.country_code,currency_code:a.currency_code}},a.handleSubmit=function(e){e.preventDefault();var t=a.state.market,n=a.state.org;n.reg_address=a.state.reg_address,n.country_code=a.country_code,t.org=n,t.head_person=a.state.head_person,t.head_person.country_code=a.country_code,ae(a.req({market:t})).then(function(e){e&&("success"===e.status?(a.setState({new_country_code:e.data}),a.setState({toList:!0}),alert("New Market created successfully")):alert(e.message+"\n"+JSON.stringify(e.data)))})},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){var e,t=this;if("view"===this.props.mode){var a=this.props.match.params.country_code;(e=this.req({country_code:a}),L("/api/admin/market/view",e)).then(function(e){e&&(t.market=e.data,t.setState({market:t.market,org:t.market.org,head_person:t.market.head_person,reg_address:t.market.org.reg_address}))})}else this.props.mode}},{key:"render",value:function(){return!0===this.state.toList?l.a.createElement(Y.a,{to:"/market/view/".concat(this.state.new_country_code)}):l.a.createElement("div",{className:"container text-labelblue"},l.a.createElement("h4",null,this.props.title+(this.state.market.name?" : "+this.state.market.name:"")),l.a.createElement("form",{id:"market_form",onSubmit:this.handleSubmit},l.a.createElement("div",{id:""},l.a.createElement(Ot,{id:"market",title:"Market Details",editable:"false",data:this.state.market,mode:this.props.mode,onComponentChange:this.handleComponentChange}),l.a.createElement("br",null),l.a.createElement("hr",null),l.a.createElement("br",null),l.a.createElement(Mt,{id:"org",title:"Organisation Details",entity:"market",data:this.state.org,mode:this.props.mode,onComponentChange:this.handleComponentChange}),l.a.createElement("br",null),l.a.createElement("hr",null),l.a.createElement(jt,{id:"reg_address",title:"Registered Address",entity:"market",data:this.state.reg_address,mode:this.props.mode,onComponentChange:this.handleComponentChange,onComponentReset:this.handleComponentReset}),l.a.createElement("br",null),l.a.createElement("hr",null),l.a.createElement(zt,{id:"head_person",title:"Market Head",entity:"market",data:this.state.head_person,mode:this.props.mode,onComponentChange:this.handleComponentChange}),l.a.createElement("br",null),l.a.createElement("input",{type:"button",className:"btn btn-primary ".concat("create"===this.props.mode?"show_button":"hide_button"),onClick:this.handleSubmit,value:"Create New Market"}))),l.a.createElement("br",null),l.a.createElement("br",null))}}]),t}(st),Vt=(a(37),function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).updateStatus=function(e){if(0!=window.confirm("Are you sure to change the status?")){var t=e.target.value.toLowerCase()+"d",n={id:e.target.id,status:t};"users"==e.target.name&&(e.target.name="persons");var l=Object(S.a)({},e.target.name,n);Ve(a.req(l)).then(function(e){e&&("success"===e.status?a.setState({status:t}):alert(e.message+"\n"+JSON.stringify(e.data)))})}},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){console.log("componentWillMount"),console.log(this.props.status),this.setState({status:this.props.status});var e=this.props.parent;e||("borrower"==(e=this.props.entity.slice(0,-1))?e="customer":"loan_product"==e?e="product":"loan_product_template"==e?e="template":"acc_provider"==e?e="acc_prvdr":"master_data_key"==e&&(e="data_key"));b(e,"create")?this.btn_style=!1:this.btn_style=!0,this.props.hasOwnProperty("btn_disabled")&&(this.btn_style=this.props.btn_disabled)}},{key:"componentWillReceiveProps",value:function(e){console.log("componentWillMount"),console.log(e.status),this.setState({status:e.status});var t=e.parent;t||("borrower"==(t=e.entity.slice(0,-1))?t="customer":"loan_product"==t?t="product":"loan_product_template"==t?t="template":"acc_provider"==t?t="acc_prvdr":"master_data_key"==t&&(t="data_key"));b(t,"create")?this.btn_style=!1:this.btn_style=!0}},{key:"render",value:function(){return console.log(this.state.status),this.props.hasOwnProperty("head")?l.a.createElement(l.a.Fragment,null,"1"==this.props.head&&l.a.createElement("td",null,l.a.createElement(ot.a,{className:"badge",pill:!0,variant:ke(this.state.status)},l.a.createElement("span",null,this.state.show_1l?Se(this.state.status):Ze(this.state.status)))),"2"==this.props.head&&l.a.createElement("td",null," ",l.a.createElement("input",{id:this.props.id,type:"button",name:this.props.entity,onClick:this.updateStatus,value:we(this.state.status),className:Ce(this.state.status)+" btn-sm",disabled:this.btn_style}))):l.a.createElement(l.a.Fragment,null,l.a.createElement("td",null,l.a.createElement(ot.a,{className:"badge",pill:!0,variant:ke(this.state.status)},l.a.createElement("span",null,this.state.show_1l?Se(this.state.status):Ze(this.state.status)))),l.a.createElement("td",null," ",l.a.createElement("input",{id:this.props.id,type:"button",name:this.props.entity,onClick:this.updateStatus,value:we(this.state.status),className:Ce(this.state.status)+" btn-sm",disabled:this.btn_style})))}}]),t}(ct)),Yt=a(13),Ut=a.n(Yt),Jt=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={marketList:null,toView:!1},a.handleClick=function(e){a.setState({country_code:e.target.id,toView:!0})},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){var e,t=this;(e=this.req(null),L("/api/admin/market/list",e)).then(function(e){if(e){var a=e.data.map(function(e,a){return l.a.createElement("tr",{key:a},l.a.createElement("td",null," ",Ze(e.country_code)),l.a.createElement("td",null," ",e.name," ",l.a.createElement("br",null)," ",e.inc_name),l.a.createElement("td",null," ",e.currency_code),l.a.createElement("td",null," ",Ze(e.time_zone)),l.a.createElement(Vt,{id:e.market_id,entity:"markets",status:e.status}),l.a.createElement("td",null,l.a.createElement(ft,{id:e.country_code,entity:"market",onClick:t.handleClick})))});t.setState({marketList:a}),Ut()("#marketTable").removeAttr("width").dataTable({order:[],columns:[{width:"10%"},{width:"10%"},{width:"10%"},{width:"10%"},{width:"10%"},{width:"10%"},{width:"10%"}],dom:"Bfrtip",buttons:["csv","excel","print"]})}})}},{key:"render",value:function(){return!0===this.state.toView?l.a.createElement(Y.a,{to:"/market/view/".concat(this.state.country_code)}):null!=this.state.marketList?l.a.createElement("div",{id:"datatable",className:"table-responsive"},l.a.createElement("h5",null,this.props.title||"Market List"),l.a.createElement("table",{id:"marketTable",className:"market-table table"},l.a.createElement("thead",{className:"text-info"},l.a.createElement("tr",null,l.a.createElement("th",null,"Country"),l.a.createElement("th",null,"Market Name"),l.a.createElement("th",null,"Currency"),l.a.createElement("th",null,"Time Zone"),l.a.createElement("th",null,"Status"),l.a.createElement("th",null,"Action"),l.a.createElement("th",null,"Action"))),l.a.createElement("tbody",null,this.state.marketList))):l.a.createElement("div",null,l.a.createElement("p",null,"No Markets Available ! "))}}]),t}(st),Kt=function(e){return L("/api/admin/lender",e)},Gt=function(e){return L("/api/admin/lender/account/stmt_search",e)},Qt=function(e){return L("/api/admin/account/create",e)},Zt=function(e){return L("/api/admin/account/list",e)},Xt=function(e){return L("/api/admin/account/make_primary",e)},$t=function(e){return L("/api/admin/account/update",e)},ea=a(25);function ta(e){var t=e.id,a=e.acc_purposes,r=e.initialAct_purpose,s=e.must,c=e.onChange,o=Object(n.useState)([]),i=Object(ea.a)(o,2),d=i[0],m=i[1];Object(n.useEffect)(function(){r&&m(r)},[r]);var u=Object(n.useState)(!1),_=Object(ea.a)(u,2),p=_[0],h=_[1],v=function(e,a){if(e)a!==d[0]&&(d.push(a),m(Object(ne.a)(d)));else if(!e){var n=d.indexOf(a);d.splice(n,1),m(Object(ne.a)(d))}c({target:{id:t,value:d}})};return l.a.createElement("div",{className:"accPur_box ".concat(p?"accPur_dropbox":"")},l.a.createElement("span",null,"Account Purpose"),s&&l.a.createElement("font",{className:"text-danger"},"\xa0* "),l.a.createElement("div",{type:"text",className:"form-control"},0===d.length?l.a.createElement("div",{style:{display:"inline-flex"}},l.a.createElement("span",null,"choose")):d.map(function(e,t){return l.a.createElement("div",{key:t,style:{display:"inline-flex"}},l.a.createElement("span",null,Ze(e,"account_purpose")),l.a.createElement("i",{class:"fa-solid fa-xmark accPur_close text-danger",onClick:function(){return v(!1,e)}}))})),l.a.createElement("i",{class:"fa-solid fa-angle-down text-white dropdownAccpur_Pos",onClick:function(){h(!p)},style:{cursor:"pointer"}}),p&&l.a.createElement("div",{className:"drop_style",onMouseLeave:function(){return h(!1)}},a.map(function(e,t){return"choose"!==e.props.children&&l.a.createElement("div",{key:t,className:"checkAndVal"},l.a.createElement("input",{type:"checkbox",checked:!!d.includes(e.props.value),onChange:function(t){return v(t.target.checked,e.props.value)}}),l.a.createElement("p",{className:"no-margin text-white",style:{cursor:"pointer",width:200},onClick:function(){return v(!d.includes(e.props.value),e.props.value)}},Ze(e.props.children)))})))}var aa=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={edit_account:{},acc_purpose_dd:{},initialAct_purpose:[]},a.handleSave=function(e){var t=a.state.edit_account;if("float_advance"!=t.acc_purpose||t.assessment_type){var n={account:a.state.edit_account};console.log(a.state.edit_account,"this.state.edit_account"),$t(a.req(n)).then(function(e){a.resp(e),e&&("success"===e.status?(alert(e.message),a.props.handleBackClick()):alert(e.message+"\n"+JSON.stringify(e.data)))})}else alert("Select Assessment Type for Float Advance account")},a.handleBackBtn=function(e){a.props.handleBackClick(e)},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){var e=this;this.getSelectOptionsFromResult(Qe("account_purpose","customer"),"acc_purpose",["data_code","data_value"]);var t={account_id:this.props.account_id};(function(e){return L("/api/admin/account/view",e)})(this.req(t)).then(function(t){e.resp(t),t&&("success"===t.status?(e.setState({edit_account:t.data.account}),e.setState({initialAct_purpose:t.data.account.acc_purpose})):alert(t.message+"\n"+JSON.stringify(t.data)))})}},{key:"render",value:function(){return this.state.toList?l.a.createElement(pa,{entity:this.props.entity,entity_id:this.props.entity_id}):l.a.createElement("div",{className:"text-labelblue"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-3"},l.a.createElement("span",null,l.a.createElement("b",null,"Account Provider")),"\xa0\xa0\xa0"),l.a.createElement("div",{className:"col-md-3"},l.a.createElement(Me,{logotype:this.state.edit_account.acc_prvdr_code}))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-3"},l.a.createElement("span",null,l.a.createElement("b",null,"Account Number")),"\xa0\xa0\xa0"),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("label",null,this.state.edit_account.acc_number))),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("div",{className:"row"},this.state.edit_account.branch&&l.a.createElement("div",{className:"col-md-3"},l.a.createElement("span",null,"Branch"),l.a.createElement("font",{className:"text-danger"}," "),l.a.createElement("select",{id:"branch",value:this.state.edit_account.branch,onChange:this.setChangeToState,className:"form-control",type:"text",required:"required"},this.getSelectOptions(this.state.edit_account.acc_prvdr_code.toLowerCase()+"_branches"))),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("span",null,"Account Holder Name"),l.a.createElement("font",{className:"text-danger"}," "),l.a.createElement("input",{type:"text",id:"holder_name",value:this.state.edit_account.holder_name,onChange:this.setChangeToState,className:"form-control",required:!0})),l.a.createElement("div",{className:"col-md-3"},l.a.createElement(ta,{id:"acc_purpose",onChange:this.setChangeToState,acc_purposes:this.state.acc_purpose_dd,initialAct_purpose:this.state.initialAct_purpose,must:!1})),this.state.initialAct_purpose.includes("float_advance")&&l.a.createElement("div",{className:"col-md-3"},l.a.createElement("span",null,"Assess By"),l.a.createElement("font",{className:"text-danger"}," "),l.a.createElement("select",{id:"assessment_type",value:this.state.edit_account.assessment_type,onChange:this.setChangeToState,className:"form-control",required:!0},l.a.createElement("option",{value:""},"choose"),l.a.createElement("option",{value:"self"},"Self Assessment")))),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("div",{className:""},l.a.createElement("br",null),l.a.createElement("input",{type:"button",value:"Save",className:"btn btn-success",onClick:this.handleSave,disabled:this.state.calling_api}),"\xa0\xa0\xa0",l.a.createElement("input",{type:"button",value:"Back",className:"btn btn-primary",onClick:this.handleBackBtn})),l.a.createElement("br",null))}}]),t}(ct),na=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).handlePaste=function(e){return e.preventDefault(),!1},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"form-group ".concat(this.props.className)},l.a.createElement("span",null,this.props.label),l.a.createElement("font",{className:"text-danger"}," * "),l.a.createElement("input",{id:this.props.id,style:{textSecurity:"disc",webkitTextSecurity:"disc"},onPaste:this.handlePaste,onChange:this.props.onChange,className:"form-control",required:!0})),l.a.createElement("div",{className:"form-group ".concat(this.props.className)},l.a.createElement("span",null,"Re-Enter ",this.props.label),l.a.createElement("font",{className:"text-danger"}," * "),l.a.createElement("input",{id:"reconfirm_"+this.props.id,onPaste:this.handlePaste,onChange:this.props.onChange,className:"form-control",required:!0})))}}]),t}(ct),la=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={comp_name:"account",toList:!1,acc_purposes_to_post:[]},a.addAccpurTostate=function(e){a.setState(function(t){return t.acc_purposes_to_post=e})},a.loadbranch=function(e){var t=e.target.value.toLowerCase(),n=(a.state.account,{master_data:{status:"enabled",data_key:t+"_branches",country_code:a.country_code}});Je(a.req(n)).then(function(e){e&&("success"===e.status?a.getSelectOptionsFromResult(e.data,"acc_branches",["data_code","data_value"]):alert(e.message+"\n"+JSON.stringify(e.data)))})},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){Object(X.a)(Object(d.a)(t.prototype),"componentWillMount",this).call(this),this.setOptionsListToStateFromAppApi("common","list",this.def_req,["acc_prvdr_code","name"],"acc_prvdrs"),this.setOptionsListToStateFromAppApi("common","list",this.def_req,["account_types","account_types"],"acc_types"),"lender"==this.props.entity&&this.setOptionsToStateFromApi("data_provider");var e=this.props.entity;"data_prvdr"==this.props.entity&&(e="data_provider"),this.getSelectOptionsFromResult(Qe("account_purpose",e),"acc_purpose",["data_code","data_value"])}},{key:"render",value:function(){var e=this;return l.a.createElement("form",{autoComplete:"off"},l.a.createElement("div",{id:"",className:"text-labelblue"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-3"},l.a.createElement("h4",null,"Account Details"))),"lender"==this.props.entity&&l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-3"},l.a.createElement("span",null,"Data Provider"),l.a.createElement("font",{className:"text-danger"},"   *  "),l.a.createElement("select",{id:"network_prvdr_code",onChange:this.handleChange,disabled:!0,value:this.acc_prvdr_code,className:"form-control",type:"text",required:"required"},this.state.data_provider_dd))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-3"},l.a.createElement("span",null,"Account Provider"),l.a.createElement("font",{className:"text-danger"},"   *  "),l.a.createElement("select",{id:"acc_prvdr_code",value:this.props.data.acc_prvdr_code,onChange:function(t){e.handleChange(t),e.loadbranch(t)},className:"form-control",type:"text",required:"required"},this.state.acc_prvdrs_dd)),l.a.createElement("div",{className:"col-md-3"},l.a.createElement(ta,{id:"acc_purpose",onChange:this.handleChange,acc_purposes:this.state.acc_purpose_dd,initialAct_purpose:null,must:!0})),this.state.acc_branches_dd&&l.a.createElement("div",{className:"col-md-3"},l.a.createElement("span",null,"Branch"),l.a.createElement("font",{className:"text-danger"}," "),l.a.createElement("select",{id:"branch",value:this.props.data.branch,onChange:this.handleChange,className:"form-control",type:"text",required:"required"},this.state.acc_branches_dd)),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("span",null,"Account Holder Name"),l.a.createElement("font",{className:"text-danger"}," "),l.a.createElement("input",{id:"holder_name",value:this.props.data.holder_name,onChange:this.toUpperHandleChange,className:"form-control",required:!0})))," ",l.a.createElement("br",null),this.props.data.acc_purpose&&!this.props.data.acc_purpose.includes("terminal_financing")&&l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-6"},l.a.createElement("div",{className:"row"},l.a.createElement(na,{className:"col-md-6 ",label:"Account Number",id:"acc_number",onChange:this.handleChange})))),l.a.createElement("br",null),this.props.data.acc_purpose&&this.props.data.acc_purpose.includes("float_advance")&&l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-3"},l.a.createElement("span",null,"Assess By"),l.a.createElement("font",{className:"text-danger"}," "),l.a.createElement("select",{id:"assessment_type",value:this.props.data.assessment_type,onChange:this.handleChange,className:"form-control",required:!0},l.a.createElement("option",{selected:!0,disabled:!0,value:"self"},"Self Assessment")))),l.a.createElement("br",null),console.log(this.props.data),this.props.data.acc_purpose&&this.props.data.acc_purpose.includes("float_advance")&&this.props.ap_alw_appr.includes(this.props.data.acc_prvdr_code)&&l.a.createElement("div",{className:"container acc_elig"},l.a.createElement("div",{className:"row justify-content-center"},l.a.createElement("div",{className:"col-md-7"},l.a.createElement("span",null,"Customer holds a, "),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("label",null,l.a.createElement("input",{id:"acc_elig_reason",type:"radio",name:"acc_elig_reason",value:"elig_on_txn_stmt",onChange:function(t){e.handleChange(t),e.props.onAccElig(t)},checked:"elig_on_txn_stmt"===this.props.data.acc_elig_reason}),"  Existing Account (ELIGIBLE based on transaction statement data) \xa0\xa0\xa0"),l.a.createElement("label",null,l.a.createElement("input",{id:"acc_elig_reason",type:"radio",name:"acc_elig_reason",value:"elig_on_comms",onChange:function(t){e.handleChange(t),e.props.onAccElig(t)},checked:"elig_on_comms"===this.props.data.acc_elig_reason}),"  Existing Account (ELIGIBLE based on commission) \xa0\xa0\xa0"),l.a.createElement("label",null,l.a.createElement("input",{id:"acc_elig_reason",type:"radio",name:"acc_elig_reason",value:"appr_inelig_on_comms",onChange:function(t){e.handleChange(t),e.props.onAccElig(t)},checked:"appr_inelig_on_comms"===this.props.data.acc_elig_reason}),"  Existing Account (NOT ELIGIBLE based on commission) \xa0\xa0\xa0"),l.a.createElement("label",null,l.a.createElement("input",{id:"acc_elig_reason",type:"radio",name:"acc_elig_reason",value:"no_data",onChange:function(t){e.handleChange(t),e.props.onAccElig(t)},checked:"no_data"===this.props.data.acc_elig_reason}),"  Existing Account (Do not have commission data) \xa0\xa0\xa0"),l.a.createElement("label",null,l.a.createElement("input",{id:"acc_elig_reason",type:"radio",name:"acc_elig_reason",value:"appr_unknown_elig_new_acc",onChange:function(t){e.handleChange(t),e.props.onAccElig(t)},checked:"appr_unknown_elig_new_acc"===this.props.data.acc_elig_reason}),"  New Account (Cannot determine Eligibilty) \xa0\xa0\xa0"))),l.a.createElement("br",null),("appr_unknown_elig_new_acc"===this.props.data.acc_elig_reason||"appr_inelig_on_comms"===this.props.data.acc_elig_reason)&&l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row justify-content-center"},l.a.createElement("div",{className:"col-md-4"},l.a.createElement("span",null,"Approve for ",this.props.acc_elig_days," days")),l.a.createElement("div",{className:"col-md-4"},l.a.createElement("span",null,"Validity untill ",this.props.validity_date.format("MMM Do YYYY")),l.a.createElement("br",null),l.a.createElement("br",null))),l.a.createElement("div",{className:"row justify-content-center"},l.a.createElement("div",{className:"col-md-5"},l.a.createElement("span",null,"This case requires COO approval"),l.a.createElement("font",{className:"text-danger"},"   *  ")," ",l.a.createElement("br",null),l.a.createElement("br",null))),l.a.createElement("div",{className:"row justify-content-center"},l.a.createElement("div",{className:"col-md-3"},l.a.createElement("label",{className:"checkbox-inline"},l.a.createElement("input",{id:"acc_elig_appr",type:"checkbox",onChange:this.props.onAccEligAppr}),l.a.createElement("span",null," Approve"))))))),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("div",{className:"text-white"},l.a.createElement("b",null,"Note:"),l.a.createElement("ul",null,l.a.createElement("li",null,"Adding a new account to the customer profile will initiate a ReKYC process."),l.a.createElement("li",null,"The account will be in disabled status until the ReKYC is approved by the auditor."),l.a.createElement("li",null,"Existing agreement will be inactivated."))))}}]),t}(ct),ra=function(e){return L("/api/admin/account/create_acc_txn",e)},sa=function(e){return L("/api/admin/account/ref_accounts",e)},ca=function(e){return L("/api/admin/account/search",e)},oa=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={txn_cat_name:"Ref Account",ref_acc_section_style:"show_div",cr_dr_style:"show_div",cr_dr:!1},a.addAccTxn=function(e){var t=a.props.entity+"_code",n={acc_id:a.props.account.id,country_code:a.country_code};n[t]=a.props.entity_id,"lender"==a.props.entity&&a.props.selected_acc_prvdr_code&&(n.network_prvdr_code=a.props.selected_acc_prvdr_code),sa(a.req({account:n})).then(function(e){e&&("success"===e.status?""!=e.data&&a.getSelectOptionsFromResult(e.data,"ref_accounts",["id","name"]):(a.setState({ref_acc_section_style:"hide_div",cr_dr_style:"hide_div"}),alert(e.message+"\n"+JSON.stringify(e.data))))});Ye(a.req({status:"enabled"})).then(function(e){e&&("success"===e.status?a.getSelectOptionsFromResult(e.data.list,"app_users",["id","name_email"]):alert(e.message+"\n"+JSON.stringify(e.data)))}),"disbursement"==a.props.account.acc_purpose?(a.setState({modalBox:!0}),a.acc_txn.acc_txn_type="capital_investment",a.acc_txn.acc_txn_category="credit",e.target.id="acc_txn_category",e.target.value="credit",a.handleCategoryChange(e,!1)):a.setState({modalBox:!0})},a.handleClose=function(e){a.setState({modalBox:!1})},a.handleAddTxn=function(e){a.acc_txn.acc_id=a.props.account.id;var t={country_code:a.country_code,acc_txn:a.acc_txn};ra(a.req(t)).then(function(e){e&&("success"===e.status?window.location.reload():alert(e.message+"\n"+JSON.stringify(e.data)))})},a.handleCheckbox=function(e){var t=null,n=!1;e.target.checked?(t="show_div",n=!0):(a.ref_acc_id.value="",t="disable_div",n=!1),a.setState({cr_dr:n,ref_acc_section_style:t})},a.handleCategoryChange=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n="disable_div",l="show_div",r=null;"credit"==e.target.value?r="Debit this A/C":"debit"==e.target.value?r="Credit this A/C":(l="hide_div",n="hide_div"),a.setState({txn_cat_name:r,cr_dr_style:l,ref_acc_section_style:n,cr_dr:!1}),a.handleSelfChange(e),t&&(a.ref_acc_id.value="")},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){this.acc_txn={},"lender"==this.props.entity&&(this.txn_type=[{id:"capital_investment",name:"Capital Investment"},{id:"repayment_internal_transfer",name:"Repayment Internal Transfer"},{id:"others",name:"Others"}],this.getSelectOptionsFromResult(this.txn_type,"acc_txn_type",["id","name"])),b(this.props.entity,"add_acc_txn")?this.add_txn_btn_style="show_div":this.add_txn_btn_style="disable_div"}},{key:"render",value:function(){var e=this;return l.a.createElement(l.a.Fragment,null,l.a.createElement("input",{type:"button",value:"Add Txn",onClick:this.addAccTxn,className:"btn btn-primary ".concat(this.add_txn_btn_style)}),l.a.createElement(nt.a,{show:this.state.modalBox,onHide:this.handleClose,size:"xl"},l.a.createElement(nt.a.Header,{closeButton:!0,show:this.state.modalBox,onHide:this.handleClose},l.a.createElement(nt.a.Title,null,l.a.createElement("h3",null,"Add Transaction for ",Oe(this.props.account)))),l.a.createElement(nt.a.Body,null,l.a.createElement("div",{className:"container date-range"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-3"},l.a.createElement("span",null,"Transaction Category"),l.a.createElement("font",{className:"text-danger"},"   *  ")),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("select",{id:"acc_txn_category",value:this.acc_txn.acc_txn_category,onChange:this.handleCategoryChange,className:"form-control",type:"text",required:!0},l.a.createElement("option",{value:""},"choose"),l.a.createElement("option",{value:"credit"},"Credit"),l.a.createElement("option",{value:"debit"},"Debit"),l.a.createElement("option",{value:"balance"},"Opening Balance"))),l.a.createElement("div",{className:"col-md-3 ".concat(this.state.cr_dr_style)},l.a.createElement("span",null,l.a.createElement("input",{id:"cr_dr",checked:this.state.cr_dr,type:"checkbox",onChange:this.handleCheckbox}),"   ",this.state.txn_cat_name)),l.a.createElement("div",{className:"col-md-3 ".concat(this.state.ref_acc_section_style)},l.a.createElement("select",{id:"ref_acc_id",defaultValue:this.selected.ref_accounts,onChange:this.handleSelfChange,ref:function(t){e.ref_acc_id=t},className:"form-control",required:"required"},this.state.ref_accounts_dd))),l.a.createElement("br",null),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-3"},l.a.createElement("span",null,"Transaction Type"),l.a.createElement("font",{className:"text-danger"},"   *  ")),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("select",{id:"acc_txn_type",defaultValue:this.acc_txn.acc_txn_type,onChange:this.handleSelfChange,className:"form-control",required:"required"},this.state.acc_txn_type_dd)),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("span",null,"Amount ( ",this.currency_code," )"),l.a.createElement("font",{className:"text-danger"},"   *  ")),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("input",{id:"amount",type:"text",className:"form-control",onChange:this.handleSelfChange,required:!0}))),l.a.createElement("br",null),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-3"},l.a.createElement("span",null,"Transaction Mode"),l.a.createElement("font",{className:"text-danger"},"   *  ")),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("select",{id:"txn_mode",onChange:this.handleSelfChange,className:"form-control",required:"required"},this.getSelectOptions("transaction_mode"))),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("span",null,"Transaction Date"),l.a.createElement("font",{className:"text-danger"},"   *  ")),l.a.createElement("div",{className:"col-md-3"},l.a.createElement(Ft.a,{closeOnSelect:!0,onChange:function(t){e.handleSelfDateChange("txn_date",t)},dateFormat:"DD MMM YYYY",timeFormat:!1,required:"required"}))),l.a.createElement("br",null),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-3"},l.a.createElement("span",null,"Transaction ID")),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("input",{id:"txn_id",type:"text",className:"form-control spacing",onChange:this.handleSelfChange})),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("span",null,"Txn Executed By"),l.a.createElement("font",{className:"text-danger"},"   *  ")),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("select",{id:"txn_exec_by",onChange:this.handleSelfChange,className:"form-control",type:"text",required:"required"},this.state.app_users_dd))),l.a.createElement("br",null),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-3"},l.a.createElement("span",null,"Remarks")),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("input",{type:"text",id:"remarks",onChange:this.handleSelfChange,className:"form-control",required:"required"}))))),l.a.createElement(nt.a.Footer,null,l.a.createElement(lt.a,{variant:"primary",onClick:this.handleAddTxn},"Add"),l.a.createElement(lt.a,{variant:"secondary",onClick:this.handleClose},"Close"))))}}]),t}(ct),ia=a(89),da=a(84),ma=function(){return l.a.createElement("div",null,l.a.createElement("p",{className:"no-margin text-center",style:{paddingTop:10,color:"#656d83"}},"No data found"))};function ua(e){var t=e.row_data,a=e.column_data,n=e.showPag,r=e.minRow,s=e.resizable,c=e.defaultSorted,o=e.defaultPageSize,i=e.sortable,d=e.exportCSV,m=e.csvFile,u=e.csvData,_=e.timeServer,p=e.excessTimeaction,h=e.appliedRowblink,v=e.appliedRowblinktime,g=e.approveRowblinktime,f=e.paymentRowblinktime,E=e.csvstyle;return l.a.createElement(l.a.Fragment,null,d&&l.a.createElement("div",{className:E?" export_button_acordin export_btn ":"export_btn text-right",style:{padding:"10px !important"}},l.a.createElement(da.CSVLink,{filename:"".concat(m,".csv"),data:u,className:"btn btn-secondary btn-std",style:{color:"#fff"}},"Export as CSV")),l.a.createElement("div",{className:"table-responsive ".concat(0===t.length?"no_scroll":""," customer_list_reactTable border_bot")},l.a.createElement(ia.a,{NoDataComponent:ma,showPaginationBottom:n&&t.length>0&&!0,minRows:r,data:t,columns:a,resizable:s,sortable:i,defaultPageSize:o,defaultSorted:c,getTrProps:function(e,t,a){return function(e,t,a){if(p&&t){if(h)return f?{className:re.a.duration(re()(_).diff(re()(t.original.updated_at)))._milliseconds>6e4*f?"redBlink_table":""}:{className:re.a.duration(re()(_).diff(re()(t.original.loan_appl_date)))._milliseconds>6e4*v?"redBlink_table":""};if(!h){var n=re.a.duration(re()(_).diff(re()(t.original.loan_approved_date))),l=re.a.duration(re()(_).diff(re()(t.original.loan_appl_date)));return{className:n._milliseconds>6e4*g||l._milliseconds>6e4*g?"redBlink_table":""}}}return{}}(0,t)}})))}var _a=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={accountList:null,editScreen:!1,row_data:[]},a.updatePrimaryAccount=function(e){var t={};if("customer"===a.props.entity){var n=a.props.entity_id;t={id:e.target.id,cust_id:n,is_primary_acc:!0}}else if("lender"===a.props.entity){var l=a.props.entity_id;t={id:e.target.id,lender_code:l,is_primary_acc:!0}}var r={account:t};Xt(a.req(r)).then(function(e){e&&("success"===e.status?window.location.reload():alert(e.message+"\n"+JSON.stringify(e.data)))})},a.handleEditAccount=function(e){a.props.onEditClick(e)},a.handleAccTxns=function(e){var t=e.target.id;a.entity_id=a.props.entity_id,a.entity=a.props.entity,window.open("/acc_txns/"+a.entity+"/"+a.entity_id+"/"+t,"_blank")},a.list_accounts=function(e){Zt(a.req({account:e})).then(function(e){e&&a.setState(function(t){return t.row_data=e.data})});var t=a.getListColumns();a.setState({accountList:t})},a.getListColumns=function(){var e=["super_admin","app_support","it_admin"].includes(g("role_codes"));return[{Header:"ACC PRVDR",id:"acc_prvdr_code",accessor:function(e){return l.a.createElement(Me,{logotype:e.acc_prvdr_code})}},{Header:"A/C Number",accessor:"acc_number"},{Header:"Account Purpose",id:"acc_purpose",accessor:function(e){return l.a.createElement("div",null,Fe(e.acc_purpose))}},{Header:"Branch",id:"branch",accessor:function(e){return l.a.createElement("div",null,Ze(e.branch))}},{Header:function(){return l.a.createElement("div",{className:"tableAmount_rightAlign"},"Balance")},id:"balance",accessor:function(e){return l.a.createElement("div",{className:"tableAmount_rightAlign"},Ne(e.balance,a.currency_code))}},{Header:function(){return l.a.createElement("div",null,"Status")},id:"status",accessor:function(t){return l.a.createElement("div",{className:"tableAmount_centerAlign"},l.a.createElement(Vt,{className:"text-center",head:"1",id:t.id,parent:a.props.entity,entity:"accounts",status:t.status,btn_disabled:"disabled"===t.status&&!e}))}},{Header:function(){return l.a.createElement("div",null,"Action")},id:"Action",accessor:function(t){return l.a.createElement(Vt,{head:"2",id:t.id,parent:a.props.entity,entity:"accounts",status:t.status,btn_disabled:"disabled"===t.status&&!e})}},{Header:"Action",id:"action",accessor:function(e){return l.a.createElement("input",{id:e.id,type:"button",value:"Configure",onClick:a.handleEditAccount,className:"btn btn-primary btn-std ".concat(a.configure_btn_style)})}},{Header:"Action",id:"2",accessor:function(e){return l.a.createElement("input",{id:e.id,type:"button",value:"View Txns",onClick:a.handleAccTxns,className:"btn btn-primary btn-std ".concat(a.view_txn_btn_style)})}},{Header:"Action",show:"lender"==a.props.entity,id:"3",accessor:function(e){return l.a.createElement(oa,{selected_acc_prvdr_code:a.selected_acc_prvdr_code,account:e,id:"acc_txn",entity:a.props.entity,entity_id:a.props.entity_id})}}]},a.changeDataPrvdr=function(e){Ut()("#table2").DataTable().destroy(),a.selected_acc_prvdr_code=e.target.value,a.account.lender_acc_prvdr_code=e.target.value,a.list_accounts(a.account)},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"makePrimaryButton",value:function(e,t,a){return 0==t&&"enabled"===a?l.a.createElement("input",{id:e,type:"button",className:"btn btn-primary",onClick:this.updatePrimaryAccount,value:"Make Primary A/C "}):null}},{key:"componentWillMount",value:function(){var e=this.country_code;this.account={},this.table_id=this.props.entity_id,this.account={country_code:e},"customer"==this.props.entity?(this.account.cust_id=this.props.entity_id,this.list_accounts(this.account)):"lender"==this.props.entity?(this.account.lender_code=this.props.entity_id,this.setOptionsToStateFromApi("acc_prvdr")):"acc_prvdr"==this.props.entity&&(this.account.acc_prvdr_code=this.props.entity_id,this.list_accounts(this.account)),b(this.props.entity,"view_acc_txn")?this.view_txn_btn_style="show_div":this.view_txn_btn_style="disable_div",b(this.props.entity,"create_account")?this.configure_btn_style="show_div":this.configure_btn_style="disable_div"}},{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,"lender"==this.props.entity&&l.a.createElement("div",{className:"row text-labelblue"},l.a.createElement("div",{className:"col-md-3"},l.a.createElement("span",null,"Account Provider"),l.a.createElement("font",{className:"text-danger"},"   *  "),l.a.createElement("select",{id:"network_prvdr_code",onChange:this.changeDataPrvdr,className:"form-control",type:"text",required:"required"},this.state.acc_prvdr_dd))),null!=this.state.accountList&&l.a.createElement(l.a.Fragment,null,l.a.createElement(ua,{showPag:!1,minRow:0,row_data:void 0!==this.state.row_data?this.state.row_data:[],column_data:this.state.accountList,resizable:!1,defaultSorted:[{id:"acc_prvdr_code",desc:!0}]})),null==this.state.accountList&&l.a.createElement("div",null,l.a.createElement("p",null,"No Accounts Available ! ")))}}]),t}(st),pa=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={view:"account_list",acc_elig_appr:!1},a.handleSubmit=function(e){e.preventDefault();var t=a.state.account;t.country_code=a.country_code,t.network_prvdr_code=t.acc_prvdr_code,t.entity=a.props.entity,a.ap_alw_appr.includes(t.acc_prvdr_code)&&t.acc_purpose.includes("float_advance")&&null==a.state.account.acc_elig_reason?alert("Please choose the eligibity type"):(["appr_unknown_elig_new_acc","appr_inelig_on_comms"].includes(a.state.account.acc_elig_reason)&&a.state.acc_elig_appr&&(t.acc_elig_appr=a.state.acc_elig_appr,t.validity_date=a.validity_date.format("YYYY-MM-DD")),"customer"==a.props.entity?(t.cust_id=a.props.entity_id,t.acc_purpose.includes("float_advance")&&(t.assessment_type="self"),t.acc_purpose.includes("terminal_financing")&&(t.acc_number=t.reconfirm_acc_number="dummy")):"lender"==a.props.entity?(t.lender_code=a.props.entity_id,t.network_prvdr_code=t.acc_prvdr_code):"acc_prvdr"==a.props.entity&&(t.acc_prvdr_code=a.props.entity_id),Qt(a.req({account:t})).then(function(e){a.resp(e),e&&("success"===e.status?(alert(e.message),a.setState({view:"account_list"})):alert(e.message+"\n"+JSON.stringify(e.data)))}))},a.handleAddAccountClick=function(e){a.setState({view:"account",account:{is_primary_acc:!1,holder_name:a.props.cust_name,acc_number:a.props.dp_cust_id,acc_prvdr_code:a.acc_prvdr_code}})},a.handleBackClick=function(e){a.create_acc_btn="show_div",a.setState({view:"account_list"})},a.handleEdit=function(e){a.setState({view:"edit_account",account_id:e.target.id})},a.handleAccElig=function(e){a.create_acc_btn="disable_div",a.setState({acc_elig_appr:!1}),"no_data"!==a.state.account.acc_elig_reason?["appr_unknown_elig_new_acc","appr_inelig_on_comms"].includes(a.state.account.acc_elig_reason)&&a.state.acc_elig_appr?(a.create_acc_btn="show_div",a.setState({acc_elig_appr:!0})):["elig_on_comms","elig_on_txn_stmt"].includes(a.state.account.acc_elig_reason)&&(a.create_acc_btn="show_div"):alert("Cannot add a MTN account without commission data")},a.handleAccEligAppr=function(e){a.state.acc_elig_appr?(a.setState({acc_elig_appr:!1}),a.create_acc_btn="disable_div"):(a.setState({acc_elig_appr:!0}),a.create_acc_btn="show_div")},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){this.ap_alw_appr=k("acc_prvdrs_allow_approval"),this.acc_elig_days=k("acc_elig_validity_days");var e=new Date;this.validity_date=re()(e).add(this.acc_elig_days,"day");var t=this.props.entity;this.create_acc_btn="show_div",b(t,"create_account")?this.create_acc_btn_style="show_div":this.create_acc_btn_style="disable_div","account_view"==this.props.view&&this.setState({view:"account_view"})}},{key:"createUI",value:function(e){var t=null;return"account"==e?t=l.a.createElement("div",null,l.a.createElement("input",{type:"button",onClick:this.handleBackClick,value:"Back",className:"btn btn-primary"}),l.a.createElement(la,{id:"account",entity:this.props.entity,title:"Account Provider",data:this.state.account,mode:this.props.mode,onComponentChange:this.handleComponentChange,onAccElig:this.handleAccElig,onAccEligAppr:this.handleAccEligAppr,ap_alw_appr:this.ap_alw_appr,validity_date:this.validity_date,acc_elig_days:this.acc_elig_days}),l.a.createElement("br",null),l.a.createElement("input",{type:"button",className:"btn btn-primary ".concat(this.create_acc_btn),onClick:this.handleSubmit,value:"Create New Account"})):"account_list"==e?t=l.a.createElement("div",null,l.a.createElement("input",{type:"button",className:"btn btn-primary account ".concat(this.create_acc_btn_style),onClick:this.handleAddAccountClick,value:"Add New Account"}),l.a.createElement(_a,{entity:this.props.entity,entity_id:this.props.entity_id,onEditClick:this.handleEdit,disabled:this.state.calling_api})):"edit_account"==e&&(t=l.a.createElement("div",null,l.a.createElement(aa,{id:"edit_account",entity:this.props.entity,entity_id:this.props.entity_id,account_id:this.state.account_id,handleBackClick:this.handleBackClick}))),l.a.createElement("div",null,t)}},{key:"render",value:function(){return l.a.createElement("div",{className:"container"},this.createUI(this.state.view),l.a.createElement("br",null),l.a.createElement("br",null))}}]),t}(st),ha=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={lenderList:null,toView:!1,lender_code:null,modalBox:!1,accountList:null,rowdatas:[],columndatas:[]},a.handleClick=function(e){a.setState({lender_code:e.target.id,toView:!0})},a.handleViewAccountsClick=function(e){a.setState({lender_code:e.target.id}),a.setState({modalBox:!0})},a.handleModalClose=function(e){a.setState({modalBox:!1})},a.changeHandler=function(e){var t=e,n=a.state.rowdatas.filter(function(e){return null!==e.name&&e.name.toLowerCase().includes(t.toLowerCase())||null!==e.lender_type&&e.lender_type.toLowerCase().includes(t.toLowerCase())});a.setState(function(e){return e.copy=n})},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){var e=this;b("lender","list_account")?this.btn_style="show_div":this.btn_style="disable_div";var t,a=this.country_code;(t=this.req({country_code:a}),L("/api/admin/lender/list",t)).then(function(t){t&&(e.setState(function(e){return e.rowdatas=t.data}),e.setState(function(e){return e.copy=t.data}),e.setState(function(t){return t.columndatas=e.columndatas()}))})}},{key:"columndatas",value:function(){var e=this;return[{Header:"Name",id:"name",accessor:function(e){return e.name}},{Header:"Lender Type",id:"lender_type",accessor:function(e){return Ze(e.lender_type)}},{Header:"Status",id:"status",accessor:function(e){return l.a.createElement(Vt,{id:e.id,entity:"lenders",status:e.status,head:1})}},{Header:"Action",id:"action",accessor:function(e){return l.a.createElement(Vt,{id:e.id,entity:"lenders",status:e.status,head:2})}},{Header:"Action",id:"lender_code",accessor:function(t){return l.a.createElement(ft,{id:t.lender_code,entity:"lender",onClick:e.handleClick})}},{Header:"Account",id:"ids",accessor:function(t){return l.a.createElement("input",{id:t.lender_code,type:"submit",onClick:e.handleViewAccountsClick,value:"Accounts",className:"btn btn-primary ".concat(e.btn_style)})}}]}},{key:"render",value:function(){var e=this;return!0===this.state.toView?l.a.createElement(Y.a,{to:"/lender/view/".concat(this.state.lender_code)}):null!=this.state.copy?l.a.createElement("div",{className:"container containerTopmargin max-width no-padding"},l.a.createElement("div",null,l.a.createElement("h4",null,this.props.title||"Lender List"),l.a.createElement("div",{className:"d-flex justify-content-between align-items-center",style:{padding:5}},l.a.createElement("p",{className:"no-margin text-white"},l.a.createElement("b",null,"Total Entries : ",this.state.copy.length)),l.a.createElement("div",{style:{position:"relative"}},l.a.createElement("i",{class:"fa-solid fa-magnifying-glass search_pos"}),l.a.createElement("input",{placeholder:"Search here",className:"search_posInput",onChange:function(t){return e.changeHandler(t.target.value)}}))),l.a.createElement(ua,{showPag:!0,minRow:0,row_data:void 0!==this.state.copy?this.state.copy:[],column_data:this.state.columndatas,resizable:!1,defaultSorted:[{id:"name",desc:!1}],exportCSV:!0,csvFile:"Lender Lists",csvData:this.state.copy})),l.a.createElement(nt.a,{show:this.state.modalBox,onHide:this.handleModalClose,size:"xl"},l.a.createElement(nt.a.Header,{closeButton:!0,show:this.state.modalBox,onHide:this.handleModalClose},l.a.createElement(nt.a.Title,null,"Lender Accounts : ",this.state.lender_code)),l.a.createElement(nt.a.Body,null,l.a.createElement(pa,{entity:"lender",entity_id:this.state.lender_code})),l.a.createElement(nt.a.Footer,null,l.a.createElement(lt.a,{variant:"secondary",onClick:this.handleModalClose},"Close")))):l.a.createElement("div",null,l.a.createElement("p",null,"No Lenders Available ! "))}}]),t}(st),va=function(e){return L("/api/admin/data_provider",e)},ga=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={dataproviderList:null,toView:!1,data_provider_code:null},a.handleViewClick=function(e){a.setState({data_provider_code:e.target.id,toView:!0})},a.handleViewAccountsClick=function(e){a.setState({data_prvdr_code:e.target.id}),a.setState({modalBox:!0})},a.handleModalClose=function(e){a.setState({modalBox:!1})},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){var e,t=this,a=this.country_code;b("data_prvdr","list_account")?this.btn_style="show_div":this.btn_style="disable_div",(e=this.req({country_code:a}),L("/api/admin/data_provider/list",e)).then(function(e){if(e){var a=e.data.map(function(e,a){return l.a.createElement("tr",{key:a},l.a.createElement("td",null," ",e.name),l.a.createElement("td",null," ",Ze(e.provider_type)),l.a.createElement(Vt,{id:e.id,entity:"data_prvdrs",status:e.status}),l.a.createElement("td",null,l.a.createElement(ft,{id:e.data_prvdr_code,entity:"data_prvdr",onClick:t.handleViewClick})),l.a.createElement("td",{key:a}," ",l.a.createElement("input",{id:e.data_prvdr_code,type:"submit",onClick:t.handleViewAccountsClick,value:"Accounts",className:"btn-sm btn-primary ".concat(t.btn_style)})))});t.setState({dataproviderList:a}),Ut()("#dp_list").removeAttr("width").dataTable({order:[],columns:[{width:"5%"},{width:"10%"},{width:"5%"},{width:"5%"},{width:"5%"},{width:"5%"}],dom:"Bfrtip",buttons:["csv","excel","print"]})}})}},{key:"render",value:function(){return!0===this.state.toView?l.a.createElement(Y.a,{to:"/data_provider/view/".concat(this.state.data_provider_code)}):null!=this.state.dataproviderList?l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{id:"datatable",className:"table-responsive"},l.a.createElement("h5",null,this.props.title||"Data Provider List"),l.a.createElement("table",{id:"dp_list",className:"list"},l.a.createElement("thead",{className:"text-info"},l.a.createElement("tr",null,l.a.createElement("th",null,"Name"),l.a.createElement("th",null,"Data Provider Type"),l.a.createElement("th",null,"Status"),l.a.createElement("th",null,"Action"),l.a.createElement("th",null,"Action"),l.a.createElement("th",null,"Account"))),l.a.createElement("tbody",null,this.state.dataproviderList))),l.a.createElement(nt.a,{show:this.state.modalBox,onHide:this.handleModalClose,size:"xl"},l.a.createElement(nt.a.Header,{closeButton:!0,show:this.state.modalBox,onHide:this.handleModalClose},l.a.createElement(nt.a.Title,null,"Data Provider Accounts : ",this.state.data_prvdr_code)),l.a.createElement(nt.a.Body,null,l.a.createElement(pa,{entity:"data_prvdr",entity_id:this.state.data_prvdr_code})),l.a.createElement(nt.a.Footer,null,l.a.createElement(lt.a,{variant:"secondary",onClick:this.handleModalClose},"Close")))):l.a.createElement("div",null,l.a.createElement("p",null,"No Data Providers Available ! "))}}]),t}(st),fa=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={comp_name:"lender"},a.handleNameChange=function(e){var t=a.country_code.charAt(0);t+=e.target.value.substring(0,3).toUpperCase(),a.props.data.lender_code=t,a.toUpperHandleChange(e)},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;return l.a.createElement("div",{id:""},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-2"},l.a.createElement("h4",null,this.props.title?this.props.title:"Lender Details")),l.a.createElement("div",{className:"col-md-1 ".concat(this.state.edit_button_style)},l.a.createElement(Et,{entity:"lender",onClick:this.handleEdit})),l.a.createElement("div",{className:"col-md-1 ".concat(this.state.save_button_style)},l.a.createElement("input",{onClick:this.handleSave,type:"button",className:"btn btn-success",value:"Save"}))),l.a.createElement("div",{className:this.state.div_style},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-3"},l.a.createElement("span",null,"Lender Name"),l.a.createElement("font",{className:"text-danger"},"   *  "),l.a.createElement("input",{id:"name",value:this.props.data.name,onChange:"create"==this.props.mode?this.handleNameChange:this.toUpperHandleChange,required:"required",className:"upperCase form-control"})),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("span",null,"Lender Type"),l.a.createElement("font",{className:"text-danger"},"   *  "),l.a.createElement("select",{id:"lender_type",value:this.props.data.lender_type,onChange:this.handleChange,required:"required",className:"form-control"},this.getSelectOptions("lender_type"))),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("span",null,"Lender Code"),l.a.createElement("font",{className:"text-danger"}," * "),l.a.createElement("input",{type:"text",id:"lender_code",disabled:!0,value:this.props.data.lender_code,maxLength:4,onChange:this.handleChange,required:!0,className:"form-control"}))),l.a.createElement("br",null),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-6"},l.a.createElement(Tt,{id:"lender_logo",label:"Logo",lender_id:this.props.data.id,db_file_name:this.props.data.lender_logo,type:"image",mode:this.props.mode,onCreateUpload:this.handleChange,lender_code:this.props.data.lender_code,onEditUpload:function(t){e.handleChangeForEdit(t),e.handleSave(t)}})))))}}]),t}(ct),Ea=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={dropdown_div_style:"disable_div"},a.handleClick=function(e){"disable_div"===a.state.dropdown_div_style?(a.setOptionsToStateFromApi("org"),a.setState({dropdown_div_style:"show_div"})):(a.setState({dropdown_div_style:"disable_div"}),a.props.resetOrgNAddr(e))},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return l.a.createElement("div",{className:"row mt-3"},l.a.createElement("div",{className:"col-md-3 mt-3"},l.a.createElement("span",null,l.a.createElement("h4",null,l.a.createElement("input",{type:"checkbox",id:"checkbox",onClick:this.handleClick}),"\xa0\xa0","Choose Organisation"))),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("span",null,l.a.createElement("div",{id:"",className:"".concat(this.state.dropdown_div_style)},l.a.createElement("select",{id:"name_list",onChange:this.props.onChange,className:"form-control",type:"text",required:"required"},this.state.org_dd)))))}}]),t}(ct),ba=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={toList:!1,org:{},reg_address:{},contact_person:{},lender:{}},a.handleSubmit=function(e){e.preventDefault();var t=a.state.lender,n=a.state.org;n.reg_address=a.state.reg_address,n.country_code=a.country_code,t.country_code=a.country_code,t.org=n,t.contact_person=a.state.contact_person,t.contact_person.country_code=a.country_code,Kt(a.req({lender:t})).then(function(e){e&&("success"===e.status?(a.setState({new_lender_code:e.data}),a.setState({toList:!0}),alert("New Lender created succesfully!")):alert(e.message+"\n"+JSON.stringify(e.data)))})},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){var e=this;if("view"===this.props.mode){var t={lender_code:this.props.match.params.lender_code};(function(e){return L("/api/admin/lender/view",e)})(this.req(t)).then(function(t){t&&(e.lender=t.data,e.setState({lender:e.lender,org:e.lender.org,contact_person:e.lender.contact_person,reg_address:e.lender.org.reg_address}))})}}},{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return!0===this.state.toList?l.a.createElement(Y.a,{to:"/lender/view/".concat(this.state.new_lender_code)}):l.a.createElement("div",{className:"container"},l.a.createElement("h5",null,this.props.title+(this.state.lender.name?" : "+this.state.lender.name:"")),l.a.createElement("form",{id:"lender_form",onSubmit:this.handleSubmit},l.a.createElement("div",{id:"",className:"text-labelblue"},l.a.createElement(fa,{id:"lender",title:"Lender Details",data:this.state.lender,mode:this.props.mode,onComponentChange:this.handleComponentChange}),l.a.createElement("br",null),l.a.createElement("hr",null),"create"===this.props.mode&&l.a.createElement(Ea,{id:"data_provider_choose_org",resetOrgNAddr:this.handleResetOrgNAddr,onChange:this.handleOrgChange}),l.a.createElement("div",{className:"".concat(this.state.div_style)},l.a.createElement(Mt,{id:"org",entity:"lender",title:"Organisation Details",data:this.state.org,mode:this.props.mode,onComponentChange:this.handleComponentChange}),l.a.createElement("br",null),l.a.createElement("hr",null),l.a.createElement(jt,{id:"reg_address",entity:"lender",title:"Registered Address",data:this.state.reg_address,mode:this.props.mode,onComponentChange:this.handleComponentChange,onComponentReset:this.handleComponentReset}),l.a.createElement("br",null),l.a.createElement("hr",null)),l.a.createElement(zt,{id:"contact_person",entity:"lender",title:"Contact Person",data:this.state.contact_person,mode:this.props.mode,onComponentChange:this.handleComponentChange}),l.a.createElement("br",null),l.a.createElement("input",{type:"button",className:"btn btn-primary ".concat("create"===this.props.mode?"show_button":"hide_button"),onClick:this.handleSubmit,value:"Create New Lender"}))),l.a.createElement("br",null),l.a.createElement("br",null))}}]),t}(st),ya=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={comp_name:"data_provider"},a.handleCodeChange=function(e){var t=e.target.value;a.setState(Object(S.a)({},e.target.value,a.country_code.charAt(0)+t)),a.handleChange(e)},a.handleNameChange=function(e){var t=a.country_code.charAt(0);t+=e.target.value.substring(0,3).toUpperCase(),document.getElementById("data_prvdr_code").value=t,a.props.data.data_prvdr_code=t,a.toUpperHandleChange(e)},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;return l.a.createElement("div",{id:""},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-2"},l.a.createElement("h4",null,this.props.title?this.props.title:"Data Provider")),l.a.createElement("div",{className:"col-md-1 ".concat(this.state.edit_button_style)},l.a.createElement(Et,{entity:"data_prvdr",onClick:this.handleEdit})),l.a.createElement("div",{className:"col-md-1 ".concat(this.state.save_button_style)},l.a.createElement("input",{onClick:this.handleSave,type:"button",className:"btn btn-success",value:"Save"}))),l.a.createElement("div",{className:this.state.div_style},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-3"},l.a.createElement("span",null,"Data Provider Name"),l.a.createElement("font",{className:"text-danger"},"   *  "),l.a.createElement("input",{id:"name",value:this.props.data.name,onChange:"create"==this.props.mode?this.handleNameChange:this.toUpperHandleChange,required:"required",className:"form-control"})),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("span",null,"Data Provider Type"),l.a.createElement("font",{className:"text-danger"},"   *  "),l.a.createElement("select",{id:"provider_type",value:this.props.data.provider_type,onChange:this.handleChange,required:"required",className:"form-control"},this.getSelectOptions("data_provider_type"))),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("span",null,"Data Provider Code"),l.a.createElement("font",{className:"text-danger"},"  *  "),l.a.createElement("input",{type:"text",id:"data_prvdr_code",disabled:!0,value:this.props.data.data_prvdr_code,maxLength:4,onChange:this.toUpperHandleChange,required:!0,className:"form-control"})),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("span",null,"Contract Name"),l.a.createElement("font",{className:"text-danger"},"  *  "),l.a.createElement("input",{type:"text",id:"contract_name",value:this.props.data.contract_name,onChange:this.handleChange,required:!0,className:"form-control"}))),l.a.createElement("br",null),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-3"},l.a.createElement("span",null,"New Customer Commission")," (",this.currency_code,")",l.a.createElement("input",{id:"cust_comm",value:this.props.data.cust_comm,onChange:this.handleChange,className:"form-control"})),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("span",null,"Repayment Commission")," (",this.currency_code,")",l.a.createElement("input",{id:"repay_comm",value:this.props.data.repay_comm,onChange:this.handleChange,className:"form-control"}))),l.a.createElement("hr",null),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-6"},l.a.createElement(Tt,{id:"data_prvdr_logo",label:"Logo",data_prvdr_id:this.props.data.id,db_file_name:this.props.data.data_prvdr_logo,type:"image",mode:this.props.mode,data_prvdr_code:this.props.data.data_prvdr_code,onCreateUpload:this.handleChange,onEditUpload:function(t){e.handleChangeForEdit(t),e.handleSave(t)}})))))}}]),t}(ct),Na=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={toList:!1,org:{},reg_address:{},contact_person:{},data_provider:{}},a.handleSubmit=function(e){e.preventDefault();var t=a.state.data_provider,n=a.state.org;n.reg_address=a.state.reg_address,n.country_code=a.country_code,t.country_code=a.country_code,t.org=n,t.contact_person=a.state.contact_person,t.contact_person.country_code=a.country_code,va(a.req({data_prvdr:t})).then(function(e){e&&("success"===e.status?(a.setState({new_data_prvdr_code:e.data}),a.setState({toList:!0}),alert("New Data Provider created successfully")):alert(e.message+"\n"+JSON.stringify(e.data)))})},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){var e=this;if("view"===this.props.mode){var t={data_prvdr_code:this.props.match.params.data_prvdr_code,country_code:this.country_code};(function(e){return L("/api/admin/data_provider/view",e)})(this.req(t)).then(function(t){t&&(e.data_provider=t.data,e.setState({data_provider:e.data_provider,org:e.data_provider.org,contact_person:e.data_provider.contact_person,reg_address:e.data_provider.org.reg_address}))})}else this.props.mode}},{key:"render",value:function(){return!0===this.state.toList?l.a.createElement(Y.a,{to:"/data_provider/view/".concat(this.state.new_data_prvdr_code)}):l.a.createElement("div",{className:"container"},l.a.createElement("h5",null,this.props.title+(this.state.data_provider.name?" : "+this.state.data_provider.name:"")),l.a.createElement("form",{id:"data_provider_form",onSubmit:this.handleSubmit},l.a.createElement("div",{id:"",className:"text-labelblue"},l.a.createElement(ya,{id:"data_provider",title:"Data Provider",data:this.state.data_provider,mode:this.props.mode,onComponentChange:this.handleComponentChange}),l.a.createElement("hr",null),"create"===this.props.mode&&l.a.createElement(Ea,{id:"data_provider_choose_org",resetOrgNAddr:this.handleResetOrgNAddr,onChange:this.handleOrgChange}),l.a.createElement("div",{className:"".concat(this.state.div_style)},l.a.createElement(Mt,{id:"org",title:"Organisation Details",entity:"data_prvdr",data:this.state.org,mode:this.props.mode,onComponentChange:this.handleComponentChange}),l.a.createElement("br",null),l.a.createElement(jt,{id:"reg_address",title:"Registered Address",entity:"data_prvdr",data:this.state.reg_address,mode:this.props.mode,onComponentChange:this.handleComponentChange,onComponentReset:this.handleComponentReset}),l.a.createElement("hr",null)),l.a.createElement(zt,{id:"contact_person",title:"Contact Person",entity:"data_prvdr",data:this.state.contact_person,mode:this.props.mode,onComponentChange:this.handleComponentChange}),l.a.createElement("br",null),l.a.createElement("input",{type:"button",className:"btn btn-primary ".concat("create"===this.props.mode?"show_button":"hide_button"),onClick:this.handleSubmit,value:"Create New Data Provider"}))),l.a.createElement("br",null),l.a.createElement("br",null))}}]),t}(st),wa=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={start_date:null},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){}},{key:"render",value:function(){var e=this;return l.a.createElement("div",{className:"mb-3"},l.a.createElement("div",{className:"row no-margin"},this.props.field_visit.cust_visit_history&&b("field_visit","self_search")&&l.a.createElement("div",{className:"col-1",style:{paddingBottom:15}},l.a.createElement("div",null,l.a.createElement(A.a.Label,null,"Flow visiter")),l.a.createElement(A.a.Label,{className:"ml-3"},l.a.createElement("h5",null,"All"))),l.a.createElement("div",{className:"col-3",style:{paddingBottom:15}},l.a.createElement(A.a.Label,null,"From "),l.a.createElement("font",{className:"text-danger"},"   *  "),l.a.createElement(Ft.a,{closeOnSelect:!0,defaultValue:this.props.field_visit.visit_start_time__from,dateFormat:"DD MMM YYYY",timeFormat:!1,required:"required",onChange:function(t){e.handleDateChange("visit_start_time__from",t)}})),l.a.createElement("div",{className:"col-3",style:{paddingBottom:15}},l.a.createElement(A.a.Label,null,"To "),l.a.createElement("font",{className:"text-danger"},"   *  "),l.a.createElement(Ft.a,{closeOnSelect:!0,defaultValue:this.props.field_visit.visit_start_time__to,dateFormat:"DD MMM YYYY",timeFormat:!1,required:"required",onChange:function(t){e.handleDateChange("visit_start_time__to",t)}})),b("field_visit","all_search")&&l.a.createElement("div",{className:"col-3",style:{paddingBottom:15}},l.a.createElement(A.a.Label,null,"Flow Visiter "),l.a.createElement(A.a.Control,{as:"select",id:"visitor_id",onChange:function(t){e.props.onComponentElementChange(t)}},this.props.priv_users)),l.a.createElement("div",{className:"col-3",style:{paddingBottom:15}},l.a.createElement(A.a.Label,null,"Purpose"),l.a.createElement(A.a.Control,{as:"select",id:"visit_purpose",onChange:function(t){e.props.onComponentElementChange(t)}},this.getSelectOptions("visit_purpose"))),l.a.createElement("div",{className:"col-3",style:{display:"flex",alignItems:"center",height:60,paddingBottom:15}},l.a.createElement(A.a.Label,{for:"individual_visits",className:"no-margin"},"Individual Visits",l.a.createElement(A.a.Check,{type:"checkbox",defaultChecked:this.props.field_visit.individual_visits,id:"individual_visits",className:"float-left no-margin",onChange:function(t){e.props.onComponentElementChange(t)}})))),l.a.createElement("div",{className:"text-center"},l.a.createElement("button",{type:"button",className:"btn btn-primary ",id:"searchbtn",disabled:this.props.search_btn,onClick:this.props.onSearch},"Search")))}}]),t}(ct),Ca=function(e){return L("/api/admin/field_visits/search",e)},ka=function(e){return L("/api/admin/field_visits/checkin",e)},Sa=function(e){return L("/api/admin/field_visits/checkout",e)},xa=function(e){return L("/api/admin/field_visits/force_checkin",e)},Aa=(a(135),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(d.a)(t).call(this,e))).handleSearch=function(e){var t=a.state.field_visit;a.validate_search(t)&&Ca(a.req(t)).then(function(e){if(e&&"success"===e.status){a.resp(e);var t=[];!0===e.data.individual_visits&&(t=[{Header:"Visitor Name",accessor:"visitor_name"},{Header:"Cust Name",accessor:"cust_name"},{Header:"Cust ID",accessor:"cust_id",Cell:function(e){return l.a.createElement($.a,{to:"/borrower/indiv/view/"+e.value,target:"_blank"},e.value)},width:100},{Header:"Visit Time",id:"date",accessor:function(e){return ve(e.visit_start_time,!0)}},{Header:"Purpose",id:"purpose",width:250,style:{whiteSpace:"unset"},accessor:function(e){return e.visit_purpose.map(function(e){return Ze(e)}).join(", ")}},{Header:"Remarks",accessor:"remarks",width:400,style:{whiteSpace:"unset"}}]),!1===e.data.individual_visits&&(t=[{Header:"Visitor Name",accessor:"visitor_name"},{Header:"Visit date",id:"visit",accessor:function(e){return ve(e.visit_date)}},{Header:"Visits",accessor:"visits"}]),a.setState({columns:t,visits:e.data.visits,customer_visit:"show_div"})}})},a.handlevisitchange=function(e){var t=a.state.field_visit,n="individual_visits"===e.target.id?e.target.checked:e.target.value;t[e.target.id]=n,a.setState({field_visit:t,customer_visit:"hide_div",visits:[]})},a.state={field_visit:{individual_visits:!1},customer_visit:"hide_div",visits:[],loading:!0,columns:[],from_to_dates:{}},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){var e=this.state.field_visit;if(b("field_visit","all_search")){this.setOptionsListToStateFromAppApi("common","priv_users",this.req({priv_code:"field_visit/checkin",status:"enabled"}),["id","name"])}else b("field_visit","self_search")&&(e.search_type="self_search");this.props.match.params.cust_id&&(e.visit_start_time__to=re()(new Date),e.visit_start_time__from=re()().subtract(3,"months"),e.individual_visits=!0,e.cust_visit_history=!0,e.cust_id=this.props.match.params.cust_id),this.setState({field_visit:e})}},{key:"componentDidMount",value:function(){if(this.props.match.params.cust_id){var e=this.state.field_visit;e.visit_start_time__to=e.visit_start_time__to.format("YYYY-MM-DD"),e.visit_start_time__from=e.visit_start_time__from.format("YYYY-MM-DD"),this.handleSearch()}}},{key:"validate_search",value:function(e){return!(!e.visit_start_time__from||!e.visit_start_time__to)||(alert("Please enter valid search criteria"),!1)}},{key:"render",value:function(){return l.a.createElement("div",{className:"container max-width containerTopmargin no-padding"},l.a.createElement("div",{className:"row no-margin"},l.a.createElement("h3",{className:"field_visit no-margin headerTitle headerPadvert"},this.state.field_visit.cust_visit_history?"Search Customer Visit ("+this.state.field_visit.cust_id+")":"Search Customer Visit")),l.a.createElement(wa,{id:"searchfieldvisit",onSearch:this.handleSearch,onComponentChange:this.handlevisitchange,onComponentReset:this.handleComponentReset,search_btn:this.state.calling_api,onComponentElementChange:this.handlevisitchange,priv_users:this.state.priv_users_dd,field_visit:this.state.field_visit}),l.a.createElement("div",{className:this.state.customer_visit},l.a.createElement(ua,{showPag:!0,minRow:0,row_data:void 0!==this.state.visits?this.state.visits:[],column_data:this.state.columns,resizable:!1,sortable:!1,exportCSV:!0,csvFile:"field_visits",csvData:this.state.visits?this.state.visits:[]})))}}]),t}(st)),Oa=function(e){return L(M+"/loan/loans",e)},ja=function(e){return L(M+"/loan/held_loans",e)},Da=function(e){return L(M+"/loan/release",e)},Fa=function(e){return L(M+"/loan/resend_otp",e)},Ma=function(e){return L(M+"/loan/cancel",e)},Pa=function(e){return L(M+"/loan/repeat_fa",e)},Ba=function(e){return L(M+"/loan_txns/disburse",e)},La=function(e){return L(M+"/loan_txns/instant_disburse",e)},Ta=function(e){return L(M+"/loan_txns/list",e)},Ra=function(e){return L(M+"/loan/payment_summary",e)},Ha=function(e){return L(M+"/loan/capture_payment",e)},qa=function(e){return L(M+"/loan/unlink_payment",e)},Ia=function(e){return L(M+"/loan/allow_pp",e)},za=function(e){return L(M+"/loan/retry_disb",e)},Wa=function(e){return L(M+"/loan/change_disb_status",e)},Va=function(e){return L(M+"/loan/bypass_cust_conf",e)},Ya=function(e){return L(M+"/loan/create_recovery",e)},Ua=function(e){return L(M+"/loan/cancel_ong_rec",e)},Ja=function(e){return L(M+"/loan/capture_recovery",e)},Ka=function(e){return L(M+"/loan/check_txn_id",e)},Ga=function(e){return L(M+"/loan/waive_penalty",e)},Qa=function(e){return L(M+"/loan/reverse_payment",e)},Za=function(e){return L(M+"/loan/capture_excess",e)},Xa=function(e){return L(M+"/loan/cancel_capt_disb",e)},$a=function(e){return L(M+"/loan/upgrade",e)},en=function(e){function t(){return Object(c.a)(this,t),Object(i.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){void 0==Object({NODE_ENV:"production",PUBLIC_URL:"",REACT_APP_ADMIN_API_ROOT:"/api/admin",REACT_APP_APP_API_ROOT:"/api/app",REACT_APP_CORE_API_ROOT:"/api/core",REACT_APP_URL:"http://app.flowglobal.net"}).REACT_APP_USE_ROOT_ONLY_DEV?this.root="":this.root="http://13.234.42.35:8000";var e=null;"acc_prvdr"==this.props.entity?e="acc_providers":"lender"==this.props.entity&&(e="lenders");var t=this.root+"/files/"+this.props.country_code+"/"+e+"/";return t+=this.props.entity_code+"/"+this.props.entity+"_logo/"+this.props.file_name,l.a.createElement(l.a.Fragment,null,l.a.createElement("img",{className:this.props.color,src:t,alt:this.props.entity_code,width:"80s"}))}}]),t}(n.Component),tn=en,an=a(54),nn=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={show_waiver:!0},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){this.props.hasOwnProperty("show_waiver")&&this.setState({show_waiver:this.props.show_waiver})}},{key:"render",value:function(){var e=this.props.summary;return l.a.createElement("div",null,l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-6"},l.a.createElement("div",{className:"form-group row reset-margin justify-content-center align-items-center"},l.a.createElement("label",{className:"col-md-4 reset-margin"},l.a.createElement("b",null,"Customer")),l.a.createElement("label",{className:"col-md-6 reset-margin"},e.cust_name," | ",e.biz_name," (",e.cust_mobile_num,")  "))),l.a.createElement("div",{className:"col-md-6"},l.a.createElement("div",{className:"form-group row justify-content-center align-items-center"},l.a.createElement("label",{className:"col-md-4 reset-margin"},l.a.createElement("b",null,"Status")),l.a.createElement("label",{className:"col-md-6 reset-margin"},e.status)))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-6"},l.a.createElement("fieldset",{className:"border border-dark p-2"},l.a.createElement("legend",{className:"w-auto text-labelblue",style:{fontSize:"15px"}},"Total Due"),l.a.createElement("div",{className:"form-group row reset-margin justify-content-center align-items-center py-2"},l.a.createElement("label",{className:"col-md-5 reset-margin"},l.a.createElement("b",null,"FA Due")),l.a.createElement("label",{className:"col-md-5 text-right reset-margin"},Ne(e.loan_principal,this.currency_code)," ")),l.a.createElement("div",{className:"form-group row reset-margin justify-content-center py-2 align-items-center"},l.a.createElement("label",{className:"col-md-5 reset-margin"},l.a.createElement("b",null,"Fee Due")),l.a.createElement("label",{className:"col-md-5 text-right reset-margin"},Ne(e.flow_fee,this.currency_code)," ")),l.a.createElement("div",{className:"form-group row reset-margin justify-content-center align-items-center py-2"},l.a.createElement("label",{className:"col-md-5 reset-margin"},l.a.createElement("b",null,"Penalty Due")),l.a.createElement("label",{className:"col-md-5 text-right reset-margin"},Ne(e.to_capture.tot_prov_penalty,this.currency_code)," ")))),l.a.createElement("div",{className:"col-md-6"},l.a.createElement("fieldset",{className:"border border-dark p-2"},l.a.createElement("legend",{className:"w-auto text-labelblue",style:{fontSize:"15px"}},"Already Paid"),null==e.paid_principal&&null==e.paid_fee&&null==e.paid_penalty?l.a.createElement("lable",{className:"text-labelblue reset-margin",style:{fontSize:"56px",margin:"185px"}},"Nil"):l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"form-group row reset-margin justify-content-center align-items-center py-2"},l.a.createElement("label",{className:"col-md-5 reset-margin"},l.a.createElement("b",null,"FA Paid")),l.a.createElement("label",{className:"col-md-5 text-right reset-margin"},e.paid_principal?Ne(e.paid_principal,this.currency_code):l.a.createElement("b",{className:"text-labelblue"},"NIL")," ")),l.a.createElement("div",{className:"form-group row reset-margin justify-content-center align-items-center py-2"},l.a.createElement("label",{className:"col-md-5 reset-margin"},l.a.createElement("b",null,"Fee Paid")),l.a.createElement("label",{className:"col-md-5 text-right reset-margin"},e.paid_fee?Ne(e.paid_fee,this.currency_code):l.a.createElement("b",{className:"text-labelblue"},"NIL")," ")),l.a.createElement("div",{className:"form-group row reset-margin justify-content-center align-items-center py-2"},l.a.createElement("label",{className:"col-md-5 reset-margin"},l.a.createElement("b",null,"Penalty (Paid + Waived)")),l.a.createElement("label",{className:"col-md-5 text-right reset-margin"},e.paid_penalty?Ne(e.paid_penalty,this.currency_code):l.a.createElement("b",{className:"text-labelblue"},"NIL")," "))),e.paid_excess>0&&b("loan","capture_excess")&&l.a.createElement("div",{className:"row reset-margin justify-content-center align-items-center py-2"},l.a.createElement("label",{className:"col-md-5 no-margin"},l.a.createElement("b",null,"Excess Paid")),l.a.createElement("label",{className:"col-md-5 no-margin text-right"},Ne(e.paid_excess,this.currency_code)," "),l.a.createElement(l.a.Fragment,null,l.a.createElement("h6",{className:"text-center col-md-5"}),l.a.createElement("h6",{className:"col-md-5 text-right reset-margin py-2"},l.a.createElement($.a,{to:"#",onClick:this.props.handleExcessModal},"Capture Excess"))))))),l.a.createElement("fieldset",{className:"border border-dark mt-2 p-2"},l.a.createElement("legend",{className:"w-auto text-labelblue",style:{fontSize:"15px"}},"Current Outstanding"),l.a.createElement("div",{className:"row justify-content-around"},l.a.createElement("div",{className:"col-md-3"},l.a.createElement("div",{className:"form-group row reset-margin justify-content-center"},l.a.createElement("label",{className:"col-md-5 reset-padding"},l.a.createElement("b",null,"OS Principal")),l.a.createElement("label",{className:"col-md-7 text-right"},Ne(e.os_principal,this.currency_code)," "))),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("div",{className:"form-group row reset-margin justify-content-center"},l.a.createElement("label",{className:"col-md-5 label__name reset-padding"},l.a.createElement("b",null,"OS Fee")),l.a.createElement("label",{className:"col-md-7 text-right"},Ne(e.os_fee,this.currency_code)," "))),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("div",{className:"form-group row reset-margin justify-content-center"},l.a.createElement("label",{className:"col-md-5 label__name reset-padding"},l.a.createElement("b",null,"OS Penalty")),l.a.createElement("label",{className:"col-md-7 text-center"},Ne(e.os_penalty,this.currency_code)," "),e.os_penalty-e.to_capture.penalty>0&&this.state.show_waiver&&l.a.createElement(l.a.Fragment,null,l.a.createElement("h6",{className:"text-center col-md-5"}),l.a.createElement("h6",{className:"text-center col-md-7"},l.a.createElement($.a,{to:"#",onClick:this.props.handlePenaltyModal},"Waive Penalty"))))))))}}]),t}(ct),ln=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={repayment_style:"disable_div",is_part_payment:!1,sync_div_style:"hide_div",btn_name:"Apply",unlink_payment:{},reviewed:0,repayment_modal:!1,penalty_modal:!1,excess_modal:!1,modal:null,opacity:"",fa:!1,fee:!1,penalty:!1,excess:!1,FAcheck_box_checked:!1,FEEcheck_box_checked:!1,PENcheck_box_checked:!1,EXCcheck_box_checked:!1,is_skip_trans_id_check:!1,txn_data:"",apply_btn:"disable_div",txn_id_style:"txn_id_style"},a.handleSkipTransIDChekCheckboxClick=function(e){a.repayment_txn.acc_stmt_txn_id.length>5&&a.setState({is_skip_trans_id_check:e.target.checked},a.handleTxnId)},a.enableTxnID=function(e){var t=a.repayment_txn;console.log("repayment_txn"),console.log(t),t.amount>0&&null!=a.to_acc.value&&null!=t.txn_date&&null!=t.txn_mode&&a.setState({txn_id_style:""})},a.handleClose=function(e){if(!e&&0==window.confirm("You have not sync the payment. Are you sure to close?"))return;a.setState({repayment_modal:!1,summary:null,reviewed:0,is_part_payment:!1}),"capture"==a.props.mode&&window.location.reload()},a.handlePenaltyModalClose=function(e){a.setState({penalty_modal:!1,opacity:""})},a.handleModalChange=function(e){var t=a.state.summary;t[e.target.id]=e.target.value,a.setState({summary:t})},a.handlePenaltyModal=function(){a.setState({penalty_modal:!0,opacity:.7})},a.handleExcessModal=function(){a.setState({excess_modal:!0,opacity:.7})},a.handleModify=function(){a.setState({credit_style:"show_div"})},a.handlePartPaymentCheckboxClick=function(e){if(e.target.checked)var t=!0;else t=!1;a.setState({is_part_payment:t})},a.handleExcessModalClose=function(e){a.setState({excess_modal:!1,opacity:""})},a.handleSubmit=function(e){var t=a.state.summary;console.log("summaries",t);var n=t.amount,l=(t.cust_name,t.new_status),r=Ee(t.amount),s=Ee(t.current_os_amount),c=Ee(t.os_penalty);if("capture"==a.props.mode)if(a.state.is_part_payment){if(r==s&&0==c||r==s+c)return void window.alert("Unable to process. You are trying to make full payment. Make sure whether you are trying to pay full amount or partial amount")}else if(r<s)return void window.alert("Unable to process. You are trying to make partial payment less than Current OS amount.");if("settled"==l){if(0==window.confirm("On syncing this transaction, customer's FA will be settled. Are you sure to proceed the sync process?"))return}else{var o=t.os_principal-t.to_capture.principal,i=t.os_fee-t.to_capture.fee,d=t.os_penalty-t.to_capture.penalty,m=o+i+d;if(0==window.confirm("On syncing this transaction, customer's FA will still be in ".concat(l," status. Below is the new outstanding details after this sync.      \n            New OS Principal  :  ").concat(Ne(o,a.currency_code)," \n            New OS Fee        :  ").concat(Ne(i,a.currency_code),"\n            New OS Penalty    :  ").concat(Ne(d,a.currency_code),"\n                                 ------------------------------------\n            Total OS          :  ").concat(Ne(m,a.currency_code),"\n                                 ------------------------------------\n            Are you sure to proceed the sync process?")))return}var u={loan_doc_id:a.state.summary.loan_doc_id,mode:a.props.mode,amount:n};"recon"==a.props.mode?u.acc_stmt_id=a.state.summary.acc_stmt_id:"capture"==a.props.mode&&((u=Object(Z.a)({},a.repayment_txn,u)).to_ac_id=a.to_acc.value,u.is_part_payment=a.state.is_part_payment,u.list_date=a.state.date),Ha(a.req(u,!0)).then(function(e){if(a.resp(e),!e)return null;"success"===e.status?(alert("Payment captured successfully"),a.handleClose("capture"),a.setState({data:e.data}),"home"!==a.props.parent&&a.props.onSync(),"capture"!=a.props.mode&&"home"!=a.props.parent||window.location.reload()):alert(e.message)})},a.CaptureExcessPayment=function(e){var t=a.state.summary.amount,n=a.repayment_txn.txn_date,l=a.state.summary.txn_id,r=a.state.summary.from_ac_id,s=a.state.summary.loan_doc_id,c=a.state.summary.cust_id;if(n&&l&&r&&t){if(0==window.confirm("Are you sure to capture the excess payment of ".concat(Ne(t,a.currency_code))))return;var o={amount:t,txn_date:n,txn_id:l,from_ac_id:r,loan_doc_id:s,cust_id:c};Za(a.req(o,!0)).then(function(e){if(a.resp(e),!e)return null;alert(e.message),a.handleClose("capture")})}else alert("Please enter required fields")},a.updateWaivePenalty=function(e){var t=a.state.summary.new_outstanding_penalty,n=a.state.summary.waived_penalty,l=a.state.summary.remarks,r=a.state.summary.loan_doc_id,s=a.state.summary.acc_stmt_id,c=a.props.mode;if(n&&l)if(t<n)alert("Waived penalty of ".concat(Ne(n,a.currency_code)," shouldn't be greater than current outstanding penalty ").concat(Ne(t,a.currency_code),"."));else{if(0==window.confirm("The customer has an outstanding penalty of ".concat(Ne(t,a.currency_code),", you are going to waive off ").concat(Ne(n,a.currency_code),". Are you sure?")))return;var o={waived_penalty:n,remarks:l,loan_doc_id:r,mode:c,new_outstanding_penalty:t};"recon"==a.props.mode&&(o.acc_stmt_id=s),Ga(a.req(o,!0)).then(function(e){if(a.resp(e),!e)return null;"success"===e.status&&(alert("Penalty waived successfully"),"penalty_waived"==e.data.txn_status&&"capture"==a.props.mode?(a.handleClose("capture"),window.location.reload()):"recon"==a.props.mode?(a.handleClose("capture"),a.setState({data:e.data,penalty_modal:!1,opacity:""}),"home"!==a.props.parent&&a.props.onSync()):a.setState({summary:e.data,penalty_modal:!1,opacity:""}))})}else alert("Please enter required fields")},a.handleUnlinkPayment=function(e){var t=a.state.summary.amount,n=a.state.summary.cust_name;if(0!=window.confirm("Are you sure this payment of ".concat(Ne(t,a.currency_code)," is not related ").concat(n))){var l=a.state.unlink_payment;qa(a.req(l,!0)).then(function(e){if(a.resp(e),!e)return null;"success"===e.status?a.setState({repayment_modal:!1}):alert(e.message)})}},a.handleReviewChange=function(e,t){var n=e.target.checked,l=a.state.reviewed,r="disable_div",s=!1;switch(n?(l++,s=!0):(l--,s=!1),l==(a.state.excess_field?4:3)&&(r=""),t){case"fa":a.setState(function(e){return e.fa=!a.state.fa}),a.setState(function(e){return e.FAcheck_box_checked=!a.state.FAcheck_box_checked});break;case"fee":a.setState(function(e){return e.fee=!a.state.fee}),a.setState(function(e){return e.FEEcheck_box_checked=!a.state.FEEcheck_box_checked});break;case"penalty":a.setState(function(e){return e.penalty=!a.state.penalty}),a.setState(function(e){return e.PENcheck_box_checked=!a.state.PENcheck_box_checked});break;case"excess":a.setState(function(e){return e.excess=!a.state.excess}),a.setState(function(e){return e.EXCcheck_box_checked=!a.state.EXCcheck_box_checked})}a.setState({reviewed:l,repayment_style:r,checked:s})},a.capture_repayment_summary=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"null",n=Object(Z.a)({},a.state),l=["fa","fee","penalty","excess","checked","reviewed","FAcheck_box_checked","FEEcheck_box_checked","PENcheck_box_checked","EXCcheck_box_checked"];if(Object.keys(n).forEach(function(e){l.includes(e)&&("checked"!==e?a.setState(function(t){return t[e]=!1}):a.setState(function(t){return t[e]=0}))}),"Apply"==t&&(0==a.repayment_txn.amount||""==a.repayment_txn.acc_stmt_txn_id||""==a.repayment_txn.to_ac_id||null==a.repayment_txn.txn_mode||null==a.repayment_txn.txn_date||a.state.is_skip_trans_id_check&&null==a.repayment_txn.reason_for_skip))alert("Please enter required fields");else{var r={mode:a.props.mode,loan_doc_id:a.props.data.loan_doc_id},s=!0;if(e.preventDefault(),"capture"==a.props.mode){r.amount=Ee(a.repayment_txn.amount),r.txn_id=a.repayment_txn.acc_stmt_txn_id,r.acc_id=a.repayment_txn.to_ac_id,r.is_skip_trans_id_check=a.state.is_skip_trans_id_check;var c=a.state.btn_name,o=a.state.sync_div_style,i=a.state.repayment_style,d=!1}else"recon"==a.props.mode&&(r.acc_stmt_id=e.target.id);if("capture"==a.props.mode&&"Apply"==t)r.is_part_payment=a.state.is_part_payment;else if("capture"==a.props.mode&&"Modify"==t){var m="show_div";o="hide_div",c="Apply",i="disable_div",s=!1}a.setState({unlink_payment:r,credit_style:m,sync_div_style:o,btn_name:c,repayment_style:i}),s&&Ra(a.req(r)).then(function(e){if(a.resp(e),!e)return null;if("success"===e.status){var n=e.data,l=a.state.checked,r=a.state.reviewed;n.to_capture.excess>0&&(d=!0),"capture"==n.mode&&"Apply"==t?(o="show_div",c="Modify",m="disable_div",l?(i="",r=0):i="disable_div",window.alert("Note : Payment is not yet captured on Flow App\n \nCustomer Payment applied below. Please review and sync ")):"recon"==n.mode&&(i="disable_div"),a.setState({repayment_modal:!0,sync_div_style:o,summary:n,btn_name:c,credit_style:m,repayment_style:i,excess_field:d,reviewed:r})}else alert(e.message)})}},a.WaivePenaltyModal=function(e){return e?l.a.createElement(nt.a,{show:a.state.penalty_modal,onHide:a.handlePenaltyModalClose,backdrop:"static",size:"l",style:{top:"25px"}},l.a.createElement(nt.a.Header,{closeButton:!0,show:a.state.penalty_modal,onHide:a.handlePenaltyModalClose},l.a.createElement(nt.a.Title,null,"Waive Penalty")),l.a.createElement(nt.a.Body,null,l.a.createElement("form",null,l.a.createElement("div",{className:"row justify-content-center py-1",style:{alignItems:"center",height:42}},l.a.createElement("label",{className:"col-md-5 label__name reset-margin"},l.a.createElement("b",null,"Current OS Penalty")),l.a.createElement("label",{className:"col-md-4 text-right reset-margin"},Ne(e.os_penalty,a.currency_code)," ")),l.a.createElement("div",{className:"row justify-content-center align-items-center py-1"},l.a.createElement("label",{className:"col-sm-5 font-weight-bold reset-margin"},l.a.createElement("b",null,"Waive Penalty"),l.a.createElement("font",{className:"text-danger"},"   *  ")),l.a.createElement("div",{className:"col-sm-4 reset-padding"},l.a.createElement("input",{id:"waived_penalty",type:"number",onChange:a.handleModalChange,className:"form-control reset-padding",min:"0"}))),l.a.createElement("div",{className:"row my-0 justify-content-center align-items-center py-1",style:{height:42}},l.a.createElement("label",{className:"col-sm-5 reset-margin"},l.a.createElement("b",null,"Remarks"),l.a.createElement("font",{className:"text-danger"},"   *  ")),l.a.createElement("div",{className:"col-sm-4 reset-padding"},l.a.createElement("textarea",{id:"remarks",type:"text",onChange:a.handleModalChange,className:"form-control reset-padding"}))))),l.a.createElement(nt.a.Footer,null,l.a.createElement(lt.a,{variant:"secondary",onClick:a.handlePenaltyModalClose},"Close"),l.a.createElement(lt.a,{variant:"primary",disabled:a.state.calling_api,style:{marginLeft:10},onClick:a.updateWaivePenalty},"Waive Penalty"))):null},a.ReturnExcessModal=function(e){return e?l.a.createElement(nt.a,{show:a.state.excess_modal,onHide:a.handleExcessModalClose,backdrop:"static",size:"l",style:{top:"25px"}},l.a.createElement(nt.a.Header,{closeButton:!0,show:a.state.excess_modal,onHide:a.handleExcessModalClose},l.a.createElement(nt.a.Title,null,"Capture Excess")),l.a.createElement(nt.a.Body,null,l.a.createElement("form",null,l.a.createElement("div",{className:"row justify-content-center py-1",style:{alignItems:"center",height:42}},l.a.createElement("label",{className:"col-md-5 label__name reset-margin"},l.a.createElement("b",null,"Excess Amount"),l.a.createElement("font",{className:"text-danger"},"   *  ")),l.a.createElement("div",{className:"col-sm-5 reset-padding"},l.a.createElement("input",{id:"amount",type:"text",onChange:a.handleModalChange,className:"form-control reset-padding",min:"0"}))),l.a.createElement("div",{className:"row justify-content-center align-items-center py-1"},l.a.createElement("label",{className:"col-sm-5 font-weight-bold reset-margin"},l.a.createElement("b",null,"Txn ID"),l.a.createElement("font",{className:"text-danger"},"   *  ")),l.a.createElement("div",{className:"col-sm-5 reset-padding"},l.a.createElement("input",{id:"txn_id",type:"text",onChange:a.handleModalChange,className:"form-control reset-padding",min:"0"}))),l.a.createElement("div",{className:"row justify-content-center align-items-center py-1"},l.a.createElement("label",{className:"col-sm-5 font-weight-bold reset-margin"},l.a.createElement("b",null,"Refunded From A/C "),l.a.createElement("font",{className:"text-danger"},"   *  ")),l.a.createElement("div",{className:"col-sm-5 reset-padding"},l.a.createElement("select",{id:"from_ac_id",onChange:function(e){a.handleModalChange(e)},className:"form-control",type:"text",required:"required"},a.state.lender_accounts_dd))),l.a.createElement("div",{className:"row justify-content-center align-items-center py-1"},l.a.createElement("label",{className:"col-sm-5 font-weight-bold reset-margin"},l.a.createElement("b",null,"Customer's A/C "),l.a.createElement("font",{className:"text-danger"},"   *  ")),l.a.createElement("div",{className:"col-sm-5 reset-padding"},l.a.createElement("select",{id:"to_ac_id",defaultValue:a.selected.customer_accounts,ref:function(e){return a.to_acc=e},onChange:function(e){a.handleSelfChange(e)},className:"form-control",type:"text",required:"required"},a.state.customer_accounts_dd))),l.a.createElement("div",{className:"row my-0 justify-content-center align-items-center py-1",style:{height:42}},l.a.createElement("label",{className:"col-sm-5 reset-margin"},l.a.createElement("b",null,"Date"),l.a.createElement("font",{className:"text-danger"},"   *  ")),l.a.createElement("div",{className:"col-sm-5 reset-padding"},l.a.createElement(Ft.a,{closeOnSelect:!0,onChange:function(e){a.handleSelfDateChange("txn_date",e)},dateFormat:"DD MMM YYYY",timeFormat:!1,required:"required"}))))),l.a.createElement(nt.a.Footer,null,l.a.createElement(lt.a,{variant:"secondary",onClick:a.handleExcessModalClose},"Close"),l.a.createElement(lt.a,{variant:"primary",style:{marginLeft:10},onClick:a.CaptureExcessPayment},"Capture Excess"))):null},a.RepaymentSummaryModal=function(e){return e?(e.paid_penalty=e.penalty_waived+e.penalty_collected,e.to_capture.penalty>e.to_capture.tot_prov_penalty-e.penalty_waived-e.penalty_collected&&e.to_capture.penalty<0&&window.alert(""),e.new_outstanding_penalty=e.to_capture.tot_prov_penalty>0?e.to_capture.tot_prov_penalty-e.penalty_waived-e.penalty_collected-e.to_capture.penalty:0,e.penalty_overlay=l.a.createElement("form",{className:"p-2"},l.a.createElement("div",{className:"form-group row  justify-content-center reset-margin "},l.a.createElement("label",{className:"col-sm-6 label__name "},l.a.createElement("b",null,"Provisional Penalty ")),l.a.createElement("label",{className:"col-md-6 text-right pl-0"},Ne(e.to_capture.tot_prov_penalty,a.currency_code)," ")),l.a.createElement("div",{className:"form-group row justify-content-center reset-margin"},l.a.createElement("label",{className:"col-sm-6 label__name "},l.a.createElement("b",null," Waived Penalty ")),l.a.createElement("label",{className:"col-md-6 text-right pl-0"},Ne(e.penalty_waived,a.currency_code)," (-) ")),l.a.createElement("div",{className:"form-group row justify-content-center reset-margin "},l.a.createElement("label",{className:"col-sm-6 label__name"},l.a.createElement("b",null," Already Paid Penalty")),l.a.createElement("label",{className:"col-md-6 text-right pl-0"},Ne(e.penalty_collected,a.currency_code)," (-)")),l.a.createElement("div",{className:"form-group row justify-content-center reset-margin"},l.a.createElement("label",{className:"col-sm-6 label__name "},l.a.createElement("b",null," Payment now against Penalty ")),l.a.createElement("label",{className:"col-md-6 text-right pl-0"},Ne(e.to_capture.penalty,a.currency_code)," (-) ")),l.a.createElement("hr",null),l.a.createElement("div",null,l.a.createElement("label",{className:"col-sm-6 label__name "},l.a.createElement("b",null,"OS Penalty after Payment")),l.a.createElement("label",{className:"col-md-6 text-right pl-0"},Ne(e.new_outstanding_penalty,a.currency_code)," ")),l.a.createElement("hr",null)),l.a.createElement(nt.a,{show:a.state.repayment_modal,backdrop:"static",size:"xl",style:{opacity:a.state.opacity}},l.a.createElement(nt.a.Header,{closeButton:!0,show:a.state.repayment_modal,onHide:a.handleClose},l.a.createElement(nt.a.Title,null,a.props.title)),l.a.createElement(nt.a.Body,null,l.a.createElement("div",{className:""},l.a.createElement("form",null,"recon"===a.props.mode&&l.a.createElement(l.a.Fragment,null,l.a.createElement(an.a,null,l.a.createElement(an.a.Header,{style:{backgroundColor:"#01062c",color:"white"}},l.a.createElement("h4",{className:"no-margin"},l.a.createElement(tn,{file_name:"t_"+g("acc_prvdr_logo"),entity:"acc_prvdr",entity_code:g("acc_prvdr_code"),country_code:a.country_code,color:"logo_style"}),"\xa0\xa0 Account Credit Transaction")),l.a.createElement(an.a.Body,null,l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-6"},l.a.createElement("div",{className:"row justify-content-center align-items-center py-2"},l.a.createElement("label",{className:"col-md-4 no-margin"},l.a.createElement("b",null,"Txn ID")," "),l.a.createElement("label",{className:"col-md-6 no-margin"},e.stmt_txn_id)),l.a.createElement("div",{className:"row justify-content-center align-items-center py-2"},l.a.createElement("label",{className:"col-md-4 no-margin"},l.a.createElement("b",null,"Txn Desc")),l.a.createElement("label",{className:"col-md-6 no-margin"},e.descr))),l.a.createElement("div",{className:"col-md-6"},l.a.createElement("div",{className:"row justify-content-center align-items-center py-2"},l.a.createElement("label",{className:"col-md-4 no-margin"},l.a.createElement("b",null,"Txn Date")," "),l.a.createElement("label",{className:"col-md-6 no-margin"},ge(e.stmt_txn_date))),l.a.createElement("div",{className:"row justify-content-center align-items-center py-2"},l.a.createElement("label",{className:"col-md-4 no-margin"},l.a.createElement("b",null,"Txn Amount ")),l.a.createElement("label",{className:"col-md-6 no-margin"},Ne(e.cr_amt,a.currency_code),"  ")))))),l.a.createElement(an.a,{className:"my-2"},l.a.createElement(an.a.Header,{style:{backgroundColor:"#01062c",color:"white"}},l.a.createElement("h4",{style:{fontSize:"1.7rem"},className:"no-margin"},l.a.createElement("img",{src:"/logo_white.png"})," Matching FA Record (",l.a.createElement($.a,{style:{color:"white"},to:"/fa/view/"+e.loan_doc_id,target:"_blank"},e.loan_doc_id)," | ",l.a.createElement($.a,{style:{color:"white"},to:"/borrower/indiv/view/"+e.cust_id,target:"_blank"},e.cust_id),") ")),l.a.createElement(an.a.Body,null,l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-6"},l.a.createElement("div",{className:"row reset-margin justify-content-center align-items-center py-2"},l.a.createElement("label",{className:"col-md-4 no-margin"},l.a.createElement("b",null,"Customer")),l.a.createElement("label",{className:"col-md-6 no-margin"},e.biz_name))),l.a.createElement("div",{className:"col-md-6"},l.a.createElement("div",{className:"row justify-content-center align-items-center py-2"},l.a.createElement("label",{className:"col-md-4 no-margin"},l.a.createElement("b",null,"Status")),l.a.createElement("label",{className:"col-md-6 no-margin"},e.status)))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-6"},l.a.createElement("fieldset",{className:"border border-dark p-2"},l.a.createElement("legend",{className:"w-auto",style:{fontSize:"15px"}},"Total Due"),l.a.createElement("div",{className:"row reset-margin justify-content-center align-items-center py-2"},l.a.createElement("label",{className:"col-md-5 no-margin"},l.a.createElement("b",null,"FA Due")),l.a.createElement("label",{className:"col-md-5 no-margin text-right"},Ne(e.loan_principal,a.currency_code)," ")),l.a.createElement("div",{className:"row reset-margin justify-content-center py-2 align-items-center"},l.a.createElement("label",{className:"col-md-5 no-margin"},l.a.createElement("b",null,"Fee Due")),l.a.createElement("label",{className:"col-md-5 no-margin text-right"},Ne(e.flow_fee,a.currency_code)," ")),l.a.createElement("div",{className:"row reset-margin justify-content-center align-items-center py-2"},l.a.createElement("label",{className:"col-md-5 no-margin"},l.a.createElement("b",null,"Penalty Due")),l.a.createElement("label",{className:"col-md-5 no-margin text-right"},Ne(e.to_capture.tot_prov_penalty,a.currency_code)," ")))),l.a.createElement("div",{className:"col-md-6"},l.a.createElement("fieldset",{className:"border border-dark p-2"},l.a.createElement("legend",{className:"w-auto",style:{fontSize:"15px"}},"Already Paid"),l.a.createElement("div",{className:"row reset-margin justify-content-center align-items-center py-2"},l.a.createElement("label",{className:"col-md-5 no-margin"},l.a.createElement("b",null,"FA Paid")),l.a.createElement("label",{className:"col-md-5 no-margin text-right"},Ne(e.paid_principal,a.currency_code)," ")),l.a.createElement("div",{className:"row reset-margin justify-content-center align-items-center py-2"},l.a.createElement("label",{className:"col-md-5 no-margin"},l.a.createElement("b",null,"Fee Paid")),l.a.createElement("label",{className:"col-md-5 text-right"},Ne(e.paid_fee,a.currency_code)," ")),l.a.createElement("div",{className:"row reset-margin justify-content-center align-items-center py-2"},l.a.createElement("label",{className:"col-md-5 no-margin"},l.a.createElement("b",null,"Penalty (Paid + Waived) ")),l.a.createElement("label",{className:"col-md-5 no-margin text-right"},Ne(e.paid_penalty,a.currency_code)," "))))),l.a.createElement("fieldset",{className:"border border-dark mt-2 p-2"},l.a.createElement("legend",{className:"w-auto",style:{fontSize:"15px"}},"Current Outstanding"),l.a.createElement("div",{className:"row justify-content-around"},l.a.createElement("div",{className:"col-md-3"},l.a.createElement("div",{className:"row reset-margin justify-content-center align-items-center py-2"},l.a.createElement("label",{className:"col-md-5 reset-padding"},l.a.createElement("b",null,"OS Principal")),l.a.createElement("label",{className:"col-md-7 text-right"},Ne(e.os_principal,a.currency_code)," "))),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("div",{className:"row reset-margin justify-content-center align-items-center py-2"},l.a.createElement("label",{className:"col-md-5 label__name reset-padding"},l.a.createElement("b",null,"OS Fee")),l.a.createElement("label",{className:"col-md-7 text-right"},Ne(e.os_fee,a.currency_code)," "))),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("div",{className:"row reset-margin  justify-content-center align-items-center py-2"},l.a.createElement("label",{className:"col-md-5 label__name reset-padding mb-1"},l.a.createElement("b",null,"OS Penalty")),l.a.createElement("label",{className:"col-md-7 text-center"},Ne(e.os_penalty,a.currency_code)),e.os_penalty-e.to_capture.penalty>0&&l.a.createElement(l.a.Fragment,null,l.a.createElement("h6",{className:"col-md-5"}),l.a.createElement("h6",{className:"text-center col-md-7"},l.a.createElement($.a,{to:"#",onClick:a.handlePenaltyModal},"Waive Penalty")))))))))),"capture"===a.props.mode&&l.a.createElement(l.a.Fragment,null,l.a.createElement(an.a,{className:"my-2"},l.a.createElement(an.a.Header,{style:{backgroundColor:"#01062c",color:"white"}},l.a.createElement("h4",{className:"no-margin"},l.a.createElement("img",{src:"/logo_white.png"}))),l.a.createElement(an.a.Body,null,l.a.createElement(nn,{handleExcessModal:a.handleExcessModal,handlePenaltyModal:a.handlePenaltyModal,summary:e}))),l.a.createElement(an.a,null,l.a.createElement(an.a.Header,{style:{backgroundColor:"#01062c",color:"white",padding:15}},l.a.createElement("h4",{className:"no-margin",style:{fontSize:20}},l.a.createElement(tn,{file_name:"t_"+g("acc_prvdr_logo"),entity:"acc_prvdr",entity_code:g("acc_prvdr_code"),country_code:a.country_code,color:"logo_style"}),"\xa0\xa0 Account Credit Transaction")),l.a.createElement(an.a.Body,null,l.a.createElement("div",{className:"row no-margin"},l.a.createElement("div",{className:"col-md-6 reset-padding"},l.a.createElement("div",{className:"row no-margin justify-content-center align_ver_center"},l.a.createElement("label",{className:"col-md-5 no-margin reset-padding"},l.a.createElement("b",null,"Credit To Account (",a.props.data.lender_name,")"),l.a.createElement("font",{className:"text-danger"},"   *  ")," "),l.a.createElement("div",{className:"col-sm-5 reset-padding"},l.a.createElement("select",{id:"to_ac_id",ref:function(e){return a.to_acc=e},onChange:function(e){a.handleSelfChange(e),a.enableTxnID(e)},className:"form-control ".concat(a.state.credit_style),type:"text"},a.state.lender_accounts_dd))),l.a.createElement("div",{className:"row no-margin justify-content-center align_ver_center"},l.a.createElement("label",{className:"col-md-5 no-margin reset-padding"},l.a.createElement("b",null,"Credit Repayment Amount "),l.a.createElement("font",{className:"text-danger"},"   *  ")," "),l.a.createElement("div",{className:"col-sm-5 reset-padding"},l.a.createElement("input",{type:"text",className:"form-control ".concat(a.state.credit_style),id:"amount",onChange:function(e){a.handleSelfChange(e),a.enableTxnID(e)},required:"required"})),l.a.createElement("div",{className:"col-sm-5 reset-padding"}),l.a.createElement("div",{className:"col-sm-5 reset-padding"},l.a.createElement("label",{className:"mt-2 ".concat(a.state.credit_style)},l.a.createElement("input",{type:"checkbox",onChange:a.handlePartPaymentCheckboxClick}),"\xa0",l.a.createElement("b",{className:"red_color_font"},"Part Payment")))),l.a.createElement("div",{className:"row no-margin justify-content-center align_ver_center"},l.a.createElement("label",{className:"col-md-5 no-margin reset-padding"},l.a.createElement("b",null,"Credit Payment Txn ID "),l.a.createElement("font",{className:"text-danger"},"   *  ")," "),l.a.createElement("div",{className:"col-sm-5 reset-padding"},l.a.createElement("input",{type:"text",id:"acc_stmt_txn_id",className:"form-control ".concat(a.state.txn_id_style," ").concat(a.state.credit_style),onChange:function(e){a.handleSelfChange(e),a.handleTxnId(e)},required:"required"})),l.a.createElement("div",{className:"col-sm-5 reset-padding"}),b("loan","skip_txn_id_check")&&l.a.createElement("div",{className:"col-sm-5 reset-padding ".concat(a.state.txn_id_style)},l.a.createElement("label",{className:"mt-2 ".concat(a.state.credit_style)},l.a.createElement("input",{type:"checkbox",onChange:function(e){return a.handleSkipTransIDChekCheckboxClick(e)}}),"\xa0",l.a.createElement("b",{className:"red_color_font"},"Skip transaction ID check")))),l.a.createElement("br",null),a.state.is_skip_trans_id_check&&l.a.createElement("div",{className:"row no-margin justify-content-center align_ver_center"},l.a.createElement("label",{className:"col-md-5 reset-padding no-margin"},l.a.createElement("b",null,"Reason for Skip Txn ID Check"),l.a.createElement("font",{className:"text-danger"},"   *  ")),l.a.createElement("div",{className:"col-sm-5 reset-padding"},l.a.createElement("select",{id:"reason_for_skip",onChange:function(e){a.handleSelfChange(e)},className:"form-control ".concat(a.state.credit_style),type:"text",required:"required"},a.getSelectOptions("skip_txn_id_check")))),l.a.createElement("br",null),l.a.createElement("div",{className:"row d-flex justify-content-center"},a.state.txn_data&&l.a.createElement(l.a.Fragment,null,l.a.createElement("br",null),l.a.createElement("div",{class:"alert alert-success"},a.state.txn_data.map(function(e){return l.a.createElement("h6",null,"Amount : ",e.cr_amt," | Txn Date : ",e.stmt_txn_date," | Description : ",e.descr)}))),a.state.txn_failed_msg&&l.a.createElement("div",{class:"alert alert-danger "},l.a.createElement("h6",null,a.state.txn_failed_msg))),l.a.createElement("br",null)),l.a.createElement("div",{className:"col-md-6 reset-padding"},l.a.createElement("div",{className:"row no-margin justify-content-center align_ver_center"},l.a.createElement("label",{className:"col-md-5 reset-padding no-margin"},l.a.createElement("b",null,"Credit Payment Mode"),l.a.createElement("font",{className:"text-danger"},"   *  ")),l.a.createElement("div",{className:"col-sm-5 reset-padding"},l.a.createElement("select",{id:"txn_mode",onChange:function(e){a.handleSelfChange(e),a.enableTxnID(e)},className:"form-control ".concat(a.state.credit_style),type:"text",required:"required"},a.getSelectOptions("transaction_mode")))),l.a.createElement("div",{className:"row no-margin justify-content-center align_ver_center"},l.a.createElement("label",{className:"col-md-5 reset-padding no-margin"},l.a.createElement("b",null,"Credit Payment Date"),l.a.createElement("font",{className:"text-danger"},"   *  ")," "),l.a.createElement("div",{className:"col-sm-5 reset-padding  ".concat(a.state.credit_style)},l.a.createElement(Ft.a,{closeOnSelect:!0,onChange:function(e){a.handleSelfDateChange("txn_date",e),a.enableTxnID(e)},dateFormat:"DD MMM YYYY",timeFormat:!1,required:"required"}))),l.a.createElement("div",{className:"row no-margin justify-content-center align_ver_center"},l.a.createElement("label",{className:"col-md-5 reset-padding no-margin"},l.a.createElement("b",null,"Remarks")),l.a.createElement("div",{className:"col-sm-5 reset-padding"},l.a.createElement("input",{type:"text",id:"remarks",className:"form-control ".concat(a.state.credit_style),onChange:a.handleSelfChange,required:"required"}))))),l.a.createElement("div",{className:"row mt-3"},l.a.createElement("div",{className:"col-md-12"},l.a.createElement("input",{type:"button",className:"btn btn-primary float-right mr-1 ".concat(a.state.apply_btn),onClick:function(e){a.capture_repayment_summary(e,"".concat(a.state.btn_name))},value:a.state.btn_name})))))),l.a.createElement("div",{className:"capture"==a.props.mode?a.state.sync_div_style:"show_div"},l.a.createElement(an.a,null,l.a.createElement(an.a.Header,{style:{backgroundColor:"#01062c",color:"white",padding:15}},l.a.createElement("h4",{className:"no-margin",style:{fontSize:20}},"Sync Payment Transaction")),l.a.createElement(an.a.Body,null,l.a.createElement("div",{className:"row justify-content-center py-2"},l.a.createElement("label",{className:"col-md-2 no-margin"},l.a.createElement("b",null,"Status after Sync")),l.a.createElement("label",{className:"col-md-0 no-margin ".concat("settled"===e.new_status&&"text-green overdue_fontBold"," ").concat("overdue"===e.new_status&&"text-red overdue_fontBold excess_fieldText_blinker")},e.new_status.toUpperCase(),"  "),l.a.createElement(se.a,{placement:"top",trigger:"hover",overlay:l.a.createElement(ce.a,{style:{padding:"5px",fontFamily:"Montserrat",width:"100%"}},l.a.createElement("div",null,l.a.createElement("div",{className:"row no-margin"},l.a.createElement("h6",{className:"col-6 reset-padding",style:{fontSize:10,margin:0,textAlign:"right"}},"Payment Status\xa0\xa0:\xa0\xa0"),l.a.createElement("h6",{className:"col-6 reset-padding",style:{fontSize:10,margin:0,textAlign:"left"}},ue(e.payment_status))),"review_pending"==e.payment_status&&l.a.createElement("div",{className:"row no-margin"},l.a.createElement("h6",{className:"col-6 reset-padding",style:{fontSize:10,margin:0,textAlign:"right"}},"Review Reason\xa0\xa0:\xa0\xa0"),l.a.createElement("h6",{className:"col-6 reset-padding",style:{fontSize:10,margin:0,textAlign:"left"}},ue(e.review_reason)))))},l.a.createElement(oe.a,{class:"ml-2",size:13}))),l.a.createElement("div",{className:"row reset-margin justify-content-center py-2"},l.a.createElement("label",{className:"col-md-3 no-margin text-center"},l.a.createElement("b",null," Against FA Due")),l.a.createElement("label",{className:"col-md-3 no-margin text-center"},l.a.createElement("b",null," Against Fee ")),l.a.createElement("label",{className:"col-md-3 no-margin text-center"},l.a.createElement("b",null," Against Penalty"))),l.a.createElement("div",{className:"row reset-margin justify-content-center py-2"},l.a.createElement("div",{className:"col-md-3"},l.a.createElement("input",{type:"checkbox",id:"toggle_1",className:"toggle visually-hidden",checked:a.state.FAcheck_box_checked,onChange:function(e){return a.handleReviewChange(e,"fa")},value:"1"}),l.a.createElement("label",{className:"h-40 select_toogle reset_width reset_font_size text-right no-margin ".concat(a.state.fa?"bordered_green":" "),for:"toggle_1"},Ne(e.to_capture.principal,a.currency_code)," "),a.state.fa?l.a.createElement("h6",{className:"text-center text-green"},l.a.createElement("b",null,"(reviewed)")):l.a.createElement("h6",{className:"text-center"},l.a.createElement("b",null,"(review)"))),l.a.createElement("div",{className:"col-md-3 "},l.a.createElement("input",{type:"checkbox",id:"toggle_2",className:"toggle visually-hidden",checked:a.state.FEEcheck_box_checked,onChange:function(e){return a.handleReviewChange(e,"fee")},value:"2"}),l.a.createElement("label",{className:"h-40 select_toogle reset_width reset_font_size text-right no-margin ".concat(a.state.fee?"bordered_green":" "),for:"toggle_2"},Ne(e.to_capture.fee,a.currency_code)," "),a.state.fee?l.a.createElement("h6",{className:"text-center text-green"},l.a.createElement("b",null,"(reviewed)")):l.a.createElement("h6",{className:"text-center"},l.a.createElement("b",null,"(review)"))),l.a.createElement("div",{className:"col-md-3 "},l.a.createElement("input",{type:"checkbox",id:"toggle_3",className:"toggle visually-hidden",checked:a.state.PENcheck_box_checked,onChange:function(e){return a.handleReviewChange(e,"penalty")},value:"3"}),l.a.createElement("label",{className:"h-40 select_toogle reset_width reset_font_size text-right no-margin ".concat(a.state.penalty?"bordered_green":" "),for:"toggle_3"},Ne(e.to_capture.penalty,a.currency_code)),a.state.penalty?l.a.createElement("h6",{className:"text-center text-green"},l.a.createElement("b",null,"(reviewed)")):l.a.createElement("h6",{className:"text-center"},l.a.createElement("b",null,"(review)")))),a.state.excess_field&&l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"rule-form-group form-group row reset-margin justify-content-center"},l.a.createElement("label",{className:"col-md-3 label__name text-center"},l.a.createElement("b",null," Against Excess "))),l.a.createElement("div",{className:"row justify-content-center"},l.a.createElement("div",{className:"col-md-3"},l.a.createElement("input",{type:"checkbox",id:"toggle_4",className:"toggle visually-hidden",checked:a.state.EXCcheck_box_checked,onChange:function(e){return a.handleReviewChange(e,"excess")},value:"4"}),l.a.createElement("div",{style:{position:"relative"}},l.a.createElement("div",{className:"excess_fieldBlinker_box"}),l.a.createElement("label",{className:"h-40 select_toogle reset_width reset_font_size text-right no-margin reset_position ".concat(a.state.excess?"bordered_green":" "),for:"toggle_4"}," ",Ne(e.to_capture.excess,a.currency_code))),a.state.excess?l.a.createElement("h6",{className:"text-center text-green"},l.a.createElement("b",null,"(reviewed)")):l.a.createElement("h6",{className:"text-center"},l.a.createElement("b",null,"(review)")))))))))),a.state.processing&&l.a.createElement("p",{style:{color:"red",textAlign:"right"}},a.state.processing)),l.a.createElement(nt.a.Footer,null,l.a.createElement("div",{className:"col-md-9 reset-margin reset-padding"},b("loan","review_sync")&&l.a.createElement("button",{type:"button",className:"btn btn-primary float-right mr-1 ".concat(a.state.repayment_style),onClick:a.handleSubmit,disabled:a.state.calling_api},"Review & Sync"),b("loan","unlink_payment")&&"recon"==a.props.mode&&l.a.createElement("button",{type:"button",className:"btn btn-danger float-right mr-1",onClick:a.handleUnlinkPayment,disabled:a.state.calling_api},"Unlink Payment "),l.a.createElement("button",{type:"button",className:"btn btn-outline-primary float-right mr-5 ",onClick:a.handleClose,"data-dismiss":"modal","aria-label":"Close"},"Cancel"))))):null},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){this.repayment_txn={amount:0},this.setState({data:this.props.data})}},{key:"componentWillReceiveProps",value:function(e){if(this.setState({data:e.data}),"capture"==this.props.mode){var t=this.props.data.lender_code,a=this.props.data.acc_prvdr_code,n=this.props.data.cust_id,l={lender_code:t,status:"enabled",network_prvdr_code:a,cust_id:n},r={cust_id:n,status:"enabled",acc_purpose:this.props.data.loan_purpose};this.setOptionsListToStateFromAppApi("common","lender_accounts",this.req({lender_account:l}),["account_id","acc_num_disp_txt"]),this.setOptionsListToStateFromAppApi("common","customer_accounts",this.req({customer_account:r}),["account_id","acc_num_disp_txt"])}}},{key:"handleTxnId",value:function(){var e=this,t=this.repayment_txn.acc_stmt_txn_id;this.setState({txn_data:"",txn_msg:""}),t.length>5&&Ka(this.req({loan_doc_id:this.state.summary.loan_doc_id,acc_id:this.to_acc.value,txn_id:t,is_skip_trans_id_check:this.state.is_skip_trans_id_check,mode:"credit"},!0)).then(function(t){e.resp(t),t&&("success"===t.status?(e.setState({apply_btn:"disable_div",txn_data:"",txn_failed_msg:""}),t.data?t.data.hasOwnProperty("ignore_check")?e.setState({apply_btn:""}):t.data.hasOwnProperty("message")?e.setState({txn_failed_msg:t.data.message}):t.data.total_amount==e.repayment_txn.amount?e.setState({txn_data:t.data.acc_stmt_records,apply_btn:""}):t.data.total_amount!=e.repayment_txn.amount&&e.setState({txn_failed_msg:"Please check the repayment amount."}):e.setState({txn_failed_msg:"Please check the transaction ID. No payment received to the account with this transaction ID."})):alert(t.message+"\n"+JSON.stringify(t.data)))})}},{key:"render",value:function(){var e=this;return l.a.createElement(l.a.Fragment,null,this.WaivePenaltyModal(this.state.summary),this.ReturnExcessModal(this.state.summary),this.RepaymentSummaryModal(this.state.summary),l.a.createElement("input",{value:this.props.title,type:"button",className:"btn btn-primary repayment",id:this.props.data.id,variant:"danger",onClick:function(t){e.capture_repayment_summary(t,"capture_repayment")}}))}}]),t}(ct),rn=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={repayment_style:"disable_div",unlink_payment:{},reviewed:0,modalBox:!1,modalBox2:!1,modal:null,opacity:""},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){this.setState({data:this.props.data})}},{key:"componentWillReceiveProps",value:function(e){this.setState({data:e.data})}},{key:"recon_status",value:function(e){var t=e.recon_status;return"10_capture_payment_pending"==t?l.a.createElement(ln,{mode:"recon",title:"Review & Sync",data:e,onSync:this.props.onSync}):"80_recon_done"==t?l.a.createElement("span",{className:"font-weight-bold",style:{color:"#007bff"}},Ze(t)):Ze(t)}},{key:"recon_desc",value:function(e){var t=e.recon_status,a=e.recon_desc;e.stmt_txn_type;if("70_incorrect_amount_in_fa"==t)return Ze(a);if("50_multiple_fas_matched"==t||"05_multiple_fas_captured"==t){var n=a.split(",");return l.a.createElement("span",null,l.a.createElement($.a,{to:"/fa/view/"+n[0],style:{color:"grey"},target:"_blank"},n[0]),"\xa0|\xa0",l.a.createElement($.a,{to:"/fa/view/"+n[1],style:{color:"grey"},target:"_blank"},n[1]))}if("30_no_matching_fa"==t||"20_no_match_customers"==t)return Ze(a);if("40_multi_match_customers"==t){var r=a.split(",");return l.a.createElement("span",null," ",l.a.createElement($.a,{to:"/borrower/indiv/view/"+r[0],target:"_blank"},r[0]),"\xa0|\xa0",l.a.createElement($.a,{to:"/borrower/indiv/view/"+r[1],target:"_blank"},r[1]))}}},{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("td",null,l.a.createElement(kt,{base:this.recon_status(this.state.data),overlay:this.recon_desc(this.state.data)})))}}]),t}(ct),sn=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={section1:"show_div",account:{},rowdatas:[],columndatas:[],copy:[],showtable:!1,disable_btn:!0},a.handleFields=function(e){""!=e.target.value?a.setState({section1:"disable_div"}):""==e.target.value&&a.setState({section1:"show_div"}),a.handleChange(e)},a.handleChange=function(e){a.setState(Object(Z.a)({},a.state,{account_id:e.target.value,disable_btn:!1}))},a.changeHandler=function(e){var t=e,n=a.state.rowdatas.filter(function(e){return null!==e.stmt_txn_type&&e.stmt_txn_type.toLowerCase().includes(t.toLowerCase())||null!==e.stmt_txn_id&&e.stmt_txn_id.includes(t)||null!==e.loan_doc_id&&e.loan_doc_id.toLowerCase().includes(t.toLowerCase())||null!==e.descr&&e.descr.toLowerCase().includes(t.toLowerCase())});a.setState(function(e){return e.copy=n})},a.SearchController=function(){var e=new Date,t=String(e.getDate()).padStart(2,"0"),n=String(e.getMonth()+1).padStart(2,"0");e=e.getFullYear()+"-"+n+"-"+t;a.setState({showtable:!0});var l={account_id:a.state.account_id,status:null,stmt_txn_date__from:e,stmt_txn_date__to:e,stmt_txn_type:"debit"};Gt(a.req({statement_search:l},!1,"statement_search")).then(function(e){if(a.resp(e),console.log(e),!e)return null;"success"===e.status&&(a.setState(function(t){return t.rowdatas=e.data.account_txns}),a.setState(function(t){return t.copy=e.data.account_txns}),a.setState(function(e){return e.columndatas=a.columndatas()}))})},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){var e=this;this.lender_code,this.country_code;this.setOptionsToStateFromApi("lender"),this.setOptionsListToStateFromAppApi("common","list",Object(Z.a)({},this.def_req,{status:"enabled",biz_account:!0}),["acc_prvdr_code","name"],"acc_prvdrs");var t=this.lender_code,a=g("acc_prvdr_code"),n={lender_code:t,country_code:this.country_code,to_recon:!0};void 0!=a&&sa(this.req({account:n},!0)).then(function(t){t&&("success"===t.status?""!=t.data&&e.getSelectOptionsFromResult(t.data,"lender_accounts",["id","name"]):alert(t.message+"\n"+JSON.stringify(t.data)))})}},{key:"columndatas",value:function(){var e=this;return[{Header:"SI No.",id:"row",width:100,Cell:function(e){return l.a.createElement("div",null,e.index+1,console.log("rowtytytyg.row",e))}},{Header:"Cust ID",id:"cust_id",accessor:function(e){return l.a.createElement("div",null,e.cust_id)}},{Header:"FA ID",id:"loan_doc_id",width:160,accessor:function(e){return l.a.createElement("div",null,e.loan_doc_id)}},{Header:"FA Amount",id:"dr_amt",accessor:function(e){return je(l.a.createElement("div",null,e.dr_amt))}},{Header:"Disbursed time",id:"stmt_txn_date",accessor:function(e){return l.a.createElement("div",null,e.stmt_txn_date.substr(12,20),console.log("row.stmt_txn_date",e.stmt_txn_date))}},{Header:"Debit",id:"dr_amt",accessor:function(t){return je(Ne(t.dr_amt,e.currency_code))}},{Header:"Stmt Txn ID",id:"stmt_txn_id",accessor:function(e){return e.stmt_txn_id}},{Header:l.a.createElement("div",{className:""},"Description"),id:"descr",accessor:function(e){return l.a.createElement("div",{className:""},l.a.createElement(xt,{full_text:e.descr,no_reduce:!0}))}},{Header:"Stmt Txn Date",id:"stmt_txn_date",accessor:function(e){return ve(e.stmt_txn_date,!0)}},{Header:"Matching FA ID",id:"chk_fa_id",accessor:function(t){return e.chk_fa_id(t)}},{Header:"Recon Status",id:"recon",accessor:function(t){return l.a.createElement(rn,{data:t,onSync:e.handleTransactionlist})}}]}},{key:"chk_fa_id",value:function(e){var t=e.loan_doc_id,a=e.recon_status;return t?"10_capture_payment_pending"==a?l.a.createElement("span",null,l.a.createElement($.a,{style:{color:"grey"},to:"/fa/view/"+t,target:"_blank"},t)):"80_recon_done"==a?l.a.createElement("span",null,l.a.createElement($.a,{to:"/fa/view/"+t,style:{color:"#007bff"},target:"_blank"},t)):l.a.createElement($.a,{to:"/fa/view/"+t,style:{color:"grey"},target:"_blank"},t):"NA"}},{key:"render",value:function(){var e=this;return console.log("this.state",this.state.account_id),l.a.createElement("div",{className:""},l.a.createElement("h2",{className:"text-white text-center"},"Today Disbursed FA"),l.a.createElement("div",{className:"date-range ",style:{padding:15}},l.a.createElement("div",{className:"form-row d-flex align-items-center"},l.a.createElement("div",{className:"form-group col-md-3"},l.a.createElement("span",{className:"form-label"},"Accounts"),l.a.createElement("font",{className:"text-danger"},"   *  "),l.a.createElement("select",{id:"from_acc_id",className:"form-control",defaultValue:this.selected.lender_accounts,ref:function(t){return e.from_acc=t},required:"required",onChange:function(t){return e.handleChange(t)}},this.state.lender_accounts_dd),console.log("this.state.today",this.state.today)),l.a.createElement("div",{className:"",style:{paddingLeft:"30px "}},l.a.createElement(lt.a,{className:"btn btn-secondory ",onClick:function(){return e.SearchController()},disabled:this.state.disable_btn},"Search")," \xa0"))),(this.state.rowdatas.length>0||0===this.state.rowdatas.length)&&this.state.showtable&&l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"d-flex justify-content-between align-items-center",style:{padding:5}},l.a.createElement("p",{className:"no-margin text-white"},l.a.createElement("b",null,"Total Entries : ",this.state.copy.length)),l.a.createElement("div",{style:{position:"relative"}},l.a.createElement("i",{class:"fa-solid fa-magnifying-glass search_pos"}),l.a.createElement("input",{placeholder:"Search here",className:"search_posInput",onChange:function(t){return e.changeHandler(t.target.value)}}))),l.a.createElement(ua,{showPag:!0,minRow:0,row_data:void 0!==this.state.copy?this.state.copy:[],column_data:this.state.columndatas,resizable:!1,defaultSorted:[{id:"stmt_txn_date",desc:!1}],exportCSV:!0,csvFile:"Today_disbursed_FA",csvData:this.state.copy})))}}]),t}(ct),cn=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={section1:"show_div",account:{}},a.handleResetClick=function(e){alert("called"),a.handleReset()},a.handleSection2=function(e){(e=re()(e).format("YYYY-MM-DD")).target&&(e=e.target.value);""!=e?a.setState({section2:"disable_div"}):a.setState({section2:"show_div"})},a.handleFields=function(e){""!=e.target.value?a.setState({section1:"disable_div"}):""==e.target.value&&a.setState({section1:"show_div"}),a.handleChange(e)},a.loadAccounts=function(e){var t=a.lender_code,n=a.state.account;n[e.target.id]=e.target.value;var l=g("acc_prvdr_code")?g("acc_prvdr_code"):n.acc_prvdr_code,r=Object(Z.a)({lender_code:t,country_code:a.country_code,to_recon:!0,network_prvdr_code:l},n);void 0!=l&&sa(a.req({account:r},!0)).then(function(e){e&&("success"===e.status?""!=e.data&&a.getSelectOptionsFromResult(e.data,"lender_accounts",["id","name"]):alert(e.message+"\n"+JSON.stringify(e.data)))})},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){var e=this;this.setOptionsToStateFromApi("lender"),this.setOptionsListToStateFromAppApi("common","list",Object(Z.a)({},this.def_req,{status:"enabled",biz_account:!0}),["acc_prvdr_code","name"],"acc_prvdrs");var t={master_data:{status:"enabled",data_key:"account_transaction_type"}};Je(this.req(t)).then(function(t){t&&("success"===t.status?e.getSelectOptionsFromResult(t.data,"account_txn_type",["data_code","data_value"]):alert(t.message+"\n"+JSON.stringify(t.data)))});var a=this.lender_code,n=g("acc_prvdr_code"),l={lender_code:a,country_code:this.country_code,to_recon:!0,network_prvdr_code:n};void 0!=n&&sa(this.req({account:l},!0)).then(function(t){t&&("success"===t.status?""!=t.data&&e.getSelectOptionsFromResult(t.data,"lender_accounts",["id","name"]):alert(t.message+"\n"+JSON.stringify(t.data)))})}},{key:"render",value:function(){var e=this;return l.a.createElement("div",{className:"date-range",style:{padding:15}},l.a.createElement("div",{className:"form-row"},!this.admin_roles.includes(g("role_codes"))&&l.a.createElement("div",{className:"col-md-3"},l.a.createElement("span",null,"Account Provider"),l.a.createElement("font",{className:"text-danger"},"   *  "),l.a.createElement("select",{id:"acc_prvdr_code",value:this.props.data.acc_prvdr_code,onChange:function(t){e.handleChange(t),e.loadAccounts(t)},className:"form-control",type:"text",required:"required"},this.state.acc_prvdrs_dd)),l.a.createElement("div",{className:"form-group col-md-3"},l.a.createElement("span",{className:"form-label"},"Accounts"),l.a.createElement("font",{className:"text-danger"},"   *  "),l.a.createElement("select",{id:"account_id",className:"form-control",required:"required",onChange:this.handleChange},this.state.lender_accounts_dd)),l.a.createElement("div",{className:"form-group col-md-3 ".concat(this.state.section1)},l.a.createElement("span",{className:"form-label"},"Start Date"),l.a.createElement("font",{className:"text-danger"},"   *  "),l.a.createElement(Ft.a,{closeOnSelect:!0,onChange:function(t){e.handleDateChange("stmt_txn_date__from",t),e.handleSection2(t)},dateFormat:"DD MMM YYYY",timeFormat:!1,required:"required"})),l.a.createElement("div",{className:"form-group col-3 ".concat(this.state.section1)},l.a.createElement("span",{className:"form-label"},"End Date"),l.a.createElement("font",{className:"text-danger"},"   *  "),l.a.createElement(Ft.a,{closeOnSelect:!0,onChange:function(t){e.handleDateChange("stmt_txn_date__to",t),e.handleSection2(t)},dateFormat:"DD MMM YYYY",timeFormat:!1,required:"required"})),l.a.createElement("div",{className:"form-group col-md-3 ".concat(this.state.section1)},l.a.createElement("span",{className:"form-label"},"Statement Transaction Type"),l.a.createElement("select",{id:"stmt_txn_type",className:"form-control",onChange:this.handleChange},this.getSelectOptions("stmt_txn_type")))),l.a.createElement("div",{className:"form-row"},b("recon","recon_status")&&l.a.createElement("div",{className:"form-group col-md-3 ".concat(this.state.section1)},l.a.createElement("span",{className:"form-label"},"Recon Status"),l.a.createElement("select",{id:"recon_status",className:"form-control",onChange:this.handleChange},this.getSelectOptions("recon_status"))),l.a.createElement("div",{className:"form-group col-md-3 ".concat(this.state.section1)},l.a.createElement("span",{className:"form-label"},"Recon Status"),l.a.createElement("select",{id:"recon_status",className:"form-control",onChange:this.handleChange},l.a.createElement("option",{value:""},"choose"),l.a.createElement("option",{value:"10_capture_payment_pending"},"Capture Payment Pending"),l.a.createElement("option",{value:"80_recon_done"},"Recon Done"),l.a.createElement("option",{value:"cant_recon"},"Can't Recon"))),l.a.createElement("div",{className:"form-group col-md-3 ".concat(this.state.section2)},l.a.createElement("span",{className:"form-label"},"Statement Transaction ID"),l.a.createElement("input",{id:"stmt_txn_id",className:"form-control",onChange:function(t){e.handleFields(t),e.handleChange(t)},required:!0})),l.a.createElement("div",{className:"form-group col-md-3 ".concat(this.state.section2)},l.a.createElement("span",{className:"form-label"},"FA ID"),l.a.createElement("input",{id:"loan_doc_id",className:"form-control",onChange:function(t){e.handleFields(t),e.handleChange(t)},required:!0}))),l.a.createElement("div",{className:"form-row justify-content-md-center mt-3"},l.a.createElement(lt.a,{className:"btn btn-secondory ",onClick:this.props.onlist,disabled:this.props.disable_btn},"Search")," \xa0"))}}]),t}(ct),on=a(53),dn=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={statement_search:{},repayment_style:"disable_div",lenderTxnStmts:null,account_result:"hide_div",modalBox:!0,modal:null,unlink_payment:{},reviewed:0,recon_status:!0,rowdatas:[],columndatas:[],copy:[]},a.handleClose=function(e){a.setState({modalBox:!1,selected_payment:null})},a.handleSubmit=function(e){var t=a.state.selected_payment.amount,n=a.state.selected_payment.cust_name;if(0!=window.confirm("Are you sure the payment of ".concat(Ne(t,a.currency_code)," was made by ").concat(n))){var l={loan_doc_id:a.state.selected_payment.loan_doc_id,acc_stmt_txn_id:a.state.selected_payment.acc_stmt_txn_id,amount:a.state.selected_payment.amount};Ha(a.req(l,!0)).then(function(e){if(!e)return null;"success"===e.status?(alert("Payment captured successfully"),a.handleClose(),a.handleTransactionlist()):alert(e.message)})}},a.capture_repayment=function(e,t){var n={acc_stmt_txn_id:e.target.id,loan_doc_id:t};a.setState({unlink_payment:n}),Ra(a.req(n)).then(function(e){if(!e)return null;"success"===e.status?a.setState({modalBox:!0,selected_payment:e.data}):alert(e.message)})},a.handleUnlinkPayment=function(e){var t=a.state.selected_payment.amount,n=a.state.selected_payment.cust_name;if(console.log(a.state.selected_payment),0!=window.confirm("Are you sure this payment of ".concat(Ne(t,a.currency_code)," is not related ").concat(n))){var l=a.state.unlink_payment;qa(a.req(l,!0)).then(function(e){if(!e)return null;"success"===e.status?a.setState({modalBox:!1}):alert(e.message)})}},a.handleReviewChange=function(e){var t=e.target.checked,n=a.state.reviewed,l="disable_div";t?n++:n--,6==n&&(l=""),a.setState({reviewed:n,repayment_style:l})},a.handleTransactionlist=function(e){var t=a.state.statement_search;a.validate_search(t)&&(Ut()("#statement_search").DataTable().destroy(),Gt(a.req({statement_search:t},!1,"statement_search")).then(function(e){if(a.resp(e),console.log(e),!e)return null;"success"===e.status?(a.setState(function(t){return t.rowdatas=e.data.account_txns}),a.setState(function(t){return t.copy=e.data.account_txns}),a.setState(function(e){return e.columndatas=a.columndatas()}),a.setState({account_result:"show_div"})):alert(e.message+"\n"+JSON.stringify(e.data))}))},a.changeHandler=function(e){var t=e,n=a.state.rowdatas.filter(function(e){return null!==e.stmt_txn_type&&e.stmt_txn_type.toLowerCase().includes(t.toLowerCase())||null!==e.stmt_txn_id&&e.stmt_txn_id.includes(t)||null!==e.loan_doc_id&&e.loan_doc_id.toLowerCase().includes(t.toLowerCase())||null!==e.descr&&e.descr.toLowerCase().includes(t.toLowerCase())});a.setState(function(e){return e.copy=n})},a.RepaymentSummaryModal=function(e){return e?l.a.createElement(nt.a,{show:a.state.modalBox,onHide:a.handleClose,size:"l"},l.a.createElement(nt.a.Header,{closeButton:!0,show:a.state.modalBox,onHide:a.handleClose},l.a.createElement(nt.a.Title,null,"Capture FA Payment (",e.loan_doc_id,")")),l.a.createElement(nt.a.Body,null,l.a.createElement("div",{className:"container"},l.a.createElement("p",null,"Review the below payment data by clicking over them. "),l.a.createElement("form",null,l.a.createElement("div",{className:"rule-form-group form-group row reset-margin"},l.a.createElement("label",{for:"",className:"col-sm-4 label__name reset-padding"},"Account txn ID"),l.a.createElement("div",{className:"col-sm-8 reset-padding"},l.a.createElement("div",null,l.a.createElement("input",{type:"checkbox",id:"toggle_1",className:"toggle visually-hidden",onChange:a.handleReviewChange,value:"1"}),l.a.createElement("label",{className:"select_toogle",for:"toggle_1"},e.stmt_txn_id," "),l.a.createElement("div",{className:"control-me"})))),l.a.createElement("div",{className:"rule-form-group form-group row reset-margin"},l.a.createElement("label",{for:"",className:"col-sm-4 label__name reset-padding"},"Txn description"),l.a.createElement("div",{className:"col-sm-8 reset-padding"},l.a.createElement("div",null,l.a.createElement("input",{type:"checkbox",id:"toggle_2",className:"toggle visually-hidden",onChange:a.handleReviewChange,value:"1"}),l.a.createElement("label",{className:"select_toogle",for:"toggle_2"},e.descr),l.a.createElement("div",{className:"control-me"})))),l.a.createElement("div",{className:"rule-form-group form-group row reset-margin"},l.a.createElement("label",{for:"",className:"col-sm-4 label__name reset-padding"},"Customer"),l.a.createElement("div",{className:"col-sm-8 reset-padding"},l.a.createElement("div",null,l.a.createElement("input",{type:"checkbox",id:"toggle_3",className:"toggle visually-hidden",onChange:a.handleReviewChange,value:"1"}),l.a.createElement("label",{className:"select_toogle",for:"toggle_3"},e.cust_name," | ",e.biz_name),l.a.createElement("div",{className:"control-me"})))),l.a.createElement("div",{className:"rule-form-group form-group row reset-margin"},l.a.createElement("label",{for:"",className:"col-sm-4 label__name reset-padding"},"Cust ID"),l.a.createElement("div",{className:"col-sm-8 reset-padding"},l.a.createElement("div",null,l.a.createElement("input",{type:"checkbox",id:"toggle_4",className:"toggle visually-hidden",onChange:a.handleReviewChange,value:"2"}),l.a.createElement("label",{className:"select_toogle",for:"toggle_4"},e.cust_id," | ",e.acc_number),l.a.createElement("div",{className:"control-me"})))),l.a.createElement("div",{className:"rule-form-group form-group row reset-margin"},l.a.createElement("label",{for:"",className:"col-sm-4 label__name reset-padding"},"Payment amount"),l.a.createElement("div",{className:"col-sm-8 reset-padding"},l.a.createElement("div",null,l.a.createElement("input",{type:"checkbox",id:"toggle_5",className:"toggle visually-hidden",onChange:a.handleReviewChange,value:"3"}),l.a.createElement("label",{className:"select_toogle",for:"toggle_5"},Ne(e.amount,a.currency_code)),l.a.createElement("div",{className:"control-me"})))),l.a.createElement("div",{className:"rule-form-group form-group row reset-margin"},l.a.createElement("label",{for:"",className:"col-sm-4 label__name reset-padding"},"Outstanding amount"),l.a.createElement("div",{className:"col-sm-8 reset-padding"},l.a.createElement("div",null,l.a.createElement("input",{type:"checkbox",id:"toggle_6",className:"toggle visually-hidden",onChange:a.handleReviewChange,value:"3"}),l.a.createElement("label",{className:"select_toogle",for:"toggle_6"},Ne(e.current_os_amount,a.currency_code)),l.a.createElement("div",{className:"control-me"})))),l.a.createElement("div",{className:"row"},l.a.createElement("label",null,l.a.createElement("input",{type:"checkbox",onChange:a.handleSMSCheckboxClick,defaultChecked:!0}),"\xa0 Send payment confirmation notification SMS")))),a.state.processing&&l.a.createElement("p",{style:{color:"red",textAlign:"right"}},a.state.processing)),l.a.createElement(nt.a.Footer,null,l.a.createElement("div",{className:"col-md-9 reset-margin reset-padding"},l.a.createElement("button",{type:"button",className:"btn btn-primary float-right mr-1 ".concat(a.state.repayment_style),onClick:a.handleSubmit,disable:!0},"Capture Payment "),l.a.createElement("button",{type:"button",className:"btn btn-danger float-right mr-1",onClick:a.handleUnlinkPayment,disable:!0},"Unlink Payment "),l.a.createElement("button",{type:"button",className:"btn btn-outline-primary  mr-1",onClick:a.handleClose,"data-dismiss":"modal","aria-label":"Close"},"Cancel")))):null},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"validate_search",value:function(e){return!!(e.stmt_txn_date__from&&e.stmt_txn_date__to&&e.account_id||e.account_id&&e.stmt_txn_id||e.account_id&&e.loan_doc_id)||(alert("Please enter valid search criteria"),!1)}},{key:"chk_txn_type",value:function(e){return 0===e.cr_amt?l.a.createElement("span",null,Ze(e.stmt_txn_type)," ",l.a.createElement(on.b,{className:"ml-2",color:"red"})):l.a.createElement("span",null,Ze(e.stmt_txn_type)," ",l.a.createElement(on.a,{className:"ml-2",color:"green"}))}},{key:"chk_fa_id",value:function(e){var t=e.loan_doc_id,a=e.recon_status;return t?"10_capture_payment_pending"==a?l.a.createElement("span",null,l.a.createElement($.a,{style:{color:"grey"},to:"/fa/view/"+t,target:"_blank"},t)):"80_recon_done"==a?l.a.createElement("span",null,l.a.createElement($.a,{to:"/fa/view/"+t,style:{color:"#007bff"},target:"_blank"},t)):l.a.createElement($.a,{to:"/fa/view/"+t,style:{color:"grey"},target:"_blank"},t):"NA"}},{key:"recon_status",value:function(e){var t=this,a=e.recon_status;if("10_capture_payment_pending"==a){var n=e.id,r=e.loan_doc_id;return l.a.createElement(lt.a,{id:n,variant:"danger",onClick:function(e){return t.capture_repayment(e,r)}},"Capture Payment")}return"80_recon_done"==a?l.a.createElement("span",{className:"font-weight-bold",style:{color:"#007bff"}},Ze(a)):Ze(a)}},{key:"recon_desc",value:function(e){var t=e.recon_status,a=e.recon_desc;e.stmt_txn_type;if("70_incorrect_amount_in_fa"==t)return Ze(a);if("50_multiple_fas_matched"==t||"05_multiple_fas_captured"==t){var n=a.split(",");return l.a.createElement("span",null,l.a.createElement($.a,{to:"/fa/view/"+n[0],style:{color:"grey"},target:"_blank"},n[0]),"\xa0|\xa0",l.a.createElement($.a,{to:"/fa/view/"+n[1],style:{color:"grey"},target:"_blank"},n[1]))}if("30_no_matching_fa"==t||"20_no_match_customers"==t)return Ze(a);if("40_multi_match_customers"==t){var r=a.split(",");return l.a.createElement("span",null," ",l.a.createElement($.a,{to:"/borrower/indiv/view/"+r[0],target:"_blank"},r[0]),"\xa0|\xa0",l.a.createElement($.a,{to:"/borrower/indiv/view/"+r[1],target:"_blank"},r[1]))}}},{key:"columndatas",value:function(){var e=this;return[{Header:"SI No.",id:"row",Cell:function(e){return l.a.createElement("div",null,e.index+1)}},{Header:"Stmt Txn Type",id:"stmt Txn",accessor:function(t){return e.chk_txn_type(t)}},{Header:"Credit",id:"cr_amt",accessor:function(t){return je(Ne(t.cr_amt,e.currency_code))}},{Header:"Debit",id:"dr_amt",accessor:function(t){return je(Ne(t.dr_amt,e.currency_code))}},{Header:"Balance",id:"balance",accessor:function(t){return je(Ne(t.balance,e.currency_code))}},{Header:"Stmt Txn ID",id:"stmt_txn_id",accessor:function(e){return e.stmt_txn_id}},{Header:"Description",id:"descr",accessor:function(e){return l.a.createElement(xt,{full_text:e.descr,no_reduce:!0})}},{Header:"Stmt Txn Date",id:"stmt_txn_date",accessor:function(e){return ve(e.stmt_txn_date,!0)}},{Header:"Matching FA ID",id:"chk_fa_id",accessor:function(t){return e.chk_fa_id(t)}},{Header:"Recon Status",id:"recon",accessor:function(t){return l.a.createElement(rn,{data:t,onSync:e.handleTransactionlist})}}]}},{key:"render",value:function(){var e=this;return l.a.createElement("div",{id:"",className:"container containerTopmargin max-width no-padding"},this.RepaymentSummaryModal(this.state.selected_payment),l.a.createElement("div",null,l.a.createElement("div",{className:"form-row no-margin"},l.a.createElement("h5",{className:"lender_accounts no-margin headerTitle headerPadvert"},"Recon (Float) Account Transactions")),l.a.createElement(cn,{id:"statement_search",data:this.state.statement_search,onlist:this.handleTransactionlist,disable_btn:this.state.calling_api,onComponentChange:this.handleComponentChange,onComponentReset:this.handleComponentReset,onComponentElementChange:this.handleComponentElementChange})),l.a.createElement("div",{className:"container-fluid"},l.a.createElement("br",null),l.a.createElement("div",{className:"row",id:"float_style"}),l.a.createElement("div",{className:this.state.account_result},(this.state.rowdatas.length>0||0===this.state.rowdatas.length)&&l.a.createElement(l.a.Fragment,null,l.a.createElement("div",null,l.a.createElement("h4",null,"Account Transactions"),l.a.createElement("div",{className:"d-flex justify-content-between align-items-center",style:{padding:5}},l.a.createElement("p",{className:"no-margin text-white"},l.a.createElement("b",null,"Total Entries : ",this.state.copy.length)),l.a.createElement("div",{style:{position:"relative"}},l.a.createElement("i",{class:"fa-solid fa-magnifying-glass search_pos"}),l.a.createElement("input",{placeholder:"Search here",className:"search_posInput",onChange:function(t){return e.changeHandler(t.target.value)}}))),l.a.createElement(ua,{showPag:!0,minRow:0,row_data:void 0!==this.state.copy?this.state.copy:[],column_data:this.state.columndatas,resizable:!1,defaultSorted:[{id:"stmt_txn_date",desc:!1}],exportCSV:!0,csvFile:"Lender_account_statement",csvData:this.state.copy}))))))}}]),t}(st),mn=function(e){return L("/api/admin/acc_prvdr",e)},un=function(e){return L("/api/admin/acc_prvdr/list",e)},_n=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(d.a)(t).call(this,e))).state={comp_name:"account_provider"},a.state={values:[]},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;return l.a.createElement("div",{id:""},l.a.createElement("div",{className:"container no-margin"},l.a.createElement("div",{className:"row"},l.a.createElement("h4",null,"Account Provider Details")),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-3 account_prvdr"},l.a.createElement("span",null,"Account Provider Name"),l.a.createElement("font",{className:"text-danger"},"   *  "),l.a.createElement("input",{id:"name",value:this.props.data.name,onChange:this.toUpperHandleChange,required:"required",className:"form-control"})),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("span",null,"Account Provider Code"),l.a.createElement("font",{className:"text-danger"},"   *  "),l.a.createElement("input",{id:"acc_prvdr_code",value:this.props.data.acc_prvdr_code,maxLength:4,onChange:this.handleChange,required:"required",className:"form-control"})),l.a.createElement("div",{className:"col-md-6"},l.a.createElement(Tt,{id:"acc_provider_logo",label:"Logo",acc_prvdr_id:this.props.data.id,acc_prvdr_code:this.props.data.acc_prvdr_code,db_file_name:this.props.data.acc_provider_logo,type:"image",mode:this.props.mode,onEditUpload:function(t){e.handleChangeForEdit(t),e.handleSave(t)},onCreateUpload:this.handleChange}))),l.a.createElement("br",null)))}}]),t}(ct),pn=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={toList:!1,account_provider:{},reg_address:{},org:{},div_style:"show_div",dropdown_div_style:"disable_div"},a.handleSubmit=function(e){e.preventDefault();var t=a.state.account_provider;t.country_code=a.country_code,t.status="enabled";var n=a.state.org;n.reg_address=a.state.reg_address,n.reg_address.touch="",n.country_code=a.country_code,t.org=n,mn(a.req({acc_provider:t})).then(function(e){e&&("success"===e.status?(a.setState({toList:!0}),alert("New Account Provider created successfully")):alert(e.message+"\n"+JSON.stringify(e.data)))})},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return!0===this.state.toList?l.a.createElement(Y.a,{to:"/account_provider/list/"}):l.a.createElement("div",{className:"container text-labelblue"},l.a.createElement("h5",null,this.props.title+(this.state.account_provider.name?" : "+this.state.account_provider.name:"")),l.a.createElement("form",{id:"account_provider_form",onSubmit:this.handleSubmit},l.a.createElement("div",{id:""},l.a.createElement(_n,{id:"account_provider",title:"Account Provider",data:this.state.account_provider,mode:this.props.mode,onComponentChange:this.handleComponentChange}),l.a.createElement("hr",null),"create"===this.props.mode&&l.a.createElement(Ea,{id:"acc_prvdr_choose_org",resetOrgNAddr:this.handleResetOrgNAddr,onChange:this.handleOrgChange}),l.a.createElement("div",{className:"".concat(this.state.div_style)},l.a.createElement(Mt,{id:"org",title:"Organisation Details",data:this.state.org,mode:this.props.mode,onComponentChange:this.handleComponentChange}),l.a.createElement("br",null),l.a.createElement("hr",null),l.a.createElement(jt,{id:"reg_address",title:"Registered Address",data:this.state.reg_address,mode:this.props.mode,onComponentChange:this.handleComponentChange,onComponentReset:this.handleComponentReset}),l.a.createElement("br",null),l.a.createElement("hr",null)),l.a.createElement("input",{type:"button",className:"btn btn-primary ".concat("create"===this.props.mode?"show_button":"hide_button"),onClick:this.handleSubmit,value:"Create New Account Provider"}))),l.a.createElement("br",null),l.a.createElement("br",null))}}]),t}(st),hn=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={accPrvdrList:null,columndatas:[]},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){var e=this,t=this.country_code;un(this.req({country_code:t})).then(function(t){t&&(e.setState(function(e){return e.rowdatas=t.data.list}),e.setState(function(t){return t.columndatas=e.columndatas()}))})}},{key:"columndatas",value:function(){return[{Header:"Name",id:"name",accessor:function(e){return e.name}},{Header:"ACC PRVDR Type",id:"account_types",accessor:function(e){return e.account_types}},{Header:"ACC PRVDR",id:"acc_prvdr_code",accessor:function(e){return l.a.createElement(Me,{logotype:e.acc_prvdr_code})}},{Header:"Status",id:"status",accessor:function(e){return l.a.createElement(Vt,{head:"1",id:e.id,entity:"acc_providers",status:e.status})}},{Header:"Action",id:"action",accessor:function(e){return l.a.createElement(Vt,{head:"2",id:e.id,entity:"acc_providers",status:e.status})}}]}},{key:"render",value:function(){return null!=this.state.columndatas?l.a.createElement("div",{className:"container containerTopmargin max-width no-padding"},l.a.createElement("h5",{className:"preHeaderpad headerTitle no-margin"},this.props.title||"Account Provider List"),l.a.createElement(ua,{showPag:!1,minRow:0,row_data:void 0!==this.state.rowdatas?this.state.rowdatas:[],column_data:this.state.columndatas,resizable:!1})):l.a.createElement("div",null,l.a.createElement("p",null,"No Account Providers Available ! "))}}]),t}(st),vn=function(e){return L("/api/admin/loan_product_template",e)},gn=function(e){return L("/api/admin/loan_product",e)},fn=function(e){return L("/api/admin/loan_product_template/list",e)},En=function(e){return L("/api/admin/loan_product/list",e)},bn=function(e){return L("/api/admin/loan_product/update",e)},yn=function(e){return L("/api/admin/loan_product/update",e)},Nn=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={comp_name:"loan_product_template"},a.handleFlowFeeTypeChange=function(e){a.setState({flow_fee_type:e.target.value}),a.handleChange(e)},a.handleFlowFeeDurationChange=function(e){a.setState({flow_fee_duration:e.target.value}),a.handleProdChange(e)},a.handleProdChange=function(e){if("new_product"===a.props.id){var t=e.target.id,n=e.target.value;a.setState(Object(S.a)({},t,n),function(){var e=function(e,t,a,n,l){var r="";return e&&(r+="STD "+e+" "+l+" "),n?r+=n:t&&(r+="for "+t+" days"),a&&(r+=" @"+a),r}(a.state.max_loan_amount,a.state.duration,a.state.flow_fee,a.state.flow_fee_duration,a.currency_code);a.props.onProdChange(e)})}a.handleChange(e)},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){Object(X.a)(Object(d.a)(t.prototype),"componentWillMount",this).call(this)}},{key:"render",value:function(){return l.a.createElement("div",{id:"",className:"col-md-12"},l.a.createElement("div",{className:"card "},l.a.createElement("div",{className:"card-header card-header-primary card-header-icon"},l.a.createElement("h3",{className:"card-title"},this.props.title?this.props.title:"Float Advance Product")),l.a.createElement("div",{className:"card-body"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-5 form-group md-form-group"},l.a.createElement("label",{for:"max_loan_amount",className:"md-label-floating"}," Float Amount ( ",this.currency_code," ) *"),l.a.createElement("input",{id:"max_loan_amount",value:this.props.data.max_loan_amount,onChange:this.handleProdChange,onClick:this.handleClick,className:"form-control",type:"text",required:!0})),l.a.createElement("div",{className:"col-md-5 form-group md-form-group"},l.a.createElement("label",{for:"duration",className:"md-label-floating"}," Repayment Duration *"),l.a.createElement("select",{id:"duration",value:this.props.data.duration,onChange:this.handleProdChange,className:"form-control",type:"text",required:!0},l.a.createElement("option",{value:""},"Choose"),l.a.createElement("option",{value:"1"},"1 day"),l.a.createElement("option",{value:"2"},"2 days"),l.a.createElement("option",{value:"3"},"3 days"),l.a.createElement("option",{value:"4"},"4 days"),l.a.createElement("option",{value:"5"},"5 days"),l.a.createElement("option",{value:"6"},"6 days"),l.a.createElement("option",{value:"7"},"7 days"),l.a.createElement("option",{value:"8"},"8 days"),l.a.createElement("option",{value:"9"},"9 days"),l.a.createElement("option",{value:"10"},"10 days")))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-sm-4 checkbox-radios"},l.a.createElement("label",{className:"md-label-floating"}," Flow Fee Type *"),l.a.createElement("div",{className:"form-check"},l.a.createElement("label",{className:"form-check-label"},l.a.createElement("input",{className:"form-check-input",type:"radio",id:"flow_fee_type",value:"Flat",onChange:this.handleFlowFeeTypeChange,checked:"Flat"===this.props.data.flow_fee_type})," Flat",l.a.createElement("span",{className:"circle"},l.a.createElement("span",{className:"check"})))),l.a.createElement("div",{className:"form-check"},l.a.createElement("label",{className:"form-check-label"},l.a.createElement("input",{className:"form-check-input",type:"radio",id:"flow_fee_type",value:"Percent",onChange:this.handleFlowFeeTypeChange,checked:"Percent"===this.props.data.flow_fee_type})," Percentage",l.a.createElement("span",{className:"circle"},l.a.createElement("span",{className:"check"}))))),l.a.createElement("div",{className:"col-sm-4 checkbox-radios"},l.a.createElement("span",null,"Percent"===this.state.flow_fee_type?"Fee in %":"Flat Fee ("+this.currency_code+")"),l.a.createElement("font",{className:"text-danger"},"   *  "),l.a.createElement("input",{id:"flow_fee",value:this.props.data.flow_fee,onChange:this.handleProdChange,className:"form-control",type:"text",required:!0})),l.a.createElement("div",{className:"col-sm-4 checkbox-radios"},l.a.createElement("label",{className:"md-label-floating"}," Fee for *"),l.a.createElement("div",{className:"form-check"},l.a.createElement("label",{className:"form-check-label"},l.a.createElement("input",{className:"form-check-input",type:"radio",id:"flow_fee_duration",value:"entire_duration",onChange:this.handleFlowFeeDurationChange,checked:"entire_duration"===this.props.data.flow_fee_duration})," Entire duration ",this.state.duration?this.state.duration+" days":"",l.a.createElement("span",{className:"circle"},l.a.createElement("span",{className:"check"})))),l.a.createElement("div",{className:"form-check"},l.a.createElement("label",{className:"form-check-label"},l.a.createElement("input",{className:"form-check-input",type:"radio",id:"flow_fee_duration",value:"each_day",onChange:this.handleFlowFeeDurationChange,checked:"each_day"===this.props.data.flow_fee_duration})," Each day",l.a.createElement("span",{className:"circle"},l.a.createElement("span",{className:"check"})))))))),l.a.createElement("div",{className:"row ".concat(this.state.button_style)},l.a.createElement("div",{className:"col-md-1 ".concat(this.state.edit_button_style)},l.a.createElement(Et,{entity:"template",onClick:this.handleEdit})),l.a.createElement("div",{className:"col-md-1 ".concat(this.state.save_button_style)},l.a.createElement("input",{onClick:this.handleSave,type:"button",className:"btn btn-success",value:"Save"}))))}}]),t}(ct),wn=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={toList:!1,loan_product_template:{flow_fee_duration:"entire_duration",flow_fee_type:"Flat"}},a.handleSubmit=function(e){e.preventDefault();var t=a.state.loan_product_template;t.country_code=a.country_code,t.status="enabled",vn(a.req({loan_product_template:t})).then(function(e){e&&("success"===e.status?(a.setState({toList:!0}),alert("New FA Product Template created successfully")):alert(e.message+"\n"+JSON.stringify(e.data)))})},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){var e,t=this;if("view"===this.props.mode){var a=this.props.match.params.product_template_id,n=null;(e=this.req({product_template_id:a}),L("/api/admin/loan_product_template/view",e)).then(function(e){e&&(n=e.data,t.setState({loan_product_template:n}))})}}},{key:"render",value:function(){return!0===this.state.toList?l.a.createElement(Y.a,{to:"/fa_product/template/list"}):"view"===this.props.mode?l.a.createElement("div",{className:"container"},l.a.createElement("div",{id:""},l.a.createElement(Nn,{id:"loan_product_template",data:this.state.loan_product_template,mode:this.props.mode,onComponentChange:this.handleComponentChange}))):l.a.createElement("div",{className:"container"},l.a.createElement("h5",null,this.props.title),l.a.createElement("form",{id:"loan_product_template_form",onSubmit:this.handleSubmit},l.a.createElement("div",{id:""},l.a.createElement(Nn,{id:"loan_product_template",data:this.state.loan_product_template,mode:this.props.mode,onComponentChange:this.handleComponentChange}),l.a.createElement("br",null),l.a.createElement("input",{type:"button",className:"btn btn-primary ".concat("create"===this.props.mode?"show_button":"hide_button"),onClick:this.handleSubmit,value:"Create Template"}))),l.a.createElement("br",null),l.a.createElement("br",null))}}]),t}(st),Cn=function(e){return L("/api/admin/score_model/cs_result_config",e)},kn=function(e){return L("/api/admin/score_model/weightages/update",e)},Sn=function(e){return L("/api/admin/score_model/cs_factor",e)},xn=function(e){return L("/api/admin/score_model/cs_factor/list",e)},An=function(e){return L("/api/admin/score_model/create",e)},On=function(e){return L("/api/admin/score_model/list",e)},jn=function(e){return L("/api/admin/upload_cust_txns",e)},Dn=function(e){return L("/api/admin/score_model/cust_csf_values/create",e)},Fn=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={templateList:null,comp_name:"loan_product",value:0},a.handleChange1=function(e){a.props.data.data_provider_id&&a.setState({option_div_style:"show_div"})},a.handleProdNameChange=function(e){a.props.data.product_name=e.target.value,a.handleChange(e)},a.handleCSChange=function(e){var t=e.target,n=t.value,l=t.min,r=t.max;n=Math.max(Number(l),Math.min(Number(r),Number(n))),n=isNaN(n)?0:n,a.props.data.min_credit_score=n},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){var e=this;Object(X.a)(Object(d.a)(t.prototype),"componentWillMount",this).call(this),this.setOptionsToStateFromApi("lender"),this.setOptionsToStateFromApi("acc_prvdr");var a={country_code:this.country_code};On(this.req(a)).then(function(t){t&&("success"===t.status?e.getSelectOptionsFromResult(t.data,"score_model",["model_code","model_name"]):alert(t.message+"\n"+JSON.stringify(t.data)))})}},{key:"render",value:function(){var e=this;return l.a.createElement("div",{id:"",className:"col-md-12"},l.a.createElement("div",{className:"card "},l.a.createElement("div",{className:"card-header card-header-primary card-header-icon"},l.a.createElement("h3",{className:"card-title"},this.props.title?this.props.title:"Product Details")),l.a.createElement("div",{className:"card-body"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-4 form-group md-form-group"},l.a.createElement("span",{for:"product_name",className:"md-label"}," Product Name *"),l.a.createElement("input",{id:"product_name",value:this.props.data.product_name,onChange:function(t){e.handleProdNameChange(t),e.handleChange1(t),e.toUpperHandleChange(t)},className:"form-control",type:"text",required:"required"})),l.a.createElement("div",{className:"col-md-4 form-group md-form-group"},l.a.createElement("span",{for:"product_code",className:"md-label"}," Product Code *"),l.a.createElement("input",{id:"product_code",value:this.props.data.product_code,onChange:this.handleChange,className:"form-control",type:"text",required:"required"})),l.a.createElement("div",{className:"col-md-4 form-group md-form-group"},l.a.createElement("span",{for:"product_name",className:"md-label"}," Product Type *"),l.a.createElement("select",{id:"product_type",value:this.props.data.product_type,onChange:this.handleChange,className:"form-control",type:"text",required:"required"},this.getSelectOptions("product_type")))),l.a.createElement("div",{className:"row mt-50"},!this.admin_roles.includes(g("role_codes"))&&l.a.createElement("div",{className:"col-md-3 form-group md-form-group"},l.a.createElement("span",{for:"acc_prvdr_code",className:"md-label"}," Account Provider *"),l.a.createElement("select",{id:"acc_prvdr_code",value:this.props.data.acc_prvdr_code,onChange:this.handleChange,className:"form-control",type:"text",required:"required"},this.state.acc_prvdr_dd)),l.a.createElement("div",{className:"col-md-3 form-group md-form-group"},l.a.createElement("span",{for:"lender_code",className:"md-label"}," Lender *"),l.a.createElement("select",{id:"lender_code",value:this.props.data.lender_code,onChange:this.handleChange,className:"form-control",type:"text",required:"required"},this.state.lender_dd)),l.a.createElement("div",{className:"col-md-3 form-group md-form-group"},l.a.createElement("span",{for:"cs_model_code",className:"md-label"}," Credit Score Model *"),l.a.createElement("select",{id:"cs_model_code",value:this.props.data.model_code,onChange:this.handleChange,className:"form-control",required:"required"},this.state.score_model_dd)),l.a.createElement("div",{className:"col-md-3 form-group md-form-group"},l.a.createElement("span",{for:"penalty_amount",className:"md-label"}," Penalty Amount Per Day (",this.currency_code,") *"),l.a.createElement("input",{id:"penalty_amount",value:this.props.data.penalty_amount,onChange:this.handleChange,className:"form-control",type:"text",required:"required"}))))))}}]),t}(ct),Mn=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(d.a)(t).call(this,e))).state={toList:!1,new_product_div_style:"show_div",template_product_div_style:"hide_div",templates_div_style:"hide_div",product_mapping_div_style:"show_div",templateList:null,loan_product:{acc_prvdr_code:a.acc_prvdr_code},data_prvdr:{},product_template:{flow_fee_type:"Flat",flow_fee_duration:"entire_duration"},new_product:{flow_fee_type:"Flat",flow_fee_duration:"entire_duration"}},a.onChooseTemplateClick=function(e){var t=a.templates[e.target.id];a.setState({template_product_div_style:"show_div"}),a.setState({product_mapping_div_style:"show_div"}),a.setState({product_template:t})},a.handleSubmit=function(e){e.preventDefault();var t=a.state.loan_product,n={},l=a.state.new_product;(n=Object(Z.a)({},l,t)).status="enabled",n.country_code=a.country_code,gn(a.req({loan_product:n})).then(function(e){e&&("success"===e.status?(a.setState({toList:!0}),alert("New Loan Product created successfully")):alert(e.message+"\n"+JSON.stringify(e.data)))})},a.selectCreationPath=function(e){Ut()("#product_temp").DataTable().destroy(),a.path=e.target.value,"from_template"===a.path?(a.setState({new_product_div_style:"hide_div"}),a.setState({template_product_div_style:"hide_div"}),a.setState({product_mapping_div_style:"hide_div"}),a.setState({templates_div_style:"show_div"}),fn(a.req(null)).then(function(e){if(e){a.templates=e.data;var t=e.data.map(function(e,t){return l.a.createElement("tr",{key:t},l.a.createElement("td",{"data-sort":e.max_loan_amount}," ",e.max_loan_amount," ",a.state.currency_code),l.a.createElement("td",null," ",e.duration," day(s)"),l.a.createElement("td",null," ",e.flow_fee_type," "),l.a.createElement("td",{"data-sort":e.flow_fee}," ",_t(e,a.currency_code)," "),l.a.createElement("td",null," ",it(e.flow_fee_duration,e.duration)," "),l.a.createElement("td",null," ",l.a.createElement("input",{id:t,type:"radio",name:"products",onClick:a.onChooseTemplateClick,value:"View / Edit"})))});a.setState({templateList:t}),Ut()("#product_temp").removeAttr("width").dataTable({columns:[{width:"20%"},{width:"20%"},{width:"10%"},{width:"20%"},{width:"20%"},{width:"10%"}],dom:"Bfrtip",buttons:["csv","excel","print"]})}})):(a.setState({template_product_div_style:"hide_div"}),a.setState({templates_div_style:"hide_div"}),a.setState({new_product_div_style:"show_div"}),a.setState({product_mapping_div_style:"show_div"}))},a.handleProdChange=a.handleProdChange.bind(Object(u.a)(Object(u.a)(a))),a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){var e=this;if("view"===this.props.mode){this.setState({product_div_style:"show_div"});var t={product_id:this.props.match.params.product_id};(function(e){return L("/api/admin/loan_product/view",e)})(this.req(t)).then(function(t){t&&(e.loan_product=t.data,e.setState({loan_product:e.loan_product}),e.setState({loan_product_template:e.loan_product}))})}}},{key:"handleProdChange",value:function(e){var t=this.state.loan_product;t.product_name=e,this.setState({loan_product:t})}},{key:"render",value:function(){return!0===this.state.toList?l.a.createElement(Y.a,{to:"/fa_product/list"}):l.a.createElement("div",{id:""},l.a.createElement("div",{className:"container mt-50"},l.a.createElement("div",{id:"",className:"".concat(this.state.templates_div_style)},l.a.createElement("h4",null,"Select Product Template"),l.a.createElement("div",{id:"datatable product_temp",className:"table-responsive"},l.a.createElement("table",{id:"product_temp",className:"table"},l.a.createElement("thead",{className:"text-info"},l.a.createElement("tr",null,l.a.createElement("th",null,"FA Amount"),l.a.createElement("th",null,"FA Duration"),l.a.createElement("th",null,"Flow Fee Type"),l.a.createElement("th",null,"Flow Fee"),l.a.createElement("th",null,"Fee For"),l.a.createElement("th",null,"Choose"))),l.a.createElement("tbody",null,this.state.templateList)))),l.a.createElement("div",{id:"",className:"".concat(this.state.template_product_div_style)},l.a.createElement(Nn,{title:"Float Advance Product Template",id:"product_template",mode:"disabled",data:this.state.product_template})),l.a.createElement("div",{id:"",className:"".concat(this.state.new_product_div_style)},l.a.createElement(Nn,{title:"Float Advance",id:"new_product",mode:"create",data:this.state.new_product,onProdChange:this.handleProdChange,onComponentChange:this.handleComponentChange}),l.a.createElement("br",null)),l.a.createElement("div",{id:"",className:"".concat(this.state.product_mapping_div_style)},l.a.createElement(Fn,{id:"loan_product",data:this.state.loan_product,mode:this.props.mode,onComponentChange:this.handleComponentChange})),l.a.createElement("input",{type:"button",className:"btn btn-primary ".concat("create"===this.props.mode?"show_button":"hide_button"),onClick:this.handleSubmit,value:"Create Product"})))}}]),t}(st),Pn=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={templateList:null,toView:!1,template_id:null},a.handleClick=function(e){a.setState({template_id:e.target.id,toView:!0})},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){var e=this;fn(this.req(null)).then(function(t){if(t){var a=t.data.map(function(t,a){return l.a.createElement("tr",{key:a},l.a.createElement("td",{"data-sort":t.max_loan_amount}," ",je(t.max_loan_amount,e.currency_code)),l.a.createElement("td",null," ",t.duration," day(s)"),l.a.createElement("td",null," ",t.flow_fee_type," "),l.a.createElement("td",{"data-sort":t.flow_fee}," ",je(_t(t,e.currency_code))," "),l.a.createElement("td",null," ",it(t.flow_fee_duration,t.duration)," "),l.a.createElement(Vt,{id:t.id,entity:"loan_product_templates",status:t.status}),l.a.createElement("td",null,l.a.createElement(ft,{id:t.id,entity:"template",onClick:e.handleClick})))});e.setState({templateList:a}),Ut()("#list_template").removeAttr("width").dataTable({order:[],columns:[{width:"5%"},{width:"5%"},{width:"5%"},{width:"5%"},{width:"5%"},{width:"5%"},{width:"5%"},{width:"5%"}],dom:"Bfrtip",buttons:["csv","excel","print"]})}})}},{key:"render",value:function(){return!0===this.state.toView?l.a.createElement(Y.a,{to:"/fa_product/template/view/".concat(this.state.template_id)}):null!=this.state.templateList?l.a.createElement("div",{id:"datatable",className:"table-responsive"},l.a.createElement("h5",null,"List of FA Products Template"),l.a.createElement("table",{id:"list_template",className:"table"},l.a.createElement("thead",{className:"text-info"},l.a.createElement("tr",null,l.a.createElement("th",null,"FA Amount"),l.a.createElement("th",null,"FA Duration"),l.a.createElement("th",null,"Flow Fee Type"),l.a.createElement("th",null,"Flow Fee"),l.a.createElement("th",null,"Flow Fee For"),l.a.createElement("th",null,"Status"),l.a.createElement("th",null,"Action"),l.a.createElement("th",null,"Action"))),l.a.createElement("tbody",null,this.state.templateList))):l.a.createElement("div",null,l.a.createElement("p",null,"No Loan product template Available ! "))}}]),t}(st),Bn=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={save_btn_style:"disable_div"},a.handleSave=function(e){var t={loan_product:a.state};bn(a.req(t)).then(function(e){e&&("success"===e.status?(alert(e.message),window.location.reload()):alert(e.message+"\n"+JSON.stringify(e.data)))})},a.handleValueChange=function(e){e.target.value?a.setState({save_btn_style:"show_div"}):a.setState({save_btn_style:"disable_div"}),a.handleSelfChangeState(e)},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){var e=this;this.setState({id:this.props.product.id,product_name:this.props.product.product_name,cs_model_code:this.props.product.cs_model_code,penalty_amount:this.props.product.penalty_amount});var t={country_code:this.country_code};On(this.req(t)).then(function(t){t&&("success"===t.status?e.getSelectOptionsFromResult(t.data,"score_model",["model_code","model_name"]):alert(t.message+"\n"+JSON.stringify(t.data)))})}},{key:"render",value:function(){return l.a.createElement("div",{className:"container"},l.a.createElement("br",null),l.a.createElement("div",{className:"row"},l.a.createElement("h4",null,l.a.createElement("b",null,"Edit Product"))),l.a.createElement("br",null),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-2"},l.a.createElement("label",null,"Data Provider"),"\xa0\xa0\xa0"),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("label",null,l.a.createElement("b",null,this.props.product.data_provider))),l.a.createElement("div",{className:"col-md-2"},l.a.createElement("label",null,"Lender"),"\xa0\xa0\xa0"),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("label",null,l.a.createElement("b",null,this.props.product.lender)))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-2"},l.a.createElement("label",null,"FA Amount"),"\xa0\xa0\xa0"),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("label",null,l.a.createElement("b",null,mt(this.props.product.max_loan_amount,this.currency_code)))),l.a.createElement("div",{className:"col-md-2"},l.a.createElement("label",null,"FA Duration"),"\xa0\xa0\xa0"),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("label",null,l.a.createElement("b",null,ut(this.props.product.duration,this.props.product.flow_fee_duration))))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-2"},l.a.createElement("label",null,"Flow Fee Type"),"\xa0\xa0\xa0"),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("label",null,l.a.createElement("b",null,this.props.product.flow_fee_type))),l.a.createElement("div",{className:"col-md-2"},l.a.createElement("label",null,"Flow Fee"),"\xa0\xa0\xa0"),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("label",null,l.a.createElement("b",null,_t(this.props.product,this.currency_code))))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-2"},l.a.createElement("label",null,"Flow Fee For"),"\xa0\xa0\xa0"),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("label",null,l.a.createElement("b",null,it(this.props.product.flow_fee_duration,this.props.product.duration)))),l.a.createElement("div",{className:"col-md-2"},l.a.createElement("label",null,"Status"),"\xa0\xa0\xa0"),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("label",null,l.a.createElement("b",null,Ze(this.props.product.status))))),l.a.createElement("br",null),l.a.createElement("div",{className:"row text-labelblue"},l.a.createElement("div",{className:"col-md-3"},l.a.createElement("span",null,"Product Name"),l.a.createElement("font",{className:"text-danger"},"   *  "),l.a.createElement("input",{id:"product_name",value:this.state.product_name,onChange:this.handleValueChange,className:"form-control",type:"text",required:"required"})),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("span",null,"Credit Score Model"),l.a.createElement("font",{className:"text-danger"},"   *  "),l.a.createElement("select",{id:"cs_model_code",value:this.state.cs_model_code,onChange:this.handleValueChange,className:"form-control",required:"required"},this.state.score_model_dd)),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("span",null,"Penalty Amount Per Day (",this.currency_code,")"),l.a.createElement("font",{className:"text-danger"},"   *  "),l.a.createElement("input",{id:"penalty_amount",value:this.state.penalty_amount,onChange:this.handleValueChange,className:"form-control",type:"text",required:"required"}))),l.a.createElement("br",null),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-8"}),l.a.createElement("div",{className:"col-md-4 ".concat(this.state.save_btn_style)},l.a.createElement("input",{type:"button",value:"Save",className:"btn btn-success",onClick:this.handleSave}))))}}]),t}(ct),Ln=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={product_list:null,toView:!1,toEdit:!1,product_list_div_style:"hide_div",product_id:null},a.handleClick=function(e){a.setState({product_id:e.target.id,toView:!0})},a.handleEditClick=function(e,t){a.setState({product_details:t,toEdit:!0})},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){var e=this,t=b("product","edit");En(this.req(null,!0)).then(function(a){if(a){var n=a.data.map(function(a,n){return l.a.createElement("tr",{key:n},l.a.createElement("td",null," ",a.product_name),l.a.createElement("td",null," ",a.product_type),l.a.createElement("td",{"data-sort":a.cs_model_code}," ",Ze(a.cs_model_code)),l.a.createElement("td",{"data-sort":a.max_loan_amount}," ",je(Ne(a.max_loan_amount,e.currency_code))),l.a.createElement("td",null," ",ut(a.duration,a.flow_fee_duration)," "),l.a.createElement("td",{"data-sort":a.flow_fee}," ",_t(a,e.currency_code)," "),l.a.createElement("td",{"data-sort":a.penalty_amount}," ",Ne(a.penalty_amount,e.currency_code)," "),l.a.createElement(Vt,{id:a.id,entity:"loan_products",status:a.status}),t&&l.a.createElement("td",{key:n}," ",l.a.createElement("input",{type:"button",id:a.id,product:a,onClick:function(t){return e.handleEditClick(t,a)},value:"view / edit",className:"btn btn-primary btn-sm "})))});e.setState({product_list:n,can_edit:t});t&&[{width:"10%"},{width:"10%"},{width:"10%"},{width:"10%"},{width:"5%"},{width:"10%"},{width:"15%"},{width:"10%"}].push({width:"10%"}),Ut()("#list_product").removeAttr("width").dataTable({order:[],dom:"Bfrtip",buttons:["csv","excel","print"]})}})}},{key:"render",value:function(){return!0===this.state.toView?l.a.createElement(Y.a,{to:"/fa_product/view/".concat(this.state.product_id)}):!0===this.state.toEdit?l.a.createElement(Bn,{id:"product",product:this.state.product_details,onComponentChange:this.handleComponentChange}):null!=this.state.product_list?l.a.createElement("div",{className:"card"},l.a.createElement("div",{class:"card-header card-header-icon card-header-primary"},l.a.createElement("h3",{class:"card-title text-white d-inline-block"},"List of FA Products ")),l.a.createElement("div",{id:"",className:"p-4"},l.a.createElement("div",{id:"datatable",className:"table-responsive"},l.a.createElement("table",{id:"list_product",className:"table"},l.a.createElement("thead",{className:"text-info"},l.a.createElement("tr",null,l.a.createElement("th",null,"Product Name"),l.a.createElement("th",null,"Product Type"),l.a.createElement("th",null,"Credit Score Model"),l.a.createElement("th",null,"FA Amount"),l.a.createElement("th",null,"FA Duration"),l.a.createElement("th",null,"Flow Fee"),l.a.createElement("th",null,"Penalty Amount"),l.a.createElement("th",null,"Status"),l.a.createElement("th",null,"Action"),this.state.can_edit&&l.a.createElement("th",null,"Action"))),l.a.createElement("tbody",null,this.state.product_list))))):l.a.createElement("div",null,l.a.createElement("p",null,"No FA Products Available ! "))}}]),t}(st),Tn=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={product_list:null,toView:!1,search_res_div_style:"hide_div",product_id:null,query:"",results:[]},a.getInfo=function(){yn(a.state.query).then(function(e){e&&("success"===e.status?a.setState({results:e.data}):alert(e.message+"\n"+JSON.stringify(e.data)))})},a.handleInputChange=function(){a.setState({query:a.search.value},function(){a.state.query&&a.state.query.length>1?a.state.query.length%2===0&&a.getInfo():a.state.query})},a.handleClick=function(e){a.setState({product_id:e.target.id,toView:!0})},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){var e=this,t=this.acc_prvdr_code;En(this.req(null,t)).then(function(t){if(t){var a=t.data.map(function(t,a){return l.a.createElement("tr",null,l.a.createElement("td",{key:a}," ",t.product_name),l.a.createElement("td",{key:a}," ",t.data_provider),l.a.createElement("td",{key:a}," ",t.lender),l.a.createElement("td",{key:a}," ",t.credit_score_model),l.a.createElement("td",{key:a}," ",t.interest_percent_per_day),l.a.createElement("td",{key:a}," ",t.tenure_in_days),l.a.createElement("td",{key:a}," ",je(t.max_loan_amount)),l.a.createElement("td",{key:a}," ",l.a.createElement(Vt,{id:t.id,entity:"loan_products",status:t.status})),l.a.createElement("td",{key:a}," ",l.a.createElement("input",{id:t.id,type:"submit",className:"",onClick:e.handleClick,value:"View / Edit",class:"btn btn-primary"})))});e.setState({product_list:a})}})}},{key:"componentDidUpdate",value:function(){Ut()("#list_product").dataTable({order:[],bAutoWidth:!0,bDestroy:!0})}},{key:"render",value:function(){var e=this;return!0===this.state.toView?l.a.createElement(Y.a,{to:"/fa_product/product/view/".concat(this.state.product_id)}):null!=this.state.product_list?l.a.createElement("div",{className:""},l.a.createElement("form",null,l.a.createElement("input",{placeholder:"Search for...",ref:function(t){return e.search=t},onChange:this.handleInputChange})),l.a.createElement("div",{id:"datatable",className:"table-responsive"},l.a.createElement("table",{id:"list_product",className:"table"},l.a.createElement("thead",{className:"text-info"},l.a.createElement("tr",null,l.a.createElement("th",null,"Product Name"),l.a.createElement("th",null,"Data Provider"),l.a.createElement("th",null,"Lender"),l.a.createElement("th",null,"Credit Score Model"),l.a.createElement("th",null,"Interest % per day"),l.a.createElement("th",null,"Tenure in days"),l.a.createElement("th",null,"Max Loan Amount"),l.a.createElement("th",null,"Status"),l.a.createElement("th",null,"Action"))),l.a.createElement("tbody",null,this.state.product_list)))):l.a.createElement("div",null,l.a.createElement("p",null,"No Float Advance Products Available ! "))}}]),t}(st),Rn=function(e){return L("/api/admin/master_data/key/create",e)},Hn=function(e){return L("/api/admin/master_data/create",e)},qn=function(e){return L("/api/admin/master_data/key/status",e)},In=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={data_keys:"",comp_name:"master_data_key"},a.globalRadiobtn=function(e){e.target.checked?a.props.data.country_code="*":a.props.data.country_code=a.country_code},a.countrySpcfcRadiobtn=function(e){e.target.checked&&(a.props.data.country_code=a.country_code)},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){var e=this.country_code;this.setOptionsListToStateFromAppApi("common/key","all_data_keys",this.req({country_code:e,status:"enabled",add_no_parent:!0}),["data_key","data_key"])}},{key:"render",value:function(){return l.a.createElement("div",{id:""},l.a.createElement("div",{className:"container text-labelblue"},l.a.createElement("div",{className:"row"},l.a.createElement("h5",null,"Add Master Data Key")),l.a.createElement("br",null),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-3"},l.a.createElement("span",null,"Data Group"),l.a.createElement("font",{className:"text-danger"}," * "),l.a.createElement("select",{type:"text",id:"data_group",value:this.props.data.data_group,onChange:this.handleChange,className:"form-control"},this.getSelectOptions("data_group")))),l.a.createElement("br",null),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-3"},l.a.createElement("span",null,"Data Type"),l.a.createElement("font",{className:"text-danger"}," * "),l.a.createElement("select",{type:"text",id:"data_type",value:this.props.data.data_type,onChange:this.handleChange,className:"form-control"},this.getSelectOptions("data_type")))),l.a.createElement("br",null),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-3"},l.a.createElement("span",null,"Data Key"),l.a.createElement("font",{className:"text-danger"},"   *  "),l.a.createElement("input",{id:"data_key",value:this.props.data.data_key,onChange:this.handleChange,required:"required",className:"form-control"}))),l.a.createElement("br",null),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-3"},l.a.createElement("span",null,"Parent Data Key"),l.a.createElement("select",{id:"parent_data_key",value:this.props.data.parent_data_key,onChange:this.handleChange,className:"form-control"},this.state.all_data_keys_dd))),l.a.createElement("br",null),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-3"},l.a.createElement("span",null,"Key Description"),l.a.createElement("input",{id:"key_desc",value:this.props.data.key_desc,onChange:this.handleChange,required:"required",className:"form-control"}))),l.a.createElement("br",null),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-3"},l.a.createElement("b",null,l.a.createElement("span",null,"Data Scope")),l.a.createElement("br",null),"\xa0\xa0",l.a.createElement("label",null,l.a.createElement("input",{type:"radio",name:"data_scope",onClick:this.globalRadiobtn,defaultChecked:!0}),"\xa0\xa0 Global"),l.a.createElement("br",null),"\xa0\xa0",l.a.createElement("label",{className:this.state.country_spcfc_div_style},l.a.createElement("input",{type:"radio",name:"data_scope",onClick:this.countrySpcfcRadiobtn}),"\xa0\xa0",this.country_code)))))}}]),t}(ct),zn=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={data_keys:"",master_data_key:{country_code:"*"},toList:!1},a.handleSubmit=function(e){e.preventDefault();var t=a.state.master_data_key;Rn(a.req({master_data_key:t})).then(function(e){e&&(alert("Master Data Key saved succesfully!"),a.setState({toList:!0}))})},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return!0===this.state.toList?l.a.createElement(Y.a,{to:"/master_data_key/list"}):l.a.createElement("div",{id:""},l.a.createElement("div",{className:"container"},l.a.createElement(In,{id:"master_data_key",data:this.state.master_data_key,onComponentChange:this.handleComponentChange}),l.a.createElement("input",{type:"button",className:"btn btn-primary",onClick:this.handleSubmit,value:"Save"})))}}]),t}(st),Wn=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={masterDataKeyList:null},a.handleStatusClick=function(e){var t=e.target.value.toLowerCase()+"d",a={id:e.target.id,status:t};qn({master_data_key:a}).then(function(e){e&&("success"===e.status?window.location.reload():alert(e.message+"\n"+JSON.stringify(e.data)))})},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){var e,t=this;(e=this.req(null),L("/api/admin/master_data/key/list",e)).then(function(e){if(e){var a=e.data.map(function(e,t){return l.a.createElement("tr",{key:t},l.a.createElement("td",null," ",e.data_key),l.a.createElement("td",null," ","*"===e.country_code?"Global":e.country_code),l.a.createElement("td",null," ",e.parent_data_key||"<<No Parent>>"),l.a.createElement("td",null," ",null===e.data_group?"<<No Data Group>>":e.data_group),l.a.createElement("td",null," ",null===e.data_type?"<<No Data Type>>":e.data_type),l.a.createElement("td",null," ",null===e.key_desc?"<<No Description>>":e.key_desc),l.a.createElement(Vt,{id:e.id,entity:"master_data_keys",status:e.status}))});t.setState({masterDataKeyList:a}),Ut()("#list").removeAttr("width").dataTable({order:[],columns:[{width:"20%"},{width:"10%"},{width:"18%"},{width:"18%"},{width:"8%"},{width:"8%"},{width:"8%"},{width:"10%"}],dom:"Bfrtip",buttons:["csv","excel","print"]})}})}},{key:"render",value:function(){return null!=this.state.masterDataKeyList?l.a.createElement("div",{id:""},l.a.createElement("div",{className:"container"},l.a.createElement("div",{id:"datatable",className:"table-responsive"},l.a.createElement("div",{className:"row"},l.a.createElement("h5",{className:"fa_left"},"List Master Data Key")),l.a.createElement("br",null),l.a.createElement("table",{id:"list",className:"table"},l.a.createElement("thead",{className:"text-info"},l.a.createElement("tr",null,l.a.createElement("th",null,"Data Key"),l.a.createElement("th",null,"Data Scope"),l.a.createElement("th",null,"Parent Data Key"),l.a.createElement("th",null,"Data Group"),l.a.createElement("th",null,"Data Type"),l.a.createElement("th",null,"Key Description"),l.a.createElement("th",null,"Status"),l.a.createElement("th",null,"Action"))),l.a.createElement("tbody",null,this.state.masterDataKeyList))))):l.a.createElement("div",null,l.a.createElement("p",null,"No Master Data Keys Available ! "))}}]),t}(st),Vn=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={dataKeyButtons:null,comp_name:"master_data",datatable_div_style:"hide_div"},a.handleClick=function(e,t){a.data_type=t,"*"===e.target.name?(a.globalCheckboxChecked=!0,a.countryCheckboxChecked=!1,a.setState({country_code:"*",country_spcfc_div_style:"disable_div"})):a.setState({country_code:a.country_code}),Ut()("#table").DataTable().destroy(),a.title_case_data_key=ue(e.target.id),a.data_key=e.target.id,a.listMasterData()},a.addButtonClick=function(e){a.setState({modalBox:!0});var t={country_code:a.country_code,data_key:a.data_key,status:"enabled"};a.setOptionsListToStateFromAppApi("common/key","parent_data_codes",a.req(t),["data_code","data_value"])},a.handleClose=function(e){a.resetModalBox(),a.setState({modalBox:!1})},a.handleGlobalCheckbox=function(e){e.target.checked?a.setState({country_code:"*"}):a.setState({country_code:a.country_code,country_spcfc_div_style:"show_div"})},a.addMasterData=function(e){e.preventDefault();var t={parent_data_code:a.props.data.parent_data_code,data_code:a.props.data.data_code,data_value:a.props.data.data_value,data_key:a.data_key,data_type:a.data_type,country_code:a.state.country_code,status:"enabled"};Hn(a.req({master_data:t})).then(function(e){if(e)if("success"===e.status){alert("Master Data added successfully!"),a.setState({modalBox:!1}),a.resetModalBox();a.country_code,a.title_case_data_key;Ut()("#table").dataTable().fnDestroy(),a.listMasterData()}else alert(e.message+"\n"+JSON.stringify(e.data))}),a.setState({modalBox:!0})},a.listMasterData=function(){var e={master_data:{country_code:a.state.country_code,data_key:a.data_key}};Je(a.req(e)).then(function(e){if(e)if("success"===e.status){var t=e.data.map(function(e,t){return l.a.createElement("tr",{key:t},l.a.createElement("td",null," ",e.data_value),l.a.createElement("td",null," ",e.data_code),l.a.createElement("td",null," ",null==e.parent_data_code?"No Parent":e.parent_data_code),l.a.createElement(Vt,{id:e.id,parent:"master_data",entity:"master_data",status:e.status}))});a.setState({datatable_div_style:"show_div"}),a.setState({masterDataList:t}),a.setState({parent_data_codes_dd:null}),Ut()("#table").removeAttr("width").dataTable({order:[],dom:"Bfrtip",buttons:["csv","excel","print"]})}else alert(e.message+"\n"+JSON.stringify(e.data))})},a.handleChangeDataValue=function(e){a.handleChange(e);var t=e.target.value;t=t.replace(/ /g,"_").toLowerCase(),document.getElementById("data_code").value=t,a.props.data.data_code=t},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){var e=this,t={country_code:this.country_code,status:"enabled",add_no_parent:!1};(function(e){return L(M+"/common/key/all_data_keys",e)})(this.req(t)).then(function(t){if(t)if("success"===t.status){var a=[],n=[];t.data.list.map(function(e,t){"*"===e.country_code?a.push({data_key:e.data_key,data_type:e.data_type,data_group:e.data_group}):n.push({data_key:e.data_key,data_type:e.data_type,data_group:e.data_group})});var r=a.map(function(t,a){return l.a.createElement("input",{type:"button",key:a,id:t.data_key,name:"*",className:"btn_style btn btn-success",onClick:function(a){e.handleClick(a,t.data_type)},value:ue(t.data_key)+" ("+t.data_group+")"})});e.setState({globalDatakeyButtons:r});var s=n.map(function(t,a){return l.a.createElement("input",{type:"button",key:a,id:t.data_key,name:e.country_code,className:"btn_style btn btn-warning",onClick:function(a){e.handleClick(a,t.data_type)},value:ue(t.data_key)+" ("+t.data_group+")"})});e.setState({countrySpecificDatakeys:s})}else alert(t.message+"\n"+JSON.stringify(t.data))})}},{key:"resetModalBox",value:function(){this.props.data.data_code="",this.props.data.data_value="",this.props.data.data_type="",this.props.data.parent_data_code=""}},{key:"render",value:function(){return l.a.createElement("div",{id:""},l.a.createElement("div",{className:"container"},l.a.createElement("div",{className:"row"},l.a.createElement("h5",null,"Add Master Data")),l.a.createElement("div",{className:"row"},l.a.createElement("h5",null,l.a.createElement("b",null,"Global"))),this.state.globalDatakeyButtons,l.a.createElement("br",null),l.a.createElement("div",{className:"row"},l.a.createElement("h5",null,l.a.createElement("b",null,this.country_code))),this.state.countrySpecificDatakeys,l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("div",{className:this.state.datatable_div_style},l.a.createElement("div",{id:"datatable"},l.a.createElement("div",{className:"row"},l.a.createElement("h4",null,this.title_case_data_key,"*"===this.state.country_code&&" - Global"),"\xa0\xa0",l.a.createElement("input",{type:"button",className:"btn btn-primary",onClick:this.addButtonClick,value:"Add"})),l.a.createElement("br",null),l.a.createElement("table",{id:"table",className:"display strip row-border order-column list"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,this.title_case_data_key),l.a.createElement("th",null,this.title_case_data_key," Code"),l.a.createElement("th",null,"Parent Data Code"),l.a.createElement("th",null,"Status"),l.a.createElement("th",null,"Action"))),l.a.createElement("tbody",null,this.state.masterDataList)),l.a.createElement(nt.a,{show:this.state.modalBox,onHide:this.handleClose},l.a.createElement(nt.a.Header,{closeButton:!0,show:this.state.modalBox,onHide:this.handleClose},l.a.createElement(nt.a.Title,null,"Add ",this.title_case_data_key," "),l.a.createElement("br",null)),l.a.createElement(nt.a.Body,null,l.a.createElement("h5",null,"Data Scope : ","*"==this.state.country_code?"Global":this.state.country_code," "),l.a.createElement("div",{className:"container"},l.a.createElement("div",{className:"row text-labelblue"},l.a.createElement("div",{className:"col-md-6"},l.a.createElement("span",null,this.title_case_data_key," Value"),l.a.createElement("font",{className:"text-danger"}," * "),l.a.createElement("input",{type:"text",id:"data_value",value:ue(this.props.data.data_value),onChange:this.handleChangeDataValue,className:"form-control"}))),l.a.createElement("br",null),l.a.createElement("div",{className:"row text-labelblue"},l.a.createElement("div",{className:"col-md-6"},l.a.createElement("span",null,this.title_case_data_key," Code"),l.a.createElement("font",{className:"text-danger"}," * "),l.a.createElement("input",{type:"text",id:"data_code",value:this.props.data.data_code,onChange:this.handleChange,className:"form-control"}))),l.a.createElement("br",null),this.state.parent_data_codes_dd&&l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-6"},l.a.createElement("label",null,"Parent Data Code"),l.a.createElement("select",{type:"text",id:"parent_data_code",value:this.props.data.parent_data_code,onChange:this.handleChange,className:"form-control"},this.state.parent_data_codes_dd))),this.state.show_data_scope&&l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-6"},l.a.createElement("label",null,"Data Scope"),l.a.createElement("br",null),"\xa0\xa0",l.a.createElement("label",null,l.a.createElement("input",{type:"radio",name:"data_scope",onClick:this.globalRadiobtn,defaultChecked:this.globalCheckboxChecked}),"\xa0\xa0 Global"),l.a.createElement("br",null),"\xa0\xa0",l.a.createElement("label",{className:this.state.country_spcfc_div_style},l.a.createElement("input",{type:"radio",name:"data_scope",onClick:this.countrySpcfcRadiobtn,defaultChecked:this.countryCheckboxChecked}),"\xa0\xa0 ",this.country_code)),l.a.createElement("br",null)))),l.a.createElement(nt.a.Footer,null,l.a.createElement(lt.a,{variant:"secondary",onClick:this.handleClose},"Close"),l.a.createElement(lt.a,{type:"button",variant:"primary",onClick:this.addMasterData},"Add")))))))}}]),t}(ct),Yn=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={data_keys:"",master_data:{}},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return l.a.createElement("div",{id:""},l.a.createElement("div",{className:"container"},l.a.createElement(Vn,{id:"master_data",data:this.state.master_data,onComponentChange:this.handleComponentChange}),l.a.createElement("br",null)))}}]),t}(st),Un=function(e){function t(){return Object(c.a)(this,t),Object(i.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){}},{key:"render",value:function(){return!0===this.state.toList?l.a.createElement(Y.a,{to:"/app_user/list}"}):l.a.createElement("div",{className:"container"},l.a.createElement("h4",null,this.props.title+(this.state.market.name?" : "+this.state.market.name:"")),l.a.createElement("form",{id:"market_form",onSubmit:this.handleSubmit},l.a.createElement(zt,{id:"head_person",title:"Market Head",data:this.state.head_person,mode:this.props.mode,onComponentChange:this.handleComponentChange}),l.a.createElement("input",{type:"button",className:"btn btn-primary ".concat("create"===this.props.mode?"show_button":"hide_button"),onClick:this.handleSubmit,value:"Create New Market"})),l.a.createElement("br",null),l.a.createElement("br",null))}}]),t}(st),Jn=function(e){return L("/api/admin/agreement",e)},Kn=function(e){return L("/api/admin/agreement/cust",e)},Gn=function(e){return L("/api/admin/agreement/status",e)},Qn=function(e){return L("/api/admin/agreement/save",e)},Zn=function(e){return L("/api/admin/agreement/load",e)},Xn=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={productList:null,modal_close:!1,toList:!1,type:null},a.handleCreateAgreementClick=function(e){var t={lender_code:a.master_agreement.lender_code,duration_type:a.master_agreement.duration_type,name:a.master_agreement.name,aggr_type:a.agrmt_for,aggr_duration:a.master_agreement.validity,acc_purpose:a.product_group};Jn(a.req({master_agreement:t},!0)).then(function(e){a.resp(e),e&&("success"===e.status?(alert(e.message),a.setState({toList:!0})):alert(e.message+"\n"+JSON.stringify(e.data)))})},a.loadProducts=function(e){if(a.setState({productList:null}),a[e.target.id]=e.target.value,"duration_type"==e.target.id){var t="days"==e.target.value?"days":"fas"==e.target.value?"fas":"months";a.setState({type:t})}null==a.lender_code?alert("Please select Lender"):console.log("ELSE"),a.handleSelfChange(e)},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){this.master_agreement={},this.agrmt_for="onboarded",this.product_group="float_advance",this.setOptionsToStateFromApi("lender")}},{key:"render",value:function(){return!0===this.state.toList?l.a.createElement(Y.a,{to:"/agreement/list"}):l.a.createElement("div",{className:"container text-labelblue"},l.a.createElement("h5",null,this.props.title),l.a.createElement("br",null),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-2"},l.a.createElement("span",null,"Lender"),l.a.createElement("font",{className:"text-danger"},"   *  "),l.a.createElement("select",{id:"lender_code",onChange:this.loadProducts,ref:this.props.createRef,className:"form-control",type:"text",required:"required"},this.state.lender_dd)),l.a.createElement("div",{className:"col-md-2"},l.a.createElement("span",null,"Product Group"),l.a.createElement("select",{id:"product_group",value:this.state.product_group,onChange:this.loadProducts,className:"form-control",type:"text",required:"required"},this.getSelectOptions("product_group"))),l.a.createElement("div",{className:"col-md-2"},l.a.createElement("span",null,"Agreement Type"),l.a.createElement("font",{className:"text-danger"},"   *  "),l.a.createElement("select",{id:"agrmt_for",onChange:this.loadProducts,className:"form-control",type:"text",required:"required"},l.a.createElement("option",{selected:!0},"Choose"),l.a.createElement("option",{value:"onboarded"},"Onboarded Customers"),l.a.createElement("option",{value:"condonation"},"Condonated Customers"),l.a.createElement("option",{value:"probation"},"Probationary Customers"))),l.a.createElement("div",{className:"col-md-2"},l.a.createElement("span",null,"Duration Type"),l.a.createElement("font",{className:"text-danger"},"   *  "),l.a.createElement("select",{id:"duration_type",onChange:this.loadProducts,className:"form-control",type:"text",required:"required"},l.a.createElement("option",{selected:!0},"Choose"),l.a.createElement("option",{value:"days"},"By days"),l.a.createElement("option",{value:"fas"},"By FAs"),l.a.createElement("option",{value:"months"},"By Months"))),l.a.createElement("div",{className:"col-md-2"},l.a.createElement("span",null,"Name"),l.a.createElement("input",{type:"text",id:"name",onChange:this.handleSelfChange,className:"form-control"})),"days"==this.state.type&&l.a.createElement("div",{className:"col-md-2"},l.a.createElement("span",null,"Agreement Validity"),l.a.createElement("font",{className:"text-danger"},"   *  "),l.a.createElement("select",{id:"validity",onChange:this.handleSelfChange,className:"form-control",type:"text",required:!0},l.a.createElement("option",{selected:!0},"Choose"),l.a.createElement("option",{value:"30"},"30 Days"),l.a.createElement("option",{value:"60"},"60 Days"),l.a.createElement("option",{value:"90"},"90 Days"),l.a.createElement("option",{value:"120"},"120 Days"),l.a.createElement("option",{value:"150"},"150 Days"),l.a.createElement("option",{value:"180"},"180 Days"))),"fas"==this.state.type&&l.a.createElement("div",{className:"col-md-2"},l.a.createElement("span",null,"Agreement Validity"),l.a.createElement("font",{className:"text-danger"},"   *  "),l.a.createElement("select",{id:"validity",onChange:this.handleSelfChange,className:"form-control",type:"text",required:!0},l.a.createElement("option",null,"Choose"),l.a.createElement("option",{value:"8"},"Until completing 8 FAs"),l.a.createElement("option",{value:"15"},"Until completing 15 FAs"))),"months"==this.state.type&&l.a.createElement("div",{className:"col-md-2"},l.a.createElement("span",null,"Agreement Validity"),l.a.createElement("font",{className:"text-danger"},"   *  "),l.a.createElement("select",{id:"validity",onChange:this.handleSelfChange,className:"form-control",type:"text",required:!0},l.a.createElement("option",null,"Choose"),l.a.createElement("option",{value:"12"},"12 months"),l.a.createElement("option",{value:"15"},"15 months"),l.a.createElement("option",{value:"18"},"18 months"),l.a.createElement("option",{value:"24"},"24 months"))),l.a.createElement("div",{className:"col-md-2 mt-4"},l.a.createElement("input",{type:"button",disabled:this.state.calling_api,value:"Create Agreement",onClick:this.handleCreateAgreementClick,className:"btn btn-primary"}))))}}]),t}(ct),$n=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={agreementList:null,rowdatas:[],columndatas:[],copy:[]},a.changeHandler=function(e){var t=e,n=a.state.rowdatas.filter(function(e){return null!==e.name&&e.name.toLowerCase().includes(t.toLowerCase())||null!==e.lender_code&&e.lender_code.toLowerCase().includes(t.toLowerCase())||null!==e.aggr_type&&e.aggr_type.toLowerCase().includes(t.toLowerCase())||null!==e.aggr_doc_id&&e.aggr_doc_id.toLowerCase().includes(t.toLowerCase())});a.setState(function(e){return e.copy=n})},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){var e,t=this;this.setOptionsListToStateFromAppApi("common","list",this.def_req,["acc_prvdr_code","name"],"acc_prvdrs"),(e=this.req(null,!0),L("/api/admin/agreement/list",e)).then(function(e){e&&e&&(t.setState(function(t){return t.rowdatas=e.data}),t.setState(function(t){return t.copy=e.data}),t.setState(function(e){return e.columndatas=t.columndatas()}))})}},{key:"columndatas",value:function(){return[{Header:"Name",id:"name",accessor:function(e){return e.name}},{Header:"Lender",id:"lender_code",accessor:function(e){return e.lender_code}},{Header:"Agreement Type",id:"aggr_type",accessor:function(e){return pe(e.aggr_type)}},{Header:"Agreement Doc ID",id:"aggr_doc_id",accessor:function(e){return e.aggr_doc_id}},{Header:"Duration",id:"aggr_duration",accessor:function(e){return e.aggr_duration}},{Header:"Status",id:"status",accessor:function(e){return l.a.createElement(Vt,{id:e.id,entity:"master_agreements",status:e.status,head:"1"})}},{Header:"Action",id:"action",accessor:function(e){return l.a.createElement(Vt,{id:e.id,entity:"master_agreements",status:e.status,head:"2"})}},{Header:"View",id:"aggr_file_rel_path",accessor:function(e){return e.aggr_file_rel_path?l.a.createElement($.a,{to:e.aggr_file_rel_path,target:"_blank"},"View PDF"):l.a.createElement("span",null,"NA")}}]}},{key:"render",value:function(){var e=this;return l.a.createElement("div",{className:"container containerTopmargin max-width no-padding"},l.a.createElement("div",null,l.a.createElement("h5",{className:"no-margin headerTitle"},"Agreement List"),this.state.rowdatas.length>0&&l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"d-flex justify-content-between align-items-center",style:{padding:5}},l.a.createElement("p",{className:"no-margin text-white"},l.a.createElement("b",null,"Total Entries : ",this.state.copy.length)),l.a.createElement("div",{style:{position:"relative"}},l.a.createElement("i",{class:"fa-solid fa-magnifying-glass search_pos"}),l.a.createElement("input",{placeholder:"Search here",className:"search_posInput",onChange:function(t){return e.changeHandler(t.target.value)}}))),l.a.createElement(ua,{showPag:!0,minRow:0,row_data:void 0!==this.state.copy?this.state.copy:[],column_data:this.state.columndatas,resizable:!1,defaultSorted:[{id:"name",desc:!1}],exportCSV:!0,csvFile:"Agreement Lists",csvData:this.state.copy}))))}}]),t}(st),el=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={ScoreModelsList:null,lists:[],columndatas:[]},a.handleClose=function(e){a.setState({modalBox:!1})},a.addButtonClick=function(e){An(a.req(a.score_model)).then(function(e){e&&"success"==e.status&&(alert(JSON.stringify(e.message)),a.setState({modalBox:!1}),window.location.reload())})},a.handleChangeDataValue=function(e){a.handleSelfChange(e);var t=e.target.value;t=t.replace(/ /g,"_").toLowerCase(),document.getElementById("model_code").value=t,a.score_model.model_code=t},a.addScoreModel=function(e){a.setState({modalBox:!0})},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){var e=this;this.score_model={};var t={country_code:this.country_code};On(this.req(t)).then(function(t){t&&(e.setState(function(e){return e.lists=t.data}),e.setState(function(t){return t.columndatas=e.columndatas()}))})}},{key:"columndatas",value:function(){return[{Header:"SI No.",id:"row",Cell:function(e){return l.a.createElement("div",null,e.index+1)}},{Header:"CS Model Code",id:"model_code",accessor:function(e){return e.model_code}},{Header:"CS Model Name",id:"model_name",accessor:function(e){return Ze(e.model_name)}},{Header:function(){return l.a.createElement("div",{style:{textAlign:"center"}},"Model Configs")},id:"model_code_sample",show:!!b("score","weightage_list"),accessor:function(e){return l.a.createElement("div",{style:{textAlign:"center"}},l.a.createElement($.a,{to:"/score_models/weightage/".concat(e.model_code,"/").concat(e.model_name),target:"_blank"},l.a.createElement("input",{type:"button",value:"Weightages",className:"btn-sm btn-primary`"})),l.a.createElement($.a,{style:{paddingLeft:20},to:"/score_models/result_config/".concat(e.model_code),target:"_blank"},l.a.createElement("input",{type:"button",value:"Result Configs",className:"btn-sm btn-primary"})))}}]}},{key:"render",value:function(){return l.a.createElement("div",{className:"container containerTopmargin max-width no-padding"},b("score","create")&&l.a.createElement("div",{style:{textAlign:"right"}},l.a.createElement("input",{type:"button",value:"Add Score Model",onClick:this.addScoreModel,className:"btn btn-primary"})),l.a.createElement("div",null,l.a.createElement("h5",{className:"no-margin personalDetailstextval preHeaderpad headerTitle"},"Score Models"),l.a.createElement(ua,{showPag:!0,minRow:0,row_data:void 0!==this.state.lists?this.state.lists:[],column_data:this.state.columndatas,resizable:!1,exportCSV:!0,csvFile:"ScoreModels",csvData:this.state.lists?this.state.lists:[]})),l.a.createElement(nt.a,{show:this.state.modalBox,onHide:this.handleClose},l.a.createElement(nt.a.Header,{closeButton:!0,show:this.state.modalBox,onHide:this.handleClose},l.a.createElement(nt.a.Title,null,"Add Score Model "),l.a.createElement("br",null)),l.a.createElement(nt.a.Body,null,l.a.createElement("div",{className:"container text-labelblue"},l.a.createElement("div",{className:"d-flex align-items-center justify-content-around"},l.a.createElement("div",{className:"col-5 text-center"},l.a.createElement("span",null,"Score Model Value"),l.a.createElement("font",{className:"text-danger"}," * "),l.a.createElement("input",{type:"text",id:"model_name",value:this.score_model.model_name,onChange:this.handleChangeDataValue,className:"form-control"})),l.a.createElement("div",{className:"col-5 text-center"},l.a.createElement("span",null,"Score Model Code"),l.a.createElement("input",{type:"text",id:"model_code",value:this.score_model.model_code,onChange:this.handleSelfChange,className:"form-control",disabled:!0}))))),l.a.createElement(nt.a.Footer,null,l.a.createElement(lt.a,{variant:"secondary",onClick:this.handleClose},"Close"),l.a.createElement(lt.a,{style:{marginLeft:10},type:"button",variant:"primary",onClick:this.addButtonClick},"Add"))))}}]),t}(ct),tl=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={ScoreFactorsList:null},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){var e=this,t={data_key:"csf_type",country_code:this.country_code};(function(e){return L("/api/admin/master_data/score_factors/list",e)})(this.req(t)).then(function(t){if(t){var a=t.data.map(function(e,t){return l.a.createElement("tr",{key:t},l.a.createElement("td",null," ",e.data_value),l.a.createElement("td",null," ",null==e.parent_data_code?"No Parent":Ze(e.parent_data_code)))});e.setState({ScoreFactorsList:a}),Ut()("#table").dataTable({bAutoWidth:!0})}})}},{key:"render",value:function(){return l.a.createElement("div",{className:"container table-responsive"},l.a.createElement("br",null),l.a.createElement("div",{className:"row"},l.a.createElement("h5",null,l.a.createElement("b",null,"Score Factors"))),l.a.createElement("table",{id:"table",className:"table"},l.a.createElement("thead",{className:"text-info"},l.a.createElement("tr",null,l.a.createElement("th",null,"Score Factor Type"),l.a.createElement("th",null,"Score Factor Group"))),l.a.createElement("tbody",null,this.state.ScoreFactorsList)))}}]),t}(ct),al=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={weightageList:[],cs_weightages:null,lists:[]},a.handleCustWeightage=function(e){var t=e.target.id,n=e.target.value;if(console.log(t,n,"check the percent calculations"),!(Number(e.target.value)>100)){var l=a.total_new,r=a.total_repeat,s=!1;a.cs_weightages.map(function(e,c){return t==e.csf_type+"_new"?(l-=Number(e.new_cust_weightage),void((l+=Number(n))<=100&&Number(n)>=0?(e.new_cust_weightage=n,a.new_save_style=100==l?"enable_div":"disable_div"):s=!0)):t==e.csf_type+"_repeat"?(r-=Number(e.repeat_cust_weightage),void((r+=Number(n))<=100&&Number(n)>=0?(e.repeat_cust_weightage=n,a.repeat_save_style=100==r?"enable_div":"disable_div"):s=!0)):void 0}),s||(a.handleSelfChange(e),a.renderWeightageList())}},a.handleBackButton=function(e){a.setState({toPrev:!0})},a.renderWeightageList=function(){if(null!=a.cs_weightages){a.total_new=0,a.total_repeat=0,a.cs_weightages.map(function(e,t){a.total_new+=Number(e.new_cust_weightage),a.total_repeat+=Number(e.repeat_cust_weightage)});Object.keys(a.cs_weightages).length;var e=a.columndatas();a.setState({weightageList:e})}},a.editWeightage=function(e){var t=e.target.id+"_style";e.target.id;"disable_div"==a[t]?(a[t]="enable_div",t.includes("new")?(a.repeat_cust_disable=!0,a.new_cust_disable=!1):t.includes("repeat")&&(a.new_cust_disable=!0,a.repeat_cust_disable=!1)):a[t]="disable_div",a.renderWeightageList()},a.handleSaveClick=function(e){a.csw_comp.score_model=a.score_model;var t=a.csw_comp;kn(a.req({cs_weightages:t})).then(function(e){e&&(a.new_save_style="disable_div",a.repeat_save_style="disable_div",a.renderWeightageList(),"success"==e.status&&(alert("Weightage updated successfully"),window.location.reload()))})},a.addBtnClick=function(e){var t={cs_model_code:a.score_model,country_code:a.country_code};xn(a.req(t)).then(function(e){e&&"success"==e.status&&a.getSelectOptionsFromResult(e.data,"cs_factors",["id","name"])}),a.setState({modalBox:!0})},a.handleAddFactor=function(e){var t={country_code:a.country_code,cs_model_code:a.score_model,csf_type:a.state.csf_type,new_cust_weightage:0,repeat_cust_weightage:0};Sn(a.req({cs_model_weightage:t})).then(function(e){e&&(alert(e.message),window.location.reload())})},a.handleClose=function(e){a.setState({modalBox:!1})},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){var e=this;this.new_cust_disable=!1,this.repeat_cust_disable=!1,this.new_cust_style="disable_div",this.repeat_cust_style="disable_div",this.new_save_style="disable_div",this.repeat_save_style="disable_div",this.csw_comp={},this.total_new=0,this.total_repeat=0,this.score_model=this.props.match.params.score_model,this.model_name=this.props.match.params.score_model_name;var t={cs_model_code:this.score_model,country_code:this.country_code};(function(e){return L("/api/admin/score_model/weightages",e)})(this.req(t)).then(function(t){if(t){e.cs_weightages=t.data,e.setState(function(e){return e.lists=t.data});e.renderWeightageList()}})}},{key:"columndatas",value:function(){var e=this,t=Object.keys(this.cs_weightages).length,a=1;return[{Header:"SI No.",id:"row",Cell:function(e){return l.a.createElement("div",{className:"text-center"},e.index+1)},Footer:l.a.createElement("div",{className:"text-center"},l.a.createElement("b",null))},{Header:"Factor",id:"csf_type",accessor:function(e){return Ze(e.csf_type)},Footer:l.a.createElement("div",{className:"text-center"},l.a.createElement("b",null,"Total"))},{Header:function(){return l.a.createElement("div",{className:"text-center"},"Weightage for New Cust",b("score","weightage_edit")&&l.a.createElement("div",{className:"d-flex justify-content-around align-items-center",style:{marginTop:10}},l.a.createElement("input",{type:"button",id:"new_cust",value:"Edit",onClick:e.editWeightage,className:"btn btn-success"}),l.a.createElement("input",{type:"button",value:"Save",onClick:e.handleSaveClick,className:"btn btn-success ".concat(e.new_save_style)})))},id:"sample_1",accessor:function(t){return l.a.createElement("div",{className:"d-flex justify-content-around align-items-center"},l.a.createElement("div",{className:"col-6"},l.a.createElement("input",{id:"".concat(t.csf_type,"_new"),type:"text",value:t.new_cust_weightage,tabIndex:a++,onChange:e.handleCustWeightage,className:"form-control weightage_style ".concat(e.new_cust_style),disabled:e.new_cust_disable})),l.a.createElement("div",{className:"col-5"},"%"))},Footer:l.a.createElement("div",{className:"text-center"},l.a.createElement("b",null,this.total_new," %"))},{Header:function(){return l.a.createElement("div",{className:"text-center"},"Weightage for Repeat Cust",b("score","weightage_edit")&&l.a.createElement("div",{className:"d-flex justify-content-around align-items-center",style:{marginTop:10}},l.a.createElement("input",{type:"button",id:"repeat_cust",value:"Edit",onClick:e.editWeightage,className:"btn btn-success"}),l.a.createElement("input",{type:"button",value:"Save",onClick:e.handleSaveClick,className:"btn btn-success ".concat(e.repeat_save_style)})))},id:"sample_2",accessor:function(a){return l.a.createElement("div",{className:"d-flex justify-content-around align-items-center"},l.a.createElement("div",{className:"col-6"},l.a.createElement("input",{id:"".concat(a.csf_type,"_repeat"),type:"text",value:a.repeat_cust_weightage,tabIndex:t++,onChange:e.handleCustWeightage,className:"form-control weightage_style ".concat(e.repeat_cust_style),disabled:e.repeat_cust_disable})),l.a.createElement("div",{className:"col-5"},"%"))},Footer:l.a.createElement("div",{className:"text-center"},l.a.createElement("b",null,this.total_repeat," %"))}]}},{key:"render",value:function(){return!0===this.state.toPrev?l.a.createElement(Y.a,{to:"/score_models"}):l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"container containerTopmargin max-width no-padding"},l.a.createElement("div",{className:"d-flex justify-content-between align-items-center"},l.a.createElement("h4",{className:"no-margin personalDetailstextval preHeaderpad headerTitle"},"CS Weightage"),b("score","weightage_create")&&l.a.createElement("div",null,l.a.createElement("input",{type:"button",value:"Add New Factor",onClick:this.addBtnClick,className:"btn btn-primary"}))),l.a.createElement("div",{className:"d-flex justify-content-between align-items-center"},l.a.createElement("h4",{className:"no-margin headerTitle"},"Score Model: ",l.a.createElement("b",null,Ze(this.model_name)))),l.a.createElement("div",{className:"csWeightagetab"},l.a.createElement(ua,{showPag:!1,minRow:0,row_data:void 0!==this.state.lists?this.state.lists:[],column_data:this.state.weightageList,resizable:!1,sortable:!1,exportCSV:!0,csvFile:"CS Weightage",csvData:this.state.lists?this.state.lists:[]})),l.a.createElement("div",{className:"row no-margin"},l.a.createElement("input",{type:"button",value:"Back",onClick:this.handleBackButton,className:"btn btn-primary"}))),l.a.createElement("div",null,l.a.createElement(nt.a,{show:this.state.modalBox,onHide:this.handleClose,style:{width:"-700px"}},l.a.createElement(nt.a.Header,{closeButton:!0,show:this.state.modalBox,onHide:this.handleClose},l.a.createElement(nt.a.Title,null,l.a.createElement("h3",null,"Add New Factor"))),l.a.createElement(nt.a.Body,null,l.a.createElement("div",{className:"container"},l.a.createElement("div",{className:"d-flex justify-content-around align-items-baseline"},l.a.createElement("div",null,l.a.createElement("label",{className:"no-margin"},"Factor"),l.a.createElement("select",{id:"csf_type",onChange:this.handleSelfChangeState,className:"form-control"},this.state.cs_factors_dd))),l.a.createElement("br",null))),l.a.createElement(nt.a.Footer,null,l.a.createElement(lt.a,{variant:"primary",onClick:this.handleAddFactor},"Add"),l.a.createElement(lt.a,{style:{marginLeft:10},variant:"secondary",onClick:this.handleClose},"Close")))))}}]),t}(ct),nl=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={score_result_div:[]},a.renderScoreResult=function(){var e=Object.keys(a.score_results),t=e.length,n=e.map(function(e,n){return l.a.createElement("tr",{key:n},l.a.createElement("td",{className:"width-30"},l.a.createElement("b",null,Ze(a.score_results[e].code))),l.a.createElement("td",null),l.a.createElement("td",{className:"width-15"},l.a.createElement("input",{id:"score_from_".concat(e),type:"text",readOnly:!0,value:1==e?"0":a.score_results[e].score_from,className:"form-control width-50"})),l.a.createElement("td",{className:"width-15"},"To"),l.a.createElement("td",{className:"width-15"}," ",l.a.createElement("input",{id:"score_to_".concat(e),type:"text",value:e==t?"1000":a.score_results[e].score_to,onChange:a.handleScoreChange,readOnly:e==t,className:"form-control width-50"})),l.a.createElement("td",{className:"width-25"},"Points"))});a.setState({score_result_div:n})},a.handleScoreChange=function(e){var t=e.target.id,n=e.target.value,l=t.split("_"),r=l[l.length-1],s="score_from_"+r;if(s=document.getElementById(s).value,a.score_results[r].score_to=n,a.renderScoreResult(),Number(n)<=Number(s))a.valid=!1;else{a.valid=!0;var c=++r,o="score_from_"+c;document.getElementById(o).value=++n,a.score_results[c].score_from=n,a.handleSelfChange(e),a.renderScoreResult()}},a.handleSaveClick=function(e){var t=Object.keys(a.result_config).length,n=Object.keys(a.score_results).length;if(0==a.valid||"create"==a.mode&&t!=n-1||"edit"==a.mode&&0==t)alert("Please enter valid score range");else{var l={country_code:a.country_code,csf_model:a.score_model,score_result_codes:a.score_results,score_details:a.result_config};Cn(a.req({cs_result:l})).then(function(e){e&&"success"==e.status&&(alert("CS Result configured successfully"),window.location.reload())})}},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){var e=this;this.valid=!1,this.result_config={},this.score_results={},this.score_model=this.props.match.params.score_model;var t={csf_model:this.score_model,country_code:this.country_code};(function(e){return L("/api/admin/score_model/cs_result_config/list",e)})(this.req(t)).then(function(t){t&&"success"==t.status&&(t.data.cs_result_config_details.length>0?(t.data.cs_result_config_details.map(function(t,a){var n=a+1;e.score_results[n]={},e.score_results[n].code=t.score_result_code,e.score_results[n].score_from=t.score_from,e.score_results[n].score_to=t.score_to,e.result_config["score_from_"+n]=t.score_from,e.result_config["score_to_"+n]=t.score_to}),e.mode="edit"):(e.score_results={1:{code:"ineligible"},2:{code:"requires_flow_rm_approval"},3:{code:"eligible"}},e.mode="create"),e.renderScoreResult())})}},{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"border_style text-labelblue container containerTopmargin max-width",style:{padding:15}},l.a.createElement("div",null,l.a.createElement("h3",{className:"headerTitle"},"Score Result Config")),l.a.createElement("div",null,l.a.createElement("div",{className:"table-responsive"},l.a.createElement("table",{className:"table"},l.a.createElement("thead",{className:"text-info"},l.a.createElement("tr",null,l.a.createElement("th",null,l.a.createElement("h5",{className:"headerTitle no-margin"},"Result")),l.a.createElement("th",null),l.a.createElement("th",null,l.a.createElement("h5",{className:"headerTitle no-margin"},"Score From")),l.a.createElement("th",null),l.a.createElement("th",null,l.a.createElement("h5",{className:"headerTitle no-margin"},"Score To")),l.a.createElement("th",null))),l.a.createElement("tbody",null,this.state.score_result_div)))),b("score","result_config_create_edit")&&l.a.createElement("div",{className:"text-right"},l.a.createElement("input",{type:"button",value:"Save",onClick:this.handleSaveClick,className:"btn btn-success"}))))}}]),t}(ct),ll=function(e){return L("/api/admin/report/growth_chart",e)},rl=function(e){return L("/api/admin/report",e)},sl=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={section_rows_arr:null,headers:null},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"format_kpi_metric",value:function(e){var t,a=null;return e&&("%"==e.kpi_unit?a=Number(e.kpi_value).toFixed(2)+" %":"days"==e.kpi_unit?a=Number(e.kpi_value).toFixed(1)+" days":""==e.kpi_unit?a=Number(e.kpi_value).toFixed(0):["core_tot_disbursed_fa_a22","cumm_core_tot_disbursed_fa_a22"].includes(e.kpi_metric)?(t=e.kpi_value,a=(Math.abs(Number(t))>=1e9?(Math.abs(Number(t))/1e9).toFixed(3)+"B":Math.abs(Number(t))>=1e6?(Math.abs(Number(t))/1e6).toFixed(3)+"M":Math.abs(Number(t)))+" "+e.kpi_unit):a=Ne(Math.round(e.kpi_value),e.kpi_unit)),a}},{key:"metric_in_usd",value:function(e){if(e)return["%","days","","Custs","FAs"].includes(e.kpi_unit)?"":Ne(Math.round(e.usd),"USD")}},{key:"get_headers",value:function(e){var t=e.map(function(e){return l.a.createElement(l.a.Fragment,null,l.a.createElement("th",null,e.title),l.a.createElement("th",null,"USD Equivalent"))});return t.unshift(l.a.createElement("th",null,"Metric")),t.unshift(l.a.createElement("th",null,"No")),t}},{key:"get_section_rows",value:function(e,t){var a=this,n=e.items.map(function(e,n){var r="";return e.startsWith("cumm_")?(r=e.replace("cumm_",""),r=Ze(r)+" (Cummulative)"):r=Ze(e),e.startsWith("core_")&&(r=l.a.createElement("b",null,r)),l.a.createElement("tr",{key:n},l.a.createElement("td",{className:"report_left"},a.index++),l.a.createElement("td",{className:"report_left"},r),a.get_section_columns(e,t))});return n.unshift(l.a.createElement("tr",null,l.a.createElement("td",{className:"report_title"}),l.a.createElement("td",{colSpan:"1",className:"report_title"},e.title),this.get_section_columns(null,t))),n}},{key:"get_section_columns",value:function(e,t){var a=this;return t.map(function(t){return e?l.a.createElement(l.a.Fragment,null,l.a.createElement("td",null,je(a.format_kpi_metric(t[e]))),l.a.createElement("td",{style:{color:"#FA4616"}},je(a.metric_in_usd(t[e])))):l.a.createElement(l.a.Fragment,null,l.a.createElement("td",null),l.a.createElement("td",null))})}},{key:"componentWillMount",value:function(){var e,t=this,a=this.country_code,n=this.acc_prvdr_code;(e=this.req({current:"true",country_code:a,acc_prvdr_code:n,type:this.props.type}),L("/api/admin/report/flow_kpi_report",e)).then(function(e){if(console.log(e),e)if("success"===e.status){t.index=1;var a=e.data.reports,n=t.get_headers(a),l=e.data.all_sections.map(function(e){return t.get_section_rows(e,a)});t.report_date="",t.currency=e.data.currency_code,t.forex=e.data.forex,t.setState({headers:n,section_rows_arr:l}),Ut()("#kpi_table").removeAttr("width").dataTable({searching:!1,paging:!1,info:!0,dom:"Bfrtip",buttons:[{title:"",extend:"print",customize:function(e){console.log(window),Ut()(e.document.body).prepend('<img src="'+window.location.origin+'/logo_blue.png" alt = "FLOW" style="float:left;"/>')}},{extend:"csv"}],order:[]})}else alert(e.message+"\n"+JSON.stringify(e.data))})}},{key:"render",value:function(){return l.a.createElement("div",{className:"container"},l.a.createElement("br",null),l.a.createElement("h5",null,"Flow KPI Report"),l.a.createElement("h4",null,"Forex : 1 USD = ",this.forex+" "+this.currency," "),l.a.createElement("br",null),l.a.createElement("div",{id:"kpi_datatable"},l.a.createElement("table",{id:"kpi_table",className:"display strip row-border order-column report"},l.a.createElement("thead",null,l.a.createElement("tr",null,this.state.headers)),l.a.createElement("tbody",null,this.state.section_rows_arr))))}}]),t}(st),cl=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={comp_name:"date_range"},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;return l.a.createElement("div",{className:"row date-range"},l.a.createElement("div",{className:"col-md-4"},l.a.createElement("span",null,"Start Date"),l.a.createElement(Ft.a,{closeOnSelect:!0,onChange:function(t){e.handleDateChange("start_date",t)},dateFormat:"DD MMM YYYY",timeFormat:!1,required:"required"})),l.a.createElement("div",{className:"col-md-4"},l.a.createElement("span",null,"End Date"),l.a.createElement(Ft.a,{closeOnSelect:!0,onChange:function(t){e.handleDateChange("end_date",t)},dateFormat:"DD MMM YYYY",timeFormat:!1,required:"required"})),l.a.createElement("div",{className:"col-md-2",style:{display:"flex",alignItems:"center"}},l.a.createElement("input",{type:"button",className:"btn btn-primary",disabled:this.props.disable_btn,onClick:this.props.onSubmitClick,value:"Submit"})))}}]),t}(ct),ol=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={rows:null,headers:null,date_range:{},account:null,tableExists:!1},a.handleSubmit=function(e){a.state.tableExists&&Ut()("#kpi_table").DataTable().destroy(),a.get_report()},a.handleAccPrvdrCode=function(e){a.setState({acc_prvdr_code:e.target.value}),"false"==a.props.with_date_range&&a.get_report()},a.loadAccounts=function(e){""==e.target.value&&a.setState({account:null}),""!=e.target.value&&a.setState({account:e.target.value})},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"get_header",value:function(e){var t=e.map(function(e){return l.a.createElement("th",null,e)});return t.unshift(l.a.createElement("th",null,"No")),t}},{key:"format_metric",value:function(e,t){if("%"==t)e=Number(e).toFixed(2)+" %";else if("days"==t)e=Number(e).toFixed(0)+" days";else{if("UGX"==t||"RWF"==t||"USD"==t)return Ne(Math.round(e),t);"status"==t?e=Ze(e):"date"==t?e=ge(e):Array.isArray(e)&&(e=e.map(function(e){return l.a.createElement(l.a.Fragment,null,l.a.createElement("span",{style:{color:"white"}},e),l.a.createElement("br",null))}))}return e}},{key:"get_rows",value:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return e.map(function(e,n){var r=e.map(function(e,n){return l.a.createElement("td",null,t.format_metric(e,a[n]))});return l.a.createElement("tr",{key:n},l.a.createElement("td",null,n+1),r)})}},{key:"componentWillMount",value:function(){var e=this;if(null!=g("acc_prvdr_code"))if("false"==this.props.with_date_range)this.get_report();else{var t=this.props.report_type.replace(/_/g," ");this.setState({title:t})}this.setOptionsListToStateFromAppApi("common","list",Object(Z.a)({},this.def_req,{status:"enabled",biz_account:!0}),["acc_prvdr_code","name"],"acc_prvdrs");var a=g("acc_prvdr_code"),n={lender_code:"UFLW",country_code:this.country_code,to_recon:!0,network_prvdr_code:a};null!=a&&sa(this.req({account:n},!0)).then(function(t){t&&("success"===t.status?""!=t.data&&e.getSelectOptionsFromResult(t.data,"lender_accounts",["id","name"]):alert(t.message+"\n"+JSON.stringify(t.data)))})}},{key:"get_report",value:function(){var e,t=this,a=this.props.report_type,n=this.country_code,l=this.state.date_range,r=this.state.acc_prvdr_code,s=this.state.account;(e=this.req({report_type:a,country_code:n,date_range:l,acc_prvdr_code:r,account_id:s},!0),L("/api/admin/report",e)).then(function(e){if(t.resp(e),e)if("success"===e.status){var a=e.data.records,n=e.data.units,l=t.get_header(e.data.header),r=t.get_rows(a,n),s=e.data.page_length;t.setState({headers:l,rows:r,title:e.data.title}),Ut()("#kpi_table").removeAttr("width").dataTable({retrieve:!0,searching:!0,paging:!0,info:!1,pageLength:s,dom:"Bfrtip",buttons:[{title:"",extend:"print",customize:function(e){Ut()(e.document.body).prepend('<img src="'+window.location.origin+'/logo_blue.png" alt = "FLOW" style="float:left;"/>')}},{extend:"csv"}],order:[]}),t.setState({tableExists:!0})}else alert(e.message+"\n"+JSON.stringify(e.data))})}},{key:"render",value:function(){var e=this;return l.a.createElement("div",{className:"container date-range containerTopmargin max-width no-padding"},l.a.createElement("h5",{className:"no-margin headerTitle headerPadvert text-capitalize"},this.state.title),l.a.createElement("div",{className:"row"},!this.admin_roles.includes(g("role_codes"))&&l.a.createElement("div",{className:"col-md-2"},l.a.createElement("span",null,"Account Provider"),l.a.createElement("font",{className:"text-danger"},"   *  "),l.a.createElement("select",{id:"acc_prvdr_code",value:this.state.acc_prvdr_code,onChange:function(t){e.handleAccPrvdrCode(t)},className:"form-control",type:"text",required:"required"},this.state.acc_prvdrs_dd)),"true"==this.props.with_date_range&&l.a.createElement("div",{className:"col-md-10"},l.a.createElement(cl,{className:"mb-4",id:"date_range",data:this.state.date_range,onSubmitClick:this.handleSubmit,onComponentChange:this.handleComponentChange,disable_btn:this.state.calling_api})),"daily_activity"==this.props.report_type&&l.a.createElement("div",{className:"col-md-3 mt-5"},l.a.createElement("span",null,"Accounts"),l.a.createElement("select",{id:"account",className:"form-control mt-2",onChange:function(t){e.loadAccounts(t)},onComponentChange:this.handleComponentChange},this.state.lender_accounts_dd))),l.a.createElement("br",null),l.a.createElement("div",{id:"kpi_datatable",className:"table-responsive"},l.a.createElement("table",{id:"kpi_table",className:"table list no-footer"},l.a.createElement("thead",{className:"text-info"},l.a.createElement("tr",null,this.state.headers)),l.a.createElement("tbody",null,this.state.rows))))}}]),t}(st),il=a(104),dl=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={cust_perform_search:"hide_div"},a.handleCustIDChange=function(e){a.cust_id=e.target.value},a.handleEnter=function(e){13===e.keyCode&&a.handleSearchClick()},a.split_data_to_arr=function(e){var t=[],a=[],n=[];return Object.keys(e).map(function(l){t.push(l),a.push(e[l].loan_principal),n.push(e[l].loan_doc_id)}),{dates:t,amounts:a,loan_doc_ids:n}},a.handleSearchClick=function(e){if(null!=a.cust_id){var t=a.cust_id,n=a.acc_prvdr_code;ll(a.req({cust_id:t,acc_prvdr_code:n})).then(function(e){if(e)if("success"===e.status){var t=a.split_data_to_arr(e.data.chart_data);console.log(e.data.cust_data);var n=e.data.cust_data;a.dates=t.dates,a.amounts=t.amounts,a.loan_doc_ids=t.loan_doc_ids,a.setState({cust_data:n,cust_perform_search:"show_div",searchResult:!0})}else alert(e.message+"\n"+JSON.stringify(e.data))})}},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){this.cust_id=this.props.match.params.cust_id,""!=this.cust_id&&this.handleSearchClick()}},{key:"render",value:function(){if(!0===this.state.searchResult&&""==this.props.match.params.cust_id)return l.a.createElement(Y.a,{to:"/report/growth_chart_for/".concat(this.cust_id)});var e={labels:this.dates,datasets:[{label:"Float Amount "+this.currency_code,backgroundColor:"#42A5F5",data:this.amounts,loan_doc_ids:this.loan_doc_ids}]},t={tooltips:{callbacks:{afterBody:function(e,t){return"FA ID : "+t.datasets[0].loan_doc_ids[e[0].index]}}},scales:{yAxes:[{type:"linear",display:!0,position:"left",id:"y-axis-1",ticks:{min:0,callback:function(e,t,a){return Ne(e,"UGX")}},scaleLabel:{display:!0,labelString:"Float Amount"}}],xAxes:[{scaleLabel:{display:!0,labelString:"Disbursal Date (showing upto last 100 FAs)"}}]}};return l.a.createElement("div",{id:""},l.a.createElement("div",{className:"container"},l.a.createElement("div",{className:"row top"},l.a.createElement("div",{className:"col-md-2"},l.a.createElement("span",null,l.a.createElement("h3",null,"Flow Customer ID : "))),l.a.createElement("div",{className:"col-md-4 mt-3"},l.a.createElement("input",{id:"customer_id",onChange:this.handleCustIDChange,onKeyUp:this.handleEnter,placeholder:"Enter...",className:"form-control",required:!0})),l.a.createElement("div",{className:"col-md-4 mt-3"},l.a.createElement("input",{type:"button",value:"Search",onClick:this.handleSearchClick})))),this.state.searchResult&&l.a.createElement("div",{className:this.state.cust_perform_search},l.a.createElement("div",{className:"container"},l.a.createElement("h4",{className:"chart"},"Growth Chart"),l.a.createElement("div",{className:"row chart"},l.a.createElement("label",null,l.a.createElement("b",null,"First Advance Date : ")),"\xa0\xa0\xa0",l.a.createElement("label",null,ge(this.state.cust_data.first_loan_date)," (",this.state.cust_data.days," days ago) "),"\xa0\xa0\xa0",l.a.createElement("label",null,l.a.createElement("b",null," | Total no of Advances : ")),"\xa0\xa0\xa0",l.a.createElement("label",null,this.state.cust_data.tot_loans," "),"\xa0\xa0\xa0",l.a.createElement("label",null,l.a.createElement("b",null,"| Total value of Advances : ")),"\xa0\xa0\xa0",l.a.createElement("label",null,Ne(this.state.cust_data.tot_loan_amt,this.currency_code)),"\xa0\xa0\xa0"),l.a.createElement("div",{className:"content-section implementation"},l.a.createElement(il.Chart,{type:"bar",data:e,options:t,style:{width:"900px",marginLeft:"100px"}})))))}}]),t}(ct),ml=function(e){return L(M+"/loan_appl/products",e)},ul=function(e){return L(M+"/loan/approval",e)},_l=function(e){return L(M+"/loan_appl/apply",e)},pl=function(e){return L(M+"/loan_appl/applications",e)},hl=function(e){return L(M+"/loan_appl/validate",e)};a(13).dataTable=a(45);var vl=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={productList:null,list:!1,upload:!1,create:!1,toUpload:!1,create_agreement:{aggr_doc_id:{}},prompt_inactivate:"hide_div",rowdatas:[],columndatas:[],copy:[]},a.handleProductCheckbox=function(e){if(e.target.checked){var t=a.product_ids.slice();t.push(e.target.id),a.product_ids=t}else a.product_ids=a.product_ids.filter(function(t){return t!=e.target.id})},a.inactivateAggr=function(e){var t=e.target.id,n=a.req({aggr_id:t,cust_id:a.cust_id});Gn(n).then(function(e){e&&("success"===e.status?(alert(e.message),a.setState({agreement_tr:null,agreements:null,prompt_inactivate:!1}),a.onLoad()):alert(e.message+"\n"+JSON.stringify(e.data)))})},a.handleGenerateAggr=function(e){var t,n=new Date;if(n.setDate(n.getDate()+180),t=n.toISOString().substr(0,10),0!=window.confirm("Are you sure to generate a new agreement?"))if(console.log("agreement"),console.log(a.create_agreement.valid_upto),console.log(t),a.create_agreement.valid_upto>t)alert("Agreement validity cannot be more than 180 days");else{var l={product_ids:a.product_ids,cust_id:a.cust_id,valid_from:a.create_agreement.valid_from,valid_upto:a.create_agreement.valid_upto,country_code:a.country_code};Kn(a.req({cust_agreement:l},!0)).then(function(e){a.resp(e),e&&("success"===e.status?(a.aggr_doc_id=e.data.aggr_doc_id,a.setState({toUpload:!0,btn_style:""})):alert(e.message+"\n"+JSON.stringify(e.data)))})}},a.handleUploadSignedAgr=function(e){a.setState({file_upload:!0})},a.listAgreements=function(){return l.a.createElement("div",null,(null!=a.state.agreement_tr||"list"==a.props.mode)&&l.a.createElement("div",null,l.a.createElement("div",{className:"d-flex justify-content-between align-items-center",style:{padding:5}},l.a.createElement("p",{className:"no-margin text-white"},l.a.createElement("b",null,"Total Entries : ",a.state.copy.length)),l.a.createElement("div",{style:{position:"relative"}},l.a.createElement("i",{class:"fa-solid fa-magnifying-glass search_pos"}),l.a.createElement("input",{placeholder:"Search here",className:"search_posInput",onChange:function(e){return a.changeHandler(e.target.value)}}))),l.a.createElement(ua,{showPag:!0,minRow:0,row_data:void 0!==a.state.copy?a.state.copy:[],column_data:a.state.columndatas,resizable:!1,defaultSorted:[{id:"aggr_doc_id",desc:!1}],exportCSV:!0,csvFile:"Agreements",csvData:a.state.copy})))},a.changeHandler=function(e){var t=e,n=a.state.rowdatas.filter(function(e){return"list"===a.props.mode?null!==e.aggr_doc_id&&e.aggr_doc_id.toLowerCase().includes(t.toLowerCase())||null!==e.aggr_type&&e.aggr_type.toLowerCase().includes(t.toLowerCase())||null!==e.status&&e.status.toLowerCase().includes(t.toLowerCase()):null!==e.product_name&&e.product_name.toLowerCase().includes(t.toLowerCase())||null!==e.product_type&&e.product_type.toLowerCase().includes(t.toLowerCase())});a.setState(function(e){return e.copy=n})},a.createAgreement=function(){return l.a.createElement("div",null,l.a.createElement("div",{className:"row no-margin"},l.a.createElement("div",{className:"col-md-5 no-padding"},l.a.createElement("h3",{className:"headerTitle headerPadvert no-margin"},"Customer: ",a.cust_id))),l.a.createElement("div",{className:"row no-margin"},l.a.createElement("div",{className:"col-md-2"}),l.a.createElement("div",{className:"col-md-4"},l.a.createElement("label",{className:"no-margin"},"Valid From"),l.a.createElement("font",{className:"text-danger"},"   *  "),l.a.createElement(Ft.a,{closeOnSelect:!0,onChange:function(e){a.handleSelfDateChange("valid_from",e)},dateFormat:"DD MMM YYYY",timeFormat:!1,required:"required"})),l.a.createElement("div",{className:"col-md-4"},l.a.createElement("label",{className:"no-margin"},"Valid Upto"),l.a.createElement(Ft.a,{closeOnSelect:!0,onChange:function(e){a.handleSelfDateChange("valid_upto",e)},dateFormat:"DD MMM YYYY",timeFormat:!1,required:"required"})),l.a.createElement("div",{className:"col-md-2"})),l.a.createElement("br",null),null!=a.state.rowdatas&&l.a.createElement("div",null,l.a.createElement("div",{className:"d-flex justify-content-between align-items-center",style:{padding:5}},l.a.createElement("p",{className:"no-margin text-white"},l.a.createElement("b",null,"Total Entries : ",a.state.copy.length)),l.a.createElement("div",{style:{position:"relative"}},l.a.createElement("i",{class:"fa-solid fa-magnifying-glass search_pos"}),l.a.createElement("input",{placeholder:"Search here",className:"search_posInput",onChange:function(e){return a.changeHandler(e.target.value)}}))),l.a.createElement(ua,{showPag:!0,minRow:0,row_data:void 0!==a.state.copy?a.state.copy:[],column_data:a.state.columndatas,resizable:!1,defaultSorted:[{id:"product_name",desc:!1}],exportCSV:!0,csvFile:"Product List",csvData:a.state.copy})))},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"onLoad",value:function(){var e=this,t=!1,a={cust_id:this.cust_id};(function(e){return L("/api/admin/agreement/aggrs",e)})(this.req(a)).then(function(a){if(a)if("success"===a.status)if(a.data.prompt_inactivate||"list"==e.props.mode){t=a.data.prompt_inactivate;e.setState(function(t){return t.columndatas=e.agreementcolumndatas()}),e.setState({agreement_tr:null,agreements:a.data.agreements,rowdatas:a.data.agreements,copy:a.data.agreements,list:!0,create:!1,prompt_inactivate:t})}else e.setState({list:!1,create:!0}),e.create_agreement={},e.get_product_list();else alert(a.message+"\n"+JSON.stringify(a.data))})}},{key:"agreementcolumndatas",value:function(){var e=this;return[{Header:"Agreement Doc ID",id:"aggr_doc_id",accessor:function(e){return e.aggr_doc_id}},{Header:"Agreement Type",id:"aggr_type",accessor:function(e){return pe(e.aggr_type)}},{Header:"Valid From",id:"valid_from",accessor:function(e){return ge(e.valid_from)}},{Header:"Valid Upto",id:"valid_upto",accessor:function(e){return ge(e.valid_upto)}},{Header:"Status",id:"status",accessor:function(e){return Ze(e.status)}},{Header:"Action",id:"id",accessor:function(t){return"inactive"!=t.status?l.a.createElement("input",{type:"button",id:t.id,value:"Inactivate",onClick:e.inactivateAggr,className:"btn btn-primary"}):l.a.createElement("label",null,"NA")}},{Header:"View",id:"aggr_file_rel_path",accessor:function(e){return e.aggr_file_rel_path?l.a.createElement($.a,{to:e.aggr_file_rel_path,target:"_blank"},"View PDF"):l.a.createElement("label",null,"NA")}}]}},{key:"get_product_list",value:function(){var e=this,t=this.cust_id;ml(this.req({req_parameter:t},!0)).then(function(t){if(e.resp(t),t){var a=t.data;a.hasOwnProperty("borrower")?e.productList(a):a.hasOwnProperty("borrowers")}})}},{key:"componentWillMount",value:function(){void 0===Object({NODE_ENV:"production",PUBLIC_URL:"",REACT_APP_ADMIN_API_ROOT:"/api/admin",REACT_APP_APP_API_ROOT:"/api/app",REACT_APP_CORE_API_ROOT:"/api/core",REACT_APP_URL:"http://app.flowglobal.net"}).REACT_APP_USE_ROOT_ONLY_DEV?this.root="":this.root="http://localhost:8000",this.cust_id=this.props.match.params.cust_id,this.product_ids=[],this[this.props.id]={},this.onLoad()}},{key:"productcolumndatas",value:function(){var e=this;return[{Header:"Select",id:"id",accessor:function(t){return l.a.createElement("input",{id:t.id,type:"checkbox",onChange:e.handleProductCheckbox,defaultChecked:!0})}},{Header:"Product Name",id:"product_name",accessor:function(e){return e.product_name}},{Header:"Product Type",id:"product_type",accessor:function(e){return pe(e.product_type)}},{Header:function(){return l.a.createElement("div",{className:"text-center"},"FA Amount")},id:"max_loan_amount",accessor:function(t){return je(mt(t.max_loan_amount,e.currency_code))}},{Header:"Duration",id:"duration",accessor:function(e){return e.duration+"days"}},{Header:"Flow Fee",id:"ids",accessor:function(t){return je(_t(t,e.currency_code))}},{Header:"Repayment",id:"rep_amt",accessor:function(t){return je(ht(t,e.currency_code))}}]}},{key:"productList",value:function(e){var t=this;this.setState(function(t){return t.copy=e.loan_products}),this.setState(function(t){return t.rowdatas=e.loan_products}),this.setState(function(e){return e.columndatas=t.productcolumndatas()}),e.loan_products.map(function(e,a){return t.product_ids.push(e.id)}),this.setState({list:!1,create:!0,upload:!1})}},{key:"render",value:function(){return!0===this.state.toUpload?l.a.createElement(Y.a,{to:"/agreement/upload/".concat(this.cust_id,"/").concat(this.aggr_doc_id)}):l.a.createElement("div",{className:"container max-width containerTopmargin no-padding"},l.a.createElement("div",{className:"row no-margin"},l.a.createElement("h3",{className:"no-margin headerTitle headerPadvert"},this.state.create&&"Select Products to create new Agreement"),l.a.createElement("h3",{className:"no-margin headerTitle headerPadvert"},this.state.list&&"Existing Agreements : "+this.cust_id)),this.state.prompt_inactivate&&"list"!=this.props.mode&&!this.state.create&&l.a.createElement("div",{className:"row"},l.a.createElement("b",null,"Below Agreements already attached to the Customer. You have to inactivate if they are no longer valid, to create new Agreement.")),this.state.create&&this.createAgreement(),this.state.list&&this.listAgreements(),l.a.createElement("div",{className:"row no-margin"},l.a.createElement("div",{className:"col-md-12 no-padding"},this.state.create&&l.a.createElement(lt.a,{disabled:this.state.calling_api,variant:"primary",onClick:this.handleGenerateAggr},"Generate Agreement"))))}}]),t}(ct),gl=a(61),fl=a.n(gl),El=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={viewPdf:!1,sign_checked:!1,upload_checked:!1,sign_data:"",toapplyFA:!1,new_agree_signin:!1,witness:{}},a.handleClose=function(e){a.setState({modalBox:!1,witness:{}})},a.handleSignAgreement=function(e){a.setState({modalBox:!0})},a.handleOnChange=function(e){var t=a.state.witness;t[e.target.id]=e.target.value,a.setState({witness:t})},a.handleClearSignature=function(e){"cust_sign"==e.target.id&&a.signature_cust.clear(),"rm_sign"==e.target.id&&a.signature_rm.clear(),"witness_sign"==e.target.id&&(a.signature_witness.clear(),a.refs.witness_name.value="")},a.handleCaptureSignature=function(e){var t=a.signature_cust.getTrimmedCanvas().toDataURL(a.file_format),n=a.signature_rm.getTrimmedCanvas().toDataURL(a.file_format),l=a.signature_witness.getTrimmedCanvas().toDataURL(a.file_format);if(console.log(a.state.witness.witness_name),a.handleSelfChangeState(e),null!=a.state.witness.witness_name){if(a.signature_cust.isEmpty())alert("Please capture customer's signature digitally to submit.");else if(a.signature_rm.isEmpty())alert("Please capture RM's signature digitally to submit.");else if(a.signature_witness.isEmpty())alert("Please capture witness' signature digitally to submit.");else if(a.setState({modalBox:!1}),1==window.confirm("Are you sure to sign and submit the agreement.")){var r={cust_id:a.cust_id,aggr_type:a.state.aggr_type,aggr_doc_id:a.state.master_agreement.aggr_doc_id},s={country_code:a.country_code,file_of:"agreement_signature",file_name:a.state.master_agreement.aggr_doc_id,file_type:a.file_format,file_data_type:"data-url"},c=Object(Z.a)({},s,{file_data:n,sign_of:"rm"}),o=Object(Z.a)({},s,{file_data:t,sign_of:"cust"}),i=Object(Z.a)({},s,{file_data:l,sign_of:"witness"});r.witness_name=a.state.witness.witness_name,Qn(a.req(Object(Z.a)({},r,{rm_sign_req:c,cust_sign_req:o,witness_sign_req:i}),!0)).then(function(e){a.resp(e),e&&("success"===e.status?(alert("Signed Agreement saved successfully"),a.setState({new_agree_signin:!0})):alert(e.message+"\n"+JSON.stringify(e.data)))})}}else alert("Please enter witness name.")},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){var e=this;this.root="";this.file_format="image/png",this.cust_id=this.props.match.params.cust_id,Zn(this.req({cust_id:this.cust_id})).then(function(t){if(e.resp(t),t)if("success"===t.status){var a=t.data.master_aggr_folder_rel_path,n=t.data.master_agreement.aggr_doc_id,l=t.data.master_agreement.aggr_type,r=t.data.master_agreement.aggr_duration,s=t.data.master_agreement.duration_type,c=a+"/"+n+".pdf",o=t.data.cust_name,i=t.data.rm_name;e.setState({master_agreement:t.data.master_agreement,aggr_type:l,aggr_duration:r,aggr_file_rel_path:c,cust_name:o,rm_name:i,duration_type:s})}else alert(t.message+"\n"+JSON.stringify(t.data))})}},{key:"render",value:function(){var e=this;if(this.state.viewSignedAggr)return l.a.createElement(l.a.Fragment,null,"To View Signed Agreeemnt here");if(this.state.new_agree_signin)return l.a.createElement(Y.a,{to:"/agreement/list/".concat(this.cust_id)});var t="onboarded"==this.state.aggr_type?"days":"FAs";return l.a.createElement("div",{className:"container"},l.a.createElement("div",{className:"row"},l.a.createElement("h3",null,this.cust_id," - Sign Agreement")),l.a.createElement("br",null),this.state.loading&&l.a.createElement("span",null,"Please wait while Agreement PDF is loaded."),l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row",id:"float_style"},l.a.createElement("input",{type:"button",disabled:this.state.calling_api,value:"Sign Agreement",onClick:this.handleSignAgreement,className:"btn btn-primary"})),l.a.createElement("div",{className:"row"},l.a.createElement("h4",null,"Master Agreement Document ( Agreement Type : ",pe(this.state.aggr_type)," | Duration : ",this.state.aggr_duration," ",t," )"),"\xa0\xa0\xa0",this.note&&l.a.createElement("span",{className:"cust_details"},"Note : Customer details will be automatically filled once document is digitally signed "),l.a.createElement("iframe",{className:"aggr_style",src:this.root+this.state.aggr_file_rel_path})),l.a.createElement("br",null),l.a.createElement("div",{className:"row",id:"float_style"},l.a.createElement("input",{type:"button",disabled:this.state.calling_api,value:"Sign Agreement",onClick:this.handleSignAgreement,className:"btn btn-primary"}))),l.a.createElement("br",null),l.a.createElement(nt.a,{show:this.state.modalBox,onHide:this.handleClose,dialogClassName:"modal-dialog-sign"},l.a.createElement(nt.a.Header,{closeButton:!0,show:this.state.modalBox,onHide:this.handleClose},l.a.createElement(nt.a.Title,null,"Sign here")),l.a.createElement(nt.a.Body,null,l.a.createElement("div",{className:"d-flex justify-content-around"},l.a.createElement("div",null,l.a.createElement(fl.a,{penColor:"blue",canvasProps:{width:250,height:120,className:"signature_style"},ref:function(t){e.signature_cust=t}}),l.a.createElement("div",{className:"text-center"},l.a.createElement("b",null,this.state.cust_name),l.a.createElement("h5",null,l.a.createElement("b",null,"(Customer)")))),l.a.createElement("div",null,l.a.createElement(fl.a,{penColor:"blue",canvasProps:{width:250,height:120,className:"signature_style"},ref:function(t){e.signature_rm=t}}),l.a.createElement("div",{className:"text-center"},l.a.createElement("h5",null,l.a.createElement("b",null,this.state.rm_name)),l.a.createElement("h5",null,l.a.createElement("b",null,"(Flow RM)")))),l.a.createElement("div",null,l.a.createElement(fl.a,{penColor:"blue",canvasProps:{width:250,height:120,className:"signature_style"},ref:function(t){e.signature_witness=t}}),l.a.createElement("div",{className:"text-center"},l.a.createElement("input",{type:"text",id:"witness_name",placeholder:"Witness Name",onChange:function(t){e.handleOnChange(t)},ref:"witness_name"})))),l.a.createElement("div",{className:"d-flex justify-content-around"},l.a.createElement("div",null,l.a.createElement(lt.a,{variant:"secondary",id:"cust_sign",onClick:function(t){e.handleClearSignature(t)}},"Clear")),l.a.createElement("div",null,l.a.createElement(lt.a,{variant:"secondary",id:"rm_sign",onClick:function(t){e.handleClearSignature(t)}},"Clear")),l.a.createElement("div",null,l.a.createElement(lt.a,{variant:"secondary",id:"witness_sign",onClick:function(t){e.handleClearSignature(t)}},"Clear")))),l.a.createElement(nt.a.Footer,null,l.a.createElement("div",{className:"center"},l.a.createElement(lt.a,{variant:"primary",id:"sign_data",onClick:this.handleCaptureSignature},"Capture Signature")),l.a.createElement(lt.a,{style:{float:"right"},variant:"secondary",onClick:this.handleClose},"Close"))))}}]),t}(ct),bl=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={viewPdf:!1,sign_checked:!1,upload_checked:!1,sign_data:"",toapplyFA:!1,new_agree_signin:!1},a.handleReset=function(){"Master"===a.aggr_type&&(a.aggr_doc_id=null),a.setState({aggr_file_rel_path:null,upload_checked:!1,sign_checked:!1,viewPdf:!1,file_upload:!1,sign_data:null,agreement:null})},a.handleAggrTypeClick=function(e){if(e.target.checked){var t=e.target.value;"Draft"===t&&(a.note=!1,a.aggr_doc_id=a.state.draft_aggr_doc_id,e.target.id="aggr_doc_id",e.target.value=a.state.draft_aggr_doc_id,a.handleSelfChangeState(e)),"no_draft"===t&&(t=null),a.setState({aggr_type:t})}"Master"===t&&(a.note=!0),a.aggr_type=t,a.handleReset()},a.handleMasterAggrChange=function(e){a.handleReset();var t=e.target.value,n=JSON.parse(t);a.handleSelfChangeState(e,n.aggr_doc_id),a.aggr_doc_id=n.aggr_doc_id},a.handleUploadSignedAgr=function(e){a.submit_btn=!0,a.aggr_doc_id?a.setState({file_upload:!0,viewPdf:!1,upload_checked:!0,sign_checked:!1}):alert("Please select an agreement")},a.handleDigitalSignature=function(e){if(a.aggr_doc_id){var t=null;a.setState({aggr_file_rel_path:t,file_upload:!1,viewPdf:!1,sign_checked:!0,upload_checked:!1,loading:!0}),"Master"===a.state.aggr_type?t=a.state.master_aggr_folder_rel_path:"Draft"==a.state.aggr_type&&(t=a.state.draft_aggr_folder_rel_path),t+="/"+a.aggr_doc_id+".pdf",a.setState({aggr_file_rel_path:t,viewPdf:!0,loading:!1})}else alert("Please select an agreement")},a.handleSubmitAggr=function(e){var t={country_code:a.country_code,file_of:"agreement",cust_id:a.cust_id,aggr_doc_id:a.aggr_doc_id,aggr_type:a.state.aggr_type,sign_type:"digital"};if(a.state.file_upload){if(null==a.state.agreement)return void alert("Please upload the file to submit.");var n=a.state.agreement.split("|");t.sign_type="upload",t.file_name=n[1],t.file_type=n[0],a.setState({file_name:t.file_name})}Qn(a.req(t,!0)).then(function(e){if(a.resp(e),e)if("success"===e.status){var t=a.cust_id.split("-");"Master"==a.state.aggr_type?alert("Signed Agreement saved successfully -"+a.aggr_doc_id+"-"+t[1]):alert("Signed Agreement saved successfully -"+a.aggr_doc_id),a.setState({toapplyFA:!0})}else alert(e.message+"\n"+JSON.stringify(e.data))})},a.handleClose=function(e){a.setState({modalBox:!1})},a.handleSignAgreement=function(e){a.setState({modalBox:!0})},a.handleCaptureSignature=function(e){if(e.target.value=a.signature.getTrimmedCanvas().toDataURL(a.file_format),a.handleSelfChangeState(e),a.setState({modalBox:!1}),1==window.confirm("Are you sure to sign and submit Agreement.")){var t={country_code:a.country_code,file_of:"agreement",file_name:a.aggr_doc_id,cust_id:a.cust_id,aggr_doc_id:a.aggr_doc_id,aggr_type:a.state.aggr_type,sign_type:"digital"};null!=e.target.value?(t.file_type=a.file_format,t.file_data_type="data-url",t.file_data=e.target.value,Qn(a.req(t,!0)).then(function(e){if(a.resp(e),e)if("success"===e.status){var t=a.cust_id.split("-");"Master"==a.state.aggr_type?(a.setState({new_agree_signin:!0}),alert("Signed Agreement saved successfully -"+a.aggr_doc_id+"-"+t[1])):alert("Signed Agreement saved successfully -"+a.aggr_doc_id),a.setState({toapplyFA:!0})}else alert(e.message+"\n"+JSON.stringify(e.data))})):alert("Please capture your signature digitally to submit.")}},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){var e=this;this.root="";var t=null;this.file_format="image/png",this.cust_id=this.props.match.params.cust_id,this.props.mode;var a={cust_id:this.cust_id,country_code:this.country_code};Zn(this.req(a)).then(function(a){if(e.resp(a),a)if("success"===a.status){e.getSelectOptionsFromResult(a.data.master_agreements,"agreement",["obj","name"]),null==t&&null!=a.data.draft_agreement&&(t=a.data.draft_agreement.aggr_doc_id);var n=a.data.draft_aggr_folder_rel_path,l=a.data.master_aggr_folder_rel_path;e.setState({draft_aggr_doc_id:t,draft_aggr_folder_rel_path:n,master_aggr_folder_rel_path:l})}else alert(a.message+"\n"+JSON.stringify(a.data))})}},{key:"render",value:function(){var e=this;return this.state.toapplyFA?l.a.createElement(Y.a,{to:"/fa_appl_for/".concat(this.cust_id)}):this.state.new_agree_signin?l.a.createElement(Y.a,{to:"/agreement/list/".concat(this.cust_id)}):l.a.createElement("div",{className:"container"},l.a.createElement("div",{className:"row"},l.a.createElement("h3",null,this.cust_id," - Sign / Upload Agreement")),l.a.createElement("br",null),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-4"},this.state.draft_aggr_doc_id&&l.a.createElement("label",null,l.a.createElement("input",{value:"Draft",onClick:this.handleAggrTypeClick,type:"radio",name:"aggr"}),"\xa0\xa0",this.state.draft_aggr_doc_id," (Customer Draft Agreement)"),!this.state.draft_aggr_doc_id&&l.a.createElement("label",null,l.a.createElement("input",{name:"aggr",value:"no_draft",onClick:this.handleAggrTypeClick,type:"radio"}),"\xa0\xa0No Draft")),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("label",null,l.a.createElement("input",{value:"Master",onClick:this.handleAggrTypeClick,type:"radio",name:"aggr"}),"\xa0\xa0Select from Master Agreements"))),l.a.createElement("br",null),this.state.aggr_type&&l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-4"},l.a.createElement("label",null,this.state.aggr_type," Agreement Doc ID")),l.a.createElement("div",{className:"col-md-3"},"Draft"===this.state.aggr_type&&null!=this.state.aggr_doc_id&&l.a.createElement("input",{type:"text",id:"aggr_doc_id",onChange:this.handleSelfChangeState,value:this.state.draft_aggr_doc_id,className:"form-control",disabled:!0}),"Master"===this.state.aggr_type&&l.a.createElement("select",{id:"aggr_doc_id",onChange:this.handleMasterAggrChange,className:"form-control"},this.state.agreement_dd))),l.a.createElement("br",null),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-4"},l.a.createElement("label",null,l.a.createElement("input",{type:"radio",name:"agreement",value:"upload",onClick:this.handleUploadSignedAgr,defaultChecked:this.state.upload_checked}),"\xa0\xa0Upload Signed Copy of ",this.state.aggr_type," Agreement")),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("label",null,l.a.createElement("input",{type:"radio",name:"agreement",value:"sign",onClick:this.handleDigitalSignature,defaultChecked:this.state.sign_checked}),"\xa0\xa0Digitally Sign ",this.state.aggr_type," Agreement"))),l.a.createElement("br",null)),this.state.file_upload&&l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-6"},l.a.createElement(Tt,{id:"agreement",aggr_doc_id:this.aggr_doc_id,cust_id:this.cust_id,label:"Agreement",type:"image",mode:"create",onCreateUpload:this.handleSelfChangeState}))),this.state.loading&&l.a.createElement("span",null,"Please wait while Agreement PDF is loaded."),this.state.viewPdf&&l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row",id:"float_style"},l.a.createElement("input",{type:"button",disabled:this.state.calling_api,value:"Sign Agreement",onClick:this.handleSignAgreement,className:"btn btn-primary"})),l.a.createElement("div",{className:"row"},l.a.createElement("h4",null,"Master Agreement Document"),"\xa0\xa0\xa0",this.note&&l.a.createElement("span",{className:"cust_details"},"Note : Customer details will be automatically filled once document is digitally signed "),l.a.createElement("iframe",{className:"aggr_style",src:this.root+this.state.aggr_file_rel_path})),l.a.createElement("br",null),l.a.createElement("div",{className:"row",id:"float_style"},l.a.createElement("input",{type:"button",disabled:this.state.calling_api,value:"Sign Agreement",onClick:this.handleSignAgreement,className:"btn btn-info"}))),l.a.createElement("br",null),this.submit_btn&&l.a.createElement("div",{className:"row"},l.a.createElement("input",{type:"button",disabled:this.state.calling_api,onClick:this.handleSubmitAggr,value:"Submit",className:"btn btn-info"})),l.a.createElement(nt.a,{show:this.state.modalBox,onHide:this.handleClose,dialogClassName:"modal-dialog-sign"},l.a.createElement(nt.a.Header,{closeButton:!0,show:this.state.modalBox,onHide:this.handleClose},l.a.createElement(nt.a.Title,null,"Sign here")),l.a.createElement(nt.a.Body,null,l.a.createElement(fl.a,{penColor:"blue",canvasProps:{width:250,height:120,className:"signature_style"},ref:function(t){e.signature=t}})),l.a.createElement(nt.a.Footer,null,l.a.createElement("div",{className:"center"},l.a.createElement(lt.a,{variant:"primary",id:"sign_data",onClick:this.handleCaptureSignature},"Capture Signature")),l.a.createElement("div",{className:"center_btn"},l.a.createElement(lt.a,{variant:"secondary",onClick:function(t){e.signature.clear()}},"Clear")),l.a.createElement(lt.a,{variant:"secondary",onClick:this.handleClose},"Close"))))}}]),t}(ct),yl=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={comp_name:"transaction"},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){var e=this,t={master_data:{status:"enabled",data_key:"account_transaction_type"}};Je(this.req(t)).then(function(t){t&&("success"===t.status?e.getSelectOptionsFromResult(t.data,"account_txn_type",["data_code","data_value"]):alert(t.message+"\n"+JSON.stringify(t.data)))})}},{key:"render",value:function(){var e=this;return l.a.createElement("div",{className:"row no-margin account_left date-range"},l.a.createElement("div",{className:"col-md-4"},l.a.createElement("span",null,"Start Date"),l.a.createElement(Ft.a,{closeOnSelect:!0,onChange:function(t){e.handleDateChange("start_date",t)},dateFormat:"DD MMM YYYY",timeFormat:!1,required:"required"})),l.a.createElement("div",{className:"col-md-4"},l.a.createElement("span",null,"End Date"),l.a.createElement(Ft.a,{closeOnSelect:!0,onChange:function(t){e.handleDateChange("end_date",t)},dateFormat:"DD MMM YYYY",timeFormat:!1,required:"required"})),l.a.createElement("div",{className:"col-md-4"},l.a.createElement("span",null,"Transaction Type"),l.a.createElement("select",{id:"acc_txn_type",onChange:this.handleChange,className:"form-control"},this.state.account_txn_type_dd)))}}]),t}(ct),Nl=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={accountTxnList:null,transaction:{},account_result:"hide_div",columns:[],row_data:[]},a.handleTransactionSearch=function(e){Ut()("#transaction").DataTable().destroy();var t=a.state.transaction;t.country_code=a.country_code,t.acc_id=a.acc_id,ca(a.req({account_txn:t})).then(function(e){e&&("success"===e.status?(a.setState(function(e){return e.columns=a.columnData()}),a.setState(function(t){return t.row_data=e.data}),a.setState({account_result:"show_div"})):alert(e.message+"\n"+JSON.stringify(e.data)))})},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){this.acc_id=this.props.match.params.acc_id}},{key:"columnData",value:function(){var e=this;return[{Header:"SI No.",id:"row",Cell:function(e){return l.a.createElement("div",null,e.index+1)}},{Header:"Transaction Type",id:"acc_txn_type",accessor:function(e){return Ze(e.acc_txn_type)}},{Header:"Transaction Mode",id:"txn_mode",accessor:function(e){return Ze(e.txn_mode)}},{Header:"Ref Account ID",id:"loan_doc_id",accessor:function(e){return e.ref_acc_txt}},{Header:"Credit",id:"credit",accessor:function(t){return je(Ne(t.credit,e.currency_code))}},{Header:"Debit",id:"debit",accessor:function(t){return je(Ne(t.debit,e.currency_code))}},{Header:"Balance",id:"balance",accessor:function(t){return je(Ne(t.balance,e.currency_code))}},{Header:"Transaction ID",id:"txn_id",accessor:function(e){return e.txn_id}},{Header:"Txn Executed By",id:"txn_exec_by",accessor:function(e){return e.txn_exec_by}},{Header:"Transaction Date",id:"txn_date",accessor:function(e){return ve(e.txn_date)}},{Header:"Remarks",id:"remarks",accessor:function(e){return e.remarks}}]}},{key:"render",value:function(){return l.a.createElement("div",{id:"",className:"container containerTopmargin max-width no-padding"},l.a.createElement("div",{className:""},l.a.createElement("div",{className:"row align-items-center"},l.a.createElement("div",{className:"col-md-10 no-padding"},l.a.createElement(yl,{id:"transaction",onComponentChange:this.handleComponentChange})),l.a.createElement("div",{className:"col-md-2 no-padding"},l.a.createElement(lt.a,{className:"btn btn-primary no-margin",onClick:this.handleTransactionSearch},"Search")))),l.a.createElement("div",null,l.a.createElement("br",null),l.a.createElement("div",{className:"row",id:"float_style"}),l.a.createElement("div",{className:this.state.account_result},l.a.createElement("div",{id:"datatable account_txn"},l.a.createElement("h4",null,"Account Transactions"),l.a.createElement(ua,{showPag:!0,minRow:0,row_data:void 0!==this.state.row_data?this.state.row_data:[],column_data:this.state.columns,resizable:!1,defaultSorted:[{id:"acc_txn_type",desc:!0}],defaultPageSize:10,sortable:!0,exportCSV:!0,csvFile:"Account TXN Lists",csvData:void 0!==this.state.row_data?this.state.row_data:[]})))))}}]),t}(st),wl=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(i.a)(this,Object(d.a)(t).call(this))).state={last_updated:null,updated_since:0,timer:0,buttonName:"Pause Refresh",btn_variant:"danger",timerID:"",modalBox:!0,modal:null,end_time:""},e.handleClose=function(t){e.setState({modalBox:!1,selected_payment:null})},e.handleSubmit=function(t){if(0!=window.confirm("Are you sure capture the payment?")){var a={loan_doc_id:e.state.selected_payment.loan_doc_id,acc_stmt_txn_id:e.state.selected_payment.acc_stmt_txn_id,amount:e.state.selected_payment.amount};Ha(e.req(a)).then(function(t){if(!t)return null;"success"===t.status?(alert("Payment captured successfully"),e.handleClose()):alert(t.message)})}},e.capture_repayment=function(t,a){var n={acc_stmt_txn_id:t.target.id,loan_doc_id:a};Ra(e.req(n)).then(function(t){if(!t)return null;"success"===t.status?e.setState({modalBox:!0,selected_payment:t.data}):alert(t.message)})},e.pauseRefresh=function(){e.timerID?(clearInterval(e.timerID),e.timerID=null,e.setState({buttonName:"Start Refresh",btn_variant:"success"})):(e.timerID=setInterval(function(){return e.tick()},1e3),e.setState({buttonName:"Pause Refresh",btn_variant:"danger"}))},e.refreshPaymentsList=function(){clearInterval(e.timerID);var t={today:!0};t.account_id=e.props.match.params.acc_id,Gt(e.req({statement_search:t})).then(function(t){if(Ut()("#statement_search").DataTable().destroy(),!t)return null;if("success"===t.status){var a=t.data.acc_txt;e.setState({end_time:t.data.float_acc_stmt_end_time});var n=t.data.account_txns.map(function(t,a){return l.a.createElement("tr",{key:a},l.a.createElement("td",null,++a),l.a.createElement("td",null,e.chk_acc_type(t.cr_amt,t.dr_amt)),l.a.createElement("td",null," ",Ze(t.stmt_txn_type)),l.a.createElement("td",null," ",je(Ne(t.cr_amt,e.currency_code))),l.a.createElement("td",null," ",je(Ne(t.dr_amt,e.currency_code))),l.a.createElement("td",null," ",je(Ne(t.balance,e.currency_code))),l.a.createElement("td",null," ",t.stmt_txn_id),l.a.createElement("td",null," ",t.descr),l.a.createElement("td",null," ",ve(t.stmt_txn_date,!0)),l.a.createElement("td",null,e.chk_fa_id(t)),l.a.createElement(rn,{data:t,onSync:e.refreshPaymentsList}))});e.timerID=setInterval(function(){return e.tick()},1e3);var r=new Date;r.setMinutes(r.getMinutes()-2),e.setState({last_updated:r.toLocaleTimeString("en-US",{hour:"numeric",minute:"numeric",second:"numeric",hour24:!0}).toString(),timer:e.REFRESH_IN,lenderTxnStmts:n,account_result:"show_div",account_num:a}),Ut()("#statement_search").removeAttr("width").dataTable({pageLength:20,order:[],columns:[{width:"10%"},{width:"10%"},{width:"10%"},{width:"10%"},{width:"15%"},{width:"15%"},{width:"20%"},{width:"20%"},{width:"20%"},{width:"20%"},{width:"20%"}],dom:"Bfrtip",buttons:["csv","excel","print"]})}else alert(t.message+"\n"+JSON.stringify(t.data))})},e.REFRESH_IN=120,e}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentWillUnmount",value:function(){clearInterval(this.timerID)}},{key:"tick",value:function(){0!=this.state.timer?this.setState({timer:this.state.timer-1,updated_since:this.REFRESH_IN-this.state.timer}):this.refreshPaymentsList()}},{key:"loan_doc_id",value:function(e){var t=this,a=e.loan_doc_id,n=e.id,r=e.stmt_txn_type;if(a&&"credit"==r)return l.a.createElement(lt.a,{variant:"danger",id:n,onClick:function(e){return t.capture_repayment(e,a)}},"Capture Payment")}},{key:"componentWillMount",value:function(){this.refreshPaymentsList()}},{key:"chk_acc_type",value:function(e,t){return 0===e&&0===t?null:0===e?l.a.createElement(on.b,{color:"red"}):0===t?l.a.createElement(on.a,{color:"green"}):null}},{key:"chk_fa_id",value:function(e){var t=e.loan_doc_id,a=e.recon_status;return t?"10_capture_payment_pending"==a?l.a.createElement("span",null,l.a.createElement($.a,{style:{color:"grey"},to:"/fa/view/"+t,target:"_blank"},t)):"80_recon_done"==a?l.a.createElement("span",null,l.a.createElement($.a,{to:"/fa/view/"+t,style:{color:"#007bff"},target:"_blank"},t)):l.a.createElement($.a,{to:"/fa/view/"+t,style:{color:"grey"},target:"_blank"},t):"NA"}},{key:"render",value:function(){return l.a.createElement("div",{id:""},l.a.createElement("br",null),l.a.createElement("div",{className:"container"},l.a.createElement("div",{className:"form-row"},l.a.createElement("div",{className:"col-md-6"},l.a.createElement("h3",{className:"lender_accounts"},"Recent Txns of ",this.state.account_num)),l.a.createElement("div",{className:"col-md-3"}),l.a.createElement("div",{className:"col-md-3"})),l.a.createElement("div",{className:"form-row mt-3"},this.state.end_time?l.a.createElement("h5",null,"Last updated : ",this.state.end_time," "):l.a.createElement("h5",null,"Last updated :  ")),l.a.createElement("br",null)),l.a.createElement("div",{className:this.state.account_result},l.a.createElement("div",{id:"datatable",className:"table-responsive"},l.a.createElement("table",{id:"statement_search",className:"acc-stmt-table list"},l.a.createElement("thead",{className:"text-info"},l.a.createElement("tr",null,l.a.createElement("th",null,"S.No"),l.a.createElement("th",null),l.a.createElement("th",null,"Transaction Type"),l.a.createElement("th",null,"Credit"),l.a.createElement("th",null,"Debit"),l.a.createElement("th",null,"Balance"),l.a.createElement("th",null,"Transaction ID"),l.a.createElement("th",null,"Description"),l.a.createElement("th",null,"Transaction Date"),l.a.createElement("th",null,"Matching FA ID"),l.a.createElement("th",null,"Action"))),l.a.createElement("tbody",null,this.state.lenderTxnStmts)))))}}]),t}(st),Cl=a(43),kl=function(e){return L("/api/admin/borrower",e)},Sl=function(e){return L("/api/admin/borrower/view",e)},xl=function(e){return L("/api/admin/borrower/search",e)},Al=function(e){return L("/api/admin/borrower/bring_to_probation",e)},Ol=function(e){return L("/api/admin/borrower/update_status",e)},jl=function(e){return L("/api/admin/borrower/validate",e)},Dl=function(e){return L("/api/admin/borrower/profile",e)},Fl=function(e){return L("/api/admin/borrower/close",e)},Ml=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={server_time:{},checkout_req:{},toSuccess:null,timer_sec:0,timer:"",timer_min:0,min_diff:0,sec_diff:0,select_value:[],checkin_path:"",alert_msg:!1,modal2_show:!1},a.refresh_timer=function(){setInterval(function(){return a.tick()},1e3)},a.handleCheckout=function(e){a.server_time();var t=a.state.checkout_req;t.remarks&&t.visit_purpose?(t.id=a.props.match.params.id,t.cust_id=a.state.cust_id,Sa(a.req({checkout_req:t})).then(function(e){if(a.resp(e),e)if("success"===e.status){var t=e.data,n=a.state.min_diff,l=a.state.sec_diff,r=a.state.modal2_show;if("to_success"==t.action){alert(e.data.message);var s=a.state.checkin_path,c=a.state.toSuccess;if("log_visit"==s)c=!1;else c=!0}"show_error"==t.action&&(n=t.min_diff,l=t.sec_diff,r=!0),a.setState({toSuccess:c,min_diff:n,sec_diff:l,modal2_show:r})}else alert(e.message+"\n"+JSON.stringify(e.data))})):a.setState({modal_show:!0})},a.handleCheckoutChange=function(e){var t=a.state.checkout_req;t[e.target.id]=e.target.value,a.setState({checkout_req:t})},a.handlePurposeChange=function(e){var t=e;if((e=e.map(function(e){return e.value})).includes("overdue_visit")&&1!==a.state.is_og_loan_overdue)alert("Customer do not have an overdue FA");else{var n=a.state.checkout_req;n.visit_purpose=e}a.setState({checkout_req:n,select_value:t})},a.handleWarning=function(){a.setState({modal2_show:!1})},a.checkoutDelayAlert=function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(nt.a,{show:a.state.modal2_show,variant:"danger"},l.a.createElement(nt.a.Header,null,l.a.createElement(nt.a.Title,null,"Warning")),l.a.createElement(nt.a.Body,null,l.a.createElement("h4",null,"Please ensure all the visit activities are performed before you checkout.",l.a.createElement("br",null),"You have checked-in just ",a.state.min_diff," minutes and ",a.state.sec_diff," seconds ago")),l.a.createElement(nt.a.Footer,null,l.a.createElement(lt.a,{onClick:a.handleWarning,variant:"danger"},"Ok"))))},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){var e=this;alert("Keep this browser window open and continue your other visit activites.\nOnce all the activities are completed comeback to this browser window and checkout this visit"),this.server_time(),0==this.state.timer_sec?this.refresh_timer():this.setState({timer_sec:0,timer_min:0});var t=new URLSearchParams(window.location.search).get("type");this.setState({checkin_path:t});var a,n=this.props.match.params.id;this.cust_id=this.props.match.params.cust_id,Dl(this.req({cust_id:this.cust_id,incl_addr:!0},!0)).then(function(t){e.resp(t),t&&("success"===t.status?t.data&&e.setState(Object(Z.a)({},t.data,{cust_id:e.cust_id})):alert(t.message+"\n"+JSON.stringify(t.data)))}),(a=this.req({id:n}),L("/api/admin/field_visits/details",a)).then(function(t){if(t&&"success"===t.status){var a=t.data.visit_start_time,n=t.data.sec_diff,l=t.data.min_diff;e.setState({visit_start_time:a,timer_sec:n,timer_min:l})}})}},{key:"tick",value:function(){0==this.state.timer_sec||0!=this.state.timer_sec?(this.setState({timer_sec:this.state.timer_sec+1}),this.state.timer_sec>=60&&this.setState({timer_min:this.state.timer_min+1,timer_sec:0})):this.refresh_timer()}},{key:"validate_search",value:function(e){return!(!e.remarks||!e.visit_purpose)||(alert("Please enter required fields"),!1)}},{key:"render",value:function(){var e=this;return!0===this.state.toSuccess?l.a.createElement(Y.a,{to:"/borrower/indiv/view/".concat(this.state.cust_id)}):!1===this.state.toSuccess?l.a.createElement(Y.a,{to:"/"}):l.a.createElement("div",{className:"container"},l.a.createElement("br",null),this.checkoutDelayAlert(),this.vaildationAlert(this.state.modal_show),l.a.createElement("h4",null,"Customer Visit for ",l.a.createElement("b",null,this.state.cust_name," | ",this.state.biz_name)," ",l.a.createElement("span",{className:"float-right"},"Timer : ",this.state.timer_min,"m ",this.state.timer_sec,"s ")),l.a.createElement("br",null),l.a.createElement("form",null,l.a.createElement("div",{className:"rule-form-group  form-group row reset-margin"},l.a.createElement("label",{for:"",className:"col-sm-5 mb-3 label__name font-weight-bold reset-padding"},"Flow Cust ID | DP Cust ID"),l.a.createElement("div",{className:"col-sm-6 reset-padding"},l.a.createElement("div",null,l.a.createElement("label",{className:"",id:"cust_id"},this.state.cust_id," | ",this.state.acc_number)),l.a.createElement("div",{className:"control-me"}))),l.a.createElement("div",{className:"rule-form-group  form-group row reset-margin"},l.a.createElement("label",{for:"",className:"col-sm-5 mb-3 label__name font-weight-bold reset-padding"},"Customer Name"),l.a.createElement("div",{className:"col-sm-7 reset-padding"},l.a.createElement("div",null,l.a.createElement("label",{className:"",id:"cust_id"},this.state.cust_name)),l.a.createElement("div",{className:"control-me"}))),l.a.createElement("div",{className:"rule-form-group form-group row reset-margin"},l.a.createElement("label",{for:"",className:"col-sm-5 mb-3 font-weight-bold  label__name reset-padding"},"Address"),l.a.createElement("div",{className:"col-sm-7 reset-padding"},l.a.createElement("div",null,l.a.createElement("label",{className:"",id:"cust_id"},this.state.cust_addr_txt)),l.a.createElement("div",{className:"control-me"}))),l.a.createElement("div",{className:"rule-form-group form-group row reset-margin"},l.a.createElement("label",{for:"",className:"col-sm-5 mb-3 font-weight-bold  label__name reset-padding"},"Location"),l.a.createElement("div",{className:"col-sm-7 reset-padding"},l.a.createElement("div",null,l.a.createElement("label",{className:"",id:"cust_id"},Ze(this.state.location))),l.a.createElement("div",{className:"control-me"}))),l.a.createElement("div",{className:"rule-form-group form-group row reset-margin"},l.a.createElement("label",{for:"",className:"col-sm-5 mb-3 font-weight-bold  label__name reset-padding"},"Check In At"),l.a.createElement("div",{className:"col-sm-7 reset-padding"},l.a.createElement("div",null,l.a.createElement("b",null,l.a.createElement("label",{style:{color:"blue"},className:"",id:"visit_start_time"},this.state.visit_start_time))),l.a.createElement("div",{className:"control-me"}))),l.a.createElement("div",{className:"rule-form-group form-group row mx-0 mb-3  "},l.a.createElement("label",{for:"",className:"col-sm-5 font-weight-bold label__name reset-padding"},"Visit Purpose",l.a.createElement("font",{className:"text-danger"},"   *  ")),l.a.createElement("div",{className:"col-sm-7 reset-padding"},l.a.createElement(Cl.a,{onChange:function(t){e.handlePurposeChange(t)},value:this.state.select_value,options:this.getMultiSelectOptions("visit_purpose"),isMulti:!0}),l.a.createElement("div",{className:"control-me"}))),l.a.createElement("div",{className:"rule-form-group form-group row reset-margin "},l.a.createElement("label",{for:"",className:"col-sm-5 font-weight-bold label__name reset-padding"},"Remarks",l.a.createElement("font",{className:"text-danger"},"   *  ")),l.a.createElement("div",{className:"col-sm-7 reset-padding"},l.a.createElement("div",null,l.a.createElement("textarea",{type:"text",id:"remarks",className:"form-control",onChange:function(t){e.handleCheckoutChange(t)},maxLength:"256"})))),l.a.createElement("br",null),l.a.createElement("button",{type:"button",className:"btn btn-primary float-right mr-1 mb-3",onClick:this.handleCheckout,disabled:this.state.calling_api},"Checkout"),l.a.createElement("br",null),l.a.createElement("br",null)))}}]),t}(ct),Pl=function(e){return L("/api/admin/call_log/start",e)},Bl=function(e){return L("/api/admin/call_log/complete",e)},Ll=function(e){return L("/api/admin/call_log/cancel",e)},Tl=function(e){return L("/api/admin/call_log/search",e)},Rl=a(90),Hl=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={server_time:{},timer_sec:0,timer:"",timer_min:0,loan_data:{},cust_data:{},loan_type:"",call_log:{},call_type:"",call_start_time:null,toSuccess:!1,modal_show:!1},a.refresh_timer=function(){setInterval(function(){return a.tick()},1e3)},a.handlePurposeChange=function(e){var t=a.state.call_log;Array.isArray(e)?t.call_purpose=e.map(function(e){return e.value}):t.call_purpose=[e.value],a.setState({call_log:t})},a.handleRemarks=function(e){var t=a.state.call_log;t[e.target.id]=e.target.value,a.setState({call_log:t})},a.handleCancelCall=function(e){if(0!=window.confirm("Are you sure to Cancel the call?")){var t=a.props.match.params.id;Ll(a.req({log_id:t})).then(function(e){e&&(a.resp(e),"success"===e.status?(alert(e.message),a.setState({toSuccess:!0}),a.props.hasOwnProperty("onCancel")&&a.props.onCancel()):alert(e.message+"\n"+JSON.stringify(e.data)))})}},a.handleCallComplete=function(e){var t=a.state.call_log;if(t.call_purpose&&t.remarks){if(0==window.confirm("Are you sure to complete the call?"))return;if(t.call_purpose.includes("cust_sms_not_rcvd")&&t.call_purpose.includes("cust_sms_not_sent"))return void alert("You can only select one Customer Confirmation purpose");"current_loan"===a.state.loan_type&&(t.loan_doc_id=a.state.loan_data.loan_doc_id),t.id=a.props.match.params.id,t.mob_num=a.state.cust_data.cust_mobile_num;var n=a.state.toSuccess,l=a.state.modal_show;Bl(a.req({call_log:t})).then(function(e){a.resp(e),e&&("success"===e.status?(alert(e.message),n=!0,a.props.hasOwnProperty("onComplete")&&a.props.onComplete()):alert(e.message+"\n"+JSON.stringify(e.data)),a.setState({toSuccess:n}))})}else l=!0;a.setState({modal_show:l})},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){var e=this;this.server_time(),0==this.state.timer_sec?this.refresh_timer():this.setState({timer_sec:0,timer_min:0});var t=new URLSearchParams(window.location.search).get("type");this.setState({call_type:t}),this.cust_id=this.props.match.params.cust_id;var a,n=this.props.match.params.id;Dl(this.req({cust_id:this.cust_id,incl_addr:!0,incl_fa:!0},!0)).then(function(t){if(e.resp(t),t)if("success"===t.status){if(t.data){var a=e.state.cust_data,n=e.state.loan_data,l=e.state.loan_type;t.data.current_loan?(n=t.data.current_loan,a=t.data,l="current_loan"):(a=t.data,l="no_loan"),e.setState({cust_data:a,loan_data:n,loan_type:l,cust_id:e.cust_id})}}else alert(t.message+"\n"+JSON.stringify(t.data))}),(a=this.req({id:n}),L("/api/admin/call_log/details",a)).then(function(t){if(t&&"success"===t.status){var a=t.data.call_start_time,n=t.data.sec_diff,l=t.data.min_diff;e.setState({call_start_time:a,timer_sec:n,timer_min:l})}})}},{key:"tick",value:function(){0==this.state.timer_sec||0!=this.state.timer_sec?(this.setState({timer_sec:this.state.timer_sec+1}),this.state.timer_sec>=60&&this.setState({timer_min:this.state.timer_min+1,timer_sec:0})):this.refresh_timer()}},{key:"render",value:function(){var e=this;if(!0===this.state.toSuccess)return l.a.createElement(Y.a,{to:"/"});var t=this.props.hasOwnProperty("is_conf")?"col-md-12":"col-md-8";return l.a.createElement("div",{className:"container ",style:{maxWidth:"1500px"}},this.vaildationAlert(this.state.modal_show),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("form",null,l.a.createElement(an.a,null,l.a.createElement(an.a.Header,{style:{backgroundColor:"#01062c",color:"white"}},l.a.createElement("h4",null,pe(this.state.call_type)," Call Log",l.a.createElement("span",{className:"float-right"},"Timer : ",this.state.timer_min,"m ",this.state.timer_sec,"s "))),l.a.createElement(an.a.Body,null,l.a.createElement("div",{className:"row justify-content-center"},l.a.createElement("div",{className:"".concat(t)},l.a.createElement("fieldset",{className:"border border-dark p-2"},l.a.createElement("legend",{className:"w-auto",style:{fontSize:"15px"}},this.state.cust_data.cust_name),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-6"},l.a.createElement("div",{className:"form-group row reset-margin justify-content-center"},l.a.createElement("label",{className:"col-md-5"},l.a.createElement("b",null,"Bussiness Name")),l.a.createElement("label",{className:"col-md-5 text-right"},this.state.cust_data.biz_name)),l.a.createElement("div",{className:"form-group row reset-margin justify-content-center py-2 "},l.a.createElement("label",{className:"col-md-5"},l.a.createElement("b",null,"Mobile Number")),l.a.createElement("label",{className:"col-md-5 text-right"},this.state.cust_data.cust_mobile_num," ")),l.a.createElement("div",{className:"form-group row reset-margin justify-content-center"},l.a.createElement("label",{className:"col-md-5"},l.a.createElement("b",null,"DOB")),l.a.createElement("label",{className:"col-md-5 text-right"},ge(this.state.cust_data.cust_dob)," "))),l.a.createElement("div",{className:"col-md-6"},l.a.createElement("div",{className:"form-group row reset-margin justify-content-center "},l.a.createElement("label",{className:"col-md-5"},l.a.createElement("b",null,"Location")),l.a.createElement("label",{className:"col-md-5 text-right"},Ze(this.state.cust_data.location)," ")),l.a.createElement("div",{className:"form-group row reset-margin justify-content-center py-2 "},l.a.createElement("label",{className:"col-md-5"},l.a.createElement("b",null,"Flow Cust ID")),l.a.createElement("label",{className:"col-md-5 text-right"},l.a.createElement($.a,{to:"/borrower/indiv/view/"+this.state.cust_data.cust_id,target:"_blank"},this.state.cust_data.cust_id," "))),l.a.createElement("div",{className:"form-group row reset-margin justify-content-center "},l.a.createElement("label",{className:"col-md-5"},l.a.createElement("b",null,"Data Prvdr Cust ID")),l.a.createElement("label",{className:"col-md-5 text-right"},this.state.cust_data.acc_number," "))))))),"current_loan"==this.state.loan_type&&l.a.createElement("div",{className:"row justify-content-center pt-4"},l.a.createElement("div",{className:"".concat(t)},l.a.createElement("fieldset",{className:"border border-dark p-2"},l.a.createElement("legend",{className:"w-auto"},l.a.createElement($.a,{style:{fontSize:"15px"},to:"/fa/view/"+this.state.loan_data.loan_doc_id,target:"_blank"},this.state.loan_data.loan_doc_id)),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-6"},l.a.createElement("div",{className:"form-group row reset-margin justify-content-center"},l.a.createElement("label",{className:"col-md-5"},l.a.createElement("b",null,"Status")),l.a.createElement("label",{className:"col-md-5 text-right "},Ze(this.state.loan_data.status))),l.a.createElement("div",{className:"form-group row reset-margin justify-content-center py-2"},l.a.createElement("label",{className:"col-md-5"},l.a.createElement("b",null,"Due Date")),l.a.createElement("label",{className:"col-md-5 text-right "},ge(this.state.loan_data.due_date)," ")),l.a.createElement("div",{className:"form-group row reset-margin justify-content-center "},l.a.createElement("label",{className:"col-md-5 "},l.a.createElement("b",null,"Due Amount")),l.a.createElement("label",{className:"col-md-5 text-right"},Ne(this.state.loan_data.due_amount,this.currency_code)," "))),l.a.createElement("div",{className:"col-md-6"},l.a.createElement("div",{className:"form-group row reset-margin justify-content-center"},l.a.createElement("label",{className:"col-md-5"},l.a.createElement("b",null,"Paid Amount")),l.a.createElement("label",{className:"col-md-5 text-right"},Ne(this.state.loan_data.paid_amount,this.currency_code))),l.a.createElement("div",{className:"form-group row reset-margin justify-content-center py-2"},l.a.createElement("label",{className:"col-md-5",style:{color:"green"}},l.a.createElement("b",null,"Current OS Amount")),l.a.createElement("label",{className:"col-md-5 text-right",style:{color:"green"}},Ne(this.state.loan_data.current_os_amount,this.currency_code),l.a.createElement("br",null),l.a.createElement("small",null,"(Penalty not included)")," "))))))),l.a.createElement("div",{className:"row justify-content-center pt-4"},l.a.createElement("div",{className:"".concat(t)},l.a.createElement("fieldset",{className:"border border-dark p-2"},l.a.createElement("legend",{className:"w-auto"}),l.a.createElement("div",{className:"form-group row reset-margin justify-content-center "},l.a.createElement("label",{className:"col-md-3"},l.a.createElement("b",null,"Call Start Time")),l.a.createElement("label",{className:"col-md-5 "},ge(this.state.call_start_time,!0)," ")),l.a.createElement("div",{className:"form-group row reset-margin justify-content-center py-3"},l.a.createElement("div",{className:"col-md-3 mt-2"},l.a.createElement("b",null,"Purpose",l.a.createElement("font",{className:"text-danger"},"   *  "))),this.props.hasOwnProperty("is_conf")?l.a.createElement(Cl.a,{className:"col-md-5",onChange:function(t){e.handlePurposeChange(t)},options:[{value:"cust_sms_not_rcvd",label:Ze("cust_sms_not_rcvd","outgoing_call_purpose"),id:"1"},{value:"cust_sms_not_sent",label:Ze("cust_sms_not_sent","outgoing_call_purpose"),id:"2"}]}):l.a.createElement(Cl.a,{className:"col-md-5",onChange:function(t){e.handlePurposeChange(t)},options:this.getMultiSelectOptions("".concat(this.state.call_type,"_call_purpose")),isMulti:!0})),l.a.createElement("div",{className:"form-group row reset-margin justify-content-center pb-2"},l.a.createElement("label",{className:"col-md-3"},l.a.createElement("b",null,"Remarks",l.a.createElement("font",{className:"text-danger"},"   *  "))),l.a.createElement("div",{className:"col-md-5 "},l.a.createElement("textarea",{type:"text",id:"remarks",className:"form-control",rows:5,onChange:this.handleRemarks,maxLength:"512"})))))),l.a.createElement("div",{className:"form-group row reset-margin justify-content-center py-4"},l.a.createElement(lt.a,{variant:"danger",disabled:this.state.calling_api,className:"mr-3",onClick:this.handleCancelCall},l.a.createElement(Rl.b,{className:"mr-2"}),"Cancel Call Log"),l.a.createElement(lt.a,{variant:"success",disabled:this.state.calling_api,onClick:this.handleCallComplete},l.a.createElement(Rl.a,{className:"mr-2"}),"Complete Call Log"))))))}}]),t}(ct),ql=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={purpose:!0},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this,t=this.props.call_log.call_type;if("incoming"==t)var a="incoming_call_purpose";else if("outgoing"==t)a="outgoing_call_purpose";return l.a.createElement("div",{className:"mb-3"},l.a.createElement("div",{className:"row no-margin"},this.props.call_log.cust_call_history&&b("call_log","self_search")&&l.a.createElement("div",{className:"col-1",style:{paddingBottom:15}},l.a.createElement("div",null,l.a.createElement("label",null,"Call Logger")),l.a.createElement("label",{className:"ml-3"},l.a.createElement("h5",null,"All"))),l.a.createElement("div",{className:"col-3",style:{paddingBottom:15}},l.a.createElement("label",null,"From   "),l.a.createElement("font",{className:"text-danger"},"   *  "),l.a.createElement(Ft.a,{closeOnSelect:!0,defaultValue:this.props.call_log.call_start_time,dateFormat:"DD MMM YYYY",timeFormat:!1,required:"required",onChange:function(t){e.handleDateChange("call_start_time",t)}})),l.a.createElement("div",{className:"col-3",style:{paddingBottom:15}},l.a.createElement("label",null,"To "),l.a.createElement("font",{className:"text-danger"},"   *  "),l.a.createElement(Ft.a,{closeOnSelect:!0,defaultValue:this.props.call_log.call_end_time,dateFormat:"DD MMM YYYY",timeFormat:!1,required:"required",onChange:function(t){e.handleDateChange("call_end_time",t)}})),b("call_log","all_search")&&l.a.createElement("div",{className:"col-3",style:{paddingBottom:15}},l.a.createElement("label",null,"Call Logger"),l.a.createElement(A.a.Control,{as:"select",id:"call_logger",onChange:function(t){e.props.onComponentElementChange(t)}},this.props.priv_users)),l.a.createElement("div",{className:"col-3",style:{paddingBottom:15}},l.a.createElement("label",null,"Call Type"),l.a.createElement(A.a.Control,{as:"select",id:"call_type",onChange:function(t){e.props.onComponentElementChange(t)}},l.a.createElement("option",{value:""}," Choose "),l.a.createElement("option",{value:"all"},"All"),l.a.createElement("option",{value:"incoming"}," Incoming "),l.a.createElement("option",{value:"outgoing",selected:this.props.call_log.call_type_select}," Outgoing "))),this.props.purpose_field&&l.a.createElement("div",{className:"col-3",style:{paddingBottom:15}},l.a.createElement("label",null,"Purpose"),l.a.createElement(A.a.Control,{as:"select",id:"call_purpose",value:this.props.call_log.call_purpose,onChange:function(t){e.props.onComponentElementChange(t)}},this.getSelectOptions(a))),l.a.createElement("div",{className:"col-3 align-items-center d-flex",style:{height:60}},l.a.createElement("label",{for:"individual_logs",className:"no-margin"},l.a.createElement(l.a.Fragment,null,l.a.createElement(A.a.Check,{type:"checkbox",checked:this.props.call_log.individual_logs,id:"individual_logs",className:"float-left no-margin",onChange:function(t){e.props.onComponentElementChange(t)}}),"Individual Call Logs")))),l.a.createElement("div",{className:" row no-margin justify-content-md-center"},l.a.createElement("button",{type:"button",className:"btn btn-primary ",id:"searchbtn",disabled:this.props.search_btn,onClick:this.props.onSearch},"Search")))}}]),t}(ct),Il=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(d.a)(t).call(this,e))).handleSearch=function(e){var t=a.state.call_log;t.call_start_time||t.call_end_time?Tl(a.req(t)).then(function(e){if(a.resp(e),e&&"success"===e.status){a.resp(e);var t=a.state.columns;!0===e.data.individual_logs&&(t=[{Header:"Call Logger Name",accessor:"call_logger_name"},{Header:"Cust Name",accessor:"cust_name"},{Header:"Call Type",id:"call_type",accessor:function(e){return pe(e.call_type)}},{Header:"Cust ID",accessor:"cust_id",Cell:function(e){return l.a.createElement($.a,{to:"/borrower/indiv/view/"+e.value,target:"_blank"},e.value)},width:100},{Header:"Call Start Time",id:"start_time",accessor:function(e){return ve(e.call_start_time,!0)}},{Header:"Call Duration",accessor:"dur_secs",Cell:function(e){return e.original.dur_human}},{Header:"Purpose",id:"purpose",width:250,style:{whiteSpace:"unset"},accessor:function(e){return e.call_purpose.map(function(e){return Ze(e)}).join(", ")}},{Header:"Remarks",accessor:"remarks",width:400,style:{whiteSpace:"unset"}}]),!1===e.data.individual_logs&&(t=[{Header:"Call Logger Name",accessor:"call_logger_name"},{Header:"Log date",id:"log",accessor:function(e){return ve(e.log_date)}},{Header:"Logs",accessor:"logs"}]),a.setState({columns:t,logs:e.data.logs,log_table:!0})}}):alert("Please enter valid search criteria")},a.handleCallChange=function(e){var t=a.state.call_log,n=a.state.purpose_field,l="individual_logs"===e.target.id?e.target.checked:e.target.value;t[e.target.id]=l,"all"==t.call_type||""==t.call_type?n=!1:"incoming"!=t.call_type&&"outgoing"!=t.call_type||(n=!0),a.setState({call_log:t,log_table:!1,logs:[],purpose_field:n})},a.state={call_log:{individual_logs:!1},logs:[],columns:[],log_table:!1,purpose_field:!1},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){var e=this.state.call_log;if(b("call_log","all_search")){var t="call_log/post",a=g("role_codes");if("customer_success"==a){var n=["customer_success","customer_success_officer"];t=null}else if("rm_support"==a)n=["relationship_manager","rm_support"],t=null;else n=null;this.setOptionsListToStateFromAppApi("common","priv_users",this.req({priv_code:t,status:"enabled",role_codes:n}),["id","name"])}else b("call_log","self_search")&&(e.search_type="self_search");this.props.match.params.cust_id&&(e.call_end_time=re()(new Date),e.call_start_time=re()().subtract(1,"months"),e.individual_logs=!0,e.cust_call_history=!0,e.cust_id=this.props.match.params.cust_id),this.setState({call_log:e})}},{key:"componentDidMount",value:function(){if(this.props.match.params.cust_id){var e=this.state.call_log;e.call_start_time=e.call_start_time.format("YYYY-MM-DD"),e.call_end_time=e.call_end_time.format("YYYY-MM-DD"),this.handleSearch()}}},{key:"render",value:function(){return l.a.createElement("div",{className:"container max-width containerTopmargin no-padding"},l.a.createElement("div",{className:"row no-margin"},l.a.createElement("h5",{className:"field_visit headerTitle no-margin headerPadvert"},this.state.call_log.cust_call_history?"Search Call Log  ("+this.state.call_log.cust_id+")":"Search Call Log")),l.a.createElement(ql,{id:"call_log",onComponentChange:this.handleCallChange,onComponentElementChange:this.handleCallChange,onSearch:this.handleSearch,search_btn:this.state.calling_api,call_log:this.state.call_log,purpose_field:this.state.purpose_field,overdueSearch:this.handleOverdueSearch,priv_users:this.state.priv_users_dd}),this.state.log_table&&l.a.createElement("div",null,l.a.createElement(ua,{showPag:!0,minRow:0,row_data:void 0!==this.state.logs?this.state.logs:[],column_data:this.state.columns,resizable:!1,exportCSV:!0,csvFile:"Call log",csvData:this.state.logs?this.state.logs:[]})))}}]),t}(st),zl=function(e){return L("/api/admin/lead/create",e)},Wl=function(e){return L("/api/admin/lead/view",e)},Vl=function(e){return L("/api/admin/lead/search",e)},Yl=function(e){return L("/api/admin/lead/close",e)},Ul=function(e){return L("/api/admin/lead/allow_capture",e)},Jl=function(e){return L("/api/admin/lead/audited_by",e)},Kl=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={comp_name:"lead",to_edit:!1,lead:{},save_button_style:"hide_div",disable_div:!1},a.disableAccNumber=function(e){var t=a.state.disable_div;t="terminal_financing"==e.target.value,a.setState({disable_div:t})},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidUpdate",value:function(e,t,a){!e.editable&&this.props.editable&&this.handleEdit()}},{key:"componentWillMount",value:function(){Object(X.a)(Object(d.a)(t.prototype),"componentWillMount",this).call(this),this.load_flow_rel_mgr(),this.setOptionsListToStateFromAppApi("common","list",this.req({country_code:this.country_code,status:"enabled",biz_account:!0}),["acc_prvdr_code","name"],"acc_prvdrs"),this.getSelectOptionsFromResult(Qe("account_purpose","customer"),"acc_purpose",["data_code","data_value"]),this.props.data.acc_purpose&&this.props.data.acc_purpose.includes("terminal_financing")&&this.setState({disable_div:!0})}},{key:"render",value:function(){var e=this;return!0===this.state.to_edit?l.a.createElement(Y.a,{to:"/lead/edit/".concat(this.state.id)}):l.a.createElement("div",{className:"row justify-content-center"},l.a.createElement("div",{className:"col-md-12 ".concat(this.state.div_style)},l.a.createElement("div",{className:"row justify-content-center py-2 "},l.a.createElement("div",{className:"col-md-4"},l.a.createElement(ta,{id:"acc_purpose",onChange:this.handleChange,acc_purposes:this.state.acc_purpose_dd,initialAct_purpose:"view"===this.props.mode?this.props.data.acc_purpose:null,must:!1}))),l.a.createElement("fieldset",{className:"border border-dark my-5 p-2"},l.a.createElement("legend",{className:"w-auto",style:{font_size:"15px"}},"Biz Info"),l.a.createElement("div",{className:"row  ".concat(this.state.div_style)},l.a.createElement("div",{className:"col-md-3"},l.a.createElement("span",null,"Biz Name (or) Cust Name ",l.a.createElement("font",{className:"text-danger"},"   *  ")),l.a.createElement("input",{type:"text",value:this.props.data.biz_name,id:"biz_name",onChange:this.handleChange,className:"form-control"})),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("span",null,"Account Provider",l.a.createElement("font",{className:"text-danger"},"   *  ")),l.a.createElement("select",{id:"acc_prvdr_code",value:this.props.data.acc_prvdr_code,onChange:this.handleChange,className:"form-control",type:"text"},this.state.acc_prvdrs_dd)),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("span",null,l.a.createElement(l.a.Fragment,null,"Account Number")),l.a.createElement("input",{disabled:this.props.data.acc_purpose&&this.props.data.acc_purpose.includes("terminal_financing"),type:"text",id:"account_num",value:this.props.data.account_num,onChange:this.handleChange,className:"form-control"})),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("span",null,"National ID"),l.a.createElement("input",{type:"text",id:"national_id",value:this.props.data.national_id,onChange:this.handleChange,className:"form-control"})))),l.a.createElement("fieldset",{className:"border border-dark p-2 my-5"},l.a.createElement("legend",{className:"w-auto",style:{font_size:"15px"}},"Contact Info"),l.a.createElement("div",{className:"row  ".concat(this.state.div_style)},l.a.createElement("div",{className:"col-md-3"},l.a.createElement("span",null,"Mobile Number",l.a.createElement("font",{className:"text-danger"},"   *  ")),l.a.createElement("input",{type:"text",id:"mobile_num",value:this.props.data.mobile_num,onChange:this.handleChange,className:"form-control"})),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("span",null,"Territory"),l.a.createElement("select",{id:"territory",value:this.props.data.territory,onChange:this.handleChange,className:"form-control",type:"text"},this.getSelectOptions("territory"))),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("span",null,"Location"),l.a.createElement("select",{id:"location",value:this.props.data.location,onChange:this.handleChange,className:"form-control",type:"text"},this.getSelectOptions("location"))),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("span",null,"Landmark"),l.a.createElement("input",{type:"text",id:"landmark",value:this.props.data.landmark,onChange:this.handleChange,className:"form-control"})))),l.a.createElement("fieldset",{className:"border border-dark my-5 p-2"},l.a.createElement("legend",{className:"w-auto"},"Flow Assignment"),l.a.createElement("div",{className:"row ".concat(this.state.div_style)},l.a.createElement("div",{className:"col-md-3"},l.a.createElement("span",{style:{font_size:"15px"}},l.a.createElement("b",null,"Flow RM")),l.a.createElement("select",{id:"flow_rel_mgr_id",value:this.props.data.flow_rel_mgr_id,onChange:this.handleChange,className:"form-control",type:"text"},this.state.flow_rel_mgr_dd))))),l.a.createElement("div",{className:"col-md-1 mb-5  ".concat(this.state.save_button_style)},l.a.createElement("input",{onClick:function(t){e.handleSave(t,"reload")},type:"button",className:"btn btn-success",value:"Save"})))}}]),t}(ct),Gl=a(48),Ql=a.n(Gl),Zl=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={comp_name:"lead",lead_list:{},reason:"",to_edit:!1,lead:{},lead_data:{},edit_mode:!1},a.handleAuditKyc=function(e){var t=a.state.lead.audited_by,n=a.state.lead.auditor_name;null==t&&"operations_auditor"==g("role_codes")?window.confirm("You are going to initiate the audit KYC process for this lead. Once you start, no other auditor can act on this lead.Are you sure?")&&Jl(a.req({id:a.id})).then(function(e){a.resp(e),e&&"success"===e.status&&(window.location.href="/lead/audit_kyc/"+a.id)}):null!=t&&g("user_id")!=t?(window.alert("".concat(n," has already initiated audit process for this KYC record. You can not take action. However you can view the KYC record")),window.location.href="/lead/audit_kyc/"+a.id):null!=t&&g("user_id")==t&&(window.location.href="/lead/audit_kyc/"+a.id)},a.handleLead=function(e){var t=a.state.lead;a.validate_fields(t)&&zl(a.req({lead:t})).then(function(e){a.resp(e),e&&"success"===e.status&&(alert(e.message),a.setState({to_edit:!0,id:e.data}))})},a.handleAllowManualCapure=function(e){var t=a.state.lead.id;Ul(a.req({lead_id:t})).then(function(e){a.resp(e),e&&"success"===e.status&&(alert(e.message),window.location.reload())})},a.handleLeadProfile=function(e){a.setState({modalBox1:"true"})},a.handleModalClose=function(){a.setState({modalBox1:!1})},a.handleModalOpen=function(e){a.setState({modalBox1:!0})},a.handleModalCloseLead=function(e){var t=a.state.lead.id,n=a.state.reason,l=a.state.lead.profile_status;Yl(a.req({lead_id:t,reason:n,profile_status:l})).then(function(e){a.resp(e),e&&"success"===e.status&&(alert(e.message),window.location.reload())})},a.handleChange=function(e){console.log(e.target.value),a.setState({reason:e.target.value})},a.handleEditprofile=function(e){a.setState({edit_mode:!0})},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){var e=this;"view"==this.props.mode?(this.lead_ref=l.a.createRef(),this.id=this.props.match.params.id,Wl(this.req({id:this.id})).then(function(t){e.resp(t),t&&"success"===t.status&&(e.setState({lead:t.data,div_style:"disable_div",submit_btn_style:"hide_div"}),console.log(t.data,"response . data on view mode"))})):this.props.mode}},{key:"validate_fields",value:function(e){return e.acc_purpose&&"terminal_financing"==e.acc_purpose.includes&&!e.mobile_num?(alert("Please enter mobile number"),!1):e.account_num&&!e.acc_prvdr_code?(alert("Please select account provider"),!1):!!(e.acc_prvdr_code&&e.acc_purpose&&e.biz_name)||(alert("Please enter required fields"),!1)}},{key:"render",value:function(){var e=null,t=this.state.lead.profile_status;return this.state.lead.status&&(e=this.state.lead.status.split(/_/)[0]),!0===this.state.to_edit?l.a.createElement(Y.a,{to:"/lead/edit/".concat(this.state.id)}):l.a.createElement("div",null,"closed"==t&&l.a.createElement("div",{class:"closedStamp"},l.a.createElement("div",{className:"stamp is-nope"},"Closed")),l.a.createElement("div",{className:"container ",style:{maxWidth:"1500px"}},l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("form",{autocomplete:"off"},l.a.createElement(an.a,null,l.a.createElement(an.a.Header,{style:{backgroundColor:"#01062c",color:"white"}},l.a.createElement("div",{className:"d-flex justify-content-between"},l.a.createElement("h4",null,this.props.title),this.state.lead.status&&l.a.createElement("h4",null,"Status: ",Ze(this.state.lead.status)),l.a.createElement("div",null,"view"==this.props.mode&&"open"==t&&b("lead","allow_manual_capture")&&l.a.createElement(lt.a,{disabled:this.state.calling_api,className:"mr-3  text-white",variant:"primary",onClick:this.handleAllowManualCapure},"Allow Manual ID Capture"),"view"==this.props.mode&&"open"==t&&e<50&&l.a.createElement(lt.a,{className:"mr-3  text-white",variant:"primary",onClick:this.handleEditprofile},"EDIT"),e&&e>=40&&b("lead","audit_kyc")&&l.a.createElement(lt.a,{onClick:this.handleAuditKyc,className:"mr-3"},50==e?"Audit KYC":"View KYC"),"view"==this.props.mode&&"open"==t&&e<=50&&l.a.createElement(lt.a,{className:"mr-2",variant:"danger",onClick:this.handleLeadProfile},"Close Profile")))),l.a.createElement(an.a.Body,{className:"p-5"},("create"==this.props.mode||!Ql.a.isEmpty(this.state.lead))&&l.a.createElement(Kl,{mode:this.props.mode,id:"lead",data:this.state.lead,editable:this.state.edit_mode,onComponentChange:this.handleComponentChange}),l.a.createElement("div",{className:"form-group row reset-margin justify-content-center py-4"},"create"==this.props.mode&&l.a.createElement(lt.a,{disabled:this.state.calling_api,className:"col-md-2 mr-3 btn btn-primary".concat(this.state.submit_btn_style),onClick:this.handleLead},"Submit"))))),l.a.createElement(nt.a,{show:this.state.modalBox1,onHide:this.handleModalClose,size:"l"},l.a.createElement(nt.a.Header,{closeButton:!0,show:this.state.modalBox1,onHide:this.handleModalClose},l.a.createElement(nt.a.Title,null,"Close Lead Profile ")),l.a.createElement(nt.a.Body,null,l.a.createElement("div",{className:"form-group row mx-0 mb-2 p-3 "},l.a.createElement("div",{for:"",className:"col-sm-5 font-weight-bold text-white reset-padding"}," Reason",l.a.createElement("font",{className:"text-danger"},"   *  ")),l.a.createElement("div",{className:"col-sm-7 reset-padding"},l.a.createElement("div",null,l.a.createElement(A.a.Control,{as:"select",id:"type",onChange:this.handleChange},this.getSelectOptions("close_reason"))),l.a.createElement("div",{className:"control-me"})))),l.a.createElement(nt.a.Footer,null,l.a.createElement(lt.a,{variant:"danger",onClick:this.handleModalCloseLead},"Close Lead")))))}}]),t}(st),Xl=a(102),$l=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){this.load_flow_rel_mgr(),this.setOptionsListToStateFromAppApi("common","list",this.req({country_code:this.country_code,status:"enabled",biz_account:!0}),["acc_prvdr_code","name"],"acc_prvdrs")}},{key:"render",value:function(){var e=this;return l.a.createElement(A.a,{className:"mb-3"},l.a.createElement(A.a.Row,{className:"my-4",style:{display:"flex",alignItems:"center"}},l.a.createElement("div",{className:"col-3"},l.a.createElement("span",null,"Created From"),l.a.createElement(Ft.a,{onChange:function(t){e.handleDateChange("created_from",t)},closeOnSelect:!0,dateFormat:"DD MMM YYYY",timeFormat:!1})),l.a.createElement("div",{className:"col-3"},l.a.createElement("span",null,"Created To"),l.a.createElement(Ft.a,{onChange:function(t){e.handleDateChange("created_to",t)},closeOnSelect:!0,dateFormat:"DD MMM YYYY",timeFormat:!1})),l.a.createElement("div",{className:"col-3"},l.a.createElement("span",null,"Flow RM"),l.a.createElement(A.a.Control,{as:"select",id:"flow_rel_mgr_id",onChange:this.handleChange},this.state.flow_rel_mgr_dd)),l.a.createElement("div",{className:"col-3"},l.a.createElement("span",null,"Territory"),l.a.createElement(A.a.Control,{as:"select",id:"territory",onChange:this.handleChange},this.getSelectOptions("territory")))),l.a.createElement(A.a.Row,{className:"my-4",style:{display:"flex",alignItems:"center"}},l.a.createElement("div",{className:"col-3"},l.a.createElement("span",null,"Account Provider"),l.a.createElement(A.a.Control,{as:"select",id:"acc_prvdr_code",onChange:this.handleChange},this.state.acc_prvdrs_dd)),l.a.createElement("div",{className:"col-3"},l.a.createElement("span",null,"Account Number"),l.a.createElement(A.a.Control,{id:"account_num",onChange:this.handleChange})),l.a.createElement("div",{className:"col-3"},l.a.createElement("span",null,"Location"),l.a.createElement(A.a.Control,{as:"select",id:"location",onChange:this.handleChange},this.getSelectOptions("location"))),l.a.createElement("div",{className:"col-3"},l.a.createElement("span",null,"Biz Name (or) Cust Name"),l.a.createElement(A.a.Control,{id:"biz_name",onChange:this.handleChange}))),l.a.createElement(A.a.Row,{className:"my-4",style:{display:"flex",alignItems:"center"}},l.a.createElement("div",{className:"col-3"},l.a.createElement("span",null,"Mobile Number"),l.a.createElement(A.a.Control,{id:"mobile_num",onChange:this.handleChange})),l.a.createElement("div",{className:"col-3"},l.a.createElement("span",null,"Cust ID"),l.a.createElement(A.a.Control,{id:"cust_id",onChange:this.handleChange})),l.a.createElement("div",{className:"col-3"},l.a.createElement("span",null,"Account Purpose"),l.a.createElement(A.a.Control,{as:"select",id:"acc_purpose",onChange:this.handleChange},this.getSelectOptions("account_purpose",!0,"customer"))),l.a.createElement("div",{className:"col-3"},l.a.createElement("span",null,"Lead Status"),l.a.createElement(A.a.Control,{as:"select",id:"status",onChange:this.handleChange},this.getSelectOptions("lead_status")))),l.a.createElement(A.a.Row,{className:"my-4",style:{display:"flex",alignItems:"center"}},l.a.createElement("div",{className:"col-3"},l.a.createElement("span",null,"National ID"),l.a.createElement(A.a.Control,{id:"national_id",onChange:this.handleChange})),l.a.createElement("div",{className:"col-3"},l.a.createElement("span",null,"Lead Type"),l.a.createElement(A.a.Control,{as:"select",id:"type",onChange:this.handleChange},this.getSelectOptions("lead_type"))),l.a.createElement("div",{className:"col-3"},l.a.createElement(A.a.Group,{as:Xl.a,className:"no-padding"},l.a.createElement(A.a.Label,{for:"closed_profile",className:"no-margin"}," Include Closed Profiles",l.a.createElement(A.a.Check,{type:"checkbox",defaultChecked:this.props.profile_status.closed_profile,id:"closed_profile",className:"float-left no-margin",onChange:function(t){e.props.onComponentElementChange(t)},style:{paddingRight:5,paddingLeft:5}})))),l.a.createElement(A.a.Group,{as:Xl.a,className:"col-3"}),l.a.createElement(A.a.Group,{as:Xl.a,className:"col-3"})))}}]),t}(ct),er=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={lead:{profile_status:"open"},profile_status:{closed_profile:!1},columns:[],lead_list:[],lead_table:"hide_div"},a.handlecloseprofilechange=function(e){var t=a.state.profile_status,n="closed_profile"===e.target.id?e.target.checked:e.target.value;t[e.target.id]=n,a.state.lead.profile_status=1==t.closed_profile?"closed":"open"},a.handleSearch=function(e){a.validate_search(a.state.lead)&&Vl(a.req({lead_search_criteria:a.state.lead})).then(function(e){if(a.resp(e),e){if("success"===e.status){a.resp(e);var t=a.state.columns;t=[{Header:"Cust name (or) Biz name",id:"biz_name",accessor:function(e){return Ze(e.biz_name)}},{Header:"Mobile Number",accessor:"mobile_num"},{Header:"ACC PRVDR",id:"acc_prvdr_code",accessor:function(e){return l.a.createElement(Me,{logotype:e.acc_prvdr_code})}},{Header:"Account Number",accessor:"account_num",width:125},{Header:"Location",id:"location",width:100,accessor:function(e){return pe(e.location)}},{Header:"Territory",id:"territory",width:100,accessor:function(e){return pe(e.territory)}},{Header:"Created At",id:"created_at",accessor:function(e){return ve(e.created_at,!0)}},{Header:"Status",id:"status",accessor:function(e){return Ze(e.status)}},{Header:"RM Name",id:"rm_name",accessor:function(e){return e.flow_rel_mgr_name}},{Header:"KYC Approved by",id:"auditor_name",accessor:function(e){return e.auditor_name}},{Header:"Profile Status",id:"profile_status",width:50,accessor:function(e){return ue(e.profile_status)}},{Header:"Type",id:"type",width:50,accessor:function(e){return Ze(e.type,"lead_type")}},{Header:"Reason",id:"reason",width:50,accessor:function(e){return ue(e.kyc_reason)}},{Header:"View / Edit",id:"id",accessor:function(e){return l.a.createElement($.a,{className:"btn btn-primary btn-std",role:"button",to:"/lead/edit/"+e.id,target:"_blank"},"View / Edit")}}]}a.setState({columns:t,lead_list:e.data,lead_table:"show_div"})}})},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"validate_search",value:function(e){return e.account_num&&!e.acc_prvdr_code?(alert("Please select account provider"),!1):!!(e.created_from||e.created_to||e.flow_rel_mgr_id||e.territory||e.acc_prvdr_code||e.account_num||e.location||e.mobile_num||e.status||e.biz_name||e.cust_id||e.acc_purpose||e.type||e.profile_status)||(alert("Please enter valid search criteria"),!1)}},{key:"render",value:function(){return l.a.createElement("div",{className:"container containerTopmargin max-width no-padding"},l.a.createElement("form",{className:"mb-3",autocomplete:"off"},l.a.createElement(an.a,null,l.a.createElement(an.a.Header,{style:{backgroundColor:"#01062c",color:"white"}},l.a.createElement("h4",null,this.props.title)),l.a.createElement(an.a.Body,{style:{padding:15}},l.a.createElement($l,{id:"lead",onComponentChange:this.handleComponentChange,onComponentElementChange:this.handlecloseprofilechange,profile_status:this.state.profile_status}),l.a.createElement("div",{className:"form-group row reset-margin justify-content-center py-4"},l.a.createElement(lt.a,{disabled:this.state.calling_api,className:"col-md-2 mr-3 btn btn-primary".concat(this.state.submit_btn_style),onClick:this.handleSearch},"Search"))))),!Ql.a.isEmpty(this.state.lead)&&l.a.createElement("div",{className:"mt-3 ".concat(this.state.lead_table)},l.a.createElement(ua,{showPag:!0,minRow:0,row_data:void 0!==this.state.lead_list?this.state.lead_list:[],column_data:this.state.columns,resizable:!1,exportCSV:!0,csvFile:"lead",csvData:this.state.lead_list?this.state.lead_list:[]})))}}]),t}(st),tr=a(16),ar=a(87),nr=a(23),lr=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={modalBox:!1,img_height:"",img_width:"100"},a.handleImage=function(e){a.setState({modalBox:!0})},a.handleClose=function(e){a.setState({modalBox:!1})},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;console.log("this.root-"+this.root),console.log("this.props.image_path-"+this.props.image_path),console.log("this.props.file_name-"+this.props.file_name);return l.a.createElement(l.a.Fragment,null,this.props.title&&l.a.createElement("p",{className:"text-white no-margin"},this.props.title),l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{style:this.props.style?this.props.style:{height:this.state.img_height,width:this.state.imgWidth,margin:"auto"},className:"text-center align-items-center"},this.props.file_name?l.a.createElement("a",{href:"#"},l.a.createElement("img",{style:this.props.style?this.props.style:{height:this.state.img_height,width:this.state.imgWidth},src:this.root+this.props.image_path+"/s_"+this.props.file_name,onLoad:function(t){var a=t.target,n=a.offsetHeight,l=a.offsetWidth;console.log(n,l);var r=100/(l/n);e.setState(function(e){return e.img_height=r})},alt:"/s_"+this.props.file_name,onClick:function(t){return e.handleImage(t)}})):l.a.createElement("p",{className:"no-margin viewCus_labelVal"},"Not uploaded"))),l.a.createElement(nt.a,{show:this.state.modalBox,onHide:this.handleClose,className:"model_window"},l.a.createElement(nt.a.Header,{closeButton:!0,className:"modal-close-btn",show:this.state.modalBox,onHide:this.handleClose},l.a.createElement(nt.a.Title,null,this.props.title)),l.a.createElement(nt.a.Body,null,l.a.createElement("img",{src:this.root+this.props.image_path+"/l_"+this.props.file_name,alt:"/l_"+this.props.file_name})),l.a.createElement(nt.a.Footer,null)))}}]),t}(ct),rr=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={lead:{},isActive:!1,account_arr:!1,bizInfor_arr:!1,bizOwner_arr:!1,bizAddress_arr:!1,ownerAddress_arr:!1,bizIdentity_arr:!1,contactAddress_arr:!1,ownerPerson_arr:!1,partnerKYC_arr:!1,contactPerson_arr:!1,references_arr:!1,consent_arr:!1,aggreements_arr:!1,reassignModal:!1,rejectModal:!1,pdf_modal:!1},a.handleToggle=function(e){switch(e){case"Account":a.setState(function(e){return e.account_arr=!a.state.account_arr});break;case"BizInfo":a.setState(function(e){return e.bizInfor_arr=!a.state.bizInfor_arr});break;case"BizOwner":a.setState(function(e){return e.bizOwner_arr=!a.state.bizOwner_arr});break;case"BizAddress":a.setState(function(e){return e.bizAddress_arr=!a.state.bizAddress_arr});break;case"OwnerAddress":a.setState(function(e){return e.ownerAddress_arr=!a.state.ownerAddress_arr});break;case"BizIdentity":a.setState(function(e){return e.bizIdentity_arr=!a.state.bizIdentity_arr});break;case"PartnerKYC":a.setState(function(e){return e.partnerKYC_arr=!a.state.partnerKYC_arr});break;case"ContactAddress":a.setState(function(e){return e.contactAddress_arr=!a.state.contactAddress_arr});break;case"OwnerPerson":a.setState(function(e){return e.ownerPerson_arr=!a.state.ownerPerson_arr});break;case"ContactPerson":a.setState(function(e){return e.contactPerson_arr=!a.state.contactPerson_arr});break;case"Consent":a.setState(function(e){return e.consent_arr=!a.state.consent_arr});break;case"Agreements":a.setState(function(e){return e.aggreements_arr=!a.state.aggreements_arr});break;case"References":a.setState(function(e){return e.references_arr=!a.state.references_arr})}},a.addressCardData=function(e){return Object.keys(e).sort().map(function(t,a){return l.a.createElement("div",{className:"col-md-3"},l.a.createElement("p",{class:"no-margin viewCus_label"},Ze(t)),l.a.createElement("p",{class:"no-margin viewCus_labelVal"},e[t].value))})},a.handlePdfModalClose=function(){a.setState({pdf_modal:!1})},a.handlePdfModal=function(e,t){a.setState({pdf_modal:!0,pdf_path:e,pdf_modal_title:t})},a.ViewPdfModal=function(){return l.a.createElement(nt.a,{show:a.state.pdf_modal,onHide:a.handlePdfModalClose,backdrop:"static",size:"xl",style:{position:"fixed"}},l.a.createElement(nt.a.Header,{closeButton:!0,show:a.state.pdf_modal,onHide:a.handlePdfModalClose},l.a.createElement(nt.a.Title,null,a.state.pdf_modal_title)),l.a.createElement(nt.a.Body,null,l.a.createElement("div",{className:"row justify-content-center"},l.a.createElement("object",{data:a.root+a.state.pdf_path+"#toolbar=0",type:"application/pdf",style:{width:"803px",height:"560px"}}))),l.a.createElement(nt.a.Footer,null,l.a.createElement(lt.a,{variant:"secondary",onClick:a.handlePdfModalClose},"Close")))},a.ViewReassignOrRejectModal=function(){var e=a.state.reassignModal||a.state.rejectModal;if(e)var t=a.state.reassignModal?["Reassign Reason","reassign_reason",a.props.handleKYCEdit]:["Reject Reason","reject_reason",a.props.handleRejectKYC],n=Object(ea.a)(t,3),r=n[0],s=n[1],c=n[2];return l.a.createElement(nt.a,{show:e,onHide:a.props.handleModalClose,size:"l"},l.a.createElement(nt.a.Header,{closeButton:!0,show:e,onHide:a.props.handleModalClose},l.a.createElement(nt.a.Title,null,r)),l.a.createElement(nt.a.Body,null,l.a.createElement("div",{className:"form-group row mx-0 mb-2 "},l.a.createElement("label",{for:"",className:"col-sm-5 font-weight-bold label__name reset-padding"},"Reason",l.a.createElement("font",{className:"text-danger"},"   *  ")),l.a.createElement("div",{className:"col-sm-7 reset-padding"},l.a.createElement("div",null,l.a.createElement("select",{id:"reason",onChange:a.handleChange,className:"form-control",type:"text"},a.getSelectOptions(s))),l.a.createElement("div",{className:"control-me"}))),l.a.createElement("div",{className:"rule-form-group form-group row reset-margin"},l.a.createElement("label",{for:"",className:"col-sm-5 font-weight-bold label__name reset-padding"},"Remarks",l.a.createElement("font",{className:"text-danger"},"   *  ")),l.a.createElement("div",{className:"col-sm-7 reset-padding"},l.a.createElement("div",null,l.a.createElement("textarea",{type:"text",id:"remarks",className:"form-control",onChange:a.handleChange,maxLength:"256"}))))),l.a.createElement(nt.a.Footer,null,l.a.createElement(lt.a,{variant:"primary",disabled:a.props.submit_btn,onClick:c},"Submit")))},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentWillReceiveProps",value:function(e){this.setState({reassignModal:e.reassignModal,rejectModal:e.rejectModal})}},{key:"render",value:function(){var e=this;return this.props.data?l.a.createElement(l.a.Fragment,null,this.ViewPdfModal(),l.a.createElement("div",{className:"kyc_auditBox"},this.ViewReassignOrRejectModal(),l.a.createElement("div",{className:"kyc-card row"},l.a.createElement("div",{className:"col-md-12"},l.a.createElement(tr.a,{defaultActiveKey:"0"},l.a.createElement(an.a,null,l.a.createElement(tr.a.Toggle,{style:{backgroundColor:"#3D3E53",color:"white",fontSize:18},as:an.a.Header,eventKey:"0",onClick:function(){return e.handleToggle("Account")}},"Account",l.a.createElement(nr.a,{className:this.state.account_arr?"arrow-icon down":"arrow-icon",size:"15"})),l.a.createElement(tr.a.Collapse,{eventKey:"0"},l.a.createElement(an.a.Body,{className:"no-padding"},l.a.createElement("div",{className:"row",style:{marginRight:0,marginLeft:0,marginBottom:15}},l.a.createElement("div",{class:"col-md-3"},l.a.createElement("div",null,l.a.createElement("p",{class:"no-margin viewCus_label"},"Account Provider"),l.a.createElement("p",{class:"no-margin viewCus_labelVal"},l.a.createElement(Me,{logotype:this.props.data.account.acc_prvdr_code.value})))),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("p",{class:"no-margin viewCus_label"},"Account Number"),l.a.createElement("p",{class:"no-margin viewCus_labelVal"},this.props.data.account.acc_number.value)),this.props.data.account.branch&&this.props.data.account.branch.value&&l.a.createElement("div",{className:"col-md-3"},l.a.createElement("p",{class:"no-margin viewCus_label"},"Branch"),l.a.createElement("p",{class:"no-margin viewCus_labelVal"},Ze(this.props.data.account.branch.value))),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("p",{class:"no-margin viewCus_label"},"Account Purpose"),l.a.createElement("p",{class:"no-margin viewCus_labelVal"},Fe(this.props.lead_data.acc_purpose)))),"re_kyc"==this.props.lead_data.type&&"new_account"==this.props.lead_data.kyc_reason&&l.a.createElement("div",{className:"row no-margin"},l.a.createElement("div",{className:"col-md-3"}),l.a.createElement("div",{className:"col-md-6"},l.a.createElement("div",{className:"d-flex align-items-center justify-content-around pAlign_mid"},l.a.createElement("p",{class:"no-margin viewCus_label no-padding"},"New A/C Request Letter Photo"),l.a.createElement(lr,{className:"img-fluid",image_path:De(this.props.data.account.photo_new_acc_letter_full_path.value,this.props.data.account.photo_new_acc_letter.value),file_name:this.props.data.account.photo_new_acc_letter.value}))),l.a.createElement("div",{className:"col-md-3"}))))))),l.a.createElement("div",{className:"col-md-12"},l.a.createElement(tr.a,{defaultActiveKey:"0"},l.a.createElement(an.a,null,l.a.createElement(tr.a.Toggle,{style:{backgroundColor:"#3D3E53",fontSize:18},as:an.a.Header,eventKey:"0",onClick:function(){return e.handleToggle("BizInfo")}},"Biz Info",l.a.createElement(nr.a,{className:this.state.bizInfor_arr?"arrow-icon down":"arrow-icon",size:"15"})),l.a.createElement(tr.a.Collapse,{eventKey:"0"},l.a.createElement(an.a.Body,{className:"no-padding"},l.a.createElement("div",{className:"row",style:{marginRight:0,marginLeft:0,marginBottom:15}},l.a.createElement("div",{className:"col-md-3"},l.a.createElement("p",{class:"no-margin viewCus_label"},"Biz Name"),l.a.createElement("p",{class:"no-margin viewCus_labelVal"},this.props.data.biz_info.biz_name.value)),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("p",{class:"no-margin viewCus_label"},"Business Distance"),l.a.createElement("p",{class:"no-margin viewCus_labelVal"},ue(this.props.data.biz_info.business_distance.value))),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("p",{class:"no-margin viewCus_label"},"Territory"),l.a.createElement("p",{class:"no-margin viewCus_labelVal"},ue(this.props.data.biz_info.territory.value))),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("p",{class:"no-margin viewCus_label"},"Ownership"),l.a.createElement("p",{class:"no-margin viewCus_labelVal"},ue(this.props.data.biz_info.ownership.value))),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("p",{class:"no-margin viewCus_label"},"Business Address Type"),l.a.createElement("p",{class:"no-margin viewCus_labelVal"},ue(this.props.data.biz_info.biz_addr_prop_type.value))),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("p",{class:"no-margin viewCus_label"},"Partner RM Name"),l.a.createElement("p",{class:"no-margin viewCus_labelVal"},this.props.data.biz_info.dp_rel_mgr_name))))))))),l.a.createElement("div",{className:"kyc-card row"},l.a.createElement("div",{className:"col-md-12"},l.a.createElement(tr.a,{defaultActiveKey:"0"},l.a.createElement(an.a,null,l.a.createElement(tr.a.Toggle,{style:{backgroundColor:"#3D3E53",color:"white",fontSize:18},as:an.a.Header,eventKey:"0",onClick:function(){return e.handleToggle("BizOwner")}},"Biz Owner",l.a.createElement(nr.a,{className:this.state.bizOwner_arr?"arrow-icon down":"arrow-icon",size:"15"})),l.a.createElement(tr.a.Collapse,{eventKey:"0"},l.a.createElement(an.a.Body,{className:"no-padding"},l.a.createElement("div",{className:"row",style:{marginRight:0,marginLeft:0,marginBottom:15}},l.a.createElement("div",{className:"col-md-3"},l.a.createElement("p",{class:"no-margin viewCus_label"},"First Name"),l.a.createElement("p",{class:"no-margin viewCus_labelVal"},this.props.data.owner_person.first_name.value)),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("p",{class:"no-margin viewCus_label"},"Last Name"),l.a.createElement("p",{class:"no-margin viewCus_labelVal"},this.props.data.owner_person.last_name.value)),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("p",{class:"no-margin viewCus_label"},"National ID"),l.a.createElement("p",{class:"no-margin viewCus_labelVal"},this.props.data.owner_person.national_id.value)),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("p",{class:"no-margin viewCus_label"},"DOB"),l.a.createElement("p",{class:"no-margin viewCus_labelVal"},this.props.data.owner_person.dob.value)),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("p",{class:"no-margin viewCus_label"},"Gender"),l.a.createElement("p",{class:"no-margin viewCus_labelVal"},pe(this.props.data.owner_person.gender.value))),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("p",{class:"no-margin viewCus_label"},"Email ID"),l.a.createElement("p",{class:"no-margin viewCus_labelVal"},this.props.data.owner_person.email_id.value)),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("p",{class:"no-margin viewCus_label"},"Whatsapp"),l.a.createElement("p",{class:"no-margin viewCus_labelVal"},this.props.data.owner_person.whatsapp.value))),l.a.createElement("div",{className:"row no-margin"},l.a.createElement("div",{className:"col-md-3"}),l.a.createElement("div",{className:"col-md-6"},l.a.createElement("div",{className:"d-flex align-items-center justify-content-around pAlign_mid"},l.a.createElement("p",{class:"no-margin viewCus_label no-padding"},"Selfie Photo"),l.a.createElement(lr,{className:"img-fluid",image_path:De(this.props.data.owner_person.photo_selfie_full_path.value,this.props.data.owner_person.photo_selfie.value),file_name:this.props.data.owner_person.photo_selfie.value}))),l.a.createElement("div",{className:"col-md-3"}))))))),l.a.createElement("div",{className:"col-md-12"},l.a.createElement(tr.a,{defaultActiveKey:"0"},l.a.createElement(an.a,null,l.a.createElement(tr.a.Toggle,{style:{backgroundColor:"#3D3E53",color:"white",fontSize:18},as:an.a.Header,eventKey:"0",onClick:function(){return e.handleToggle("BizAddress")}},"Biz Address",l.a.createElement(nr.a,{className:this.state.bizAddress_arr?"arrow-icon down":"arrow-icon",size:"15"})),l.a.createElement(tr.a.Collapse,{eventKey:"0"},l.a.createElement(an.a.Body,{className:"no-padding"},l.a.createElement("div",{className:"row",style:{marginRight:0,marginLeft:0,marginBottom:15}},this.addressCardData(this.props.data.biz_address))))))),0==this.props.data.same_as_biz_address&&l.a.createElement("div",{className:"col-md-12"},l.a.createElement(tr.a,{defaultActiveKey:"0"},l.a.createElement(an.a,null,l.a.createElement(tr.a.Toggle,{style:{backgroundColor:"#3D3E53",color:"white",fontSize:18},as:an.a.Header,eventKey:"0",onClick:function(){return e.handleToggle("OwnerAddress")}},"Owner Address",l.a.createElement(nr.a,{className:this.state.ownerAddress_arr?"arrow-icon down":"arrow-icon",size:"15"})),l.a.createElement(tr.a.Collapse,{eventKey:"0"},l.a.createElement(an.a.Body,{className:"no-padding"},l.a.createElement("div",{className:"row",style:{marginRight:0,marginLeft:0,marginBottom:15}},this.addressCardData(this.props.data.owner_address)))))))),l.a.createElement("div",{className:"kyc-card row"},l.a.createElement("div",{className:"col-md-12"},l.a.createElement(tr.a,{defaultActiveKey:"0"},l.a.createElement(an.a,null,l.a.createElement(tr.a.Toggle,{style:{backgroundColor:"#3D3E53",color:"white",fontSize:18},as:an.a.Header,eventKey:"0",onClick:function(){return e.handleToggle("BizIdentity")}},"Biz Identity",l.a.createElement(nr.a,{className:this.state.bizIdentity_arr?"arrow-icon down":"arrow-icon",size:"15"})),l.a.createElement(tr.a.Collapse,{eventKey:"0"},l.a.createElement(an.a.Body,{className:"no-padding"},l.a.createElement("div",{className:"row",style:{marginRight:0,marginLeft:0,marginBottom:15}},l.a.createElement("div",{className:"col-md-3"},l.a.createElement("p",{class:"no-margin viewCus_label"},"GPS"),l.a.createElement("span",null,l.a.createElement("a",{target:"blank",href:"http://maps.google.com/maps?t=k&q=loc:"+this.props.data.biz_identity.gps.value},"View on Map")),l.a.createElement("a",{target:"blank",href:"http://maps.google.com/maps?t=k&q=loc:"+this.props.data.biz_identity.gps.value},l.a.createElement(ar.a,{size:"20"}))),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("p",{class:"no-margin viewCus_label"},"Mobile No."),l.a.createElement("p",{class:"no-margin viewCus_labelVal"},this.props.data.biz_identity.mobile_num.value)),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("p",{class:"no-margin viewCus_label"},"Alternate biz Mobilenumber 1"),l.a.createElement("p",{class:"no-margin viewCus_labelVal"},this.props.data.biz_identity.alt_biz_mobile_num_1.value)),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("p",{class:"no-margin viewCus_label"},"Alternate biz Mobilenumber 2"),l.a.createElement("p",{class:"no-margin viewCus_labelVal"},this.props.data.biz_identity.alt_biz_mobile_num_2.value))),l.a.createElement("div",{className:"row no-margin"},l.a.createElement("div",{className:"col-md-4"},l.a.createElement("div",{className:"d-flex align-items-center justify-content-around pAlign_mid"},l.a.createElement("p",{class:"no-margin viewCus_label no-padding"},"Business License Photo"),l.a.createElement(lr,{className:"img-fluid",image_path:De(this.props.data.biz_identity.photo_biz_lic_full_path.value,this.props.data.biz_identity.photo_biz_lic.value),file_name:this.props.data.biz_identity.photo_biz_lic.value}))),l.a.createElement("div",{className:"col-md-4"},l.a.createElement("div",{className:"d-flex align-items-center justify-content-around pAlign_mid"},l.a.createElement("p",{class:"no-margin viewCus_label no-padding"},"Shop Photo"),l.a.createElement(lr,{className:"img-fluid",image_path:De(this.props.data.biz_identity.photo_shop_full_path.value,this.props.data.biz_identity.photo_shop.value),file_name:this.props.data.biz_identity.photo_shop.value}))),l.a.createElement("div",{className:"col-md-4"},l.a.createElement("div",{className:"d-flex align-items-center justify-content-around pAlign_mid"},l.a.createElement("p",{class:"no-margin viewCus_label no-padding"},"Visit Selfie Photo"),l.a.createElement(lr,{className:"img-fluid",image_path:this.props.lead_data.photo_visit_selfie_path,file_name:this.props.lead_data.photo_visit_selfie})))))))))),l.a.createElement("div",{className:"kyc-card row"},0==this.props.data.same_as_owner_person&&l.a.createElement("div",{className:"col-md-12"},l.a.createElement(tr.a,{defaultActiveKey:"0"},l.a.createElement(an.a,null,l.a.createElement(tr.a.Toggle,{style:{backgroundColor:"#3D3E53",color:"white",fontSize:18},as:an.a.Header,eventKey:"0",onClick:function(){return e.handleToggle("ContactAddress")}},"Contact Address",l.a.createElement(nr.a,{className:this.state.contactAddress_arr?"arrow-icon down":"arrow-icon",size:"15"})),l.a.createElement(tr.a.Collapse,{eventKey:"0"},l.a.createElement(an.a.Body,{className:"no-padding"},l.a.createElement("div",{className:"row",style:{marginRight:0,marginLeft:0,marginBottom:15}},this.addressCardData(this.props.data.contact_persons[0].contact_address))))))),this.props.lead_data.acc_purpose.includes("terminal_financing")&&l.a.createElement("div",{className:"col-md-12"},l.a.createElement(tr.a,{defaultActiveKey:"0"},l.a.createElement(an.a,null,l.a.createElement(tr.a.Toggle,{style:{backgroundColor:"#3D3E53",color:"white",fontSize:18},as:an.a.Header,eventKey:"0",onClick:function(){return e.handleToggle("PartnerKYC")}},"Partner KYC",l.a.createElement(nr.a,{className:this.state.partnerKYC_arr?"arrow-icon down":"arrow-icon",size:"15"})),l.a.createElement(tr.a.Collapse,{eventKey:"0"},l.a.createElement(an.a.Body,{className:"no-padding"},l.a.createElement("div",{className:"row",style:{marginRight:0,marginLeft:0,marginBottom:15}},this.props.data.partner_kyc.UEZM.UEZM_MainContent_txtLC1&&l.a.createElement("div",{className:"col-md-3"},l.a.createElement("p",{class:"no-margin viewCus_label"},"LC1"),l.a.createElement("p",{class:"no-margin viewCus_labelVal"},this.props.data.partner_kyc.UEZM.UEZM_MainContent_txtLC1.value)),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("p",{class:"no-margin viewCus_label"},"Operated by"),l.a.createElement("p",{class:"no-margin viewCus_labelVal"},this.props.data.partner_kyc.UEZM.UEZM_MainContent_ddOperatedBy.value)),this.props.data.partner_kyc.UEZM.UEZM_MainContent_ddWallet&&l.a.createElement("div",{className:"col-md-3"},l.a.createElement("p",{class:"no-margin viewCus_label"},"Wallet Type"),l.a.createElement("p",{class:"no-margin viewCus_labelVal"},this.props.data.partner_kyc.UEZM.UEZM_MainContent_ddWallet.value)),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("p",{class:"no-margin viewCus_label"},"Abbreviation Name"),l.a.createElement("p",{class:"no-margin viewCus_labelVal"},this.props.data.partner_kyc.UEZM.UEZM_MainContent_txtAbbreviationName.value)),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("p",{class:"no-margin viewCus_label"},"CMP Registration No."),l.a.createElement("p",{class:"no-margin viewCus_labelVal"},this.props.data.partner_kyc.UEZM.UEZM_MainContent_txtCompanyRegistrationNo.value)),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("p",{class:"no-margin viewCus_label"},"Recruiter ID"),l.a.createElement("p",{class:"no-margin viewCus_labelVal"},this.props.data.partner_kyc.UEZM.UEZM_MainContent_txtRecruiterID.value))))))))),l.a.createElement("div",{className:"kyc-card row"},l.a.createElement("div",{className:"col-md-12"},l.a.createElement(tr.a,{defaultActiveKey:"0"},l.a.createElement(an.a,null,l.a.createElement(tr.a.Toggle,{style:{backgroundColor:"#3D3E53",color:"white",fontSize:18},as:an.a.Header,eventKey:"0",onClick:function(){return e.handleToggle("OwnerPerson")}},"Owner Person",l.a.createElement(nr.a,{className:this.state.ownerPerson_arr?"arrow-icon down":"arrow-icon",size:"15"})),l.a.createElement(tr.a.Collapse,{eventKey:"0"},l.a.createElement(an.a.Body,{className:"no-padding"},l.a.createElement("div",{className:"row",style:{marginRight:0,marginLeft:0,marginBottom:10}},l.a.createElement("div",{className:"col-md-3"},l.a.createElement("p",{class:"no-margin viewCus_label"},"First Name"),l.a.createElement("p",{class:"no-margin viewCus_labelVal"},this.props.data.owner_person.first_name.value)),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("p",{class:"no-margin viewCus_label"},"Last Name"),l.a.createElement("p",{class:"no-margin viewCus_labelVal"},this.props.data.owner_person.last_name.value)),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("p",{class:"no-margin viewCus_label"},"DOB"),l.a.createElement("p",{class:"no-margin viewCus_labelVal"},this.props.data.owner_person.dob.value)),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("p",{class:"no-margin viewCus_label"},"Gender"),l.a.createElement("p",{class:"no-margin viewCus_labelVal"},pe(this.props.data.owner_person.gender.value))),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("p",{class:"no-margin viewCus_label"},"Email ID"),l.a.createElement("p",{class:"no-margin viewCus_labelVal"},this.props.data.owner_person.email_id.value)),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("p",{class:"no-margin viewCus_label"},"Whatsapp"),l.a.createElement("p",{class:"no-margin viewCus_labelVal"},this.props.data.owner_person.whatsapp.value)),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("p",{class:"no-margin viewCus_label"},"National ID"),l.a.createElement("p",{class:"no-margin viewCus_labelVal"},this.props.data.owner_person.national_id.value))),l.a.createElement("div",{className:"row no-margin"},l.a.createElement("div",{className:"col-md-3"},l.a.createElement("div",{className:"d-flex align-items-center justify-content-around pAlign_mid"},l.a.createElement("p",{class:"no-margin viewCus_label no-padding"},"Passport Size Photo"),l.a.createElement(lr,{className:"img-fluid",image_path:De(this.props.data.owner_person.photo_pps_full_path.value,this.props.data.owner_person.photo_pps.value),file_name:this.props.data.owner_person.photo_pps.value}))),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("div",{className:"d-flex align-items-center justify-content-around pAlign_mid"},l.a.createElement("p",{class:"no-margin viewCus_label no-padding"},"National ID Photo"),l.a.createElement(lr,{className:"img-fluid",image_path:De(this.props.data.owner_person.photo_national_id_full_path.value,this.props.data.owner_person.photo_national_id.value),file_name:this.props.data.owner_person.photo_national_id.value}))),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("div",{className:"d-flex align-items-center justify-content-around pAlign_mid"},l.a.createElement("p",{class:"no-margin viewCus_label no-padding"},"National ID Back Photo"),l.a.createElement(lr,{className:"img-fluid",image_path:De(this.props.data.owner_person.photo_national_id_back_full_path.value,this.props.data.owner_person.photo_national_id_back.value),file_name:this.props.data.owner_person.photo_national_id_back.value}))),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("div",{className:"d-flex align-items-center justify-content-around pAlign_mid"},l.a.createElement("p",{class:"no-margin viewCus_label no-padding"},"Selfie Photo"),l.a.createElement(lr,{className:"img-fluid",image_path:De(this.props.data.owner_person.photo_selfie_full_path.value,this.props.data.owner_person.photo_selfie.value),file_name:this.props.data.owner_person.photo_selfie.value})))),this.props.data.allow_manual_capture&&"50_pending_audit"==this.props.lead_data.status&&l.a.createElement("div",{className:"row justify-content-center",style:{marginTop:20,backgroundColor:"white"}},l.a.createElement("div",{className:"col-md-12",style:{backgroundColor:"rgba(255, 0, 0, .4)"}},l.a.createElement("p",{style:{color:"#01062c",fontSize:"14px",marginBottom:5,padding:5},class:"text-center"},"NOTE"),l.a.createElement("p",{style:{color:"#01062c",fontSize:"12px"},class:" text-center"},"Flow app was not able to extract text from the National ID and RM typed the data fields from National ID manually. ",l.a.createElement("br",null),"  If both are not matching, please re-assign back to RM and ask to correct it."))))))))),0==this.props.data.same_as_owner_person&&l.a.createElement("div",{className:"kyc-card row"},l.a.createElement("div",{className:"col-md-12"},l.a.createElement(tr.a,{defaultActiveKey:"0"},l.a.createElement(an.a,null,l.a.createElement(tr.a.Toggle,{style:{backgroundColor:"#3D3E53",color:"white",fontSize:18},as:an.a.Header,eventKey:"0",onClick:function(){return e.handleToggle("ContactPerson")}},"Contact Person",l.a.createElement(nr.a,{className:this.state.contactPerson_arr?"arrow-icon down":"arrow-icon",size:"15"})),l.a.createElement(tr.a.Collapse,{eventKey:"0"},l.a.createElement(an.a.Body,{className:"no-padding"},l.a.createElement("div",{className:"row",style:{marginRight:0,marginLeft:0,marginBottom:15}},l.a.createElement("div",{className:"col-md-3"},l.a.createElement("p",{class:"no-margin viewCus_label"},"First Name"),l.a.createElement("p",{class:"no-margin viewCus_labelVal"},this.props.data.contact_persons[0].first_name.value)),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("p",{class:"no-margin viewCus_label"},"Last Name"),l.a.createElement("p",{class:"no-margin viewCus_labelVal"},this.props.data.contact_persons[0].last_name.value)),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("p",{class:"no-margin viewCus_label"},"DOB"),l.a.createElement("p",{class:"no-margin viewCus_labelVal"},this.props.data.contact_persons[0].dob.value)),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("p",{class:"no-margin viewCus_label"},"Gender"),l.a.createElement("p",{class:"no-margin viewCus_labelVal"},this.props.data.contact_persons[0].gender.value)),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("p",{class:"no-margin viewCus_label"},"National ID"),l.a.createElement("p",{class:"no-margin viewCus_labelVal"},this.props.data.contact_persons[0].national_id.value)),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("p",{class:"no-margin viewCus_label"},"Email ID"),l.a.createElement("p",{class:"no-margin viewCus_labelVal"},this.props.data.contact_persons[0].email_id.value)),this.props.data.contact_persons[0].mobile_num&&l.a.createElement("div",{className:"col-md-3"},l.a.createElement("p",{class:"no-margin viewCus_label"},"Mobile Number"),l.a.createElement("p",{class:"no-margin viewCus_labelVal"},this.props.data.contact_persons[0].mobile_num.value)),this.props.data.contact_persons[0].alt_biz_mobile_num_1&&l.a.createElement("div",{className:"col-md-3"},l.a.createElement("p",{class:"no-margin viewCus_label"},"Mobile Number 1"),l.a.createElement("p",{class:"no-margin viewCus_labelVal"},this.props.data.contact_persons[0].alt_biz_mobile_num_1.value)),this.props.data.contact_persons[0].alt_biz_mobile_num_2&&l.a.createElement("div",{className:"col-md-3"},l.a.createElement("p",{class:"no-margin viewCus_label"},"Mobile Number 2"),l.a.createElement("p",{class:"no-margin viewCus_labelVal"},this.props.data.contact_persons[0].alt_biz_mobile_num_2.value)),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("p",{class:"no-margin viewCus_label"},"Whatsapp"),l.a.createElement("p",{class:"no-margin viewCus_labelVal"},this.props.data.contact_persons[0].whatsapp.value)),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("p",{class:"no-margin viewCus_label"},"Handling Biz Since"),l.a.createElement("p",{class:"no-margin viewCus_labelVal"},this.props.data.contact_persons[0].handling_biz_since.value)),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("p",{class:"no-margin viewCus_label"},"Relation with Owner"),l.a.createElement("p",{class:"no-margin viewCus_labelVal"},this.props.data.contact_persons[0].relation_with_owner.value))),l.a.createElement("div",{className:"row no-margin"},l.a.createElement("div",{className:"col-md-3"},l.a.createElement("div",{className:"d-flex align-items-center justify-content-around pAlign_mid"},l.a.createElement("p",{class:"no-margin viewCus_label no-padding"},"National ID Photo"),l.a.createElement(lr,{className:"img-fluid",image_path:De(this.props.data.contact_persons[0].photo_national_id_full_path.value,this.props.data.contact_persons[0].photo_national_id.value),file_name:this.props.data.contact_persons[0].photo_national_id.value}))),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("div",{className:"d-flex align-items-center justify-content-around pAlign_mid"},l.a.createElement("p",{class:"no-margin viewCus_label no-padding"},"National ID Back Photo"),l.a.createElement(lr,{className:"img-fluid",image_path:De(this.props.data.contact_persons[0].photo_national_id_back_full_path.value,this.props.data.contact_persons[0].photo_national_id_back.value),file_name:this.props.data.contact_persons[0].photo_national_id_back.value}))),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("div",{className:"d-flex align-items-center justify-content-around pAlign_mid"},l.a.createElement("p",{class:"no-margin viewCus_label no-padding"},"Selfie Photo"),l.a.createElement(lr,{className:"img-fluid",image_path:De(this.props.data.contact_persons[0].photo_selfie_full_path.value,this.props.data.contact_persons[0].photo_selfie.value),file_name:this.props.data.contact_persons[0].photo_selfie.value}))),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("div",{className:"d-flex align-items-center justify-content-around pAlign_mid"},l.a.createElement("p",{class:"no-margin viewCus_label no-padding"},"Passport Size Photo"),l.a.createElement(lr,{className:"img-fluid",image_path:De(this.props.data.contact_persons[0].photo_pps_full_path.value,this.props.data.contact_persons[0].photo_pps.value),file_name:this.props.data.contact_persons[0].photo_pps.value})))))))))),this.props.lead_data.acc_purpose.includes("terminal_financing")&&l.a.createElement("div",{className:"kyc-card row"},l.a.createElement("div",{className:"col-md-12"},l.a.createElement(tr.a,{defaultActiveKey:"0"},l.a.createElement(an.a,null,l.a.createElement(tr.a.Toggle,{style:{backgroundColor:"#3D3E53",color:"white",fontSize:18},as:an.a.Header,eventKey:"0",onClick:function(){return e.handleToggle("References")}},"References",l.a.createElement(nr.a,{className:this.state.references_arr?"arrow-icon down":"arrow-icon",size:"15"})),l.a.createElement(tr.a.Collapse,{eventKey:"0"},l.a.createElement(an.a.Body,{className:"no-padding"},l.a.createElement("div",{className:"row",style:{marginRight:0,marginLeft:0,marginBottom:15}},l.a.createElement("div",{className:"col-md-4"},l.a.createElement("p",{class:"no-margin viewCus_label"},"Guarantor 1 Name"),l.a.createElement("p",{class:"no-margin viewCus_labelVal"},this.props.data.references[0].guarantor1_name.value)),l.a.createElement("div",{className:"col-md-4"},l.a.createElement("p",{class:"no-margin viewCus_label"},"Guarantor 2 Name"),l.a.createElement("p",{class:"no-margin viewCus_labelVal"},this.props.data.references[1].guarantor2_name.value)),l.a.createElement("div",{className:"col-md-4"},l.a.createElement("p",{class:"no-margin viewCus_label"},"LC Name"),l.a.createElement("p",{class:"no-margin viewCus_labelVal"},this.props.data.references[2].lc_name.value)),l.a.createElement("div",{className:"col-md-4"},l.a.createElement("div",{className:"d-flex align-items-center justify-content-around pAlign_mid"},l.a.createElement("p",{class:"no-margin viewCus_label no-padding"},"Guarantor 1 Doc"),l.a.createElement(lr,{className:"img-fluid",image_path:De(this.props.data.references[0].guarantor1_doc_full_path.value,this.props.data.references[0].guarantor1_doc.value),file_name:this.props.data.references[0].guarantor1_doc.value}))),l.a.createElement("div",{className:"col-md-4"},l.a.createElement("div",{className:"d-flex align-items-center justify-content-around pAlign_mid"},l.a.createElement("p",{class:"no-margin viewCus_label no-padding"},"Guarantor 2 Doc"),l.a.createElement(lr,{className:"img-fluid",image_path:De(this.props.data.references[1].guarantor2_doc_full_path.value,this.props.data.references[1].guarantor2_doc.value),file_name:this.props.data.references[1].guarantor2_doc.value}))),l.a.createElement("div",{className:"col-md-4"},l.a.createElement("div",{className:"d-flex align-items-center justify-content-around pAlign_mid"},l.a.createElement("p",{class:"no-margin viewCus_label no-padding"},"Letter from LC"),l.a.createElement(lr,{className:"img-fluid",image_path:De(this.props.data.references[2].lc_doc_full_path.value,this.props.data.references[2].lc_doc.value),file_name:this.props.data.references[2].lc_doc.value})))))))))),l.a.createElement("div",{className:"kyc-card row"},l.a.createElement("div",{className:"col-md-12"},l.a.createElement(tr.a,{defaultActiveKey:"0"},l.a.createElement(an.a,null,l.a.createElement(tr.a.Toggle,{style:{backgroundColor:"#3D3E53",color:"white",fontSize:18},as:an.a.Header,eventKey:"0",onClick:function(){return e.handleToggle("Consent")}},"Data Consent",l.a.createElement(nr.a,{className:this.state.consent_arr?"arrow-icon down":"arrow-icon",size:"15"})),l.a.createElement(tr.a.Collapse,{eventKey:"0"},l.a.createElement(an.a.Body,{className:"no-padding"},l.a.createElement("div",{className:"row",style:{marginRight:0,marginLeft:0,marginBottom:15}},l.a.createElement("div",{className:"col-md-12"},l.a.createElement("div",{className:"row no-margin justify-content-around"},l.a.createElement("div",{className:"col-md-4"},l.a.createElement("p",{class:"no-margin viewCus_label"},"Consent Signed Date"),l.a.createElement("p",{class:"no-margin viewCus_labelVal"},ve(this.props.lead_data.consent_signed_date))),l.a.createElement("div",{className:"col-md-4"},l.a.createElement("p",{class:"no-margin viewCus_label"},"View PDF"),l.a.createElement("span",null,l.a.createElement(lt.a,{onClick:function(){e.handlePdfModal(e.props.lead_data.consent_json.signed_consent_path,"Data Consent PDF")}},"View")))))))))))),l.a.createElement("div",{className:"kyc-card row"},l.a.createElement("div",{className:"col-md-12"},l.a.createElement(tr.a,{defaultActiveKey:"0"},l.a.createElement(an.a,null,l.a.createElement(tr.a.Toggle,{style:{backgroundColor:"#3D3E53",color:"white",fontSize:18},as:an.a.Header,eventKey:"0",onClick:function(){return e.handleToggle("Agreements")}},"Agreements",l.a.createElement(nr.a,{className:this.state.aggreements_arr?"arrow-icon down":"arrow-icon",size:"15"})),l.a.createElement(tr.a.Collapse,{eventKey:"0"},l.a.createElement(an.a.Body,{className:"no-padding"},l.a.createElement("div",{className:"row",style:{marginRight:0,marginLeft:0,marginBottom:15}},this.props.data.agreements.map(function(t,a){return l.a.createElement("div",{className:"col-md-12"},l.a.createElement("fieldset",{class:"fieldStyle_auditKYC"},l.a.createElement("legend",{class:"w-auto text-labelblue no-margin",style:{fontSize:15}},Ze(t.acc_purpose,"account_purpose")+" Agreement"),l.a.createElement("div",{className:"row no-margin"},l.a.createElement("div",{className:"col-md-4"},l.a.createElement("p",{class:"no-margin viewCus_label"},"Agreement Doc ID"),l.a.createElement("p",{class:"no-margin viewCus_labelVal"},t.aggr_doc_id)),l.a.createElement("div",{className:"col-md-4"},l.a.createElement("p",{class:"no-margin viewCus_label"},"Agreement type"),l.a.createElement("p",{class:"no-margin viewCus_labelVal"},t.aggr_type)),l.a.createElement("div",{className:"col-md-4"},l.a.createElement("p",{class:"no-margin viewCus_label"},"View PDF"),l.a.createElement("span",null,l.a.createElement(lt.a,{onClick:function(){e.handlePdfModal(t.aggr_file_path,"Agreement PDF")}},"View"))))))})))))))))):l.a.createElement("div",null)}}]),t}(ct),sr=function(e){return L("/api/admin/kyc/update_rules",e)},cr=function(e){return L("/api/admin/audit_kyc/cust_reg",e)},or=function(e){return L("/api/admin/audit_kyc/update",e)},ir=function(e){return L("/api/admin/audit_kyc/reject",e)},dr=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={lead:{},to_edit:!1,reassignModal:!1,rejectModal:!1,audit_lead:{},view_cust_id:!1},a.handleKYCEdit=function(e){var t=a.state.audit_lead;t.lead_id=a.id,t.reassign_reason=t.reason,a.validate_fields(t)&&or(a.req(t)).then(function(e){a.resp(e),e&&"success"===e.status&&(alert(e.message),a.setState({to_edit:!0}))})},a.handleReassignModalOpen=function(e){a.setState({reassignModal:!0})},a.handleRejectModalOpen=function(e){a.setState({rejectModal:!0})},a.handleModalClose=function(){a.setState({reassignModal:!1,rejectModal:!1})},a.handleAudit=function(e){e.preventDefault();var t=a.state.lead.cust_reg_json;t.lead_id=a.state.lead.id,t.flow_rel_mgr_id=a.state.lead.flow_rel_mgr_id,t.acc_purpose=a.state.lead.acc_purpose,cr(a.req({lead_id:a.state.lead.id},!0)).then(function(e){a.resp(e),e&&("success"===e.status?(a.setState({cust_id:e.data}),a.setState({toList:!0}),alert(e.message),window.open("/borrower/indiv/view/".concat(a.state.lead.cust_reg_json.cust_id),"_blank"),a.setState({to_edit:!0})):alert(e.message+"\n"+JSON.stringify(e.data)))})},a.handleRejectKYC=function(e){e.preventDefault();var t=a.state.audit_lead;(t.lead_id=a.id,a.validate_fields(t))&&(window.confirm("Are you sure to mark KYC as failed and close the lead?")&&ir(a.req(t)).then(function(e){a.resp(e),e&&("success"===e.status?(alert(e.message),a.setState({to_edit:!0})):alert(e.message+"\n"+JSON.stringify(e.data)))}))},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){var e=this;this.id=this.props.match.params.id,Wl(this.req({id:this.id})).then(function(t){if(e.resp(t),t&&"success"===t.status){var a=t.data,n=!1;a.cust_reg_json.cust_id&&("kyc"==a.type&&a.status>="59"||"re_kyc"==a.type)&&(n=!0),e.setState({lead:a,view_cust_id:n})}})}},{key:"validate_fields",value:function(e){return!(!e.remarks||!e.reason)||(alert("Please enter required fields"),!1)}},{key:"render",value:function(){return b("lead","audit_kyc")?l.a.createElement(l.a.Fragment,null,this.state.to_edit?l.a.createElement(Y.a,{to:"/lead/edit/".concat(this.props.match.params.id)}):l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"container max-width containerTopmargin no-padding",style:{maxWidth:"1500px"}},l.a.createElement(an.a,null,l.a.createElement(an.a.Header,{style:{backgroundColor:"#01062c",color:"white",padding:0}},l.a.createElement("div",{className:"d-flex justify-content-between"},l.a.createElement("h4",{className:"no-margin headerTitle preHeaderpad padL_15"},this.props.title),l.a.createElement("h4",{style:{paddingRight:"15px"},className:"no-margin headerTitle preHeaderpad"},"KYC Audited by : ",this.state.lead.auditor_name," "))),l.a.createElement(an.a.Header,null,l.a.createElement("div",{className:"d-flex justify-content-between"},l.a.createElement("h4",{style:{fontSize:"18px"}},"Type : ",Ze(this.state.lead.type,"lead_type")),l.a.createElement("h4",{style:{fontSize:"18px"}},"Status : ",Ze(this.state.lead.status)))),this.state.view_cust_id||"re_kyc"==this.state.lead.type&&l.a.createElement(an.a.Header,{style:{color:"white"}},l.a.createElement("div",{className:"d-flex justify-content-between"},this.state.view_cust_id?l.a.createElement("h4",{style:{fontSize:"18px"}},"Cust ID : ",l.a.createElement($.a,{to:"/borrower/indiv/view/"+this.state.lead.cust_reg_json.cust_id,target:"_blank"},l.a.createElement("span",{style:{fontSize:"18px"}},this.state.lead.cust_reg_json.cust_id))):l.a.createElement("div",null),"re_kyc"==this.state.lead.type&&l.a.createElement("h4",{style:{fontSize:"18px"}},"Reason : ",Ze(this.state.lead.kyc_reason)))),l.a.createElement(an.a.Body,null,l.a.createElement(rr,{lead_data:this.state.lead,submit_btn:this.state.calling_api,handleKYCEdit:this.handleKYCEdit,handleRejectKYC:this.handleRejectKYC,handleModalClose:this.handleModalClose,lead_id:this.id,id:"audit_lead",reassignModal:this.state.reassignModal,rejectModal:this.state.rejectModal,acc_purpose:this.state.lead.acc_purpose,data:this.state.lead.cust_reg_json,onComponentChange:this.handleComponentChange}),"50_pending_audit"===this.state.lead.status&&l.a.createElement("div",{className:"form-group row reset-margin justify-content-center py-4"},l.a.createElement(lt.a,{className:"btn btn-primary ml-5",disabled:this.state.calling_api,onClick:this.handleModalOpen},"Assign to RM"),this.state.lead.audited_by==g("user_id")&&l.a.createElement(lt.a,{className:"btn btn-primary ml-5",disabled:this.state.calling_api,onClick:this.handleAudit},"Approve KYC"))))))):l.a.createElement(Y.a,{to:"/"})}}]),t}(st),mr=function(e){return L("/api/admin/pre_appr/remove",e)},ur=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={pre_appr:{},columns:[],pre_appr_list:[],pre_appr_table:"hide_div",copy:[]},a.handleRemoveApproval=function(e){0!=window.confirm("Are you sure to remove the Pre-approval")&&mr(a.req({cust_id:e.target.id})).then(function(e){e&&"success"===e.status&&(alert(e.message),window.location.reload())})},a.changeHandler=function(e){var t=e,n=a.state.pre_appr_list.filter(function(e){return null!==e.cust_id&&e.cust_id.toLowerCase().includes(t.toLowerCase())});a.setState(function(e){return e.copy=n})},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){var e,t=this;(e=this.req({list_pre_appr:!0}),L("/api/admin/pre_appr/list",e)).then(function(e){if(t.resp(e),e){if("success"===e.status){t.resp(e);var a=t.state.columns;a=[{Header:"Cust ID",id:"cust_id",accessor:function(e){return l.a.createElement($.a,{to:"/borrower/indiv/view/"+e.cust_id,target:"_blank"},e.cust_id)}},{Header:"Pre-approved By",id:"rm_name",accessor:function(e){return e.rm_name}},{Header:"Approval Count",id:"appr_count",accessor:function(e){return l.a.createElement("div",{className:"tableAmount_centerAlign"},e.appr_count)}},{Header:"Approval Start Date",id:"appr_start_date",accessor:function(e){return ge(e.appr_start_date)}},{Header:"Approval Expiry Date",id:"appr_exp_date",accessor:function(e){return ge(e.appr_exp_date)}},{Header:"Status",id:"status",accessor:function(e){return Ze(e.status)}},{Header:"Action",id:"id",accessor:function(e){return l.a.createElement("input",{id:e.cust_id,type:"button",value:"Remove Pre-approval",onClick:t.handleRemoveApproval,className:"btn btn-primary btn-std ".concat(t.configure_btn_style)})}}]}t.setState({columns:a,pre_appr_list:e.data,copy:e.data,pre_appr_table:"show_div"})}})}},{key:"render",value:function(){var e=this;return l.a.createElement("div",{className:"container containerTopmargin max-width no-padding"},l.a.createElement("div",null,l.a.createElement("h5",{className:"no-margin headerTitle"},"Pre-approved Customers"),this.state.pre_appr_list.length>0&&l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"d-flex justify-content-between align-items-center",style:{padding:5}},l.a.createElement("p",{className:"no-margin text-white"},l.a.createElement("b",null,"Total Entries : ",this.state.pre_appr_list.length)),l.a.createElement("div",{style:{position:"relative"}},l.a.createElement("i",{class:"fa-solid fa-magnifying-glass search_pos"}),l.a.createElement("input",{placeholder:"Search here",className:"search_posInput",onChange:function(t){return e.changeHandler(t.target.value)}}))),l.a.createElement(ua,{showPag:!0,minRow:0,row_data:void 0!==this.state.copy?this.state.copy:[],column_data:this.state.columns,resizable:!1,defaultSorted:[{id:"name",desc:!1}],exportCSV:!0,csvFile:"Pre-approved Customers",csvData:this.state.copy?this.state.copy:[]}))))}}]),t}(st);function _r(){var e=Object(n.useState)(!1),t=Object(ea.a)(e,2),a=t[0],r=t[1],s=Object(n.useState)(!1),c=Object(ea.a)(s,2),o=c[0],i=c[1],d=Object(n.useState)("Select the year"),m=Object(ea.a)(d,2),u=m[0],_=m[1],p=Object(n.useState)({start_date:null,end_date:null}),h=Object(ea.a)(p,2),v=h[0],g=h[1],f="/api/admin";console.log(f);var E=function(e){"openModalbySelect"===e?r(!0):"openModalbyYear"===e?i(!0):(i(!1),r(!1))},b=function(){var e=Object(F.a)(D.a.mark(function e(){var t;return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r(!1),t=H(f+"/report/disbursal_time_report",{date_range:v}),console.log(t<"response after clicked");case 3:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();console.log(u,"Selected year"),console.log(v,"date_range is ");var y=function(e,t){var a=re()(e).format("YYYY-MM-DD");g(Object(Z.a)({},v,Object(S.a)({},t,a)))};return l.a.createElement("div",{className:"container containerTopmargin max-width no-padding"},l.a.createElement("div",{class:"btn-group",role:"group","aria-label":"Basic mixed styles example"},l.a.createElement("button",{type:"button",class:"btn btn-danger"},"Today"),l.a.createElement("button",{type:"button",class:"btn btn-warning"},"Yesterday"),l.a.createElement("button",{type:"button",class:"btn btn-success"},"By Weeks"),l.a.createElement("button",{type:"button",class:"btn btn-info"},"By Months"),l.a.createElement("button",{type:"button",class:"btn btn-default",onClick:function(){return E("openModalbyYear")}},"By Year"),l.a.createElement("button",{type:"button",class:"btn btn-primary",onClick:function(){return E("openModalbySelect")}},"Select From")),l.a.createElement("div",{className:"table-responsive"}),l.a.createElement(nt.a,{show:a,onHide:function(){return E("closeModal")}},l.a.createElement(nt.a.Header,{closeButton:!0},l.a.createElement(nt.a.Title,null,l.a.createElement("h3",null,"Select the date range"))),l.a.createElement(nt.a.Body,null,l.a.createElement("div",{className:"container"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-6"},l.a.createElement("label",{className:"no-margin"},"From"),l.a.createElement(Ft.a,{closeOnSelect:!0,dateFormat:"DD MMM YYYY",timeFormat:!1,required:"required",onChange:function(e){return y(e,"start_date")}})),l.a.createElement("div",{className:"col-6"},l.a.createElement("label",{className:"no-margin"},"To"),l.a.createElement(Ft.a,{closeOnSelect:!0,dateFormat:"DD MMM YYYY",timeFormat:!1,required:"required",onChange:function(e){return y(e,"end_date")}}))))),l.a.createElement(nt.a.Footer,null,l.a.createElement(lt.a,{variant:"primary",onClick:function(){return b()}},"Search"),l.a.createElement(lt.a,{style:{marginLeft:10},onClick:function(){return E("closeModal")},variant:"secondary"},"Close"))),l.a.createElement(nt.a,{show:o,onHide:function(){return E("closeModal")}},l.a.createElement(nt.a.Header,{closeButton:!0},l.a.createElement(nt.a.Title,null,l.a.createElement("h3",null,"Select the year"))),l.a.createElement(nt.a.Body,null,l.a.createElement("div",{className:"container"},l.a.createElement("div",{className:"row justify-content-around"},l.a.createElement("div",{className:"col-6"},l.a.createElement("select",{id:"cs_model_code",className:"form-control",required:"required",onChange:function(e){return function(e){_(e)}(e.target.value)},value:u},l.a.createElement("option",{value:"2020"},"2020"),l.a.createElement("option",{value:"2021"},"2021"),l.a.createElement("option",{value:"2022"},"2022")))))),l.a.createElement(nt.a.Footer,null,l.a.createElement(lt.a,{variant:"primary",onClick:function(){return b()}},"Search"),l.a.createElement(lt.a,{style:{marginLeft:10},onClick:function(){return E("closeModal")},variant:"secondary"},"Close"))))}function pr(){var e=Object(n.useState)([]),t=Object(ea.a)(e,2),a=t[0],r=t[1],s=Object(n.useState)([]),c=Object(ea.a)(s,2),o=c[0],i=c[1],d=Object(n.useState)(!0),m=Object(ea.a)(d,2),u=m[0],_=m[1],p=Object(n.useState)({country:"Uganda",country_code:"UGA"}),h=Object(ea.a)(p,2),v=h[0],f=h[1],E=Object(n.useState)({active_currency:""}),b=Object(ea.a)(E,2),y=b[0],N=b[1],w=Object(n.useState)({currency_change:!1,active_currency:"",active_currency_val:""}),C=Object(ea.a)(w,2),k=C[0],x=C[1];console.log(k,"active currency is now");var A=Object(n.useState)({}),O=Object(ea.a)(A,2),j=O[0],D=O[1],F=Object(n.useState)(null),M=Object(ea.a)(F,2),P=M[0],B=M[1],L=Object(n.useState)("Float Advance"),T=Object(ea.a)(L,2),R=(T[0],T[1],Object(n.useState)([])),H=Object(ea.a)(R,2),q=H[0],I=H[1];Object(n.useEffect)(function(){var e,t;f((e={},Object(S.a)(e,"country",g("market").country),Object(S.a)(e,"country_code",g("market").country_code),e)),x((t={},Object(S.a)(t,"currency_change","UGA"!==g("market").country_code&&"RWA"!==g("market").country_code),Object(S.a)(t,"active_currency",g("market").currency_code),Object(S.a)(t,"active_currency_val",""),t));var a={report_type:"management_dashboard_live",time_zone:g("market").time_zone};rl(a).then(function(e){if("success"===e.status){console.log(e,"response,,,"),r(e.data.records);var t=e.data.currency_data;D(t),N(Object(S.a)({},"active_currency",t[g("market").country_code].currency_code));var a=e.data.records.filter(function(e){return e.country_code===g("market").country_code}).filter(function(e){return null===e.acc_prvdr_code});i(a)}});var n={country_code:g("market").country_code,time_zone:g("market").time_zone,status:""};un(Object(Z.a)({},n,{status:"enabled",biz_account:!0})).then(function(e){if(e&&"success"===e.status){var t=[];e.data.list.map(function(e){return t.push(e.acc_prvdr_code)}),I(t)}})},[r,un]),console.log(a,P,o,"filted data,*********");var z=g("market_list"),W=function(e){_(!1),B(e);var t=a.filter(function(e){return e.country_code===v.country_code}).filter(function(t){return t.acc_prvdr_code===e});i(t)},V=function(e){var t;if("USD"===e||"EUR"===e)x((t={},Object(S.a)(t,"currency_change",!0),Object(S.a)(t,"active_currency",e),Object(S.a)(t,"active_currency_val",j[v.country_code].forex_rates[e]),t));else if("UGX"===e||"RWF"===e){var a;x((a={},Object(S.a)(a,"currency_change",!1),Object(S.a)(a,"active_currency",e),Object(S.a)(a,"active_currency_val",""),a))}};return 0===o.length||"super_admin"!==g("role_codes")&&"it_admin"!==g("role_codes")?l.a.createElement("div",null,"Loading..."):l.a.createElement("div",{className:"containerTopmargin max-width no-padding",id:"convertPDF"},l.a.createElement("div",{style:{backgroundColor:"#1a2035"},className:"manage_dashContainer"},l.a.createElement("div",{className:"row no-margin align-items-center"},l.a.createElement("div",{className:"col-md-8 no-padding"},l.a.createElement(Be,{val:o[0].report_date})),l.a.createElement("div",{className:"col-md-4 no-padding d-flex justify-content-end"},"/management-dashboard/print"===window.location.pathname?l.a.createElement("div",null,l.a.createElement("button",{className:"btn-std",style:{borderRadius:5,border:"none",backgroundColor:"#fff"},onClick:function(){return window.print()}},"Export to PDF"),l.a.createElement($.a,{to:"/management-dashboard",className:"btn-std",style:{marginLeft:15,borderRadius:5,border:"none",backgroundColor:"#fff"}},"Back")):l.a.createElement($.a,{className:"btn-std",style:{marginLeft:15,borderRadius:5,border:"none",backgroundColor:"#fff"},to:"/management-dashboard/print"},"To Full Page"))),l.a.createElement("div",{className:"row no-margin"},l.a.createElement("div",{className:"col-md-3 no-padding"},l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("div",null,l.a.createElement("label",{className:"no-margin"},"Market")),l.a.createElement("div",{className:"dropdown country_dropDownbg",style:{marginLeft:30}},l.a.createElement("div",{className:"dropdown-toggle d-flex align-items-center dropdown_trig justify-content-between",type:"button",id:"dropdownMenuButton1","data-bs-toggle":"dropdown","aria-expanded":"false"},l.a.createElement(te.a,{id:"market",name:v.country_code,format:"png",pngSize:48,shiny:!1,alt:v.country_code,basePath:"/img/flags"}),l.a.createElement("span",null,v.country),l.a.createElement("span",null,l.a.createElement("i",{className:"fa-solid fa-chevron-down"}))),l.a.createElement("ul",{className:"dropdown-menu","aria-labelledby":"dropdownMenuButton1",style:{width:160}},z.map(function(e,t){return l.a.createElement("li",{key:t,className:"country_selector",onClick:function(){return function(e,t){var n,l;_(!0),B(null),x((n={},Object(S.a)(n,"currency_change","UGA"!==e&&"RWA"!==e),Object(S.a)(n,"active_currency",j[e].currency_code),Object(S.a)(n,"active_currency_val",""),n));var r={country_code:e,time_zone:"UGA"===e?"EAT":"CAT",status:""};un(Object(Z.a)({},r,{status:"enabled",biz_account:!0})).then(function(e){if(e&&"success"===e.status){var t=[];e.data.list.map(function(e){return t.push(e.acc_prvdr_code)}),I(t)}}),f((l={},Object(S.a)(l,"country",t),Object(S.a)(l,"country_code",e),l));var s=j[e].currency_code;N(Object(S.a)({},"active_currency",s)),console.log(v,s);var c=a.filter(function(t){return t.country_code===e}).filter(function(e){return null===e.acc_prvdr_code});i(c)}(e.country_code,e.country)}},l.a.createElement(te.a,{id:"market",name:e.country_code,format:"png",pngSize:48,shiny:!1,alt:e.country_code,basePath:"/img/flags"}),l.a.createElement("span",{style:{paddingLeft:5}},e.country))}))))),l.a.createElement("div",{className:"col-md-7 no-padding d-flex align-items-center justify-content-end"},l.a.createElement("p",{className:"no-margin text-white",style:{fontWeight:600}},""===k.active_currency_val?"":"1 ".concat(k.active_currency," ="),"\xa0"),l.a.createElement("p",{className:"no-margin text-white",style:{fontWeight:600}},""===k.active_currency_val?"":Number(1/k.active_currency_val).toFixed(3),"\xa0",""===k.active_currency_val?"":j[v.country_code].currency_code)),l.a.createElement("div",{className:"col-md-2 no-padding"},l.a.createElement("ul",{className:"manDash_currencySelector no-padding no-margin justify-content-end align-items-center"},l.a.createElement("li",{className:"border_left",style:{backgroundColor:"USD"===k.active_currency?"lightgray":""},onClick:function(){return V("USD")}},l.a.createElement("p",{className:"no-margin"},"USD")),l.a.createElement("li",{style:{backgroundColor:"EUR"===k.active_currency?"lightgray":""},onClick:function(){return V("EUR")}},l.a.createElement("p",{className:"no-margin"},"EUR")),l.a.createElement("li",{style:{backgroundColor:k.active_currency===y.active_currency?"lightgray":""},className:"border_right",onClick:function(){return V(y.active_currency)}},l.a.createElement("p",{className:"no-margin"},y.active_currency))))),l.a.createElement("div",{className:"row no-margin justify-content-between",style:{paddingBottom:15,paddingTop:15}},l.a.createElement("div",{className:"col-md-8 no-padding"},l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("label",{className:"no-margin",style:{paddingRight:15}},"Provider"),l.a.createElement("button",{className:"filterBtns allBtn_size ".concat(null===P?"":"opac_50"),style:{height:30,width:60,cursor:u?"pointer":"default",marginRight:15},key:0,onClick:function(){return W(null)}},"ALL"),q.map(function(e,t){return l.a.createElement("div",{style:{height:30,width:60,cursor:u?"pointer":"default",marginRight:15},className:null===P||P===e?"":"opac_50",key:t,onClick:function(){return W(e)}},l.a.createElement("img",{className:"img-fluid",src:"/img/".concat(e,"_logo_color.png"),alt:e}))}))),l.a.createElement("div",{className:"col-md-4 no-padding d-flex justify-content-around align-items-center"}))),l.a.createElement("div",{className:"manDash_main"},l.a.createElement("div",{className:"manDash_bgAbs"}),l.a.createElement("div",null,l.a.createElement("div",{className:"manDash_contentBox"},l.a.createElement("div",{className:"manDash_content"},l.a.createElement("p",{className:"no-margin manDash_header"},"Business Volume"),l.a.createElement("div",{className:"row no-margin"},l.a.createElement("div",{className:"col-md-6"},l.a.createElement("div",{className:"manDash_roundBox"},l.a.createElement("p",{className:"no-margin text-center"},"Loans Disbursed"),l.a.createElement(Pe,{val:o[0].tot_disb_fas,unit:"",align_center:!0,position:"top"}))),l.a.createElement("div",{className:"col-md-6"},l.a.createElement("div",{className:"manDash_roundBox"},l.a.createElement("p",{className:"no-margin text-center"},"Amount Disbursed"),l.a.createElement(Pe,{val:k.currency_change?o[0].tot_disb_amt*k.active_currency_val:o[0].tot_disb_amt,unit:k.active_currency,align_center:!0,position:"top"}))),l.a.createElement("div",{className:"col-md-6"},l.a.createElement("div",{className:"manDash_roundBox"},l.a.createElement("p",{className:"no-margin text-center"},"Average Loan Size"),l.a.createElement(Pe,{val:k.currency_change?o[0].avg_fa_size*k.active_currency_val:o[0].avg_fa_size,unit:k.active_currency,align_center:!0,position:"top"}))),l.a.createElement("div",{className:"col-md-6"},l.a.createElement("div",{className:"manDash_roundBox"},l.a.createElement("p",{className:"no-margin text-center"},"Average Loan Duration"),l.a.createElement(Pe,{val:o[0].avg_fa_duration,unit:"Days",align_center:!0,position:"top"}))),l.a.createElement("div",{className:"col-md-6"},l.a.createElement("div",{className:"manDash_roundBox"},l.a.createElement("p",{className:"no-margin text-center"},"Gross Transaction Value"),l.a.createElement(Pe,{val:k.currency_change?o[0].gross_txn_value*k.active_currency_val:o[0].gross_txn_value,unit:k.active_currency,align_center:!0,position:"top"}))),l.a.createElement("div",{className:"col-md-6"},l.a.createElement("div",{className:"manDash_roundBox",style:{position:"relative"}},l.a.createElement("p",{className:"no-margin text-center"},"Revenue"),l.a.createElement("div",{style:{position:"absolute",top:5,right:5}},l.a.createElement(Pe,{val:"This includes the penalty",unit:"",align_center:!0,position:"top",notify:!0})),l.a.createElement(Pe,{val:k.currency_change?o[0].revenue*k.active_currency_val:o[0].revenue,unit:k.active_currency,align_center:!0,position:"top"}))))),l.a.createElement("div",{className:"manDash_content white_bg"},l.a.createElement("p",{className:"no-margin manDash_header white_bg"},"Impact"),l.a.createElement("div",{className:"d-flex justify-content-around",style:{marginTop:15}},l.a.createElement("div",null,l.a.createElement("span",null,"Male - ",(100*o[0].male_perc).toFixed(1),"%")),l.a.createElement("div",null,l.a.createElement("span",null,"Female - ",(100*o[0].female_perc).toFixed(1),"%")),l.a.createElement("div",null,l.a.createElement("span",null,"Youth - ",(100*o[0].youth_perc).toFixed(1),"%"))),l.a.createElement("div",{className:"row",style:{marginTop:15,marginBottom:15,marginLeft:0,marginRight:0}},l.a.createElement("div",{className:"col-md-4"},l.a.createElement(Pe,{val:o[0].supported_custs,unit:"",position:"left"})),l.a.createElement("div",{className:"col-md-8"},l.a.createElement("span",null,"Supported businesses"))),l.a.createElement("div",{className:"row",style:{marginTop:15,marginBottom:15,marginLeft:0,marginRight:0}},l.a.createElement("div",{className:"col-md-4"},l.a.createElement(Pe,{val:k.currency_change?o[0].tot_retail_txn_val*k.active_currency_val:o[0].tot_retail_txn_val,unit:k.active_currency,position:"left"})),l.a.createElement("div",{className:"col-md-8"},l.a.createElement("span",null,"Amount of retail txns facilitated"))),l.a.createElement("div",{className:"row",style:{marginTop:15,marginBottom:15,marginLeft:0,marginRight:0}},l.a.createElement("div",{className:"col-md-4"},l.a.createElement(Pe,{val:k.currency_change?o[0].cust_revenue*k.active_currency_val:o[0].cust_revenue,unit:k.active_currency,position:"left"})),l.a.createElement("div",{className:"col-md-8"},l.a.createElement("span",null,"Revenue generated monthly"))),l.a.createElement("div",{className:"row",style:{marginTop:15,marginBottom:15,marginLeft:0,marginRight:0}},l.a.createElement("div",{className:"col-md-4"},l.a.createElement(Pe,{val:o[0].tot_retail_txn_count,unit:"",position:"left"})),l.a.createElement("div",{className:"col-md-8"},l.a.createElement("span",null,"No. of retail txns facilitated"))),l.a.createElement("div",{className:"row",style:{marginTop:15,marginBottom:15,marginLeft:0,marginRight:0}},l.a.createElement("div",{className:"col-md-4"},l.a.createElement(Pe,{val:o[0].people_benefited,unit:"",position:"left"})),l.a.createElement("div",{className:"col-md-8"},l.a.createElement("span",null,"No. of retail users benifited"))))),l.a.createElement("div",{className:"cust_metrics"},l.a.createElement("p",{className:"no-margin manDash_header"},"Customer Metrics"),l.a.createElement("div",{className:"row no-margin align-items-center d-flex justify-content-between p-3",style:{paddingBottom:15}},l.a.createElement("div",{className:"col-md-3"},l.a.createElement("div",{className:"manDash_roundBox"},l.a.createElement("p",{className:"no-margin text-center"},"Registered  Customers"),l.a.createElement("p",{className:"no-margin text-center",style:{fontWeight:600}},o[0].reg_count))),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("div",{className:"manDash_roundBox"},l.a.createElement("p",{className:"no-margin text-center"},"Enabled Customers"),l.a.createElement("div",{className:"row no-margin"},l.a.createElement("div",{className:"boderSeprator col-md-6"},l.a.createElement("p",{className:"no-margin text-right",style:{fontWeight:600}},o[0].enable_count),l.a.createElement("p",{className:"no-margin text-right"},(o[0].enable_count/(o[0].reg_count/100)).toFixed(1),"%")),l.a.createElement("div",{className:"col-md-6"},l.a.createElement("p",{className:"  no-margin text-gray",style:{fontWeight:600}},o[0].reg_count-o[0].enable_count),l.a.createElement("p",{className:"no-margin text-gray"},((o[0].reg_count-o[0].enable_count)/(o[0].reg_count/100)).toFixed(1),"%"))))),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("div",{className:"manDash_roundBox",style:{position:"relative"}},l.a.createElement("p",{className:"no-margin text-center"},"Active Customers"),l.a.createElement("div",{className:"row no-margin"},l.a.createElement("div",{className:"boderSeprator col-md-6"},l.a.createElement("p",{className:"no-margin text-right",style:{fontWeight:600}},o[0].active_count),l.a.createElement("p",{className:"no-margin text-right"},(o[0].active_count/(o[0].reg_count/100)).toFixed(1),"%")),l.a.createElement("div",{className:"col-md-6"},l.a.createElement("p",{className:"no-margin text-gray",style:{fontWeight:600}},o[0].reg_count-o[0].active_count),l.a.createElement("p",{className:"no-margin text-gray"},((o[0].reg_count-o[0].active_count)/(o[0].reg_count/100)).toFixed(1),"%"))),l.a.createElement("div",{style:{position:"absolute",top:5,right:5}},l.a.createElement(Pe,{val:"This only includes customers who have had a disbursal made to them over the last 30 days.",unit:"",align_center:!0,position:"top",notify:!0})))))),l.a.createElement("div",{className:"cust_metrics"},l.a.createElement("p",{className:"no-margin manDash_header"},"Portfolio Performance"),l.a.createElement("p",{className:"no-margin manDash_subHeader"},"Outstanding Portfolio"),l.a.createElement("div",{className:"row manDash_subContent"},l.a.createElement("div",{className:"col-md-4 custMetricsbox_pad"},l.a.createElement("p",{className:"no-margin"},"Principal"),l.a.createElement(Pe,{val:k.currency_change?o[0].principal_os*k.active_currency_val:o[0].principal_os,unit:k.active_currency,align_center:!1,position:"left"})),l.a.createElement("div",{className:"col-md-4 custMetricsbox_pad"},l.a.createElement("p",{className:"no-margin"},"Fee"),l.a.createElement(Pe,{val:k.currency_change?o[0].fee_os*k.active_currency_val:o[0].fee_os,unit:k.active_currency,align_center:!1,position:"left"})),l.a.createElement("div",{className:"col-md-4 custMetricsbox_pad"},l.a.createElement("p",{className:"no-margin"},"Outstanding Loans"),l.a.createElement("p",{className:"no-margin",style:{fontWeight:600}},o[0].os_count)),l.a.createElement("div",{className:"col-md-4 custMetricsbox_pad"},l.a.createElement("p",{className:"no-margin"},"Ontime Repayments"),l.a.createElement("p",{className:"no-margin",style:{fontWeight:600}},(100*o[0].ontime_repayment_rate).toFixed(1),"%")),l.a.createElement("div",{className:"col-md-4 custMetricsbox_pad"},l.a.createElement("p",{className:"no-margin"},"Overdue Amount"),l.a.createElement(Pe,{val:k.currency_change?o[0].od_amount*k.active_currency_val:o[0].od_amount,unit:k.active_currency,align_center:!1,position:"left"}),l.a.createElement("p",{className:"no-margin"},(o[0].od_amount/(o[0].principal_os/100)).toFixed(1),"%")),l.a.createElement("div",{className:"col-md-4 custMetricsbox_pad"},l.a.createElement("p",{className:"no-margin"},"Overdues"),l.a.createElement("p",{className:"no-margin",style:{fontWeight:600}},o[0].od_count),l.a.createElement("p",{className:"no-margin"},(o[0].od_count/(o[0].os_count/100)).toFixed(1),"%"))),l.a.createElement("p",{className:"no-margin manDash_subHeader"},"Portfolio at Risk"),l.a.createElement("div",{className:"row manDash_subContent"},l.a.createElement("div",{className:"col-md-3 custMetricsbox_pad"},l.a.createElement("p",{className:"no-margin"},"PAR 15 - 30"),l.a.createElement(Pe,{val:k.currency_change?(o[0].par15-o[0].par30)*k.active_currency_val:o[0].par15-o[0].par30,unit:k.active_currency,align_center:!1,position:"left"}),l.a.createElement("p",{className:"no-margin"},((o[0].par15-o[0].par30)/(o[0].principal_os/100)).toFixed(1)," % of OS Principal")),l.a.createElement("div",{className:"col-md-3 custMetricsbox_pad"},l.a.createElement("p",{className:"no-margin"},"PAR 30 - 60"),l.a.createElement(Pe,{val:k.currency_change?(o[0].par30-o[0].par60)*k.active_currency_val:o[0].par30-o[0].par60,unit:k.active_currency,align_center:!1,position:"left"}),l.a.createElement("p",{className:"no-margin"},((o[0].par30-o[0].par60)/(o[0].principal_os/100)).toFixed(1)," % of OS Principal")),l.a.createElement("div",{className:"col-md-3 custMetricsbox_pad"},l.a.createElement("p",{className:"no-margin"},"PAR 60 - 90"),l.a.createElement(Pe,{val:k.currency_change?(o[0].par60-o[0].par90)*k.active_currency_val:o[0].par60-o[0].par90,unit:k.active_currency,align_center:!1,position:"left"}),l.a.createElement("p",{className:"no-margin"},((o[0].par60-o[0].par90)/(o[0].principal_os/100)).toFixed(1)," % of OS Principal")),l.a.createElement("div",{className:"col-md-3 custMetricsbox_pad",style:{position:"relative"}},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-6"},"NPL"),l.a.createElement("div",{className:"col-6"},l.a.createElement(Pe,{val:"10% of (PAR 30 - PAR 60) + 50% of (PAR 60 - PAR 90) + PAR 90",unit:"",align_center:!0,position:"top",notify:!0}))),l.a.createElement(Pe,{val:k.currency_change?o[0].npl*k.active_currency_val:o[0].npl,unit:k.active_currency,align_center:!1,position:"left"}),l.a.createElement("p",{className:"no-margin"},(o[0].npl/(o[0].principal_os/100)).toFixed(1)," % of OS Principal")))),l.a.createElement("div",{className:"cust_metrics"},l.a.createElement("p",{className:"no-margin manDash_header"},"Best Performance"),l.a.createElement("div",{className:"row bestPer_box"},l.a.createElement("div",{className:"col-md-6 custMetricsbox_pad"},l.a.createElement("div",{className:"bestPer_contentbox"},l.a.createElement("p",null,"Maximum Outstanding"),l.a.createElement("div",{className:"d-flex align-items-center justify-content-between"},l.a.createElement(Pe,{val:k.currency_change?Number(o[0].max_os.split(",")[0])*k.active_currency_val:Number(o[0].max_os.split(",")[0]),unit:k.active_currency,align_center:!1,position:"left"}),l.a.createElement("p",{className:"no-margin"},ve(o[0].max_os.split(",")[1],!1))))),l.a.createElement("div",{className:"col-md-6 custMetricsbox_pad"},l.a.createElement("div",{className:"bestPer_contentbox"},l.a.createElement("p",null,"Maximum Ontime Repayment"),l.a.createElement("div",{className:"d-flex align-items-center justify-content-between"},l.a.createElement("p",{className:"no-margin",style:{fontWeight:600}},Number(100*o[0].max_ontime_repay_rate.split(",")[0]).toFixed(1),"%"),l.a.createElement("p",{className:"no-margin"},ve(o[0].max_ontime_repay_rate.split(",")[1],!1))))))))))}var hr=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={section_rows_arr:null,headers:null},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"format_metric",value:function(e){var t=null;return e&&(t="%"==e.unit?Number(e.value).toFixed(2)+" %":"days"==e.unit?Number(e.value).toFixed(1)+" days":""==e.unit?Number(e.value).toFixed(0):Ne(Math.round(e.value),e.unit)),t}},{key:"get_headers",value:function(e){var t=e.map(function(e){return l.a.createElement(l.a.Fragment,null,l.a.createElement("th",{className:"w-25"},e.title))}),a="Metric";return"risk_category_report"==this.props.type&&(a="Flow RM"),t.unshift(l.a.createElement("th",null,a)),t.unshift(l.a.createElement("th",null,"No")),t}},{key:"get_section_rows",value:function(e,t){var a=this,n=e.ref,r=e.items.map(function(e,r){var s;s=Ze(e);var c=n?null:a.index++;return l.a.createElement("tr",{key:r},l.a.createElement("td",{className:"report_left"},c),l.a.createElement("td",{className:"report_left"},s),a.get_section_columns(e,t,n))}),s=n?this.index++:null;return r.unshift(l.a.createElement("tr",null,l.a.createElement("td",{className:"report_title"},s),l.a.createElement("td",{colSpan:"1",className:"report_title"},e.title),this.get_section_columns(null,t))),r}},{key:"get_section_columns",value:function(e,t){var a=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return t.map(function(t){var r=n?t[n][e]:t[e];return r?l.a.createElement(l.a.Fragment,null,l.a.createElement("td",null,je(a.format_metric(r)))):l.a.createElement(l.a.Fragment,null,l.a.createElement("td",null))})}},{key:"componentWillMount",value:function(){var e,t=this,a=this.country_code,n=this.acc_prvdr_code;(e=this.req({current:"true",country_code:a,acc_prvdr_code:n,type:this.props.report_type}),L("/api/admin/report/custom_report",e)).then(function(e){if(console.log(e),e)if("success"===e.status){t.index=1;var a=e.data.reports,n=t.get_headers(a),l=e.data.all_sections.map(function(e){return t.get_section_rows(e,a)});t.report_date="",t.setState({headers:n,section_rows_arr:l});var r=e.data.page_length;Ut()("#kpi_table").removeAttr("width").dataTable({searching:!1,paging:!0,pageLength:r,info:!0,dom:"Bfrtip",buttons:[{title:"",extend:"print",customize:function(e){console.log(window),Ut()(e.document.body).prepend('<img src="'+window.location.origin+'/logo_blue.png" alt = "FLOW" style="float:left;"/>')}},{extend:"csv"}],order:[]})}else alert(e.message+"\n"+JSON.stringify(e.data))})}},{key:"render",value:function(){return l.a.createElement("div",{className:"container"},l.a.createElement("br",null),l.a.createElement("h4",null,ue(this.props.report_type)),l.a.createElement("div",{id:"kpi_datatable"},l.a.createElement("table",{id:"kpi_table",className:"display strip cust-rep row-border order-column report"},l.a.createElement("thead",null,l.a.createElement("tr",null,this.state.headers)),l.a.createElement("tbody",null,this.state.section_rows_arr))))}}]),t}(st),vr=l.a.createElement(l.a.Fragment,null,l.a.createElement(v.a,{path:"/market/create",exact:!0,component:function(){return l.a.createElement(Wt,{mode:"create",title:"Create Market"})}}),l.a.createElement(v.a,{path:"/market/list",exact:!0,component:Jt}),l.a.createElement(v.a,{path:"/market/view/:country_code",exact:!0,component:function(e){return l.a.createElement(Wt,Object.assign({mode:"view",title:"View/Edit Market"},e))}})),gr=l.a.createElement(l.a.Fragment,null,l.a.createElement(v.a,{path:"/lender/create",exact:!0,component:function(){return l.a.createElement(ba,{mode:"create",title:"Create Lender"})}}),l.a.createElement(v.a,{path:"/lender/list",exact:!0,component:ha}),l.a.createElement(v.a,{path:"/lender/view/:lender_code",exact:!0,component:function(e){return l.a.createElement(ba,Object.assign({mode:"view",title:"View/Edit Lender"},e))}}),l.a.createElement(v.a,{path:"/lender/accounts",exact:!0,component:dn}),l.a.createElement(v.a,{path:"/lender/accounts/todayfa",exact:!0,component:sn})),fr=l.a.createElement(l.a.Fragment,null,l.a.createElement(v.a,{path:"/data_provider/create",exact:!0,component:function(){return l.a.createElement(Na,{mode:"create",title:"Create Data Provider"})}}),l.a.createElement(v.a,{path:"/data_provider/list",exact:!0,component:ga}),l.a.createElement(v.a,{path:"/data_provider/view/:data_prvdr_code",exact:!0,component:function(e){return l.a.createElement(Na,Object.assign({mode:"view",title:"View/Edit Data Provider"},e))}})),Er=l.a.createElement(l.a.Fragment,null,l.a.createElement(v.a,{path:"/account_provider/create",exact:!0,component:function(){return l.a.createElement(pn,{mode:"create",title:"Create Account Provider"})}}),l.a.createElement(v.a,{path:"/account_provider/list",exact:!0,component:function(){return l.a.createElement(hn,null)}})),br=l.a.createElement(l.a.Fragment,null,l.a.createElement(v.a,{path:"/fa_product/template/create",exact:!0,component:function(){return l.a.createElement(wn,{mode:"create",title:"Create FA Product Template"})}}),l.a.createElement(v.a,{path:"/fa_product/create",exact:!0,component:function(){return l.a.createElement(Mn,{mode:"create",title:"Create FA Product"})}}),l.a.createElement(v.a,{path:"/fa_product/template/view/:product_template_id",exact:!0,component:function(e){return l.a.createElement(wn,Object.assign({mode:"view",title:"View/Edit FA Product Template"},e))}}),l.a.createElement(v.a,{path:"/fa_product/view/:product_id",exact:!0,component:function(e){return l.a.createElement(Mn,Object.assign({mode:"view",title:"View/Edit FA Product"},e))}}),l.a.createElement(v.a,{path:"/fa_product/template/list",exact:!0,component:Pn}),l.a.createElement(v.a,{path:"/fa_product/list",exact:!0,component:Ln}),l.a.createElement(v.a,{path:"/fa_product/search_product",exact:!0,component:Tn})),yr=l.a.createElement(l.a.Fragment,null,l.a.createElement(v.a,{path:"/master_data_key/add",exact:!0,component:function(){return l.a.createElement(zn,null)}}),l.a.createElement(v.a,{path:"/master_data_key/list",exact:!0,component:function(){return l.a.createElement(Wn,null)}}),l.a.createElement(v.a,{path:"/master_data/add",exact:!0,component:Yn})),Nr=(l.a.Fragment,v.a,l.a.createElement(l.a.Fragment,null,l.a.createElement(v.a,{path:"/agreement/create",exact:!0,component:function(){return l.a.createElement(Xn,{title:"Create Master Agreement",id:"master_agreement"})}}),l.a.createElement(v.a,{path:"/agreement/list",exact:!0,component:function(){return l.a.createElement($n,null)}}),l.a.createElement(v.a,{path:"/agreement/create/:cust_id",exact:!0,component:function(e){return l.a.createElement(vl,Object.assign({id:"create_agreement"},e))}}),l.a.createElement(v.a,{path:"/agreement/list/:cust_id",exact:!0,component:function(e){return l.a.createElement(vl,Object.assign({mode:"list",id:"create_agreement"},e))}}),l.a.createElement(v.a,{path:"/agreement/upload/:cust_id",exact:!0,component:function(e){return l.a.createElement(El,e)}}),l.a.createElement(v.a,{path:"/agreement/upload/:cust_id/:aggr_doc_id",exact:!0,component:function(e){return l.a.createElement(bl,Object.assign({mode:"sign_draft"},e))}}))),wr=l.a.createElement(l.a.Fragment,null,l.a.createElement(v.a,{path:"/score_models",exact:!0,component:function(){return l.a.createElement(el,{id:"score_model"})}}),l.a.createElement(v.a,{path:"/score_models/weightage/:score_model?/:score_model_name?",component:function(e){return l.a.createElement(al,Object.assign({id:"csw_comp"},e))}}),l.a.createElement(v.a,{path:"/score_models/result_config/:score_model?",component:function(e){return l.a.createElement(nl,Object.assign({id:"result_config"},e))}}),l.a.createElement(v.a,{path:"/score_factors",exact:!0,component:function(){return l.a.createElement(tl,null)}})),Cr=l.a.createElement(l.a.Fragment,null,l.a.createElement(v.a,{path:"/report/monthly_kpi_report",exact:!0,component:function(e){return l.a.createElement(sl,Object.assign({type:"monthly"},e))}}),l.a.createElement(v.a,{path:"/report/current_kpi_report",exact:!0,component:function(e){return l.a.createElement(sl,Object.assign({type:"current"},e))}}),l.a.createElement(v.a,{path:"/report/portfolio_quality",exact:!0,component:function(e){return l.a.createElement(ol,Object.assign({report_type:"portfolio_quality",with_date_range:"false"},e))}}),l.a.createElement(v.a,{path:"/report/product_takeup",exact:!0,component:function(e){return l.a.createElement(ol,Object.assign({report_type:"product_takeup",with_date_range:"false"},e))}}),l.a.createElement(v.a,{path:"/report/daily_activity",exact:!0,component:function(e){return l.a.createElement(ol,Object.assign({report_type:"daily_activity",with_date_range:"true"},e))}}),l.a.createElement(v.a,{path:"/report/growth_chart",exact:!0,component:function(e){return l.a.createElement(dl,Object.assign({id:"growth_chart"},e))}}),l.a.createElement(v.a,{path:"/report/growth_chart_for/:cust_id",exact:!0,component:function(e){return l.a.createElement(dl,Object.assign({id:"growth_chart"},e))}}),l.a.createElement(v.a,{path:"/report/overdue_fa_repayments",exact:!0,component:function(e){return l.a.createElement(ol,Object.assign({report_type:"overdue_fa_repayments",with_date_range:"true"},e))}}),l.a.createElement(v.a,{path:"/report/daily_visits",exact:!0,component:function(e){return l.a.createElement(ol,Object.assign({report_type:"daily_visits",with_date_range:"true"},e))}}),l.a.createElement(v.a,{path:"/report/daily_agreements",exact:!0,component:function(e){return l.a.createElement(ol,Object.assign({report_type:"daily_agreements",with_date_range:"true"},e))}}),l.a.createElement(v.a,{path:"/report/capital_funds",exact:!0,component:function(e){return l.a.createElement(ol,Object.assign({report_type:"capital_funds",with_date_range:"false"},e))}}),l.a.createElement(v.a,{path:"/report/risk_report",exact:!0,component:function(e){return l.a.createElement(hr,Object.assign({report_type:"risk_category_report",with_date_range:"false"},e))}}),l.a.createElement(v.a,{path:"/report/lead_conversion",exact:!0,component:function(e){return l.a.createElement(ol,Object.assign({report_type:"lead_conversion",with_date_range:"true"},e))}}),l.a.createElement(v.a,{path:"/report/disbursal_report",exact:!0,component:function(e){return l.a.createElement(_r,e)}}),l.a.createElement(v.a,{path:"/management-dashboard",exact:!0,component:function(e){return l.a.createElement(pr,e)}})),kr=l.a.createElement(l.a.Fragment,null,l.a.createElement(v.a,{path:"/acc_txns/:entity/:entity_code/:acc_id",exact:!0,component:function(e){return l.a.createElement(Nl,e)}}),l.a.createElement(v.a,{path:"/account/:acc_id/statement",exact:!0,component:function(e){return l.a.createElement(wl,e)}})),Sr=l.a.createElement(l.a.Fragment,null,l.a.createElement(v.a,{path:"/field_visit/search",exact:!0,component:function(e){return l.a.createElement(Aa,e)}}),l.a.createElement(v.a,{path:"/field_visit/search/:cust_id",exact:!0,component:function(e){return l.a.createElement(Aa,e)}}),l.a.createElement(v.a,{path:"/checkout/:cust_id/:id",exact:!0,component:function(e){return l.a.createElement(Ml,e)}})),xr=l.a.createElement(l.a.Fragment,null,l.a.createElement(v.a,{path:"/call_log/search/:cust_id",exact:!0,component:function(e){return l.a.createElement(Il,e)}}),l.a.createElement(v.a,{path:"/call_log/search",exact:!0,component:function(e){return l.a.createElement(Il,e)}}),l.a.createElement(v.a,{path:"/compl_call_log/:cust_id/:id",exact:!0,component:function(e){return l.a.createElement(Hl,e)}})),Ar=l.a.createElement(l.a.Fragment,null,l.a.createElement(v.a,{path:"/pre_appr/list",exact:!0,component:function(e){return l.a.createElement(ur,e)}})),Or=l.a.createElement(l.a.Fragment,null,l.a.createElement(v.a,{path:"/lead/create",exact:!0,component:function(e){return l.a.createElement(Zl,Object.assign({mode:"create",title:"Create Lead"},e))}}),l.a.createElement(v.a,{path:"/lead/edit/:id",exact:!0,component:function(e){return l.a.createElement(Zl,Object.assign({mode:"view",title:"View/Edit Lead"},e))}}),l.a.createElement(v.a,{path:"/lead/search",exact:!0,component:function(e){return l.a.createElement(er,Object.assign({mode:"search",title:"Search Lead"},e))}}),l.a.createElement(v.a,{path:"/lead/audit_kyc/:id",exact:!0,component:function(e){return l.a.createElement(dr,Object.assign({title:"Audit KYC"},e))}})),jr=l.a.createElement(l.a.Fragment,null,l.a.createElement(v.a,{path:"/management-dashboard/print",exact:!0,component:function(e){return l.a.createElement(pr,null)}})),Dr=a(169),Fr=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(d.a)(t).call(this,e))).handleSection1=function(e){(e=re()(e).format("YYYY-MM-DD")).target&&(e=e.target.value);""!=e?a.setState({section3:"disable_div",search_by_textbox_style:"disable_div",section2:"disable_div"}):a.setState({section1:"show_div",search_by_textbox_style:"show_div"})},a.handleSection3=function(e){""==e.target.value?a.setState({section1:"disable_div",section2:"disable_div"}):""!=e.target.value&&a.setState({section1:"show_div",section2:"show_div"})},a.handleSection2=function(e){""!=e.target.value?a.setState({section1:"disable_div",section3:"disable_div"}):""==e.target.value&&a.setState({section1:"show_div",section3:"show_div"})},a.handleStatusChange=function(e){a.handleReset(e),a.handleElementReset(a.state.action_date_field+"__from"),a.handleElementReset(a.state.action_date_field+"__to"),a.handleElementReset(a.state.action_date_field+"__today"),a.handleElementReset(a.state.actor_id),a.setState({submitted_field_style:"enable_div",__from:"",__to:"",today:!1,show_by_today:!1,show_from_until:!1,show_approver:!1}),"loan"==a.props.mode?"pending_disbursal"==e.target.value?a.setState({action:"Approved",show_by_today:!0,show_from_until:!0,actor_id:"loan_approver_id",action_date_field:"loan_approved_date",actor_list_dd:a.state.approver_list_dd}):"ongoing"==e.target.value||"disbursed"==e.target.value?a.setState({action:"Disbursed",show_from_until:!0,actor_id:"disbursed_by",action_date_field:"disbursal_date",actor_list_dd:a.state.disbursed_by_dd,__from:"",__to:""}):"due"==e.target.value||("Overdue"==e.target.value?a.setState({action:"Due",show_from_until:!0,action_date_field:"due_date",__from:"",__to:""}):"settled"==e.target.value&&a.setState({action:"Payment Captured",show_by_today:!0,show_from_until:!0,actor_id:"paid_by",action_date_field:"paid_date",actor_list_dd:a.state.payer_list_dd,__from:"",__to:""})):"loan_appl"==a.props.mode&&("approved"==e.target.value?a.setState({action:"Approved",show_by_today:!0,show_from_until:!1,actor_id:"loan_approver_id",action_date_field:"loan_approved_date",actor_list_dd:a.state.approver_list_dd}):"pending_approval"==e.target.value&&a.setState({action:"Applied",show_by_today:!0,show_from_until:!0,show_approver:!0,actor_id:"loan_applied_by",action_date_field:"loan_appl_date",actor_list_dd:a.state.applier_list_dd}))},a.handleDropdownValue=function(e){"status"==e.target.id&&a.handleStatusChange(e),""!=e.target.value?a.setState({search_by_textbox_style:"disable_div"}):a.setState({search_by_textbox_style:"show_div"})},a.handleApiCall=function(e,t){var n=a.acc_prvdr_code;qe(a.req({country_code:e,screen:t,acc_prvdr_code:n,status:"enabled"})).then(function(e){if(e){var t=e.data;for(var n in t){var l=t[n];if("loan_status"==n||"loan_appl_status"==n||"borrower_status"==n||"territory_list"==n||"profile_status"==n||"activity_status"==n||"risk_category"==n||"write_off_status_list"==n||"location"==n){a.getSelectOptionsFromResult(l,n,["data_code","data_value"],!1)}else a.getSelectOptionsFromResult(l,n)}}})},a.toggleAdvSearch=function(){a.setState({adv_search:!a.state.adv_search})},a.SearchByFromUntil=function(e){return l.a.createElement("div",{className:"d-flex align-items-start textInputshow_searchBox",style:{flexWrap:"wrap"}},a.state.show_approver&&l.a.createElement("div",{className:"col-md-3 marT-5"},l.a.createElement("div",{className:a.state.section1},l.a.createElement(A.a.Group,{className:"no-margin"},l.a.createElement(A.a.Label,{className:"no-margin"},"Approver"),l.a.createElement(A.a.Control,{as:"select",id:"loan_approver_id",onChange:function(e){a.handleChange(e),a.handleDropdownValue(e),a.handleSection1(e)}},a.state.approver_list_dd)))),a.state.show_by_today&&l.a.createElement(l.a.Fragment,null,"loan_appl"==a.props.mode?l.a.createElement("div",{className:"col-md-3"},l.a.createElement("div",{className:a.state.section1},l.a.createElement(A.a.Group,null,l.a.createElement(A.a.Label,{className:"no-margin"},a.state.action),l.a.createElement(A.a.Control,{as:"select",id:a.state.actor_id,onChange:function(e){a.handleChange(e),a.handleDropdownValue(e),a.handleSection1(e)}},a.state.actor_list_dd)))):l.a.createElement("div",{className:"col-md-3 marT-5 searchInput_height"},l.a.createElement("div",{className:a.state.section1},l.a.createElement(A.a.Group,{className:"no-margin"},l.a.createElement(A.a.Label,{className:"no-margin"},a.state.action," By"),l.a.createElement(A.a.Control,{as:"select",id:a.state.actor_id,onChange:function(e){a.handleChange(e),a.handleDropdownValue(e),a.handleSection1(e)}},a.state.actor_list_dd)))),(a.props.mode,l.a.createElement("div",{className:"col-md-3 searchInput_height"},l.a.createElement("div",{className:a.state.section1},l.a.createElement(A.a.Group,{className:"no-margin"},l.a.createElement(A.a.Label,{className:"no-margin"}),l.a.createElement(A.a.Row,{className:"justify-content-md-center"},l.a.createElement(A.a.Check,{className:"aggregation",type:"checkbox",id:a.state.action_date_field+"__today",onChange:function(e){a.handleCheckboxClick(e),a.handleDropdownValue(e),a.handleSection1(e)},label:a.state.action+"  Today"}))))))),a.state.show_from_until&&l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"col-md-3 marT-5"},l.a.createElement(A.a.Group,{className:"".concat(a.state.section1," no-margin searchInput_height")},l.a.createElement(A.a.Label,{className:"no-margin"},a.state.action," from"),l.a.createElement(Ft.a,{closeOnSelect:!0,value:a.state.__from,dateFormat:"DD MMM YYYY",timeFormat:!1,required:"required",onChange:function(e){a.handleDateChange(a.state.action_date_field+"__from",e),a.setState({__from:e}),a.handleSection1(e)}}))),l.a.createElement("div",{className:"col-md-3 marT-5"},l.a.createElement(A.a.Group,{className:"".concat(a.state.section1," no-margin searchInput_height")},l.a.createElement(A.a.Label,{className:"no-margin"},a.state.action," until"),l.a.createElement(Ft.a,{closeOnSelect:!0,value:a.state.__to,dateFormat:"DD MMM YYYY",timeFormat:!1,required:"required",onChange:function(e){a.handleDateChange(a.state.action_date_field+"__to",e),a.setState({__to:e}),a.handleSection1(e)}}))),"Due"==a.state.action&&l.a.createElement("div",{className:"col-md-3 p-2 mt-4"},l.a.createElement("div",{className:""},l.a.createElement("label",{className:"checkbox-inline no-margin"},l.a.createElement("input",{id:"include_setld_fa",type:"checkbox",onChange:function(e){a.handleBorrowerCheckboxClick(e)}}),l.a.createElement("span",null,"  Include Settled FA"))))))},a.handleClick=function(e){window.open("/borrower/indiv/view/"+a.state.customer_id)},a.SearchBorrower=function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"col-md-3 marT-5"},l.a.createElement("div",{className:""},l.a.createElement("select",{className:"form-control",id:"activity_status",onChange:function(e){a.handleChange(e),a.handleDropdownValue(e),a.handleSection1(e)}},l.a.createElement("option",{selected:!0,value:""},"Activity Status"),a.state.activity_status_dd))),l.a.createElement("div",{className:"col-md-3 marT-5"},l.a.createElement("div",{className:""},l.a.createElement("select",{className:"form-control",id:"location",onChange:function(e){a.handleChange(e),a.handleDropdownValue(e),a.handleSection1(e)}},l.a.createElement("option",{selected:!0,value:""},"Location"),a.state.location_dd))),l.a.createElement("div",{className:"col-md-3 marT-5"},l.a.createElement("div",{className:""},l.a.createElement("select",{className:"form-control",id:"territory",onChange:function(e){a.handleChange(e),a.handleDropdownValue(e),a.handleSection1(e)}},l.a.createElement("option",{selected:!0,value:""},"Territory"),a.getSelectOptions("territory")))),b("customer","risk_category")&&l.a.createElement("div",{className:"col-md-3 marT-5"},l.a.createElement("div",{className:""},l.a.createElement("select",{className:"form-control",id:"risk_category",onChange:function(e){a.handleChange(e),a.handleDropdownValue(e),a.handleSection1(e)}},a.state.risk_category_dd,l.a.createElement("option",{selected:!0,value:""},"Risk Category")))),l.a.createElement("div",{className:"col-md-3 marT-5"},l.a.createElement(Dr.a,null,l.a.createElement(A.a.Group,{as:Xl.a},l.a.createElement(A.a.Label,{for:"closed_profile"},"Include Closed Profile",l.a.createElement(A.a.Check,{type:"checkbox",defaultChecked:a.props.profile_status.closed_profile,id:"closed_profile",className:"float-left mx-3 ",onChange:function(e){a.props.onComponentCheckboxclick(e)}}))))),l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("h3",{className:"font-weight-bolder no-margin",style:{padding:10}},"OR")),l.a.createElement("div",{className:"col-8"},l.a.createElement(Dr.a,{className:"no-margin align-items-center searchInput_height"},l.a.createElement(A.a.Group,{as:Xl.a,className:"".concat(a.state.section3," no-padding no-margin")},l.a.createElement(A.a.Label,{className:"no-margin"},"Cust Name / Cust ID / Account Num / Mobile No / National ID"),l.a.createElement(A.a.Control,{id:"req_parameter",onChange:function(e){a.handleChange(e),a.handleSection3(e)}})),"borrower"==a.props.mode&&l.a.createElement(l.a.Fragment,null,l.a.createElement(lt.a,{style:{margin:"23px 0px 12px 0px"},className:a.state.section3,id:"view_btn",onChange:function(e){a.handleSection3(e)},onClick:a.props.onSearch("view","Individual")},"View")," \xa0",l.a.createElement(lt.a,{style:{margin:"23px 0px 12px 0px"},className:a.state.section3,id:"view_btn",onChange:function(e){a.handleSection3(e)},onClick:a.props.onView("edit","Individual",null)},"Edit")))))},a.WildCardSearch=function(){return l.a.createElement("div",{className:"col-md-12"},l.a.createElement("div",{className:"col-md-12"},l.a.createElement("div",null,l.a.createElement("h3",{className:"font-weight-bolder no-margin text-center",style:{padding:10}},"OR"))),l.a.createElement("div",{className:"row no-margin"},l.a.createElement("div",{className:"col-md-5 no-padding searchInput_height"},l.a.createElement("div",{className:"form-group ".concat(a.state.section3)},l.a.createElement(A.a.Label,{className:"no-margin"},"Any Customer ID / Mobile No / National ID / Account No"),l.a.createElement(A.a.Control,{id:"req_parameter",onChange:function(e){a.handleChange(e),a.handleSection3(e)}}))),l.a.createElement("div",{className:"col-md-2"},l.a.createElement("div",{className:"form-group"},"loan"==a.props.mode&&l.a.createElement(lt.a,{style:{margin:"40px 0px 12px 0px"},id:"view",className:a.state.section2,onChange:function(e){a.handleSection2(e)},onClick:a.props.onSearch},"View")))))},a.AdvancedSearch=function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"col-md-12"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-4"},l.a.createElement("div",{className:"form-group searchInput_height"},l.a.createElement("label",{className:"no-margin"},"Registered from"),l.a.createElement(Ft.a,{closeOnSelect:!0,value:a.state.reg_date_from,dateFormat:"DD MMM YYYY",timeFormat:!1,required:"required",onChange:function(e){a.handleDateChange("reg_date__from",e),a.setState({reg_date_from:e}),a.handleSection1(e)}}))),l.a.createElement("div",{className:"col-md-4"},l.a.createElement("div",{className:"form-group searchInput_height"},l.a.createElement("label",{className:"no-margin"},"Registered to"),l.a.createElement(Ft.a,{closeOnSelect:!0,value:a.state.reg_date_to,dateFormat:"DD MMM YYYY",timeFormat:!1,required:"required",onChange:function(e){a.handleDateChange("reg_date__to",e),a.setState({reg_date_to:e}),a.handleSection1(e)}}))))),l.a.createElement("div",{className:"col-md-12",style:{marginTop:5,marginBottom:10}},l.a.createElement("div",{className:"row formInputadvanced_search"},l.a.createElement("div",{className:"col-md-6"},l.a.createElement("div",{className:"advanceSearch_groupBox"},l.a.createElement("div",{className:"form-check"},l.a.createElement("label",{className:"form-check-label no-margin"},l.a.createElement("input",{className:"form-check-input",type:"checkbox",value:"",id:"not_have_active_agrmnt",onChange:function(e){a.handleBorrowerCheckboxClick(e),a.handleSection1(e)}})," Don't have Active Agrmt",l.a.createElement("span",{className:"form-check-sign"},l.a.createElement("span",{className:"check"})))),l.a.createElement("div",{className:"form-check"},l.a.createElement("label",{className:"form-check-label no-margin"},l.a.createElement("input",{className:"form-check-input",type:"checkbox",id:"have_active_agrmnt",onChange:function(e){a.handleBorrowerCheckboxClick(e),a.handleSection1(e)}})," Have Active Agrmt",l.a.createElement("span",{className:"form-check-sign"},l.a.createElement("span",{className:"check"})))))),l.a.createElement("div",{className:"col-md-6"},l.a.createElement("div",{className:"advanceSearch_groupBox"},l.a.createElement("div",{className:"form-check"},l.a.createElement("label",{className:"form-check-label no-margin"},l.a.createElement("input",{className:"form-check-input",type:"checkbox",id:"non_active_cust",onChange:function(e){a.handleBorrowerCheckboxClick(e),a.handleSection1(e)}})," Non Active Customers",l.a.createElement("span",{className:"form-check-sign"},l.a.createElement("span",{className:"check"})))),l.a.createElement("div",{className:"form-check"},l.a.createElement("label",{className:"form-check-label no-margin"},l.a.createElement("input",{className:"form-check-input",type:"checkbox",id:"active_cust",onChange:function(e){a.handleBorrowerCheckboxClick(e),a.handleSection1(e)}})," Active Customers (30 Days)",l.a.createElement("span",{className:"form-check-sign"},l.a.createElement("span",{className:"check"})))))),l.a.createElement("div",{className:"col-md-6"},l.a.createElement("div",{className:"advanceSearch_groupBox"},l.a.createElement("div",{className:"form-check"},l.a.createElement("label",{className:"form-check-label no-margin"},l.a.createElement("input",{className:"form-check-input",type:"checkbox",id:"not_have_overdue_loan",onChange:function(e){a.handleBorrowerCheckboxClick(e),a.handleSection1(e)}})," Don't have Overdue FA",l.a.createElement("span",{className:"form-check-sign"},l.a.createElement("span",{className:"check"})))),l.a.createElement("div",{className:"form-check"},l.a.createElement("label",{className:"form-check-label no-margin"},l.a.createElement("input",{className:"form-check-input",type:"checkbox",id:"have_overdue_loan",onChange:function(e){a.handleBorrowerCheckboxClick(e),a.handleSection1(e)}})," Have Overdue FA",l.a.createElement("span",{className:"form-check-sign"},l.a.createElement("span",{className:"check"})))))),l.a.createElement("div",{className:"col-md-6"},l.a.createElement("div",{className:"advanceSearch_groupBox"},l.a.createElement("div",{className:"form-check"},l.a.createElement("label",{className:"form-check-label no-margin"},l.a.createElement("input",{className:"form-check-input",type:"checkbox",id:"not_have_pending_loan_appl",onChange:function(e){a.handleBorrowerCheckboxClick(e),a.handleSection1(e)}})," Don't have FA Appl",l.a.createElement("span",{className:"form-check-sign"},l.a.createElement("span",{className:"check"})))),l.a.createElement("div",{className:"form-check"},l.a.createElement("label",{className:"form-check-label no-margin"},l.a.createElement("input",{className:"form-check-input",type:"checkbox",id:"have_pending_loan_appl",onChange:function(e){a.handleBorrowerCheckboxClick(e),a.handleSection1(e)}})," Have FA Appl",l.a.createElement("span",{className:"form-check-sign"},l.a.createElement("span",{className:"check"})))))),l.a.createElement("div",{className:"col-md-6"},l.a.createElement("div",{className:"advanceSearch_groupBox"},l.a.createElement("div",{className:"form-check"},l.a.createElement("label",{className:"form-check-label no-margin"},l.a.createElement("input",{className:"form-check-input",type:"checkbox",id:"not_have_ongoing_loan",onChange:function(e){a.handleBorrowerCheckboxClick(e),a.handleSection1(e)}})," Don't have Ongoing FA",l.a.createElement("span",{className:"form-check-sign"},l.a.createElement("span",{className:"check"})))),l.a.createElement("div",{className:"form-check"},l.a.createElement("label",{className:"form-check-label no-margin"},l.a.createElement("input",{className:"form-check-input",type:"checkbox",id:"have_ongoing_loan",onChange:function(e){a.handleBorrowerCheckboxClick(e),a.handleSection1(e)}})," Have Ongoing FA",l.a.createElement("span",{className:"form-check-sign"},l.a.createElement("span",{className:"check"})))))),l.a.createElement("div",{className:"col-md-6"},l.a.createElement("div",{className:"advanceSearch_groupBox"},l.a.createElement("div",{className:"form-check"},l.a.createElement("label",{className:"form-check-label no-margin"},l.a.createElement("input",{className:"form-check-input",type:"checkbox",id:"do_not_have_score",onChange:function(e){a.handleBorrowerCheckboxClick(e),a.handleSection1(e)}})," Don't have New Cust Score",l.a.createElement("span",{className:"form-check-sign"},l.a.createElement("span",{className:"check"})))),l.a.createElement("div",{className:"form-check"},l.a.createElement("label",{className:"form-check-label no-margin"},l.a.createElement("input",{className:"form-check-input",type:"checkbox",id:"have_score",onChange:function(e){a.handleBorrowerCheckboxClick(e),a.handleSection1(e)}})," Have New Cust Score",l.a.createElement("span",{className:"form-check-sign"},l.a.createElement("span",{className:"check"})))))))))},a.handleTextboxValue=function(e){""!=e.target.value?a.setState({search_by_dropdown_style:"disable_div",search_by_textbox_style:"show_div",section1:"disable_div",cust_div_style:"disable_div"}):a.setState({search_by_dropdown_style:"show_div",cust_div_style:"show_div"})},a.handleCheckboxClick=function(e){e.target.checked?(e.target.value=!0,a.setState({submitted_field_style:"disable_div",__from:"",__to:"",today:!0}),a.handleElementReset(a.state.action_date_field+"__from"),a.handleElementReset(a.state.action_date_field+"__to")):(e.target.value=!1,e.target.value=null,a.setState({submitted_field_style:"show_div",today:!1})),a.handleChange(e)},a.handleBorrowerCheckboxClick=function(e){e.target.checked?e.target.value=!0:e.target.value=!1,a.handleChange(e)},a.handleResetClick=function(e){a.setState({section3:"show_div",search_by_textbox_style:"show_div"}),a.handleReset(),a.setState({search_by_dropdown_style:"show_div"}),a.setState({search_by_textbox_style:"show_div"}),a.setState({submitted_field_style:"show_div"}),a.setState({approved_field_style:"show_div"}),a.setState({cust_div_style:"show_div"}),a.setState({loan_id_div_style:"show_div"}),console.log("search_by_dropdown_style",a.state.search_by_dropdown_style),console.log("search_by_textbox_style",a.state.search_by_textbox_style),console.log("submitted_field_style",a.state.submitted_field_style),console.log("approved_field_style",a.state.approved_field_style),console.log("cust_div_style",a.state.cust_div_style),console.log("loan_id_div_style",a.state.loan_id_div_style)},a.handleChangeReset=function(){a.setState({__from:"",__to:"",reg_date_from:"",reg_date_to:"",section1:"show_div",section3:"show_div",section2:"show_div"})},a.state={customer_id:"",action:"Approved",adv_search:!1,show_by_today:!1,show_from_until:!1,today:!1,screen:"",search_by_dropdown_style:"show_div",search_by_textbox_style:"show_div",register_date:null,__from:"",__to:"",reg_date_from:"",reg_date_to:"",section1:"show_div",section3:"show_div",value:"enabled",section2:"show_div"},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){var e=this.country_code;"loan"==this.props.mode?(this.screen="loan_search",this.setState({doc_id:"loan_doc_id"}),this.setState({doc_id_lbl:"FA ID"})):"loan_appl"==this.props.mode?(this.screen="loan_appl_search",this.setState({doc_id:"loan_appl_doc_id"}),this.setState({doc_id_lbl:"FA Application ID"})):"borrower"==this.props.mode&&(this.screen="borrower_search"),this.handleApiCall(e,this.screen),this.load_flow_rel_mgr(),this.load_dp_rel_mgr(),this.setOptionsListToStateFromAppApi("common","list",Object(Z.a)({},this.def_req,{status:"enabled",biz_account:!0}),["acc_prvdr_code","name"],"acc_prvdr")}},{key:"render",value:function(){var e=this;return l.a.createElement(l.a.Fragment,null,l.a.createElement("form",{method:"get",action:"/",className:"form-horizontal",autocomplete:"off"},l.a.createElement("div",{className:"row no-margin",style:{backgroundColor:"#202940"}},l.a.createElement("div",{className:"col-md-3 marT-5"},l.a.createElement("div",{className:"",style:{position:"relative"}},"borrower"==this.props.mode?null:l.a.createElement("font",{className:"text-danger",style:{position:"absolute",top:0,left:0}},"   *  "),l.a.createElement("select",{className:"form-control",title:"Status",id:"status",onChange:function(t){e.handleDropdownValue(t),e.handleChange(t),e.handleSection1(t)},required:!0},l.a.createElement("option",{selected:!0,value:""},"Status"),"loan_appl"==this.props.mode&&this.state.loan_appl_status_dd,"loan"==this.props.mode&&this.state.loan_status_dd,"borrower"==this.props.mode&&this.state.borrower_status_dd))),l.a.createElement("div",{className:"col-md-3 marT-5"},l.a.createElement("div",{className:""},l.a.createElement("select",{className:"form-control",id:"acc_prvdr_code",onChange:function(t){e.handleChange(t),e.handleDropdownValue(t),e.handleSection1(t)}},l.a.createElement("option",{selected:!0,value:""},"Account Provider"),this.state.acc_prvdr_dd))),l.a.createElement("div",{className:"col-md-3 marT-5"},l.a.createElement("div",{className:""},l.a.createElement("select",{className:"form-control",title:"Flow Relationship Manager",id:"flow_rel_mgr_id",onChange:function(t){e.handleChange(t),e.handleDropdownValue(t),e.handleSection1(t)}},l.a.createElement("option",{selected:!0,value:""},"Flow Relationship Manager"),this.state.flow_rel_mgr_dd))),("loan"==this.props.mode||"loan_appl"==this.props.mode)&&l.a.createElement("div",{className:"col-md-3 marT-5"},l.a.createElement("div",{className:""},l.a.createElement("select",{className:"form-control",id:"product_id",onChange:function(t){e.handleChange(t),e.handleDropdownValue(t),e.handleSection1(t)}},l.a.createElement("option",{selected:!0,value:""},"Product Name"),this.state.product_name_list_dd))),"loan"==this.props.mode&&b("loan","search_list_view_write_off")&&l.a.createElement(l.a.Fragment,null,"loan"==this.props.mode&&l.a.createElement("div",{className:"col-md-3 marT-5"},l.a.createElement("div",{className:""},l.a.createElement("select",{className:"form-control",id:"write_off_status",onChange:function(t){e.handleChange(t),e.handleDropdownValue(t),e.handleSection1(t)}},l.a.createElement("option",{selected:!0,value:""},"Write Off Status"),this.state.write_off_status_list_dd))),"loan"==this.props.mode&&l.a.createElement("div",{className:"col-md-3 marT-5 d-flex align-items-center"},l.a.createElement("div",{className:""},l.a.createElement("label",{className:"checkbox-inline no-margin"},l.a.createElement("input",{id:"exclude_wo_fa",type:"checkbox",onChange:function(t){e.handleBorrowerCheckboxClick(t)}}),l.a.createElement("span",null,"  Exclude Written Off FA"))))),("loan"==this.props.mode||"loan_appl"==this.props.mode)&&l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"".concat(this.state.search_by_dropdown_style," col-md-12 no-padding")},this.SearchByFromUntil("loan"==this.props.mode?3:0)),this.WildCardSearch()),"borrower"==this.props.mode&&l.a.createElement(l.a.Fragment,null,this.SearchBorrower(),l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"col-12 text-center d-flex justify-content-center align-items-center",style:{padding:10}},l.a.createElement("h3",{className:"font-weight-bolder no-margin"},"OR"),l.a.createElement("h3",{className:"no-margin",style:{paddingLeft:15,cursor:"pointer"},onClick:this.toggleAdvSearch},"Advanced search")),this.state.adv_search&&this.AdvancedSearch())),l.a.createElement("div",{className:"col-12 text-center",style:{paddingBottom:15,paddingTop:5}},l.a.createElement(lt.a,{type:"reset",variant:"secondary",onClick:this.handleResetClick},"Reset")," \xa0",l.a.createElement(lt.a,{id:"searchbtn",varient:"info",disabled:this.props.disable_btn,className:"btn-primary",onClick:"borrower"==this.props.mode?this.props.onSearch("search",null):this.props.onSearch},"Search")," \xa0"))))}}]),t}(ct),Mr=function(e,t){var a=e.split(" "),n=t.split(" "),l=a[0].split(","),r=n[0].split(","),s=l.join(""),c=r.join("");return parseInt(s)>parseInt(c)||parseInt(s)===parseInt(c)?1:-1},Pr=function(e,t){var a=e.split(" "),n=t.split(" "),l=a[0].toLowerCase();return l===[l,n[0].toLowerCase()].sort()[0]?1:-1},Br=function(e,t,a){var n=le.duration(le(a).diff(le(e))),l=le.duration(le(a).diff(le(t))),r=n.days(),s=n.hours(),c=n.minutes(),o=l.days(),i=l.hours(),d=l.minutes();if(r>o)return 1;if(r===o){if(s>i)return 1;if(s===i){if(c>d)return 1;if(c===d)return 1;if(d>c)return-1}else if(i>s)return-1}else if(o>r)return-1},Lr=function(e,t){var a=new Date(e),n=new Date(t);return a.getTime()>n.getTime()||a.getTime()===n.getTime()?1:-1},Tr=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(d.a)(t).call(this,e))).handleViewAccountsClick=function(e,t,n){a.setState({cust_id:e.target.id}),a.acc_number=t,a.person_name=n,a.setState({modalBox:"true"})},a.handleModalClose=function(e){a.setState({modalBox:!1})},a.handleModifySearch=function(e){a.setState({search_div_style:"show_div",modify_search:"hide_div"})},a.handleClick=function(e,t,n){return function(l){if(l.preventDefault(),null==n){if(!a.state.searchBorrower.req_parameter)return void alert("Please enter a criteria in 'Any Customer ID / Mobile No / National ID'");n=a.state.searchBorrower.req_parameter}"institutional"===t?window.open("/borrower/ins/"+e+"/"+n,"_blank"):window.open("/borrower/indiv/"+e+"/"+n,"_blank")}},a.handleSearch=function(e,t){return function(n){Ut()("#borrower_list").DataTable().destroy();var l=a.state.searchBorrower;l.mode=e,Object.keys(l).length>0?(a.setState({datatable_div_style:"hide_div"}),xl(a.req({borrower_search_criteria:l},!0)).then(function(n){a.resp(n),n&&("success"===n.status?("view"==n.data.mode?"institutional"===t?window.open("/borrower/ins/"+e+"/"+n.data.cust_id,"_blank"):window.open("/borrower/indiv/"+e+"/"+n.data.cust_id,"_blank"):"search"==n.data.mode&&(a.borrower=n.data.results),b("customer","list_account")?a.btn_style="show_div":a.btn_style="disable_div",a.setState(function(e){return e.columndatas=a.drawColumndata()}),a.setState(function(e){return e.rowdatas=n.data.results}),a.setState(function(e){return e.copy=n.data.results})):alert("No results found."))})):alert("Please enter valid criteria")}},a.changeHandler=function(e){var t=e,n=a.state.rowdatas.filter(function(e){return null!==e.cust_id&&e.cust_id.toLowerCase().includes(t.toLowerCase())||null!==e.acc_number&&e.acc_number.includes(t)||null!==e.category&&e.category.toLowerCase().includes(t.toLowerCase())||null!==e.biz_name&&e.biz_name.toLowerCase().includes(t.toLowerCase())||null!==e.flow_rel_mgr_name&&e.flow_rel_mgr_name.toLowerCase().includes(t.toLowerCase())||null!==e.reg_flow_rel_mgr_name&&e.reg_flow_rel_mgr_name.toLowerCase().includes(t.toLowerCase())||null!==e.territory&&e.territory.toLowerCase().includes(t.toLowerCase())||null!==e.location&&e.location.toLowerCase().includes(t.toLowerCase())});a.setState(function(e){return e.copy=n})},a.handlecloseprofilechange=function(e){var t=a.state.profile_status,n="closed_profile"===e.target.id?e.target.checked:e.target.value;t[e.target.id]=n,a.state.searchBorrower.profile_status=1==t.closed_profile?"closed":"open"},a.state={searchBorrower:{profile_status:"open"},datatable_div_style:"hide_div",search_div_style:"show_div",modalBox:!1,modify_search:"hide_div",accountList:null,profile_status:{closed_profile:!1},columndatas:[],rowdatas:[],copy:[]},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"drawColumndata",value:function(){var e=this,t=b("customer","edit"),a=b("customer","risk_category");return[{Header:"SI No.",id:"row",Cell:function(e){return l.a.createElement("div",null,e.index+1)}},{Header:"ACC PRVDR",id:"acc_prvdr_code",sortable:!1,accessor:function(e){return l.a.createElement(Me,{logotype:e.acc_prvdr_code})}},{Header:"FLOW Cust ID",id:"cust_id",sortable:!1,accessor:function(t){return l.a.createElement("a",{href:"#",className:"flow_custid",onClick:e.handleClick("view",t.biz_type,t.cust_id),target:"_blank"},t.cust_id)}},{Header:"A/C Number",id:"acc_number",sortable:!1,accessor:function(e){return e.acc_number}},{Header:"Category",id:"category",accessor:function(e){return e.category}},{Header:"Business Name",id:"biz_name",sortMethod:function(t,a){return e.sortBiz(t,a)},accessor:function(e){return l.a.createElement(St,{full_text:e.biz_name,overlay:ye(e)})}},{Header:"RM Name",id:"flow_rel_mgr_name",accessor:function(e){return e.flow_rel_mgr_name}},{Header:"Reg RM Name",id:"reg_flow_rel_mgr_name",accessor:function(e){return e.reg_flow_rel_mgr_name}},{Header:"Total FAs",id:"tot_loans",accessor:function(e){return e.tot_loans?e.tot_loans:0}},{Header:"Open FA / APPL",sortable:!1,id:"ongoing_loan_doc_id",accessor:function(e){return e.is_og_loan_overdue&&e.ongoing_loan_doc_id?l.a.createElement($.a,{to:"/fa/view/"+e.ongoing_loan_doc_id,target:"_blank",className:"overdue"},e.ongoing_loan_doc_id):e.ongoing_loan_doc_id?l.a.createElement($.a,{to:"/fa/view/"+e.ongoing_loan_doc_id,target:"_blank",className:"on_going"},e.ongoing_loan_doc_id):e.pending_loan_appl_doc_id?l.a.createElement($.a,{to:"/fa_appl/view/"+e.pending_loan_appl_doc_id,target:"_blank",className:"pending"},e.pending_loan_appl_doc_id):l.a.createElement($.a,{to:"/fa_appl_for/"+e.cust_id,target:"_blank",className:"apply"},"Apply FA")}},{Header:"Overdue",id:"is_og_loan_overdue",accessor:function(e){return e.is_og_loan_overdue?"YES":"NO"}},{Header:"Reg Date",id:"reg_date",sortMethod:function(t,a){return e.sortDate(t,a)},accessor:function(e){return e.reg_date?l.a.createElement("span",null,ge(e.reg_date)):"NA"}},{Header:"Last Visit",id:"last_visit_date",sortMethod:function(t,a){return e.sortDate(t,a)},accessor:function(e){return e.last_visit_date?l.a.createElement("span",null,ge(e.last_visit_date)):"NA"}},{Header:"Last FA",id:"last_loan_date",sortMethod:function(t,a){return e.sortDate(t,a)},accessor:function(e){return e.last_loan_date?l.a.createElement("span",null,ge(e.last_loan_date)):"NA"}},{Header:"Cond Count",id:"cond_count",accessor:function(e){return e.cond_count}},{Header:"Territory",id:"territory",accessor:function(e){return Ze(e.territory)}},{Header:"Location",id:"location",accessor:function(e){return Ze(e.location)}},{Header:"Profile Status",id:"profile_status",accessor:function(e){return Ze(e.profile_status)}},{Header:"Activity Status",id:"activity_status",accessor:function(e){return Ze(e.activity_status)}},{Header:"Risk Category",id:"risk_category",show:a,accessor:function(e){return a&&Ze(e.risk_category)}},{Header:"Status",id:"status",accessor:function(e){return Ze(e.status)}},{Header:"Edit",sortable:!1,id:"edit",show:t,accessor:function(a){return t&&l.a.createElement("input",{id:a.cust_id,type:"button",onClick:e.handleClick("edit",a.biz_type,a.cust_id),value:"Edit",className:"btn-sm btn-primary"})}}]}},{key:"sortDate",value:function(e,t){var a=e.props.children,n=t.props.children;return Lr(a,n)}},{key:"sortBiz",value:function(e,t){return Pr(e.props.full_text,t.props.full_text)}},{key:"render",value:function(){var e=this;return l.a.createElement("div",{className:"container containerTopmargin max-width no-padding"},l.a.createElement("div",{className:"floatAdvancetitleBox"},l.a.createElement("h5",{className:"no-margin preHeaderpad",style:{paddingLeft:15,fontSize:20}},"SEARCH - Customer ")),l.a.createElement("div",{className:this.state.modify_search},l.a.createElement("button",{type:"button",className:"btn btn-md btn-light",id:"float_style",onClick:this.handleModifySearch},"Modify Search")),l.a.createElement("div",{className:this.state.search_div_style},l.a.createElement(Fr,{id:"searchBorrower",mode:"borrower",onSearch:this.handleSearch,onView:this.handleClick,disable_btn:this.state.calling_api,onComponentChange:this.handleComponentChange,onComponentReset:this.handleComponentReset,onComponentElementChange:this.handleComponentElemetChange,onComponentCheckboxclick:this.handlecloseprofilechange,profile_status:this.state.profile_status})),this.state.rowdatas&&l.a.createElement("div",{className:this.state.datatable_div_style+"card"},l.a.createElement("div",{id:""},l.a.createElement("div",{className:"customer_list_reactTable"},this.state.rowdatas.length>0&&l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"d-flex justify-content-between align-items-center",style:{padding:5}},l.a.createElement("p",{className:"no-margin text-white"},l.a.createElement("b",null,"Total Entries : ",this.state.copy.length)),l.a.createElement("div",{style:{position:"relative"}},l.a.createElement("i",{class:"fa-solid fa-magnifying-glass search_pos"}),l.a.createElement("input",{placeholder:"Search here",className:"search_posInput",onChange:function(t){return e.changeHandler(t.target.value)}}))),l.a.createElement(ua,{showPag:!0,defaultPageSize:10,minRow:0,row_data:void 0!==this.state.copy?this.state.copy:[],column_data:this.state.columndatas,resizable:!1,exportCSV:!0,csvFile:"Customer Lists",csvData:void 0!==this.state.copy?this.state.copy:[]}))),l.a.createElement(nt.a,{show:this.state.modalBox,onHide:this.handleModalClose,size:"xl"},l.a.createElement(nt.a.Header,{closeButton:!0,show:this.state.modalBox,onHide:this.handleModalClose},l.a.createElement(nt.a.Title,null,"Customer Accounts : ",this.state.cust_id)),l.a.createElement(nt.a.Body,null,l.a.createElement(pa,{entity:"customer",dp_cust_id:this.acc_number,cust_name:this.person_name,entity_id:this.state.cust_id})),l.a.createElement(nt.a.Footer,null,l.a.createElement(lt.a,{variant:"secondary",onClick:this.handleModalClose},"Close"))))))}}]),t}(st),Rr=(a(69),function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={comp_name:"borrower",biz_type:"individual",cus_type:"show_div"},a.handleCustTypeChange=function(e){var t=e.target.value;"flow_rm"==t&&b("flow_rel_mgr","create")||"data_prvdr_rm"==t&&b("data_prvdr_rel_mgr","create")||"individual"==t?(a.handleChange(e),a.props.onCustTypeChange(e),a.setState({biz_type:t})):(alert("You can not create a "+t+" customer"),window.location.reload())},a.handleCheck=function(e){e.target.checked?a.handleChange({target:{id:"use_as_ac_num",value:!0}}):a.handleChange({target:{id:"use_as_ac_num",value:!1}})},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.handleChange({target:{id:"use_as_ac_num",value:!0}})}},{key:"componentWillMount",value:function(){Object(X.a)(Object(d.a)(t.prototype),"componentWillMount",this).call(this),this.setOptionsToStateFromApi("lender"),this.load_dp_rel_mgr();this.setOptionsToStateFromApi("rel_mgr",Object(Z.a)({},this.def_req,{associated_with:"flow"})),"view"==this.props.mode&&this.setState({cus_type:"disable_div"})}},{key:"render",value:function(){var e=this;return console.log("this.props.data.photo_biz_lic"+this.props.data),l.a.createElement("div",{id:""},l.a.createElement("div",{className:"row no-margin align-items-center floatAdvancetitleBox agreementDateHeaderBox"},l.a.createElement("div",{className:"col-md-4"},l.a.createElement("h4",{className:"no-margin headerTitle"},this.props.title?this.props.title:"Customer Profile")),l.a.createElement("div",{className:"col-md-1 ".concat(this.state.edit_button_style)},l.a.createElement(Et,{entity:"customer",onClick:this.handleEdit})),l.a.createElement("div",{className:"col-md-1 ".concat(this.state.save_button_style)},l.a.createElement("input",{onClick:this.handleSave,type:"button",className:"btn btn-success btn-std",value:"Save"}))),l.a.createElement("div",{className:this.state.div_style},l.a.createElement("div",{className:"row no-margin labelTopgap align-items-end"},l.a.createElement("div",{className:"col-md-3"},l.a.createElement("span",{className:"viewCus_label"},"Business Name"),l.a.createElement("font",{className:"text-danger"},"   *  "),l.a.createElement("input",{id:"biz_name",value:this.props.data.biz_name,onChange:this.toUpperHandleChange,className:"form-control",required:!0})),l.a.createElement("div",{className:"col-md-3 ".concat(this.state.cus_type)},l.a.createElement("span",{className:"viewCus_label"},"Customer Type"),l.a.createElement("font",{className:"text-danger"},"   *  "),l.a.createElement("select",{id:"biz_type",value:this.props.data.biz_type,onChange:function(t){e.handleCustTypeChange(t)},className:"form-control",type:"text",required:"required"},this.getSelectOptions("borrower_type"))),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("span",{className:"viewCus_label"},"Business Address Type"),l.a.createElement("font",{className:"text-danger"},"   *  "),l.a.createElement("select",{id:"biz_addr_prop_type",value:this.props.data.biz_addr_prop_type,onChange:this.handleChange,className:"form-control",type:"text",required:"required"},this.getSelectOptions("biz_addr_prop_type"))),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("span",{className:"viewCus_label"},"Ownership "),l.a.createElement("font",{className:"text-danger"},"   *  ")," ",l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("label",null,l.a.createElement("input",{id:"ownership",type:"radio",name:"ownership",value:"owned",onChange:this.handleChange,checked:"owned"===this.props.data.ownership}),"  Owned \xa0\xa0\xa0"),l.a.createElement("label",null,l.a.createElement("input",{id:"ownership",type:"radio",name:"ownership",value:"rented",onChange:this.handleChange,checked:"rented"===this.props.data.ownership}),"  Rented \xa0\xa0\xa0"))),l.a.createElement("div",{className:"row no-margin labelTopgap align-items-end"},l.a.createElement("div",{className:"col-md-3"},l.a.createElement("span",{className:"viewCus_label"},"Business distance from Home"),l.a.createElement("font",{className:"text-danger"},"   *  "),l.a.createElement("select",{id:"business_distance",value:this.props.data.business_distance,onChange:this.handleChange,className:"form-control",type:"text",required:"required"},this.getSelectOptions("business_distance"))),"view"!==this.props.mode&&l.a.createElement(l.a.Fragment,null,l.a.createElement(na,{className:"col-md-3",label:"Data Provider Customer ID",id:"data_prvdr_cust_id",onChange:this.handleChange}),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("label",{className:"checkbox-inline"},l.a.createElement("input",{id:"use_as_ac_num",type:"checkbox",defaultChecked:!0,onChange:function(t){e.handleCheck(t)}}),l.a.createElement("span",null," Use this DP cust ID as A/C number for disbursal credit"))))),l.a.createElement("div",{className:"row labelTopgap no-margin align-items-end"},l.a.createElement("div",{className:"col-md-3"},l.a.createElement("span",{className:"viewCus_label"},"Lender"),l.a.createElement("font",{className:"text-danger"},"   *  "),l.a.createElement("select",{id:"lender_code",value:this.props.data.lender_code,onChange:this.handleChange,className:"form-control",type:"text",required:"required"},this.state.lender_dd)),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("span",{className:"viewCus_label"},"Account Provider's Relationship Manager"),l.a.createElement("font",{className:"text-danger"},"   *  "),l.a.createElement("select",{id:"dp_rel_mgr_id",value:this.props.data.dp_rel_mgr_id,onChange:this.handleChange,className:"form-control",type:"text",required:"required"},this.state.acc_prvdr_rel_mgr_dd)),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("span",{className:"viewCus_label"},"Flow Relationship Manager"),l.a.createElement("font",{className:"text-danger"},"   *  "),l.a.createElement("select",{id:"flow_rel_mgr_id",value:this.props.data.flow_rel_mgr_id,onChange:this.handleChange,className:"form-control",type:"text",required:"required"},this.state.flow_rel_mgr_dd)),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("span",{className:"viewCus_label"},"Registered Date"),l.a.createElement("font",{className:"text-danger"},"   *  "),l.a.createElement(Ft.a,{value:ge(this.props.data.reg_date),closeOnSelect:!0,onChange:function(t){e.handleDateChange("reg_date",t)},dateFormat:"DD MMM YYYY",timeFormat:!1,required:"required"}))),l.a.createElement("div",{className:"row"},"Customer Details"===this.props.title&&l.a.createElement("div",{className:"col-md-3"},l.a.createElement("span",null,"Number of Tills"),l.a.createElement("select",{id:"number_of_tills",value:this.props.data.number_of_tills,onChange:this.handleChange,className:"form-control",required:!0},l.a.createElement("option",{value:""},"Choose"),l.a.createElement("option",{value:"1"},"1"),l.a.createElement("option",{value:"2"},"2"),l.a.createElement("option",{value:"3"},"3"),l.a.createElement("option",{value:"4"},"4"),l.a.createElement("option",{value:"5"},"5"),l.a.createElement("option",{value:"6"},"6"),l.a.createElement("option",{value:"7"},"7"),l.a.createElement("option",{value:"8"},"8"),l.a.createElement("option",{value:"9"},"9"),l.a.createElement("option",{value:"10"},"10")))),("individual"==this.state.biz_type||"institutional"==this.state.biz_type)&&l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row labelTopgap no-margin"},l.a.createElement("div",{className:"col-md-6"},l.a.createElement(Tt,{id:"photo_shop",label:"Establishment Photo",borrower_id:this.props.data.id,cust_id:this.props.data.cust_id,db_file_name:this.props.data.photo_shop,type:"image",mode:this.props.mode,onCreateUpload:this.handleChange,onEditUpload:function(t){e.handleChangeForEdit(t),e.handleSave(t,"reload")}}))),l.a.createElement("div",{className:"row labelTopgap no-margin"},l.a.createElement("div",{className:"col-md-6"},l.a.createElement(Tt,{id:"photo_biz_lic",label:"Business Licence",borrower_id:this.props.data.id,cust_id:this.props.data.cust_id,db_file_name:this.props.data.photo_biz_lic,type:"image",mode:this.props.mode,onCreateUpload:this.handleChange,onEditUpload:function(t){e.handleChangeForEdit(t),e.handleSave(t,"reload")}})))),l.a.createElement("div",{className:"row labelTopgap no-margin",style:{paddingBottom:23}},l.a.createElement("div",{className:"col-md-6"},l.a.createElement("span",{className:"viewCus_label"},"Remarks"),l.a.createElement("textarea",{id:"remarks",value:this.props.data.remarks,onChange:this.handleChange,className:"form-control",required:!0})))))}}]),t}(ct)),Hr=function(e){function t(){var e,a,n;Object(c.a)(this,t);for(var l=arguments.length,r=new Array(l),s=0;s<l;s++)r[s]=arguments[s];return(n=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={biz_type:"individual",logout:Object(X.a)((a=Object(u.a)(n),Object(d.a)(t.prototype)),"touch_async",a).call(a),toList:!1,cust_id:null,disburse_style:"",biz_address:{touch:null},owner_person:{touch:null},contact_person:{touch:null},owner_address:{touch:null},contact_address:{touch:null},borrower:{},person_div_style:"show_div",send_country_code:!0,same_as_biz_address:!1,acc_num_check_box:"",pointer_evt:""},n.handleSubmit=function(e){e.preventDefault();var t=n.state.borrower;t.country_code=n.country_code,t.biz_address=n.state.biz_address,t.biz_address.country_code=n.country_code,t.owner_person=n.state.owner_person,t.owner_person.owner_address=n.state.owner_address,t.owner_person.owner_address.country_code=n.country_code,t.owner_person.country_code=n.country_code,"business_at_home"==n.state.borrower.business_distance?t.same_as_biz_address=!0:t.same_as_biz_address=!1,n.setState({disburse_style:"disable_div"}),kl(n.req({borrower:t},!0)).then(function(e){n.setState({disburse_style:""}),e&&("success"===e.status?(n.setState({cust_id:e.data}),n.setState({toList:!0}),alert("New Customer created successfully")):alert(e.message+"\n"+JSON.stringify(e.data)))})},n.handleCustTypeChange=function(e){n.setState({biz_type:e.target.value})},n.handleCheck=function(e){n.state.acc_num_check_box=1==e},n}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){var e=this;"view"===this.props.mode?(this.cust_id=this.props.match.params.cust_id,Sl(this.req({cust_id:this.cust_id,screen:"edit"})).then(function(t){if(t){e.borrower=t.data;var a=e.borrower.owner_person,n=a?a.owner_address:null,l=e.borrower.contact_persons?e.borrower.contact_persons:{};l.length>0&&l.map(function(t){return e.setState({contact_persons:t,contact_address:t.contact_address})}),e.setState({borrower:e.borrower,biz_address:e.borrower.biz_address,owner_person:a,owner_address:n,biz_type:e.borrower.biz_type}),"closed"==e.state.borrower.profile_status&&e.setState({pointer_evt:"pointer_evt"})}})):this.props.mode}},{key:"render",value:function(){var e=this;if("business_at_home"==this.state.borrower.business_distance)var t="hide_div";else t="show_div";return console.log("borrower"+this.state.borrower.photo_biz_lic),this.state.logout.then(function(t){return e.logout=t}),this.logout?l.a.createElement(l.a.Fragment,null):!0===this.state.toList?l.a.createElement(Y.a,{to:"/borrower/indiv/edit/".concat(this.state.cust_id)}):l.a.createElement("div",{className:"container date-range max-width containerTopmargin no-padding"},l.a.createElement("h5",{className:"no-margin headerTitle headerPadvert"},this.props.title+(this.state.borrower.name?" : "+this.state.borrower.name:"")+" "+(this.cust_id?this.cust_id:"")+(this.state.borrower.acc_number?" / "+this.state.borrower.acc_number:"")),l.a.createElement("form",{id:"borrower_form",class:"borrower_form",onSubmit:this.handleSubmit},l.a.createElement("div",{id:"",className:"".concat(this.state.pointer_evt," loggedPersondetailsBox")},("create"==this.props.mode||!Ql.a.isEmpty(this.state.borrower))&&l.a.createElement(Rr,{id:"borrower",data:this.state.borrower,onCustTypeChange:this.handleCustTypeChange,entity:"customer",screen:this.props.screen,mode:this.props.mode,onComponentChange:this.handleComponentChange,onCheck:this.handleCheck}),"individual"==this.state.biz_type&&l.a.createElement(l.a.Fragment,null,l.a.createElement(jt,{id:"biz_address",screen:"borrower",title:"Business Address",entity:"customer",gps:this.state.gps,data:this.state.biz_address,mode:this.props.mode,onComponentChange:this.handleComponentChange,onComponentReset:this.handleComponentReset}),l.a.createElement(zt,{id:"owner_person",title:"Business Owner Details",val:"Business Owner Details",entity:"customer",data:this.state.owner_person,mode:this.props.mode,onComponentChange:this.handleComponentChange})),"individual"==this.state.biz_type&&"view"===this.props.mode&&l.a.createElement("div",{className:t},l.a.createElement(jt,{id:"owner_address",entity:"customer",title:"Business Owner Address",data:this.state.owner_address,mode:this.props.mode,onComponentChange:this.handleComponentChange,onComponentReset:this.handleComponentReset})),"individual"==this.state.biz_type&&"view"!==this.props.mode&&l.a.createElement("div",null,l.a.createElement("div",{className:t},l.a.createElement("label",{className:"checkbox-inline"},l.a.createElement("h4",null,"Business Owner Address")),l.a.createElement(jt,{id:"owner_address",screen:"borrower",entity:"customer",data:this.state.owner_address,mode:this.props.mode,onComponentChange:this.handleComponentChange,onComponentReset:this.handleComponentReset}))),"individual"==this.state.biz_type&&!Ql.a.isEmpty(this.state.contact_persons)&&l.a.createElement(l.a.Fragment,null,l.a.createElement(zt,{id:"contact_person",title:"Handler Details",val:"Contact Person Details",entity:"customer",data:this.state.contact_person,mode:this.props.mode,onComponentChange:this.handleComponentChange}),l.a.createElement(jt,{id:"contact_address",screen:"borrower",title:"Handler Address",entity:"customer",data:this.state.contact_address,mode:this.props.mode,onComponentChange:this.handleComponentChange,onComponentReset:this.handleComponentReset}),l.a.createElement("br",null)),l.a.createElement("input",{type:"button",className:"btn btn-primary ".concat(this.state.disburse_style," ").concat("create"===this.props.mode?"show_button":"hide_button"),onClick:this.handleSubmit,value:"Create New Customer"}))))}}]),t}(st),qr=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={toList:!1,org:{touch:null},cust_id:null,biz_address:{touch:null},reg_address:{touch:null},borrower:{},address_div_style:"show_div",same_as_biz_address:!1},a.handleSubmit=function(e){e.preventDefault();var t=a.state.borrower;t.country_code=a.country_code,t.biz_type="Institution",t.biz_address=a.state.biz_address,t.biz_address.country_code=a.country_code,t.org=a.state.org,t.org.country_code=a.country_code,t.org.reg_address=a.state.reg_address,t.org.reg_address.country_code=a.country_code,t.same_as_biz_address=a.state.same_as_biz_address,kl(a.req({borrower:t},!0)).then(function(e){e&&("success"===e.status?(a.setState({cust_id:e.data}),a.setState({toList:!0}),alert("New Institutional Customer created successfully")):alert(e.message+"\n"+JSON.stringify(e.data)))})},a.handleCheckboxClick=function(e){e.target.checked?a.setState({address_div_style:"hide_div",same_as_biz_address:!0}):a.setState({address_div_style:"show_div",same_as_biz_address:!1})},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){var e=this;if("view"===this.props.mode){this.cust_id=this.props.match.params.cust_id;var t={cust_id:this.cust_id,screen:"edit"};Sl(this.req(t)).then(function(t){t&&(e.borrower=t.data,e.setState({borrower:e.borrower,org:e.borrower.org,biz_address:e.borrower.biz_address,reg_address:e.borrower.org.reg_address}))})}else this.props.mode}},{key:"render",value:function(){return!0===this.state.toList?l.a.createElement(Y.a,{to:"/borrower/ins/edit/".concat(this.state.cust_id)}):l.a.createElement("div",{className:"container"},l.a.createElement("h5",null,this.props.title+(this.state.borrower.name?" : "+this.state.borrower.name:"")+" "+(this.cust_id?this.cust_id:"")),l.a.createElement("form",{id:"borrower_form",onSubmit:this.handleSubmit},l.a.createElement("div",{id:""},l.a.createElement(Rr,{id:"borrower",title:"Customer Details",data:this.state.borrower,mode:this.props.mode,screen:this.props.screen,onComponentChange:this.handleComponentChange}),l.a.createElement("br",null),l.a.createElement(jt,{id:"biz_address",screen:"borrower",title:"Business Address",data:this.state.biz_address,mode:this.props.mode,onComponentChange:this.handleComponentChange,onComponentReset:this.handleComponentReset}),l.a.createElement("br",null),l.a.createElement(Mt,{id:"org",title:"Organisation Details",component:"Institutional Borrower",data:this.state.org,mode:this.props.mode,onComponentChange:this.handleComponentChange}),l.a.createElement("br",null),"view"===this.props.mode?l.a.createElement(jt,{id:"reg_address",title:"Registered Address",data:this.state.reg_address,mode:this.props.mode,onComponentChange:this.handleComponentChange,onComponentReset:this.handleComponentReset}):l.a.createElement("div",null,l.a.createElement("label",{className:"checkbox-inline"},l.a.createElement("h4",null,"Registered Address\xa0\xa0",l.a.createElement("input",{type:"checkbox",onClick:this.handleCheckboxClick}),"\xa0\xa0","Same as Business Address")),l.a.createElement("div",{className:"".concat(this.state.address_div_style)},l.a.createElement(jt,{id:"reg_address",screen:"borrower",data:this.state.reg_address,mode:this.props.mode,onComponentChange:this.handleComponentChange,onComponentReset:this.handleComponentReset})),l.a.createElement("hr",null)),l.a.createElement("br",null),l.a.createElement("input",{type:"button",className:"btn btn-primary ".concat("create"===this.props.mode?"show_button":"hide_button"),onClick:this.handleSubmit,value:"Create New Customer"}))),l.a.createElement("br",null),l.a.createElement("br",null))}}]),t}(st),Ir=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={modalBox2:!1,status_history:[],audit_type:"status_change",columns:[]},a.StatusModalClose=function(){a.setState({modalBox2:!1})},a.audit_changes=function(e){var t={record_code:a.props.record_code,audit_type:a.props.audit_type};Xe(a.req(t)).then(function(e){if(e&&"success"===e.status){var t;t=[{Header:"Change Time",id:"Date",accessor:function(e){return ve(e.created_at,!0)}},{Header:a.props.title+" Before",accessor:"data_before"},{Header:a.props.title+" After",accessor:"data_after",style:{whiteSpace:"unset"},width:400},{Header:"Remarks",accessor:"remarks",style:{whiteSpace:"unset"}}],a.setState({modalBox2:!0,status_history:e.data,columns:t})}}),a.setState({modalBox2:!0})},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return l.a.createElement(nt.a,{show:this.state.modalBox2,onHide:this.StatusModalClose,size:"xl",className:"recordAuditbox"},l.a.createElement(nt.a.Header,{closeButton:!0,show:this.state.modalBox2,onHide:this.StatusModalClose},l.a.createElement(nt.a.Title,{style:{fontWeight:"bold"}}," ",this.props.title+" Change History"," ",Ze(this.props.cust_id))),l.a.createElement(ua,{showPag:!1,minRow:0,row_data:void 0!==this.state.status_history?this.state.status_history:[],column_data:this.state.columns,resizable:!1}))}}]),t}(ct),zr=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={modalBox:!1,status_change:{},audit_type:"status_change"},a.updateStatus=function(e){var t=a.state.status_change,n=a.validate_status_change(t),l=e.target.value.toLowerCase()+"d";if(n){var r=Object(Z.a)({id:a.props.id,cust_id:a.props.cust_id,status:l},t),s=Object(S.a)({},e.target.name,r);Ol(a.req(s)).then(function(e){e&&("success"===e.status?(a.handleModalClose(),window.location.reload()):alert(e.message+"\n"+JSON.stringify(e.data)))})}},a.handleModalClose=function(){a.setState({modalBox:!1})},a.handleStatusChange=function(e){var t=a.state.status_change;t[e.target.id]=e.target.value,a.setState({status_change:t})},a.handleReasonChange=function(e){var t=a.state.status_change;t.status_reason=e.map(function(e){return e.value}),a.setState({status_change:t})},a.handleModalOpen=function(e){a.setState({modalBox:!0})},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){console.log(this.props,"props on will mount"),this.setState({status:this.props.status});var e=this.props.parent;e||("borrower"==(e=this.props.entity.slice(0,-1))?e="customer":"loan_product"==e?e="product":"loan_product_template"==e?e="template":"acc_provider"==e?e="acc_prvdr":"master_data_key"==e&&(e="data_key"));b(e,"create")?this.btn_style=!1:this.btn_style=!0}},{key:"componentWillReceiveProps",value:function(e){this.setState({status:e.status});var t=e.parent;t||("borrower"==(t=e.entity.slice(0,-1))?t="customer":"loan_product"==t?t="product":"loan_product_template"==t?t="template":"acc_provider"==t?t="acc_prvdr":"master_data_key"==t&&(t="data_key"));b(t,"create")?this.btn_style=!1:this.btn_style=!0}},{key:"validate_status_change",value:function(e){return!(!e.remarks||!e.status_reason)||(alert("Please enter required fields"),!1)}},{key:"render",value:function(){var e=this;return l.a.createElement(l.a.Fragment,null,l.a.createElement(nt.a,{show:this.state.modalBox,onHide:this.handleModalClose,size:"l"},l.a.createElement(nt.a.Header,{closeButton:!0,show:this.state.modalBox,onHide:this.handleModalClose},l.a.createElement(nt.a.Title,null,"Reason to ",we(this.state.status))),l.a.createElement(nt.a.Body,null,l.a.createElement("div",{className:"form-group row mx-0 mb-2 "},l.a.createElement("label",{for:"",className:"col-sm-5 font-weight-bold label__name reset-padding"}," Reason",l.a.createElement("font",{className:"text-danger"},"   *  ")),l.a.createElement("div",{className:"col-sm-7 reset-padding"},l.a.createElement("div",null,"disabled"===this.state.status&&l.a.createElement(Cl.a,{onChange:function(t){e.handleReasonChange(t)},options:this.getMultiSelectOptions("reason_for_enable"),isMulti:!0}),"enabled"===this.state.status&&l.a.createElement(Cl.a,{onChange:function(t){e.handleReasonChange(t)},options:this.getMultiSelectOptions("reason_for_disable"),isMulti:!0})),l.a.createElement("div",{className:"control-me"}))),l.a.createElement("div",{className:"rule-form-group form-group row reset-margin"},l.a.createElement("label",{for:"",className:"col-sm-5 font-weight-bold label__name reset-padding"},"Remarks",l.a.createElement("font",{className:"text-danger"},"   *  ")),l.a.createElement("div",{className:"col-sm-7 reset-padding"},l.a.createElement("div",null,l.a.createElement("textarea",{type:"text",id:"remarks",className:"form-control",onChange:function(t){e.handleStatusChange(t)},maxLength:"256"}))))),l.a.createElement(nt.a.Footer,null,l.a.createElement(lt.a,{variant:"secondary",onClick:this.handleModalClose,className:"btn-std"},"Close"),l.a.createElement(lt.a,{variant:"primary",name:this.props.entity,value:we(this.state.status),className:"ml-2 btn-std",onClick:this.updateStatus},"Submit"))),l.a.createElement(Ir,{record_code:this.props.cust_id,audit_type:this.state.audit_type,title:"Customer Status",ref:function(t){e.RecordAudit=t}}),l.a.createElement("button",{className:"btn btn-primary btn-std",onClick:function(){return e.RecordAudit.audit_changes()}},"Status History"),console.log(this.state.status,"button status"),l.a.createElement("button",{id:this.props.id,type:"button",name:this.props.entity,onClick:this.handleModalOpen,className:"btn btn-primary btn-std ml-2",disabled:this.btn_style},we(this.state.status)))}}]),t}(ct),Wr=(a(170),a(80)),Vr={width:"100%",height:"80vh"};function Yr(e){var t=e.coordinates,a=Object(n.useState)({lat:8.088306,lng:77.538452}),r=Object(ea.a)(a,2),s=r[0],c=r[1];Object(n.useEffect)(function(){if(t){var e=t.split(",")[0],a=t.split(",")[1],n=Number(a),l=Number(e);c({lat:l,lng:n})}},[t]);var o=Object(Wr.c)({googleMapsApiKey:"AIzaSyBXK88JmBu1jfJinv0d8bU4sFZN8o7LgPI"}),i=o.isLoaded;return o.loadError?"Error loading maps":i?l.a.createElement("div",null,l.a.createElement(Wr.a,{mapContainerStyle:Vr,zoom:20,center:s},l.a.createElement(Wr.b,{position:{lat:s.lat,lng:s.lng},onClick:function(e){return function(e){console.log(e,"value from marker")}(e)}}))):"Loading maps"}var Ur=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={server_time:{},checkin_req:{},pointer_evt:"",mapShow:!1,show_force_checkin_btn:"disable_div"},a.handleViewAccountsClick=function(e,t,n){a.setState({cust_id:e.target.id}),a.acc_number=t,a.person_name=n,a.setState({modalBox1:"true"})},a.handleModalClose=function(e){a.setState({modalBox1:!1,modalBox2:!1})},a.handleCheckIn=function(e){if(!1!==window.confirm("Are you sure to Check-In?")){var t=a.state.checkin_req;t.cust_id=a.props.customer.cust_id,ka(a.req({checkin_req:t})).then(function(e){if(e)if("success"===e.status){var t=e.data,a=!0;"lastvisit"==t.action&&(a=window.confirm(t.message)),a&&t.visit_id&&window.open("/checkout/".concat(t.cust_id,"/").concat(t.visit_id),"_blank")}else alert(e.message+"\n"+JSON.stringify(e.data))})}},a.handleForceCheckIn=function(e){if(!1!==window.confirm("Are you sure to allow Force Check-In?")){var t=a.props.customer.cust_id;xa(a.req({cust_id:t})).then(function(e){e&&(e.status,alert(e.message),window.location.reload())})}},a.handleSubmit=function(e){var t=a.state.checkin_req;t.cust_id=a.props.customer.cust_id,t.visit_start_time=a.state.server_time.server_time_db,ka(a.req({checkin_req:t})).then(function(e){e&&("success"===e.status?(alert(e.message),a.setState({modalBox2:!1})):alert(e.message+"\n"+JSON.stringify(e.data)))})},a.handleCheckinChange=function(e){var t=a.state.checkin_req;t[e.target.id]=e.target.value,a.setState({checkin_req:t})},a.bring_to_probation=function(e){var t={cust_id:a.props.customer.cust_id};Al(a.req(t,!0)).then(function(e){a.resp(e),e&&("success"===e.status?window.location.reload():alert(e.message+"\n"+JSON.stringify(e.data)))})},a.repeatFloatAdvance=function(e){var t={cust_id:a.props.customer.cust_id};Pa(a.req(t)).then(function(e){e&&e&&(alert("Float Advance Application created successfully"),window.location.reload())})},a.handleSignAgreement=function(e){var t=!0;a.props.customer.current_aggr_doc_id&&(t=window.confirm("An agreement already exists for this customer. Do you want to inactivate it and generate a new agreement? ")),t&&window.open("/agreement/upload/".concat(a.props.customer.cust_id),"_blank")},a.close_profile=function(e){if(!1!==window.confirm("Are you sure to close this profile?")){var t={cust_id:a.props.customer.cust_id};Fl(a.req(t)).then(function(e){a.resp(e),e&&("success"===e.status?window.location.reload():alert(e.message+"\n"+JSON.stringify(e.data)))})}},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){}},{key:"componentWillReceiveProps",value:function(e){"closed"==e.customer.profile_status&&this.setState({pointer_evt:"pointer_evt"}),e.customer.show_force_checkin_btn&&this.setState({show_force_checkin_btn:""})}},{key:"render",value:function(){var e=this;b("customer","bring_to_probation");return console.log("---------------------------------------------------------"+this.props.customer.current_aggr_doc_id),l.a.createElement("div",{className:"".concat(this.state.pointer_evt)},l.a.createElement("div",{className:"floatAdvancecontainer floatAdvancecontainer_nopad"},"closed"==this.props.customer.profile_status&&l.a.createElement("div",{class:"closedStamp"},l.a.createElement("div",{className:"stamp is-nope"},"Closed")),l.a.createElement("section",null,l.a.createElement("p",{className:"personalDetailstextval no-margin preHeaderpad headerTitle",style:{display:"inline-flex"}},this.props.customer.biz_name),l.a.createElement("p",{className:"mt-10 headerTitle no-margin preHeaderpad",style:{display:"inline-flex"}},"\xa0 | ",this.props.customer.cust_id,b("customer","edit")&&l.a.createElement($.a,{to:"/borrower/indiv/edit/"+this.props.customer.cust_id,target:"_blank",className:"px-3 fs-6"},l.a.createElement("i",{className:"pb-2 material-icons flag-cursor"},"edit"))),l.a.createElement("div",{className:"row no-margin",style:{paddingBottom:15}},l.a.createElement("span",{className:"statusStyle","data-toggle":"tooltip","data-placement":"top",title:"Category"},Ze(this.props.customer.category),0===this.props.customer.prob_fas&&l.a.createElement("span",{className:"text-white"}," \xa0|\xa0"),this.props.customer.prob_fas>0&&l.a.createElement("span",{className:"text-white"},"(",this.props.customer.prob_fas,"/ ",this.props.customer.tot_prob_cond_fas,") |\xa0")),l.a.createElement("span",{className:"statusStyle","data-toggle":"tooltip","data-placement":"top",title:"Total FAs"},this.props.customer.tot_loans," FAs",l.a.createElement("span",{className:"text-white"},"\xa0|\xa0")),l.a.createElement("span",{className:"statusStyle","data-toggle":"tooltip","data-placement":"top",title:"Activity Status"},pe(this.props.customer.activity_status),l.a.createElement("span",{className:"text-white"},"\xa0|\xa0")),b("customer","risk_category")&&l.a.createElement("span",{className:"statusStyle","data-toggle":"tooltip","data-placement":"top",title:"Risk Category"},Ze(this.props.customer.risk_category)),l.a.createElement("span",{className:"statusStyle","data-toggle":"tooltip","data-placement":"top",title:"Status"},l.a.createElement("span",{className:"text-white"},"\xa0|\xa0"),Ze(this.props.customer.status),l.a.createElement("span",{className:"text-white"},"\xa0|\xa0")),l.a.createElement(zr,{show_1l:"true",id:this.props.customer.id,entity:"borrowers",status:this.props.customer.status,category:this.props.customer.category,prob_fas:this.props.customer.prob_fas,kyc_status:this.props.customer.kyc_status,cust_id:this.props.customer.cust_id,tot_prob_cond_fas:this.props.customer.tot_prob_cond_fas,cond_count:this.props.customer.cond_count}),b("customer","close")&&l.a.createElement("div",{className:"ml-auto"},l.a.createElement("button",{type:"button",class:"btn btn-danger btn-std",disabled:this.state.calling_api,onClick:this.close_profile},"Close Profile")))),l.a.createElement("section",null,l.a.createElement("div",{className:"floatAdvancetitleBox agreementDateHeaderBox"},l.a.createElement("div",{className:"row no-margin agreementDateHeaderBox_pad verticalAlign"},l.a.createElement("div",{className:"no-padding col-lg-2 text-center"},l.a.createElement("h2",{className:"no-margin text-white agreementDateHeaderBoxdate"},"Last Visit : "),l.a.createElement("h2",{className:"no-margin agreementDateHeaderBoxdate agreementDateHeaderBoxdateno_pad text-blue"},"\xa0",ge(this.props.customer.last_visit_date))),l.a.createElement("div",{className:"no-padding col-lg-4 text-center"},l.a.createElement("button",{className:"btn btn-primary",onClick:this.handleCheckIn},l.a.createElement("i",{className:"fa fa-map-marker","aria-hidden":"true"}),"Check In"),l.a.createElement("button",{className:"btn btn-primary",onClick:this.handleViewAccountsClick},l.a.createElement("i",{className:"fa fa-eye",z:!0}),"View A/C"),b("field_visit","allow_force_checkin")&&l.a.createElement("button",{className:"btn btn-primary ".concat(this.state.show_force_checkin_btn),disabled:this.state.calling_api,onClick:this.handleForceCheckIn},"Allow Force CheckIn")),l.a.createElement("div",{className:"no-padding col-lg-6"},l.a.createElement($.a,{to:"/field_visit/search/"+this.props.customer.cust_id,target:"_blank"},l.a.createElement("a",{className:"custVisit_link"},l.a.createElement("u",null,"Recent Visits")),l.a.createElement("span",{className:"text-white",style:{fontSize:15}},"\xa0|\xa0")),l.a.createElement($.a,{to:"/call_log/search/"+this.props.customer.cust_id,target:"_blank"},l.a.createElement("a",{className:"custVisit_link"},l.a.createElement("u",null,"Recent Calls")),l.a.createElement("span",{className:"text-white",style:{fontSize:15}},"\xa0|\xa0")),null!=this.props.customer.ongoing_loan_doc_id&&l.a.createElement($.a,{to:"/fa/view/"+this.props.customer.ongoing_loan_doc_id,target:"_blank"},l.a.createElement("a",{className:"custVisit_link"},l.a.createElement("u",null,"View Ongoing FA")),l.a.createElement("span",{className:"text-white",style:{fontSize:15}},"\xa0|\xa0")),null!=this.props.customer.last_loan_doc_id&&l.a.createElement($.a,{to:"/fa/view/"+this.props.customer.last_loan_doc_id},l.a.createElement("a",{href:"",className:"custVisit_link"},"View Last FA"))))),l.a.createElement("div",{className:"loggedPersondetailsBox mapModal_width"},l.a.createElement("section",null,l.a.createElement("div",{className:"row no-margin"},l.a.createElement("div",{className:"col-lg-3"},l.a.createElement("p",{className:"no-margin loggedPersondetails loggedPersonid text-center"},this.props.customer.cust_id),l.a.createElement("div",{className:"loggedPersondetailsImg"},l.a.createElement(lr,{className:"img-fluid",image_path:this.props.customer.photo_pps_path,file_name:this.props.customer.photo_pps})),l.a.createElement("p",{className:"personalDetailstextval no-margin loggedPersondetails loggedPersonname text-center"},this.props.customer.cust_name)),l.a.createElement("div",{className:"col-lg-3 personalDetailsbox"},l.a.createElement("ul",{className:"no-padding"},l.a.createElement("li",null,l.a.createElement("div",{className:""},l.a.createElement("p",{className:"viewCus_label no-margin"},l.a.createElement("i",{class:"fa-solid fa-phone cusVisiticon"}),"Mobile Number"),l.a.createElement("p",{className:"viewCus_labelVal  no-margin"},this.props.owner_person.mobile_num))),l.a.createElement("li",null,l.a.createElement("div",{className:""},l.a.createElement("p",{className:"viewCus_label no-margin"},l.a.createElement("i",{class:"fa-solid fa-location-dot cusVisiticon"}),"Location"),l.a.createElement("p",{className:"viewCus_labelVal no-margin"},this.props.customer.location))),l.a.createElement("li",null,l.a.createElement("div",{className:""},l.a.createElement("p",{className:"viewCus_label no-margin"},l.a.createElement("i",{class:"fa-solid fa-map cusVisiticon"}),"Territory"),l.a.createElement("p",{className:"viewCus_labelVal no-margin"},this.props.customer.territory))),l.a.createElement("li",null,l.a.createElement("div",{className:""},l.a.createElement("p",{className:"viewCus_label no-margin"},l.a.createElement("i",{class:"fa-solid fa-map-pin cusVisiticon"}),"GPS"),l.a.createElement("p",{className:"viewCus_labelVal  no-margin","data-toggle":"modal","data-target":"#exampleModal",style:{cursor:"pointer"}},this.props.customer.gps)),l.a.createElement("div",{class:"modal fade",id:"exampleModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},l.a.createElement("div",{class:"modal-dialog",role:"document"},l.a.createElement("div",{class:"modal-content"},l.a.createElement("div",{class:"modal-header"},l.a.createElement("h5",{class:"modal-title",id:"exampleModalLabel"},"Map View"),l.a.createElement("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close"},l.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),l.a.createElement("div",{class:"modal-body"},l.a.createElement(Yr,{coordinates:this.props.customer.gps})))))))),l.a.createElement("div",{className:"col-lg-3 personalDetailsciewIdbox"},l.a.createElement("ul",{className:"no-padding"},l.a.createElement("li",null,l.a.createElement("div",{className:""},l.a.createElement("p",{className:"viewCus_label no-margin"},"Flow RM"),l.a.createElement("p",{className:"viewCus_labelVal no-margin"},this.props.customer.flow_rel_mgr_name))),l.a.createElement("li",null,l.a.createElement("div",{className:""},l.a.createElement("p",{className:"viewCus_label no-margin"},"Partner RM"),l.a.createElement("p",{className:"viewCus_labelVal no-margin"},this.props.customer.dp_rel_mgr_name))),l.a.createElement("li",null,l.a.createElement("div",{className:""},l.a.createElement("p",{className:"viewCus_label no-margin"},"Registered RM"),l.a.createElement("p",{className:"viewCus_labelVal no-margin"},this.props.customer.reg_flow_rel_mgr_name))))),l.a.createElement("div",{className:"col-lg-3 personalDetailsciewIdbox"},l.a.createElement("ul",{className:"no-padding"},l.a.createElement("li",null,l.a.createElement("div",{className:""},l.a.createElement("p",{className:"viewCus_label no-margin"},"Registration Date"),l.a.createElement("p",{className:"viewCus_labelVal no-margin"},ge(this.props.customer.reg_date)))),l.a.createElement("li",null,l.a.createElement("div",{className:""},l.a.createElement("p",{className:"viewCus_label no-margin"},"Last Visit Date"),l.a.createElement("p",{className:"viewCus_labelVal no-margin"},ge(this.props.customer.last_visit_date)))))))),l.a.createElement("section",{className:"agreementPhotobox"},l.a.createElement("div",{className:"agreementPhotobox_padTop"},l.a.createElement("div",{className:"row no-margin text-center"},l.a.createElement("div",{className:"col-lg-4 cusVisit_imgCen"},l.a.createElement("span",{className:"no-padding viewCus_imglabel"},"Selfie"),l.a.createElement(lr,{className:"img-fluid",image_path:this.props.customer.photo_selfie_path,file_name:this.props.customer.photo_selfie})),l.a.createElement("div",{className:"col-lg-4 cusVisit_imgCen"},l.a.createElement("span",{className:"no-padding viewCus_imglabel"},"Establishment Photo"),l.a.createElement(lr,{className:"img-fluid",image_path:this.props.customer.photo_shop_path,file_name:this.props.customer.photo_shop})),l.a.createElement("div",{className:"col-lg-4 cusVisit_imgCen"},l.a.createElement("span",{className:"no-padding viewCus_imglabel"},"Biz License Photo"),l.a.createElement(lr,{className:"img-fluid",image_path:this.props.customer.photo_biz_lic_path,file_name:this.props.customer.photo_biz_lic}))))),l.a.createElement("div",{className:"floatAdvanceperiodHeaderBox"},l.a.createElement("h2",{className:"floatAdvanceperiodHeader no-margin padL_15"},"Agreement")),l.a.createElement("section",{className:"agreementSignbtn_Box"},l.a.createElement("ul",{className:"pad_15 no-margin ul4_count cust_agreementBox"},l.a.createElement("li",null,l.a.createElement("div",{className:""},l.a.createElement("p",{className:"viewCus_label no-margin no-padding"},"Agreement ID"),l.a.createElement("p",{className:"viewCus_labelVal no-margin"},this.props.customer.current_aggr_doc_id))),l.a.createElement("li",null,l.a.createElement("div",{className:""},l.a.createElement("p",{className:"viewCus_label no-margin no-padding"},"Status"),l.a.createElement("p",{className:"viewCus_labelVal no-margin text-capitalize"},this.props.customer.aggr_status))),l.a.createElement("li",null,l.a.createElement("div",{className:""},l.a.createElement("p",{className:"viewCus_label no-margin no-padding"},"Valid Upto"),l.a.createElement("p",{className:"viewCus_labelVal no-margin"},this.props.customer.aggr_valid_upto))),l.a.createElement("li",null,l.a.createElement($.a,{to:"/agreement/list/"+this.props.customer.cust_id},l.a.createElement("button",{className:"btn btn-light no-margin"},"List Customer Agreements")),this.props.customer.data_consent_path&&l.a.createElement($.a,{to:"".concat(this.props.customer.data_consent_path)+"/"+"".concat(this.props.customer.file_data_consent),style:{marginLeft:10,marginBottom:0}},l.a.createElement("button",{className:"btn btn-light no-margin"},"View Customer Data Consent")))))))),l.a.createElement(nt.a,{show:this.state.modalBox1,onHide:this.handleModalClose,size:"xl"},l.a.createElement(nt.a.Header,{closeButton:!0,show:this.state.modalBox1,onHide:this.handleModalClose},l.a.createElement(nt.a.Title,{style:{fontSize:20}},"Customer Accounts :  ",this.props.customer.cust_id)),l.a.createElement(nt.a.Body,null,l.a.createElement(pa,{entity:"customer",acc_number:this.acc_number,cust_name:this.person_name,entity_id:this.props.customer.cust_id})),l.a.createElement(nt.a.Footer,null,l.a.createElement(lt.a,{variant:"secondary",onClick:this.handleModalClose},"Close"))),l.a.createElement(nt.a,{show:this.state.modalBox2,onHide:this.handleModalClose,size:"l"},l.a.createElement(nt.a.Header,{closeButton:!0,show:this.state.modalBox1,onHide:this.handleModalClose},l.a.createElement(nt.a.Title,null,"Check In")),l.a.createElement(nt.a.Body,null,l.a.createElement("div",{className:"container"},l.a.createElement("form",null,l.a.createElement("div",{className:"rule-form-group  form-group row reset-margin"},l.a.createElement("label",{for:"",className:"col-sm-5 mb-3 label__name font-weight-bold reset-padding"},"Flow Cust ID | DP Cust ID"),l.a.createElement("div",{className:"col-sm-7 reset-padding"},l.a.createElement("div",null,l.a.createElement("label",{className:"",id:"cust_id"},this.props.customer.cust_id," | ",this.props.customer.acc_number)),l.a.createElement("div",{className:"control-me"}))),l.a.createElement("div",{className:"rule-form-group form-group row reset-margin"},l.a.createElement("label",{for:"",className:"col-sm-5 mb-3 font-weight-bold  label__name reset-padding"},"Address"),l.a.createElement("div",{className:"col-sm-7 reset-padding"},l.a.createElement("div",null,l.a.createElement("label",{className:"",id:"cust_id"},this.props.customer.cust_addr_txt)),l.a.createElement("div",{className:"control-me"}))),l.a.createElement("div",{className:"rule-form-group form-group row reset-margin"},l.a.createElement("label",{for:"",className:"col-sm-5 mb-3 font-weight-bold  label__name reset-padding"},"Check In At"),l.a.createElement("div",{className:"col-sm-7 reset-padding"},l.a.createElement("div",null,l.a.createElement("label",{className:"",id:"visit_start_time"},this.state.server_time.server_time_ui)),l.a.createElement("div",{className:"control-me"}))),l.a.createElement("div",{className:"rule-form-group form-group row reset-margin"},l.a.createElement("label",{for:"",className:"col-sm-5 font-weight-bold label__name reset-padding"},"Time Spent"),l.a.createElement("div",{className:"col-sm-7 reset-padding"},l.a.createElement("div",null,l.a.createElement("select",{id:"time_spent",className:"form-control mb-3",onChange:function(t){e.handleCheckinChange(t)}},l.a.createElement("option",{value:""},"choose"),l.a.createElement("option",{value:"5"},"5 Minutes"),l.a.createElement("option",{value:"10"},"10 Minutes"),l.a.createElement("option",{value:"15"},"15 Minutes"),l.a.createElement("option",{value:"20"},"20 Minutes"),l.a.createElement("option",{value:"25"},"25 Minutes"),l.a.createElement("option",{value:"30"},"30 Minutes"))),l.a.createElement("div",{className:"control-me"}))),l.a.createElement("div",{className:"rule-form-group form-group row reset-margin "},l.a.createElement("label",{for:"",className:"col-sm-5 font-weight-bold label__name reset-padding"},"Visit Purpose"),l.a.createElement("div",{className:"col-sm-7 reset-padding"},l.a.createElement("div",null,l.a.createElement("select",{id:"visit_purpose",className:"form-control mb-3",onChange:function(t){e.handleCheckinChange(t)}},this.getSelectOptions("visit_purpose"))),l.a.createElement("div",{className:"control-me"}))),l.a.createElement("div",{className:"rule-form-group form-group row reset-margin"},l.a.createElement("label",{for:"",className:"col-sm-5 font-weight-bold label__name reset-padding"},"Remarks"),l.a.createElement("div",{className:"col-sm-7 reset-padding"},l.a.createElement("div",null,l.a.createElement("input",{autocomplete:"off",type:"text",id:"remarks",className:"form-control",onChange:function(t){e.handleCheckinChange(t)},maxLength:"50"})),l.a.createElement("div",{className:"control-me"}))),l.a.createElement("div",{className:"rule-form-group form-group row reset-margin"},l.a.createElement("label",{className:"cameraButton"},"Take a picture"),l.a.createElement("div",{className:"col-sm-7 reset-padding"},l.a.createElement("div",null,l.a.createElement("input",{type:"file",accept:"image/*",capture:""})),l.a.createElement("div",{className:"control-me"})))))),l.a.createElement(nt.a.Footer,null,l.a.createElement("button",{type:"button",className:"btn btn-primary float-right mr-1",onClick:this.handleSubmit,disable:!0},"Submit"),l.a.createElement(lt.a,{variant:"secondary",onClick:this.handleModalClose},"Close"))))}}]),t}(ct),Jr=function(e){function t(){return Object(c.a)(this,t),Object(i.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"floatAdvancetitleBox",style:{backgroundColor:"#202940"}},l.a.createElement("div",{className:"floatAdvanceperiodHeaderBox"},l.a.createElement("h2",{className:"floatAdvanceperiodHeader padL_15 no-margin"},this.props.title)),l.a.createElement("div",{className:"row no-margin"},l.a.createElement("div",{className:"col-md-3"},l.a.createElement("div",null,l.a.createElement("p",{className:"no-margin viewCus_label"},"First Name"),l.a.createElement("p",{className:"no-margin viewCus_labelVal"},this.props.data.first_name)),l.a.createElement("div",null,l.a.createElement("p",{className:"no-margin viewCus_label"},"Middle Name"),l.a.createElement("p",{className:"no-margin viewCus_labelVal"},this.props.data.middle_name)),l.a.createElement("div",null,l.a.createElement("p",{className:"no-margin viewCus_label"},"Last Name"),l.a.createElement("p",{className:"no-margin viewCus_labelVal"},this.props.data.last_name))),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("div",null,l.a.createElement("p",{className:"no-margin viewCus_label"},"DOB"),l.a.createElement("p",{className:"no-margin viewCus_labelVal"},this.props.data.dob)),l.a.createElement("div",null,l.a.createElement("p",{className:"no-margin viewCus_label"},"Gender"),l.a.createElement("p",{className:"no-margin viewCus_labelVal"},Ze(this.props.data.gender))),l.a.createElement("div",null,l.a.createElement("p",{className:"no-margin viewCus_label"},"Email ID"),l.a.createElement("p",{className:"no-margin viewCus_labelVal"},this.props.data.email_id))),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("div",null,l.a.createElement("p",{className:"no-margin viewCus_label"},"National ID"),l.a.createElement("p",{className:"no-margin viewCus_labelVal"},this.props.data.national_id)),l.a.createElement("div",null,l.a.createElement("p",{className:"no-margin viewCus_label"},"Mobile Number"),l.a.createElement("p",{className:"no-margin viewCus_labelVal"},this.props.data.mobile_num)),l.a.createElement("div",null,l.a.createElement("p",{className:"no-margin viewCus_label"},"WhatsApp Number"),l.a.createElement("p",{className:"no-margin viewCus_labelVal"},this.props.data.whatsapp))),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("div",null,l.a.createElement("p",{className:"no-margin viewCus_label"},"Alt Biz Mobile Num 1"),l.a.createElement("p",{className:"no-margin viewCus_labelVal"},this.props.data.alt_biz_mobile_num_1)),l.a.createElement("div",null,l.a.createElement("p",{className:"no-margin viewCus_label"},"Alt Biz Mobile Num 2"),l.a.createElement("p",{className:"no-margin viewCus_labelVal"},this.props.data.alt_biz_mobile_num_2)),l.a.createElement("div",null))),l.a.createElement("div",{className:"row no-margin text-center pad_15"},l.a.createElement("div",{className:"col-md-6 no-padding cusVisit_imgCen"},l.a.createElement(lr,{title:"National ID Photo",image_path:this.props.data.photo_national_id_path,file_name:this.props.data.photo_national_id})),l.a.createElement("div",{className:"col-md-6 no-padding cusVisit_imgCen"},l.a.createElement(lr,{title:"National ID Back Photo",image_path:this.props.data.photo_national_id_back_path,file_name:this.props.data.photo_national_id_back})))))}}]),t}(ct),Kr=function(e){function t(){return Object(c.a)(this,t),Object(i.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{variant:"",className:"floatAdvancetitleBox",style:{backgroundColor:"#202940"}},l.a.createElement("div",{className:"floatAdvanceperiodHeaderBox"},l.a.createElement("h2",{className:"floatAdvanceperiodHeader padL_15 no-margin"},this.props.title)),l.a.createElement("div",{className:"row no-margin",style:{paddingBottom:15}},Object.entries(this.props.data).map(function(e){var t=Object(ea.a)(e,2),a=t[0],n=t[1];return"id"!=a&&l.a.createElement("div",{key:a,className:"col-md-3"},"gps"===a?l.a.createElement("div",null,l.a.createElement("p",{className:"no-margin viewCus_label"},Ze(a,"address_fields")),l.a.createElement("p",{className:"no-margin viewCus_labelVal","data-toggle":"modal","data-target":"#exampleModal",style:{cursor:"pointer"}},pe(n)),l.a.createElement("div",{class:"modal fade",id:"exampleModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},l.a.createElement("div",{class:"modal-dialog",role:"document"},l.a.createElement("div",{class:"modal-content"},l.a.createElement("div",{class:"modal-header"},l.a.createElement("h5",{class:"modal-title",id:"exampleModalLabel"},"Map View"),l.a.createElement("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close"},l.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),l.a.createElement("div",{class:"modal-body"},l.a.createElement(Yr,{coordinates:n})))))):l.a.createElement("div",null,l.a.createElement("p",{className:"no-margin viewCus_label"},Ze(a,"address_fields")),l.a.createElement("p",{className:"no-margin viewCus_labelVal"},pe(n))))}),this.props.data.photo_shop_path&&l.a.createElement("div",{className:"col-md-3"},l.a.createElement("b",null,"Establishment Photo"),l.a.createElement("img",{src:this.root+this.props.data.photo_shop_path+"/s_"+this.props.data.photo_shop,alt:this.props.data.photo_shop_path+"/s_"+this.props.data.photo_shop})))))}}]),t}(ct),Gr=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={customer:{},owner_person:{},biz_address:{}},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){var e=this;this.cust_id=this.props.match.params.cust_id,Sl(this.req({cust_id:this.cust_id,screen:"view"},!0)).then(function(t){t&&(e.owner_address=e.contact_persons=null,t.data.owner_address_id!=t.data.biz_address_id&&t.data.owner_person&&(e.owner_address=t.data.owner_person.owner_address),t.data.contact_persons&&(e.contact_persons=t.data.contact_persons),e.setState({customer:t.data,owner_person:t.data.owner_person,biz_address:t.data.biz_address}))})}},{key:"render",value:function(){return l.a.createElement("div",{className:"container containerTopmargin max-width no-padding"},l.a.createElement(Ur,{customer:this.state.customer,address:this.state.biz_address,owner_person:this.state.owner_person}),this.state.owner_person&&l.a.createElement(Jr,{data:this.state.owner_person,title:"Business Owner Person"}),this.state.biz_address&&l.a.createElement(Kr,{data:this.state.biz_address,title:"Business Address"}),this.owner_address?l.a.createElement("div",{data:this.owner_address,title:"Owner Address"}):l.a.createElement("div",{className:"floatAdvanceperiodHeaderBox"},l.a.createElement("h2",{className:"floatAdvanceperiodHeader padL_15 no-margin"},"Owner Address : Same as Business Address")),this.contact_persons?this.contact_persons.map(function(e){return l.a.createElement(l.a.Fragment,null,l.a.createElement(Jr,{data:e,title:"Handler"}),l.a.createElement(Kr,{data:e.contact_address,title:"Handler Address"}))}):l.a.createElement("div",{className:"floatAdvanceperiodHeaderBox"},l.a.createElement("h2",{className:"floatAdvanceperiodHeader padL_15 no-margin"},"Handler : Same as Owner Person")))}}]),t}(st),Qr=a(105),Zr=a.n(Qr),Xr=function(e){return L("/api/admin/rel_mgr",e)},$r=function(e){return L("/api/admin/rel_mgr/view",e)},es=function(e){return L("/api/admin/rel_mgr/list",e)},ts=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={toList:!1,new_relationship_manager_id:null,relationship_manager:{},address:{}},a.handleSubmit=function(e){e.preventDefault();var t=a.state.relationship_manager;t.country_code=a.country_code,t.associated_with="FLOW",t.address=a.state.address,Xr(a.req({relationship_manager:t})).then(function(e){e&&(a.setState({new_borrower_id:e.data}),a.setState({toList:!0}),alert("New Relationship Manager created successfully"))})},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){var e=this,t=null;if("view"===this.props.mode){var a={relationshipManager_id:this.props.match.params.relationshipManager_id};$r(this.req(a)).then(function(a){a&&(t=a.data,e.setState({relationship_manager:t,address:t.address}))})}else this.props.mode}},{key:"render",value:function(){return!0===this.state.toList?l.a.createElement(Y.a,{to:"/relationship_manager/flowrlspmanager/list"}):l.a.createElement("div",{className:"container"},l.a.createElement("h4",null,this.props.title+(this.state.relationship_manager.first_name?" : "+this.state.relationship_manager.first_name:"")),l.a.createElement("form",{id:"borrower_form",onSubmit:this.handleSubmit},l.a.createElement("div",{id:""},l.a.createElement(zt,{id:"relationship_manager",entity:"flow_rel_mgr",title:"Relationship Manager",data:this.state.relationship_manager,mode:this.props.mode,onComponentChange:this.handleComponentChange,changeComponentName:"relationship_manager"}),l.a.createElement("br",null),l.a.createElement("input",{type:"button",className:"btn btn-primary ".concat("create"===this.props.mode?"show_button":"hide_button"),onClick:this.handleSubmit,value:"Create Relationship Manager"}))),l.a.createElement("br",null),l.a.createElement("br",null))}}]),t}(st),as=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={comp_name:"rel_mgr",list:"disable_div"},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){Object(X.a)(Object(d.a)(t.prototype),"componentWillMount",this).call(this),this.setOptionsToStateFromApi("acc_prvdr")}},{key:"render",value:function(){return l.a.createElement("div",{id:""},l.a.createElement("div",{className:"view"===this.props.mode?"hide_div":"show_div"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-6"},l.a.createElement("h4",null,this.props.title?this.props.title:"")),l.a.createElement("div",{className:"col-md-1 ".concat(this.state.edit_button_style)},l.a.createElement(Et,{entity:this.props.entity,onClick:this.handleEdit})),l.a.createElement("div",{className:"col-md-1 ".concat(this.state.save_button_style)},l.a.createElement("input",{onClick:this.handleSave,type:"button",className:"btn btn-success",value:"Save"})))))}}]),t}(ct),ns=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={toList:!1,new_relationship_manager_id:null,relationship_manager:{},data_prvdr:{},address:{}},a.handleSubmit=function(e){e.preventDefault();var t=a.state.relationship_manager;t.country_code=a.country_code,t.associated_with="acc_prvdr",t.address=a.state.address,Xr(a.req({relationship_manager:t})).then(function(e){e&&("success"===e.status?(a.setState({new_borrower_id:e.data}),a.setState({toList:!0}),alert("New Relationship Manager created successfully")):alert(e.message+"\n"+JSON.stringify(e.data)))})},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){var e=this,t=null;if("view"===this.props.mode){var a={relationshipManager_id:this.props.match.params.relationshipManager_id};$r(this.req(a)).then(function(a){if(a){t=a.data,e.setState({relationship_manager:t});var n={associated_entity_code:t.associated_entity_code,id:t.id};e.setState({data_prvdr:n,address:t.address})}})}else this.props.mode}},{key:"render",value:function(){return!0===this.state.toList?l.a.createElement(Y.a,{to:"/relationship_manager/dprlspmanager/list"}):l.a.createElement("div",{className:"container"},l.a.createElement("h4",null,this.props.title+(this.state.relationship_manager.first_name?" : "+this.state.relationship_manager.first_name:"")),l.a.createElement("form",{id:"borrower_form",onSubmit:this.handleSubmit},l.a.createElement("div",{id:""},l.a.createElement(as,{id:"data_prvdr",entity:"data_prvdr_rel_mgr",data:this.state.data_prvdr,mode:this.props.mode,onComponentChange:this.handleComponentChange}),l.a.createElement(zt,{id:"relationship_manager",entity:"data_prvdr_rel_mgr",title:"Relationship Manager",data:this.state.relationship_manager,mode:this.props.mode,onComponentChange:this.handleComponentChange}),l.a.createElement("br",null),l.a.createElement("input",{type:"button",className:"btn btn-primary ".concat("create"===this.props.mode?"show_button":"hide_button"),onClick:this.handleSubmit,value:"Create Relationship Manager"}))),l.a.createElement("br",null),l.a.createElement("br",null))}}]),t}(st),ls=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={relationshipManagerList:null,toView:!1,relationshipManager_id:null,data_prvdr:{}},a.handleClick=function(e){a.setState({relationshipManager_id:e.target.id,toView:!0})},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){var e=this,t=g("acc_prvdr_code");this.setState({table_id:t,relationshipManagerList:null});var a={associated_entity_code:t};es(this.req(a)).then(function(a){if(a){var n=a.data.map(function(t,a){return l.a.createElement("tr",{key:a},l.a.createElement("td",null," ",ye(t)),l.a.createElement("td",null," ",t.whatsapp),l.a.createElement("td",null," ",t.mobile_num),l.a.createElement("td",null," ",t.email_id),l.a.createElement("td",null," ",t.designation),l.a.createElement(Vt,{id:t.id,parent:"data_prvdr_rel_mgr",entity:"persons",status:t.status}),l.a.createElement("td",null,l.a.createElement(ft,{id:t.id,entity:"data_prvdr_rel_mgr",onClick:e.handleClick})))});e.setState({table_id:t,relationshipManagerList:n}),Ut()("#"+e.state.table_id).removeAttr("width").dataTable({order:[],columns:[{width:"15%"},{width:"15%"},{width:"15%"},{width:"15%"},{width:"10%"},{width:"10%"},{width:"10%"},{width:"10%"}],dom:"Bfrtip",buttons:["csv","excel","print"]})}})}},{key:"render",value:function(){return!0===this.state.toView?l.a.createElement(Y.a,{to:"/relationship_manager/dprlspmanager/view/".concat(this.state.relationshipManager_id)}):l.a.createElement("div",{className:"container"},l.a.createElement(as,{id:"data_prvdr",data:this.state.data_prvdr,mode:this.props.mode,onComponentChange:this.handleComponentChange,loanOnChange:this.loanOnChange}),null!=this.state.relationshipManagerList&&l.a.createElement("div",{id:"datatable data_prvdr_table",className:"table-responsive"},l.a.createElement("h4",null,"Relationship Manager List"),l.a.createElement("table",{id:this.state.table_id,className:"table"},l.a.createElement("thead",{className:"text-info"},l.a.createElement("tr",null,l.a.createElement("th",null,"Name"),l.a.createElement("th",null,"WhatsApp Number"),l.a.createElement("th",null,"Mobile Number"),l.a.createElement("th",null,"Email ID"),l.a.createElement("th",null,"Designation"),l.a.createElement("th",null,"Status"),l.a.createElement("th",null,"Action"),l.a.createElement("th",null,"Action"))),l.a.createElement("tbody",null,this.state.relationshipManagerList))))}}]),t}(st),rs=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={relationshipManagerList:null,toView:!1,relationshipManager_id:null},a.handleClick=function(e){a.setState({relationshipManager_id:e.target.id,toView:!0})},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){var e=this;es(this.req({associated_with:"FLOW"})).then(function(t){if(t){var a=t.data.map(function(t,a){return l.a.createElement("tr",{key:a},l.a.createElement("td",null," ",ye(t)),l.a.createElement("td",null," ",t.mobile_num),l.a.createElement("td",null," ",t.email_id),l.a.createElement("td",null," ",t.designation),l.a.createElement(Vt,{id:t.id,parent:"flow_rel_mgr",entity:"persons",status:t.status}),l.a.createElement("td",null,l.a.createElement(ft,{id:t.id,entity:"flow_rel_mgr",onClick:e.handleClick})))});e.setState({relationshipManagerList:a}),Ut()("#list_relationshipManager").removeAttr("width").dataTable({order:[],columns:[{width:"15%"},{width:"15%"},{width:"15%"},{width:"15%"},{width:"15%"},{width:"15%"},{width:"10%"}],dom:"Bfrtip",buttons:["csv","excel","print"]})}})}},{key:"render",value:function(){return!0===this.state.toView?l.a.createElement(Y.a,{to:"/relationship_manager/flowrlspmanager/view/".concat(this.state.relationshipManager_id)}):null!=this.state.relationshipManagerList?l.a.createElement("div",{id:"datatable",className:"table-responsive"},l.a.createElement("h4",null,this.props.title||"Relationship Manager List"),l.a.createElement("table",{id:"list_relationshipManager",className:"table"},l.a.createElement("thead",{className:"text-info"},l.a.createElement("tr",null,l.a.createElement("th",null,"Name"),l.a.createElement("th",null,"Mobile Number"),l.a.createElement("th",null,"Email ID"),l.a.createElement("th",null,"Designation"),l.a.createElement("th",null,"Status"),l.a.createElement("th",null,"Action"),l.a.createElement("th",null,"Action"))),l.a.createElement("tbody",null,this.state.relationshipManagerList))):l.a.createElement("div",null,l.a.createElement("p",null,"No Relationship Manager Available ! "))}}]),t}(st);function ss(e){var t="";return e.duration&&(t=e.duration+" day"),l.a.createElement("div",null,"*",l.a.createElement("i",null,"Total repayment if float is utilized for all the ",t," duration"),l.a.createElement("br",null))}var cs=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={variant:"primary"},a.Customer=function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",null,l.a.createElement("div",{className:"floatAdvancecontainer"},l.a.createElement("div",{className:"floatAdvancetitleBox"},l.a.createElement("h2",{className:"floatAdvancetitle no-margin"},"Customer :"),l.a.createElement("a",{href:"/borrower/indiv/view/".concat(a.props.customer.cust_id),target:"_blank"}," ",l.a.createElement("h2",{className:"floatAdvanceBluetitle no-margin"},a.props.customer.cust_id))),l.a.createElement("div",{className:"loggedPersondetailsBox"},l.a.createElement("div",{className:"row no-margin"},l.a.createElement("div",{className:"col-lg-2 no-padding"},l.a.createElement("p",{className:"no-margin loggedPersondetails loggedPersonid text-center"},a.props.customer.cust_id),l.a.createElement("div",{className:"loggedPersondetailsImg"},l.a.createElement("img",{className:"img-fluid",src:a.root+a.props.customer.photo_pps_path+"/s_"+a.props.customer.photo_pps})),l.a.createElement("p",{className:"personalDetailstextval no-margin loggedPersondetails loggedPersonname text-center"},a.props.customer.cust_name)),l.a.createElement("div",{className:"col-lg-5 no-padding personalDetailsbox"},l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement("div",{className:"row no-margin"},l.a.createElement("div",{className:"no-padding col-lg-5"},l.a.createElement("p",{className:"personalDetailstext personalDetailsviewText no-margin"},"Name ")),l.a.createElement("div",{className:"col-lg-7 no-padding"},l.a.createElement("p",{className:"personalDetailstextval no-margin"},a.props.customer.biz_name)))),l.a.createElement("li",null,l.a.createElement("div",{className:"row no-margin"},l.a.createElement("div",{className:"no-padding col-lg-5"},l.a.createElement("p",{className:"personalDetailstext personalDetailsviewText no-margin"},"Location")),l.a.createElement("div",{className:"col-lg-7 no-padding"},l.a.createElement("p",{className:"personalDetailstextval no-margin"},Ze(a.props.customer.location))))),l.a.createElement("li",null,l.a.createElement("div",{className:"row no-margin"},l.a.createElement("div",{className:"no-padding col-lg-5"},l.a.createElement("p",{className:"personalDetailstext personalDetailsviewText no-margin"},"Flow RM")),l.a.createElement("div",{className:"col-lg-7 no-padding"},l.a.createElement("p",{className:"personalDetailstextval no-margin"},a.props.customer.flow_rel_mgr_name)))),l.a.createElement("li",null,l.a.createElement("div",{className:"row no-margin"},l.a.createElement("div",{className:"no-padding col-lg-5"},l.a.createElement("p",{className:"personalDetailstext personalDetailsviewText no-margin"},"Address")),l.a.createElement("div",{className:"col-lg-7 no-padding"},l.a.createElement("p",{className:"personalDetailstextval no-margin"},a.props.customer.cust_addr_text)))))),l.a.createElement("div",{className:"col-lg-5 no-padding personalDetailsciewIdbox"},l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement("div",{className:"row no-margin"},l.a.createElement("div",{className:"no-padding col-lg-5"},l.a.createElement("p",{className:"personalDetailstext personalDetailsviewText no-margin"},a.props.customer.acc_prvdr_code," Account Number")),l.a.createElement("div",{className:"col-lg-7 no-padding"},l.a.createElement("p",{className:"personalDetailstextval  no-margin"},a.props.customer.acc_number)))),l.a.createElement("li",null,l.a.createElement("div",{className:"row no-margin"},l.a.createElement("div",{className:"no-padding col-lg-5"},l.a.createElement("p",{className:"personalDetailstext personalDetailsviewText no-margin"},"Mobile Number")),l.a.createElement("div",{className:"col-lg-7 no-padding"},l.a.createElement("p",{className:"personalDetailstextval  no-margin"},a.props.customer.cust_mobile_num)))),l.a.createElement("li",null,l.a.createElement("div",{className:"row no-margin"},l.a.createElement("div",{className:"no-padding col-lg-5"},l.a.createElement("p",{className:"personalDetailstext personalDetailsviewText no-margin"},"Partner RM")),l.a.createElement("div",{className:"col-lg-7 no-padding"},l.a.createElement("p",{className:"personalDetailstextval no-margin"},a.props.customer.dp_rel_mgr_name)))))))))))},a.PastLoans1=function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"floatAdvanceperiodHeaderBox"},l.a.createElement("h2",{className:"floatAdvanceperiodHeader no-margin"},"Past Float Advances")),l.a.createElement("div",{className:"row no-margin pastFloatAdvanceBox"},l.a.createElement("div",{className:"col-lg-6 no-padding personalDetailsbox"},l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement("div",{className:"row no-margin"},l.a.createElement("div",{className:"no-padding col-lg-5"},l.a.createElement("p",{className:"personalDetailstext no-margin"},"Total FA Application")),l.a.createElement("div",{className:"col-lg-7 no-padding"},l.a.createElement("p",{className:"personalDetailstextval no-margin"},a.props.customer.tot_loan_appls)))),l.a.createElement("li",null,l.a.createElement("div",{className:"row no-margin"},l.a.createElement("div",{className:"no-padding col-lg-5"},l.a.createElement("p",{className:"personalDetailstext no-margin"},"Total Late FAs")),l.a.createElement("div",{className:"col-lg-7 no-padding"},l.a.createElement("ul",{className:"personalPastDetailstext"},l.a.createElement("li",null,null==a.props.customer.late_loans?0:a.props.customer.late_loans," / ",a.props.customer.tot_loans," (",de(a.props.customer.late_loans,a.props.customer.tot_loans),")"))))))),l.a.createElement("div",{className:"col-lg-6 no-padding"},l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement("div",{className:"row no-margin"},l.a.createElement("div",{className:"no-padding col-lg-5"},l.a.createElement("p",{className:"personalDetailstext no-margin"},"Total Dsibursed FAs")),l.a.createElement("div",{className:"col-lg-7 no-padding"},l.a.createElement("ul",{className:"personalPastDetailstext"},l.a.createElement("li",null,a.props.customer.tot_loans," / ",a.props.customer.tot_loan_appls," ( ",de(a.props.customer.tot_loans,a.props.customer.tot_loan_appls)," )"))))),l.a.createElement("li",null,l.a.createElement("div",{className:"row no-margin"},l.a.createElement("div",{className:"no-padding col-lg-5"},l.a.createElement("p",{className:"personalDetailstext no-margin"},"First FA Disbursement Date")),l.a.createElement("div",{className:"col-lg-7 no-padding"},l.a.createElement("p",{className:"personalDetailstextval no-margin"},ge(a.props.customer.first_loan_date)))))))))},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){"apply"===this.props.parent||"selection"===this.props.parent?this.setState({variant:"dark"}):"loan_appl"===this.props.parent?this.setState({variant:"success"}):"loan"===this.props.parent&&this.setState({variant:"primary"})}},{key:"render",value:function(){return"selection"===this.props.parent?l.a.createElement(l.a.Fragment,null,this.Customer(),this.PastLoans1(),!this.props.customer.account_id&&l.a.createElement("label",{className:"agreement"},"( Please configure account for customer to generate / upload agreement. )")):l.a.createElement(l.a.Fragment,null,this.Customer())}}]),t}(ct),os=Object(U.a)(cs),is=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={chk_tnc:!1,chk_consent:!1},a.handleTnCConsentClick=function(e){e.target.value=e.target.checked,a.handleChange(e)},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return l.a.createElement("div",{className:"container FAApplicationTermsContainer"},l.a.createElement("div",{className:"row"},l.a.createElement("u",null,l.a.createElement("h4",null,"Terms & Conditions"))),l.a.createElement("div",{className:"row"},l.a.createElement("span",null,"1. The requested float advance is ",mt(this.props.product.max_loan_amount,this.currency_code),".")),l.a.createElement("div",{className:"row"},l.a.createElement("span",null,"2. The FLOW fee applicable is ",_t(this.props.product,this.currency_code),".")),l.a.createElement("div",{className:"row"},l.a.createElement("span",null,"3. Total repayment amount is ",ht(this.props.product,this.currency_code),".")),l.a.createElement("div",{className:"row"},l.a.createElement("span",null,"4. Repayment date is ",ut(this.props.product.duration,this.props.product.flow_fee_duration)," from the date of disbursal.")),l.a.createElement("div",{className:"row"},l.a.createElement("span",null,"5. Repayment date shall be on or before ",ge(function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"YYYY-MM-DD";return e instanceof le?e.add(t,"days"):le(e,a).add(t,"days")}(le(),this.props.product.duration))," provided the float advance is disbursed today ",l.a.createElement("b",null,"(Sundays & Interest Free days not considered.)"),".")),this.props.customer.acc_number?l.a.createElement("div",{className:"row"},l.a.createElement("span",null,"6. Subjected to the approval, an amount of ",l.a.createElement("b",null,mt(this.props.product.max_loan_amount,this.currency_code))," will be disbursed to ",l.a.createElement("b",null,this.props.customer.acc_prvdr_name," (",this.props.customer.acc_type,") Account number ",this.props.customer.acc_number),".")):l.a.createElement("div",null),l.a.createElement("br",null),l.a.createElement("div",{className:"row"},l.a.createElement("label",null,l.a.createElement("input",{type:"checkbox",id:"chk_tnc",onChange:this.handleTnCConsentClick}),"\xa0 Customer has agreed to the above float advance terms and conditions.")),l.a.createElement("br",null))}}]),t}(ct),ds=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={variant:"primary"},a.FloatAdvance1=function(e){return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"card viewFloatApplication"},l.a.createElement("div",{className:"row viewFloatApplicationTitle"},l.a.createElement("h3",null,"Float Advance ")),l.a.createElement("div",{className:"card-body"},l.a.createElement("div",{className:"row floatadvance-body"},"pending_approval"!=e&&l.a.createElement("div",{className:"col-6 row"},l.a.createElement("span",{className:"col-sm-5"},"Approval Date"),l.a.createElement("div",{className:"col-sm-7"},l.a.createElement("label",null,ge(a.props.product.loan_approved_date)))),l.a.createElement("div",{className:"col-6 row"},l.a.createElement("span",{className:"col-sm-5"},"Approver Name"),l.a.createElement("div",{className:"col-sm-7"},l.a.createElement("label",null,a.props.product.loan_approver_name))),"pending_disbursal"!=e&&"pending_approval"!=e&&l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"col-6 row"},l.a.createElement("span",{className:"col-sm-5"},"FA w/ Fee"),l.a.createElement("div",{className:"col-sm-7"},l.a.createElement("label",null,je(mt(a.props.product.due_amount,a.currency_code))))),"approved"!=e&&"pending_approval"!=e&&l.a.createElement("div",{className:"col-6 row"},l.a.createElement("span",{className:"col-sm-5"},"FA Repaid"),l.a.createElement("div",{className:"col-sm-7"},l.a.createElement("label",null,je(mt(a.props.product.paid_amount,a.currency_code)))))),"pending_disbursal"!=e&&"approved"!=e&&"pending_approval"!=e&&l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"col-6 row"},l.a.createElement("span",{className:"col-sm-5"},"Due Date"),l.a.createElement("div",{className:"col-sm-7"},l.a.createElement("label",null,ge(a.props.product.due_date)))),"pending_disbursal"!=e&&"approved"!=e&&l.a.createElement("div",{className:"col-6 row"},l.a.createElement("span",{className:"col-sm-5"},"Disbursal Date"),l.a.createElement("div",{className:"col-sm-7"},l.a.createElement("label",null,ge(a.props.product.disbursal_date)))),a.props.product.provisional_penalty>0&&l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"col-6 row"},l.a.createElement("span",{className:"col-sm-5"},"Provisional Penalty"),l.a.createElement("div",{className:"col-sm-7"},l.a.createElement("label",null,je(mt(a.props.product.provisional_penalty,a.currency_code))))),l.a.createElement("div",{className:"col-6 row"},l.a.createElement("span",{className:"col-sm-5"},"Penalty Paid"),l.a.createElement("div",{className:"col-sm-7"},l.a.createElement("label",null,je(mt(a.props.product.penalty_collected,a.currency_code)))))),l.a.createElement("div",{className:"col-6 row"},l.a.createElement("span",{className:"col-sm-5"},"Current Due Amount"),l.a.createElement("div",{className:"col-sm-7"},l.a.createElement("label",null,je(mt(a.props.product.current_os_amount,a.currency_code)))))),a.props.product.repayment_date?l.a.createElement("div",{className:"col-6 row"},l.a.createElement("span",{className:"col-sm-5"},"Repayment Date"),l.a.createElement("div",{className:"col-sm-7"},l.a.createElement("label",null,ge(a.props.product.repayment_date)))):null,"overdue"==e&&l.a.createElement("div",{className:"col-6 row"},l.a.createElement("span",{className:"col-sm-5"},"Days Overdue"),l.a.createElement("div",{className:"col-sm-7"},l.a.createElement("label",null,a.props.product.days_overdue," days (",a.props.product.penalty_days," penalty days) ")))))))},a.Product1=function(e){return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"floatAdvanceperiodHeaderBox"},l.a.createElement("h2",{className:"floatAdvanceperiodHeader no-margin"},"Product")),l.a.createElement("div",{className:"row no-margin pastFloatAdvanceBox"},l.a.createElement("div",{className:"col-lg-6 no-padding personalDetailsbox"},l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement("div",{className:"row no-margin"},l.a.createElement("div",{className:"no-padding col-lg-5"},l.a.createElement("p",{className:"personalDetailstext no-margin"},"Product Name")),l.a.createElement("div",{className:"col-lg-7 no-padding"},l.a.createElement("p",{className:"personalDetailstextval no-margin"},a.props.product.product_name)))),l.a.createElement("li",null,l.a.createElement("div",{className:"row no-margin"},l.a.createElement("div",{className:"no-padding col-lg-5"},l.a.createElement("p",{className:"personalDetailstext no-margin"},"FA Amount")),l.a.createElement("div",{className:"col-lg-7 no-padding"},l.a.createElement("ul",{className:"personalPastDetailstext"},l.a.createElement("li",null,mt(gt(a.props.product),a.currency_code)))))),l.a.createElement("li",null,l.a.createElement("div",{className:"row no-margin"},l.a.createElement("div",{className:"no-padding col-lg-5"},l.a.createElement("p",{className:"personalDetailstext no-margin"},"Flow Fee")),l.a.createElement("div",{className:"col-lg-7 no-padding"},l.a.createElement("ul",{className:"personalPastDetailstext"},l.a.createElement("li",null,_t(a.props.product,a.currency_code)))))))),l.a.createElement("div",{className:"col-lg-6 no-padding personalDetailsbox"},l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement("div",{className:"row no-margin"},l.a.createElement("div",{className:"no-padding col-lg-5"},l.a.createElement("p",{className:"personalDetailstext no-margin"},"Credit Score")),l.a.createElement("div",{className:"col-lg-7 no-padding"},l.a.createElement("ul",{className:"personalPastDetailstext"},l.a.createElement("li",null,a.props.credit_score," / 1000"))))),l.a.createElement("li",null,l.a.createElement("div",{className:"row no-margin"},l.a.createElement("div",{className:"no-padding col-lg-5"},l.a.createElement("p",{className:"personalDetailstext no-margin"},"Duration")),l.a.createElement("div",{className:"col-lg-7 no-padding"},l.a.createElement("p",{className:"personalDetailstextval no-margin"},ut(a.props.product.duration,a.props.product.flow_fee_duration))))),l.a.createElement("li",null,l.a.createElement("div",{className:"row no-margin"},l.a.createElement("div",{className:"no-padding col-lg-5"},l.a.createElement("p",{className:"personalDetailstext no-margin"},"Repayment Amount")),l.a.createElement("div",{className:"col-lg-7 no-padding"},l.a.createElement("p",{className:"personalDetailstextval no-margin"},ht(a.props.product,a.currency_code)))))))))},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){"apply"==this.props.parent?this.setState({variant:"dark"}):"loan_appl"==this.props.parent?this.setState({variant:"success"}):"loan"==this.props.parent&&this.setState({variant:"primary"})}},{key:"render",value:function(){return console.log(JSON.stringify(this.props.product)),l.a.createElement(l.a.Fragment,null,this.Product1(),"apply"!=this.props.parent&&this.FloatAdvance1(this.props.product.status))}}]),t}(ct),ms=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={tncPanel:{chk_tnc:!1},customer_accounts_dd:null,viewLoan:!1},a.clickBackButton=function(e){window.location.reload()},a.handleSubmit=function(e){if(a.state.tncPanel.chk_tnc){var t=a.getLoanApplicationRequest(a.props.customer,a.props.selectedProduct,a.props.customer.flow_rel_mgr_id);t.customer_consent_rcvd=!0,t.product_type=a.props.product_type,t.master_loan_doc_id=a.props.master_loan_doc_id,t.cs_result_code=a.props.cs_result_code,_l(a.req({loan_application:t},!0)).then(function(e){if(a.resp(e),e){if(e.data.loan_application){var t=e.data.loan_application.loan_appl_doc_id,n=e.data.loan_application.loan_approver_name;a.setState({loan_appl_doc_id:t,viewLoanAppln:!0,approver_name:n})}else if(e.data.loan){var l=e.data.loan.loan_doc_id;a.setState({loan_doc_id:l,viewLoan:!0})}alert(e.message)}})}else alert("Please select the Terms and Conditions checkbox to proceed.")},a.getLoanApplicationRequest=function(e,t,n){var l=e;return l.product_name=t.product_name,l.product_id=t.id,l.loan_principal=t.max_loan_amount,l.duration=t.duration,l.flow_fee=t.flow_fee,l.currency_code=t.currency_code,l.cs_model_id=t.cs_model_id,l.flow_fee_type=t.flow_fee_type,l.flow_fee_duration=t.flow_fee_duration,l.due_amount=vt(t),l.loan_approver_id=n,l.cust_acc_id=a.props.cust_account.value,l.country_code=a.country_code,l.credit_score=a.props.credit_score,l},a.handleChange=function(e){var t=e.target.id;a.setState(Object(S.a)({},t,e.target.value))},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){this.country_code;var e={cust_id:this.props.customer.cust_id,status:"enabled",acc_purpose:"float_advance"};this.setOptionsListToStateFromAppApi("common","customer_accounts",this.req({customer_account:e}),["account_id","acc_num_disp_txt"])}},{key:"render",value:function(){return console.log("calling_api"),console.log(this.state.calling_api),1==this.state.viewLoanAppln?l.a.createElement(Y.a,{to:"/fa_appl/view/".concat(this.state.loan_appl_doc_id)}):1==this.state.viewLoan?l.a.createElement(Y.a,{to:"/fa/view/".concat(this.state.loan_doc_id)}):(this.appl_action="create_fa","probation"!=this.props.product_type&&"ineligible"!=this.props.cs_result_code&&"requires_flow_rm_approval"!=this.props.cs_result_code||(this.appl_action="submit_for_approval"),l.a.createElement("div",{id:""},l.a.createElement("div",{className:"container"},l.a.createElement("div",{className:"row"},l.a.createElement("h4",null,"New Float Advance Application ")),l.a.createElement(os,{parent:"apply",customer:this.props.customer,cust_agreement_status:this.props.cust_agreement_status}),l.a.createElement(ds,{parent:"apply",credit_score:this.props.credit_score,customer:this.props.customer,product:this.props.selectedProduct}),l.a.createElement("div",{className:"card selectCusAccountBox"},l.a.createElement("div",{className:"card-body"},"submit_for_approval"!==!this.appl_action&&l.a.createElement("div",{className:"row"},l.a.createElement("label",{className:"col-sm-2 col-form-label"},"Approver Name"),l.a.createElement("div",{className:"col-sm-7"},l.a.createElement("div",{className:"form-group md-form-group"},l.a.createElement("label",{className:"col-sm-5 col-form-label personalDetailstextval"},this.props.selectedProduct.approver_name)))))),l.a.createElement("div",{className:"row"},l.a.createElement(is,{id:"tncPanel",mode:"apply",customer:this.props.customer,product:this.props.selectedProduct,onComponentChange:this.handleComponentChange})),l.a.createElement("div",{className:"row",id:"float_style"},l.a.createElement("input",{type:"button",className:"btn btn-primary",onClick:this.clickBackButton,value:"Back"}),"\xa0\xa0",l.a.createElement("span",null,l.a.createElement("input",{type:"button",disabled:this.state.calling_api,className:"submit_for_approval"==this.appl_action?"btn btn-danger":"btn btn-success",onClick:this.handleSubmit,value:"submit_for_approval"==this.appl_action?"Submit for Approval":"Go to Disbursal"}))))))}}]),t}(st),us=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={columns:[],loans:[],data:{}},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){var e=this,t={cust_id:this.props.cust_id,last_n_fas:this.props.last_n_fas,mode:"search"};console.log(t),this.props.cust_id&&Oa(this.req({loan_search_criteria:t},!0)).then(function(t){t&&"success"===t.status&&t.data.results.length>0&&e.setState({loans:t.data.results,length:t.data.results.length})})}},{key:"render",value:function(){var e=this;return this.state.length>0?l.a.createElement(l.a.Fragment,null,this.state.loans.length>0&&l.a.createElement("div",null,l.a.createElement("div",null,l.a.createElement("h2",{className:"floatAdvanceperiodViewheader no-margin"},"Recent FA")),l.a.createElement("div",{className:"floatAdvanceperiodViewbox"},l.a.createElement("div",{className:"row no-margin"},console.log("this.state.loans-----------",this.state.loans),this.state.loans.map(function(t,a){return l.a.createElement("div",{className:"col-lg-3"},l.a.createElement("div",{className:"floatAdvanceperiodIconbox"},l.a.createElement("img",{className:"img-fluid",src:"/img/frame.png"}),l.a.createElement("span",null,"#",a+1)),l.a.createElement("div",{className:"floatAdvanceperiodDateiconBox floatAdvanceperiodDateiconRightborder"},l.a.createElement("div",null,l.a.createElement("img",{className:"img-fluid",src:"/img/dateicon.png"}),l.a.createElement("span",null,t.disbursal_date))),l.a.createElement("div",{className:"floatAdvanceperiodDateiconBox floatAdvanceperiodDateiconRightborder"},l.a.createElement("div",null,l.a.createElement("img",{className:"img-fluid",src:"/img/ugxicon.png"}),l.a.createElement("span",null,Ne(t.loan_principal,e.currency_code)))),l.a.createElement("div",{className:"floatAdvanceperiodDateiconBox floatAdvanceperiodDateiconRightborder"},l.a.createElement("div",null,l.a.createElement("img",{className:"img-fluid",src:t.overdue_days>0?"/img/vectoricon.png":"/img/ontimeicon.png"}),l.a.createElement("span",{className:"text-red"},t.overdue_days))),l.a.createElement("div",{className:"floatAdvanceperiodDateiconBox floatAdvanceperiodDateiconRightborder"},l.a.createElement("div",null,l.a.createElement("img",{className:"img-fluid",src:"/img/rmicon.png"}),l.a.createElement("span",null,ue(t.cs_result_code)))))}))))):l.a.createElement(l.a.Fragment,null)}}]),t}(ct),_s=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={customer_div_style:"hide_div",comp_name:"product",customer:{},modalBox:!1,toSummary:!1,CSvalue:!1,searchResult:!1,cs_result_code:"",search_loan:"show_div",acc_selected:!1},a.handleEnter=function(e){13===e.keyCode&&a.handleSearchClick()},a.handleCustIDChange=function(e){a.customer_id=e.target.value},a.handleProductSelectClick=function(e,t,n,l,r){if("completed"==a.customer.kyc_status){console.log(a.customer),a.product_type=n,a.selectedProduct=a.loan_products[e.target.id],a.selectedProduct.currency_code=a.currency_code,null==l?a.setState({cust_score:0}):a.setState({cust_score:l,cs_result_code:r});var s={product_id:t,cust_id:a.customer.cust_id,country_code:a.country_code,product_type:a.product_type,status:"enabled",perf_eff_data:a.customer.perf_eff_date};hl(a.req(s,!0)).then(function(e){e&&("success"===e.status?(a.master_loan_doc_id=e.data.master_loan_doc_id,a.setState({toSummary:!0})):alert(e.message+"\n"+JSON.stringify(e.data)))})}else alert("Could not allow new application. KYC status is "+a.customer.kyc_status)},a.handleClose=function(e){a.setState({modalBox:!1})},a.handleSearchClick=function(e){null!=a.customer_id?a.setState({searchResult:!0}):alert("Please Enter Customer ID or Mobile Number")},a.accountSelect=function(e){a.setState({acc_selected:!0,cust_account:a.cust_account}),Ut()("#list").DataTable().destroy(),a.productSearch()},a.handleBorrowerSearch=function(e,t){a.customer_id=t,a.productSearch(),a.setState({modalBox:!1})},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){var e=this;"result"==this.props.mode&&this.setState({search_loan:"hide_div"}),this.props.match&&this.props.match.params.cust_id&&(this.customer_id=this.props.match.params.cust_id,Sl(this.req({cust_id:this.customer_id,screen:"view"},!0)).then(function(t){if(t){e.state.customer_div_style="show_div",t.data.cust_mobile_num=t.data.owner_person.mobile_num,t.data.cust_addr_text=t.data.cust_addr_txt,e.setState({customer:t.data,cust_agreement_status:t.data.aggr_status});var a={cust_id:t.data.cust_id,status:"enabled",acc_purpose:"float_advance"};He("common","customer_accounts",e.req({customer_account:a})).then(function(t){if(e.resp(t),t)if("success"===t.status)if(1==t.data.list.length){e.getSelectOptionsFromResult(t.data.list,"customer_accounts",["account_id","acc_num_disp_txt"],!1);var a={value:t.data.list[0].account_id};e.setState({acc_selected:!0,cust_account:a}),e.productSearch()}else e.getSelectOptionsFromResult(t.data.list,"customer_accounts",["account_id","acc_num_disp_txt"]);else alert(t.message+"\n"+JSON.stringify(t.data))})}}))}},{key:"productSearch",value:function(){var e=this,t=this.customer_id,a=this.cust_account.value;ml(this.req({req_parameter:t,account_id:a},!0)).then(function(t){if(t)if("error"!==t.status){var a=t.data;console.log(t.data),e.setState({cust_agreement_status:t.data.cust_agreement_status,all_ineligible:t.data.all_ineligible}),a.hasOwnProperty("borrower")?e.productList(a):a.hasOwnProperty("borrowers")&&e.borrowersList(a),1!=a.all_ineligible||"Probation"!=a.category&&"Condonation"!=a.category||alert("Customer is ineligible for all the FA products. Customer is already on Condonation/Probation"),1==a.all_ineligible&&"Probation"!=a.category&&"Condonation"!=a.category&&alert("Customer is ineligible for all the FA products. RM shall decide to allow condonation to the customer.")}else e.setState({customer_div_style:"hide_div"})})}},{key:"borrowersList",value:function(e){var t=this,a=e.borrowers.map(function(e,a){return l.a.createElement("tr",null,l.a.createElement("td",null," ",e.biz_name),l.a.createElement("td",null," ",e.cust_id),l.a.createElement("td",null," ",e.acc_number),l.a.createElement("td",null," ",l.a.createElement("input",{id:a,type:"submit",value:"Select",onClick:function(a){return t.handleBorrowerSearch(a,e.cust_id)},className:"btn btn-primary"})))});this.setState({borrowersList:a}),this.setState({modalBox:!0}),Ut()("#list_brwr").dataTable({bAutoWidth:!0,bDestroy:!0})}},{key:"productList",value:function(e){var t=this,a=e.all_csf_values;console.log("all_csf_values"),console.log(a),this.meta_data=a.filter(function(e){return e.csf_type.includes("meta")}),this.customer=e.borrower,this.loan_products=e.loan_products;var n=e.loan_products.map(function(e,a){var n,r=(n=e.result_code,e.approver_first_name,"eligible"==n?"Select":"requires_flow_rm_approval"===n?"Request Approval":n),s=function(e,t){return"eligible"==e?"Eligible":"requires_flow_rm_approval"===e?"Need "+t+"'s Approval":"ineligible"==e?"Ineligible":e?pe(e):e}(e.result_code,e.approver_first_name),c=function(e,t,a){return t.all_ineligible?"Customer is ineligible for this FA product. "+t.opm_name+" shall decide to allow condonation to the customer.":"Can not apply FA. "+e.result_msg}(e,t.state,t.customer.category);return l.a.createElement("tr",{key:a},l.a.createElement("td",null," ",e.product_name),l.a.createElement("td",null," ",l.a.createElement(wt,{loan_product:e,meta_data:t.meta_data})," "),l.a.createElement("td",null," ",Ze(e.product_type)+" / "+Ze(e.cs_model_code)),l.a.createElement("td",{"data-sort":e.max_loan_amount}," ",mt(e.max_loan_amount,t.currency_code)),l.a.createElement("td",null," ",e.duration," days"),l.a.createElement("td",{"data-sort":e.max_loan_amount+e.flow_fee}," ",je(ht(e,t.currency_code))),l.a.createElement("td",null,s),l.a.createElement("td",null,"eligible"==e.result_code||"requires_flow_rm_approval"==e.result_code?l.a.createElement("input",{id:a,type:"button",value:r,onClick:function(a){return t.handleProductSelectClick(a,e.id,e.product_type,e.cust_score,e.result_code)},className:"eligible"==e.result_code?"btn btn-success":"requires_flow_rm_approval"==e.result_code?"btn btn-primary":"btn btn-danger"}):l.a.createElement("span",null,l.a.createElement(Ct,{result_msg:c,result_code:e.result_code}))))});this.setState({customer:this.customer,loanProducts_tr:n,customer_div_style:"show_div"}),Ut()("#list").removeAttr("width").dataTable({order:[],pageLength:15,columns:[{width:"10%"},{width:"10%"},{width:"10%"},{width:"10%"},{width:"15%"},{width:"10%"},{width:"20%"},{width:"20%"}],dom:"Bfrtip",buttons:["csv","excel","print"]})}},{key:"render",value:function(){var e=this;return console.log(this.selectedProduct),!0===this.state.toSummary?l.a.createElement(ms,{mode:"apply",cust_account:this.state.cust_account,credit_score:this.state.cust_score,customer:this.customer,selectedProduct:this.selectedProduct,require_agreement:this.state.require_agreement,product_type:this.product_type,master_loan_doc_id:this.master_loan_doc_id,min_credit_score:this.min_credit_score,currency:this.currency_code,cust_agreement_status:this.state.cust_agreement_status,eligible:this.eligible,cs_result_code:this.state.cs_result_code,loan_products:this.loan_products,rel_mgr:{id:this.state.customer.flow_rel_mgr_id,name:this.state.customer.flow_rel_mgr_name}}):!0===this.state.searchResult?l.a.createElement(Y.a,{to:"/fa_appl_for/".concat(this.customer_id)}):l.a.createElement("div",{className:"container"},l.a.createElement("div",null,l.a.createElement("div",{className:"row ".concat(this.state.search_loan)},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-12"},l.a.createElement("div",{className:"card"},l.a.createElement("div",{className:"card-header card-header-icon card-header-info"},l.a.createElement("div",{className:"card-icon"},l.a.createElement("i",{className:"material-icons"},"search")),l.a.createElement("h3",{className:"card-title"},"Create Float Advance Application")),l.a.createElement("div",{className:"card-body mt-50"},l.a.createElement("form",null,l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-3"},l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{className:"md-label-floating"},"Any Customer ID / Mobile No / National ID   "))),l.a.createElement("div",{className:"col-md-5"},l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{className:"md-label-floating"},"Enter ..."),l.a.createElement("input",{type:"text",id:"customer_id",onChange:this.handleCustIDChange,onKeyUp:this.handleEnter,className:"form-control",required:!0}))),l.a.createElement("div",{className:"col-md-2"},l.a.createElement("div",{className:"form-group"},l.a.createElement("button",{type:"button",className:"btn btn-primary pull-right",onClick:this.handleSearchClick},"Search"))))))))))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:this.state.customer_div_style},l.a.createElement(os,{parent:"selection",cust_agreement_status:this.state.cust_agreement_status,customer:this.state.customer,loan_products:this.loan_products}),this.state.customer.cust_id&&l.a.createElement(us,{cust_id:this.state.customer.cust_id,last_n_fas:"4"}),l.a.createElement("div",{className:"card"},l.a.createElement("div",{className:"card-body"},l.a.createElement("div",{className:"row"},l.a.createElement("label",{className:"col-sm-3",style:{fontSize:"15px",padding:"17px 13px"}},"Select Customer Account ",l.a.createElement("font",{className:"text-danger"}," *  ")),l.a.createElement("div",{className:"col-sm-7"},l.a.createElement("div",{className:"form-group md-form-group"},l.a.createElement("select",{className:"form-control",style:{fontSize:"15px"},onChange:this.accountSelect,ref:function(t){return e.cust_account=t}},this.state.customer_accounts_dd)))))),this.state.acc_selected&&l.a.createElement("div",{className:"card"},l.a.createElement("div",{className:"card-header card-header-icon card-header-primary"},l.a.createElement("h3",{className:"card-title text-white d-inline-block"},"Select Float Advance Product")),l.a.createElement("div",{className:"card-body"},l.a.createElement("div",{id:"",className:"table-responsive selectFloatProduct"},l.a.createElement("table",{className:"table",id:"list"},l.a.createElement("thead",{className:"text-info"},l.a.createElement("tr",null,l.a.createElement("th",null,"Product Name"),l.a.createElement("th",null,"Cust Score"),l.a.createElement("th",null,"Product Type"),l.a.createElement("th",null,"FA Amount"),l.a.createElement("th",null,"Duration"),l.a.createElement("th",null,"Repayment"),l.a.createElement("th",null,"Eligibility"),l.a.createElement("th",null,"Action"))),l.a.createElement("tbody",null,this.state.loanProducts_tr)),l.a.createElement(ss,null)))),l.a.createElement(nt.a,{show:this.state.modalBox,onHide:this.handleClose},l.a.createElement(nt.a.Header,{closeButton:!0,show:this.state.modalBox,onHide:this.handleClose},l.a.createElement(nt.a.Title,null,"More than one customer results found. Choose one among the following.")),l.a.createElement(nt.a.Body,null,l.a.createElement("table",{id:"list_brwr",className:"table"},l.a.createElement("thead",{className:"text-info"},l.a.createElement("tr",null,l.a.createElement("th",null,"Business Name"),l.a.createElement("th",null,"FLOW Cust ID"),l.a.createElement("th",null,"Data Provider Cust ID"),l.a.createElement("th",null,"Action"))),l.a.createElement("tbody",null,this.state.borrowersList))),l.a.createElement(nt.a.Footer,null,l.a.createElement(lt.a,{variant:"secondary",onClick:this.handleClose},"Close"))))))}}]),t}(st),ps=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(d.a)(t).call(this,e))).viewApplication=function(e){var t=e.target.id;window.open("/fa_appl/view/"+t,"_blank")},a.handleModifySearch=function(e){a.setState({serach_loan_appl:"show_div",modify_search:"hide_div"})},a.handleSearch=function(e){e.nativeEvent;Ut()("#loan_list").DataTable().destroy(),a.setState({datatable_div_style:"hide_div",search_btn_style:"disable_div"});var t=a.state.searchLoanAppl;console.log(Object.keys(t).length),Object.keys(t).length>0?pl(a.req({loan_appl_search_criteria:t},!0)).then(function(e){if(a.resp(e),a.setState({search_btn_style:""}),e){e.data.length>0?(a.setState(function(t){return t.rowdatas=e.data}),a.setState(function(t){return t.copy=e.data}),a.setState(function(e){return e.columndatas=a.columndatas()}),a.setState({search:!0}),a.setState({loanApplicationResults:[],datatable_div_style:"show_div",serach_loan_appl:"hide_div",modify_search:"show_div"})):alert("No results found.")}}):(a.setState({search_btn_style:""}),alert("Choose atleast one filter to search Float Advance Applications."))},a.changeHandler=function(e){var t=e,n=a.state.rowdatas.filter(function(e){return null!==e.loan_appl_doc_id&&e.loan_appl_doc_id.toLowerCase().includes(t.toLowerCase())||null!==e.loan_doc_id&&e.loan_doc_id.toLowerCase().includes(t.toLowerCase())||null!==e.acc_number&&e.acc_number.includes(t)||null!==e.product_name&&e.product_name.toLowerCase().includes(t.toLowerCase())||null!==e.status&&e.status.toLowerCase().includes(t.toLowerCase())||null!==e.cs_result_code&&e.cs_result_code.toLowerCase().includes(t.toLowerCase())});a.setState(function(e){return e.copy=n})},a.state={search_btn_style:"",data_prvdr_name_list:[],lender_name_list:[],product_name_list:[],searchLoanAppl:{},datatable_div_style:"hide_div",serach_loan_appl:"show_div",modify_search:"hide_div",viewLoanAppln:!1,copy:[],rowdatas:[],columndatas:[]},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"columndatas",value:function(){var e=this;return[{Header:"FA Appl ID",id:"loan_appl_doc_id",accessor:function(e){return l.a.createElement($.a,{className:"link-doc-id",to:"/fa_appl/view/"+e.loan_appl_doc_id,target:"_blank"},e.loan_appl_doc_id)}},{Header:"FA ID",id:"loan_doc_id",accessor:function(e){return e.loan_doc_id?l.a.createElement($.a,{to:"/fa/view/"+e.loan_doc_id,target:"_blank"},e.loan_doc_id):"NA"}},{Header:"Data Provider Cust ID",id:"acc_number",accessor:function(e){return l.a.createElement(bt,{acc_number:e.acc_number,biz_name:e.biz_name,cust_name:e.cust_name})}},{Header:"Product Code",id:"product_name",accessor:function(e){return e.product_name}},{Header:"Product Name",id:"product",accessor:function(t){return l.a.createElement(yt,{loan:t,currency_code:e.currency_code})}},{Header:"Submitted On",id:"loan_appl_date",accessor:function(e){return ve(e.loan_appl_date,!0)}},{Header:"Status",id:"status",accessor:function(e){return Ze(e.status)}},{Header:"Action",id:"cs_result_code",accessor:function(e){return e.cs_result_code?Ze(e.cs_result_code):"NULL"}}]}},{key:"render",value:function(){var e=this;return l.a.createElement("div",{className:"container containerTopmargin max-width no-padding"},l.a.createElement("div",{className:"floatAdvancetitleBox"},l.a.createElement("h5",{className:"preHeaderpad no-margin",style:{paddingLeft:15,fontSize:20}},"SEARCH - Float Advance Applications")),l.a.createElement("div",{className:"text-right",style:{marginTop:"show_div"===this.state.modify_search?15:0}},l.a.createElement("div",{className:this.state.modify_search},l.a.createElement("button",{type:"button",className:"btn btn-md btn-light",id:"float_style",onClick:this.handleModifySearch},"Modify Search"))),l.a.createElement("div",{className:this.state.serach_loan_appl},l.a.createElement(Fr,{id:"searchLoanAppl",mode:"loan_appl",onSearch:this.handleSearch,search_btn_style:this.state.search_btn_style,onComponentChange:this.handleComponentChange,onComponentReset:this.handleComponentReset,disable_btn:this.state.calling_api,onComponentElementChange:this.handleComponentElemetChange})),l.a.createElement("div",{className:"".concat(this.state.datatable_div_style)},l.a.createElement("div",{className:"d-flex justify-content-between align-items-center",style:{padding:5,marginTop:15}},l.a.createElement("p",{className:"no-margin text-white"},l.a.createElement("b",null,"Total Entries : ",this.state.copy.length)),l.a.createElement("div",{style:{position:"relative"}},l.a.createElement("i",{class:"fa-solid fa-magnifying-glass search_pos"}),l.a.createElement("input",{placeholder:"Search here",className:"search_posInput",onChange:function(t){return e.changeHandler(t.target.value)}}))),l.a.createElement(ua,{showPag:!0,minRow:0,row_data:void 0!==this.state.copy?this.state.copy:[],column_data:this.state.columndatas,defaultPageSize:10,resizable:!1,defaultSorted:[{id:"loan_appl_date",desc:!0}],exportCSV:!0,csvFile:"FA applications",csvData:this.state.copy})))}}]),t}(st),hs=a(171),vs=a(101),gs=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={viewReady:!1,approve_div_style:"hide_div",reject_div_style:"hide_div",score_div_style:"hide_div",action:"view",appr_reason:""},a.handleRejectCheckbox=function(e){a.setState({reject_div_style:"show_div",score_div_style:"show_div",action:"reject"})},a.handleApproveCheckbox=function(e){a.setState({score_div_style:"show_div",reject_div_style:"hide_div",action:"approve"})},a.handleCancelCheckbox=function(e){a.setState({reject_div_style:"show_div",score_div_style:"hide_div",action:"cancel"})},a.handleSubmit=function(e){var t=a.state.action,n=a.state.appr_reason;"view"==t?alert("Please choose action "):""==n&&alert("Please enter reason");var l={},r=a.state.loan_appl.loan_appl_doc_id,s=a.state.loan_appl.master_loan_doc_id,c=a.country_code,o=a.state.credit_score,i=a.state.loan_appl.cust_id,d=a.state.loan_appl.product_id;if("approve"===t)l={loan_appl_doc_id:r,master_loan_doc_id:s,action:t,credit_score:o,country_code:c,cust_id:i,product_id:d,appr_reason:n};else if("reject"===t||"cancel"===t){l={loan_appl_doc_id:r,master_loan_doc_id:s,action:t,credit_score:o,action_reason_code:a.state.action_reason_code,remarks:a.state.remarks,country_code:c,product_id:d,cust_id:i,appr_reason:n}}"view"!=t&&""!=n&&ul(a.req({loan_request:l})).then(function(e){if(e)if("success"===e.status){if("rejected"===e.data.status||"cancelled"===e.data.status)window.location.reload(!0);else if("approved"===e.data.status){var t=e.data.loan;a.setState({loan:t}),a.setState({viewLoan:!0}),alert(e.message)}}else alert(e.message+"\n"+JSON.stringify(e.data))})},a.handleChange=function(e){a.setState({appr_reason:e.target.value})},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){var e,t=this,a=this.props.match.params.loan_appl_doc_id;(e=this.req({loan_appl_doc_id:a}),L(M+"/loan_appl/application",e)).then(function(e){var a=e.data,n=b("application","approval");t.setState({loan_appl:a,credit_score:e.data.credit_score,loan_approver_id:e.data.loan_approver_id,viewReady:!0,can_approve:n})})}},{key:"is_user_apprvr",value:function(e){return console.log("loan_approver_id"),console.log(e),e===g("user_id")}},{key:"render",value:function(){var e=this;if(1==this.state.viewLoan)return l.a.createElement(Y.a,{to:"/fa/view/".concat(this.state.loan.loan_doc_id)});if(!this.state.viewReady)return l.a.createElement(l.a.Fragment,null);g("role_codes");return l.a.createElement("div",{className:"container"},l.a.createElement("br",null),l.a.createElement("div",{className:"row topTitle"},l.a.createElement("div",{className:"col-md-8"},l.a.createElement("h4",null,"Float Advance - Application ID : ",l.a.createElement("b",null,this.state.loan_appl.loan_appl_doc_id))),l.a.createElement("div",{className:"col-md-4"},l.a.createElement("h4",null,"Status: ",l.a.createElement("b",null,Ze(this.state.loan_appl.status))))),l.a.createElement(os,{parent:"loan_appl",customer:this.state.loan_appl}),l.a.createElement(ds,{parent:"loan_appl",credit_score:this.state.credit_score,customer:this.state.loan_appl,product:this.state.loan_appl}),l.a.createElement("br",null),"pending_approval"===this.state.loan_appl.status&&this.state.can_approve&&l.a.createElement("div",null,l.a.createElement(us,{cust_id:this.state.loan_appl.cust_id,last_n_fas:"4"}),l.a.createElement("div",{className:"row mt-3"},l.a.createElement("div",{className:"col-md-6"},l.a.createElement("span",{className:"text-white"},l.a.createElement("b",null,"Action : ")),l.a.createElement("label",null,l.a.createElement("input",{type:"radio",name:"appr",value:"approve",onClick:this.handleApproveCheckbox}),"  Approve \xa0\xa0\xa0"),l.a.createElement("label",null,l.a.createElement("input",{type:"radio",name:"appr",value:"reject",onClick:this.handleRejectCheckbox}),"  Reject \xa0\xa0\xa0"))),l.a.createElement(hs.a,null,l.a.createElement(vs.a,null,l.a.createElement("b",null,"Reason :")),l.a.createElement(O.a,{as:"textarea","aria-label":"With textarea",rows:5,onChange:function(t){return e.handleChange(t)},style:{width:"200px"}})),l.a.createElement("br",null),l.a.createElement("div",{className:"row"},l.a.createElement("input",{type:"button",className:"btn btn-primary",value:"Submit",onClick:this.handleSubmit}),"\xa0\xa0"),l.a.createElement("br",null)))}}]),t}(st),fs=a(13);fs.dataTable=a(45);var Es=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={loanTxnList:null},a.handleReversePayment=function(e){if(!1!==window.confirm("Are you sure to reverse this payment?")){var t={loan_txn_id:e};Qa(a.req(t,!0)).then(function(e){e&&("success"===e.status?window.location.reload():alert(e.message+"\n"+JSON.stringify(e.data)))})}},a.handleViewTxnClick=function(e){var t=a.props.loan_doc_id;Ta(a.req({loan_doc_id:t})).then(function(e){if(e){a.setState(function(t){return t.rowdatas=e.data}),a.setState(function(t){return t.copy=e.data}),a.setState(function(e){return e.columndatas=a.columndatas()});var t=e.data.map(function(e,t){return l.a.createElement("tr",{key:t},l.a.createElement("td",null,++t),l.a.createElement("td",null,Ze(e.txn_type)),l.a.createElement("td",null,mt(e.amount,a.currency_code)),l.a.createElement("td",null,ge(e.txn_date,!0)),l.a.createElement("td",null,l.a.createElement(St,{full_text:xe(e.from_ac_text),overlay:e.from_ac_text})),l.a.createElement("td",null,l.a.createElement(St,{full_text:xe(e.to_ac_text),overlay:e.to_ac_text})),l.a.createElement("td",null,e.txn_id),l.a.createElement("td",null,Ze(e.txn_mode)),l.a.createElement("td",null,pe(e.txn_exec_by)))});a.setState({loanTxnList:t})}}),a.setState({modalBox:!0})},a.handleModalClose=function(e){a.setState({modalBox:!1})},a.changeHandler=function(e){var t=e,n=a.state.rowdatas.filter(function(e){return null!==e.txn_type&&e.txn_type.toLowerCase().includes(t.toLowerCase())||null!==e.from_ac_text&&e.from_ac_text.includes(t)||null!==e.to_ac_text&&e.to_ac_text.includes(t)||null!==e.txn_id&&e.txn_id.toLowerCase().includes(t.toLowerCase())||null!==e.txn_mode&&e.txn_mode.toLowerCase().includes(t.toLowerCase())});a.setState(function(e){return e.copy=n})},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"columndatas",value:function(){var e=this;return[{Header:"SI No.",id:"row",Cell:function(e){return l.a.createElement("div",null,e.index+1)}},{Header:"Transaction Type",id:"txn_type",accessor:function(e){return Ze(e.txn_type)}},{Header:"Transaction Amount",id:"amount",accessor:function(t){return mt(t.amount,e.currency_code)}},{Header:"Transaction Date / Time",id:"txn_date",accessor:function(e){return ge(e.txn_date,!0)}},{Header:"From Account",id:"from_ac_text",accessor:function(e){return l.a.createElement(St,{full_text:xe(e.from_ac_text),overlay:e.from_ac_text})}},{Header:"To Account",id:"to_ac_text",accessor:function(e){return l.a.createElement(St,{full_text:xe(e.to_ac_text),overlay:e.to_ac_text})}},{Header:"Transaction ID",id:"txn_id",accessor:function(e){return e.txn_id}},{Header:"Transaction Mode",id:"txn_mode",accessor:function(e){return Ze(e.txn_mode)}},{Header:"Txn Executed By",id:"txn_exec_by",accessor:function(e){return pe(e.txn_exec_by)}},{Header:"Action",id:"id",accessor:function(t){return l.a.createElement("div",null,b("loan","reverse_payment")&&("payment"==t.txn_type||"penalty_payment"==t.txn_type)&&l.a.createElement(lt.a,{onClick:function(a){return e.handleReversePayment(t.id)}},"Reverse Payment"))}}]}},{key:"componentDidUpdate",value:function(){Ut()("#list_txn").dataTable({order:[],bAutoWidth:!0,bDestroy:!0,dom:"Bfrtip",buttons:["csv","excel","print"]})}},{key:"render",value:function(){var e=this;return l.a.createElement("div",{className:"",style:{"padding-left":"0px"}},l.a.createElement("div",{className:"pull"},l.a.createElement("input",{type:"submit",value:"View Txns",onClick:this.handleViewTxnClick,className:"".concat("btn"==this.props.btn?"btn":"btn-sm"," btn-primary")})),l.a.createElement(nt.a,{show:this.state.modalBox,onHide:this.handleModalClose,size:"xl"},l.a.createElement(nt.a.Header,{closeButton:!0,show:this.state.modalBox,onHide:this.handleModalClose},l.a.createElement(nt.a.Title,null,l.a.createElement("h4",null,"Transactions of Float Advance ID: ",this.props.loan_doc_id))),l.a.createElement(nt.a.Body,null,null!=this.state.loanTxnList&&l.a.createElement("div",null,l.a.createElement("div",{className:"d-flex justify-content-between align-items-center",style:{padding:5}},l.a.createElement("p",{className:"no-margin text-white"},l.a.createElement("b",null,"Total Entries : ",this.state.copy.length)),l.a.createElement("div",{style:{position:"relative"}},l.a.createElement("i",{class:"fa-solid fa-magnifying-glass search_pos"}),l.a.createElement("input",{placeholder:"Search here",className:"search_posInput",onChange:function(t){return e.changeHandler(t.target.value)}}))),l.a.createElement(ua,{showPag:!0,minRow:0,row_data:void 0!==this.state.copy?this.state.copy:[],column_data:this.state.columndatas,resizable:!1,defaultSorted:[{id:"txn_date",desc:!0}],exportCSV:!0,csvFile:"TransactionsList",csvData:this.state.copy}))),l.a.createElement(nt.a.Footer,null,l.a.createElement(lt.a,{variant:"secondary",onClick:this.handleModalClose},"Close"))))}}]),t}(ct),bs=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(d.a)(t).call(this,e))).viewLoanPage=function(e){var t=a.state.searchLoans;Object.keys(t).length>0?Oa(a.req({loan_search_criteria:t},!0)).then(function(e){if(e){e.data.results.length>0&&(a.loan=e.data.results,e.data.results.map(function(e,t){return window.open("/fa/view/"+e.loan_doc_id,"_blank")}))}}):alert("No results found.")},a.handleSearch=function(e){var t=e.target.id;Ut()("#list").DataTable().destroy(),a.setState({datatable_div_style:"hide_div",search_btn_style:"disable_div"});var n=a.state.searchLoans;n.mode=t,Object.keys(n).length>0?Oa(a.req({loan_search_criteria:n},!0)).then(function(e){if(a.resp(e),a.setState({search_btn_style:""}),e){"view"==e.data.mode?window.open("/fa/view/"+e.data.loan_doc_id,"_blank"):"search"==e.data.mode?(a.setState(function(t){return t.copy=e.data.results}),a.setState(function(t){return t.rowdatas=e.data.results}),a.setState(function(e){return e.columndatas=a.columndatas()}),a.loan=e.data.results,a.setState({search:!0}),a.setState({datatable_div_style:"show_div",loanResults:[],search_loan:"hide_div",modify_search:"show_div"})):alert("No results found.")}}):(a.setState({search_btn_style:""}),alert("Choose atleast one filter to search Float Advance."))},a.changeHandler=function(e){var t=e,n=a.state.rowdatas.filter(function(e){return null!==e.loan_doc_id&&e.loan_doc_id.toLowerCase().includes(t.toLowerCase())||null!==e.acc_number&&e.acc_number.includes(t)||null!==e.product_name&&e.product_name.toLowerCase().includes(t.toLowerCase())||null!==e.flow_rel_mgr_name&&e.flow_rel_mgr_name.toLowerCase().includes(t.toLowerCase())||null!==e.biz_name&&e.biz_name.toLowerCase().includes(t.toLowerCase())});a.setState(function(e){return e.copy=n})},a.viewLoan=function(e){var t=e.target.id;window.open("/fa/view/"+t,"_blank")},a.viewTxn=function(e){a.setState({loan_doc_id:e.target.id}),a.setState({modalBox:!0})},a.handleModalClose=function(e){a.setState({modalBox:!1})},a.handleModifySearch=function(e){a.setState({search_loan:"show_div",modify_search:"hide_div"})},a.state={search_btn_style:"",data_prvdr_name_list:[],lender_name_list:[],product_name_list:[],searchLoans:{},datatable_div_style:"hide_div",search_loan:"show_div",modify_search:"hide_div",toView:!1,copy:[],rowdatas:[],columndatas:[]},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"columndatas",value:function(){var e=this;return[{Header:"FA ID",id:"loan_doc_id",accessor:function(e){return l.a.createElement($.a,{className:"link-doc-id",to:"/fa/view/"+e.loan_doc_id,target:"_blank"},e.loan_doc_id)}},{Header:"A/C Number",id:"acc_number",accessor:function(e){return e.acc_number}},{Header:"Product",id:"product_name",accessor:function(e){return e.product_name}},{Header:"RM",id:"flow_rel_mgr_name",accessor:function(e){return e.flow_rel_mgr_name}},{Header:"Biz Name | Cust Name",id:"biz_name",accessor:function(e){return e.biz_name+" | "+e.cust_name}},{Header:"Disbursal Date",id:"disbursal_date",accessor:function(e){return ve(e.disbursal_date)}},{Header:"Due Date",id:"due_date",accessor:function(e){return ve(e.due_date)}},{Header:function(){return l.a.createElement("div",{className:"text-center"},"FA Amount (",e.currency_code,")")},id:"loan_principal",accessor:function(e){return je(mt(e.loan_principal))}},{Header:function(){return l.a.createElement("div",{className:"text-center"},"Fee (",e.currency_code,")")},id:"flow_fee",accessor:function(e){return je(mt(e.flow_fee))}},{Header:function(){return l.a.createElement("div",{className:"text-center"},"Paid Amount (",e.currency_code,")")},id:"paid_amount",accessor:function(e){return je(mt(e.paid_amount))}},{Header:"Paid Date",id:"paid_date",accessor:function(e){return e.paid_date?function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"-NA-";return e?ge(e,!1,2):t}(e.paid_date):"Not Paid"}},{Header:"Overdue Days",id:"overdue_days",accessor:function(e){return e.overdue_days}},{Header:"Action",id:"action",accessor:function(e){return l.a.createElement(Es,{parent:"loan_search",loan_doc_id:e.loan_doc_id})}}]}},{key:"render",value:function(){var e=this;return l.a.createElement("div",{className:"container containerTopmargin max-width no-padding"},l.a.createElement("div",{className:"floatAdvancetitleBox"},l.a.createElement("h3",{className:"preHeaderpad no-margin",style:{paddingLeft:15,fontSize:20}},"SEARCH - Float Advance ")),l.a.createElement("div",{className:"text-right",style:{marginTop:"show_div"===this.state.modify_search?15:0}},l.a.createElement("div",{className:this.state.modify_search},l.a.createElement("button",{type:"button",className:"btn btn-md btn-light",id:"float_style",onClick:this.handleModifySearch},"Modify Search"))),l.a.createElement("div",{className:this.state.search_loan},l.a.createElement(Fr,{id:"searchLoans",mode:"loan",onSearch:this.handleSearch,search_btn_style:this.state.search_btn_style,onComponentChange:this.handleComponentChange,onComponentReset:this.handleComponentReset,disable_btn:this.state.calling_api,onComponentElementChange:this.handleComponentElemetChange})),l.a.createElement("div",{id:"",style:{marginTop:15}},l.a.createElement("div",{className:this.state.datatable_div_style},l.a.createElement("div",{className:"d-flex justify-content-between align-items-center",style:{padding:5}},l.a.createElement("p",{className:"no-margin text-white"},l.a.createElement("b",null,"Total Entries : ",this.state.copy.length)),l.a.createElement("div",{style:{position:"relative"}},l.a.createElement("i",{class:"fa-solid fa-magnifying-glass search_pos"}),l.a.createElement("input",{placeholder:"Search here",className:"search_posInput",onChange:function(t){return e.changeHandler(t.target.value)}}))),l.a.createElement(ua,{showPag:!0,defaultPageSize:10,minRow:0,row_data:void 0!==this.state.copy?this.state.copy:[],column_data:this.state.columndatas,resizable:!1,defaultSorted:[{id:"disbursal_date",desc:!1}],exportCSV:!0,csvFile:"Loans List",csvData:this.state.copy}))))}}]),t}(st),ys=function(e){function t(){var e,a,n;Object(c.a)(this,t);for(var l=arguments.length,r=new Array(l),s=0;s<l;s++)r[s]=arguments[s];return(n=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state=(a={view_loan:!1,modalBox:!1,send_sms:!0,disable:"disable_div",capture_btn:"disable_div",txn_id_style:"txn_id_style"},Object(S.a)(a,"txn_id_style","txn_id_style"),Object(S.a)(a,"is_skip_trans_id_check",!1),Object(S.a)(a,"txn_data",""),a),n.handleSkipTransIDChekCheckboxClick=function(e){n.setState({is_skip_trans_id_check:e.target.checked},n.handleTxnId)},n.disb_attempt_failed_msg="##The last instant disbursement attempt for this FA got failed. If you think RETRY instant disbursement can not be done, proceed manual disbursement here.##\n\n",n.handleDisburseManually=Object(F.a)(D.a.mark(function e(){var t;return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:"pending_mnl_dsbrsl",window.confirm(n.get_disburse_manually_alert())&&("pending_mnl_dsbrsl"!=n.props.data.status||null==n.props.data.manual_disb_user_id?(t={loan_doc_id:n.props.data.loan_doc_id,loan_status:"pending_mnl_dsbrsl",manual_disb_user_id:g("user_id")},Wa(n.req(t)).then(function(){var e=Object(F.a)(D.a.mark(function e(t){return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n.resp(t),t&&"success"==t.status&&n.handleDisburseClick();case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}())):n.handleDisburseClick());case 2:case"end":return e.stop()}},e)})),n.handleDisburseClick=function(){var e=Object(F.a)(D.a.mark(function e(t){var a,l,r,s,c,o;return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.props.onDisburseClick(!1);case 2:a=n.props.data.cust_id,"enabled",l=n.props.data.lender_code,r=n.props.data.acc_prvdr_code,s="home"==n.props.parent?n.props.data.loan_purpose:n.props.data.acc_purpose,c={cust_id:a,status:"enabled",acc_purpose:s},o={lender_code:l,network_prvdr_code:r,acc_purpose:"disbursement",status:"enabled",cust_id:a},n.setOptionsListToStateFromAppApi("common","lender_accounts",n.req({lender_account:o}),["account_id","acc_num_disp_txt"]),n.setOptionsListToStateFromAppApi("common","customer_accounts",n.req({customer_account:c}),["account_id","acc_num_disp_txt"]),n.disbursal_txn={amount:n.props.data.amount,loan_doc_id:n.props.data.loan_doc_id},n.setState({modalBox:!0});case 13:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),n.handleClose=function(){var e=Object(F.a)(D.a.mark(function e(t){var a;return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a={loan_doc_id:n.props.data.loan_doc_id,loan_status:"pending_mnl_dsbrsl",manual_disb_user_id:null},Xa(n.req(a)).then(function(){var e=Object(F.a)(D.a.mark(function e(t){return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n.resp(t),!t||"success"!=t.status){e.next=5;break}return n.setState({modalBox:!1,txn_data:"",capture_btn:"disable_div",txn_id_style:"txn_id_style",txn_failed_msg:""}),e.next=5,n.props.onDisburseClick(!0);case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),n.handleTxnModeChange=function(e){n.setState({txn_mode:"("+ue(e.target.value)+")"}),n.handleSelfChange(e)},n.handleCheckboxClick=function(e){e.target.checked&&n.setState({checkbox:!0})},n.handleSMSCheckboxClick=function(e){e.target.checked?n.setState({send_sms:!0}):n.setState({send_sms:!1})},n.handleSubmit=function(e){if(e.preventDefault(),n.setState({capture_btn:"disable_div"}),!0===n.state.checkbox){var t=n.disbursal_txn;"home"==n.props.parent&&(t.amount=n.props.data.loan_principal,t.capture_only=!0),t.send_sms=n.state.send_sms,t.from_ac_id=n.from_acc.value,t.to_ac_id=n.to_acc.value,t.is_skip_trans_id_check=n.state.is_skip_trans_id_check,Ba(n.req({disbursal_txn:t})).then(function(e){e&&("success"===e.status?(n.setState({modalBox:!1}),"home"==n.props.parent?n.setState({view_loan:!1}):n.setState({view_loan:!0}),window.location.reload()):(alert(e.message+"\n"+JSON.stringify(e.data)),n.setState({capture_btn:""})))})}else alert("Please select the checkbox to agree and disburse")},n.enableTxnID=function(e){var t=n.disbursal_txn;t.amount>0&&null!=t.from_ac_id&&null!=t.txn_date&&n.setState({txn_id_style:""})},n}return Object(m.a)(t,e),Object(o.a)(t,[{key:"handleTxnId",value:function(){var e=this,t=this.disbursal_txn.txn_id;t.length>5&&Ka(this.req({loan_doc_id:this.disbursal_txn.loan_doc_id,acc_id:this.disbursal_txn.from_ac_id,txn_id:t,is_skip_trans_id_check:this.state.is_skip_trans_id_check,mode:"debit"},!0)).then(function(t){e.resp(t),t&&("success"===t.status?(e.setState({capture_btn:"disable_div",txn_data:"",txn_failed_msg:""}),t.data?t.data.hasOwnProperty("ignore_check")?e.setState({capture_btn:""}):t.data.hasOwnProperty("message")?e.setState({txn_failed_msg:t.data.message}):t.data.total_amount==e.disbursal_txn.amount?e.setState({txn_data:t.data.acc_stmt_records,capture_btn:""}):t.data.total_amount!=e.disbursal_txn.amount&&e.setState({txn_data:t.data.acc_stmt_records}):e.setState({txn_failed_msg:"Please check the transaction ID. No payment received to the account with this transaction ID."})):alert(t.message+"\n"+JSON.stringify(t.data)))})}},{key:"get_disburse_manually_alert",value:function(){var e="You are going to start the manual disbursement. Follow the below steps always to avoid duplicate disbursement.\n\n1. After you click OK, 'Disburse Manually' screen will open. Don't close this screen during the entire disbursement process.\n2. Send FA to customer manually using web portal, USSD etc., (If you do not know how to do this, discuss with Tech Support)\n3. Capture the disburement details on the 'Disburse Manually' screen.\n\nClick 'Cancel' if you are not ready to do the above steps.",t="##For this Account Provider (".concat(this.props.data.acc_prvdr_code,"), Instant Disbursal has not been configured##\n\n");return 1==this.props.data.is_manual_disb_ap_code?t+e:this.disb_attempt_failed_msg+e}},{key:"render",value:function(){var e=this;return!0===this.state.view_loan?l.a.createElement(Y.a,{to:"/fa/view/".concat(this.props.data.loan_doc_id,"#disbursed")}):l.a.createElement("div",{id:""},l.a.createElement("div",{className:"row"},"home"==this.props.parent?l.a.createElement(l.a.Fragment,null,this.props.data.manual_disb_user_id!=g("user_id")&&null!=this.props.data.manual_disb_user_id?l.a.createElement("div",{className:"col-md-12 mt-1"},l.a.createElement(se.a,{overlay:l.a.createElement(ie.a,{id:"tooltip-disabled"},"Manual disbursement initiated by ".concat(this.props.data.manual_disb_user_name,". No other user will be able to capture this manual disbursement"))},l.a.createElement("span",{className:"d-inline-block"},l.a.createElement("input",{type:"submit",disabled:!0,className:"btn btn-primary btn-sm",value:"Disburse Manually"}),"\xa0\xa0\xa0"))):l.a.createElement("div",{className:"col-md-12 mt-1"},l.a.createElement("input",{type:"submit",className:"btn btn-primary btn-sm",disabled:this.state.calling_api,value:"Disburse Manually",onClick:this.handleDisburseManually}),"\xa0\xa0\xa0")):l.a.createElement("div",{className:"col-md-12"},l.a.createElement("input",{type:"button",className:"btn btn-primary disburse",disabled:this.state.calling_api,value:"Capture Disbursal",onClick:this.handleDisburseClick}),"\xa0\xa0\xa0")),l.a.createElement("br",null),l.a.createElement(nt.a,{show:this.state.modalBox,onHide:this.handleClose,size:"xl"},l.a.createElement(nt.a.Header,{closeButton:!0,show:this.state.modalBox,onHide:this.handleClose},l.a.createElement(nt.a.Title,null,"FA Disbursal")),l.a.createElement(nt.a.Body,null,l.a.createElement("div",{className:"container"},"home"==this.props.parent&&l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-12"},l.a.createElement("label",null,1==this.props.data.is_manual_disb_ap_code?"##For this Account Provider (".concat(this.props.data.acc_prvdr_code,"), Instant Disbursal has not been configured##"):this.disb_attempt_failed_msg,l.a.createElement("br",null),l.a.createElement("br",null),"Follow the below steps always to avoid duplicate disbursement.",l.a.createElement("br",null),l.a.createElement("br",null),"1. Don't close this screen during the entire disbursement process.",l.a.createElement("br",null),"2. Send FA to customer manually using web portal, USSD etc., (If you do not know how to do this, discuss with Tech Support)",l.a.createElement("br",null),'3. Capture the disbursement details on this screen and click "Submit".',l.a.createElement("br",null),l.a.createElement("br",null)))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-6"},l.a.createElement("h4",null,"Float Advance ID: ",this.props.data.loan_doc_id," ")),l.a.createElement("div",{className:"col-md-6"},l.a.createElement("h4",null,"Float Advance Amount: ",je(mt(this.props.data.amount,this.currency_code))," "))),l.a.createElement("div",{className:"row date-range"},l.a.createElement("div",{className:"col-md-6"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-5"},l.a.createElement("span",null,"Disburse From A/C",l.a.createElement("br",null),"( ",this.props.data.lender_name," )",l.a.createElement("font",{className:"text-danger"},"   *  "))),l.a.createElement("div",{className:"col-md-7"},l.a.createElement("select",{id:"from_ac_id",defaultValue:this.selected.lender_accounts,ref:function(t){return e.from_acc=t},onChange:function(t){e.handleSelfChange(t),e.enableTxnID(t)},className:"form-control",type:"text"},this.state.lender_accounts_dd))),l.a.createElement("br",null),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-5"},l.a.createElement("span",null,"Amount Disbursed"),l.a.createElement("font",{className:"text-danger"},"   *  ")),l.a.createElement("div",{className:"col-md-7"},l.a.createElement("div",{id:"",className:"".concat(this.state.disable)},l.a.createElement("input",{type:"text",id:"amount",onChange:this.handleSelfChange,value:this.props.data.amount,className:"form-control"})))),l.a.createElement("br",null),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-5"},l.a.createElement("span",null,"Disbursal Date"),l.a.createElement("font",{className:"text-danger"},"   *  ")),l.a.createElement("div",{className:"col-md-7"},l.a.createElement(Ft.a,{closeOnSelect:!0,onChange:function(t){e.handleSelfDateChange("txn_date",t),e.enableTxnID(t)},dateFormat:"DD MMM YYYY",timeFormat:!1,required:"required"}))),l.a.createElement("br",null),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-5"},l.a.createElement("span",null,"Disbursal Mode"),l.a.createElement("font",{className:"text-danger"},"   *  ")),l.a.createElement("div",{className:"col-md-7"},l.a.createElement("select",{id:"txn_mode",onChange:this.handleTxnModeChange,className:"form-control",type:"text",required:"required"},this.getSelectOptions("transaction_mode")))),l.a.createElement("br",null)),l.a.createElement("div",{className:"col-md-6"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-5"},l.a.createElement("span",null,"Customer's A/C"),l.a.createElement("font",{className:"text-danger"},"   *  ")),l.a.createElement("div",{className:"col-md-7"},l.a.createElement("select",{id:"to_ac_id",defaultValue:this.selected.customer_accounts,ref:function(t){return e.to_acc=t},onChange:function(t){e.handleSelfChange(t),e.enableTxnID(t)},className:"form-control",type:"text",required:"required"},this.state.customer_accounts_dd))),l.a.createElement("br",null),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-5"},l.a.createElement("span",null,"Remarks")),l.a.createElement("div",{className:"col-md-7"},l.a.createElement("input",{type:"text",id:"remarks",onChange:this.handleSelfChange,className:"form-control",required:"required"}))),l.a.createElement("br",null),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-5"},l.a.createElement("span",null,"Disbursal Transaction ID"),l.a.createElement("font",{className:"text-danger"},"   *  ")),l.a.createElement("div",{className:"col-md-7 ".concat(this.state.txn_id_style)},l.a.createElement("input",{type:"text",id:"txn_id",onChange:function(t){e.handleSelfChange(t),e.handleTxnId(t)},className:"form-control spacing",required:"required"}))),l.a.createElement("br",null),b("loan","skip_txn_id_check")&&l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-5"}),l.a.createElement("div",{className:"col-md-7 ".concat(this.state.txn_id_style)},l.a.createElement("label",null,l.a.createElement("input",{type:"checkbox",onChange:function(t){return e.handleSkipTransIDChekCheckboxClick(t)}}),"\xa0",l.a.createElement("b",{className:"red_color_font"},"Skip transaction ID check")))),l.a.createElement("br",null),l.a.createElement("div",{className:"row"},this.state.txn_data&&l.a.createElement(l.a.Fragment,null,l.a.createElement("br",null),l.a.createElement("div",{class:"alert alert-success"},this.state.txn_data.map(function(e){return l.a.createElement("h6",null,"Amount : ",e.dr_amt," | Txn Date : ",e.stmt_txn_date," | Description : ",e.descr)}))),this.state.txn_failed_msg&&l.a.createElement("div",{class:"alert alert-danger"},l.a.createElement("h6",null,this.state.txn_failed_msg))),l.a.createElement("br",null))),l.a.createElement("div",{className:"row"},l.a.createElement("label",null,l.a.createElement("input",{type:"checkbox",onChange:this.handleSMSCheckboxClick,defaultChecked:!0}),"\xa0 Send Disbursement confirmation notification SMS")),l.a.createElement("div",{className:"row"},l.a.createElement("label",null,l.a.createElement("input",{type:"checkbox",onChange:this.handleCheckboxClick}),"\xa0 I have transferred the above Float Advance to the Customer's Account using Third Party Platform ",this.state.txn_mode,".")))),l.a.createElement(nt.a.Footer,null,l.a.createElement(lt.a,{variant:"secondary",onClick:this.handleClose},"Cancel"),l.a.createElement("input",{type:"button",className:"btn btn-primary ".concat(this.state.capture_btn),onClick:this.handleSubmit,value:"Submit"}))))}}]),t}(ct),Ns=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={view_loan:!1,modalBox:!1,send_sms:!0,disburse_style:"disable_div",processing:"",reviewed:0},a.handleInstantDisburalClick=function(e){var t=a.props.data,n=t.lender_code,l=t.acc_prvdr_code,r=t.loan_principal,s=t.loan_doc_id,c=t.cust_id,o=t.cust_acc_id,i=t.to_acc_num;a.txn={lender_code:n,acc_prvdr_code:l,amount:r,loan_doc_id:s,cust_id:c,to_ac_id:o,to_acc_num:i},a.setState({modalBox:!0})},a.handleClose=function(e){a.setState({modalBox:!1})},a.handleSMSCheckboxClick=function(e){e.target.checked?a.setState({send_sms:!0}):a.setState({send_sms:!1})},a.handleSubmit=function(e){if((e.preventDefault(),a.props.data.data_prvdr_cust_id!=a.props.data.to_acc_num)&&0==window.confirm("Data provider customer ID and A/C number are different. Are you sure to disburse the amount?"))return;if(5===a.state.reviewed){var t=a.txn;t.send_sms=a.state.send_sms,t.instant_disbursal=!0,a.setState({disburse_style:"disable_div",processing:"Payment is being processes. please wait... it shall take upto 60 secs"}),La(a.req({instant_disbursal_txn:t})).then(function(e){if(a.setState({disburse_style:"",processing:!1}),e)if("success"===e.status)a.setState({view_loan:!0}),a.setState({modalBox:!1}),window.location.reload();else if("warning"===e.status){if(0==window.confirm(e.message))return}else alert(e.message+"\n"+JSON.stringify(e.data))})}else alert("Please review all the data before disbursing")},a.handleReviewChange=function(e){var t=e.target.checked,n=a.state.reviewed,l="disable_div";t?n++:n--,5==n&&(l=""),a.setState({reviewed:n,disburse_style:l})},a.handleTxtModeChange=function(e){a.setState({txn_mode:"("+ue(e.target.value)+")"})},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return!0===this.state.view_loan?l.a.createElement(Y.a,{to:"/fa/view/".concat(this.props.data.loan_doc_id,"#disbursed")}):l.a.createElement("div",{id:""},l.a.createElement("div",{className:"row"},l.a.createElement("div",null,l.a.createElement("input",{type:"button",className:"btn btn-primary disburse",value:"Instant Disbursal",onClick:this.handleInstantDisburalClick}))),l.a.createElement("br",null),l.a.createElement(nt.a,{className:"instant_disbursal",show:this.state.modalBox,onHide:this.handleClose,size:"l"},l.a.createElement(nt.a.Header,{closeButton:!0,show:this.state.modalBox,onHide:this.handleClose},l.a.createElement(nt.a.Title,null,"Instant FA Disbursal (",this.props.data.acc_number,")")),l.a.createElement(nt.a.Body,null,l.a.createElement("div",{className:"container instant_disbursal"},l.a.createElement("p",null,"Review the below disbursal data by clicking over them. "),l.a.createElement("form",null,l.a.createElement("div",{className:"rule-form-group form-group row reset-margin"},l.a.createElement("label",{for:"",className:"col-sm-4 label__name reset-padding"},"Customer"),l.a.createElement("div",{className:"col-sm-8 reset-padding"},l.a.createElement("div",null,l.a.createElement("input",{type:"checkbox",id:"toggle_1",className:"toggle visually-hidden",onChange:this.handleReviewChange,value:"1"}),l.a.createElement("label",{className:"select_toogle",for:"toggle_1"},this.props.data.cust_name," | ",this.props.data.biz_name),l.a.createElement("div",{className:"control-me"})))),l.a.createElement("div",{className:"rule-form-group form-group row reset-margin"},l.a.createElement("label",{for:"",className:"col-sm-4 label__name reset-padding"},"A/C Number"),l.a.createElement("div",{className:"col-sm-8 reset-padding"},l.a.createElement("div",null,l.a.createElement("input",{type:"checkbox",id:"toggle_2",className:"toggle visually-hidden",onChange:this.handleReviewChange,value:"2"}),l.a.createElement("label",{className:"select_toogle",for:"toggle_2"},this.props.data.to_acc_num||"NA"),l.a.createElement("div",{className:"control-me"})))),l.a.createElement("div",{className:"rule-form-group form-group row reset-margin"},l.a.createElement("label",{for:"",className:"col-sm-4 label__name reset-padding"},"Float amount"),l.a.createElement("div",{className:"col-sm-8 reset-padding"},l.a.createElement("div",null,l.a.createElement("input",{type:"checkbox",id:"toggle_3",className:"toggle visually-hidden",onChange:this.handleReviewChange,value:"3"}),l.a.createElement("label",{className:"select_toogle",for:"toggle_3"},mt(this.props.data.loan_principal,this.props.data.currency_code)),l.a.createElement("div",{className:"control-me"})))),l.a.createElement("div",{className:"rule-form-group form-group row reset-margin"},l.a.createElement("label",{for:"",className:"col-sm-4 label__name reset-padding"},"Duration / Due date"),l.a.createElement("div",{className:"col-sm-8 reset-padding"},l.a.createElement("div",null,l.a.createElement("input",{type:"checkbox",id:"toggle_4",className:"toggle visually-hidden",onChange:this.handleReviewChange,value:"4"}),l.a.createElement("label",{className:"select_toogle",for:"toggle_4"},this.props.data.duration," days / ",this.props.data.due_date),l.a.createElement("div",{className:"control-me"})))),l.a.createElement("div",{className:"rule-form-group form-group row reset-margin"},l.a.createElement("label",{for:"",className:"col-sm-4 label__name reset-padding"},"Repayment / Fee"),l.a.createElement("div",{className:"col-sm-8 reset-padding"},l.a.createElement("div",null,l.a.createElement("input",{type:"checkbox",id:"toggle_5",className:"toggle visually-hidden",onChange:this.handleReviewChange,value:"5"}),l.a.createElement("label",{className:"select_toogle",for:"toggle_5"},mt(this.props.data.due_amount,this.props.data.currency_code)," / ",mt(this.props.data.flow_fee,this.props.data.currency_code)),l.a.createElement("div",{className:"control-me"})))),l.a.createElement("div",{className:"row"},l.a.createElement("label",null,l.a.createElement("input",{type:"checkbox",onChange:this.handleSMSCheckboxClick,defaultChecked:!0}),"\xa0 Send Disbursement confirmation notification SMS")))),this.state.processing&&l.a.createElement("p",{style:{color:"red",textAlign:"right",fontWeight:"bold"}},this.state.processing)),l.a.createElement(nt.a.Footer,null,l.a.createElement("div",{className:"col-md-8 reset-margin reset-padding"},l.a.createElement("button",{type:"button",className:"btn btn-primary float-right mr-1 ".concat(this.state.disburse_style),onClick:this.handleSubmit},"Disburse ",mt(this.props.data.loan_principal,this.props.data.currency_code)),l.a.createElement("button",{disabled:!0,type:"button",className:"btn btn-outline-primary float-right mr-1",onClick:this.handleClose,"data-dismiss":"modal","aria-label":"Close"},"Cancel")))))}}]),t}(ct),ws=(a(152),function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={disabled:!0,timer_min:-1,timer_sec:null,timer:null},a.disableButton=function(){return a.setState({disabled:!0})},a.enableButton=function(){return a.setState({disabled:!1})},a.resendOTP=function(e){var t={entity_id:a.props.entity_id,otp_type:a.props.otp_type};a.disableButton(),Fa(a.req(t)).then(function(e){e?(a.componentDidMount(),alert(e.message)):a.enableButton()})},a.runTimer=function(){clearInterval(a.state.timer);var e=setInterval(function(){return a.tick()},1e3);a.setState({timer:e})},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this,t={entity_id:this.props.entity_id,otp_type:this.props.otp_type};(function(e){return L(M+"/otp/status",e)})(this.req(t)).then(function(t){if(t)if(1==t.data.status){var a=b("loan","view_fa_capture_disbursal");if(t.data.expired)return void(a?e.setState({expired:!0,disabled:!1,timer_min:0,timer_sec:0}):e.setState({expired:!0,timer_min:0,timer_sec:0}));var n=~~(t.data.time_left/60),l=t.data.time_left-60*n;e.setState({timer_min:n,timer_sec:l}),e.runTimer(),a?e.enableButton():(e.disableButton(),setTimeout(function(){e.enableButton()},1e3*t.data.time_left))}else e.enableButton()})}},{key:"tick",value:function(){this.state.timer_min<0||0!=this.state.timer_sec&&0==this.state.timer_sec||(this.setState({timer_sec:this.state.timer_sec-1}),this.state.timer_sec<0&&this.setState({timer_min:this.state.timer_min-1,timer_sec:59}))}},{key:"render",value:function(){var e=this;return l.a.createElement("div",null,l.a.createElement("div",null,l.a.createElement(lt.a,{variant:"primary",disabled:this.state.disabled,onClick:function(){window.confirm("At the time of FA application, the app had sent the confirmation code to the customer as an SMS . Click 'OK' if you are sure if the customer has not received the SMS with confirmation code and would like to send the confirmation code SMS with confirmation code again.")&&e.resendOTP()}},this.props.buttonName)),l.a.createElement("div",{className:"text-labelblue"},60*this.state.timer_min+this.state.timer_sec>0&&l.a.createElement("span",null," ",this.state.timer_min,"m ",this.state.timer_sec,"s to resend"),this.state.expired&&l.a.createElement("span",null," Resend Limit Exceeded")))}}]),t}(ct));ws.defaultProps={buttonName:"Resend Code"};var Cs=ws,ks=a(70),Ss=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={accountDiv:"hide",disabled:!0,ongoing:!1,recovery_details:{}},a.recovery_txn={},a.captureRecovery=function(){var e={rec_id:a.state.recovery_details.id};Ja(a.req(e)).then(function(e){e&&window.location.reload()})},a.handleOpen=function(){a.componentWillMount(),a.setState({modal:!0})},a.handleClose=function(){a.setState({modal:!1})},a.handleSubmit=function(){a.setState({disabled:!0}),console.log(JSON.stringify(a.recovery_txn));var e=Object(Z.a)({},a.recovery_txn,{loan_doc_id:a.props.loan_doc_id,cust_id:a.props.cust_id,biz_name:a.props.biz_name});Ya(a.req({loan_recovery:e})).then(function(e){e?a.handleOpen():a.setState({disabled:!1})})},a.cancelRecovery=function(e){window.confirm("Are you sure you want to cancel the collection?")&&Ua(a.req({rec_id:a.state.recovery_details.id})).then(function(e){e&&a.handleOpen()})},a.rotateIcon=function(e){a.setState({rotate:!0}),setTimeout(function(){a.setState({rotate:!1})},1500)},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){var e,t=this;this.setState({modal:!1}),(e=this.req({loan_doc_id:this.props.loan_doc_id}),L(M+"/loan/check_ong_rec",e)).then(function(e){e&&(t.setState({ongoing:e.data.ongoing}),e.data.ongoing?t.setState({recovery_details:e.data}):t.setState({disabled:!1}))})}},{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"rcvry_btn"},l.a.createElement(lt.a,{className:"collectionPro_actBtn",variant:"primary",onClick:this.handleOpen},this.props.name)),l.a.createElement(nt.a,{dialogClassName:"rec-form-modal",show:this.state.modal,onHide:this.handleClose},l.a.createElement(nt.a.Header,{closeButton:!0,show:this.state.modal,onHide:this.handleClose},l.a.createElement(nt.a.Title,null,"Cash Payment Request ",!this.state.ongoing&&"Form"," ",l.a.createElement("span",{className:"rec-title-right"},l.a.createElement("b",null,this.state.ongoing&&ue(this.state.recovery_details.status)+" - ",this.getCurrentStep()," of 3")))),l.a.createElement(nt.a.Body,null,this.state.ongoing&&l.a.createElement(lt.a,{variant:"link",style:{fontSize:"30px",borderRadius:"50%",padding:0,float:"right",width:"35px"},onClick:this.handleOpen},l.a.createElement(ks.GrRefresh,{id:"ref-icon",onClick:this.rotateIcon,className:this.state.rotate?"rotate-icon ":""})),l.a.createElement("div",{className:"mb-4"},l.a.createElement("h4",null,l.a.createElement("b",null,this.props.biz_name)),l.a.createElement("ul",null,"pending_customer_otp"===this.state.recovery_details.status&&l.a.createElement(l.a.Fragment,null,l.a.createElement("li",null,l.a.createElement("p",{className:"text-danger"},this.state.recovery_details.otp_info[0]))," ",l.a.createElement("li",null,l.a.createElement("p",{className:"text-danger"},this.state.recovery_details.otp_info[1]))),!this.state.ongoing&&l.a.createElement(l.a.Fragment,null,l.a.createElement("li",null,l.a.createElement("p",{className:"text-danger"},"Use this form if and only if customer requests to make cash payment.")),l.a.createElement("li",null,l.a.createElement("p",{className:"text-danger"},"Submitting this form will send an OTP to the customer"))),"ready_to_collect"!==this.state.recovery_details.status&&l.a.createElement("li",null,l.a.createElement("p",{className:"text-danger"}," ",l.a.createElement("span",{className:"text-uppercase font-weight-bold"},"Do not collect cash")," from the customer until the customer sends OTP",l.a.createElement("br",null))))),l.a.createElement("div",{className:"container rec-form "+"".concat(this.state.ongoing&&"hide")},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-6 row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("label",null,"Requested Cash Payment Amount"),l.a.createElement("font",{className:"text-danger"},"   *  "))),l.a.createElement("div",{className:"col-6 d-flex align-items-center"},l.a.createElement("input",{type:"text",className:"form-control",id:"amount",onChange:this.handleSelfChange,placeholder:"Enter Amount",required:!0})))),this.state.ongoing&&l.a.createElement("div",{class:"container rec-form"},l.a.createElement("div",{class:"row"},l.a.createElement("div",{class:"col-6"},l.a.createElement("h5",null,"Cash Amount")),l.a.createElement("div",{class:"col-6>"},l.a.createElement("h5",null,l.a.createElement("b",null,Ne(this.state.recovery_details.amount,this.currency_code))))),l.a.createElement("div",{class:"row"},l.a.createElement("div",{class:"col-6"},"Initiated On"),l.a.createElement("div",{class:"col-6>"},_e(this.state.recovery_details.created_at))),l.a.createElement("div",{class:"row"},l.a.createElement("div",{class:"col-6"},"Status"),l.a.createElement("div",{class:"col-6>"},ue(this.state.recovery_details.status))),l.a.createElement("div",{class:"row"},l.a.createElement("div",{class:"col-6"},"Initiated by"),l.a.createElement("div",{class:"col-6>"},this.state.recovery_details.rs_name)),"ready_to_collect"===this.state.recovery_details.status&&l.a.createElement("p",{className:"text-primary"},l.a.createElement("span",{className:"text-uppercase font-weight-bold"},"Now collect cash of ",Ne(this.state.recovery_details.amount,this.currency_code)),"  from customer and click the button below to record the collection"))),l.a.createElement(nt.a.Footer,null,!this.state.ongoing&&l.a.createElement(lt.a,{variant:"primary",disabled:this.state.disabled,onClick:this.handleSubmit},"Send OTP"),this.state.ongoing&&"pending_customer_otp"===this.state.recovery_details.status&&l.a.createElement(lt.a,{variant:"danger",onClick:this.cancelRecovery},"Cancel Payment Request"),this.state.ongoing&&"pending_customer_otp"===this.state.recovery_details.status&&l.a.createElement(Cs,{entity_id:this.state.recovery_details.id,otp_type:"confirm_recovery",buttonName:"Resend OTP"}),this.state.ongoing&&"ready_to_collect"===this.state.recovery_details.status&&l.a.createElement(lt.a,{variant:"primary",onClick:this.captureRecovery},"Record Collection"))))}},{key:"getCurrentStep",value:function(){var e="";return this.state.ongoing?"pending_customer_otp"===this.state.recovery_details.status?e="STEP 2":"ready_to_collect"===this.state.recovery_details.status&&(e="STEP 3"):e="STEP 1",e}}]),t}(ct),xs=function(e){return L(M+"/write_off/req_write_off",e)},As=function(e){return L(M+"/write_off/appr_reject",e)},Os=function(e){return L(M+"/write_off/recover_amt",e)},js=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={modalBox:!1,write_off:{},writeoff_data:{},summary:{},loan_prov:{},message_count:0,loan_provisioning:{},is_selected_prov_year:!1},a.handleApproveReject=function(e){var t=e.target.value,n={write_off_id:a.state.writeoff_data.id,loan_doc_id:a.props.loan_doc_id,mode:t};As(a.req(n)).then(function(e){a.resp(e),e&&"success"===e.status&&(a.setState({modalBox:!1}),window.location.reload(),"Approve"==t?alert("Write Off Approved successfully."):alert("Write Off Approval rejected successfully."))})},a.handleOpen=function(e){a.setState({modalBox:!0})},a.handleClose=function(e){a.setState({modalBox:!1,message_count:0})},a.handleReason=function(e){var t=a.state.write_off;t[e.target.id]=e.target.value,a.setState({write_off:t,message_count:be(e.target.value)})},a.handleReqWriteOff=function(e){var t,n=a.state.write_off;if(a.state.summary.os_principal>a.state.loan_prov.balance)alert("Provisioning amount is less than write off amount. Cannot write off for this customer.");else{var l={loan_doc_id:a.props.loan_doc_id,acc_prvdr_code:a.props.acc_prvdr_code};n.remarks&&a.write_off.loan_prov_id?(t=Object(Z.a)({loan_prov_id:a.write_off.loan_prov_id,write_off_amount:a.state.write_off_amount},l,n),xs(a.req(t,!0)).then(function(e){a.resp(e),e&&"success"===e.status&&(a.setState({modalBox:!1}),alert("Write Off ".concat(e.data.status," submitted successfully.")),window.location.reload())})):alert("Please enter required field")}},a.getRecoveryAmount=function(e){var t={loan_doc_id:a.props.loan_doc_id,loan_prov_id:a.write_off.loan_prov_id};a.write_off.loan_prov_id&&Os(a.req(t)).then(function(e){a.resp(e),e&&"success"===e.status&&a.setState({is_selected_prov_year:!0,write_off_amount:a.state.summary.os_principal+e.data})})},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){var e=this;this.write_off={loan_prov_id:""};var t={loan_doc_id:this.props.loan_doc_id,mode:"capture",amount:0};if(Ra(this.req(t)).then(function(t){e.resp(t),t&&"success"===t.status&&e.setState({summary:t.data})}),[null,"rejected"].includes(this.props.write_off_status)&&this.setOptionsListToStateFromAppApi("write_off","loan_prov_year",this.req(),["loan_prov_id","loan_prov_year_bal"]),"requested"==this.props.write_off_status){var a={write_off_id:this.props.write_off_id};(function(e){return L(M+"/write_off",e)})(this.req(a,!0)).then(function(t){e.resp(t),t&&"success"===t.status&&e.setState({writeoff_data:t.data})})}}},{key:"render",value:function(){var e=this,t="requested"==this.props.write_off_status?"Approve":"Submit for Approval",a="requested"==this.props.write_off_status?"Reject":"Cancel";return l.a.createElement("div",null,[null,"rejected"].includes(this.props.write_off_status)&&b("loan","request_write_off")&&l.a.createElement("div",{className:"col-md-12"},l.a.createElement(lt.a,{variant:"primary",onClick:this.handleOpen,value:"write_off"},"Request Write Off"),l.a.createElement("br",null),l.a.createElement("br",null)),"requested"==this.props.write_off_status&&b("loan","approve_write_off")&&l.a.createElement("div",{className:"col-md-12"},l.a.createElement(lt.a,{variant:"primary",onClick:this.handleOpen,value:"write_off"},"Approve Write Off"),l.a.createElement("br",null),l.a.createElement("br",null)),l.a.createElement(nt.a,{show:this.state.modalBox,onHide:this.handleClose,size:"xl"},l.a.createElement(nt.a.Header,{closeButton:!0,show:this.state.modalBox,onHide:this.handleClose},l.a.createElement(nt.a.Title,null,[null,"rejected"].includes(this.props.write_off_status)&&"Request Write Off ","requested"==this.props.write_off_status&&"Approve Write Off ","- ",this.state.summary.cust_name," / ",this.state.summary.acc_number)),l.a.createElement(nt.a.Body,{style:{width:"1000px",margin:"0 auto"}},l.a.createElement("div",{class:"d-flex"},l.a.createElement("div",{class:"mr-auto p-2",style:{width:"350px"}},"requested"==this.props.write_off_status&&l.a.createElement("div",{className:"text-labelblue"},l.a.createElement(Dr.a,null,l.a.createElement(Xl.a,null,l.a.createElement("b",null,"Requester")),l.a.createElement(Xl.a,null,this.state.writeoff_data.req_name)),l.a.createElement(Dr.a,null,l.a.createElement(Xl.a,null,l.a.createElement("b",null,"Requested Date")),l.a.createElement(Xl.a,null,this.state.writeoff_data.req_date)))),l.a.createElement("div",{class:"p-2"},l.a.createElement($.a,{className:"nav-link",to:"/call_log/search/".concat(this.props.cust_id),target:"_blank"},"Reason Call Log")),l.a.createElement("div",{class:"p-2"},l.a.createElement($.a,{className:"nav-link",to:"/field_visit/search/".concat(this.props.cust_id),target:"_blank"},"Reason Visit Log"))),l.a.createElement("div",null,l.a.createElement("hr",null),l.a.createElement(nn,{summary:this.state.summary,show_waiver:!1}),l.a.createElement("hr",null)),"requested"==this.props.write_off_status&&l.a.createElement("div",{className:"text-labelblue"},l.a.createElement(Dr.a,null,l.a.createElement("div",{className:"col-md-2 text-center"},l.a.createElement("b",null,"Remarks")),l.a.createElement("div",{className:"col-md-10",style:{textAlign:"justify"}},this.state.writeoff_data.remarks)),l.a.createElement("hr",null)),l.a.createElement("div",null,[null,"rejected"].includes(this.props.write_off_status)&&l.a.createElement(Dr.a,null,l.a.createElement("label",{className:"col-md-5 text-right"},l.a.createElement("b",null,"Provisioning Balance"),l.a.createElement("font",{className:"text-danger"},"   *  ")),l.a.createElement("div",{className:"col-sm-4 reset-padding"},l.a.createElement("select",{id:"loan_prov_id",ref:function(t){return e.loan_prov=t},onChange:function(t){e.handleSelfChange(t),e.getRecoveryAmount(t)},className:"form-control ".concat(this.state.credit_style),type:"text"},this.state.loan_prov_year_dd))),l.a.createElement("div",null,l.a.createElement(Dr.a,null,this.state.is_selected_prov_year&&l.a.createElement(Xl.a,{className:"writeoff-text"},l.a.createElement("div",null,"Write Off"),l.a.createElement("div",null,Ne(this.state.write_off_amount,this.currency_code))),"requested"==this.props.write_off_status&&l.a.createElement(l.a.Fragment,null,l.a.createElement(Xl.a,{className:"writeoff-text"},l.a.createElement("div",null,"Provisioning Year"),l.a.createElement("div",null,this.state.writeoff_data.year)),l.a.createElement(Xl.a,{className:"writeoff-text"},l.a.createElement("div",null,"Balance"),l.a.createElement("div",null,Ne(this.state.writeoff_data.balance,this.currency_code))),l.a.createElement(Xl.a,{className:"writeoff-text"},l.a.createElement("div",null,"Write Off"),l.a.createElement("div",null,Ne(this.state.writeoff_data.write_off_amount,this.currency_code)))),l.a.createElement("hr",null))),"requested"==this.props.write_off_status&&l.a.createElement(Dr.a,null)),[null,"rejected"].includes(this.props.write_off_status)&&l.a.createElement("div",null,l.a.createElement(Dr.a,null,l.a.createElement(Xl.a,null,l.a.createElement(Xl.a,null,l.a.createElement("label",{for:"",className:"font-weight-bold"},"Remarks",l.a.createElement("font",{className:"text-danger"},"   *  "))),l.a.createElement(Xl.a,null,l.a.createElement("div",null,l.a.createElement("textarea",{type:"text",id:"remarks",className:"form-control",onChange:function(t){e.handleReason(t)},maxLength:"2000",rows:"5",cols:"30"}))),l.a.createElement("div",{id:"float_style"},l.a.createElement("b",null,"(",this.state.message_count," char )")))))),l.a.createElement(nt.a.Footer,null,[null,"rejected"].includes(this.props.write_off_status)&&l.a.createElement(l.a.Fragment,null,l.a.createElement("input",{type:"button",className:"btn btn-secondary",onClick:this.handleClose,value:a}),l.a.createElement("input",{type:"button",disabled:this.state.calling_api,className:"btn btn-primary",onClick:this.handleReqWriteOff,value:t})),"requested"==this.props.write_off_status&&l.a.createElement(l.a.Fragment,null,l.a.createElement("input",{type:"button",disabled:this.state.calling_api,className:"btn btn-secondary",onClick:this.handleApproveReject,value:a}),l.a.createElement("input",{type:"button",disabled:this.state.calling_api,className:"btn btn-primary",onClick:this.handleApproveReject,value:t})))))}}]),t}(ct),Ds=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={loan:[],viewReady:!1,viewLoan:!1,viewLoanAppln:!1,loan_comment:{}},a.handleSMSChange=function(e){a.setState({message:e.target.value}),a.setState({message_count:be(e.target.value)})},a.handleSendSMSClick=function(e){var t={message:a.state.message,recipient:a.state.loan.mobile_num};We(a.req(t)).then(function(e){e&&alert("Message Sent")})},a.cancelLoan=function(e){if(0!=window.confirm("Are you sure to cancel FA?")){var t={cancel_loan:{loan_doc_id:a.state.loan.loan_doc_id}};console.log("cancel->"+t),Ma(a.req(t)).then(function(e){e&&e.success&&window.location.reload()})}},a.releaseLoan=function(e){if(0!=window.confirm("Are you sure to release FA?")){var t={loan_doc_id:a.state.loan.loan_doc_id};Da(a.req(t)).then(function(e){e&&e&&window.location.reload()})}},a.bypassCustConf=function(){if(0!=window.confirm("Are you sure if you want to bypass the customer confirmation process and proceed to initiate FA disbursal?")){var e={loan_doc_id:a.state.loan.loan_doc_id};Va(a.req(e)).then(function(e){e&&e&&window.location.reload()})}},a.resendOTP=function(e){var t={loan_doc_id:a.state.loan.loan_doc_id};Fa(a.req(t)).then(function(e){e&&alert(e.message)})},a.repeatFloatAdvance=function(e){if(0!=window.confirm("Are you sure to confirm?")){var t={cust_id:a.state.loan.cust_id,loan_doc_id:a.state.loan.loan_doc_id};Pa(a.req(t,!0)).then(function(e){if(e){if(e)if(e.data.loan_application){var t=e.data.loan_application.loan_appl_doc_id,n=e.data.loan_application.loan_approver_name;a.setState({loan_appl_doc_id:t,viewLoanAppln:!0,approver_name:n})}else if(e.data.loan){var l=e.data.loan.loan_doc_id;a.setState({loan_doc_id:l,viewLoan:!0})}alert(e.message)}})}},a.handleCheck=function(e){var t=e.target.checked,n={loan_doc_id:a.state.loan_doc_id,allow_pp:t};Ia(a.req(n)).then(function(e){e&&"success"===e.status&&("enabled"==e.data.allow_pp?(a.setState({allow_pp:!0}),alert("Customer Success will now be able to capture part payments for this FA.")):"disabled"==e.data.allow_pp&&(a.setState({allow_pp:!1}),alert("Customer Success will not be able to make part payment for this FA.")))})},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){var e,t,a=this,n=this.props.match.params.loan_doc_id;null==n?(e=this.props.data,this.setState({loan:e})):(t=this.req({loan_doc_id:n}),L(M+"/loan",t)).then(function(t){if(t)if("success"===t.status){e=t.data.loan,a.setState({message:e.message}),a.setState({message_count:be(e.message)}),a.setState({loan:e}),a.owner_person_id=e.owner_person_id,a.setState({viewReady:!0});var n="enabled"==e.allow_pp;a.setState({loan_doc_id:e.loan_doc_id,allow_pp:n})}else alert(t.message+"\n"+JSON.stringify(t.data))})}},{key:"render",value:function(){var e,t,a,n,r=this;if(!this.state.viewReady)return l.a.createElement(l.a.Fragment,null);var s=this.state.loan.loan_doc_id,c=this.state.loan.cust_id,o=this.state.loan.lender_code,i=this.state.loan.acc_prvdr_code,d=this.state.loan.lender_name,m=b("application","cancel"),u=b("loan","release"),_=b("loan","approve_part_payment");if(1==this.state.viewLoanAppln)return l.a.createElement(Y.a,{to:"/fa_appl/view/".concat(this.state.loan_appl_doc_id)});if(1==this.state.viewLoan)return l.a.createElement(Y.a,{to:"/fa/view/".concat(this.state.loan_doc_id)});if(_&&(t=l.a.createElement("label",{className:"checkbox-inline mt-3"},l.a.createElement("input",{id:"approve_pp",type:"checkbox",onChange:function(e){r.handleCheck(e)},checked:this.state.allow_pp}),l.a.createElement("span",null," Allow Partial Payment"))),this.state.loan.customer_consent_rcvd||"pending_disbursal"!==this.state.loan.status||b("loan","retry_disbursal")&&(n=l.a.createElement(lt.a,{variant:"danger",onClick:this.bypassCustConf},"Bypass Cust Confirm")),this.state.loan.customer_consent_rcvd&&"pending_disbursal"===this.state.loan.status){if(b("loan","view_fa_capture_disbursal")){var p=this.state.loan.loan_principal,h=this.state.loan.cust_acc_id,v=this.state.loan.loan_purpose;this.disburse_loan={loan_doc_id:s,cust_id:c,lender_code:o,amount:p,cust_acc_id:h,lender_name:d,acc_prvdr_code:i,acc_purpose:v},e=l.a.createElement(ys,{id:"disbursal_txn",data:this.disburse_loan,title:"Disbursal Loan",mode:this.props.mode})}if(b("loan","disburse")){var g=this.state.loan.cust_acc_id,f=this.state.loan,E=f.biz_name,y=f.cust_name,N=f.acc_number,w=f.loan_principal,C=f.duration,k=f.flow_fee,S=f.due_amount,x=f.to_acc_num,A=f.due_date,O=f.currency_code;this.instant_disburse_loan={biz_name:E,cust_name:y,acc_number:N,loan_principal:w,duration:C,flow_fee:k,due_amount:S,loan_doc_id:s,cust_id:c,cust_acc_id:g,to_acc_num:x,lender_code:o,acc_prvdr_code:i,currency_code:O,due_date:A},a=l.a.createElement(Ns,{id:"instant_disbursal_txn",data:this.instant_disburse_loan,title:"Instant Disbursal Loan",mode:this.props.mode})}}else if("ongoing"===this.state.loan.status||"due"===this.state.loan.status||"overdue"===this.state.loan.status){this.state.loan.due_date;var j=this.state.loan.cust_id,D=(this.state.loan.current_os_amount,this.state.loan.status),F=this.state.loan.acc_prvdr_code,M=this.state.loan.loan_purpose,P=(this.state.loan.provisional_penalty,this.state.loan.penalty_collected,this.state.loan.allow_pp);"days_overdue"in this.state.loan&&this.state.loan.days_overdue,"penalty_days"in this.state.loan&&this.state.loan.penalty_days;b("loan","capture_repayment")&&(this.capture_repayment={loan_purpose:M,loan_doc_id:s,lender_code:o,status:D,acc_prvdr_code:F,lender_name:d,allow_partial_payment:P,cust_id:j},e=l.a.createElement(ln,{id:"repayment_txn",mode:"capture",parent:"view_fa",title:"Capture Repayment (New)",data:this.capture_repayment}))}return l.a.createElement("div",{className:"container main_div"},l.a.createElement("br",null),l.a.createElement("div",{className:"row view_loan_menu"},["approved","recovered","partially_recovered"].includes(this.state.loan.write_off_status)&&b("loan","search_list_view_write_off")&&l.a.createElement("div",{class:"closedStamp"},l.a.createElement("div",{className:"stamp is-nope"},"Written-Off")),l.a.createElement("div",{className:"col-md-4"},l.a.createElement("div",{className:"row p-inherit"},l.a.createElement("h4",null,"Float Advance ID")),l.a.createElement("div",{className:"row p-inherit"},l.a.createElement("h4",null,l.a.createElement("b",null,this.state.loan.loan_doc_id)))),l.a.createElement("div",{className:"col-md-3 "},l.a.createElement("h4",null,"Status: ",l.a.createElement("br",null),l.a.createElement("b",null,function(e){if(0==e.customer_consent_rcvd&&"pending_disbursal"===e.status){var t=function(e){var t={};return"sent"==e.otp_status?(t.status="Pending w/ SMS Provider",t.overlay_info="Sending of the confirmation code SMS has been initiated and is now pending with the SMS Provider. The SMS will reach the customer shortly. If the status doesn't change for 2 minutes, if required, you shall decide to resend the code."):(t.status="Pending w/ Customer",t.overlay_info=e.confirm_code_info),t}(e);return l.a.createElement(se.a,{placement:"bottom",trigger:"hover",overlay:l.a.createElement(ce.a,{style:{fontSize:"15px",padding:"15px",color:"mediumblue",fontFamily:"Montserrat"}},t.overlay_info)},l.a.createElement("span",null,t.status," ",l.a.createElement("sup",null,l.a.createElement(oe.a,null))))}return"pending_disbursal"===e.status||"hold"===e.status?l.a.createElement(se.a,{placement:"bottom",trigger:"hover",overlay:l.a.createElement(ce.a,{style:{fontSize:"13px",padding:"15px",color:"mediumblue",fontFamily:"Montserrat"}},l.a.createElement("b",null,l.a.createElement("u",null,"Disbursal Status:"),l.a.createElement("br",null),ue(e.disbursal_status||"not_initiated")))},l.a.createElement("span",null,Ze(e.status)," ",l.a.createElement("sup",null,l.a.createElement(oe.a,null)))):Ze(e.status)}(this.state.loan),"overdue"==this.state.loan.status&&" (".concat(this.state.loan.overdue_days,")")))),l.a.createElement("div",{className:"col-md-5"},l.a.createElement("div",{className:"row d-flex justify-content-between p-inherit"},l.a.createElement("div",{className:"pb-2"},"settled"===this.state.loan.status&&null==this.state.loan.pending_loan_appl_doc_id&&null==this.state.loan.ongoing_loan_doc_id&&this.state.loan.last_loan_doc_id==this.state.loan.loan_doc_id&&l.a.createElement("input",{type:"button",className:"btn btn-primary pull",value:"Repeat this FA",onClick:this.repeatFloatAdvance}),!this.state.loan.customer_consent_rcvd&&"pending_disbursal"===this.state.loan.status&&l.a.createElement(Cs,{entity_id:this.state.loan.loan_doc_id,otp_type:"confirm_fa"}),e,"hold"===this.state.loan.status&&u&&l.a.createElement("div",{className:"pb-2"},l.a.createElement("input",{type:"button",className:"btn btn-primary pull",value:"Release",onClick:this.releaseLoan}))),l.a.createElement("div",{className:"pb-2"},a,n,("ongoing"===this.state.loan.status||"due"===this.state.loan.status||"overdue"===this.state.loan.status)&&t),l.a.createElement("div",{className:"pb-2"},l.a.createElement(Es,{parent:"view_loan",loan_doc_id:this.state.loan.loan_doc_id,btn:"btn"})),"overdue"===this.state.loan.status&&b("loan","capture_recovery")&&l.a.createElement("div",{className:"pb-2"},l.a.createElement(Ss,{id:"recovery_txn",name:"Request Cash",loan_doc_id:this.state.loan.loan_doc_id,cust_id:this.state.loan.cust_id,biz_name:this.state.loan.biz_name})),"pending_disbursal"===this.state.loan.status&&m&&!this.state.loan.customer_consent_rcvd&&l.a.createElement("div",{className:"pb-2"},l.a.createElement("input",{type:"button",className:"btn btn-primary pull",value:"Cancel",onClick:this.cancelLoan}))))),this.state.loan.overdue_days>this.state.loan.write_off_od_days&&"overdue"==this.state.loan.status&&l.a.createElement(js,{id:"write_off",loan_doc_id:this.state.loan.loan_doc_id,acc_prvdr_code:this.state.loan.acc_prvdr_code,cust_id:this.state.loan.cust_id,write_off_status:this.state.loan.write_off_status,write_off_id:this.state.loan.write_off_id}),l.a.createElement(os,{parent:"loan",customer:this.state.loan}),l.a.createElement(ds,{parent:"loan",credit_score:this.state.loan.credit_score,customer:this.state.loan,product:this.state.loan}))}}]),t}(st),Fs=function(e){function t(){var e,n;Object(c.a)(this,t);for(var l=arguments.length,r=new Array(l),s=0;s<l;s++)r[s]=arguments[s];return(n=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={kyc_rules:{}},n.submitKYC=function(e){e.preventDefault();var t=n.req({kyc_rules:n.state.kyc_rules,cust_id:n.state.cust_id});sr(t).then(function(e){e&&e&&(alert("KYC data updated successfully"),window.location.href="/borrower/indiv/view/"+n.state.cust_id)})},n.onChangeKYC=function(e){var t=a(153),l=n.state.kyc_rules,r=t.value(l,"$");console.log(r);var s="$..[?(@.rule_id=='".concat(e.target.id,"')].rule_status"),c=t.value(l,s);console.log(c),c="on"==c?"off":"on",t.value(l,s,c),n.setState({kyc_rules:l})},n}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){var e,t=this,a=this.props.match.params.cust_id;(e=this.req({cust_id:a}),L("/api/admin/kyc/",e)).then(function(e){t.resp(e),e&&e&&t.setState({kyc_rules:e.data.kyc_rules,cust_id:a})})}},{key:"render",value:function(){var e,t=this;return l.a.createElement("div",{className:"kyc-container text-white"},l.a.createElement("div",{className:"kyc_heading"},l.a.createElement("h1",null,l.a.createElement("b",null,"KYC Process for ",this.state.cust_id))),Object.keys(this.state.kyc_rules).map(function(a){return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"kyc_rule"},l.a.createElement("b",null,a)),l.a.createElement("ul",null,t.state.kyc_rules[a]&&t.state.kyc_rules[a].map(function(a,n){return l.a.createElement("div",{className:"kyc_rule",style:{padding:"10px"}},e="on"==a.rule_status,l.a.createElement("li",{style:{display:"inline"}},a.rule,l.a.createElement(A.a.Check,{className:"toggle_switch",type:"switch",style:{display:"inline",float:"right"},id:a.rule_id,label:"",onChange:t.onChangeKYC,checked:e}),l.a.createElement("br",null)))})))}),l.a.createElement(lt.a,{type:"button",disabled:this.state.calling_api,onClick:this.submitKYC},"Submit"))}}]),t}(ct),Ms=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={comp_name:"customer_factor",cust_id_style:"show_div",dp_cust_id_style:"show_div",dp_style:"show_div"},a.handleCustIDChange=function(e){""==e.target.value?a.setState({dp_cust_id_style:"show_div",cust_id_style:"show_div",dp_style:"show_div"}):"cust_id"==e.target.id?a.setState({dp_cust_id_style:"disable_div",cust_id_style:"show_div",dp_style:"disable_div"}):a.setState({cust_id_style:"disable_div",dp_cust_id_style:"show_div",dp_style:"show_div"}),a.handleChange(e)},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){var e=this;this.setOptionsToStateFromApi("data_provider");var t={country_code:this.country_code};On(this.req(t)).then(function(t){return e.fillSelect(t,"score_model",["model_code","model_name"])})}},{key:"render",value:function(){return l.a.createElement("div",{id:""},l.a.createElement("h5",null,this.props.title?this.props.title:""),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-3 ".concat(this.state.cust_id_style)},l.a.createElement("span",null,"Flow Customer ID"),l.a.createElement("input",{id:"cust_id",onChange:this.handleCustIDChange,className:"form-control",required:!0})),l.a.createElement("div",{className:"col-md-3 ".concat(this.state.dp_cust_id_style)},l.a.createElement("span",null,"Account Number"),l.a.createElement("input",{id:"acc_number",onChange:this.handleCustIDChange,className:"form-control"}))),l.a.createElement("br",null),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-3"},l.a.createElement("span",null,"Credit Score Model"),l.a.createElement("font",{className:"text-danger"},"   *  "),l.a.createElement("select",{id:"cs_model_code",onChange:this.handleChange,className:"form-control",type:"text",required:"required"},this.state.score_model_dd)),l.a.createElement("div",{className:"col-md-6"},l.a.createElement(Tt,{id:"cust_txn_file",label:"Transaction File",is_mandatory:!0,mode:this.props.mode,onCreateUpload:this.handleChange}))))}}]),t}(ct),Ps=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={csfList:null},a.handleSave=function(e){a.result.country_code=a.country_code,Dn(a.req(a.result)).then(function(e){e&&("success"===e.status?(alert("Score Factors saved successfully"),window.location.reload()):alert(e.message+"\n"+JSON.stringify(e.data)))})},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){this.result=this.props.factors_list,this.result.customer_factor=this.props.customer_factor;var e=this.result.score_values.map(function(e,t){return l.a.createElement("tr",{key:t},l.a.createElement("td",null," ",Ze(e.csf_type)),l.a.createElement("td",null," ",e.csf_gross_value),l.a.createElement("td",null," ",e.csf_normal_value))});this.setState({csfList:e})}},{key:"componentDidMount",value:function(){Ut()("#table").removeAttr("width").dataTable({order:[],columns:[{width:"22%"},{width:"22%"},{width:"22%"}],bPaginate:!1,searching:!1,info:!1})}},{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-3"},l.a.createElement("h5",null,l.a.createElement("b",null,"Run ID")," : ",this.result.run_id)),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("h5",null,l.a.createElement("b",null,"Score")," : ",this.result.score," / 1000")),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("h5",null,l.a.createElement("b",null,"Result")," : ",Ze(this.result.result))),l.a.createElement("div",{className:"col-md-3"},this.result.existing_customer?l.a.createElement("h5",null,l.a.createElement("b",null,"Flow Customer ID")," : ",this.result.cust_id):l.a.createElement("h5",{id:"red_color"},"New Customer"))),l.a.createElement("br",null),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-3"}),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("h4",null,"Score Factors"))),l.a.createElement("table",{id:"table",className:"table-responsive table"},l.a.createElement("thead",{className:"text-info"},l.a.createElement("tr",null,l.a.createElement("th",null,"Factor"),l.a.createElement("th",null,"Gross Value"),l.a.createElement("th",null,"Normal Value"))),l.a.createElement("tbody",null,this.state.csfList)),l.a.createElement("br",null),l.a.createElement("input",{id:"float_style",type:"button",className:"btn btn-primary",onClick:this.handleSave,value:"Accept and Save"}))}}]),t}(ct),Bs=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={customer_factor:{},list_screen:!1,run_btn_style:"show_div"},a.handleSubmit=function(e){a.setState({list_screen:!1}),e.preventDefault(),a.setState({run_btn_style:"disable_div"}),alert("It may take a while. Please wait.");var t=a.state.customer_factor;t.country_code=a.country_code,jn(a.req({customer_factor:t})).then(function(e){e?"success"===e.status?a.setState({factors_list:e.data,list_screen:!0}):(a.setState({run_btn_style:"show_div"}),alert(e.message+"\n"+JSON.stringify(e.data))):a.setState({run_btn_style:"show_div"})})},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"containerTopmargin container text-labelblue"},l.a.createElement("form",{id:"borrower_form",onSubmit:this.handleSubmit},l.a.createElement("div",{id:""},l.a.createElement(Ms,{id:"customer_factor",mode:this.props.mode,title:"Upload Customer Transactions",onComponentChange:this.handleComponentChange})," ",l.a.createElement("br",null),l.a.createElement("input",{type:"button",className:"btn btn-primary ".concat(this.state.run_btn_style),onClick:this.handleSubmit,value:"Run"}),l.a.createElement("br",null),l.a.createElement("br",null),this.state.list_screen&&l.a.createElement(l.a.Fragment,null,l.a.createElement("hr",null),l.a.createElement(Ps,{customer_factor:this.state.customer_factor,factors_list:this.state.factors_list})),l.a.createElement("br",null)))))}}]),t}(st),Ls=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={person:{},address:{}},a.handleUserCheckboxClick=function(e){e.target.checked?a.setState({create_user:!0}):a.setState({create_user:!1})},a.handleSubmit=function(e){e.preventDefault();var t=a.state.person;t.country_code=a.country_code,t.address=a.state.address,t.associated_with="FLOW",Rt(a.req({person:t})).then(function(e){a.resp(e),e&&(alert("New Person created successfully"),window.location.reload())})},a.handleRoleSelect=function(e){a.state.person.role=e.target.value},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){var e=this,t=null;if("view"===this.props.mode){var a={person_id:this.props.match.params.person_id};(function(e){return L("/api/admin/person/view",e)})(this.req(a)).then(function(a){a&&(t=a.data,e.setState({person:t,address:t.address}))})}}},{key:"render",value:function(){return l.a.createElement("div",{className:"container text-labelblue"},l.a.createElement("h5",null,this.props.title+(this.state.person.first_name?" : "+this.state.person.first_name:"")),l.a.createElement("form",{id:"borrower_form",onSubmit:this.handleSubmit},l.a.createElement("div",{id:""},l.a.createElement(zt,{id:"person",title:"",entity:"user",designation:"list",data:this.state.person,mode:this.props.mode,onComponentChange:this.handleComponentChange,changeComponentName:"person"}),l.a.createElement("br",null),l.a.createElement("input",{type:"button",className:"btn btn-primary ".concat("create"===this.props.mode?"show_button":"hide_button"),onClick:this.handleSubmit,value:"Create Person",disabled:this.state.calling_api}))),l.a.createElement("br",null),l.a.createElement("br",null))}}]),t}(st),Ts=function(e){function t(){return Object(c.a)(this,t),Object(i.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){}},{key:"render",value:function(){return l.a.createElement("input",{id:this.props.id,type:"button",onClick:this.props.onClick,value:E(this.props.entity),className:"btn btn-primary"})}}]),t}(ct),Rs=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={userList:null,toView:!1,person_id:null,data_prvdr:{}},a.handleClick=function(e){a.setState({person_id:e.target.id,toView:!0})},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){var e,t=this;(e=this.req({associated_with:"FLOW"}),L("/api/admin/person/list",e)).then(function(e){if(e){var a=e.data.map(function(e,a){return l.a.createElement("tr",{key:a},l.a.createElement("td",null," ",ye(e)),l.a.createElement("td",null," ",e.whatsapp),l.a.createElement("td",null," ",e.mobile_num),l.a.createElement("td",null," ",e.email_id),l.a.createElement("td",null," ",e.designation),l.a.createElement(Vt,{id:e.id,entity:"users",status:e.status}),l.a.createElement("td",null,l.a.createElement(Ts,{id:e.id,entity:"user",onClick:t.handleClick})))});t.setState({userList:a}),Ut()("#user-list").removeAttr("width").dataTable({order:[],columns:[{width:"15%"},{width:"15%"},{width:"15%"},{width:"15%"},{width:"10%"},{width:"10%"},{width:"10%"},{width:"10%"}],dom:"Bfrtip",buttons:["csv","excel","print"]})}})}},{key:"render",value:function(){return!0===this.state.toView?l.a.createElement(Y.a,{to:"/user/view/".concat(this.state.person_id)}):l.a.createElement("div",{className:"container"},null!=this.state.userList&&l.a.createElement("div",{id:"datatable data_prvdr_table",className:"table-responsive"},l.a.createElement("h5",null,"Person List"),l.a.createElement("table",{id:"user-list",className:"table"},l.a.createElement("thead",{className:"text-info"},l.a.createElement("tr",null,l.a.createElement("th",null,"Name"),l.a.createElement("th",null,"WhatsApp Number"),l.a.createElement("th",null,"Mobile Number"),l.a.createElement("th",null,"Email ID"),l.a.createElement("th",null,"Designation"),l.a.createElement("th",null,"Status"),l.a.createElement("th",null,"Action"),l.a.createElement("th",null,"Action"))),l.a.createElement("tbody",null,this.state.userList))))}}]),t}(st),Hs=l.a.createElement(l.a.Fragment,null,l.a.createElement(v.a,{path:"/borrower/indiv/create",exact:!0,component:function(){return l.a.createElement(Hr,{mode:"create",title:"Create Individual Customer"})}}),l.a.createElement(v.a,{path:"/borrower/ins/create",exact:!0,component:function(){return l.a.createElement(qr,{mode:"create",title:"Create Institutional Customer"})}}),l.a.createElement(v.a,{path:"/borrower/indiv/edit/:cust_id",exact:!0,component:function(e){return l.a.createElement(Hr,Object.assign({mode:"view",title:"View/Edit Customer"},e))}}),l.a.createElement(v.a,{path:"/borrower/ins/edit/:cust_id",exact:!0,component:function(e){return l.a.createElement(qr,Object.assign({mode:"view",title:"View/Edit Customer"},e))}}),l.a.createElement(v.a,{path:"/borrower/indiv/view/:cust_id",exact:!0,component:function(e){return l.a.createElement(Gr,Object.assign({mode:"view",title:"View Customer"},e))}}),l.a.createElement(v.a,{path:"/borrower/ins/view/:cust_id",exact:!0,component:function(e){return l.a.createElement(Zr.a,Object.assign({mode:"view",title:"View Customer"},e))}}),l.a.createElement(v.a,{path:"/borrower/search",exact:!0,component:Tr}),l.a.createElement(v.a,{path:"/upload_cust_txns",exact:!0,component:function(){return l.a.createElement(Bs,{mode:"create"})}})),qs=l.a.createElement(l.a.Fragment,null,l.a.createElement(v.a,{path:"/relationship_manager/flowrlspmanager/create",exact:!0,component:function(){return l.a.createElement(ts,{mode:"create",title:"Create FLOW Relationship Manager"})}}),l.a.createElement(v.a,{path:"/relationship_manager/flowrlspmanager/view/:relationshipManager_id",exact:!0,component:function(e){return l.a.createElement(ts,Object.assign({mode:"view",title:"View/Edit Relationship Manager"},e))}}),l.a.createElement(v.a,{path:"/relationship_manager/flowrlspmanager/list",exact:!0,component:rs})),Is=l.a.createElement(l.a.Fragment,null,l.a.createElement(v.a,{path:"/relationship_manager/dprlspmanager/create",exact:!0,component:function(){return l.a.createElement(ns,{mode:"create",title:"Create Account Provider Relationship Manager"})}}),l.a.createElement(v.a,{path:"/relationship_manager/dprlspmanager/view/:relationshipManager_id",exact:!0,component:function(e){return l.a.createElement(ns,Object.assign({mode:"view",title:"View/Edit Relationship Manager"},e))}}),l.a.createElement(v.a,{path:"/relationship_manager/dprlspmanager/list",exact:!0,component:function(){return l.a.createElement(ls,{mode:"list"})}})),zs=l.a.createElement(l.a.Fragment,null,l.a.createElement(v.a,{path:"/user/list",exact:!0,component:function(){return l.a.createElement(Rs,{mode:"list"})}}),l.a.createElement(v.a,{path:"/user/create",exact:!0,component:function(){return l.a.createElement(Ls,{id:"person",mode:"create",title:"Create User"})}}),l.a.createElement(v.a,{path:"/user/view/:person_id",exact:!0,component:function(e){return l.a.createElement(Ls,Object.assign({id:"person",mode:"view",title:"Edit User"},e))}})),Ws=l.a.createElement(l.a.Fragment,null,l.a.createElement(v.a,{path:"/fa_appl/search",exact:!0,component:ps}),l.a.createElement(v.a,{path:"/fa_appl/view/:loan_appl_doc_id",exact:!0,component:function(e){return l.a.createElement(gs,Object.assign({mode:"view"},e))}}),l.a.createElement(v.a,{path:"/fa_appl",exact:!0,component:function(e){return l.a.createElement(_s,Object.assign({mode:"search"},e))}}),l.a.createElement(v.a,{path:"/fa_appl_for/:cust_id",component:function(e){return l.a.createElement(_s,Object.assign({mode:"result"},e))}})),Vs=l.a.createElement(l.a.Fragment,null,l.a.createElement(v.a,{path:"/fa/view/:loan_doc_id",exact:!0,component:function(e){return l.a.createElement(Ds,e)}}),l.a.createElement(v.a,{path:"/fa/search",exact:!0,component:bs})),Ys=l.a.createElement(l.a.Fragment,null,l.a.createElement(v.a,{path:"/kyc/:cust_id",exact:!0,component:function(e){return l.a.createElement(Fs,e)}})),Us=a(49),Js=Object(Us.a)(),Ks=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).handleClose=function(e){a.setState({modalBox:!1}),a.props.onClose()},a.clickAccProvider=function(e,t){console.log(t),null!=a.selectedMarket&&w("market",a.selectedMarket);["super_admin","ops_admin","market_admin","it_admin"].includes(g("role_codes"))&&(w("acc_prvdr_code",e),w("acc_prvdr_logo",t),Js.push("/management-dashboard")),"select"==a.props.action?a.props.onSelect():"change"==a.props.action&&window.location.reload("/")},a.clickMarket=function(e){a.selectedMarket=a.market_list[e.target.id];var t={country_code:a.selectedMarket.country_code,time_zone:a.selectedMarket.time_zone,status:null};Ue(t).then(function(e){e&&("success"===e.status?C(e.data.master_data):alert(e.message+"\n"+JSON.stringify(e.data)),a.list_acc_prvdr_api(t))})},a.list_account_provider=function(e,t){console.log(t);var n=t.list.map(function(e,t){return l.a.createElement("ul",{key:t},l.a.createElement("div",{className:"row"},l.a.createElement($.a,{to:"#"},l.a.createElement(en,{file_name:"t_"+e.acc_provider_logo,entity:"acc_prvdr",entity_code:e.acc_prvdr_code,country_code:e.country_code}),l.a.createElement("a",{className:"linkText ml-10",onClick:a.clickAccProvider.bind(Object(u.a)(Object(u.a)(a)),e.acc_prvdr_code,e.acc_provider_logo),variant:"primary"},e.name))))});a.setState({country_code:e,acc_prvdr_links:n,market_style:"disable_div"})},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){var e=this;this.market_list=g("market_list");var t=g("market");if(t&&("select"==this.props.action||"acc_prvdr"==this.props.toChange||"acc_prvdr_only"==this.props.toChange)){this.setState({country_code:t.country_code,market_style:"disable_div"});var a={country_code:t.country_code,time_zone:t.time_zone,status:""};a=me(a),this.list_acc_prvdr_api(a)}var n=null;"acc_prvdr_only"!=this.props.toChange&&(n=this.market_list.map(function(t,a){return l.a.createElement("ul",{key:a},l.a.createElement("div",{className:"row"},l.a.createElement($.a,{to:"#"},l.a.createElement(te.a,{name:t.country_code,format:"png",pngSize:32,alt:t.country,basePath:"/img/flags"}),"\xa0",l.a.createElement("a",{className:"linkText ml-10",onClick:e.clickMarket.bind(e),variant:"primary",id:a},t.country," (",t.country_code,")"))))})),"acc_prvdr_only"==this.props.toChange||"acc_prvdr"==this.props.toChange?this.toChangeStr="account provider":"market"==this.props.toChange&&(this.toChangeStr="market / account provider");var r=!1;"change"==this.props.action&&(r=!0),this.setState({marketLinks:n,modalBox:!0,showX:r})}},{key:"list_acc_prvdr_api",value:function(e){var t=this;un(Object(Z.a)({},e,{status:"enabled",biz_account:!0})).then(function(a){a&&"success"===a.status&&(console.log(a.data),t.list_account_provider(e.country_code,a.data))})}},{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(nt.a,{show:this.state.modalBox,onHide:this.handleClose},l.a.createElement(nt.a.Header,null,l.a.createElement(nt.a.Title,{style:{fontSize:22}},"Hello User!"),this.state.showX&&l.a.createElement("button",{type:"button",onClick:this.handleClose,className:"close","aria-label":"Close"},l.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),l.a.createElement(nt.a.Body,null,l.a.createElement("h4",{className:"no-margin text-center",style:{fontSize:18}},"Please select the ",this.toChangeStr," you would like to administrate."),"market"==this.props.toChange&&l.a.createElement(an.a,null,l.a.createElement(an.a.Header,null,"Choose Market"),l.a.createElement(an.a.Body,{className:this.state.market_style},this.state.marketLinks)),this.state.country_code&&l.a.createElement(an.a,null,l.a.createElement(an.a.Header,null,"Choose Account Provider from ",l.a.createElement(te.a,{name:this.state.country_code,format:"png",pngSize:24,alt:this.state.country_code,basePath:"/img/flags"}),l.a.createElement("b",null," ",this.state.country_code)),l.a.createElement(an.a.Body,null,this.state.acc_prvdr_links)))))}}]),t}(l.a.Component),Gs=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={toSelectMarket:!1},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"server_time",value:function(e){var t=this;return Le({country_code:this.country_code,time_zone:e}).then(function(e){if(!e)return!1;if("success"===e.status){var a=new Date(e.server_time_db);console.log("date;",a),t.setState({date:a})}})}},{key:"componentWillMount",value:function(){var e=this,t=g("market");this.country_code=t.country_code,this.acc_prvdr_code=f("acc_prvdr_code"),this.app_version=g("app_version"),this.user_name=g("user_name"),this.prv=g("privileges"),this.roles=g("role_codes"),this.acc_prvdr_logo=f("acc_prvdr_logo"),Object.keys(this.prv).map(function(t){var a=e.prv[t].split(",");e[t]={},a.map(function(a){e[t][a]=!0})})}},{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"sidebar sidebar-rewidth","data-color":"purple","data-background-color":"default"},l.a.createElement("div",{class:"logo"},l.a.createElement($.a,{to:"/",className:"simple-text logo-mini"},l.a.createElement("img",{src:"/icon_new.png",width:"34"})),l.a.createElement($.a,{to:"/",className:"simple-text logo-normal"},l.a.createElement("img",{src:"/logo_white_new.png",width:"100"}))),l.a.createElement("div",{className:"sidebar-wrapper sidebar-wrapper-rewidth"},l.a.createElement("div",{className:"user"},l.a.createElement("div",{className:"photo"},l.a.createElement("img",{src:"/avatar.png"})),l.a.createElement("div",{className:"user-info"},l.a.createElement("a",{"data-toggle":"collapse",href:"#collapseExample",className:"username"},l.a.createElement("span",null,"\xa0\xa0",this.user_name,l.a.createElement("br",null),"\xa0\xa0",this.roles)))),l.a.createElement("ul",{className:"nav"},l.a.createElement("li",{className:"nav-item"},l.a.createElement($.a,{to:"/",className:"nav-link"},l.a.createElement("i",{className:"material-icons"},"home"),l.a.createElement("p",null," Home "))),l.a.createElement("li",{className:"nav-item active "},l.a.createElement($.a,{to:"/fa_appl",className:"nav-link"},l.a.createElement("i",{className:"material-icons"},"touch_app"),l.a.createElement("p",null," Apply FA "))),l.a.createElement("li",{className:"nav-item "},l.a.createElement("a",{className:"nav-link","data-toggle":"collapse",href:"#search"},l.a.createElement("i",{className:"material-icons"},"search"),l.a.createElement("p",null," Search",l.a.createElement("b",{className:"caret"}))),l.a.createElement("div",{className:"collapse",id:"search"},l.a.createElement("ul",{className:"nav"},this.customer&&this.customer.search_list_view&&l.a.createElement("li",{className:"nav-item "},l.a.createElement("a",{className:"nav-link",href:"/borrower/search"},l.a.createElement("span",{className:"sidebar-normal"}," Search Customer "))),this.loan&&this.loan.search_list_view&&l.a.createElement("li",{className:"nav-item "},l.a.createElement("a",{className:"nav-link",href:"/fa/search"},l.a.createElement("span",{className:"sidebar-normal"}," Search Float Advance "))),this.application&&this.application.search_list_view&&l.a.createElement("li",{className:"nav-item "},l.a.createElement("a",{className:"nav-link",href:"/fa_appl/search"},l.a.createElement("span",{className:"sidebar-normal"}," Search FA Applications "))),this.field_visit&&(this.field_visit.all_search||this.field_visit.self_search)&&l.a.createElement("li",{className:"nav-item "},l.a.createElement("a",{className:"nav-link",href:"/field_visit/search"},l.a.createElement("span",{className:"sidebar-normal"}," Search Customer Visit "))),this.call_log&&(this.call_log.all_search||this.call_log.self_search)&&l.a.createElement("li",{className:"nav-item "},l.a.createElement("a",{className:"nav-link",href:"/call_log/search"},l.a.createElement("span",{className:"sidebar-normal"}," Search Call Log "))),b("lead","search")&&l.a.createElement("li",{className:"nav-item "},l.a.createElement("a",{className:"nav-link",href:"/lead/search"},l.a.createElement("span",{className:"sidebar-normal"}," Search Lead ")))))),this.report&&l.a.createElement("li",{className:"nav-item "},l.a.createElement("a",{className:"nav-link","data-toggle":"collapse",href:"#reports"},l.a.createElement("i",{className:"material-icons"}),l.a.createElement("p",null," Reports",l.a.createElement("b",{className:"caret"}))),l.a.createElement("div",{className:"collapse",id:"reports"},l.a.createElement("ul",{className:"nav"},this.report.flow_kpi_dashboard&&l.a.createElement(l.a.Fragment,null,this.report.risk_category&&l.a.createElement("li",{className:"nav-item "},l.a.createElement("a",{className:"nav-link",href:"/report/risk_report"},l.a.createElement("span",{className:"sidebar-normal"}," Risk Category Report "))),this.report.lead_conversion&&l.a.createElement("li",{className:"nav-item "},l.a.createElement("a",{className:"nav-link",href:"/report/lead_conversion"},l.a.createElement("span",{className:"sidebar-normal"}," Lead Conversion Report")))),this.report.product_takeup&&l.a.createElement("li",{className:"nav-item "},l.a.createElement("a",{className:"nav-link",href:"/report/product_takeup"},l.a.createElement("span",{className:"sidebar-normal"}," Product Takeup Report "))),this.report.daily_activity&&l.a.createElement("li",{className:"nav-item "},l.a.createElement("a",{className:"nav-link",href:"/report/daily_activity"},l.a.createElement("span",{className:"sidebar-normal"}," Daily Activity Report "))),this.report.portfolio_quality&&l.a.createElement("li",{className:"nav-item "},l.a.createElement("a",{className:"nav-link",href:"/report/portfolio_quality"},l.a.createElement("span",{className:"sidebar-normal"}," Portfolio Quality "))),this.report.growth_chart&&l.a.createElement("li",{className:"nav-item "},l.a.createElement("a",{className:"nav-link",href:"/report/growth_chart"},l.a.createElement("span",{className:"sidebar-normal"}," Growth Chart "))),this.report.capital_funds&&l.a.createElement("li",{className:"nav-item "},l.a.createElement("a",{className:"nav-link",href:"/report/capital_funds"},l.a.createElement("span",{className:"sidebar-normal"}," Capital Funds "))),b("report","mgmt_dashboard_live")&&l.a.createElement("li",{className:"nav-item "},l.a.createElement("a",{className:"nav-link",href:"/management-dashboard"},l.a.createElement("span",{className:"sidebar-normal"}," Management Dashboard ")))))),this.report&&this.report.daily_activity_admin&&l.a.createElement("li",{className:"nav-item "},l.a.createElement("a",{className:"nav-link","data-toggle":"collapse",href:"#operations"},l.a.createElement("i",{className:"material-icons"}),l.a.createElement("p",null," Daily Operations",l.a.createElement("b",{className:"caret"}))),l.a.createElement("div",{className:"collapse",id:"operations"},l.a.createElement("ul",{className:"nav"},l.a.createElement("li",{className:"nav-item "},l.a.createElement("a",{className:"nav-link",href:"/report/overdue_fa_repayments"},l.a.createElement("span",{className:"sidebar-normal"}," Overdue FA Repayments "))),l.a.createElement("li",{className:"nav-item "},l.a.createElement("a",{className:"nav-link",href:"/report/daily_visits"},l.a.createElement("span",{className:"sidebar-normal"}," Daily Visits "))),l.a.createElement("li",{className:"nav-item "},l.a.createElement("a",{className:"nav-link",href:"/report/daily_agreements"},l.a.createElement("span",{className:"sidebar-normal"}," Daily Agreements ")))))),this.customer&&this.customer.create&&l.a.createElement("li",{className:"nav-item "},l.a.createElement("a",{className:"nav-link","data-toggle":"collapse",href:"#create"},l.a.createElement("i",{className:"material-icons"}),l.a.createElement("p",null," Customer",l.a.createElement("b",{className:"caret"}))),l.a.createElement("div",{className:"collapse",id:"create"},l.a.createElement("ul",{className:"nav"},l.a.createElement("li",{className:"nav-item "},l.a.createElement("a",{className:"nav-link",href:"/borrower/indiv/create"},l.a.createElement("span",{className:"sidebar-normal"}," Create Customer Profile ")))))),b("application","list_pre_appr")&&l.a.createElement("li",{className:"nav-item "},l.a.createElement("a",{className:"nav-link","data-toggle":"collapse",href:"#pre_appr"},l.a.createElement("i",{className:"material-icons"}),l.a.createElement("p",null," Customer Filters",l.a.createElement("b",{className:"caret"}))),l.a.createElement("div",{className:"collapse",id:"pre_appr"},l.a.createElement("ul",{className:"nav"},l.a.createElement("li",{className:"nav-item "},l.a.createElement("a",{className:"nav-link",href:"/pre_appr/list"},l.a.createElement("span",{className:"sidebar-normal"}," Pre-approved Customers ")))))),b("lead","create")&&l.a.createElement("li",{className:"nav-item "},l.a.createElement("a",{className:"nav-link","data-toggle":"collapse",href:"#create_lead"},l.a.createElement("i",{className:"material-icons"}),l.a.createElement("p",null," Lead",l.a.createElement("b",{className:"caret"}))),l.a.createElement("div",{className:"collapse",id:"create_lead"},l.a.createElement("ul",{className:"nav"},l.a.createElement("li",{className:"nav-item "},l.a.createElement("a",{className:"nav-link",href:"/lead/create"},l.a.createElement("span",{className:"sidebar-normal"}," Create Lead ")))))),this.recon&&l.a.createElement("li",{className:"nav-item "},l.a.createElement("a",{className:"nav-link","data-toggle":"collapse",href:"#recon"},l.a.createElement("i",{className:"material-icons"}),l.a.createElement("p",null," Recon Float A/C",l.a.createElement("b",{className:"caret"}))),l.a.createElement("div",{className:"collapse",id:"recon"},l.a.createElement("ul",{className:"nav"},this.recon.search&&l.a.createElement("li",{className:"nav-item "},l.a.createElement("a",{className:"nav-link",href:"/lender/accounts"},l.a.createElement("span",{className:"sidebar-normal"}," Recon ")))))),this.product&&l.a.createElement("li",{className:"nav-item "},l.a.createElement("a",{className:"nav-link","data-toggle":"collapse",href:"#product"},l.a.createElement("i",{className:"material-icons"}),l.a.createElement("p",null," Product",l.a.createElement("b",{className:"caret"}))),l.a.createElement("div",{className:"collapse",id:"product"},l.a.createElement("ul",{className:"nav"},this.product.create&&l.a.createElement("li",{className:"nav-item "},l.a.createElement("a",{className:"nav-link",href:"/fa_product/create"},l.a.createElement("span",{className:"sidebar-normal"}," Add Product "))),this.product.search_list_view&&l.a.createElement("li",{className:"nav-item "},l.a.createElement("a",{className:"nav-link",href:"/fa_product/list"},l.a.createElement("span",{className:"sidebar-normal"}," Search Products "))),this.template&&l.a.createElement(l.a.Fragment,null,this.template.create&&l.a.createElement("li",{className:"nav-item "},l.a.createElement("a",{className:"nav-link",href:"/fa_product/template/create"},l.a.createElement("span",{className:"sidebar-normal"}," Add Product Template ")))),this.template&&l.a.createElement(l.a.Fragment,null,this.template.list_view&&l.a.createElement("li",{className:"nav-item "},l.a.createElement("a",{className:"nav-link",href:"/fa_product/template/list"},l.a.createElement("span",{className:"sidebar-normal"}," Search Product Templates"))))))),this.score&&l.a.createElement("li",{className:"nav-item "},l.a.createElement("a",{className:"nav-link","data-toggle":"collapse",href:"#score"},l.a.createElement("i",{className:"material-icons"}),l.a.createElement("p",null," Score",l.a.createElement("b",{className:"caret"}))),l.a.createElement("div",{className:"collapse",id:"score"},l.a.createElement("ul",{className:"nav"},this.score.list&&l.a.createElement("li",{className:"nav-item "},l.a.createElement("a",{className:"nav-link",href:"/score_models"},l.a.createElement("span",{className:"sidebar-normal"}," Score Models "))),this.score.factor_list&&l.a.createElement("li",{className:"nav-item "},l.a.createElement("a",{className:"nav-link",href:"/score_factors"},l.a.createElement("span",{className:"sidebar-normal"}," Score Factors "))),this.score.cust_txn&&l.a.createElement("li",{className:"nav-item "},l.a.createElement("a",{className:"nav-link",href:"/upload_cust_txns"},l.a.createElement("span",{className:"sidebar-normal"}," Upload Customer Transaction ")))))),this.master_agreement&&l.a.createElement("li",{className:"nav-item "},l.a.createElement("a",{className:"nav-link","data-toggle":"collapse",href:"#agreement"},l.a.createElement("i",{className:"material-icons"}),l.a.createElement("p",null," Agreement",l.a.createElement("b",{className:"caret"}))),l.a.createElement("div",{className:"collapse",id:"agreement"},l.a.createElement("ul",{className:"nav"},this.master_agreement.create&&l.a.createElement("li",{className:"nav-item "},l.a.createElement("a",{className:"nav-link",href:"/agreement/create"},l.a.createElement("span",{className:"sidebar-normal"}," Create Master Agreement "))),this.master_agreement.list_view&&l.a.createElement("li",{className:"nav-item "},l.a.createElement("a",{className:"nav-link",href:"/agreement/list"},l.a.createElement("span",{className:"sidebar-normal"}," List Master Agreement")))))),(this.data_prvdr||this.data_prvdr_rel_mgr)&&l.a.createElement("li",{className:"nav-item "},l.a.createElement("a",{className:"nav-link","data-toggle":"collapse",href:"#data_prvdr"},l.a.createElement("i",{className:"material-icons"}),l.a.createElement("p",null," Account Provider",l.a.createElement("b",{className:"caret"}))),l.a.createElement("div",{className:"collapse",id:"data_prvdr"},this.data_prvdr_rel_mgr&&l.a.createElement("ul",{className:"nav"},this.data_prvdr_rel_mgr.create&&l.a.createElement("li",{className:"nav-item "},l.a.createElement("a",{className:"nav-link",href:"/relationship_manager/dprlspmanager/create"},l.a.createElement("span",{className:"sidebar-normal"}," Add  Rel. Manager "))),this.data_prvdr_rel_mgr.list_view&&l.a.createElement("li",{className:"nav-item "},l.a.createElement("a",{className:"nav-link",href:"/relationship_manager/dprlspmanager/list"},l.a.createElement("span",{className:"sidebar-normal"}," List Rel. Managers")))))),(this.market||this.acc_prvdr||this.flow_rel_mgr||this.lender)&&l.a.createElement("li",{className:"nav-item "},l.a.createElement("a",{className:"nav-link","data-toggle":"collapse",href:"#market"},l.a.createElement("i",{className:"material-icons"}),l.a.createElement("p",null,"  FLOW (Market)",l.a.createElement("b",{className:"caret"}))),l.a.createElement("div",{className:"collapse",id:"market"},l.a.createElement("ul",{className:"nav"},this.market&&this.market.create&&l.a.createElement("li",{className:"nav-item "},l.a.createElement("a",{className:"nav-link",href:"/market/create"},l.a.createElement("span",{className:"sidebar-normal"}," Create Market "))),this.market&&this.market.list_view&&l.a.createElement("li",{className:"nav-item "},l.a.createElement("a",{className:"nav-link",href:"/market/list"},l.a.createElement("span",{className:"sidebar-normal"}," List Markets"))),this.user&&this.user.create&&l.a.createElement("li",{className:"nav-item "},l.a.createElement("a",{className:"nav-link",href:"/user/create"},l.a.createElement("span",{className:"sidebar-normal"}," Create FLOW User"))),this.user&&this.user.list_view&&l.a.createElement("li",{className:"nav-item "},l.a.createElement("a",{className:"nav-link",href:"/user/list"},l.a.createElement("span",{className:"sidebar-normal"}," List FLOW Users"))),this.lender&&this.lender.create&&l.a.createElement("li",{className:"nav-item "},l.a.createElement("a",{className:"nav-link",href:"/lender/create"},l.a.createElement("span",{className:"sidebar-normal"}," Create Lender"))),this.lender&&this.lender.list_view&&l.a.createElement("li",{className:"nav-item "},l.a.createElement("a",{className:"nav-link",href:"/lender/list"},l.a.createElement("span",{className:"sidebar-normal"}," List Lenders"))),this.acc_prvdr&&this.acc_prvdr.create&&l.a.createElement("li",{className:"nav-item "},l.a.createElement("a",{className:"nav-link",href:"/account_provider/create"},l.a.createElement("span",{className:"sidebar-normal"}," Create Account Provider"))),this.acc_prvdr&&this.acc_prvdr.list_view&&l.a.createElement("li",{className:"nav-item "},l.a.createElement("a",{className:"nav-link",href:"/account_provider/list"},l.a.createElement("span",{className:"sidebar-normal"}," List Account Providers")))))),this.master_data&&l.a.createElement("li",{className:"nav-item "},l.a.createElement("a",{className:"nav-link","data-toggle":"collapse",href:"#master_data"},l.a.createElement("i",{className:"material-icons"}),l.a.createElement("p",null," Master Data",l.a.createElement("b",{className:"caret"}))),l.a.createElement("div",{className:"collapse",id:"master_data"},l.a.createElement("ul",{className:"nav"},this.master_data.create&&l.a.createElement("li",{className:"nav-item "},l.a.createElement("a",{className:"nav-link",href:"/master_data/add"},l.a.createElement("span",{className:"sidebar-normal"}," Add Master Data "))),this.data_key.create&&l.a.createElement("li",{className:"nav-item "},l.a.createElement("a",{className:"nav-link",href:"/master_data_key/add"},l.a.createElement("span",{className:"sidebar-normal"}," Add Master Data Key"))),this.data_key.list_view&&l.a.createElement("li",{className:"nav-item "},l.a.createElement("a",{className:"nav-link",href:"/master_data_key/list"},l.a.createElement("span",{className:"sidebar-normal"}," List Master Data Keys")))))),l.a.createElement("li",{className:"nav-item"},l.a.createElement($.a,{to:"/logout",className:"nav-link"},l.a.createElement("i",{class:"fa-solid fa-arrow-right-from-bracket"}),l.a.createElement("p",null," Logout ")))))))}}]),t}(rt),Qs=a(64),Zs=a(88),Xs=a(41),$s=a(106),ec=a(91),tc=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={cust_token:!1,modalBox:!1,capture_payment:!1,cust_profile:"hide_div",repayment_style:"disable_div",loan_type:"",loan_data:{},call_log:{},cust_data:{},checkin_req:{},timer_sec:0,timer:"",timer_min:0,reviewed:0,opacity:""},a.handle_custID_change=function(e){a.setState({cust_token:e.target.value})},a.refresh_timer=function(){setInterval(function(){return a.tick()},1e3)},a.handleIncomingCall=function(){a.setState({modalBox:!0}),a.server_time(),0==a.state.timer_sec?a.refresh_timer():a.setState({timer_sec:0,timer_min:0})},a.handleClose=function(e){a.setState({modalBox:!1,cust_profile:"hide_div",cust_data:{}})},a.CaptureModalClose=function(e){a.setState({capture_payment:!1,opacity:""})},a.submit_capture_payment=function(e){if(0!=window.confirm("Are you sure capture the payment?")){var t={loan_doc_id:a.state.selected_payment.loan_doc_id,acc_stmt_txn_id:a.state.selected_payment.acc_stmt_txn_id,amount:a.state.selected_payment.amount};Ha(a.req(t)).then(function(e){if(!e)return null;"success"===e.status?(a.setState({opacity:""}),alert("Payment captured successfully"),a.handleValidateCustomer(),a.CaptureModalClose()):alert(e.message)})}},a.handleCallLog=function(e,t,n){var l=null;if("incoming"==e?l=window.confirm("Are you sure right now you have received a call from the ".concat(n," and speaking with the customer ?")):"outgoing"==e&&(l=window.confirm("Are you sure right now you have dialed ".concat(n," and speaking with the customer ?"))),0!=l){var r=a.state.call_log;r.cust_id=t,r.call_type=e,Pl(a.req({call_log:r})).then(function(t){if(a.resp(t),t)if("success"===t.status){var n=t.data,l=!0;"lastcall"==n.action&&(l=window.confirm(n.message)),l&&n.call_log_id&&window.open("/compl_call_log/"+n.cust_id+"/"+n.call_log_id+"?type="+e,"_blank")}else alert(t.message+"\n"+JSON.stringify(t.data))})}},a.handleCheckIn=function(e,t,n){if(!1!==window.confirm("Are you sure, right now you are at ".concat(n,"'s business location and would like to check-in?"))){var l=a.state.checkin_req;l.cust_id=t,ka(a.req({checkin_req:l})).then(function(t){if(a.resp(t),t)if("success"===t.status){var n=t.data,l=!0;"lastvisit"==n.action&&(l=window.confirm(n.message)),l&&n.visit_id&&window.open("/checkout/"+n.cust_id+"/"+n.visit_id+"?type="+e,"_blank")}else alert(t.message+"\n"+JSON.stringify(t.data))})}},a.handleValidateCustomer=function(e){e&&(a.target=e.target.id);var t=a.state.cust_token;if(!t)return alert("Please Enter Customer ID / Mobile Number / National ID"),!1;jl(a.req({cust_token:t,incl_profile:!0},!0)).then(function(e){a.resp(e),e&&("success"===e.status?e.data&&e.data.cust_id&&("log_visit"==a.target?a.handleCheckIn(a.target,e.data.cust_id,e.data.cust_name):"incoming"==a.target||"outgoing"==a.target?a.handleCallLog(a.target,e.data.cust_id,e.data.cust_name):"apply_fa"==a.target?window.open("/fa_appl_for/".concat(e.data.cust_id),"_blank"):"view_profile"==a.target&&window.open("/borrower/indiv/view/".concat(e.data.cust_id),"_blank")):alert(e.message+"\n"+JSON.stringify(e.data)))})},a.RepaymentSummaryModal=function(e,t){return e?l.a.createElement(nt.a,{show:a.state.capture_payment,onHide:a.CaptureModalClose,size:"l"},l.a.createElement(nt.a.Header,{closeButton:!0,show:a.state.capture_payment,onHide:a.CaptureModalClose},l.a.createElement(nt.a.Title,null,"Capture FA Payment (",e.loan_doc_id,")")),l.a.createElement(nt.a.Body,null,l.a.createElement("div",{className:"container"},l.a.createElement("p",null,"Review the below payment data by clicking over them. "),l.a.createElement("form",null,l.a.createElement("div",{className:"rule-form-group form-group row reset-margin"},l.a.createElement("label",{for:"",className:"col-sm-4 label__name reset-padding"},"Account txn ID"),l.a.createElement("div",{className:"col-sm-8 reset-padding"},l.a.createElement("div",null,l.a.createElement("input",{type:"checkbox",id:"toggle_1",className:"toggle visually-hidden",onChange:a.handleReviewChange,value:"1"}),l.a.createElement("label",{className:"select_toogle",for:"toggle_1"},e.stmt_txn_id," "),l.a.createElement("div",{className:"control-me"})))),l.a.createElement("div",{className:"rule-form-group form-group row reset-margin"},l.a.createElement("label",{for:"",className:"col-sm-4 label__name reset-padding"},"Txn description"),l.a.createElement("div",{className:"col-sm-8 reset-padding"},l.a.createElement("div",null,l.a.createElement("input",{type:"checkbox",id:"toggle_2",className:"toggle visually-hidden",onChange:a.handleReviewChange,value:"1"}),l.a.createElement("label",{className:"select_toogle",for:"toggle_2"},e.descr),l.a.createElement("div",{className:"control-me"})))),l.a.createElement("div",{className:"rule-form-group form-group row reset-margin"},l.a.createElement("label",{for:"",className:"col-sm-4 label__name reset-padding"},"Customer"),l.a.createElement("div",{className:"col-sm-8 reset-padding"},l.a.createElement("div",null,l.a.createElement("input",{type:"checkbox",id:"toggle_3",className:"toggle visually-hidden",onChange:a.handleReviewChange,value:"1"}),l.a.createElement("label",{className:"select_toogle",for:"toggle_3"},e.cust_name," | ",e.biz_name),l.a.createElement("div",{className:"control-me"})))),l.a.createElement("div",{className:"rule-form-group form-group row reset-margin"},l.a.createElement("label",{for:"",className:"col-sm-4 label__name reset-padding"},"Cust ID"),l.a.createElement("div",{className:"col-sm-8 reset-padding"},l.a.createElement("div",null,l.a.createElement("input",{type:"checkbox",id:"toggle_4",className:"toggle visually-hidden",onChange:a.handleReviewChange,value:"2"}),l.a.createElement("label",{className:"select_toogle",for:"toggle_4"},e.cust_id," | ",e.acc_number),l.a.createElement("div",{className:"control-me"})))),l.a.createElement("div",{className:"rule-form-group form-group row reset-margin"},l.a.createElement("label",{for:"",className:"col-sm-4 label__name reset-padding"},"Payment amount"),l.a.createElement("div",{className:"col-sm-8 reset-padding"},l.a.createElement("div",null,l.a.createElement("input",{type:"checkbox",id:"toggle_5",className:"toggle visually-hidden",onChange:a.handleReviewChange,value:"3"}),l.a.createElement("label",{className:"select_toogle",for:"toggle_5"},Ne(t.paid_amount,a.currency_code)),l.a.createElement("div",{className:"control-me"})))),l.a.createElement("div",{className:"rule-form-group form-group row reset-margin"},l.a.createElement("label",{for:"",className:"col-sm-4 label__name reset-padding"},"Outstanding amount"),l.a.createElement("div",{className:"col-sm-8 reset-padding"},l.a.createElement("div",null,l.a.createElement("input",{type:"checkbox",id:"toggle_6",className:"toggle visually-hidden",onChange:a.handleReviewChange,value:"3"}),l.a.createElement("label",{className:"select_toogle",for:"toggle_6"},Ne(e.current_os_amount,a.currency_code)),l.a.createElement("div",{className:"control-me"})))),l.a.createElement("div",{className:"row"},l.a.createElement("label",null,l.a.createElement("input",{type:"checkbox",onChange:a.handleSMSCheckboxClick,defaultChecked:!0}),"\xa0 Send payment confirmation notification SMS")))),a.state.processing&&l.a.createElement("p",{style:{color:"red",textAlign:"right"}},a.state.processing)),l.a.createElement(nt.a.Footer,null,l.a.createElement("div",{className:"col-md-8 reset-margin reset-padding"},l.a.createElement("button",{type:"button",className:"btn btn-primary float-right mr-1 ".concat(a.state.repayment_style),onClick:a.submit_capture_payment,disable:!0},"Capture Payment "),l.a.createElement("button",{type:"button",className:"btn btn-outline-primary float-right mr-1",onClick:a.CaptureModalClose,"data-dismiss":"modal","aria-label":"Close"},"Cancel")))):null},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"tick",value:function(){0==this.state.timer_sec||0!=this.state.timer_sec?(this.setState({timer_sec:this.state.timer_sec+1}),60==this.state.timer_sec&&this.setState({timer_min:this.state.timer_min+1,timer_sec:0})):this.refresh_timer()}},{key:"render",value:function(){var e=this,t=this.state.cust_data,a=t.biz_name,n=t.cust_name,r=t.acc_number,s=t.cust_id,c=(t.cust_mobile_num,t.cust_dob,t.ongoing_loan_doc_id,t.last_loan_doc_id,this.state.loan_data),o=c.loan_principal,i=c.duration,d=c.flow_fee,m=c.due_amount,u=c.loan_doc_id,_=c.cust_acc_id,p=c.to_acc_num,h=c.lender_code,v=c.acc_prvdr_code,g=c.currency_code,f=c.due_date;c.status,c.paid_amount,c.current_os_amount,c.overdue_days,this.state.loan_type;return this.instant_disburse_loan={biz_name:a,cust_name:n,acc_number:r,loan_principal:o,duration:i,flow_fee:d,due_amount:m,loan_doc_id:u,cust_id:s,cust_acc_id:_,to_acc_num:p,lender_code:h,acc_prvdr_code:v,currency_code:g,due_date:f},l.a.createElement(l.a.Fragment,null,this.RepaymentSummaryModal(this.state.selected_payment,this.state.loan_data),l.a.createElement("div",{className:"home-menu box col-lg-5 col-md-5 text-center"},l.a.createElement("div",{className:"card card-pricing "},l.a.createElement("div",{className:"card-body"},l.a.createElement("h3",{className:"card-title"},"Quick Actions"),l.a.createElement(A.a.Control,{id:"cust_token",autocomplete:"off",placeholder:"Any Customer ID / Mobile No / National ID",onChange:function(t){e.handle_custID_change(t)}}),l.a.createElement("p",{className:"card-description"},l.a.createElement("button",{type:"button",className:"btn btn-primary",id:"apply_fa",onClick:this.handleValidateCustomer},l.a.createElement(Xs.b,{className:"mr-1",color:"white"}),"Apply FA"),l.a.createElement("button",{type:"button",className:"btn btn-primary",id:"view_profile",onClick:this.handleValidateCustomer},l.a.createElement($s.a,{className:"mr-1",color:"white"}),"View Profile"),b("field_visit","checkin")&&l.a.createElement(l.a.Fragment,null,l.a.createElement("button",{id:"log_visit",type:"button",className:"btn btn-primary",disabled:this.state.calling_api,onClick:this.handleValidateCustomer},l.a.createElement(nr.b,{className:"mr-2",color:"white"}),"Checkin")),b("call_log","post")&&l.a.createElement(l.a.Fragment,null,l.a.createElement("button",{id:"incoming",type:"button",disabled:this.state.calling_api,className:"btn btn-secondary",onClick:this.handleValidateCustomer},l.a.createElement(ec.a,{className:"mr-1",color:"white"}),"Log Incoming Call "),l.a.createElement("button",{id:"outgoing",type:"button",className:"btn btn-secondary",disabled:this.state.calling_api,onClick:this.handleValidateCustomer},l.a.createElement(ec.b,{className:"mr-1",color:"white"}),"Log Outgoing Call")))))),l.a.createElement("div",{className:"home-menu box col-lg-3 col-md-3"},l.a.createElement("div",{className:"card card-pricing "},l.a.createElement("div",{className:"card-body"},l.a.createElement("h3",{className:"card-title"},"Shortcuts"),l.a.createElement("p",{className:"card-description text-left"},l.a.createElement("tr",null,l.a.createElement("td",null,l.a.createElement("h3",null," ",l.a.createElement(Zs.a,{className:"icon"}))),l.a.createElement("td",null,l.a.createElement($.a,{to:"/borrower/search"},"Search Customer"))),l.a.createElement("tr",null,l.a.createElement("td",null,l.a.createElement("h3",null," ",l.a.createElement(Xs.a,{className:"icon"}))),l.a.createElement("td",null,l.a.createElement($.a,{to:"/fa/search"},"Search FA"))),l.a.createElement("tr",null,l.a.createElement("td",null,l.a.createElement("h3",null," ",l.a.createElement(Qs.b,{className:"icon"}))),l.a.createElement("td",null,l.a.createElement($.a,{to:"borrower/indiv/create"},"Register Customer"))),l.a.createElement("tr",null,l.a.createElement("td",null,l.a.createElement("h3",null," ",l.a.createElement(Qs.a,{className:"icon",value:{color:"blue"}}))),l.a.createElement("td",null,l.a.createElement($.a,{to:"lender/accounts/todayfa"},"Today Disbursed FA's"))))))))}}]),t}(ct),ac=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={rowdatas:[],columndatas:[],show_table:!1},a.handleToggle=function(e){switch(e){case"Account":a.setState(function(e){return e.show_table=!a.state.show_table})}},a.takeAction=function(e,t,a){if("requires_flow_rm_approval"==t||"eligible"==t||"first_n_fas_wo_score"==t){var n=e.target.id;alert("Please approve/reject the FA from the new tab"),window.open("/fa_appl/view/"+n,"_blank")}else window.open("/borrower/indiv/view/"+a,"_blank")},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){var e=this,t={status:"pending_approval",loan_approver_id:g("user_id")};pl(this.req({loan_appl_search_criteria:t},!0)).then(function(t){t&&t&&(e.setState(function(e){return e.rowdatas=t.data}),e.setState(function(t){return t.columndatas=e.columndatas()}))})}},{key:"sortBiz",value:function(e,t){return Pr(e,t)}},{key:"sortAmt",value:function(e,t){var a=e.props.children,n=t.props.children;return Mr(a,n)}},{key:"sortDate",value:function(e,t){var a=e.props.children[1],n=t.props.children[1];return Lr(a,n)}},{key:"columndatas",value:function(){var e=this;return[{Header:"FA Application ID",id:"loan_appl_doc_id",sortable:!1,accessor:function(e){return e.loan_appl_doc_id}},{Header:"A/C Number",id:"acc_number",sortable:!1,accessor:function(e){return l.a.createElement($.a,{to:"/borrower/indiv/view/"+e.acc_number,target:"_blank"},e.acc_number)}},{Header:"Cust Name",id:"cust_name",sortable:!1,accessor:function(e){return e.cust_name}},{Header:"Cust ID",id:"cust_id",sortable:!1,accessor:function(e){return e.cust_id}},{Header:"Biz Name",id:"biz_name",sortMethod:function(t,a){return e.sortBiz(t,a)},accessor:function(e){return e.biz_name}},{Header:function(){return l.a.createElement("div",{className:"tableAmount_centerAlign"},"FA Amount")},id:"loan_principal",sortMethod:function(t,a){return e.sortAmt(t,a)},accessor:function(t){return l.a.createElement("div",{className:"tableAmount_rightAlign"},Ne(t.loan_principal,e.currency_code))}},{Header:"Date",id:"loan_appl_date",sortMethod:function(t,a){return e.sortDate(t,a)},accessor:function(e){return _e(e.loan_appl_date)}},{Header:"Action",id:"cs_result_code",sortable:!1,accessor:function(e){return e.cs_result_code?"ineligible"==e.cs_result_code?"Ineligible":"requires_flow_rm_approval"==e.cs_result_code||"first_n_fas_wo_score"==e.cs_result_code?"Need Approval":"NULL":"NULL"}}]}},{key:"render",value:function(){var e=this;return l.a.createElement(tr.a,null,l.a.createElement(an.a,null,l.a.createElement("div",{className:"card-header card-header-icon card-header-primary home_header_d-flex_at_response justify-space-between"},l.a.createElement("h4",{className:"card-title text-white d-inline-block tableHead_font title-bottom "},"FA Applications Pending Your Approval"),l.a.createElement(tr.a.Toggle,{className:"col",as:an.a.Header,eventKey:"0",onClick:function(){return e.handleToggle("Account")}},l.a.createElement(nr.a,{className:this.state.show_table?"arrow-icon down":"arrow-icon",size:"18"}))),l.a.createElement("div",{className:"card-body no-padding"},l.a.createElement(tr.a.Collapse,{eventKey:"0"},l.a.createElement(an.a.Body,null,l.a.createElement(ua,{showPag:!1,defaultPageSize:50,minRow:0,row_data:void 0!==this.state.rowdatas?this.state.rowdatas:[],column_data:this.state.columndatas,resizable:!1,defaultSorted:[{id:"loan_appl_date",desc:!0}]}))))))}}]),t}(ct),nc=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={modalBox:!1,disable:"disable_div"},a.attempt={},a.handleDisburseClick=function(e){a.disbursal_txn={amount:a.attempt.disbursed_amount,loan_doc_id:a.props.data.loan_doc_id,from_ac_id:a.attempt.from_acc_id,to_ac_id:a.attempt.to_acc_id,txn_date:re()(a.props.data.attempt_time).format("YYYY-MM-DD")},a.setState({modalBox:!0})},a.handleClose=function(e){a.setState({modalBox:!1})},a.handleSubmit=function(e){if(e.preventDefault(),window.confirm("Have you verified in the Data Provider's A/C statement if you could locate debit transaction(s) on "+_e(a.disbursal_txn.txn_date)+" for "+a.attempt.disbursed_amount+" "+a.currency_code+" related to this FA?")){console.log("DSB TXN"+JSON.stringify(a.disbursal_txn));var t=a.disbursal_txn;t.send_sms=!0,t.txn_exec_by=1,t.txn_mode="instant_disbursal",t.capture_only=!0,Ba(a.req({disbursal_txn:t})).then(function(e){a.resp(e),e&&("success"===e.status?(a.setState({modalBox:!1}),window.location.reload()):alert(e.message+"\n"+JSON.stringify(e.data)))})}},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){var e=this,t={loan_doc_id:this.props.data.loan_doc_id};(function(e){return L(M+"/loan/get_disb_attempt",e)})(this.req(t)).then(function(t){e.resp(t),e.attempt=t.data})}},{key:"render",value:function(){var e=this;return l.a.createElement("div",{className:"text-center"},l.a.createElement("div",null,l.a.createElement("input",{type:"button",className:"btn btn-primary btn-std",value:"Capture Disbursal",onClick:this.handleDisburseClick})),l.a.createElement(nt.a,{show:this.state.modalBox,onHide:this.handleClose,size:"xl"},l.a.createElement(nt.a.Header,{closeButton:!0,show:this.state.modalBox,onHide:this.handleClose},l.a.createElement(nt.a.Title,null,"FA Disbursal")),l.a.createElement(nt.a.Body,null,l.a.createElement("div",{className:"container"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-6"},l.a.createElement("h4",null,"Float Advance ID: ",this.props.data.loan_doc_id," ")),l.a.createElement("div",{className:"col-md-6"},l.a.createElement("h4",null,"Float Advance Amount: ",je(mt(this.attempt.disbursed_amount,this.currency_code))," "))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-6"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-5"},l.a.createElement("label",null,"Disburse From A/C",l.a.createElement("br",null),l.a.createElement("font",{className:"text-danger"},"   *  "))),l.a.createElement("div",{className:"col-md-7"},l.a.createElement("div",{className:"".concat(this.state.disable)},l.a.createElement("select",{type:"text",id:"amount",onChange:this.handleSelfChange,value:this.attempt.from_acc_id,className:"form-control"},l.a.createElement("option",{value:this.attempt.from_acc_id,selected:"true"},this.attempt.from_acc_id," - ",this.attempt.from_acc_num))))),l.a.createElement("br",null),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-5"},l.a.createElement("label",null,"Amount Disbursed"),l.a.createElement("font",{className:"text-danger"},"   *  ")),l.a.createElement("div",{className:"col-md-7"},l.a.createElement("div",{id:"",className:"".concat(this.state.disable)},l.a.createElement("input",{type:"text",id:"amount",onChange:this.handleSelfChange,value:this.attempt.disbursed_amount,className:"form-control"})))),l.a.createElement("br",null),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-5"},l.a.createElement("label",null,"Disbursal Transaction ID"),l.a.createElement("font",{className:"text-danger"},"   *  ")),l.a.createElement("div",{className:"col-md-7"},l.a.createElement("input",{type:"text",id:"txn_id",onChange:this.handleSelfChange,className:"form-control spacing",required:"required"}))),l.a.createElement("br",null)),l.a.createElement("div",{className:"col-md-6"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-5"},l.a.createElement("label",null,"Customer's A/C"),l.a.createElement("font",{className:"text-danger"},"   *  ")),l.a.createElement("div",{className:"col-md-7"},l.a.createElement("div",{className:"".concat(this.state.disable)},l.a.createElement("select",{type:"text",id:"amount",onChange:this.handleSelfChange,value:this.attempt.from_acc_id,className:"form-control"},l.a.createElement("option",{value:this.attempt.to_acc_id,selected:!0},this.attempt.to_acc_id," - ",this.attempt.to_acc_num))))),l.a.createElement("br",null),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-5"},l.a.createElement("label",null,"Disbursal Date"),l.a.createElement("font",{className:"text-danger"},"   *  ")),l.a.createElement("div",{className:"col-md-7"},l.a.createElement(Ft.a,{defaultValue:_e(this.props.data.attempt_time),closeOnSelect:!0,onChange:function(t){e.handleSelfDateChange("txn_date",t)},dateFormat:"DD MMM YYYY",timeFormat:!1,required:"required"}))),l.a.createElement("br",null),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-5"},l.a.createElement("label",null,"Remarks")),l.a.createElement("div",{className:"col-md-7"},l.a.createElement("input",{type:"text",id:"remarks",onChange:this.handleSelfChange,className:"form-control",required:"required"}))),l.a.createElement("br",null))))),l.a.createElement(nt.a.Footer,null,l.a.createElement(lt.a,{variant:"secondary",onClick:this.handleClose},"Cancel"),l.a.createElement("input",{type:"button",className:"btn btn-primary",onClick:this.handleSubmit,value:"Submit",disabled:this.state.calling_api}))))}}]),t}(ct),lc=(n.Component,function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={refresh:!1,rowdatas:[],columndatas:[],copy:[],dyn_Btn_selected:[],all_count:0,filter_actions:{},all_Btn_status:!1,all_Acc_pvdrs:[],disb_manually:!0,show_table:!1},a.handleToggle=function(e){switch(e){case"Account":a.setState(function(e){return e.show_table=!a.state.show_table})}},a.refreshList=Object(F.a)(D.a.mark(function e(){return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState({refresh:!0}),e.next=3,a.drawTable();case 3:case"end":return e.stop()}},e)})),a.buttonName=function(e){var t;if("pending_disb_capture"==e.disbursal_status&&b("loan","home_capture_disbursal"))t=l.a.createElement(nc,{id:"disbursal_txn",data:e,title:"Disbursal Loan"});else if("failed"==e.disbursal_status||"pending_mnl_dsbrsl"==e.status){var n=e;n.amount=e.loan_principal,t=l.a.createElement("div",{className:"text-center"},b("loan","retry_disbursal")&&"pending_mnl_dsbrsl"!=e.status&&l.a.createElement("input",{style:{marginBottom:"1%"},id:e.loan_doc_id,type:"submit",value:"Retry",disabled:a.state.calling_api,onClick:function(t){a.retryFA(e.loan_doc_id)},className:"btn btn-primary btn-sm"}),b("loan","disburse_manually")&&l.a.createElement(ys,{id:"disbursal_txn",data:n,parent:"home",disabled:a.state.calling_api,onStatusChange:a.refreshList,onDisburseClick:function(e){return a.setState({disb_manually:e})}}))}else"unknown"==e.disbursal_status&&b("loan","release")&&e.allow_status_change&&(t=l.a.createElement("td",null,l.a.createElement("select",{style:{minHeight:"30px",width:90},onChange:function(t){a.statusChange(t,e)}},l.a.createElement("option",{disabled:!0,selected:!0,hidden:!0,className:"text-white"},"choose"),l.a.createElement("option",{value:"pending_disb_capture",className:"text-white"},"Pending Capture"),l.a.createElement("option",{value:"failed",className:"text-white"},"Failed"))));return t},a.retryFA=function(e){a.state.calling_api||window.confirm("Have you verified in the Data Provider's A/C statement if there is no debit transaction found related to this FA?\n\nPlease note that clicking OK will re-attempt Disbursal")&&za(a.req({loan_doc_id:e},!0)).then(function(e){a.resp(e),window.location.reload()})},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){var e=this,t=k("fa_late1"),a=k("fa_late2");this.setState({fa_late1:t,fa_late2:a});var n=g("market"),l={country_code:n.country_code,time_zone:n.time_zone,status:""};un(Object(Z.a)({},l,{status:"enabled",biz_account:!0})).then(function(t){if(t&&"success"===t.status){var a=[];t.data.list.map(function(e){return a.push(e.acc_prvdr_code)}),e.setState(function(e){return e.all_Acc_pvdrs=a}),w("acc_pvdrs",a)}}),this.drawTable()}},{key:"drawTable",value:function(){var e=Object(F.a)(D.a.mark(function e(){var t,a,n,l,r,s=this;return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=g("market"),a=t.country_code,e.next=4,this.server_time(this.time_zone);case 4:return n={status:"stalled",disburse_attempt:!0,mode:"search"},e.next=7,ja(this.req({loan_search_criteria:n},!0));case 7:if(l=e.sent,this.resp(l),l){e.next=11;break}return e.abrupt("return");case 11:l&&(this.setState(function(e){return e.columndatas=s.columndatas()}),this.setState(function(e){return e.copy=[]}),(l.data.results.length>0||0===l.data.results.length)&&(this.setState(function(e){return e.all_count=l.data.results.length}),this.setState(function(e){return e.rowdatas=l.data.results}),r=void 0===g([a]+"_faPendingdisb")?this.state.all_Acc_pvdrs:g([a]+"_faPendingdisb"),this.state.all_Acc_pvdrs.map(function(e){var t=s.state.rowdatas.filter(function(t){return t.acc_prvdr_code===e}).length;s.setState(function(t){return t.filter_actions[e]=[{count:0},{status:r.includes(e)}]}),s.dynClickhandler(s.state.filter_actions[e][1].status,e),s.setState(function(a){return a.filter_actions[e][0].count=t})})));case 13:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"dynClickhandler",value:function(e,t){var a=this,n=g("market").country_code;if(e)if("ALL"!==t){-1==this.state.dyn_Btn_selected.findIndex(function(e){return e===t})&&(this.state.dyn_Btn_selected.push(t),this.setState(function(a){return a.filter_actions[t][1].status=e}),this.state.dyn_Btn_selected.length===this.state.all_Acc_pvdrs.length&&this.setState(function(e){return e.all_Btn_status=!0})),localStorage.setItem([n]+"_faPendingdisb",JSON.stringify(this.state.dyn_Btn_selected))}else{var l=[];this.state.all_Acc_pvdrs.map(function(e){a.state.filter_actions[e][1].status=!0,l.push(e)}),this.setState(function(e){return e.dyn_Btn_selected=l}),localStorage.setItem([n]+"_faPendingdisb",JSON.stringify(l)),this.setState(function(t){return t.all_Btn_status=e})}else if(!e)if("ALL"!==t){var r=this.state.dyn_Btn_selected.findIndex(function(e){return e===t});r>-1&&(this.state.dyn_Btn_selected.splice(r,1),this.setState(function(a){return a.filter_actions[t][1].status=e})),this.setState(function(e){return e.all_Btn_status=!1}),localStorage.setItem([n]+"_faPendingdisb",JSON.stringify(this.state.dyn_Btn_selected))}else this.state.all_Acc_pvdrs.map(function(e){return a.state.filter_actions[e][1].status=!1}),this.setState(function(e){return e.dyn_Btn_selected=[]}),localStorage.setItem([n]+"_faPendingdisb",JSON.stringify([])),this.setState(function(t){return t.all_Btn_status=e});var s=g([n]+"_faPendingdisb"),c=[];s.map(function(e){var t=a.state.rowdatas.filter(function(t){return t.acc_prvdr_code===e});c.push.apply(c,Object(ne.a)(t))}),this.setState(function(e){return e.copy=c})}},{key:"getOverlayInfo",value:function(e,t){var a;return"failed"===e?a="Float not transferred. App Support Will Retry":"pending_disb_capture"===e?a="Float Transferred. Not Captured on Flow App. Customer Success will Capture":"unknown"===e?a="App Support Will Process":"sent_to_disbursal_queue"===e?a="Float will be transferred shortly":null!==e||t.customer_consent_rcvd||(a="Customer has not sent the confirmation code"),a}},{key:"sortAmt",value:function(e,t){var a=e.props.children,n=t.props.children;return Mr(a,n)}},{key:"sortBiz",value:function(e,t){var a=e.props.children[0].props.full_text,n=t.props.children[0].props.full_text;return Pr(a,n)}},{key:"sortTime",value:function(e,t){var a=e.props.data.loan_appl_date,n=t.props.data.loan_appl_date,l=this.state.server_time.server_time_db;return Br(a,n,l)}},{key:"columndatas",value:function(){var e=this;return[{Header:"ACC PRVDR",id:"acc_prvdr_code",sortable:!1,maxWidth:85,accessor:function(e){return l.a.createElement(Me,{logotype:e.acc_prvdr_code})}},{Header:"FA ID & A/C Number",id:"loan_doc_id",minWidth:125,sortable:!1,accessor:function(e){return l.a.createElement("div",null,l.a.createElement($.a,{className:"d-block",to:"/fa/view/"+e.loan_doc_id,target:"_blank"},e.loan_doc_id),l.a.createElement($.a,{className:"d-block",to:"/borrower/indiv/view/"+e.cust_id,target:"_blank"},e.acc_number))}},{Header:l.a.createElement(l.a.Fragment,null,"Biz Name",l.a.createElement("br",null),"& Mobile Number"),id:"cust_mobile_num",sortMethod:function(t,a){return e.sortBiz(t,a)},minWidth:125,maxWidth:125,accessor:function(t){return l.a.createElement("div",null,l.a.createElement(St,{className:"d-block",full_text:t.biz_name,overlay:"".concat(t.cust_name," / ").concat(Ne(t.loan_principal,e.currency_code)),no_reduce:!0}),l.a.createElement("label",{className:"no-margin d-block"},t.cust_mobile_num))}},{Header:"Applied & Approved",id:"loan_appl_date",width:170,sortable:!1,accessor:function(t){return l.a.createElement("div",null,l.a.createElement("span",null,"Applied :  ",l.a.createElement(At,{data:t,timedata:e.state.server_time.server_time_db,item:"applied",time_limit:[e.state.fa_late1,e.state.fa_late2]})),l.a.createElement("br",null),l.a.createElement("span",null,"Approved :  ",l.a.createElement(At,{data:t,timedata:e.state.server_time.server_time_db,item:"approved",time_limit:[e.state.fa_late1,e.state.fa_late2]})))}},{Header:l.a.createElement("div",{style:{paddingLeft:15}},"Attempted"),id:"first_attempt_time",minWidth:190,maxWidth:190,sortable:!1,accessor:function(t){return l.a.createElement("div",{style:{paddingLeft:15}},t.attempts>1?l.a.createElement(l.a.Fragment,null,t.first_attempt_time&&l.a.createElement(l.a.Fragment,null,l.a.createElement("span",null,"First Attempt : ",l.a.createElement(At,{data:t,timedata:e.state.server_time.server_time_db,item:"first_attempt_time",time_limit:[e.state.fa_late1,e.state.fa_late2]})),l.a.createElement("br",null)),t.attempt_time&&l.a.createElement(l.a.Fragment,null,l.a.createElement("span",null,"Last Attempt"," ("+t.attempts+")"," : ",l.a.createElement(At,{data:t,timedata:e.state.server_time.server_time_db,item:"last_attempt_time",time_limit:[e.state.fa_late1,e.state.fa_late2]})))):l.a.createElement("span",null,l.a.createElement("span",{style:{display:1===t.attempts?"inline-flex":"none"}},"Attempted :"),l.a.createElement(At,{data:t,timedata:e.state.server_time.server_time_db,item:"first_attempt_time",time_limit:[e.state.fa_late1,e.state.fa_late2]})))}},{Header:l.a.createElement(l.a.Fragment,null,"FA Status",l.a.createElement("br",null),"Disbursal Status"),id:"status",minWidth:140,maxWidth:200,sortable:!1,accessor:function(t){return l.a.createElement("div",null,l.a.createElement("span",null,Ze(t.status)),l.a.createElement("br",null),null!=t.disbursal_status?l.a.createElement(se.a,{placement:"auto",trigger:["hover","focus"],overlay:l.a.createElement(ce.a,{style:{fontSize:"15px",padding:"15px",color:"mediumblue",fontFamily:"Montserrat"}},e.getOverlayInfo(t.disbursal_status,t))},l.a.createElement("span",null,ue(t.disbursal_status||"not_initiated")," ",l.a.createElement("sup",null,l.a.createElement(oe.a,{size:14})))):l.a.createElement(l.a.Fragment,null))}},{Header:function(){return l.a.createElement("div",{className:"text-center"},"Action")},sortable:!1,id:"btn",minWidth:120,accessor:function(t){return e.buttonName(t)}}]}},{key:"statusChange",value:function(e,t){var a=this,n=e.target.value,l="";if("pending_disb_capture"===n?l="Are you sure if the disbursal attempt is successful and there is a debit transaction to the customer found in the Data Provider A/C statement on "+t.attempt_time+"?":"failed"===n&&(l="Are you sure the disbursal attempt got failed and there is no debit transaction to the customer found in the Data Provider A/C statement?"),window.confirm(l)){var r={loan_doc_id:t.loan_doc_id,disbursal_status:n};Wa(this.req(r)).then(function(e){a.resp(e),e&&"success"==e.status&&a.refreshList()})}}},{key:"componentDidUpdate",value:function(e,t,a){e.refresh!=this.props.refresh&&1==this.state.disb_manually&&this.refreshList()}},{key:"render",value:function(){var e=this;return l.a.createElement(tr.a,null,l.a.createElement(an.a,null,l.a.createElement("div",{className:"card-header card-header-icon card-header-primary home_header_d-flex_at_response justify-space-between"},l.a.createElement("h4",{className:"card-title text-white tableHead_font title-bottom "},"FAs Pending Disbursal"),this.state.rowdatas.length>0&&l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"countREL card-title"},l.a.createElement("button",{className:"filterBtns allBtn_size",onClick:function(){return e.dynClickhandler(!e.state.all_Btn_status,"ALL")},style:{filter:this.state.all_Btn_status?"":"opacity(0.5)"}},"ALL"),l.a.createElement("div",{className:"countABS",style:{backgroundColor:this.state.all_Btn_status?"":"lightgrey"}},l.a.createElement("label",null,this.state.all_count))),this.state.all_Acc_pvdrs.map(function(t,a){return l.a.createElement("div",{key:a,className:"countREL card-title"},l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{style:{width:60,height:30},className:"filterBtns",onClick:function(){return e.dynClickhandler(!e.state.filter_actions[t][1].status,t)}},l.a.createElement("img",{className:"img-fluid",src:"/img/".concat(t,"_logo_color.png"),style:{filter:e.state.filter_actions[t]&&!e.state.filter_actions[t][1].status?"opacity(0.5)":""}})),l.a.createElement("div",{className:"countABS",style:{backgroundColor:e.state.filter_actions[t]&&!e.state.filter_actions[t][1].status?"lightgrey":""}},l.a.createElement("label",null,e.state.filter_actions[t]&&e.state.filter_actions[t][0].count))))})),l.a.createElement(tr.a.Toggle,{className:"col",as:an.a.Header,eventKey:"0",onClick:function(){return e.handleToggle("Account")}},l.a.createElement(nr.a,{className:this.state.show_table?"arrow-icon down":"arrow-icon",size:"18"}))),l.a.createElement("div",{className:"card-body no-padding"},this.state.server_time&&l.a.createElement(tr.a.Collapse,{eventKey:"0"},l.a.createElement(an.a.Body,null,l.a.createElement(ua,{showPag:!1,minRow:0,row_data:void 0!==this.state.copy?this.state.copy:[],column_data:this.state.columndatas,resizable:!1,defaultPageSize:50,defaultSorted:[{id:"loan_appl_date",desc:!0}],excessTimeaction:!0,timeServer:this.state.server_time.server_time_db,appliedRowblink:!1,approveRowblinktime:this.state.fa_late2}))))))}}]),t}(ct)),rc=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={columns:[],lists:[],copy:[],dyn_Btn_selected:[],all_count:0,filter_actions:{},all_Btn_status:!1,all_Acc_pvdrs:[],show_table:!1},a.handleToggle=function(e){switch(e){case"Account":a.setState(function(e){return e.show_table=!a.state.show_table})}},a.handleAuditKyc=function(e,t){var n=t._original.audited_by,l=t._original.auditor_name;null==n&&"operations_auditor"==g("role_codes")?window.confirm("You are going to initiate the audit KYC process for this lead. Once you start, no other auditor can act on this lead.Are you sure?")&&Jl(a.req({id:t.id})).then(function(e){a.resp(e),e&&"success"===e.status&&(window.location.href="/lead/audit_kyc/"+t.id)}):null!=n&&g("user_id")!=n?(window.alert("".concat(l," has already initiated audit process for this KYC record. You can not take action. However you can view the KYC record")),window.location.href="/lead/audit_kyc/"+t.id):null!=n&&g("user_id")==n&&(window.location.href="/lead/audit_kyc/"+t.id)},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){var e=this,t=g("market"),a={country_code:t.country_code,time_zone:t.time_zone,status:""};un(Object(Z.a)({},a,{status:"enabled",biz_account:!0})).then(function(t){if(t&&"success"===t.status){var a=[];t.data.list.map(function(e){return a.push(e.acc_prvdr_code)}),e.setState(function(e){return e.all_Acc_pvdrs=a})}}),this.drawTable()}},{key:"sortDate",value:function(e,t){var a=e.props.children[1],n=t.props.children[1];return Lr(a,n)}},{key:"sortBiz",value:function(e,t){return Pr(e.props.full_text,t.props.full_text)}},{key:"drawTable",value:function(){var e=this,t=g("market").country_code;Vl(this.req({lead_search_criteria:{status:"50_pending_audit"}})).then(function(a){if(a&&"success"===a.status&&(e.setState(function(t){return t.columns=e.columndatas()}),a.data.length>0)){e.setState({lists:a.data}),e.setState(function(e){return e.all_count=a.data.length});var n=void 0===g([t]+"_kycAuditpending")?e.state.all_Acc_pvdrs:g([t]+"_kycAuditpending");e.state.all_Acc_pvdrs.map(function(t){var a=e.state.lists.filter(function(e){return e.acc_prvdr_code===t}).length;e.setState(function(e){return e.filter_actions[t]=[{count:0},{status:n.includes(t)}]}),e.dynClickhandler(e.state.filter_actions[t][1].status,t),e.setState(function(e){return e.filter_actions[t][0].count=a})})}})}},{key:"columndatas",value:function(){var e=this;return[{Header:"Biz Name",id:"biz_name",sortMethod:function(t,a){return e.sortBiz(t,a)},accessor:function(e){return l.a.createElement(St,{full_text:e.biz_name,overlay:e.cust_name,no_reduce:!0})}},{Header:"Reg Date",id:"lead_date",sortMethod:function(t,a){return e.sortDate(t,a)},accessor:function(e){return ve(e.lead_date)}},{Header:"ACC PRVDR",id:"acc_prvdr_code",sortable:!1,accessor:function(e){return l.a.createElement(Me,{logotype:e.acc_prvdr_code})}},{Header:"A/C Number",sortable:!1,accessor:"account_num"},{Header:"Mobile Number",sortable:!1,id:"mobile_num",accessor:function(e){return e.mobile_num}},{Header:"RM Name",sortable:!1,id:"flow_rel_mgr_name",accessor:function(e){return l.a.createElement("div",{className:"rmUpper_case"},null!==e.flow_rel_mgr_name&&function(e){var t=e,a=t.split(/(\s+)/),n=t.match(/\b(\w)/g);return l.a.createElement("p",null,a[0],"\xa0",n[1])}(e.flow_rel_mgr_name))}},{Header:"Action",sortable:!1,accessor:"id",Cell:function(t){var a=t.row;return l.a.createElement(lt.a,{variant:"primary",onClick:function(t){return e.handleAuditKyc(t,a)}},"Audit KYC")}}]}},{key:"dynClickhandler",value:function(e,t){var a=this,n=g("market").country_code;if(e)if("ALL"!==t){-1==this.state.dyn_Btn_selected.findIndex(function(e){return e===t})&&(this.state.dyn_Btn_selected.push(t),this.setState(function(a){return a.filter_actions[t][1].status=e}),this.state.dyn_Btn_selected.length===this.state.all_Acc_pvdrs.length&&this.setState(function(e){return e.all_Btn_status=!0})),localStorage.setItem([n]+"_kycAuditpending",JSON.stringify(this.state.dyn_Btn_selected))}else{var l=[];this.state.all_Acc_pvdrs.map(function(e){a.state.filter_actions[e][1].status=!0,l.push(e)}),this.setState(function(e){return e.dyn_Btn_selected=l}),localStorage.setItem([n]+"_kycAuditpending",JSON.stringify(l)),this.setState(function(t){return t.all_Btn_status=e})}else if(!e)if("ALL"!==t){var r=this.state.dyn_Btn_selected.findIndex(function(e){return e===t});r>-1&&(this.state.dyn_Btn_selected.splice(r,1),this.setState(function(a){return a.filter_actions[t][1].status=e})),this.setState(function(e){return e.all_Btn_status=!1}),localStorage.setItem([n]+"_kycAuditpending",JSON.stringify(this.state.dyn_Btn_selected))}else this.state.all_Acc_pvdrs.map(function(e){return a.state.filter_actions[e][1].status=!1}),this.setState(function(e){return e.dyn_Btn_selected=[]}),localStorage.setItem([n]+"_kycAuditpending",JSON.stringify([])),this.setState(function(t){return t.all_Btn_status=e});var s=g([n]+"_kycAuditpending"),c=[];s.map(function(e){var t=a.state.lists.filter(function(t){return t.acc_prvdr_code===e});c.push.apply(c,Object(ne.a)(t))}),this.setState(function(e){return e.copy=c})}},{key:"render",value:function(){var e=this;return l.a.createElement(tr.a,null,l.a.createElement(an.a,null,l.a.createElement("div",{className:"card-header card-header-icon card-header-primary home_header_d-flex_at_response justify-space-between"},l.a.createElement("h4",{className:"card-title text-white tableHead_font title-bottom"},"Leads with Pending KYC Audit"),this.state.lists.length>0&&l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"countREL card-title"},l.a.createElement("button",{className:"filterBtns allBtn_size",onClick:function(){return e.dynClickhandler(!e.state.all_Btn_status,"ALL")},style:{filter:this.state.all_Btn_status?"":"opacity(0.5)"}},"ALL"),l.a.createElement("div",{className:"countABS",style:{backgroundColor:this.state.all_Btn_status?"":"lightgrey"}},l.a.createElement("label",null,this.state.all_count))),this.state.all_Acc_pvdrs.map(function(t,a){return l.a.createElement("div",{key:a,className:"countREL  card-title"},l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{style:{width:60,height:30},className:"filterBtns",onClick:function(){return e.dynClickhandler(!e.state.filter_actions[t][1].status,t)}},l.a.createElement("img",{className:"img-fluid",src:"/img/".concat(t,"_logo_color.png"),style:{filter:e.state.filter_actions[t]&&!e.state.filter_actions[t][1].status?"opacity(0.5)":""}})),l.a.createElement("div",{className:"countABS",style:{backgroundColor:e.state.filter_actions[t]&&!e.state.filter_actions[t][1].status?"lightgrey":""}},l.a.createElement("label",null,e.state.filter_actions[t]&&e.state.filter_actions[t][0].count))))})),l.a.createElement(tr.a.Toggle,{className:"col",as:an.a.Header,eventKey:"0",onClick:function(){return e.handleToggle("Account")}},l.a.createElement(nr.a,{className:this.state.show_table?"arrow-icon down":"arrow-icon",size:"18"}))),l.a.createElement("div",{className:"card-body no-padding"},l.a.createElement(tr.a.Collapse,{eventKey:"0"},l.a.createElement(an.a.Body,null,l.a.createElement(ua,{showPag:!1,defaultPageSize:50,minRow:0,row_data:void 0!==this.state.copy?this.state.copy:[],column_data:this.state.columns,resizable:!1,defaultSorted:[{id:"lead_date",desc:!0}]}))))))}}]),t}(ct),sc=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={rowdatas:[],copy:[],columns:[],show_table:!1},a.handleToggle=function(e){switch(e){case"Account":a.setState(function(e){return e.show_table=!a.state.show_table})}},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){this.drawTable()}},{key:"sortDate",value:function(e,t){var a=e.props.children[1],n=t.props.children[1];return Lr(a,n)}},{key:"sortBiz",value:function(e,t){Pr(e,t)}},{key:"sortAmount",value:function(e,t){Mr(e.props.children,t.props.children)}},{key:"drawTable",value:function(){var e,t=this;(e=this.req(),L(M+"/loan/list_rec",e)).then(function(e){var a;(t.resp(e),e)&&(e&&(a=[{Header:"Cust ID",id:"cust_id",sortable:!1,accessor:function(e){return l.a.createElement($.a,{to:"/borrower/indiv/view/"+e.cust_id,target:"_blank"},e.cust_id)}},{Header:"FA ID",id:"loan_doc_id",sortable:!1,accessor:function(e){return l.a.createElement($.a,{to:"/fa/view/"+e.loan_doc_id,target:"_blank"},e.loan_doc_id)}},{Header:function(){return l.a.createElement("div",{className:"tableAmount_centerAlign"},"Cash Amount")},id:"amount",sortMethod:function(e,a){return t.sortAmount(e,a)},accessor:function(e){return l.a.createElement("div",{className:"tableAmount_rightAlign"},Ne(e.amount,t.currency_code))}},{Header:"Cust Name",id:"biz_name",sortMethod:function(e,a){return t.sortBiz(e,a)},accessor:function(e){return e.biz_name}},{Header:"Initiated On",id:"created_at",sortMethod:function(e,a){return t.sortDate(e,a)},accessor:function(e){return ve(e.created_at)}},{Header:"Initiated By",sortable:!1,id:"rs_name",accessor:function(e){return e.rs_name}},{Header:"Status",sortable:!1,id:"status",accessor:function(e){return ue(e.status)}},{Header:"Action",sortable:!1,id:"action",accessor:function(e){return l.a.createElement(Ss,{id:"recovery_txn",name:"Take Action",loan_doc_id:e.loan_doc_id,cust_id:e.cust_id,biz_name:e.biz_name})}}],t.setState({refresh:!1}),t.setState(function(t){return t.rowdatas=e.data.results}),t.setState(function(t){return t.copy=e.data.results}),t.setState(function(e){return e.columns=a})))})}},{key:"render",value:function(){var e=this;return l.a.createElement(tr.a,null,l.a.createElement(an.a,null,l.a.createElement("div",{className:"card-header card-header-icon card-header-primary home_header_d-flex_at_response justify-space-between"},l.a.createElement("h4",{className:"card-title text-white tableHead_font title-bottom "},"Collections In Progress"),l.a.createElement(tr.a.Toggle,{className:"col",as:an.a.Header,eventKey:"0",onClick:function(){return e.handleToggle("Account")}},l.a.createElement(nr.a,{className:this.state.show_table?"arrow-icon down":"arrow-icon",size:"18"}))),l.a.createElement("div",{className:"card-body no-padding"},l.a.createElement(tr.a.Collapse,{eventKey:"0"},l.a.createElement(an.a.Body,null,l.a.createElement(ua,{showPag:!1,defaultPageSize:50,minRow:0,row_data:void 0!==this.state.copy?this.state.copy:[],column_data:this.state.columns,resizable:!1,defaultSorted:[{id:"created_at",desc:!0}]}))))))}}]),t}(ct),cc=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={refresh:!1,lists:[],columndatas:[],copy:[],dyn_Btn_selected:[],all_count:0,filter_actions:{},all_Btn_status:!1,all_Acc_pvdrs:[],show_table:!1},a.handleToggle=function(e){switch(e){case"Account":a.setState(function(e){return e.show_table=!a.state.show_table})}},a.getList=Object(F.a)(D.a.mark(function e(){var t,n;return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=g("market"),n=t.country_code,e.next=4,a.server_time(a.time_zone);case 4:a.getListRows().then(function(e){var t=a.getListColumns();if(a.setState({lists:e,columndatas:t}),a.setState(function(t){return t.all_count=e.length}),"unmatched_credits"===a.props.list_name){if(a.setState(function(e){return e.copy=[]}),0!==e.length){var l=void 0===g([n]+"_unMatchedCredits")?a.state.all_Acc_pvdrs:g([n]+"_unMatchedCredits");a.state.all_Acc_pvdrs.map(function(t){var n=e.filter(function(e){return e.acc_prvdr_code===t}).length;a.setState(function(e){return e.filter_actions[t]=[{count:0},{status:l.includes(t)}]}),a.unMatchPaydynClickhandler(a.state.filter_actions[t][1].status,t),a.setState(function(e){return e.filter_actions[t][0].count=n})})}}else if("review_pending_payments"===a.props.list_name){if(a.setState(function(e){return e.copy=[]}),0!==e.length){var r=void 0===g([n]+"_reviewPendingPayments")?a.state.all_Acc_pvdrs:g([n]+"_reviewPendingPayments");a.state.all_Acc_pvdrs.map(function(t){var n=e.filter(function(e){return e.acc_prvdr_code===t}).length;a.setState(function(e){return e.filter_actions[t]=[{count:0},{status:r.includes(t)}]}),a.reviewPendingPaydynClickhandler(a.state.filter_actions[t][1].status,t),a.setState(function(e){return e.filter_actions[t][0].count=n})})}}else if("unmatched_debits"===a.props.list_name&&(a.setState(function(e){return e.copy=[]}),0!==e.length)){var s=void 0===g([n]+"_unMatchedDebits")?a.state.all_Acc_pvdrs:g([n]+"_unMatchedDebits");a.state.all_Acc_pvdrs.map(function(t){var n=e.filter(function(e){return e.acc_prvdr_code===t}).length;a.setState(function(e){return e.filter_actions[t]=[{count:0},{status:s.includes(t)}]}),a.unMatchDebitdynClickhandler(a.state.filter_actions[t][1].status,t),a.setState(function(e){return e.filter_actions[t][0].count=n})})}});case 5:case"end":return e.stop()}},e)})),a.getListRows=Object(F.a)(D.a.mark(function e(){var t,n,l,r;return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.server_time(a.time_zone);case 2:e.t0=a.props.list_name,e.next="unmatched_credits"===e.t0?5:"review_pending_payments"===e.t0?11:"unmatched_debits"===e.t0?17:23;break;case 5:return n={stmt_txn_type:"credit",recon_status:"unmatched_credits"},e.next=8,Gt(a.req({statement_search:n},!1,"statement_search"));case 8:if(!(t=e.sent)||"success"!==t.status){e.next=11;break}return e.abrupt("return",t.data.account_txns);case 11:return l={stmt_txn_type:"credit",recon_status:"review_pending_payments"},e.next=14,Gt(a.req({statement_search:l},!1,"statement_search"));case 14:if(!(t=e.sent)||"success"!==t.status){e.next=17;break}return e.abrupt("return",t.data.account_txns);case 17:return r={stmt_txn_type:"debit",recon_status:"unmatched_debits"},e.next=20,Gt(a.req({statement_search:r},!1,"statement_search"));case 20:if(!(t=e.sent)||"success"!==t.status){e.next=23;break}return e.abrupt("return",t.data.account_txns);case 23:case"end":return e.stop()}},e)})),a.handle_capture=function(e){return l.a.createElement(ln,{mode:"recon",title:"Review & Sync",data:e,parent:"home"})},a.getListColumns=function(){switch(a.props.list_name){case"unmatched_credits":return[{Header:"Network",accessor:"network_prvdr_code",sortable:!1,maxWidth:85,Cell:function(e){return l.a.createElement(Me,{logotype:e.value})}},{Header:"Account Number",accessor:"acc_prvdr_code",sortable:!1,width:150,Cell:function(e){return l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("div",null,l.a.createElement(Me,{logotype:e.value})),l.a.createElement("div",{style:{paddingLeft:"10px"}},e.original.acc_number))}},{Header:"Stmt Txn Date",width:125,accessor:"stmt_txn_date",Cell:function(e){return ve(e.value,!0)}},{Header:"Amount",width:130,accessor:"cr_amt",Cell:function(e){return Ne(e.value,a.currency_code)}},{Header:"Stmt Txn ID",width:110,accessor:"stmt_txn_id"},{Header:"Description",accessor:"descr",width:230,Cell:function(e){return l.a.createElement(St,{full_text:Ze(e.value),no_reduce:!0})}},{Header:"Last Updated at",width:130,sortable:!1,id:"updated_at",accessor:function(e){return l.a.createElement(At,{data:e,timedata:a.state.server_time.server_time_db,item:"last_updated_at",time_limit:[a.state.capture_payment_late1,a.state.capture_payment_late2]})}},{Header:l.a.createElement("div",{className:"text-center"},"Matching FA ID"),minWidth:140,maxWidth:200,id:"chk_fa_id",accessor:function(e){return l.a.createElement("div",{className:"text-center"}," ",a.chk_fa_id(e))}},{Header:"Recon Status",minWidth:130,maxWidth:200,id:"recon_status",accessor:function(e){return l.a.createElement(St,{full_text:Ze(e.recon_status),overlay:e.recon_desc,no_reduce:!0})}}];case"unmatched_debits":return[{Header:"Network",accessor:"network_prvdr_code",sortable:!1,maxWidth:85,Cell:function(e){return l.a.createElement(Me,{logotype:e.value})}},{Header:"Account Number",accessor:"acc_prvdr_code",sortable:!1,width:150,maxWidth:150,Cell:function(e){return l.a.createElement("div",{className:"d-flex align-items-center"}," ",l.a.createElement("div",null,l.a.createElement(Me,{logotype:e.value,style:{width:"30px",height:"20px"}})),l.a.createElement("div",{style:{paddingLeft:"10px"}},e.original.acc_number))}},{Header:"Stmt Txn Date",width:150,maxWidth:150,accessor:"stmt_txn_date",Cell:function(e){return ve(e.value,!0)}},{Header:"Amount",width:130,maxWidth:130,accessor:"dr_amt",Cell:function(e){return Ne(e.value,a.currency_code)}},{Header:"Stmt Txn ID",width:100,accessor:"stmt_txn_id"},{Header:"Description",accessor:"descr",Cell:function(e){return l.a.createElement(St,{full_text:Ze(e.value),no_reduce:!0})}},{Header:"Last Updated at",sortable:!1,width:130,maxWidth:130,id:"updated_at",accessor:function(e){return l.a.createElement(At,{data:e,timedata:a.state.server_time.server_time_db,item:"last_updated_at",time_limit:[a.state.capture_payment_late1,a.state.capture_payment_late2]})}},{Header:l.a.createElement("div",{className:"text-center"},"Matching FA ID"),minWidth:140,maxWidth:180,id:"chk_fa_id",accessor:function(e){return l.a.createElement("div",{className:"text-center"},a.chk_fa_id(e))}},{Header:"Recon Status",minWidth:140,maxWidth:200,id:"recon_status",accessor:function(e){return l.a.createElement(St,{full_text:Ze(e.recon_status),overlay:e.recon_desc,no_reduce:!0})}}];case"review_pending_payments":return[{Header:"Network",accessor:"network_prvdr_code",sortable:!1,maxWidth:85,Cell:function(e){return l.a.createElement(Me,{logotype:e.value})}},{Header:"ACC PRVDR",accessor:"acc_prvdr_code",sortable:!1,maxWidth:85,Cell:function(e){return l.a.createElement(Me,{logotype:e.value})}},{accessor:"acc_number",sortable:!1,maxWidth:130,Cell:function(e){return l.a.createElement("span",{style:{float:"left"}},e.value)}},{Header:"Stmt Txn Date",width:110,accessor:"stmt_txn_date",Cell:function(e){return ve(e.value,!0)}},{Header:"Amountx",width:120,accessor:"cr_amt",Cell:function(e){return je(Ne(e.value,a.currency_code))}},{Header:"Stmt Txn ID",width:130,accessor:"stmt_txn_id"},{Header:"Description",accessor:"descr",Cell:function(e){return l.a.createElement(St,{full_text:Ze(e.value),no_reduce:!0})}},{Header:"Last Updated at",minWxidth:190,maxWidth:190,sortable:!1,id:"updated_at",accessor:function(e){return l.a.createElement(At,{data:e,timedata:a.state.server_time.server_time_db,item:"last_updated_at",time_limit:[a.state.capture_payment_late1,a.state.capture_payment_late2]})}},{Header:"Matching FA ID",minWidth:140,maxWidth:200,id:"chk_fa_id",accessor:function(e){return a.chk_fa_id(e)}},{Header:"Review Reason",minWidth:140,maxWidth:200,id:"review_reason",accessor:function(e){return Ze(e.review_reason)}},{Header:"Action",minWidth:140,maxWidth:200,id:"recon_status",accessor:function(e){return a.handle_capture(e)}}]}},a.refreshList=Object(F.a)(D.a.mark(function e(){return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState({refresh:!0}),e.next=3,a.getList();case 3:case"end":return e.stop()}},e)})),a.getListTitle=function(){switch(a.props.list_name){case"unmatched_credits":return"Unknown Credit Txns";case"review_pending_payments":return"Review Pending Payments";case"unmatched_debits":return"Unknown Debit Txns"}},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){var e=this;setInterval(function(){return e.refreshList()},6e4),this.getList();var t=k("capture_payment_late1"),a=k("capture_payment_late2");this.setState({capture_payment_late1:t,capture_payment_late2:a});var n=g("market"),l={country_code:n.country_code,time_zone:n.time_zone,status:""};un(Object(Z.a)({},l,{status:"enabled",biz_account:!0})).then(function(t){if(t&&"success"===t.status){var a=[];t.data.list.map(function(e){return a.push(e.acc_prvdr_code)}),e.setState(function(e){return e.all_Acc_pvdrs=a})}})}},{key:"chk_fa_id",value:function(e){var t=e.loan_doc_id;e.recon_status;return t?l.a.createElement($.a,{to:"/fa/view/"+t,style:{color:"grey"},target:"_blank"},t):"NA"}},{key:"unMatchPaydynClickhandler",value:function(e,t){var a=this,n=g("market").country_code;if(e)if("ALL"!==t){-1==this.state.dyn_Btn_selected.findIndex(function(e){return e===t})&&(this.state.dyn_Btn_selected.push(t),this.setState(function(a){return a.filter_actions[t][1].status=e}),this.state.dyn_Btn_selected.length===this.state.all_Acc_pvdrs.length&&this.setState(function(e){return e.all_Btn_status=!0})),localStorage.setItem([n]+"_unMatchedCredits",JSON.stringify(this.state.dyn_Btn_selected))}else{var l=[];this.state.all_Acc_pvdrs.map(function(e){a.state.filter_actions[e][1].status=!0,l.push(e)}),this.setState(function(e){return e.dyn_Btn_selected=l}),localStorage.setItem([n]+"_unMatchedCredits",JSON.stringify(l)),this.setState(function(t){return t.all_Btn_status=e})}else if(!e)if("ALL"!==t){var r=this.state.dyn_Btn_selected.findIndex(function(e){return e===t});r>-1&&(this.state.dyn_Btn_selected.splice(r,1),this.setState(function(a){return a.filter_actions[t][1].status=e})),this.setState(function(e){return e.all_Btn_status=!1}),localStorage.setItem([n]+"_unMatchedCredits",JSON.stringify(this.state.dyn_Btn_selected))}else this.state.all_Acc_pvdrs.map(function(e){return a.state.filter_actions[e][1].status=!1}),this.setState(function(e){return e.dyn_Btn_selected=[]}),localStorage.setItem([n]+"_unMatchedCredits",JSON.stringify([])),this.setState(function(t){return t.all_Btn_status=e});var s=g([n]+"_unMatchedCredits"),c=[];s.map(function(e){var t=a.state.lists.filter(function(t){return t.acc_prvdr_code===e});c.push.apply(c,Object(ne.a)(t))}),this.setState(function(e){return e.copy=c})}},{key:"unMatchDebitdynClickhandler",value:function(e,t){var a=this,n=g("market").country_code;if(e)if("ALL"!==t){-1==this.state.dyn_Btn_selected.findIndex(function(e){return e===t})&&(this.state.dyn_Btn_selected.push(t),this.setState(function(a){return a.filter_actions[t][1].status=e}),this.state.dyn_Btn_selected.length===this.state.all_Acc_pvdrs.length&&this.setState(function(e){return e.all_Btn_status=!0})),localStorage.setItem([n]+"_unMatchedDebits",JSON.stringify(this.state.dyn_Btn_selected))}else{var l=[];this.state.all_Acc_pvdrs.map(function(e){a.state.filter_actions[e][1].status=!0,l.push(e)}),this.setState(function(e){return e.dyn_Btn_selected=l}),localStorage.setItem([n]+"_unMatchedDebits",JSON.stringify(l)),this.setState(function(t){return t.all_Btn_status=e})}else if(!e)if("ALL"!==t){var r=this.state.dyn_Btn_selected.findIndex(function(e){return e===t});r>-1&&(this.state.dyn_Btn_selected.splice(r,1),this.setState(function(a){return a.filter_actions[t][1].status=e})),this.setState(function(e){return e.all_Btn_status=!1}),localStorage.setItem([n]+"_unMatchedDebits",JSON.stringify(this.state.dyn_Btn_selected))}else this.state.all_Acc_pvdrs.map(function(e){return a.state.filter_actions[e][1].status=!1}),this.setState(function(e){return e.dyn_Btn_selected=[]}),localStorage.setItem([n]+"_unMatchedDebits",JSON.stringify([])),this.setState(function(t){return t.all_Btn_status=e});var s=g([n]+"_unMatchedDebits"),c=[];s.map(function(e){var t=a.state.lists.filter(function(t){return t.acc_prvdr_code===e});c.push.apply(c,Object(ne.a)(t))}),this.setState(function(e){return e.copy=c})}},{key:"reviewPendingPaydynClickhandler",value:function(e,t){var a=this,n=g("market").country_code;if(e)if("ALL"!==t){-1==this.state.dyn_Btn_selected.findIndex(function(e){return e===t})&&(this.state.dyn_Btn_selected.push(t),this.setState(function(a){return a.filter_actions[t][1].status=e}),this.state.dyn_Btn_selected.length===this.state.all_Acc_pvdrs.length&&this.setState(function(e){return e.all_Btn_status=!0})),localStorage.setItem([n]+"_reviewPendingPayments",JSON.stringify(this.state.dyn_Btn_selected))}else{var l=[];this.state.all_Acc_pvdrs.map(function(e){a.state.filter_actions[e][1].status=!0,l.push(e)}),this.setState(function(e){return e.dyn_Btn_selected=l}),localStorage.setItem([n]+"_reviewPendingPayments",JSON.stringify(l)),this.setState(function(t){return t.all_Btn_status=e})}else if(!e)if("ALL"!==t){var r=this.state.dyn_Btn_selected.findIndex(function(e){return e===t});r>-1&&(this.state.dyn_Btn_selected.splice(r,1),this.setState(function(a){return a.filter_actions[t][1].status=e})),this.setState(function(e){return e.all_Btn_status=!1}),localStorage.setItem([n]+"_reviewPendingPayments",JSON.stringify(this.state.dyn_Btn_selected))}else this.state.all_Acc_pvdrs.map(function(e){return a.state.filter_actions[e][1].status=!1}),this.setState(function(e){return e.dyn_Btn_selected=[]}),localStorage.setItem([n]+"_reviewPendingPayments",JSON.stringify([])),this.setState(function(t){return t.all_Btn_status=e});var s=g([n]+"_reviewPendingPayments"),c=[];s.map(function(e){var t=a.state.lists.filter(function(t){return t.acc_prvdr_code===e});c.push.apply(c,Object(ne.a)(t))}),this.setState(function(e){return e.copy=c})}},{key:"componentDidUpdate",value:function(e,t,a){e.refresh!=this.props.refresh&&this.refreshList()}},{key:"render",value:function(){var e=this;return l.a.createElement(tr.a,null,l.a.createElement(an.a,null,l.a.createElement("div",{className:"card-header card-header-icon card-header-primary home_header_d-flex_at_response justify-space-between"},"unmatched_credits"==this.props.list_name&&l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"home_header_d-flex_at_response"},l.a.createElement("h4",{className:"card-title text-white tableHead_font "},this.getListTitle()),this.state.lists.length>0&&l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"countREL card-title"},l.a.createElement("button",{className:"filterBtns allBtn_size",onClick:function(){return e.unMatchPaydynClickhandler(!e.state.all_Btn_status,"ALL")},style:{filter:this.state.all_Btn_status?"":"opacity(0.5)"}},"ALL"),l.a.createElement("div",{className:"countABS",style:{backgroundColor:this.state.all_Btn_status?"":"lightgrey"}},l.a.createElement("label",null,this.state.all_count))),this.state.all_Acc_pvdrs.map(function(t,a){return l.a.createElement("div",{key:a,className:"countREL card-title"},l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{style:{width:60,height:30},className:"filterBtns",onClick:function(){return e.unMatchPaydynClickhandler(!e.state.filter_actions[t][1].status,t)}},l.a.createElement("img",{className:"img-fluid",src:"/img/".concat(t,"_logo_color.png"),style:{filter:e.state.filter_actions[t]&&!e.state.filter_actions[t][1].status?"opacity(0.5)":""}})),l.a.createElement("div",{className:"countABS",style:{backgroundColor:e.state.filter_actions[t]&&!e.state.filter_actions[t][1].status?"lightgrey":""}},l.a.createElement("label",null,e.state.filter_actions[t]&&e.state.filter_actions[t][0].count))))}))),l.a.createElement(tr.a.Toggle,{className:"col",as:an.a.Header,eventKey:"0",onClick:function(){return e.handleToggle("Account")}},l.a.createElement(nr.a,{className:this.state.show_table?"arrow-icon down":"arrow-icon",size:"18"}))),"unmatched_debits"==this.props.list_name&&l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"home_header_d-flex_at_response"},l.a.createElement("h4",{className:"card-title text-white tableHead_font  "},this.getListTitle()),l.a.createElement("br",null),this.state.lists.length>0&&l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"countREL card-title"},l.a.createElement("button",{className:"filterBtns allBtn_size",onClick:function(){return e.unMatchDebitdynClickhandler(!e.state.all_Btn_status,"ALL")},style:{filter:this.state.all_Btn_status?"":"opacity(0.5)"}},"ALL"),l.a.createElement("div",{className:"countABS",style:{backgroundColor:this.state.all_Btn_status?"":"lightgrey"}},l.a.createElement("label",null,this.state.all_count))),this.state.all_Acc_pvdrs.map(function(t,a){return l.a.createElement("div",{key:a,className:"countREL card-title"},l.a.createElement("div",{style:{width:60,height:30},className:"filterBtns",onClick:function(){return e.unMatchDebitdynClickhandler(!e.state.filter_actions[t][1].status,t)}},l.a.createElement("img",{className:"img-fluid",src:"/img/".concat(t,"_logo_color.png"),style:{filter:e.state.filter_actions[t]&&!e.state.filter_actions[t][1].status?"opacity(0.5)":""}})),l.a.createElement("div",{className:"countABS",style:{backgroundColor:e.state.filter_actions[t]&&!e.state.filter_actions[t][1].status?"lightgrey":""}},l.a.createElement("label",null,e.state.filter_actions[t]&&e.state.filter_actions[t][0].count)))}))),l.a.createElement(tr.a.Toggle,{className:"col",as:an.a.Header,eventKey:"0",onClick:function(){return e.handleToggle("Account")}},l.a.createElement(nr.a,{className:this.state.show_table?"arrow-icon down":"arrow-icon",size:"18"}))),"review_pending_payments"==this.props.list_name&&l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"home_header_d-flex_at_response"},l.a.createElement("h4",{className:"card-title text-white tableHead_font card-body title-bottom"},this.getListTitle()),l.a.createElement("br",null),this.state.lists.length>0&&l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"countREL card-title"},l.a.createElement("button",{className:"filterBtns allBtn_size",onClick:function(){return e.reviewPendingPaydynClickhandler(!e.state.all_Btn_status,"ALL")},style:{filter:this.state.all_Btn_status?"":"opacity(0.5)"}},"ALL"),l.a.createElement("div",{className:"countABS",style:{backgroundColor:this.state.all_Btn_status?"":"lightgrey"}},l.a.createElement("label",null,this.state.all_count))),this.state.all_Acc_pvdrs.map(function(t,a){return l.a.createElement("div",{key:a,className:"countREL card-title"},l.a.createElement("div",{style:{width:60,height:30},className:"filterBtns",onClick:function(){return e.reviewPendingPaydynClickhandler(!e.state.filter_actions[t][1].status,t)}},l.a.createElement("img",{className:"img-fluid",src:"/img/".concat(t,"_logo_color.png"),style:{filter:e.state.filter_actions[t]&&!e.state.filter_actions[t][1].status?"opacity(0.5)":""}})),l.a.createElement("div",{className:"countABS",style:{backgroundColor:e.state.filter_actions[t]&&!e.state.filter_actions[t][1].status?"lightgrey":""}},l.a.createElement("label",null,e.state.filter_actions[t]&&e.state.filter_actions[t][0].count)))}))),l.a.createElement(tr.a.Toggle,{className:"col",as:an.a.Header,eventKey:"0",onClick:function(){return e.handleToggle("Account")}},l.a.createElement(nr.a,{className:this.state.show_table?"arrow-icon down":"arrow-icon",size:"18"})))),l.a.createElement("div",{className:"card-body no-padding",style:{padding:"0 !important"}},this.state.server_time&&l.a.createElement(tr.a.Collapse,{eventKey:"0"},l.a.createElement(an.a.Body,null,l.a.createElement(ua,{showPag:!0,minRow:0,row_data:void 0!==this.state.copy?this.state.copy:[],column_data:this.state.columndatas,defaultSorted:[{id:"stmt_txn_date",desc:!0}],resizable:!1,defaultPageSize:10,timeServer:this.state.server_time.server_time_db,excessTimeaction:!0,appliedRowblink:!1,paymentRowblinktime:this.state.capture_payment_late2,exportCSV:"review_pending_payments"!==this.props.list_name,csvData:void 0!==this.state.copy?this.state.copy:[],csvFile:this.getListTitle(),csvstyle:!0}))))))}}]),t}(ct),oc=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={columns:[],lists:[],copy:[],refresh:!1,dyn_Btn_selected:[],all_count:0,filter_actions:{},all_Btn_status:!1,all_Acc_pvdrs:[],modal:!1,sortVariable:"",defaultSortOrder:!0,disb_manually:!0,show_table:!1},a.handleToggle=function(e){switch(e){case"Account":a.setState(function(e){return e.show_table=!a.state.show_table})}},a.getListData=function(){var e=k("fa_rm_approval_late1"),t=k("fa_rm_approval_late2"),n=k("fa_late1"),l=k("fa_late2"),r=k("fa_cust_late1"),s=k("fa_cust_late2");a.setState({fa_rm_approval_late1:e,fa_rm_approval_late2:t,fa_late1:n,fa_late2:l,fa_cust_late1:r,fa_cust_late2:s});var c=g("market").country_code;a.server_time(a.time_zone),a.getListRows().then(function(e){var t=a.getListColumns();if(a.setState({lists:e,columns:t,refresh:!1}),a.setState(function(t){return t.all_count=e.length}),"pending_w_cust"===a.props.list_name){if(a.setState(function(e){return e.copy=[]}),0!==e.length){var n=void 0===g([c]+"_pendingCUS")?a.state.all_Acc_pvdrs:g([c]+"_pendingCUS");a.state.all_Acc_pvdrs.map(function(t){var l=e.filter(function(e){return e.acc_prvdr_code===t}).length;a.setState(function(e){return e.filter_actions[t]=[{count:0},{status:n.includes(t)}]}),a.CUSdynClickhandler(a.state.filter_actions[t][1].status,t),a.setState(function(e){return e.filter_actions[t][0].count=l})})}}else if("pending_w_rm"===a.props.list_name){if(a.setState(function(e){return e.copy=[]}),0!==e.length){var l=void 0===g([c]+"_pendingRM")?a.state.all_Acc_pvdrs:g([c]+"_pendingRM");a.state.all_Acc_pvdrs.map(function(t){var n=e.filter(function(e){return e.acc_prvdr_code===t}).length;a.setState(function(e){return e.filter_actions[t]=[{count:0},{status:l.includes(t)}]}),a.RMdynClickhandler(a.state.filter_actions[t][1].status,t),a.setState(function(e){return e.filter_actions[t][0].count=n})})}}else if("active_cust_without_fa"===a.props.list_name){if(0!==e.length){var r=void 0===g([c]+"_withoutFa")?a.state.all_Acc_pvdrs:g([c]+"_withoutFa");a.state.all_Acc_pvdrs.map(function(t){var n=e.filter(function(e){return e.acc_prvdr_code===t}).length;a.setState(function(e){return e.filter_actions[t]=[{count:0},{status:r.includes(t)}]}),a.CustWithOutFaClickhandler(a.state.filter_actions[t][1].status,t),a.setState(function(e){return e.filter_actions[t][0].count=n})})}}else if("pending_capture_disbursal"===a.props.list_name&&(a.setState(function(e){return e.copy=[]}),0!==e.length)){var s=void 0===g([c]+"_faPendingdisbcapture")?a.state.all_Acc_pvdrs:g([c]+"_faPendingdisbcapture");a.state.all_Acc_pvdrs.map(function(t){var n=e.filter(function(e){return e.acc_prvdr_code===t}).length;a.setState(function(e){return e.filter_actions[t]=[{count:0},{status:s.includes(t)}]}),a.FAPendingCaptureClickhandler(a.state.filter_actions[t][1].status,t),a.setState(function(e){return e.filter_actions[t][0].count=n})})}})},a.getListRows=Object(F.a)(D.a.mark(function e(){var t,n,l,r,s;return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(a.props.list_name),e.next=3,a.server_time(a.time_zone);case 3:e.t0=a.props.list_name,e.next="pending_w_cust"===e.t0?6:"pending_w_rm"===e.t0?14:"active_cust_without_fa"===e.t0?22:"pending_capture_disbursal"===e.t0?30:38;break;case 6:return n={pending_w_cust:"true",mode:"search",alert:!1},e.next=9,Oa(a.req({loan_search_criteria:n}));case 9:if(t=e.sent,a.setState(function(e){return e.sortVariable="loan_doc_id"}),!t||"success"!==t.status){e.next=13;break}return e.abrupt("return",t.data.results);case 13:return e.abrupt("break",38);case 14:return l={pending_w_rm:"true"},e.next=17,pl(a.req({loan_appl_search_criteria:l}));case 17:if(t=e.sent,a.setState(function(e){return e.sortVariable="loan_doc_id"}),!t||"success"!==t.status){e.next=21;break}return e.abrupt("return",t.data);case 21:return e.abrupt("break",38);case 22:return r={active_cust:"true",not_have_ongoing_loan:"true",not_have_overdue_loan:"true",not_have_pending_loan_appl:"true",profile_status:"open",status:"enabled"},e.next=25,xl(a.req({borrower_search_criteria:r}));case 25:if(t=e.sent,a.setState(function(e){return e.sortVariable="row"}),a.setState(function(e){return e.defaultSortOrder=!1}),!t||"success"!==t.status){e.next=30;break}return e.abrupt("return",t.data.results);case 30:return s={status:"pending_disb_capture",disburse_attempt:!0,mode:"search"},e.next=33,ja(a.req({loan_search_criteria:s}));case 33:if(t=e.sent,a.setState(function(e){return e.sortVariable="row"}),a.setState(function(e){return e.defaultSortOrder=!1}),!t||"success"!==t.status){e.next=38;break}return e.abrupt("return",t.data.results);case 38:case"end":return e.stop()}},e)})),a.getListColumns=function(){var e=b("customer","risk_category");switch(a.props.list_name){case"pending_w_cust":return[{Header:"ACC PRVDR",id:"acc_prvdr_code",sortable:!1,maxWidth:85,accessor:function(e){return l.a.createElement(Me,{logotype:e.acc_prvdr_code})}},{Header:"FA ID",id:"loan_doc_id",sortable:!1,accessor:function(e){return l.a.createElement($.a,{to:"fa/view/"+e.loan_doc_id,target:"_blank"},e.loan_doc_id)}},{Header:"A/C Number",sortable:!1,maxWidth:250,id:"acc_number",accessor:function(e){return l.a.createElement($.a,{to:"/borrower/indiv/view/"+e.cust_id,target:"_blank"},e.acc_number)}},{Header:l.a.createElement(l.a.Fragment,null,"Biz Name &",l.a.createElement("br",null),"Mobile Number"),id:"biz_name",maxWidth:300,sortMethod:function(e,t){return a.sortBiz(e,t)},accessor:function(e){return l.a.createElement("div",null,l.a.createElement(St,{full_text:e.biz_name,overlay:e.cust_name,no_reduce:!0}),l.a.createElement("label",{className:"no-margin d-block"},e.cust_mobile_num))}},{Header:function(){return l.a.createElement("div",{className:"tableAmount_rightAlign",style:{paddingRight:15}},"FA Amount")},id:"loan_principal",sortMethod:function(e,t){return a.sortAmount(e,t)},accessor:function(e){return l.a.createElement("div",{className:"tableAmount_rightAlign",style:{paddingRight:15}},Ne(e.loan_principal,a.currency_code))}},{Header:"Applied & Approved",id:"loan_appl_date",minWidth:210,maxWidth:275,sortMethod:function(e,t){return a.sortTime(e,t)},accessor:function(e){return l.a.createElement("div",null,l.a.createElement("span",null,"Applied : ",l.a.createElement(At,{data:e,timedata:a.state.server_time.server_time_db,item:"applied",time_limit:[a.state.fa_late1,a.state.fa_late2]})),l.a.createElement("br",null),l.a.createElement("span",null,"Approved : ",l.a.createElement(At,{data:e,timedata:a.state.server_time.server_time_db,item:"approved",time_limit:[a.state.fa_cust_late1,a.state.fa_cust_late2]})))}},{Header:function(){return l.a.createElement("div",{className:"tableAmount_centerAlign"},"Next Action")},id:"action",width:190,accessor:function(e){return l.a.createElement(At,{data:e,timedata:a.state.server_time.server_time_db,item:"next_action_conf",action:a.handleOpen,time_limit:[a.state.fa_late1,a.state.fa_late2]})}}];case"pending_w_rm":return[{Header:"ACC PRVDR",id:"acc_prvdr_code",sortable:!1,maxWidth:85,accessor:function(e){return l.a.createElement(Me,{logotype:e.acc_prvdr_code})}},{Header:"FA Application ID",sortable:!1,id:"loan_appl_doc_id",accessor:function(e){return l.a.createElement($.a,{to:"/fa_appl/view/"+e.loan_appl_doc_id,target:"_blank"},e.loan_appl_doc_id)}},{Header:"A/C Number",sortable:!1,id:"acc_number",accessor:function(e){return l.a.createElement($.a,{to:"/borrower/indiv/view/"+e.cust_id,target:"_blank"},e.acc_number)}},{Header:"Mobile Number",sortable:!1,id:"cust_mobile_num",accessor:function(e){return e.cust_mobile_num}},{Header:"Biz Name",sortMethod:function(e,t){return a.sortBiz(e,t)},id:"biz_name",accessor:function(e){return l.a.createElement(St,{full_text:e.biz_name,overlay:e.cust_name,no_reduce:!0})}},{Header:function(){return l.a.createElement("div",{className:"tableAmount_rightAlign",style:{paddingRight:15}},"FA Amount")},id:"loan_principal",sortMethod:function(e,t){return a.sortAmount(e,t)},accessor:function(e){return l.a.createElement("div",{className:"tableAmount_rightAlign",style:{paddingRight:15}},Ne(e.loan_principal,a.currency_code))}},{Header:"Applied",sortMethod:function(e,t){return a.sortTime(e,t)},id:"loan_appl_date",accessor:function(e){return l.a.createElement(At,{data:e,timedata:a.state.server_time.server_time_db,item:"applied",time_limit:[a.state.fa_rm_approval_late1,a.state.fa_rm_approval_late2]})}},{Header:"Next Action",id:"loan_approver_name",sortable:!1,accessor:function(e){return l.a.createElement(At,{data:e,timedata:a.state.server_time.server_time_db,item:"next_action",time_limit:[a.state.fa_rm_approval_late1,a.state.fa_rm_approval_late2]})}}];case"active_cust_without_fa":return[{Header:"SI No.",id:"row",Cell:function(e){return l.a.createElement("div",null,e.index+1)}},{Header:"ACC PRVDR",id:"acc_prvdr_code",sortable:!1,accessor:function(e){return l.a.createElement(Me,{logotype:e.acc_prvdr_code})}},{Header:"FLOW Cust ID",id:"cust_id",sortable:!1,accessor:function(e){return l.a.createElement($.a,{to:"/borrower/indiv/view/"+e.cust_id,target:"_blank",className:"flow_custid"},e.cust_id)}},{Header:"A/C Number",id:"acc_number",sortable:!1,accessor:function(e){return e.acc_number}},{Header:"Category",id:"category",accessor:function(e){return e.category}},{Header:"Business Name",id:"biz_name",sortMethod:function(e,t){return a.sortBiz(e,t)},accessor:function(e){return l.a.createElement(St,{full_text:e.biz_name,overlay:ye(e)})}},{Header:"RM Name",id:"flow_rel_mgr_name",accessor:function(e){return e.flow_rel_mgr_name}},{Header:"Reg RM Name",id:"reg_flow_rel_mgr_name",accessor:function(e){return e.reg_flow_rel_mgr_name}},{Header:"Total FAs",id:"tot_loans",accessor:function(e){return e.tot_loans?e.tot_loans:0}},{Header:"Reg Date",id:"reg_date",sortMethod:function(e,t){return a.sortDate(e,t)},accessor:function(e){return e.reg_date?l.a.createElement("span",null,ge(e.reg_date)):"NA"}},{Header:"Last Visit",id:"last_visit_date",sortMethod:function(e,t){return a.sortDate(e,t)},accessor:function(e){return e.last_visit_date?l.a.createElement("span",null,ge(e.last_visit_date)):"NA"}},{Header:"Last FA",id:"last_loan_date",sortMethod:function(e,t){return a.sortDate(e,t)},accessor:function(e){return e.last_loan_date?l.a.createElement("span",null,ge(e.last_loan_date)):"NA"}},{Header:"Cond Count",id:"cond_count",accessor:function(e){return e.cond_count}},{Header:"Territory",id:"territory",accessor:function(e){return Ze(e.territory)}},{Header:"Location",id:"location",accessor:function(e){return Ze(e.location)}},{Header:"Profile Status",id:"profile_status",accessor:function(e){return Ze(e.profile_status)}},{Header:"Risk Category",id:"risk_category",show:e,accessor:function(t){return e&&Ze(t.risk_category)}}];case"pending_capture_disbursal":return[{Header:"ACC PRVDR",id:"acc_prvdr_code",sortable:!1,maxWidth:85,accessor:function(e){return l.a.createElement(Me,{logotype:e.acc_prvdr_code})}},{Header:"FA ID & A/C Number",id:"loan_doc_id",minWidth:125,sortable:!1,accessor:function(e){return l.a.createElement("div",null,l.a.createElement($.a,{className:"d-block",to:"/fa/view/"+e.loan_doc_id,target:"_blank"},e.loan_doc_id),l.a.createElement($.a,{className:"d-block",to:"/borrower/indiv/view/"+e.cust_id,target:"_blank"},e.acc_number))}},{Header:l.a.createElement(l.a.Fragment,null,"Biz Name",l.a.createElement("br",null),"& Mobile Number"),id:"cust_mobile_num",sortMethod:function(e,t){return a.sortBiz(e,t)},minWidth:125,maxWidth:125,accessor:function(e){return l.a.createElement("div",null,l.a.createElement(St,{className:"d-block",full_text:e.biz_name,overlay:"".concat(e.cust_name," / ").concat(Ne(e.loan_principal,a.currency_code)),no_reduce:!0}),l.a.createElement("label",{className:"no-margin d-block"},e.cust_mobile_num))}},{Header:"Applied & Approved",id:"loan_appl_date",width:170,sortable:!1,accessor:function(e){return l.a.createElement("div",null,l.a.createElement("span",null,"Applied :  ",l.a.createElement(At,{data:e,timedata:a.state.server_time.server_time_db,item:"applied",time_limit:[a.state.fa_late1,a.state.fa_late2]})),l.a.createElement("br",null),l.a.createElement("span",null,"Approved :  ",l.a.createElement(At,{data:e,timedata:a.state.server_time.server_time_db,item:"approved",time_limit:[a.state.fa_late1,a.state.fa_late2]})))}},{Header:l.a.createElement("div",{style:{paddingLeft:15}},"Attempted"),id:"first_attempt_time",minWidth:190,maxWidth:190,sortable:!1,accessor:function(e){return l.a.createElement("div",{style:{paddingLeft:15}},e.attempts>1?l.a.createElement(l.a.Fragment,null,e.first_attempt_time&&l.a.createElement(l.a.Fragment,null,l.a.createElement("span",null,"First Attempt : ",l.a.createElement(At,{data:e,timedata:a.state.server_time.server_time_db,item:"first_attempt_time",time_limit:[a.state.fa_late1,a.state.fa_late2]})),l.a.createElement("br",null)),e.attempt_time&&l.a.createElement(l.a.Fragment,null,l.a.createElement("span",null,"Last Attempt"," ("+e.attempts+")"," : ",l.a.createElement(At,{data:e,timedata:a.state.server_time.server_time_db,item:"last_attempt_time",time_limit:[a.state.fa_late1,a.state.fa_late2]})))):l.a.createElement("span",null,l.a.createElement("span",{style:{display:1===e.attempts?"inline-flex":"none"}},"Attempted :"),l.a.createElement(At,{data:e,timedata:a.state.server_time.server_time_db,item:"first_attempt_time",time_limit:[a.state.fa_late1,a.state.fa_late2]})))}},{Header:l.a.createElement(l.a.Fragment,null,"FA Status",l.a.createElement("br",null),"Disbursal Status"),id:"status",minWidth:140,maxWidth:200,sortable:!1,accessor:function(e){return l.a.createElement("div",null,l.a.createElement("span",null,Ze(e.status)),l.a.createElement("br",null),null!=e.disbursal_status?l.a.createElement(se.a,{placement:"auto",trigger:["hover","focus"],overlay:l.a.createElement(ce.a,{style:{fontSize:"15px",padding:"15px",color:"mediumblue",fontFamily:"Montserrat"}},"Float Transferred. Not Captured on Flow App")},l.a.createElement("span",null,ue(e.disbursal_status||"not_initiated")," ",l.a.createElement("sup",null,l.a.createElement(oe.a,{size:14})))):l.a.createElement(l.a.Fragment,null))}},{Header:function(){return l.a.createElement("div",{className:"text-center"},"Action")},sortable:!1,id:"btn",minWidth:120,accessor:function(e){return a.buttonName(e)}},{Header:function(){return l.a.createElement("div",{className:"text-center"},"Action")},sortable:!1,id:"bttn",minWidth:120,accessor:function(e){return l.a.createElement("div",{className:"text-center"},b("loan","home_screen_cancel_btn")&&l.a.createElement("button",{className:"btn-primary no-padding",style:{margin:"10px !important"},onClick:function(){return a.cancelLoan(e.loan_doc_id)}},"Cancel this FA"))}}]}},a.cancelLoan=function(e){if(0!=window.confirm("Are you sure to cancel FA?")){var t={cancel_loan:{loan_doc_id:e,ignore_consent_check:!0}};console.log("cancel->"+t),Ma(a.req(t)).then(function(e){e&&"success"===e.status&&window.location.reload()})}},a.buttonName=function(e){var t;if("pending_disb_capture"==e.disbursal_status)t=l.a.createElement(nc,{id:"disbursal_txn",data:e,title:"Disbursal Loan"});else if("pending_mnl_dsbrsl"==e.status){var n=e;n.amount=e.loan_principal,t=l.a.createElement("div",{className:"text-center"},b("loan","disburse_manually")&&l.a.createElement(ys,{id:"disbursal_txn",data:n,parent:"home",disabled:a.state.calling_api,onStatusChange:a.refreshList,onDisburseClick:function(e){return a.setState({disb_manually:e})}}))}return t},a.refreshList=function(){a.setState({refresh:!0}),a.getListData()},a.handleClose=function(){a.setState({modal:!1})},a.handleOpen=function(e,t){var n={cust_id:e,call_type:"outgoing"};Pl(a.req({call_log:n})).then(function(t){if(a.resp(t),t)if("success"===t.status){var n=t.data,l=!0;"lastcall"==n.action&&(l=window.confirm(n.message)),l&&n.call_log_id&&a.setState({modal:!0,call_cust_id:e,call_id:n.call_log_id})}else alert(t.message+"\n"+JSON.stringify(t.data))})},a.getListTitle=function(){switch(a.props.list_name){case"pending_w_cust":return"FAs Pending Customer Confirmation";case"pending_w_rm":return"FAs Pending RM Approval";case"active_cust_without_fa":return"Active Customers Without FA";case"pending_capture_disbursal":return"FAs with Pending Capture/Manual Disbursal"}},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){var e=this;this.getListData();var t=g("market"),a={country_code:t.country_code,time_zone:t.time_zone,status:""};un(Object(Z.a)({},a,{status:"enabled",biz_account:!0})).then(function(t){if(t&&"success"===t.status){var a=[];t.data.list.map(function(e){return a.push(e.acc_prvdr_code)}),e.setState(function(e){return e.all_Acc_pvdrs=a})}})}},{key:"RMdynClickhandler",value:function(e,t){var a=this,n=g("market"),l=n.country_code;if(e)if("ALL"!==t){-1==this.state.dyn_Btn_selected.findIndex(function(e){return e===t})&&(this.state.dyn_Btn_selected.push(t),this.setState(function(a){return a.filter_actions[t][1].status=e}),this.state.dyn_Btn_selected.length===this.state.all_Acc_pvdrs.length&&this.setState(function(e){return e.all_Btn_status=!0})),localStorage.setItem([l]+"_pendingRM",JSON.stringify(this.state.dyn_Btn_selected))}else{var r=[];this.state.all_Acc_pvdrs.map(function(e){a.state.filter_actions[e][1].status=!0,r.push(e)}),this.setState(function(e){return e.dyn_Btn_selected=r});var s=n.country_code;localStorage.setItem([s]+"_pendingRM",JSON.stringify(r)),this.setState(function(t){return t.all_Btn_status=e})}else if(!e)if("ALL"!==t){var c=this.state.dyn_Btn_selected.findIndex(function(e){return e===t});c>-1&&(this.state.dyn_Btn_selected.splice(c,1),this.setState(function(a){return a.filter_actions[t][1].status=e})),this.setState(function(e){return e.all_Btn_status=!1}),localStorage.setItem([l]+"_pendingRM",JSON.stringify(this.state.dyn_Btn_selected))}else this.state.all_Acc_pvdrs.map(function(e){return a.state.filter_actions[e][1].status=!1}),this.setState(function(e){return e.dyn_Btn_selected=[]}),localStorage.setItem([l]+"_pendingRM",JSON.stringify([])),this.setState(function(t){return t.all_Btn_status=e});var o=g([l]+"_pendingRM"),i=[];o.map(function(e){var t=a.state.lists.filter(function(t){return t.acc_prvdr_code===e});i.push.apply(i,Object(ne.a)(t))}),this.setState(function(e){return e.copy=i})}},{key:"CUSdynClickhandler",value:function(e,t){var a=this,n=g("market").country_code;if(e)if("ALL"!==t){-1==this.state.dyn_Btn_selected.findIndex(function(e){return e===t})&&(this.state.dyn_Btn_selected.push(t),this.setState(function(a){return a.filter_actions[t][1].status=e}),this.state.dyn_Btn_selected.length===this.state.all_Acc_pvdrs.length&&this.setState(function(e){return e.all_Btn_status=!0})),localStorage.setItem([n]+"_pendingCUS",JSON.stringify(this.state.dyn_Btn_selected))}else{var l=[];this.state.all_Acc_pvdrs.map(function(e){a.state.filter_actions[e][1].status=!0,l.push(e)}),this.setState(function(e){return e.dyn_Btn_selected=l}),localStorage.setItem([n]+"_pendingCUS",JSON.stringify(l)),this.setState(function(t){return t.all_Btn_status=e})}else if(!e)if("ALL"!==t){var r=this.state.dyn_Btn_selected.findIndex(function(e){return e===t});r>-1&&(this.state.dyn_Btn_selected.splice(r,1),this.setState(function(a){return a.filter_actions[t][1].status=e})),this.setState(function(e){return e.all_Btn_status=!1}),localStorage.setItem([n]+"_pendingCUS",JSON.stringify(this.state.dyn_Btn_selected))}else this.state.all_Acc_pvdrs.map(function(e){return a.state.filter_actions[e][1].status=!1}),this.setState(function(e){return e.dyn_Btn_selected=[]}),localStorage.setItem([n]+"_pendingCUS",JSON.stringify([])),this.setState(function(t){return t.all_Btn_status=e});var s=g([n]+"_pendingCUS"),c=[];s.map(function(e){var t=a.state.lists.filter(function(t){return t.acc_prvdr_code===e});c.push.apply(c,Object(ne.a)(t))}),this.setState(function(e){return e.copy=c})}},{key:"CustWithOutFaClickhandler",value:function(e,t){var a=this,n=g("market").country_code;if(e)if("ALL"!==t){-1==this.state.dyn_Btn_selected.findIndex(function(e){return e===t})&&(this.state.dyn_Btn_selected.push(t),this.setState(function(a){return a.filter_actions[t][1].status=e}),this.state.dyn_Btn_selected.length===this.state.all_Acc_pvdrs.length&&this.setState(function(e){return e.all_Btn_status=!0})),localStorage.setItem([n]+"_withoutFa",JSON.stringify(this.state.dyn_Btn_selected))}else{var l=[];this.state.all_Acc_pvdrs.map(function(e){a.state.filter_actions[e][1].status=!0,l.push(e)}),this.setState(function(e){return e.dyn_Btn_selected=l}),localStorage.setItem([n]+"_withoutFa",JSON.stringify(l)),this.setState(function(t){return t.all_Btn_status=e})}else if(!e)if("ALL"!==t){var r=this.state.dyn_Btn_selected.findIndex(function(e){return e===t});r>-1&&(this.state.dyn_Btn_selected.splice(r,1),this.setState(function(a){return a.filter_actions[t][1].status=e})),this.setState(function(e){return e.all_Btn_status=!1}),localStorage.setItem([n]+"_withoutFa",JSON.stringify(this.state.dyn_Btn_selected))}else this.state.all_Acc_pvdrs.map(function(e){return a.state.filter_actions[e][1].status=!1}),this.setState(function(e){return e.dyn_Btn_selected=[]}),localStorage.setItem([n]+"_withoutFa",JSON.stringify([])),this.setState(function(t){return t.all_Btn_status=e});var s=g([n]+"_withoutFa"),c=[];s.map(function(e){var t=a.state.lists.filter(function(t){return t.acc_prvdr_code===e});c.push.apply(c,Object(ne.a)(t))}),this.setState(function(e){return e.copy=c})}},{key:"FAPendingCaptureClickhandler",value:function(e,t){var a=this,n=g("market").country_code;if(e)if("ALL"!==t){-1==this.state.dyn_Btn_selected.findIndex(function(e){return e===t})&&(this.state.dyn_Btn_selected.push(t),this.setState(function(a){return a.filter_actions[t][1].status=e}),this.state.dyn_Btn_selected.length===this.state.all_Acc_pvdrs.length&&this.setState(function(e){return e.all_Btn_status=!0})),localStorage.setItem([n]+"_faPendingdisbcapture",JSON.stringify(this.state.dyn_Btn_selected))}else{var l=[];this.state.all_Acc_pvdrs.map(function(e){a.state.filter_actions[e][1].status=!0,l.push(e)}),this.setState(function(e){return e.dyn_Btn_selected=l}),localStorage.setItem([n]+"_faPendingdisbcapture",JSON.stringify(l)),this.setState(function(t){return t.all_Btn_status=e})}else if(!e)if("ALL"!==t){var r=this.state.dyn_Btn_selected.findIndex(function(e){return e===t});r>-1&&(this.state.dyn_Btn_selected.splice(r,1),this.setState(function(a){return a.filter_actions[t][1].status=e})),this.setState(function(e){return e.all_Btn_status=!1}),localStorage.setItem([n]+"_faPendingdisbcapture",JSON.stringify(this.state.dyn_Btn_selected))}else this.state.all_Acc_pvdrs.map(function(e){return a.state.filter_actions[e][1].status=!1}),this.setState(function(e){return e.dyn_Btn_selected=[]}),localStorage.setItem([n]+"_faPendingdisbcapture",JSON.stringify([])),this.setState(function(t){return t.all_Btn_status=e});var s=g([n]+"_faPendingdisbcapture"),c=[];s.map(function(e){var t=a.state.lists.filter(function(t){return t.acc_prvdr_code===e});c.push.apply(c,Object(ne.a)(t))}),this.setState(function(e){return e.copy=c})}},{key:"sortBiz",value:function(e,t){return Pr(e.props.full_text,t.props.full_text)}},{key:"sortAmount",value:function(e,t){return Mr(e.props.children,t.props.children)}},{key:"sortTime",value:function(e,t){var a=e.props.data.loan_appl_date,n=t.props.data.loan_appl_date,l=this.state.server_time.server_time_db;return Br(a,n,l)}},{key:"componentDidUpdate",value:function(e,t,a){e.refresh!=this.props.refresh&&1==this.state.disb_manually&&this.refreshList()}},{key:"render",value:function(){var e=this;return l.a.createElement(l.a.Fragment,null,"pending_w_cust"==this.props.list_name&&l.a.createElement(nt.a,{dialogClassName:"rec-form-modal",show:this.state.modal,onHide:this.handleClose},l.a.createElement(nt.a.Body,{closeButton:!0},l.a.createElement(Hl,{is_conf:!0,match:{params:{id:this.state.call_id,cust_id:this.state.call_cust_id}},onComplete:function(){return window.location.reload()},onCancel:function(){return e.setState({modal:!1})}}))),l.a.createElement(tr.a,null,l.a.createElement(an.a,null,l.a.createElement("div",{className:"card-header card-header-icon card-header-primary home_header_d-flex_at_response justify-space-between"},"pending_w_cust"==this.props.list_name&&l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"home_header_d-flex_at_response"},l.a.createElement("h4",{className:"card-title text-white tableHead_font "},this.getListTitle()),this.state.lists.length>0&&l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"countREL card-title"},l.a.createElement("button",{className:"filterBtns allBtn_size",onClick:function(){return e.CUSdynClickhandler(!e.state.all_Btn_status,"ALL")},style:{filter:this.state.all_Btn_status?"":"opacity(0.5)"}},"ALL"),l.a.createElement("div",{className:"countABS",style:{backgroundColor:this.state.all_Btn_status?"":"lightgrey"}},l.a.createElement("label",null,this.state.all_count))),this.state.all_Acc_pvdrs.map(function(t,a){return l.a.createElement("div",{key:a,className:"countREL card-title"},l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{style:{width:60,height:30},className:"filterBtns",onClick:function(){return e.CUSdynClickhandler(!e.state.filter_actions[t][1].status,t)}},l.a.createElement("img",{className:"img-fluid",src:"/img/".concat(t,"_logo_color.png"),style:{filter:e.state.filter_actions[t]&&!e.state.filter_actions[t][1].status?"opacity(0.5)":""}})),l.a.createElement("div",{className:"countABS",style:{backgroundColor:e.state.filter_actions[t]&&!e.state.filter_actions[t][1].status?"lightgrey":""}},l.a.createElement("label",null,e.state.filter_actions[t]&&e.state.filter_actions[t][0].count))))}))),l.a.createElement(tr.a.Toggle,{className:"col",as:an.a.Header,eventKey:"0",onClick:function(){return e.handleToggle("Account")}},l.a.createElement(nr.a,{className:this.state.show_table?"arrow-icon down":"arrow-icon",size:"18"}))),"pending_w_rm"===this.props.list_name&&l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"home_header_d-flex_at_response"},l.a.createElement("h4",{className:"card-title text-white tableHead_font "},this.getListTitle()),this.state.lists.length>0&&l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"countREL card-title"},l.a.createElement("button",{className:"filterBtns allBtn_size",onClick:function(){return e.RMdynClickhandler(!e.state.all_Btn_status,"ALL")},style:{filter:this.state.all_Btn_status?"":"opacity(0.5)"}},"ALL"),l.a.createElement("div",{className:"countABS",style:{backgroundColor:this.state.all_Btn_status?"":"lightgrey"}},l.a.createElement("label",null,this.state.all_count))),this.state.all_Acc_pvdrs.map(function(t,a){return l.a.createElement("div",{key:a,className:"countREL card-title"},l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{style:{width:60,height:30},className:"filterBtns",onClick:function(){return e.RMdynClickhandler(!e.state.filter_actions[t][1].status,t)}},l.a.createElement("img",{className:"img-fluid",src:"/img/".concat(t,"_logo_color.png"),style:{filter:e.state.filter_actions[t]&&!e.state.filter_actions[t][1].status?"opacity(0.5)":""}})),l.a.createElement("div",{className:"countABS",style:{backgroundColor:e.state.filter_actions[t]&&!e.state.filter_actions[t][1].status?"lightgrey":""}},l.a.createElement("label",null,e.state.filter_actions[t]&&e.state.filter_actions[t][0].count))))}))),l.a.createElement(tr.a.Toggle,{className:"col",as:an.a.Header,eventKey:"0",onClick:function(){return e.handleToggle("Account")}},l.a.createElement(nr.a,{className:this.state.show_table?"arrow-icon down":"arrow-icon",size:"18"}))),"active_cust_without_fa"===this.props.list_name&&l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"home_header_d-flex_at_response"},l.a.createElement("h4",{className:"card-title text-white tableHead_font "},this.getListTitle()),this.state.lists.length>0&&l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"countREL card-title"},l.a.createElement("button",{className:"filterBtns allBtn_size",onClick:function(){return e.CustWithOutFaClickhandler(!e.state.all_Btn_status,"ALL")},style:{filter:this.state.all_Btn_status?"":"opacity(0.5)"}},"ALL"),l.a.createElement("div",{className:"countABS",style:{backgroundColor:this.state.all_Btn_status?"":"lightgrey"}},l.a.createElement("label",null,this.state.all_count))),this.state.all_Acc_pvdrs.map(function(t,a){return l.a.createElement("div",{key:a,className:"countREL card-title"},l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{style:{width:60,height:30},className:"filterBtns",onClick:function(){return e.CustWithOutFaClickhandler(!e.state.filter_actions[t][1].status,t)}},l.a.createElement("img",{className:"img-fluid",src:"/img/".concat(t,"_logo_color.png"),style:{filter:e.state.filter_actions[t]&&!e.state.filter_actions[t][1].status?"opacity(0.5)":""}})),l.a.createElement("div",{className:"countABS",style:{backgroundColor:e.state.filter_actions[t]&&!e.state.filter_actions[t][1].status?"lightgrey":""}},l.a.createElement("label",null,e.state.filter_actions[t]&&e.state.filter_actions[t][0].count))))}))),l.a.createElement(tr.a.Toggle,{className:"col",as:an.a.Header,eventKey:"0",onClick:function(){return e.handleToggle("Account")}},l.a.createElement(nr.a,{className:this.state.show_table?"arrow-icon down":"arrow-icon",size:"18"}))),"pending_capture_disbursal"===this.props.list_name&&l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"home_header_d-flex_at_response"},l.a.createElement("h4",{className:"card-title text-white tableHead_font "},this.getListTitle()),this.state.lists.length>0&&l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"countREL card-title"},l.a.createElement("button",{className:"filterBtns allBtn_size",onClick:function(){return e.FAPendingCaptureClickhandler(!e.state.all_Btn_status,"ALL")},style:{filter:this.state.all_Btn_status?"":"opacity(0.5)"}},"ALL"),l.a.createElement("div",{className:"countABS",style:{backgroundColor:this.state.all_Btn_status?"":"lightgrey"}},l.a.createElement("label",null,this.state.all_count))),this.state.all_Acc_pvdrs.map(function(t,a){return l.a.createElement("div",{key:a,className:"countREL card-title"},l.a.createElement("div",{style:{width:60,height:30},className:"filterBtns",onClick:function(){return e.FAPendingCaptureClickhandler(!e.state.filter_actions[t][1].status,t)}},l.a.createElement("img",{className:"img-fluid",src:"/img/".concat(t,"_logo_color.png"),style:{filter:e.state.filter_actions[t]&&!e.state.filter_actions[t][1].status?"opacity(0.5)":""}})),l.a.createElement("div",{className:"countABS",style:{backgroundColor:e.state.filter_actions[t]&&!e.state.filter_actions[t][1].status?"lightgrey":""}},l.a.createElement("label",null,e.state.filter_actions[t]&&e.state.filter_actions[t][0].count)))}))),l.a.createElement(tr.a.Toggle,{className:"col",as:an.a.Header,eventKey:"0",onClick:function(){return e.handleToggle("Account")}},l.a.createElement(nr.a,{className:this.state.show_table?"arrow-icon down":"arrow-icon",size:"18"})))),l.a.createElement("div",{className:"card-body no-padding"},this.state.server_time&&l.a.createElement(tr.a.Collapse,{eventKey:"0"},l.a.createElement(an.a.Body,null,l.a.createElement(ua,{showPag:"active_cust_without_fa"===this.props.list_name,defaultPageSize:"active_cust_without_fa"===this.props.list_name?10:50,minRow:0,row_data:void 0!==this.state.copy?this.state.copy:[],column_data:this.state.columns,resizable:!1,defaultSorted:[{id:this.state.sortVariable,desc:this.state.defaultSortOrder}],timeServer:this.state.server_time.server_time_db,excessTimeaction:!0,appliedRowblink:"pending_w_rm"===this.props.list_name,appliedRowblinktime:this.state.fa_rm_approval_late2,approveRowblinktime:this.state.fa_late2,exportCSV:"active_cust_without_fa"===this.props.list_name,csvData:void 0!==this.state.copy?this.state.copy:[],csvFile:"Active Customers Without FA"})))))))}}]),t}(ct),ic=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={columns:[],list:[],show_table:!1},a.handleToggle=function(e){switch(e){case"Account":a.setState(function(e){return e.show_table=!a.state.show_table})}},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){var e,t=this;(e=this.req({write_off_status:"requested"},!0),L(M+"/write_off/list",e)).then(function(e){var a;e&&("success"===e.status&&(a=[{Header:"Acc Prvdr Code",id:"acc_prvdr_code",sortable:!1,accessor:"acc_prvdr_code"},{Header:"FA ID",sortable:!1,accessor:"loan_doc_id",Cell:function(e){return l.a.createElement($.a,{to:"/fa/view/"+e.value,target:"_blank"},e.value)}},{Header:"Account Number",sortable:!1,accessor:"acc_number",Cell:function(e){return l.a.createElement($.a,{to:"/borrower/indiv/view/"+e.value,target:"_blank"},e.value)}},{Header:"Write-Off Status",sortable:!1,id:"write_off_status",accessor:"write_off_status"},{Header:"Write-Off Amount",id:"write_off_amount",sortMethod:function(e,a){return t.sortAmt(e,a)},accessor:function(e){return l.a.createElement("div",{className:"tableAmount_rightAlign"},Ne(e.write_off_amount,t.currency_code))}},{Header:"Requested By",sortable:!1,id:"req_name",accessor:"req_name"},{Header:"Requested Date",id:"req_date",accessor:"req_date"}],t.setState({columns:a,lists:e.data})))})}},{key:"sortAmt",value:function(e,t){var a=e.props.children,n=t.props.children;return Mr(a,n)}},{key:"sortDate",value:function(e,t){var a=e.props.children[1],n=t.props.children[1];return Lr(a,n)}},{key:"render",value:function(){var e=this;return l.a.createElement(tr.a,null,l.a.createElement(an.a,null,l.a.createElement("div",{className:"card-header card-header-icon card-header-primary home_header_d-flex_at_response justify-space-between"},l.a.createElement("h4",{className:"card-title text-white d-inline-block title-bottom",style:{padding:"15px 0px"}},"Write-Off Pending Approval"),l.a.createElement(tr.a.Toggle,{className:"col",as:an.a.Header,eventKey:"0",onClick:function(){return e.handleToggle("Account")}},l.a.createElement(nr.a,{className:this.state.show_table?"arrow-icon down":"arrow-icon",size:"18"}))),l.a.createElement("div",{className:"card-body no-padding"},l.a.createElement(tr.a.Collapse,{eventKey:"0"},l.a.createElement(an.a.Body,null,l.a.createElement(ua,{showPag:!1,defaultPageSize:50,minRow:0,row_data:void 0!==this.state.lists?this.state.lists:[],column_data:this.state.columns,resizable:!1,defaultSorted:[{id:"req_date",desc:!0}]}))))))}}]),t}(ct),dc=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={columns:[],lists:[],copy:[],dyn_Btn_selected:[],all_count:0,filter_actions:{},all_Btn_status:!1,all_Acc_pvdrs:[],show_table:!1},a.handleToggle=function(e){switch(e){case"Account":a.setState(function(e){return e.show_table=!a.state.show_table})}},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){var e=this,t=g("market"),a={country_code:t.country_code,time_zone:t.time_zone,status:""};un(Object(Z.a)({},a,{status:"enabled",biz_account:!0})).then(function(t){if(t&&"success"===t.status){var a=[];t.data.list.map(function(e){return a.push(e.acc_prvdr_code)}),e.setState(function(e){return e.all_Acc_pvdrs=a})}}),this.drawTable()}},{key:"drawTable",value:function(){var e=this,t=g("market").country_code;Vl(this.req({lead_search_criteria:{status:"09_pending_rm_alloc"}})).then(function(a){if(a&&"success"===a.status&&(e.setState(function(t){return t.columns=e.columndatas()}),a.data.length>0)){e.setState({lists:a.data}),e.setState(function(e){return e.all_count=a.data.length});var n=void 0===g([t]+"_rmAllocpending")?e.state.all_Acc_pvdrs:g([t]+"_rmAllocpending");e.state.all_Acc_pvdrs.map(function(t){var a=e.state.lists.filter(function(e){return e.acc_prvdr_code===t}).length;e.setState(function(e){return e.filter_actions[t]=[{count:0},{status:n.includes(t)}]}),e.dynClickhandler(e.state.filter_actions[t][1].status,t),e.setState(function(e){return e.filter_actions[t][0].count=a})})}})}},{key:"columndatas",value:function(){return[{Header:"Business Name",accessor:"biz_name",Cell:function(e){return l.a.createElement(St,{full_text:e.original.biz_name,overlay:[e.original.first_name,e.original.last_name].join(" "),no_reduce:!0})}},{Header:"Reg Date",accessor:"lead_date",Cell:function(e){return ve(e.value)}},{Header:"ACC PRVDR",accessor:"acc_prvdr_code",Cell:function(e){return l.a.createElement(Me,{logotype:e.value})}},{Header:"A/C Number",accessor:"account_num",minWidth:160},{Header:"Mobile Number",accessor:"mobile_num"},{Header:"Location",accessor:"location"},{Header:"Action",sortable:!1,accessor:"id",Cell:function(e){return l.a.createElement($.a,{to:"lead/edit/"+e.value,target:"_blank"},"Allocate RM")}}]}},{key:"dynClickhandler",value:function(e,t){var a=this,n=g("market").country_code;if(e)if("ALL"!==t){-1==this.state.dyn_Btn_selected.findIndex(function(e){return e===t})&&(this.state.dyn_Btn_selected.push(t),this.setState(function(a){return a.filter_actions[t][1].status=e}),this.state.dyn_Btn_selected.length===this.state.all_Acc_pvdrs.length&&this.setState(function(e){return e.all_Btn_status=!0})),localStorage.setItem([n]+"_rmAllocpending",JSON.stringify(this.state.dyn_Btn_selected))}else{var l=[];this.state.all_Acc_pvdrs.map(function(e){a.state.filter_actions[e][1].status=!0,l.push(e)}),this.setState(function(e){return e.dyn_Btn_selected=l}),localStorage.setItem([n]+"_rmAllocpending",JSON.stringify(l)),this.setState(function(t){return t.all_Btn_status=e})}else if(!e)if("ALL"!==t){var r=this.state.dyn_Btn_selected.findIndex(function(e){return e===t});r>-1&&(this.state.dyn_Btn_selected.splice(r,1),this.setState(function(a){return a.filter_actions[t][1].status=e})),this.setState(function(e){return e.all_Btn_status=!1}),localStorage.setItem([n]+"_rmAllocpending",JSON.stringify(this.state.dyn_Btn_selected))}else this.state.all_Acc_pvdrs.map(function(e){return a.state.filter_actions[e][1].status=!1}),this.setState(function(e){return e.dyn_Btn_selected=[]}),localStorage.setItem([n]+"_rmAllocpending",JSON.stringify([])),this.setState(function(t){return t.all_Btn_status=e});var s=g([n]+"_rmAllocpending"),c=[];s.map(function(e){var t=a.state.lists.filter(function(t){return t.acc_prvdr_code===e});c.push.apply(c,Object(ne.a)(t))}),this.setState(function(e){return e.copy=c})}},{key:"render",value:function(){var e=this;return l.a.createElement(tr.a,null,l.a.createElement(an.a,null,l.a.createElement("div",{className:"card-header card-header-icon card-header-primary home_header_d-flex_at_response justify-space-between"},l.a.createElement("h4",{className:"card-title text-white  tableHead_font"},"Leads with Pending RM Allocation"),this.state.lists.length>0&&l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"countREL card-title"},l.a.createElement("button",{className:"filterBtns allBtn_size",onClick:function(){return e.dynClickhandler(!e.state.all_Btn_status,"ALL")},style:{filter:this.state.all_Btn_status?"":"opacity(0.5)"}},"ALL"),l.a.createElement("div",{className:"countABS",style:{backgroundColor:this.state.all_Btn_status?"":"lightgrey"}},l.a.createElement("label",null,this.state.all_count))),this.state.all_Acc_pvdrs.map(function(t,a){return l.a.createElement("div",{key:a,className:"countREL card-title"},l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{style:{width:60,height:30},className:"filterBtns",onClick:function(){return e.dynClickhandler(!e.state.filter_actions[t][1].status,t)}},l.a.createElement("img",{className:"img-fluid",src:"/img/".concat(t,"_logo_color.png"),style:{filter:e.state.filter_actions[t]&&!e.state.filter_actions[t][1].status?"opacity(0.5)":""}})),l.a.createElement("div",{className:"countABS",style:{backgroundColor:e.state.filter_actions[t]&&!e.state.filter_actions[t][1].status?"lightgrey":""}},l.a.createElement("label",null,e.state.filter_actions[t]&&e.state.filter_actions[t][0].count))))})),l.a.createElement(tr.a.Toggle,{className:"col",as:an.a.Header,eventKey:"0",onClick:function(){return e.handleToggle("Account")}},l.a.createElement(nr.a,{className:this.state.show_table?"arrow-icon down":"arrow-icon",size:"18"}))),l.a.createElement("div",{className:"card-body no-padding"},l.a.createElement(tr.a.Collapse,{eventKey:"0"},l.a.createElement(an.a.Body,null,l.a.createElement(ua,{showPag:!1,defaultPageSize:50,minRow:0,row_data:void 0!==this.state.copy?this.state.copy:[],column_data:this.state.columns,resizable:!1,defaultSorted:[{id:"lead_date",desc:!0}]}))))))}}]),t}(ct),mc=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={rowdatas:[],copy:[],columns:[],approval_modal:!1,modal_data:{},upgrade_amt:null,show_table:!1},a.handleToggle=function(e){switch(e){case"Account":a.setState(function(e){return e.show_table=!a.state.show_table})}},a.handleApprovalModal=function(e,t){a.setState({approval_modal:!0,modal_data:t})},a.handleApprovalModalClose=function(e){a.setState({approval_modal:!1})},a.handleupdReqStatus=function(e){var t=e.target.value,n=e.target.id,l=a.state.upgrade_amt;if(l||"approve"!=t){if(0==window.confirm("Are you sure to ".concat(t," ?")))return;$a(a.req({action:t,id:n,amount:l})).then(function(e){a.resp(e),e&&e&&"success"===e.status&&(alert(e.message),a.setState({approval_modal:!1}),a.drawTable())})}else alert("Please select the amount")},a.handleUpgradeAmtCheckbox=function(e){a.setState({upgrade_amt:e.target.value})},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){this.drawTable()}},{key:"drawTable",value:function(){var e,t=this;(e=this.req(),L(M+"/loan/list_upg_reqs",e)).then(function(e){t.resp(e),e&&e&&(t.setState({refresh:!1}),t.setState(function(t){return t.rowdatas=e.data}),t.setState(function(t){return t.copy=e.data}),t.setState(function(e){return e.columns=t.columndatas()}))})}},{key:"columndatas",value:function(){var e=this;return[{Header:"Cust ID",id:"cust_id",minWidth:100,accessor:function(e){return l.a.createElement($.a,{style:{fontSize:"18px",color:"#17a2b8 !important"},to:"/borrower/indiv/view/"+e.cust_id,target:"_blank"},e.cust_id)}},{Header:"Biz Name",id:"biz_name",minWidth:100,accessor:function(e){return ue(e.biz_name)}},{Header:"Requested Amount",id:"requested_amount",minWidth:100,accessor:function(t){return Ne(t.requested_amount,e.currency_code)}},{Header:"Available amounts",id:"available_amounts",show:!1,minWidth:100,accessor:function(e){return e.available_amounts}},{Header:"Status",id:"approval_json",minWidth:100,accessor:function(e){return e.approval_json.filter(function(e){return e.person_id==g("user_id")}).map(function(e){return l.a.createElement("p",{style:{fontSize:"13"}},e.approved?"Pending with others":"Pending your Approval")})}},{Header:"Current FA Limit",id:"crnt_fa_limit",minWidth:100,accessor:function(t){return Ne(t.crnt_fa_limit,e.currency_code)}},{Header:"Requested On",id:"created_at",minWidth:100,accessor:function(e){return ge(e.created_at)}},{Header:"Action",id:"ids",Cell:function(t){var a=t.row;return l.a.createElement(lt.a,{variant:"primary",onClick:function(t){return e.handleApprovalModal(t,a)}},"view")}}]}},{key:"render",value:function(){var e=this,t=!1;return this.state.modal_data._original&&this.state.modal_data._original.approval_json.filter(function(e){return e.person_id==g("user_id")}).map(function(e){return t=e.approved}),l.a.createElement(l.a.Fragment,null,l.a.createElement(tr.a,null,l.a.createElement(an.a,null,l.a.createElement("div",{className:"card-header card-header-icon card-header-primary home_header_d-flex_at_response justify-space-between"},l.a.createElement("h4",{className:"card-title text-white tableHead_font title-bottom "},"Pending FA Upgrade Requests"),l.a.createElement(tr.a.Toggle,{className:"col",as:an.a.Header,eventKey:"0",onClick:function(){return e.handleToggle("Account")}},l.a.createElement(nr.a,{className:this.state.show_table?"arrow-icon down":"arrow-icon",size:"18"}))),l.a.createElement("div",{className:"card-body no-padding justify-content-center"},l.a.createElement(tr.a.Collapse,{eventKey:"0"},l.a.createElement(an.a.Body,null,l.a.createElement(ua,{showPag:!0,defaultPageSize:20,minRow:0,row_data:void 0!==this.state.copy?this.state.copy:[],column_data:this.state.columns,resizable:!1,defaultSorted:[{id:"created_at",desc:!0}]})))))),l.a.createElement(nt.a,{show:this.state.approval_modal,onHide:this.handleApprovalModalClose,backdrop:"static",size:"xl",style:{position:"fixed"}},l.a.createElement(nt.a.Header,{closeButton:!0,className:"modal-close-btn",show:this.state.approval_modal,onHide:this.handleApprovalModalClose},l.a.createElement(nt.a.Title,null,"FA Upgrade Request")),l.a.createElement(nt.a.Body,null,l.a.createElement("form",null,l.a.createElement("div",{className:"floatAdvanceperiodHeaderBox"},l.a.createElement("h2",{className:"floatAdvanceperiodHeader no-margin"},"Customer :",l.a.createElement("h2",{className:"floatAdvanceBluetitle no-margin"},this.state.modal_data.cust_id))),l.a.createElement("div",{className:"row no-margin pastFloatAdvanceBox justify-content-center"},l.a.createElement("div",{className:"col-lg-10 no-padding personalDetailsbox "},l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement("div",{className:"row no-margin justify-content-center"},l.a.createElement("div",{className:"no-padding col-lg-5"},l.a.createElement("p",{className:"personalDetailstext no-margin"},"Biz Name")),l.a.createElement("div",{className:"col-lg-5 no-padding"},l.a.createElement("ul",{className:"personalPastDetailstext"},l.a.createElement("li",null,this.state.modal_data.biz_name))))),l.a.createElement("li",null,l.a.createElement("div",{className:"row no-margin justify-content-center"},l.a.createElement("div",{className:"no-padding col-lg-5"},l.a.createElement("p",{className:"personalDetailstext no-margin"},"Requested On")),l.a.createElement("div",{className:"col-lg-5 no-padding"},l.a.createElement("ul",{className:"personalPastDetailstext"},l.a.createElement("li",null,this.state.modal_data.created_at)))))))),this.state.modal_data.cust_id&&l.a.createElement(us,{cust_id:this.state.modal_data.cust_id.props.children,last_n_fas:"4"}),this.state.modal_data._original&&this.state.modal_data._original.last_loan&&l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"floatAdvanceperiodHeaderBox mt-2"},l.a.createElement("h2",{className:"floatAdvanceperiodHeader no-margin"},"Last FA")),l.a.createElement("div",{className:"row no-margin pastFloatAdvanceBox justify-content-center"},l.a.createElement("div",{className:"col-lg-10 no-padding personalDetailsbox "},l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement("div",{className:"row no-margin justify-content-center"},l.a.createElement("div",{className:"no-padding col-lg-5"},l.a.createElement("p",{className:"personalDetailstext no-margin"},"Float Advance")),l.a.createElement("div",{className:"col-lg-5 no-padding"},l.a.createElement("ul",{className:"personalPastDetailstext"},l.a.createElement("li",null,Ne(this.state.modal_data._original.last_loan.loan_principal,this.currency_code)))))),l.a.createElement("li",null,l.a.createElement("div",{className:"row no-margin justify-content-center"},l.a.createElement("div",{className:"no-padding col-lg-5"},l.a.createElement("p",{className:"personalDetailstext no-margin"},"Disbursed Date")),l.a.createElement("div",{className:"col-lg-5 no-padding"},l.a.createElement("ul",{className:"personalPastDetailstext"},l.a.createElement("li",null,ge(this.state.modal_data._original.last_loan.disbursal_date)))))))))),this.state.modal_data._original&&this.state.modal_data._original.approval_json&&l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"floatAdvanceperiodHeaderBox mt-2"},l.a.createElement("h2",{className:"floatAdvanceperiodHeader no-margin"},"All Approvers")),this.state.modal_data._original.approval_json.map(function(e){return l.a.createElement("div",{className:"row no-margin pastFloatAdvanceBox justify-content-center"},l.a.createElement("div",{className:"col-lg-10 no-padding personalDetailsbox "},l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement("div",{className:"row no-margin justify-content-center"},l.a.createElement("div",{className:"no-padding col-lg-5"},l.a.createElement("p",{className:"personalDetailstext no-margin"},Ze(e.approver_name),l.a.createElement("br",null),e.person_id==g("user_id")&&l.a.createElement(l.a.Fragment,null,"(You)"))),l.a.createElement("div",{className:"col-lg-5 no-padding"},l.a.createElement("ul",{className:"personalPastDetailstext"},l.a.createElement("li",null,e.approved?"Approved":"Pending"))))))))})),l.a.createElement("div",{className:"row justify-content-center align-items-center "},l.a.createElement("label",{className:"col-sm-3 personalDetailstext no-margin no-padding"},l.a.createElement("p",{className:"personalDetailstext",style:{paddingTop:"20px"}},"Select Amount to upgrade")),this.state.modal_data.available_amounts&&this.state.modal_data.available_amounts.map(function(t){return l.a.createElement("ul",{className:"personalPastDetailstext"},l.a.createElement("li",null,l.a.createElement("label",null,l.a.createElement("input",{type:"radio",name:"appr",value:t,onClick:e.handleUpgradeAmtCheckbox})," \xa0\xa0",e.state.modal_data._original.requested_amount==t?l.a.createElement(l.a.Fragment,null,l.a.createElement("b",null,Ne(t,e.currency_code)," "),e.state.modal_data.available_amounts.length>1?l.a.createElement("span",null,"(customer requested amount)"):l.a.createElement("span",null)):Ne(t,e.currency_code),"\xa0\xa0\xa0")))})))),l.a.createElement(nt.a.Footer,{className:"row my-2 justify-content-center align-items-center py-2"},this.state.modal_data._original&&0==t&&l.a.createElement(l.a.Fragment,null,l.a.createElement(lt.a,{id:this.state.modal_data._original.id,value:"approve",variant:"primary",disabled:this.state.calling_api,onClick:this.handleupdReqStatus},"Approve"),l.a.createElement("div",null),l.a.createElement(lt.a,{id:this.state.modal_data._original.id,value:"reject",variant:"danger",disabled:this.state.calling_api,style:{marginLeft:10},onClick:this.handleupdReqStatus},"Reject")))))}}]),t}(ct),uc=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(d.a)(t).call(this,e))).state={toSelectMarket:!1,acc_prvdr:""},a.load_home_accounts=function(){if("/"===window.location.pathname){var e={lender_code:a.lender_code,country_code:a.country_code,to_recon:!0};sa(a.req({account:e})).then(function(e){if(e)if("success"===e.status){if(""!=e.data){var t=e.data.map(function(e,t){return l.a.createElement("li",null,l.a.createElement($.a,{to:"/account/".concat(e.id,"/statement"),target:"blank"},e.name))});a.setState({account_list:t})}}else alert(e.message+"\n"+JSON.stringify(e.data))})}},a.state={refresh_count:0},a.selectAccPrvdr=function(e){"super_admin"===a.roles||"it_admin"===a.roles?(a.toChange="acc_prvdr",Js.push("/management-dashboard")):a.toChange="acc_prvdr_only",console.log('"first"',"first"),a.setState({toSelectMarket:!0})},a.selectMarket=function(e){"super_admin"!==g("role_codes")&&"it_admin"!==g("role_codes")||(a.toChange="market",a.setState({toSelectMarket:!0}))},a.load_home_accounts=a.load_home_accounts.bind(Object(u.a)(Object(u.a)(a))),a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){var e=Object(F.a)(D.a.mark(function e(){var a,n,l=this;return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a={country_code:g("market").country_code,time_zone:g("market").time_zone,status:""},un(Object(Z.a)({},a,{status:"enabled",biz_account:!0})).then(function(e){if(e&&"success"===e.status){var t=[];e.data.list.map(function(e){return t.push(e.acc_prvdr_code)}),l.setState({acc_prvdr:t})}}),e.next=4,Object(X.a)(Object(d.a)(t.prototype),"touch_async",this).call(this);case 4:n=e.sent,this.setState({logout:n}),this.load_home_accounts(),setInterval(function(){return l.setState({refresh_count:l.state.refresh_count+1})},6e4);case 8:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;if(this.state.toSelectMarket)return l.a.createElement(Ks,{toChange:this.toChange,action:"change",onClose:function(){return e.setState({toSelectMarket:!1})}});if(this.state.logout)return l.a.createElement(l.a.Fragment,null);var t=g("role_codes");return l.a.createElement("div",null,b("report","mgmt_dashboard_live")&&l.a.createElement(l.a.Fragment,null,jr),"/management-dashboard/print"!==window.location.pathname&&l.a.createElement("div",{className:"wrapper"},l.a.createElement(Gs,{load_home_accounts:this.load_home_accounts}),l.a.createElement("div",{className:"main-panel"},l.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-transparent navbar-absolute fixed-top pb-3"},l.a.createElement("div",{className:"container-fluid"},l.a.createElement("div",{className:"navbar-wrapper"},l.a.createElement("div",{className:"navbar-minimize"})),l.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","aria-controls":"navigation-index","aria-expanded":"false","aria-label":"Toggle navigation"},l.a.createElement("span",{className:"sr-only"},"Toggle navigation"),l.a.createElement("span",{className:"navbar-toggler-icon icon-bar"}),l.a.createElement("span",{className:"navbar-toggler-icon icon-bar"}),l.a.createElement("span",{className:"navbar-toggler-icon icon-bar"})),l.a.createElement("div",{className:"collapse navbar-collapse justify-content-end"},l.a.createElement("ul",{className:"navbar-nav"},l.a.createElement("li",null,l.a.createElement("div",{className:("super_admin"==g("role_codes")||"it_admin"==g("role_codes"))&&"flag_cursor",onClick:this.selectMarket},l.a.createElement(te.a,{id:"market",name:this.country_code,format:"png",pngSize:48,shiny:!1,alt:this.country_code,basePath:"/img/flags"}))),["super_admin","ops_admin","market_admin","it_admin"].includes(t)&&l.a.createElement("li",null,l.a.createElement("div",{className:"flag_cursor pl-5",onClick:this.selectAccPrvdr},l.a.createElement(tn,{file_name:"t_"+g("acc_prvdr_logo"),entity:"acc_prvdr",entity_code:g("acc_prvdr_code"),country_code:this.country_code,color:"logo_style"}),"\xa0\xa0")),l.a.createElement("li",{className:"nav-item dropdown"},l.a.createElement($.a,{to:"/logout",className:"nav-link logoutLink",href:"javascript:;",id:"navbarDropdownProfile","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},l.a.createElement("i",{className:"material-icons fs-2"},"logout"),l.a.createElement("p",{className:"d-lg-none d-md-block"},"Account"))))))),l.a.createElement("div",{className:"content"},l.a.createElement("div",{className:"container-fluid"},Hs,qs,Is,Ws,Vs,vr,gr,fr,Er,br,yr,Nr,wr,Cr,kr,Sr,Ys,xr,zs,Or,Ar,"/"==window.location.pathname&&l.a.createElement("div",{className:"row home-menu-container mb-5"},l.a.createElement(tc,null),this.state.account_list&&b("recon","search")&&l.a.createElement("div",{className:"home-menu box col-lg-3 col-md-6 text-center align-items-center"},l.a.createElement("div",{className:"card card-pricing "},l.a.createElement("div",{className:"card-body"},l.a.createElement("h3",{className:"card-title"},"Wallet Statements"),l.a.createElement("div",null,l.a.createElement("div",{className:"wallet_statement_mobno"},l.a.createElement("p",{className:"wallet_statement_mobno "}," ",this.state.account_list),console.log("network_prvdr_code",this.acc_prvdr_code))))))),"/"==window.location.pathname&&b("loan","capture_repayment_new")&&l.a.createElement("div",{className:""},l.a.createElement(cc,{list_name:"review_pending_payments",refresh:this.state.refresh_count})),"/"==window.location.pathname&&b("statement","unknown_txns")&&l.a.createElement("div",{className:""},l.a.createElement(cc,{list_name:"unmatched_debits",refresh:this.state.refresh_count})),"/"==window.location.pathname&&b("statement","unknown_txns")&&l.a.createElement("div",{className:""},l.a.createElement(cc,{list_name:"unmatched_credits",refresh:this.state.refresh_count})),"/"==window.location.pathname&&b("application","delayed_approval_list")&&l.a.createElement("div",{className:"home_stalled_fas"},l.a.createElement(oc,{list_name:"pending_w_rm",refresh:this.state.refresh_count})),"/"==window.location.pathname&&b("loan","pending_confirmation_list")&&l.a.createElement("div",{className:"home_stalled_fas"},l.a.createElement(oc,{list_name:"pending_w_cust",refresh:this.state.refresh_count})),"/"==window.location.pathname&&b("loan","hold_loan_list")&&l.a.createElement("div",{className:"home_stalled_fas"},l.a.createElement(lc,{refresh:this.state.refresh_count})),"/"==window.location.pathname&&b("loan","home_capture_disbursal")&&l.a.createElement("div",{className:"home_stalled_fa"},l.a.createElement(oc,{list_name:"pending_capture_disbursal",refresh:this.state.refresh_count})),"/"==window.location.pathname&&b("customer","active_cust_wo_fa")&&l.a.createElement("div",{className:"home_stalled_fa"},l.a.createElement(oc,{list_name:"active_cust_without_fa"})),"/"==window.location.pathname&&b("customer","perform_kyc")&&l.a.createElement("div",{className:"home_stalled_fas"},l.a.createElement(rc,null)),"/"==window.location.pathname&&b("loan","upgrade_requests")&&l.a.createElement("div",{className:"home_stalled_fas"},l.a.createElement(mc,null)),"/"==window.location.pathname&&b("lead","edit")&&l.a.createElement("div",{className:"home_stalled_fas"},l.a.createElement(dc,null)),"/"==window.location.pathname&&b("loan","search_list_view_write_off")&&l.a.createElement("div",{className:"home_stalled_fas"},l.a.createElement(ic,null)),"/"==window.location.pathname&&b("application","approval")&&l.a.createElement("div",{className:""},l.a.createElement(ac,null)),"/"==window.location.pathname&&b("loan","recovery_list")&&l.a.createElement("div",{className:"home_stalled_fas"},l.a.createElement(sc,null)))))))}}]),t}(ct);Ut.a.dataTable=a(45),a(62),a(154),a(155),a(156),a(157);var _c=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(i.a)(this,Object(d.a)(t).call(this))).state={routes:[],home:[],selectMarket:!1},e.loadScreen=function(t){"admin"===t?e.setState({home:l.a.createElement(uc,null)}):"login"===t?e.setState({home:l.a.createElement(K,{onLogon:e.loadUser})}):"market"!==t&&"acc_prvdr"!==t&&"acc_prvdr_only"!==t||e.setState({home:l.a.createElement(Ks,{toChange:t,action:"select",onSelect:e.loadUser})})},e.loadUser=e.loadUser.bind(Object(u.a)(Object(u.a)(e))),console.log(t.state),e}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){this.loadUser()}},{key:"loadUser",value:function(){this.role_codes=g("role_codes");var e=null,t=null,a=g("market"),n=["super_admin","ops_admin","market_admin","it_admin"];n.includes(this.role_codes)&&(t=f("acc_prvdr_code")),this.role_codes?n.includes(this.role_codes)?a?t||(e="acc_prvdr_only"):e="market":!n.includes(this.role_codes)&&a?e="admin":alert("Unable to obtain User's Market Information or No Market has been configured in the system"):e="login",a&&t&&(e="admin"),this.loadScreen(e)}},{key:"render",value:function(){var e=this;return l.a.createElement("div",{className:"App"},l.a.createElement(_.a,{history:Js},l.a.createElement(p.a,null,l.a.createElement(v.a,{path:"/login",component:function(){return l.a.createElement(K,{onLogon:e.loadUser})}}),l.a.createElement(v.a,{path:"/logout",component:function(){return l.a.createElement(Q,null)}}),l.a.createElement(v.a,{path:"/"},l.a.createElement(l.a.Fragment,null,this.state.home)))))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(l.a.createElement(_c,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},37:function(e,t,a){},9:function(e,t,a){}},[[109,1,2]]]);
//# sourceMappingURL=main.eaa4d15b.chunk.js.map