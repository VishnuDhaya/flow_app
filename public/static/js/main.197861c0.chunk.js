(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{101:function(e,t,a){e.exports=a(169)},106:function(e,t,a){},153:function(e,t,a){},169:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(24),c=a.n(r),o=a(3),s=a(5),i=a(2),d=a(1),m=a(4),u=a(19),p=(a(6),a(186)),h=a(185),_=a(10),E=a.n(_);function v(e){if(localStorage.hasOwnProperty(e))return JSON.parse(localStorage.getItem(e))}function g(e){if(localStorage.hasOwnProperty(e))return localStorage.getItem(e)}function f(e,t){var a=v("privileges"),n=!1;return Object.keys(a).map(function(l){l==e&&a[l].split(",").map(function(e){t==e&&(n=!0)})}),n}function b(e,t){localStorage.setItem(e,JSON.stringify(t))}function y(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;(!v("master_data")||e&&v("master_data_version")!=t)&&(localStorage.setItem("master_data",JSON.stringify(e)),localStorage.setItem("master_data_version",JSON.stringify(t)))}window.addEventListener("storage",function(e){"logout"==e.key&&window.location.reload("/login")},!1);var w=a(16),C=a(90),N=a(181),k=a(91),S=a(173),O=(a(106),a(35)),A=a.n(O),x=a(48),j="/api/app",D=new Headers;D.append("Content-Type","application/json");var F=function(e,t){return null==t&&(t={}),(!(arguments.length>2&&void 0!==arguments[2])||arguments[2])&&(t.token=v("access_token")),fetch(e,{method:"POST",body:JSON.stringify(t),headers:D}).then(R).then(q,L).catch(function(e){console.log(e)})};function M(e,t){return P.apply(this,arguments)}function P(){return(P=Object(x.a)(A.a.mark(function e(t,a){var n,l=arguments;return A.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(!(l.length>2&&void 0!==l[2])||l[2])&&(null==a&&(a={}),a.token=v("access_token")),e.next=4,fetch(t,{method:"POST",body:JSON.stringify(a),headers:D});case 4:return n=e.sent,e.next=7,n.json();case 7:return n=e.sent,e.abrupt("return",n);case 9:case"end":return e.stop()}},e)}))).apply(this,arguments)}function L(e){alert(e)}var q=function(e){var t="";return"error"===e.status?("401"==e.status_code||"401"==e.status_code&&(t+="\n"+JSON.stringify(e.data)),alert(e.message+t),!1):e};function R(e){return e.text().then(function(t){var a=t&&JSON.parse(t),n=null;return e.ok?a:("401"==e.status?(n=a.message,T.logout(),window.location.reload(!0)):n=a&&a.message,Promise.reject(n))})}var T={login:function(e,t){var a=v("master_data_version");return F(j+"/user/login",{email:e,password:t,master_data_version:a},!1)},logout:function(e){F(j+"/user/logout"),localStorage.removeItem("privileges"),localStorage.removeItem("market"),localStorage.removeItem("access_token"),localStorage.removeItem("role_codes"),localStorage.removeItem("market_list"),localStorage.removeItem("user_id"),localStorage.removeItem("user_name"),localStorage.removeItem("app_version"),localStorage.removeItem("master_data"),localStorage.removeItem("master_data_version"),localStorage.removeItem("data_prvdr_code"),localStorage.removeItem("data_prvdr_logo"),localStorage.setItem("logout","logout_"+Math.random())}};var B=a(182),I=a(183),U=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(i.a)(this,Object(d.a)(t).call(this,e))).handleChange=function(e){a.setState(Object(w.a)({},e.target.id,e.target.value))},a.handleSubmit=function(e){e.preventDefault();var t=a.state.email,n=a.state.password;a.setState({loading:!0}),T.login(t,n).then(function(e){var t;e&&("success"===e.status?(t=e,localStorage.setItem("privileges",JSON.stringify(t.data.user.privileges)),localStorage.setItem("role_codes",JSON.stringify(t.data.user.role_codes)),localStorage.setItem("access_token",JSON.stringify(t.data.access_token)),localStorage.setItem("app_version",JSON.stringify(t.data.app_version)),y(t.data.master_data,t.data.master_data_version),t.data.user.market&&localStorage.setItem("market",JSON.stringify(t.data.user.market)),t.data.user.market_list&&localStorage.setItem("market_list",JSON.stringify(t.data.user.market_list)),t.data.user_id&&localStorage.setItem("user_id",JSON.stringify(t.data.user_id)),t.data.user_name&&localStorage.setItem("user_name",JSON.stringify(t.data.user_name)),a.props.onLogon()):a.setState({error:e.status,loading:!1}))})},a.state={email:"",password:"",submitted:!1,loading:!1,loggedin:!1,error:""},a.handleChange=a.handleChange.bind(Object(u.a)(Object(u.a)(a))),a.handleSubmit=a.handleSubmit.bind(Object(u.a)(Object(u.a)(a))),a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"validateForm",value:function(){return this.state.email.length>0&&this.state.password.length>0}},{key:"render",value:function(){if(v("role_codes"))return l.a.createElement(B.a,{to:{pathname:"/"}});var e=this.state,t=e.loading,a=e.error;return l.a.createElement("div",{className:"Login"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-12 text-center"},l.a.createElement("img",{src:"/logo_blue.png",alt:"/logo_blue.png",className:"img-responsive"}))),l.a.createElement("form",{onSubmit:this.handleSubmit},l.a.createElement(C.a,{controlId:"email",bssize:"large"},l.a.createElement(N.a.Label,null,"Email"),l.a.createElement(k.a,{autoFocus:!0,type:"email",value:this.state.email,onChange:this.handleChange})),l.a.createElement(C.a,{controlId:"password",bssize:"large"},l.a.createElement(N.a.Label,null,"Password"),l.a.createElement(k.a,{value:this.state.password,onChange:this.handleChange,type:"password"})),l.a.createElement(S.a,{block:!0,bssize:"large",disabled:!this.validateForm(),type:"submit"},"Login"),t&&l.a.createElement("img",{src:"data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA==",alt:"Image not found"}),a&&l.a.createElement("div",{className:"alert alert-danger"},a)),l.a.createElement("br",null),l.a.createElement("p",null,l.a.createElement("center",null,"Powered by \xa0",l.a.createElement("a",{href:"http://mirutechnologies.com/"},"Miru Technologies"))))}}]),t}(n.Component),W=Object(I.a)(U),Y=function(e){function t(){var e;return Object(o.a)(this,t),e=Object(i.a)(this,Object(d.a)(t).call(this)),T.logout(),e}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return l.a.createElement(B.a,{to:{pathname:"/login"}})}}]),t}(n.Component),V=Object(I.a)(Y),H=a(22),z=a(177),J=a(53),G=a.n(J),K=function(e){return F("/api/admin/market",e)},Q=a(45),X=function(e,t){return F("/api/admin/"+e+"/update",t)},Z=function(e,t){return F("/api/admin/"+e+"/name_list",t)},$=function(e,t,a){return F(j+"/"+e+"/"+t,a)},ee=function(e){return F(j+"/common/loan_search_criteria",e)},te=function(e){return F(j+"/common/currency_code",e)},ae=function(e){return F("/api/admin/org/org_details",e)},ne=function(e){return F(j+"/common/sms",e)},le=function(e){return F(j+"/common/update",e)},re=function(e){return F(j+"/common/app_users",e)},ce=function(e){return F(j+"/user/master_data",e)},oe=function(e){return F(j+"/common/master_data",e)},se=function(){var e=v("master_data");if(""!=e)return e;alert("Master Data not configured for the application. Ensure you are using modern browser")},ie=function(e){return se().filter(function(t){return t.data_key===e})},de=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=se();return null!=t&&(a=ie(t)),a&&a.length>0&&(a=a.filter(function(t){return t.data_code===e}))&&1===a.length?a[0].data_value:e},me=a(26),ue=a.n(me);function pe(e,t){return 0==t?"NA":Math.round(e/t*100)+" %"}function he(e){e.hasOwnProperty("status")||(e.status=null);var t=Object.keys(e)[0],a=e[t];return void 0==a||null==a||a.constructor!=Object||a.hasOwnProperty("status")||(e[t].status=null),e}function _e(e){var t="",a=e.split("_");for(t=0;t<a.length;t++)a[t]=a[t].charAt(0).toUpperCase()+a[t].slice(1);return a.join(" ")}function Ee(e){return isNaN(e)?e.charAt(0).toUpperCase()+e.slice(1):e}function ve(e,t,a){return e.filter(function(e){return e[t]==a})}function ge(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"YYYY-MM-DD h:mm a",r=(arguments.length>4&&void 0!==arguments[4]&&arguments[4],fe(e,t,a,n));return l.a.createElement(l.a.Fragment,null,l.a.createElement("span",{className:"hide"},e),r)}function fe(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"YYYY-MM-DD h:mm a",l="DD MMM YYYY";return 2==a&&(l="DD MMM YY"),t&&(l+=" h:mm a"),e instanceof me?e.format(l):null==e?"":me(e,n).format(l)}function be(e){return Number(e)}function ye(e){return e?e.length:0}function we(e){var t="";return e.hasOwnProperty("first_name")&&e.first_name&&(t+=e.first_name),e.hasOwnProperty("middle_name")&&e.midde_name&&(t=t+" "+e.middle_name),e.hasOwnProperty("last_name")&&e.last_name&&(t=t+" "+e.last_name),t}function Ce(e,t){return(new Intl.NumberFormat).format(e)+" "+t}function Ne(e){return"enabled"===e?"Disable":"Enable"}function ke(e){return"enabled"===e?"btn btn-danger do_disable":"btn do_enable"}function Se(e){return"enabled"===e?"success":"danger"}function Oe(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return 0==Number(t)?a:(Number(e)/Number(t)*100).toFixed(2)+"%"}function Ae(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return e?e.substring(0,t)+"...":0}function xe(e){return Object.keys(e).map(function(t){e[t]=""}),e}function je(e){return l.a.createElement("span",{style:{float:"right"}},e)}Date.prototype.addDays=function(e){var t=new Date(this.valueOf);return t.setDate(t.getDate()+e),t};var De=[l.a.createElement("option",{key:"-2",value:"-2"},"[ loading . . . ]")],Fe=[l.a.createElement("option",{value:""},"[ No Results ]")],Me=[l.a.createElement("option",{key:"",value:""},"choose")],Pe=[l.a.createElement("option",{key:"",value:"{}"},"choose")],Le=function(e){function t(){var e;if(Object(o.a)(this,t),(e=Object(i.a)(this,Object(d.a)(t).call(this))).fillSelect=function(t,a){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:["id","name"];t&&("success"===t.status?e.getSelectOptionsFromResult(t.data,a,n):alert(t.message+"\n"+JSON.stringify(t.data)))},e.add_status=function(e){return he(e)},e.setOptionsToStateFromApi=function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=t;null==a?a=e.def_req:a.hasOwnProperty("associated_with")&&(n=a.associated_with+"_"+t),Z(t,e.req(a)).then(function(t){e.resp(t),t&&("success"===t.status?e.getSelectOptionsFromResult(t.data,n):alert(t.message+"\n"+JSON.stringify(t.data)))})},e.setOptionsListToStateFromAppApi=function(t,a){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:["id","name"],r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;null==r&&(r=a),$(t,a,e.req(n)).then(function(t){t&&("success"===t.status?e.getSelectOptionsFromResult(t.data.list,r,l):alert(t.message+"\n"+JSON.stringify(t.data)))})},e.getSelectOptionsFromResult=function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:["id","name"],r=[];if(t.length>0){var c=n[0],o=n[1],s=!1;r=t.map(function(t,n){var r=t[c];return"obj"==c&&(r=JSON.stringify(r),s=!0),t.selected&&(e.selected[a]=r),l.a.createElement("option",{key:n,value:r},t[o])}),a+="_dd",r=[].concat(s?Object(Q.a)(Pe):Object(Q.a)(Me),Object(Q.a)(r))}else r=Fe;return null!=a&&e.setState(Object(w.a)({},a,r)),r},e.getSelectOptions=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=ie(e),n=[];if(a.length>0)return n=a.map(function(e,t){return l.a.createElement("option",{key:t,value:e.data_code},e.data_value)}),t&&(n=[].concat(Object(Q.a)(Me),Object(Q.a)(n))),n},e.selected={},null==v("access_token"))return alert("You have been signed out. Please login again"),Object(i.a)(e);var a=v("market");null==a?alert("It looks like Market is not configured for the logged in user \nOR\n User is not assigned to a Market."):(e.country_code=a.country_code,e.currency_code=a.currency_code,e.time_zone=a.time_zone);var n=v("data_prvdr_code");return n&&(e.data_prvdr_code=n),e.def_req={country_code:e.country_code,status:"enabled"},e}return Object(m.a)(t,e),Object(s.a)(t,[{key:"touch",value:function(){return(e={country_code:"UGA"},F(j+"/touch",e)).then(function(e){return!!e&&("success"!==e.status&&(T.logout(),alert("Session Expired"),window.location.reload("/login"),!0))});var e}},{key:"touch_async",value:function(){var e=Object(x.a)(A.a.mark(function e(){var t,a;return A.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=!1,e.next=3,M(j+"/touch",{country_code:"UGA",time_zone:"CAT"});case 3:if(a=e.sent){e.next=6;break}return e.abrupt("return",!0);case 6:return"success"===a.status?t=!1:(T.logout(),alert("Session Expired"),window.location.reload("/login"),t=!0),e.abrupt("return",t);case 9:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()},{key:"resp",value:function(e){this.setState({calling_api:!1})}},{key:"req",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.setState({calling_api:!0}),this.append_request(e,this,t)}},{key:"append_request",value:function(e,t,a){return null==e&&(e={}),e.hasOwnProperty("country_code")||(e.country_code=t.country_code),a&&!e.hasOwnProperty("data_prvdr_code")&&(e.data_prvdr_code=t.data_prvdr_code),e.hasOwnProperty("time_zone")||(e.time_zone=t.time_zone),e=he(e)}}]),t}(n.Component),qe=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(i.a)(this,Object(d.a)(t).call(this))).handleComponentChange=function(t,a){var n=t.target.id,l=t.target.value,r=e.state[a];r[n]=l,e.setState(Object(w.a)({},a,r))},e.handleComponentReset=function(t,a){e.setState(Object(w.a)({},a,{}))},e.handleComponentElemetChange=function(t,a,n){var l=e.state[t];l[a]=n,e.setState(Object(w.a)({},t,l))},e.handleResetOrgNAddr=function(t){var a=xe(e.state.org),n=xe(e.state.reg_address);e.setState({org:a,reg_address:n,div_style:"show_div"})},e.handleOrgChange=function(t){var a=xe(e.state.org),n=xe(e.state.reg_address);e.setState({org:a,reg_address:n,div_style:"disable_div"});var l=t.target.value,r={id:l};alert(l),ae(e.req(r)).then(function(t){if(t&&null!=t.data){var a=t.data,n=a.reg_address;e.setState({org:a,reg_address:n})}})},e.handleComponentChange=e.handleComponentChange.bind(Object(u.a)(Object(u.a)(e))),e.handleComponentReset=e.handleComponentReset.bind(Object(u.a)(Object(u.a)(e))),e}return Object(m.a)(t,e),t}(Le),Re=a(43),Te=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(i.a)(this,Object(d.a)(t).call(this))).non_data_fields=["div_style","show_button_style","edit_button_style","edit_mode"],e.handleChange=function(t){e.props.onComponentChange(t,e.props.id),e.handleChangeForEdit(t)},e.toUpperHandleChange=function(t){t.target.value=t.target.value.toUpperCase(),e.handleChange(t)},e.handleChangeForEdit=function(t){if(!1!==e.props.editable&&e.state.edit_mode){var a,n=t.target.id,l=t.target.value;e.setState((a={},Object(w.a)(a,n,l),Object(w.a)(a,"save_button_style","show_button"),a))}},e.handleElementReset=function(t){e.handleElementChange(t,null)},e.handleElementChange=function(t,a){e.props.onComponentElementChange(e.props.id,t,a)},e.handleSelfChangeState=function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=t.target.id;null==a&&(a=t.target.value),e.setState(Object(w.a)({},n,a))},e.setChangeToState=function(t){var a=e.props.id,n=t.target.id,l=t.target.value,r=e.state[a];r[n]=l,e.setState(Object(w.a)({},a,r))},e.setChangeToProps=function(t){var a=e.props.id,n=t.target.id,l=t.target.value,r=e.props[a];r[n]=l,e.setState(Object(w.a)({},a,r))},e.handleSelfChange=function(t){var a=e.props.id,n=t.target.id,l=t.target.value,r=e[a];r[n]=l,e[a]=r},e.handleSelfDateChange=function(t,a){var n={};a=ue()(a).format("YYYY-MM-DD"),n.target={id:t,value:a},e.handleSelfChange(n)},e.handleDateChange=function(t,a){var n={};a=ue()(a).format("YYYY-MM-DD"),n.target={id:t,value:a},e.handleChange(n)},e.handleMakeCopy=function(t){return function(a){e.props.onComponentChange(a,e.props.id);var n=a.target.value;document.getElementById(t).value=n,e.props.data[t]=n}},e.load_dp_rel_mgr=function(t){e.setState({data_prvdr_rel_mgr_dd:null});var a=v("data_prvdr_code");e.setOptionsToStateFromApi("rel_mgr",Object(Re.a)({},e.def_req,{associated_with:"data_prvdr",associated_entity_code:a}))},e.handleReset=function(t){e.props.onComponentReset(t,e.props.id)},e.handleEdit=function(t){e.setState({edit_mode:!0}),e.setState({edit_button_style:"hide_button"}),e.setState({save_button_style:"disable_div"}),e.setState({div_style:""})},e.handleSave=function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=e.getRequest();X(e.state.comp_name,e.req(n)).then(function(t){t&&("success"===t.status?(e.setState({div_style:"disable_div"}),e.setState({save_button_style:"hide_button"}),e.setState({edit_button_style:"show_button"}),alert(t.message),"reload"==a&&window.location.reload()):alert(t.message+"\n"+JSON.stringify(t.data)))})},e.getRequest=function(){var t=e.state;return t.id=e.props.data.id,t=Object(w.a)({},e.state.comp_name,t)},e.handleChange=e.handleChange.bind(Object(u.a)(Object(u.a)(e))),void 0==Object({NODE_ENV:"production",PUBLIC_URL:"",REACT_APP_ADMIN_API_ROOT:"/api/admin",REACT_APP_APP_API_ROOT:"/api/app",REACT_APP_CORE_API_ROOT:"/api/core",REACT_APP_URL:"http://app.flowglobal.net"}).REACT_APP_USE_ROOT_ONLY_DEV?e.root="":e.root="http://localhost:8000",e}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){"view"===this.props.mode?(this.setState({div_style:"disable_div"}),this.setState({edit_button_style:"show_button"}),this.setState({save_button_style:"hide_button"})):(this.setState({div_style:""}),this.setState({edit_button_style:"hide_button"}),this.setState({save_button_style:"hide_button"})),("disabled"===this.props.mode||"view"===this.props.mode&&"false"===this.props.editable)&&(this.setState({div_style:"disable_div"}),this.setState({button_style:"hide_button"}))}}]),t}(Le),Be=a(184),Ie=a(174),Ue=a(175);function We(e,t){return Ye(e)?"Each day":t+" days"}function Ye(e){return"each_day"===e||"1"===e}function Ve(e,t){return(new Intl.NumberFormat).format(e)+" "+t}function He(e){var t="";return Ye(arguments.length>1&&void 0!==arguments[1]?arguments[1]:null)&&(t=" (max duration)"),"1"==e?e+" day"+t:e+" days"+t}function ze(e,t){var a=Ve(Je(e),t),n="Percent"===e.flow_fee_type?e.flow_fee+"% | ":"(FLAT) "+Ve(e.flow_fee,t),l="";return"Percent"===e.flow_fee_type&&(l+=a),Ye(e.flow_fee_duration)&&(l+=" / day"),n+l}function Je(e){return Qe(e)*(e.flow_fee/100)}function Ge(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a="";return Ye(e.flow_fee_duration)&&(a=" *"),Ve(Ke(e),t)+a}function Ke(e){var t=function(e){var t=e.flow_fee;return"Percent"===e.flow_fee_type&&(t=Je(e)),Ye(e.flow_fee_duration)&&(t*=e.duration),Math.round(t)}(e);return Qe(e)+t}function Qe(e){return e.hasOwnProperty("max_loan_amount")?e.max_loan_amount:e.hasOwnProperty("loan_principal")?e.loan_principal:void 0}function Xe(e){return l.a.createElement("input",{id:e.id,type:"button",onClick:e.onClick,value:(t=e.entity,f(t,"edit")?"View / Edit":f(t,"list_view")?"View":void 0),className:"btn btn-primary"});var t}function Ze(e){var t=f(e.entity,"edit");return l.a.createElement(l.a.Fragment,null,t&&l.a.createElement("input",{type:"button",onClick:e.onClick,value:"Edit"}))}function $e(e){return l.a.createElement(Be.a,{overlay:l.a.createElement(Ie.a,{id:"tooltip"},e.biz_name,"/",e.cust_name)},l.a.createElement("span",{className:"d-inline-block"},e.data_prvdr_cust_id))}function et(e){var t="FA Amount :"+Ve(e.loan.loan_principal,e.currency_code)+"\nRepayment :"+Ge(e.loan,e.currency_code);return l.a.createElement(Be.a,{overlay:l.a.createElement(Ie.a,{id:"tooltip"},t)},l.a.createElement("span",{className:"d-inline-block"},e.loan.product_name))}function tt(e,t){var a=e.prod_csf_values,n=e.cs_model_code,r=e.result_configs;if(null!=t&&void 0!=t&&""!=t)var c=ve(t,"csf_type","meta_txn_start_date")[0],o=ve(t,"csf_type","meta_txn_end_date")[0],s=ve(t,"csf_type","meta_txn_days")[0],i=ve(t,"csf_type","meta_cal_days")[0],d=s.csf_normal_value+" days",m=[{code:"Txn Dates",value:fe(c.csf_normal_value,!1)+" to "+fe(o.csf_normal_value,!1)+" ("+i.csf_normal_value+" days)"},{code:"Nett Txn Days",value:d}].map(function(e,t){return l.a.createElement("div",null,l.a.createElement("span",{className:"cust_font"},"\xa0\xa0\xa0",de(e.code)," : ",e.value))});if(r)var u=r.map(function(e,t){return l.a.createElement("div",null,l.a.createElement("span",{className:"cust_font"},"\xa0\xa0\xa0 Score ",e.score_from," to ",e.score_to," - ",de(e.score_result_code)))});if(null!=a||void 0!=a){var p=a.map(function(e,t){return l.a.createElement("div",null,l.a.createElement("span",{className:"cust_font"},"\xa0\xa0\xa0",de(e.csf_type)," : ",e.csf_value," (",e.weightage,"%)"))});return l.a.createElement("div",null,l.a.createElement("b",{className:"cust_font"},"Score Model Name - ",de(n)," "),l.a.createElement("br",null),l.a.createElement("b",{className:"cust_font"},"Eligibility Criteria"),u,l.a.createElement("hr",null),l.a.createElement("b",{className:"cust_font"},"Score Factor Values"),p,m&&l.a.createElement(l.a.Fragment,null,l.a.createElement("hr",null),l.a.createElement("b",{className:"cust_font"},"Note"),m))}return l.a.createElement("label",null,e.result_msg)}function at(e){return l.a.createElement(Be.a,{overlay:l.a.createElement(Ue.a,null,tt(e.loan_product,e.meta_data))},l.a.createElement("span",{className:"d-inline-block"},e.loan_product.cust_score||"NA"))}function nt(e){var t=e.result_msg;if("eligible_by_approval"===e.result_code)t+=fe(e.customer.addl_appr_until);else if("requires_flow_rm_approval"===e.result_code)t=t+" : "+e.customer.flow_rel_mgr_name;else if("eligible"===e.result_code)return null;return l.a.createElement(l.a.Fragment,null,t&&l.a.createElement(Be.a,{overlay:l.a.createElement(Ie.a,{id:"tooltip"},t)},l.a.createElement("label",null,l.a.createElement("i",{style:{paddingLeft:"10px"}},"i"))))}function lt(e){return l.a.createElement("div",null,e.full_text?l.a.createElement(Be.a,{overlay:l.a.createElement(Ie.a,{id:"tooltip"},e.full_text," / ",e.overlay)},l.a.createElement("span",{className:"d-inline-block"},Ae(e.full_text))):l.a.createElement("span",{className:"d-inline-block"},"NA"))}function rt(e){return l.a.createElement("div",null,e.remarks?l.a.createElement(Be.a,{overlay:l.a.createElement(Ie.a,{id:"tooltip"},e.remarks)},l.a.createElement("span",{className:"d-inline-block"},Ae(e.remarks))):l.a.createElement("span",{className:"d-inline-block"},"NA"))}var ct=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={comp_name:"market"},a.handleChange1=function(e){var t={country_code:e.target.value};te(a.req(t)).then(function(e){e&&(a.props.data.currency_code=e.data[0].currency_code,a.setState({currency_code:e.data[0].currency_code}))})},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){Object(H.a)(Object(d.a)(t.prototype),"componentWillMount",this).call(this),this.setOptionsListToStateFromAppApi("common","country"),this.setOptionsListToStateFromAppApi("common","currency")}},{key:"render",value:function(){var e=this;return l.a.createElement("div",{id:""},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-2"},l.a.createElement("h4",null,this.props.title?this.props.title:"Market Details")),l.a.createElement("div",{className:this.state.button_style},l.a.createElement("div",{className:"col-md-1 ".concat(this.state.edit_button_style)},l.a.createElement(Ze,{entity:"market",onClick:this.handleEdit})),l.a.createElement("div",{className:"col-md-1 ".concat(this.state.save_button_style)},l.a.createElement("input",{onClick:this.handleSave,type:"button",className:"btn btn-success",value:"Save"})))),l.a.createElement("div",{className:this.state.div_style},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-3"},l.a.createElement("span",null,"Country"),l.a.createElement("font",{className:"text-danger"},"   *  "),l.a.createElement("select",{id:"country_code",value:this.props.data.country_code,onChange:function(t){e.handleChange(t),e.handleChange1(t)},required:"required",className:"form-control"},this.state.country_dd||De)),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("span",null,"Currency"),l.a.createElement("font",{className:"text-danger"},"   *  "),l.a.createElement("select",{id:"currency_code",value:this.props.data.currency_code,onChange:this.handleChange,className:"form-control",required:"required"},this.state.currency_dd||De)),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("span",null,"ISD Code"),l.a.createElement("font",{className:"text-danger"},"   *  "),l.a.createElement("input",{type:"number",id:"isd_code",value:this.props.data.isd_code,maxLength:5,onChange:this.handleChange,required:!0,className:"form-control"})))))}}]),t}(Te),ot=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(i.a)(this,Object(d.a)(t).call(this))).state={comp_name:"address",addr_config:[],borrower_country:"disable_div"},e.handleCountryChange=function(t){e.handleReset(),e.addr_country_code=t.target.value,e.props.data.country_code=t.target.value,e.loadAddressUI(t.target.value),e.handleChange(t)},e.process=function(t,a,n){alert("process");var l;l=a+", "+n,e.setState({gps_error:!1,gps_lat:a,gps_lon:n,gps_value:l})},e.success=function(t){var a=t.coords.latitude,n=t.coords.longitude,l=a+", "+n;e.setState({gps_error:!1,gps_lat:a,gps_lon:n,gps_value:l,loading:null});var r={target:{id:"gps",value:l}};e.handleChange(r)},e.error=function(t){e.setState({gps_error:"Unable to retrieve your location",loading:null})},e.locateMe=function(t){navigator.geolocation?(navigator.geolocation.getCurrentPosition(e.success,e.error,{enableHighAccuracy:!0,timeout:5e4}),e.setState({loading:"Finding your location..."})):e.setState({gps_error:"Geolocation is not supported by your browser"})},e.mounted=0,e.success=e.success.bind(Object(u.a)(Object(u.a)(e))),e.process=e.process.bind(Object(u.a)(Object(u.a)(e))),e}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){Object(H.a)(Object(d.a)(t.prototype),"componentWillMount",this).call(this),this.setOptionsListToStateFromAppApi("common","country")}},{key:"componentDidMount",value:function(){"view"==this.props.mode?(this.props.data.country_code=this.country_code,this.loadAddressUI(this.props.data.country_code),this.addr_country_code=this.props.data.country_code):this.loadAddressUI(this.country_code)}},{key:"loadAddressUI",value:function(e){var t=this;if(void 0!==e){this.setState({addr_config:[],loading_addr:"LOADING ADDRESS FORM. PLEASE WAIT"});var a;(a=this.req({country_code:e,status:"enabled"}),F("/api/admin/address/addr_config",a)).then(function(a){if(a)if(t.setState({loading_addr:null}),"success"==a.status&&a.data.addr_config.length>0)if(t.setState({addr_config:a.data.addr_config}),t.selects=t.getAllSelects(a.data.addr_config,t.props.mode),"view"==t.props.mode||"create"==t.props.mode)t.fillAllSelects(t.selects,e,"enabled");else{var n=a.data.addr_config[0].field_code;t.setState(Object(w.a)({},n+"_dd",De)),t.setOptionsListToStateFromAppApi("common","dropdown",t.req({country_code:e,status:"enabled",field_code:n}),["data_code","data_value"],n)}else alert("Please ensure address form is configured correctly for "+e)})}else this.setState({addr_config:[],loading_addr:"NO COUNTRY TO LOAD"})}},{key:"createUI",value:function(){var e=this,t=(arguments.length>0&&void 0!==arguments[0]&&arguments[0],this.state.addr_config.map(function(t,a){var n=null;return"gps"==t.field_code&&(n=e.createGps(t.field_code,a)),"text"==t.field_type?n=e.createText(t.field_code,a):"select"==t.field_type&&(n=e.createSelect(t.field_code,a)),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("span",null,t.field_name),e.getMandatoryTag(t.field_type,t.validation_rules),n)}));return t.push(l.a.createElement("div",{className:"col-md-3",style:{paddingTop:"15px"}},l.a.createElement("button",{id:"gps",type:"button",className:"btn btn-primary",onClick:this.locateMe},"Locate Me"),this.state.gps_error&&l.a.createElement("p",null,this.state.gps_error))),l.a.createElement("div",null,l.a.createElement("div",{className:"row"},t.shift(),t.shift(),t.shift(),t.shift()),l.a.createElement("div",{className:"row"},t.shift(),t.shift(),t.shift(),t.shift()),l.a.createElement("div",{className:"row"},t.shift(),t.shift(),t.shift(),t.shift()))}},{key:"createText",value:function(e,t){return l.a.createElement("input",{id:e,value:this.props.data[e],onChange:this.handleChange.bind(this),className:"form-control",type:"text",required:"required"})}},{key:"createGps",value:function(e,t){return l.a.createElement(l.a.Fragment,null,this.state.loading&&l.a.createElement("p",null,this.state.loading),this.state.gps_value?l.a.createElement("p",null,l.a.createElement("b",null,"Lat, Lon: ",this.state.gps_value)):l.a.createElement("p",null,l.a.createElement("b",null,"Lat, Lon: ",this.props.data[e])))}},{key:"createSelect",value:function(e,t){return l.a.createElement("div",null,l.a.createElement("select",{id:e,value:this.props.data[e],onChange:this.loadChild.bind(this),className:"form-control",type:"text",required:"required"},this.state[e+"_dd"]))}},{key:"getMandatoryTag",value:function(e,t){if("select"===e||"required"===t)return l.a.createElement("font",{className:"text-danger"},"   *  ")}},{key:"fillAllSelects",value:function(e,t,a){var n=this,l=null;e.forEach(function(e){var r,c=e.field_code,o=null;l?(r=n.props.data[l.field_code],o={country_code:t,status:a,field_code:c,parent_data_code:r}):o={country_code:t,status:a,field_code:c},n.setOptionsListToStateFromAppApi("common","dropdown",n.req(o),["data_code","data_value"],e.field_code),l=e})}},{key:"getAllSelects",value:function(e,t){var a=this,n=[];return e.forEach(function(e){if("select"===e.field_type){n.push(e);var l,r=e.field_code;l="view"==t?De:[],a.setState(Object(w.a)({},r+"_dd",l))}}),n}},{key:"loadChild",value:function(e){this.handleChange(e);var t=e.target.id;this.getChildFieldCode(t);var a=this.child_field_code;if(null!=a){this.setState(Object(w.a)({},a+"_dd",De));var n=e.target.value,l={country_code:this.country_code,status:"enabled",field_code:a,parent_data_code:n};this.setOptionsListToStateFromAppApi("common","dropdown",this.req(l),["data_code","data_value"],a)}}},{key:"getChildFieldCode",value:function(e){var t=this;this.state.addr_config.forEach(function(a){a.field_code===e&&(t.child_field_code=a.child_field_code)})}},{key:"render",value:function(){return l.a.createElement("div",{id:""},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-3"},l.a.createElement("h4",null,this.props.title?this.props.title:"")),l.a.createElement("div",{className:"col-md-1 ".concat(this.state.edit_button_style)},l.a.createElement(Ze,{entity:this.props.entity,onClick:this.handleEdit})),l.a.createElement("div",{className:"col-md-1 ".concat(this.state.save_button_style)},l.a.createElement("input",{onClick:this.handleSave,type:"button",className:"btn btn-success",value:"Save"}))),l.a.createElement("div",{className:this.state.div_style},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-3"},l.a.createElement("span",null,"Country"),l.a.createElement("font",{className:"text-danger"},"   *  "),this.props.screen?l.a.createElement("div",{className:this.state.borrower_country},l.a.createElement("input",{type:"text",id:"country_code",value:this.country_code,className:"form-control"})):l.a.createElement("select",{id:"country_code",value:this.props.data.country_code,onChange:this.handleCountryChange.bind(this),required:"required",className:"form-control"},this.state.country_dd||De))),this.createUI(this.state.gps_value),this.state.loading_addr),l.a.createElement("br",null))}}]),t}(Te),st=a(20),it=a.n(st),dt=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={org:null,comp_name:"org",dropdown_div_style:"disable_div"},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){Object(H.a)(Object(d.a)(t.prototype),"componentWillMount",this).call(this)}},{key:"render",value:function(){var e=this;return l.a.createElement("div",{id:""},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-4"},l.a.createElement("h4",null,this.props.title?this.props.title:"Organisation Details")),l.a.createElement("div",{className:"col-md-1 ".concat(this.state.edit_button_style)},l.a.createElement(Ze,{entity:this.props.entity,onClick:this.handleEdit})),l.a.createElement("div",{className:"col-md-1 ".concat(this.state.save_button_style)},l.a.createElement("input",{onClick:this.handleSave,type:"button",className:"btn btn-success",value:"Save"}))),l.a.createElement("div",{className:this.state.div_style},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-3"},l.a.createElement("span",null,"General Name"),l.a.createElement("font",{className:"text-danger"},"   *  "),l.a.createElement("input",{id:"name",value:this.props.data.name,onChange:this.toUpperHandleChange,onKeyUp:this.handleMakeCopy("inc_name"),className:"form-control",type:"text",required:"required"})),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("span",null,"Name of Incorporation"),l.a.createElement("input",{id:"inc_name",value:this.props.data.inc_name,onChange:this.handleChange,className:"form-control",type:"text"})),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("span",null,"Incorporation Number"),l.a.createElement("input",{id:"inc_number",value:this.props.data.inc_number,onChange:this.handleChange,className:"form-control",type:"text"})),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("span",null,"Date of Incorporation"),l.a.createElement(it.a,{value:fe(this.props.data.inc_date),closeOnSelect:!0,onChange:function(t){e.handleDateChange("inc_date",t)},dateFormat:"DD MMM YYYY",timeFormat:!1,required:"required"}))),l.a.createElement("br",null),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-3"},l.a.createElement("span",null,"TAX Identifier"),l.a.createElement("input",{id:"tax_id",value:this.props.data.tax_id,onChange:this.handleChange,className:"form-control",type:"text"})))))}}]),t}(Te),mt=function(e){return F("/api/admin/file/upload",e)},ut=function(e){return F("/api/admin/file/remove",e)},pt=function(e){return F("/api/admin/file/rel_path",e)},ht=a(180),_t=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(i.a)(this,Object(d.a)(t).call(this))).state={action:"Upload",reset_btn:"show_div",view_btn:"hide_div"},e.resetFile=function(t){e.fileInput.value=null,e.setState({action:"Upload",file:null})},e.load_props_for_view=function(t){if(t.borrower_id?(e.entity_type="borrowers",e.entity_id=t.borrower_id,e.entity_code=t.cust_id):t.person_id?(e.entity_type="persons",e.entity_id=t.person_id,e.entity_code=t.person_id):t.lender_id?(e.entity_type="lenders",e.entity_id=t.lender_id,e.entity_code=t.lender_code):t.data_prvdr_id?(e.entity_type="data_prvdrs",e.entity_id=t.data_prvdr_id,e.entity_code=t.data_prvdr_code):t.acc_prvdr_id&&(e.entity_type="acc_providers",e.entity_id=t.acc_prvdr_id,e.entity_code=t.acc_prvdr_code),t.db_file_name){var a={entity_code:e.entity_code,file_of:e.props.id};pt(e.req(a)).then(function(a){if(a){var n=a.data.file_rel_path;e.setState({action:"Remove",reset_btn:"hide_div",view_btn:"show_div",file_name:t.db_file_name,file_rel_path:n})}})}},e.handleUploadFile=function(t){if(t.preventDefault(),t.persist(),"Upload"==e.state.action){var a={file_of:e.props.id,cust_id:e.props.cust_id,aggr_doc_id:e.props.aggr_doc_id,file_data_type:e.state.file_data_type,file_data:e.state.file,file_name:e.state.file_name,file_type:e.state.file_type,country_code:e.country_code};a.file_data?mt(e.req(a)).then(function(a){a&&e.processUploadResponse(a,t)}):alert("Please choose the file to upload")}else if("Remove"==e.state.action){if(window.confirm("Are you sure to remove the file? The file will be permanently deleted.")){var n={file_of:e.props.id,file_name:e.state.file_name,country_code:e.country_code,file_rel_path:e.state.file_rel_path,entity_type:e.entity_type,entity_id:e.entity_id};ut(e.req(n)).then(function(t){e.setState({file:null,action:"Upload",reset_btn:"show_div",view_btn:"hide_div"}),t&&alert(t.message)})}}},e.handleViewButton=function(t){e.setState({modalBox:!0})},e.handleClose=function(t){e.setState({modalBox:!1})},e.loaded=!1,void 0==Object({NODE_ENV:"production",PUBLIC_URL:"",REACT_APP_ADMIN_API_ROOT:"/api/admin",REACT_APP_APP_API_ROOT:"/api/app",REACT_APP_CORE_API_ROOT:"/api/core",REACT_APP_URL:"http://app.flowglobal.net"}).REACT_APP_USE_ROOT_ONLY_DEV?e.root="":e.root="http://localhost:8000",e}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){this.setState({action:"Upload",reset_btn:"show_div",view_btn:"hide_div"})}},{key:"componentWillReceiveProps",value:function(e){this.loaded||("view"==e.mode&&this.load_props_for_view(e),this.loaded=!0)}},{key:"handleFileChange",value:function(e){var t=e.target.files;this.createImage(t[0])}},{key:"createImage",value:function(e){var t=this,a=new FileReader;a.onload=function(a){t.setState({file:a.target.result,file_type:e.type,file_name:e.name,file_data_type:"data-url"})},a.readAsDataURL(e)}},{key:"processUploadResponse",value:function(e,t){var a={target:{id:"orig_"+this.props.id,value:e.data.original_file_name}};t.target.id=this.props.id,t.target.value=e.data.file_name,t.target.value=e.data.file_name,"view"===this.props.mode?(this.props.onEditUpload(t),this.props.onEditUpload(a)):"create"===this.props.mode&&(this.props.onCreateUpload(t),this.props.onCreateUpload(a)),this.setState({action:"Remove",reset_btn:"hide_div",view_btn:"show_div",file_rel_path:e.data.file_rel_path,file_name:e.data.file_name}),"create"===this.props.mode&&alert("File attached successfully. Please submit the form to complete file upload.")}},{key:"render",value:function(){var e=this;return l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-6"},l.a.createElement("span",null,this.props.label?this.props.label:""),this.props.is_mandatory&&l.a.createElement("font",{className:"text-danger"},"   *  "),"cust_txn_file"==this.props.id&&l.a.createElement("a",{href:this.root+"/files/UGA/data_providers/sample_file.xls"},"( Download Sample File )"),"Remove"===this.state.action?l.a.createElement("b",null,l.a.createElement("label",null,this.state.file_name)):l.a.createElement("input",{type:"file",id:"file",onChange:function(t){return e.handleFileChange(t)},ref:function(t){return e.fileInput=t},className:"form-control"})),"cust_txn_file"==this.props.id?l.a.createElement("div",null):l.a.createElement("div",{className:this.state.view_btn},l.a.createElement("div",{className:"col-md-2"},l.a.createElement("br",null),l.a.createElement("input",{type:"button",className:"btn btn-primary",value:"View",onClick:this.handleViewButton}))),l.a.createElement("div",{id:this.props.id,value:this.state.file_name,className:"col-md-2",onClick:this.handleUploadFile},l.a.createElement("br",null),l.a.createElement("input",{type:"button",className:"btn btn-primary",value:this.state.action})),l.a.createElement("div",{className:this.state.reset_btn},l.a.createElement("div",{className:"col-md-2"},l.a.createElement("br",null),l.a.createElement("input",{type:"button",className:"btn btn-primary reset",value:"Reset File",onClick:this.resetFile}))),l.a.createElement("div",null,l.a.createElement(ht.a,{show:this.state.modalBox,onHide:this.handleClose,size:"Logo"==this.props.label?"sm":"lg"},l.a.createElement(ht.a.Header,{closeButton:!0,show:this.state.modalBox,onHide:this.handleClose},l.a.createElement(ht.a.Title,null,this.props.label)),l.a.createElement(ht.a.Body,null,"Logo"==this.props.label?l.a.createElement("img",{src:this.root+this.state.file_rel_path+"/m_"+this.state.file_name,alt:this.state.file_rel_path+"/m_"+this.state.file_name}):l.a.createElement("img",{src:this.root+this.state.file_rel_path+"/l_"+this.state.file_name,alt:this.state.file_rel_path+"/l_"+this.state.file_name})))))}}]),t}(Te),Et=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={comp_name:"person",initials:null,date:new Date},a.handleKeyUp=function(e){return function(t){a.props.onComponentChange(t,a.props.id);var n=t.target.value.charAt(0).toUpperCase();document.getElementById(e).value=n,a.props.data[e]=n}},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return l.a.createElement("div",{id:""},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-3"},l.a.createElement("h4",null,this.props.title?this.props.title:"")),l.a.createElement("div",{className:"col-md-1 ".concat(this.state.edit_button_style)},l.a.createElement(Ze,{entity:this.props.entity,onClick:this.handleEdit})),l.a.createElement("div",{className:"col-md-1 ".concat(this.state.save_button_style)},l.a.createElement("input",{onClick:this.handleSave,type:"button",className:"btn btn-success",value:"Save"}))),l.a.createElement("div",{className:this.state.div_style},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-3"},l.a.createElement("span",null,"First Name"),l.a.createElement("font",{className:"text-danger"},"   *  "),l.a.createElement("input",{id:"first_name",value:this.props.data.first_name,onKeyUp:this.handleKeyUp("initials"),onChange:this.toUpperHandleChange,type:"text",className:"upperCase form-control",required:"required"})),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("span",null,"Middle Name"),l.a.createElement("input",{id:"middle_name",onChange:this.toUpperHandleChange,value:this.props.data.middle_name,className:"form-control",type:"text"})),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("span",null,"Last Name"),l.a.createElement("font",{className:"text-danger"},"   *  "),l.a.createElement("input",{id:"last_name",value:this.props.data.last_name,onChange:this.toUpperHandleChange,className:"form-control",type:"text"})),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("span",null,"Initials"),l.a.createElement("input",{id:"initials",value:this.props.data.initials,onChange:this.toUpperHandleChange,className:"form-control",type:"text"}))),l.a.createElement("br",null),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-3"},l.a.createElement("span",null,"Date of birth"),l.a.createElement(it.a,{value:fe(this.props.data.dob),closeOnSelect:!0,onChange:function(t){e.handleDateChange("dob",t)},dateFormat:"DD MMM YYYY",timeFormat:!1,required:"required"})),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("span",null,"Gender"),l.a.createElement("font",{className:"text-danger"},"   *  "),l.a.createElement("select",{id:"gender",value:this.props.data.gender,onChange:this.handleChange,className:"form-control",type:"text"},this.getSelectOptions("gender"))),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("span",null,"Email ID"),"owner_person"===this.props.id||"contact_person"===this.props.id?l.a.createElement("div",null):l.a.createElement("font",{className:"text-danger"},"   *  "),l.a.createElement("input",{id:"email_id",value:this.props.data.email_id,className:"form-control",onChange:this.handleChange,type:"text",required:"required"})),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("span",null,"Mobile Number"),l.a.createElement("font",{className:"text-danger"},"   *  "),l.a.createElement("input",{id:"mobile_num",value:this.props.data.mobile_num,onChange:this.handleChange,onKeyUp:this.handleMakeCopy("whatsapp"),className:"form-control",type:"text"}))),l.a.createElement("br",null),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-3"},l.a.createElement("span",null,"Messenger Number"),l.a.createElement("input",{id:"whatsapp",value:this.props.data.whatsapp,onChange:this.handleChange,className:"form-control",type:"text"})),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("span",null,"Landline"),l.a.createElement("input",{id:"phone_num",value:this.props.data.phone_num,onChange:this.handleChange,className:"form-control",type:"text"})),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("span",null,"Designation"),"owner_person"===this.props.id||"contact_person"===this.props.id?l.a.createElement("div",null):l.a.createElement("font",{className:"text-danger"},"   *  "),l.a.createElement("input",{id:"designation",value:this.props.data.designation,onChange:this.handleChange,className:"form-control",type:"text",required:"required"})),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("span",null,"National ID"),l.a.createElement("font",{className:"text-danger"},"   *  "),l.a.createElement("input",{type:"text",id:"national_id",value:this.props.data.national_id,onChange:this.handleChange,className:"form-control",required:"required"}))),l.a.createElement("br",null),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-3"},l.a.createElement("span",null,"Nationality"),l.a.createElement("input",{id:"nationality",value:this.props.data.nationality,onChange:this.handleChange,className:"form-control",type:"text"})),"Business Owner Details"==this.props.title&&l.a.createElement("div",{className:"col-md-9"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-6"},l.a.createElement(_t,{id:"photo_national_id",label:"National ID Photo",type:"image",mode:this.props.mode,person_id:this.props.data.id,db_file_name:this.props.data.photo_national_id,onEditUpload:function(t){e.handleChangeForEdit(t),e.handleSave(t,"reload")},onCreateUpload:this.handleChange})),l.a.createElement("div",{className:"col-md-6"},l.a.createElement(_t,{id:"photo_pps",label:"Passport Size Photo",person_id:this.props.data.id,db_file_name:this.props.data.photo_pps,type:"image",mode:this.props.mode,onEditUpload:function(t){e.handleChangeForEdit(t),e.handleSave(t,"reload")},onCreateUpload:this.handleChange}))))),l.a.createElement("br",null)))}}]),t}(Te),vt=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={toList:!1,org:{},reg_address:{},head_person:{},market:{country_code:a.country_code,currency_code:a.currency_code}},a.handleSubmit=function(e){e.preventDefault();var t=a.state.market,n=a.state.org;n.reg_address=a.state.reg_address,n.country_code=a.country_code,t.org=n,t.head_person=a.state.head_person,t.head_person.country_code=a.country_code,K(a.req({market:t})).then(function(e){e&&("success"===e.status?(a.setState({new_country_code:e.data}),a.setState({toList:!0}),alert("New Market created successfully")):alert(e.message+"\n"+JSON.stringify(e.data)))})},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){var e,t=this;if("view"===this.props.mode){var a=this.props.match.params.country_code;(e=this.req({country_code:a}),F("/api/admin/market/view",e)).then(function(e){e&&(t.market=e.data,t.setState({market:t.market,org:t.market.org,head_person:t.market.head_person,reg_address:t.market.org.reg_address}))})}else this.props.mode}},{key:"render",value:function(){return!0===this.state.toList?l.a.createElement(B.a,{to:"/market/view/".concat(this.state.new_country_code)}):l.a.createElement("div",{className:"container"},l.a.createElement("h4",null,this.props.title+(this.state.market.name?" : "+this.state.market.name:"")),l.a.createElement("form",{id:"market_form",onSubmit:this.handleSubmit},l.a.createElement("div",{id:""},l.a.createElement(ct,{id:"market",title:"Market Details",editable:"false",data:this.state.market,mode:this.props.mode,onComponentChange:this.handleComponentChange}),l.a.createElement("br",null),l.a.createElement("hr",null),l.a.createElement("br",null),l.a.createElement(dt,{id:"org",title:"Organisation Details",entity:"market",data:this.state.org,mode:this.props.mode,onComponentChange:this.handleComponentChange}),l.a.createElement("br",null),l.a.createElement("hr",null),l.a.createElement(ot,{id:"reg_address",title:"Registered Address",entity:"market",data:this.state.reg_address,mode:this.props.mode,onComponentChange:this.handleComponentChange,onComponentReset:this.handleComponentReset}),l.a.createElement("br",null),l.a.createElement("hr",null),l.a.createElement(Et,{id:"head_person",title:"Market Head",entity:"market",data:this.state.head_person,mode:this.props.mode,onComponentChange:this.handleComponentChange}),l.a.createElement("br",null),l.a.createElement("input",{type:"button",className:"btn btn-primary ".concat("create"===this.props.mode?"show_button":"hide_button"),onClick:this.handleSubmit,value:"Create New Market"}))),l.a.createElement("br",null),l.a.createElement("br",null))}}]),t}(qe),gt=(a(32),a(176)),ft=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).updateStatus=function(e){if(0!=window.confirm("Are you sure to change the status?")){var t=e.target.value.toLowerCase()+"d",n={id:e.target.id,status:t},l=Object(w.a)({},e.target.name,n);le(a.req(l)).then(function(e){e&&("success"===e.status?a.setState({status:t}):alert(e.message+"\n"+JSON.stringify(e.data)))})}},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){this.setState({status:this.props.status});var e=this.props.parent;e||("borrower"==(e=this.props.entity.slice(0,-1))?e="customer":"loan_product"==e?e="product":"loan_product_template"==e?e="template":"acc_provider"==e?e="acc_prvdr":"master_data_key"==e&&(e="data_key"));f(e,"create")?this.btn_style=!1:this.btn_style=!0}},{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("td",null,l.a.createElement(gt.a,{className:"badge",pill:!0,variant:Se(this.state.status)},l.a.createElement("span",null,"enabled"===this.state.status?"E":"D"))),l.a.createElement("td",null," ",l.a.createElement("input",{id:this.props.id,type:"button",name:this.props.entity,onClick:this.updateStatus,value:Ne(this.state.status),className:ke(this.state.status),disabled:this.btn_style})))}}]),t}(Te),bt=a(7),yt=a.n(bt),wt=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={marketList:null,toView:!1},a.handleClick=function(e){a.setState({country_code:e.target.id,toView:!0})},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){var e,t=this;(e=this.req(null),F("/api/admin/market/list",e)).then(function(e){if(e){var a=e.data.map(function(e,a){return l.a.createElement("tr",{key:a},l.a.createElement("td",null," ",de(e.country_code)),l.a.createElement("td",null," ",e.name," ",l.a.createElement("br",null)," ",e.inc_name),l.a.createElement("td",null," ",e.currency_code),l.a.createElement("td",null," ",de(e.time_zone)),l.a.createElement(ft,{id:e.market_id,entity:"markets",status:e.status}),l.a.createElement("td",null,l.a.createElement(Xe,{id:e.country_code,entity:"market",onClick:t.handleClick})))});t.setState({marketList:a}),yt()("#market").removeAttr("width").dataTable({order:[],columns:[{width:"10%"},{width:"10%"},{width:"10%"},{width:"10%"},{width:"10%"},{width:"10%"},{width:"10%"}],dom:"Bfrtip",buttons:["csv","excel","print"]})}})}},{key:"render",value:function(){return!0===this.state.toView?l.a.createElement(B.a,{to:"/market/view/".concat(this.state.country_code)}):null!=this.state.marketList?l.a.createElement("div",{id:"datatable",className:"display strip row-border order-column"},l.a.createElement("h4",null,this.props.title||"Market List"),l.a.createElement("table",{id:"market"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"Country"),l.a.createElement("th",null,"Market Name"),l.a.createElement("th",null,"Currency"),l.a.createElement("th",null,"Time Zone"),l.a.createElement("th",null,"Status"),l.a.createElement("th",null,"Action"),l.a.createElement("th",null,"Action"))),l.a.createElement("tbody",null,this.state.marketList))):l.a.createElement("div",null,l.a.createElement("p",null,"No Markets Available ! "))}}]),t}(qe),Ct=function(e){return F("/api/admin/lender",e)},Nt=function(e){return F("/api/admin/account/create",e)},kt=function(e){return F("/api/admin/account/make_primary",e)},St=function(e){return F("/api/admin/account/update",e)},Ot=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={edit_account:{}},a.handleSave=function(e){var t={account:a.state.edit_account};St(a.req(t)).then(function(e){e&&("success"===e.status?(alert(e.message),a.setState({toList:!0})):alert(e.message+"\n"+JSON.stringify(e.data)))})},a.handleBackBtn=function(e){a.props.handleBackClick(e)},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){var e=this,t={account_id:this.props.account_id};(function(e){return F("/api/admin/account/view",e)})(this.req(t)).then(function(t){t&&("success"===t.status?e.setState({edit_account:t.data.account}):alert(t.message+"\n"+JSON.stringify(t.data)))})}},{key:"render",value:function(){return this.state.toList?l.a.createElement(Pt,{entity:this.props.entity,entity_id:this.props.entity_id}):l.a.createElement("div",null,l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-3"},l.a.createElement("label",null,l.a.createElement("b",null,"Account Provider")),"\xa0\xa0\xa0"),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("label",null,this.state.edit_account.acc_prvdr_name))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-3"},l.a.createElement("label",null,l.a.createElement("b",null,"Account Type")),"\xa0\xa0\xa0"),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("label",null,this.state.edit_account.type))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-3"},l.a.createElement("label",null,l.a.createElement("b",null,"Account Number")),"\xa0\xa0\xa0"),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("label",null,this.state.edit_account.acc_number))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-3"},l.a.createElement("label",null,"Account Holder Name"),l.a.createElement("font",{className:"text-danger"}," "),l.a.createElement("input",{type:"text",id:"holder_name",value:this.state.edit_account.holder_name,onChange:this.setChangeToState,className:"form-control",required:!0})),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("label",null,"Account Purpose"),l.a.createElement("select",{id:"acc_purpose",value:this.state.edit_account.acc_purpose,onChange:this.setChangeToState,className:"form-control"},this.getSelectOptions("account_purpose"))),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("label",null,"Branch"),l.a.createElement("input",{type:"text",id:"branch",value:this.state.edit_account.branch,onChange:this.setChangeToState,className:"form-control"})),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("br",null),l.a.createElement("input",{type:"button",value:"Save",className:"btn btn-success",onClick:this.handleSave}),"\xa0\xa0\xa0",l.a.createElement("input",{type:"button",value:"Back",className:"btn btn-primary",onClick:this.handleBackBtn}))),l.a.createElement("br",null))}}]),t}(Te),At=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={comp_name:"account",toList:!1},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){Object(H.a)(Object(d.a)(t.prototype),"componentWillMount",this).call(this),this.setOptionsListToStateFromAppApi("common","list",this.def_req,["acc_prvdr_code","name"],"acc_prvdrs"),this.setOptionsListToStateFromAppApi("common","list",this.def_req,["account_types","account_types"],"acc_types"),"lender"==this.props.entity?(this.setOptionsToStateFromApi("data_provider"),this.acc_purpose=[{id:"disbursement",name:"Disbursement / Repayment"},{id:"repayment",name:"Repayment"}]):"data_prvdr"==this.props.entity?this.acc_purpose=[{id:"commission",name:"Commission"}]:"customer"==this.props.entity&&(this.acc_purpose=[{id:"float_advance",name:"Float Advance"}]),this.getSelectOptionsFromResult(this.acc_purpose,"acc_purpose",["id","name"])}},{key:"render",value:function(){var e=this;return l.a.createElement("div",{id:""},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-3"},l.a.createElement("h4",null,"Account Details"))),"lender"==this.props.entity&&l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-3"},l.a.createElement("span",null,"Data Provider"),l.a.createElement("font",{className:"text-danger"},"   *  "),l.a.createElement("select",{id:"lender_data_prvdr_code",onChange:this.handleChange,className:"form-control",type:"text",required:"required"},this.state.data_provider_dd))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-3"},l.a.createElement("span",null,"Account Provider"),l.a.createElement("font",{className:"text-danger"},"   *  "),l.a.createElement("select",{id:"acc_prvdr_code",value:this.props.data.acc_prvdr_code,onChange:this.handleChange,className:"form-control",type:"text",required:"required"},this.state.acc_prvdrs_dd)),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("span",null,"Account Purpose"),l.a.createElement("font",{className:"text-danger"},"   *  "),l.a.createElement("select",{id:"acc_purpose",value:this.props.data.acc_purpose,onChange:this.handleChange,className:"form-control",required:!0},this.state.acc_purpose_dd)),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("span",null,"Account Type"),l.a.createElement("font",{className:"text-danger"},"   *  "),l.a.createElement("select",{id:"type",value:this.props.data.type,onChange:this.handleChange,className:"form-control",type:"text",required:"required"},this.getSelectOptions("account_type"))))," ",l.a.createElement("br",null),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-3"},l.a.createElement("span",null,"Account Holder Name"),l.a.createElement("font",{className:"text-danger"}," "),l.a.createElement("input",{id:"holder_name",value:this.props.data.holder_name,onChange:this.toUpperHandleChange,className:"form-control",required:!0})),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("span",null,"Account Number"),l.a.createElement("font",{className:"text-danger"},"   *  "),l.a.createElement("input",{id:"acc_number",value:this.props.data.acc_number,onChange:this.handleChange,className:"form-control",required:!0})),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("span",null,"Branch"),l.a.createElement("font",{className:"text-danger"}),l.a.createElement("input",{id:"branch",value:this.props.data.branch,onChange:this.handleChange,className:"form-control",required:!0}))),"  ",l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-3"},l.a.createElement("label",null,l.a.createElement("input",{type:"checkbox",id:"is_primary_acc",value:this.props.data.is_primary_acc,onChange:function(t){e.handleChange({target:{id:t.target.id,value:t.target.checked}})}}),"\xa0 Is Primary Account"))))}}]),t}(Te),xt=function(e){return F("/api/admin/account/create_acc_txn",e)},jt=function(e){return F("/api/admin/account/ref_accounts",e)},Dt=function(e){return F("/api/admin/account/search",e)},Ft=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={txn_cat_name:"Ref Account",ref_acc_section_style:"show_div",cr_dr_style:"show_div",cr_dr:!1},a.addAccTxn=function(e){var t=a.props.entity+"_code",n={acc_id:a.props.account.id,country_code:a.country_code};n[t]=a.props.entity_id,jt(a.req({account:n})).then(function(e){e&&("success"===e.status?""!=e.data&&a.getSelectOptionsFromResult(e.data,"ref_accounts",["id","name"]):(a.setState({ref_acc_section_style:"hide_div",cr_dr_style:"hide_div"}),alert(e.message+"\n"+JSON.stringify(e.data))))});re(a.req({status:"enabled"})).then(function(e){e&&("success"===e.status?a.getSelectOptionsFromResult(e.data.list,"app_users",["id","name_email"]):alert(e.message+"\n"+JSON.stringify(e.data)))}),"disbursement"==a.props.account.acc_purpose?(a.setState({modalBox:!0}),a.acc_txn.acc_txn_type="capital_investment",a.acc_txn.acc_txn_category="credit",e.target.id="acc_txn_category",e.target.value="credit",a.handleCategoryChange(e,!1)):a.setState({modalBox:!0})},a.handleClose=function(e){a.setState({modalBox:!1})},a.handleAddTxn=function(e){a.acc_txn.acc_id=a.props.account.id;var t={country_code:a.country_code,acc_txn:a.acc_txn};xt(a.req(t)).then(function(e){e&&("success"===e.status?window.location.reload():alert(e.message+"\n"+JSON.stringify(e.data)))})},a.handleCheckbox=function(e){var t=null,n=!1;e.target.checked?(t="show_div",n=!0):(a.ref_acc_id.value="",t="disable_div",n=!1),a.setState({cr_dr:n,ref_acc_section_style:t})},a.handleCategoryChange=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n="disable_div",l="show_div",r=null;"credit"==e.target.value?r="Debit this A/C":"debit"==e.target.value?r="Credit this A/C":(l="hide_div",n="hide_div"),a.setState({txn_cat_name:r,cr_dr_style:l,ref_acc_section_style:n,cr_dr:!1}),a.handleSelfChange(e),t&&(a.ref_acc_id.value="")},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){this.acc_txn={},"lender"==this.props.entity&&(this.txn_type=[{id:"capital_investment",name:"Capital Investment"},{id:"repayment_internal_transfer",name:"Repayment Internal Transfer"},{id:"others",name:"Others"}],this.getSelectOptionsFromResult(this.txn_type,"acc_txn_type",["id","name"])),f(this.props.entity,"add_acc_txn")?this.add_txn_btn_style="show_div":this.add_txn_btn_style="disable_div"}},{key:"render",value:function(){var e,t=this;return l.a.createElement(l.a.Fragment,null,l.a.createElement("input",{type:"button",value:"Add Txn",onClick:this.addAccTxn,className:"btn btn-primary ".concat(this.add_txn_btn_style)}),l.a.createElement(ht.a,{show:this.state.modalBox,onHide:this.handleClose,size:"xl"},l.a.createElement(ht.a.Header,{closeButton:!0,show:this.state.modalBox,onHide:this.handleClose},l.a.createElement(ht.a.Title,null,l.a.createElement("h3",null,"Add Transaction for ",(e=this.props.account).acc_prvdr_name+" ("+de(e.type,"account_type")+" - "+de(e.acc_purpose,"account_purpose")+") "+e.acc_number))),l.a.createElement(ht.a.Body,null,l.a.createElement("div",{className:"container"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-3"},l.a.createElement("label",null,"Transaction Category"),l.a.createElement("font",{className:"text-danger"},"   *  ")),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("select",{id:"acc_txn_category",value:this.acc_txn.acc_txn_category,onChange:this.handleCategoryChange,className:"form-control",type:"text",required:!0},l.a.createElement("option",{value:""},"choose"),l.a.createElement("option",{value:"credit"},"Credit"),l.a.createElement("option",{value:"debit"},"Debit"),l.a.createElement("option",{value:"balance"},"Opening Balance"))),l.a.createElement("div",{className:"col-md-3 ".concat(this.state.cr_dr_style)},l.a.createElement("label",null,l.a.createElement("input",{id:"cr_dr",checked:this.state.cr_dr,type:"checkbox",onChange:this.handleCheckbox}),this.state.txn_cat_name)),l.a.createElement("div",{className:"col-md-3 ".concat(this.state.ref_acc_section_style)},l.a.createElement("select",{id:"ref_acc_id",defaultValue:this.selected.ref_accounts,onChange:this.handleSelfChange,ref:function(e){t.ref_acc_id=e},className:"form-control",required:"required"},this.state.ref_accounts_dd))),l.a.createElement("br",null),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-3"},l.a.createElement("label",null,"Transaction Type"),l.a.createElement("font",{className:"text-danger"},"   *  ")),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("select",{id:"acc_txn_type",defaultValue:this.acc_txn.acc_txn_type,onChange:this.handleSelfChange,className:"form-control",required:"required"},this.state.acc_txn_type_dd)),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("label",null,"Amount ( ",this.currency_code," )"),l.a.createElement("font",{className:"text-danger"},"   *  ")),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("input",{id:"amount",type:"text",className:"form-control",onChange:this.handleSelfChange,required:!0}))),l.a.createElement("br",null),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-3"},l.a.createElement("label",null,"Transaction Mode"),l.a.createElement("font",{className:"text-danger"},"   *  ")),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("select",{id:"txn_mode",onChange:this.handleSelfChange,className:"form-control",required:"required"},this.getSelectOptions("transaction_mode"))),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("label",null,"Transaction Date"),l.a.createElement("font",{className:"text-danger"},"   *  ")),l.a.createElement("div",{className:"col-md-3"},l.a.createElement(it.a,{closeOnSelect:!0,onChange:function(e){t.handleSelfDateChange("txn_date",e)},dateFormat:"DD MMM YYYY",timeFormat:!1,required:"required"}))),l.a.createElement("br",null),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-3"},l.a.createElement("label",null,"Transaction ID")),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("input",{id:"txn_id",type:"text",className:"form-control spacing",onChange:this.handleSelfChange})),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("label",null,"Txn Executed By"),l.a.createElement("font",{className:"text-danger"},"   *  ")),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("select",{id:"txn_exec_by",onChange:this.handleSelfChange,className:"form-control",type:"text",required:"required"},this.state.app_users_dd))),l.a.createElement("br",null),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-3"},l.a.createElement("label",null,"Remarks")),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("input",{type:"text",id:"remarks",onChange:this.handleSelfChange,className:"form-control",required:"required"}))))),l.a.createElement(ht.a.Footer,null,l.a.createElement(S.a,{variant:"primary",onClick:this.handleAddTxn},"Add"),l.a.createElement(S.a,{variant:"secondary",onClick:this.handleClose},"Close"))))}}]),t}(Te),Mt=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={accountList:null,editScreen:!1},a.updatePrimaryAccount=function(e){var t={};if("customer"===a.props.entity){var n=a.props.entity_id;t={id:e.target.id,cust_id:n,is_primary_acc:!0}}else if("lender"===a.props.entity){var l=a.props.entity_id;t={id:e.target.id,lender_code:l,is_primary_acc:!0}}var r={account:t};kt(a.req(r)).then(function(e){e&&("success"===e.status?window.location.reload():alert(e.message+"\n"+JSON.stringify(e.data)))})},a.handleEditAccount=function(e){a.props.onEditClick(e)},a.handleAccTxns=function(e){var t=e.target.id;a.entity_id=a.props.entity_id,a.entity=a.props.entity,window.open("/acc_txns/"+a.entity+"/"+a.entity_id+"/"+t,"_blank")},a.changeDataPrvdr=function(e){yt()("#table2").DataTable().destroy(),a.account.lender_data_prvdr_code=e.target.value,a.list_accounts(a.account)},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"makePrimaryButton",value:function(e,t,a){return 0==t&&"enabled"===a?l.a.createElement("input",{id:e,type:"button",className:"btn btn-primary",onClick:this.updatePrimaryAccount,value:"Make Primary A/C "}):null}},{key:"componentWillMount",value:function(){var e=this.country_code;this.account={},this.table_id=this.props.entity_id,this.account={country_code:e},"customer"==this.props.entity?(this.account.cust_id=this.props.entity_id,this.list_accounts(this.account)):"lender"==this.props.entity?(this.account.lender_code=this.props.entity_id,this.setOptionsToStateFromApi("data_provider")):"data_prvdr"==this.props.entity&&(this.account.data_prvdr_code=this.props.entity_id,this.list_accounts(this.account)),f(this.props.entity,"view_acc_txn")?this.view_txn_btn_style="show_div":this.view_txn_btn_style="disable_div"}},{key:"list_accounts",value:function(e){var t,a=this;yt()("#table2").DataTable().destroy(),(t=this.req({account:e}),F("/api/admin/account/list",t)).then(function(e){if(e){var t=e.data.map(function(e,t){return l.a.createElement("tr",{key:t},l.a.createElement("td",null," ",e.acc_prvdr_name),l.a.createElement("td",null," ",de(e.type,"account_type")),l.a.createElement("td",null," ",e.acc_number),l.a.createElement("td",null," ",de(e.acc_purpose,"account_purpose")),l.a.createElement("td",null," ",Ce(e.balance,a.currency_code)),l.a.createElement(ft,{id:e.id,parent:a.props.entity,entity:"accounts",status:e.status}),l.a.createElement("td",null,l.a.createElement("input",{id:e.id,type:"button",value:"View Txns",onClick:a.handleAccTxns,className:"btn btn-primary ".concat(a.view_txn_btn_style)})),"lender"==a.props.entity&&l.a.createElement("td",null,l.a.createElement(Ft,{account:e,id:"acc_txn",entity:a.props.entity,entity_id:a.props.entity_id})))});a.setState({accountList:t,accounts:e.data,table_id:a.table_id}),yt()("#table2").removeAttr("width").dataTable({order:[],dom:"Bfrtip",buttons:["csv","excel","print"]})}})}},{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,"lender"==this.props.entity&&l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-3"},l.a.createElement("span",null,"Data Provider"),l.a.createElement("font",{className:"text-danger"},"   *  "),l.a.createElement("select",{id:"lender_data_prvdr_code",onChange:this.changeDataPrvdr,className:"form-control",type:"text",required:"required"},this.state.data_provider_dd))),null!=this.state.accountList&&l.a.createElement("div",{id:"datatable1"},l.a.createElement("table",{id:"table2",className:"display strip row-border order-column list"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"Account Provider Name"),l.a.createElement("th",null,"Type"),l.a.createElement("th",null,"Account Number"),l.a.createElement("th",null,"Account Purpose"),l.a.createElement("th",null,"Balance"),l.a.createElement("th",null,"Status"),l.a.createElement("th",null,"Action"),l.a.createElement("th",null,"Action"),"lender"==this.props.entity&&l.a.createElement("th",null,"Action"))),l.a.createElement("tbody",null,this.state.accountList))),null==this.state.accountList&&l.a.createElement("div",null,l.a.createElement("p",null,"No Accounts Available ! ")))}}]),t}(qe),Pt=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={view:"account_list"},a.handleSubmit=function(e){e.preventDefault();var t=a.state.account;t.country_code=a.country_code,"customer"==a.props.entity?t.cust_id=a.props.entity_id:"lender"==a.props.entity?t.lender_code=a.props.entity_id:"data_prvdr"==a.props.entity&&(t.data_prvdr_code=a.props.entity_id),Nt(a.req({account:t})).then(function(e){e&&("success"===e.status?(alert("New Account created successfully"),a.setState({view:"account_list"})):alert(e.message+"\n"+JSON.stringify(e.data)))})},a.handleAddAccountClick=function(e){a.setState({view:"account",account:{is_primary_acc:!1,holder_name:a.props.cust_name,acc_number:a.props.dp_cust_id}})},a.handleBackClick=function(e){a.setState({view:"account_list"})},a.handleEdit=function(e){a.setState({view:"edit_account",account_id:e.target.id})},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){f(this.props.entity,"create_account")?this.create_acc_btn_style="show_div":this.create_acc_btn_style="disable_div","account_view"==this.props.view&&this.setState({view:"account_view"})}},{key:"createUI",value:function(e){var t=null;return"account"==e?t=l.a.createElement("div",null,l.a.createElement("input",{type:"button",onClick:this.handleBackClick,value:"Back",className:"btn btn-primary"}),l.a.createElement(At,{id:"account",entity:this.props.entity,title:"Account Provider",data:this.state.account,mode:this.props.mode,onComponentChange:this.handleComponentChange}),l.a.createElement("br",null),l.a.createElement("input",{type:"button",className:"btn btn-primary",onClick:this.handleSubmit,value:"Create New Account"})):"account_list"==e?t=l.a.createElement("div",null,l.a.createElement("input",{type:"button",className:"btn btn-primary account ".concat(this.create_acc_btn_style),onClick:this.handleAddAccountClick,value:"Add New Account"}),l.a.createElement(Mt,{entity:this.props.entity,entity_id:this.props.entity_id,onEditClick:this.handleEdit})):"edit_account"==e&&(t=l.a.createElement("div",null,l.a.createElement(Ot,{id:"edit_account",entity:this.props.entity,entity_id:this.props.entity_id,account_id:this.state.account_id,handleBackClick:this.handleBackClick}))),l.a.createElement("div",null,t)}},{key:"render",value:function(){return l.a.createElement("div",{className:"container"},this.createUI(this.state.view),l.a.createElement("br",null),l.a.createElement("br",null))}}]),t}(qe),Lt=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={lenderList:null,toView:!1,lender_code:null,modalBox:!1,accountList:null},a.handleClick=function(e){a.setState({lender_code:e.target.id,toView:!0})},a.handleViewAccountsClick=function(e){a.setState({lender_code:e.target.id}),a.setState({modalBox:!0})},a.handleModalClose=function(e){a.setState({modalBox:!1})},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){var e=this;f("lender","list_account")?this.btn_style="show_div":this.btn_style="disable_div";var t,a=this.country_code;(t=this.req({country_code:a}),F("/api/admin/lender/list",t)).then(function(t){if(t){var a=t.data.map(function(t,a){return l.a.createElement("tr",{key:a},l.a.createElement("td",null," ",t.name),l.a.createElement("td",null," ",de(t.lender_type)),l.a.createElement(ft,{id:t.id,entity:"lenders",status:t.status}),l.a.createElement("td",null,l.a.createElement(Xe,{id:t.lender_code,entity:"lender",onClick:e.handleClick})),l.a.createElement("td",null," ",l.a.createElement("input",{id:t.lender_code,type:"submit",onClick:e.handleViewAccountsClick,value:"Accounts",className:"btn btn-primary ".concat(e.btn_style)})))});e.setState({lenderList:a}),yt()("#list_lender").removeAttr("width").dataTable({order:[],columns:[{width:"15%"},{width:"15%"},{width:"15%"},{width:"15%"},{width:"20%"},{width:"20%"}],dom:"Bfrtip",buttons:["csv","excel","print"]})}})}},{key:"render",value:function(){return!0===this.state.toView?l.a.createElement(B.a,{to:"/lender/view/".concat(this.state.lender_code)}):null!=this.state.lenderList?l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{id:"datatable"},l.a.createElement("h4",null,this.props.title||"Lender List"),l.a.createElement("table",{id:"list_lender",className:"display strip row-border order-column list"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"Name"),l.a.createElement("th",null,"Lender Type"),l.a.createElement("th",null,"Status"),l.a.createElement("th",null,"Action"),l.a.createElement("th",null,"Action"),l.a.createElement("th",null,"Account"))),l.a.createElement("tbody",null,this.state.lenderList))),l.a.createElement(ht.a,{show:this.state.modalBox,onHide:this.handleModalClose,size:"xl"},l.a.createElement(ht.a.Header,{closeButton:!0,show:this.state.modalBox,onHide:this.handleModalClose},l.a.createElement(ht.a.Title,null,"Lender Accounts : ",this.state.lender_code)),l.a.createElement(ht.a.Body,null,l.a.createElement(Pt,{entity:"lender",entity_id:this.state.lender_code})),l.a.createElement(ht.a.Footer,null,l.a.createElement(S.a,{variant:"secondary",onClick:this.handleModalClose},"Close")))):l.a.createElement("div",null,l.a.createElement("p",null,"No Lenders Available ! "))}}]),t}(qe),qt=function(e){return F("/api/admin/data_provider",e)},Rt=function(e){return F("/api/admin/data_provider/list",e)},Tt=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={dataproviderList:null,toView:!1,data_provider_code:null},a.handleViewClick=function(e){a.setState({data_provider_code:e.target.id,toView:!0})},a.handleViewAccountsClick=function(e){a.setState({data_prvdr_code:e.target.id}),a.setState({modalBox:!0})},a.handleModalClose=function(e){a.setState({modalBox:!1})},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){var e=this,t=this.country_code;f("data_prvdr","list_account")?this.btn_style="show_div":this.btn_style="disable_div",Rt(this.req({country_code:t})).then(function(t){if(t){var a=t.data.map(function(t,a){return l.a.createElement("tr",{key:a},l.a.createElement("td",null," ",t.name),l.a.createElement("td",null," ",de(t.provider_type)),l.a.createElement(ft,{id:t.id,entity:"data_prvdrs",status:t.status}),l.a.createElement("td",null,l.a.createElement(Xe,{id:t.data_prvdr_code,entity:"data_prvdr",onClick:e.handleViewClick})),l.a.createElement("td",{key:a}," ",l.a.createElement("input",{id:t.data_prvdr_code,type:"submit",onClick:e.handleViewAccountsClick,value:"Accounts",className:"btn btn-primary ".concat(e.btn_style)})))});e.setState({dataproviderList:a}),yt()("#dp_list").removeAttr("width").dataTable({order:[],columns:[{width:"5%"},{width:"10%"},{width:"5%"},{width:"5%"},{width:"5%"},{width:"5%"}],dom:"Bfrtip",buttons:["csv","excel","print"]})}})}},{key:"render",value:function(){return!0===this.state.toView?l.a.createElement(B.a,{to:"/data_provider/view/".concat(this.state.data_provider_code)}):null!=this.state.dataproviderList?l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{id:"datatable"},l.a.createElement("h4",null,this.props.title||"Data Provider List"),l.a.createElement("table",{id:"dp_list",className:"display strip row-border order-column list"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"Name"),l.a.createElement("th",null,"Data Provider Type"),l.a.createElement("th",null,"Status"),l.a.createElement("th",null,"Action"),l.a.createElement("th",null,"Action"),l.a.createElement("th",null,"Account"))),l.a.createElement("tbody",null,this.state.dataproviderList))),l.a.createElement(ht.a,{show:this.state.modalBox,onHide:this.handleModalClose,size:"xl"},l.a.createElement(ht.a.Header,{closeButton:!0,show:this.state.modalBox,onHide:this.handleModalClose},l.a.createElement(ht.a.Title,null,"Data Provider Accounts : ",this.state.data_prvdr_code)),l.a.createElement(ht.a.Body,null,l.a.createElement(Pt,{entity:"data_prvdr",entity_id:this.state.data_prvdr_code})),l.a.createElement(ht.a.Footer,null,l.a.createElement(S.a,{variant:"secondary",onClick:this.handleModalClose},"Close")))):l.a.createElement("div",null,l.a.createElement("p",null,"No Data Providers Available ! "))}}]),t}(qe),Bt=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={comp_name:"lender"},a.handleNameChange=function(e){var t=a.country_code.charAt(0);t+=e.target.value.substring(0,3).toUpperCase(),a.props.data.lender_code=t,a.toUpperHandleChange(e)},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return l.a.createElement("div",{id:""},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-2"},l.a.createElement("h4",null,this.props.title?this.props.title:"Lender Details")),l.a.createElement("div",{className:"col-md-1 ".concat(this.state.edit_button_style)},l.a.createElement(Ze,{entity:"lender",onClick:this.handleEdit})),l.a.createElement("div",{className:"col-md-1 ".concat(this.state.save_button_style)},l.a.createElement("input",{onClick:this.handleSave,type:"button",className:"btn btn-success",value:"Save"}))),l.a.createElement("div",{className:this.state.div_style},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-3"},l.a.createElement("span",null,"Lender Name"),l.a.createElement("font",{className:"text-danger"},"   *  "),l.a.createElement("input",{id:"name",value:this.props.data.name,onChange:"create"==this.props.mode?this.handleNameChange:this.toUpperHandleChange,required:"required",className:"upperCase form-control"})),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("span",null,"Lender Type"),l.a.createElement("font",{className:"text-danger"},"   *  "),l.a.createElement("select",{id:"lender_type",value:this.props.data.lender_type,onChange:this.handleChange,required:"required",className:"form-control"},this.getSelectOptions("lender_type"))),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("span",null,"Lender Code"),l.a.createElement("font",{className:"text-danger"}," * "),l.a.createElement("input",{type:"text",id:"lender_code",disabled:!0,value:this.props.data.lender_code,maxLength:4,onChange:this.handleChange,required:!0,className:"form-control"}))),l.a.createElement("br",null),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-6"},l.a.createElement(_t,{id:"lender_logo",label:"Logo",lender_id:this.props.data.id,db_file_name:this.props.data.lender_logo,type:"image",mode:this.props.mode,onCreateUpload:this.handleChange,lender_code:this.props.data.lender_code,onEditUpload:function(t){e.handleChangeForEdit(t),e.handleSave(t)}})))))}}]),t}(Te),It=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={dropdown_div_style:"disable_div"},a.handleClick=function(e){"disable_div"===a.state.dropdown_div_style?(a.setOptionsToStateFromApi("org"),a.setState({dropdown_div_style:"show_div"})):(a.setState({dropdown_div_style:"disable_div"}),a.props.resetOrgNAddr(e))},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-3"},l.a.createElement("span",null,l.a.createElement("h4",null,l.a.createElement("input",{type:"checkbox",id:"checkbox",onClick:this.handleClick}),"\xa0\xa0","Choose Organisation"))),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("span",null,l.a.createElement("div",{id:"",className:"".concat(this.state.dropdown_div_style)},l.a.createElement("select",{id:"name_list",onChange:this.props.onChange,className:"form-control",type:"text",required:"required"},this.state.org_dd)))))}}]),t}(Te),Ut=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={toList:!1,org:{},reg_address:{},contact_person:{},lender:{}},a.handleSubmit=function(e){e.preventDefault();var t=a.state.lender,n=a.state.org;n.reg_address=a.state.reg_address,n.country_code=a.country_code,t.country_code=a.country_code,t.org=n,t.contact_person=a.state.contact_person,t.contact_person.country_code=a.country_code,Ct(a.req({lender:t})).then(function(e){e&&("success"===e.status?(a.setState({new_lender_code:e.data}),a.setState({toList:!0}),alert("New Lender created succesfully!")):alert(e.message+"\n"+JSON.stringify(e.data)))})},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){var e=this;if("view"===this.props.mode){var t={lender_code:this.props.match.params.lender_code};(function(e){return F("/api/admin/lender/view",e)})(this.req(t)).then(function(t){t&&(e.lender=t.data,e.setState({lender:e.lender,org:e.lender.org,contact_person:e.lender.contact_person,reg_address:e.lender.org.reg_address}))})}}},{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return!0===this.state.toList?l.a.createElement(B.a,{to:"/lender/view/".concat(this.state.new_lender_code)}):l.a.createElement("div",{className:"container"},l.a.createElement("h4",null,this.props.title+(this.state.lender.name?" : "+this.state.lender.name:"")),l.a.createElement("form",{id:"lender_form",onSubmit:this.handleSubmit},l.a.createElement("div",{id:""},l.a.createElement(Bt,{id:"lender",title:"Lender Details",data:this.state.lender,mode:this.props.mode,onComponentChange:this.handleComponentChange}),l.a.createElement("br",null),l.a.createElement("hr",null),"create"===this.props.mode&&l.a.createElement(It,{id:"data_provider_choose_org",resetOrgNAddr:this.handleResetOrgNAddr,onChange:this.handleOrgChange}),l.a.createElement("div",{className:"".concat(this.state.div_style)},l.a.createElement(dt,{id:"org",entity:"lender",title:"Organisation Details",data:this.state.org,mode:this.props.mode,onComponentChange:this.handleComponentChange}),l.a.createElement("br",null),l.a.createElement("hr",null),l.a.createElement(ot,{id:"reg_address",entity:"lender",title:"Registered Address",data:this.state.reg_address,mode:this.props.mode,onComponentChange:this.handleComponentChange,onComponentReset:this.handleComponentReset}),l.a.createElement("br",null),l.a.createElement("hr",null)),l.a.createElement(Et,{id:"contact_person",entity:"lender",title:"Contact Person",data:this.state.contact_person,mode:this.props.mode,onComponentChange:this.handleComponentChange}),l.a.createElement("br",null),l.a.createElement("input",{type:"button",className:"btn btn-primary ".concat("create"===this.props.mode?"show_button":"hide_button"),onClick:this.handleSubmit,value:"Create New Lender"}))),l.a.createElement("br",null),l.a.createElement("br",null))}}]),t}(qe),Wt=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={comp_name:"data_provider"},a.handleCodeChange=function(e){var t=e.target.value;a.setState(Object(w.a)({},e.target.value,a.country_code.charAt(0)+t)),a.handleChange(e)},a.handleNameChange=function(e){var t=a.country_code.charAt(0);t+=e.target.value.substring(0,3).toUpperCase(),document.getElementById("data_prvdr_code").value=t,a.props.data.data_prvdr_code=t,a.toUpperHandleChange(e)},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return l.a.createElement("div",{id:""},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-2"},l.a.createElement("h4",null,this.props.title?this.props.title:"Data Provider")),l.a.createElement("div",{className:"col-md-1 ".concat(this.state.edit_button_style)},l.a.createElement(Ze,{entity:"data_prvdr",onClick:this.handleEdit})),l.a.createElement("div",{className:"col-md-1 ".concat(this.state.save_button_style)},l.a.createElement("input",{onClick:this.handleSave,type:"button",className:"btn btn-success",value:"Save"}))),l.a.createElement("div",{className:this.state.div_style},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-3"},l.a.createElement("span",null,"Data Provider Name"),l.a.createElement("font",{className:"text-danger"},"   *  "),l.a.createElement("input",{id:"name",value:this.props.data.name,onChange:"create"==this.props.mode?this.handleNameChange:this.toUpperHandleChange,required:"required",className:"form-control"})),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("span",null,"Data Provider Type"),l.a.createElement("font",{className:"text-danger"},"   *  "),l.a.createElement("select",{id:"provider_type",value:this.props.data.provider_type,onChange:this.handleChange,required:"required",className:"form-control"},this.getSelectOptions("data_provider_type"))),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("span",null,"Data Provider Code"),l.a.createElement("font",{className:"text-danger"},"  *  "),l.a.createElement("input",{type:"text",id:"data_prvdr_code",disabled:!0,value:this.props.data.data_prvdr_code,maxLength:4,onChange:this.toUpperHandleChange,required:!0,className:"form-control"})),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("span",null,"Contract Name"),l.a.createElement("font",{className:"text-danger"},"  *  "),l.a.createElement("input",{type:"text",id:"contract_name",value:this.props.data.contract_name,onChange:this.handleChange,required:!0,className:"form-control"}))),l.a.createElement("br",null),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-3"},l.a.createElement("span",null,"New Customer Commission")," (",this.currency_code,")",l.a.createElement("input",{id:"cust_comm",value:this.props.data.cust_comm,onChange:this.handleChange,className:"form-control"})),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("span",null,"Repayment Commission")," (",this.currency_code,")",l.a.createElement("input",{id:"repay_comm",value:this.props.data.repay_comm,onChange:this.handleChange,className:"form-control"}))),l.a.createElement("hr",null),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-6"},l.a.createElement(_t,{id:"data_prvdr_logo",label:"Logo",data_prvdr_id:this.props.data.id,db_file_name:this.props.data.data_prvdr_logo,type:"image",mode:this.props.mode,data_prvdr_code:this.props.data.data_prvdr_code,onCreateUpload:this.handleChange,onEditUpload:function(t){e.handleChangeForEdit(t),e.handleSave(t)}})))))}}]),t}(Te),Yt=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={toList:!1,org:{},reg_address:{},contact_person:{},data_provider:{}},a.handleSubmit=function(e){e.preventDefault();var t=a.state.data_provider,n=a.state.org;n.reg_address=a.state.reg_address,n.country_code=a.country_code,t.country_code=a.country_code,t.org=n,t.contact_person=a.state.contact_person,t.contact_person.country_code=a.country_code,qt(a.req({data_prvdr:t})).then(function(e){e&&("success"===e.status?(a.setState({new_data_prvdr_code:e.data}),a.setState({toList:!0}),alert("New Data Provider created successfully")):alert(e.message+"\n"+JSON.stringify(e.data)))})},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){var e=this;if("view"===this.props.mode){var t={data_prvdr_code:this.props.match.params.data_prvdr_code,country_code:this.country_code};(function(e){return F("/api/admin/data_provider/view",e)})(this.req(t)).then(function(t){t&&(e.data_provider=t.data,e.setState({data_provider:e.data_provider,org:e.data_provider.org,contact_person:e.data_provider.contact_person,reg_address:e.data_provider.org.reg_address}))})}else this.props.mode}},{key:"render",value:function(){return!0===this.state.toList?l.a.createElement(B.a,{to:"/data_provider/view/".concat(this.state.new_data_prvdr_code)}):l.a.createElement("div",{className:"container"},l.a.createElement("h4",null,this.props.title+(this.state.data_provider.name?" : "+this.state.data_provider.name:"")),l.a.createElement("form",{id:"data_provider_form",onSubmit:this.handleSubmit},l.a.createElement("div",{id:""},l.a.createElement(Wt,{id:"data_provider",title:"Data Provider",data:this.state.data_provider,mode:this.props.mode,onComponentChange:this.handleComponentChange}),l.a.createElement("hr",null),"create"===this.props.mode&&l.a.createElement(It,{id:"data_provider_choose_org",resetOrgNAddr:this.handleResetOrgNAddr,onChange:this.handleOrgChange}),l.a.createElement("div",{className:"".concat(this.state.div_style)},l.a.createElement(dt,{id:"org",title:"Organisation Details",entity:"data_prvdr",data:this.state.org,mode:this.props.mode,onComponentChange:this.handleComponentChange}),l.a.createElement("br",null),l.a.createElement(ot,{id:"reg_address",title:"Registered Address",entity:"data_prvdr",data:this.state.reg_address,mode:this.props.mode,onComponentChange:this.handleComponentChange,onComponentReset:this.handleComponentReset}),l.a.createElement("hr",null)),l.a.createElement(Et,{id:"contact_person",title:"Contact Person",entity:"data_prvdr",data:this.state.contact_person,mode:this.props.mode,onComponentChange:this.handleComponentChange}),l.a.createElement("br",null),l.a.createElement("input",{type:"button",className:"btn btn-primary ".concat("create"===this.props.mode?"show_button":"hide_button"),onClick:this.handleSubmit,value:"Create New Data Provider"}))),l.a.createElement("br",null),l.a.createElement("br",null))}}]),t}(qe),Vt=function(e){return F("/api/admin/acc_prvdr",e)},Ht=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(i.a)(this,Object(d.a)(t).call(this,e))).state={comp_name:"account_provider"},a.state={values:[]},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return l.a.createElement("div",{id:""},l.a.createElement("div",{className:"container"},l.a.createElement("div",{className:"row"},l.a.createElement("h4",null,"Account Provider Details")),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-3 account_prvdr"},l.a.createElement("span",null,"Account Provider Name"),l.a.createElement("font",{className:"text-danger"},"   *  "),l.a.createElement("input",{id:"name",value:this.props.data.name,onChange:this.toUpperHandleChange,required:"required",className:"form-control"})),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("span",null,"Account Provider Code"),l.a.createElement("font",{className:"text-danger"},"   *  "),l.a.createElement("input",{id:"acc_prvdr_code",value:this.props.data.acc_prvdr_code,maxLength:4,onChange:this.handleChange,required:"required",className:"form-control"})),l.a.createElement("div",{className:"col-md-6"},l.a.createElement(_t,{id:"acc_provider_logo",label:"Logo",acc_prvdr_id:this.props.data.id,acc_prvdr_code:this.props.data.acc_prvdr_code,db_file_name:this.props.data.acc_provider_logo,type:"image",mode:this.props.mode,onEditUpload:function(t){e.handleChangeForEdit(t),e.handleSave(t)},onCreateUpload:this.handleChange}))),l.a.createElement("br",null)))}}]),t}(Te),zt=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={toList:!1,account_provider:{},reg_address:{},org:{},div_style:"show_div",dropdown_div_style:"disable_div"},a.handleSubmit=function(e){e.preventDefault();var t=a.state.account_provider;t.country_code=a.country_code,t.status="enabled";var n=a.state.org;n.reg_address=a.state.reg_address,n.reg_address.touch="",n.country_code=a.country_code,t.org=n,Vt(a.req({acc_provider:t})).then(function(e){e&&("success"===e.status?(a.setState({toList:!0}),alert("New Account Provider created successfully")):alert(e.message+"\n"+JSON.stringify(e.data)))})},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return!0===this.state.toList?l.a.createElement(B.a,{to:"/account_provider/list/"}):l.a.createElement("div",{className:"container"},l.a.createElement("h4",null,this.props.title+(this.state.account_provider.name?" : "+this.state.account_provider.name:"")),l.a.createElement("form",{id:"account_provider_form",onSubmit:this.handleSubmit},l.a.createElement("div",{id:""},l.a.createElement(Ht,{id:"account_provider",title:"Account Provider",data:this.state.account_provider,mode:this.props.mode,onComponentChange:this.handleComponentChange}),l.a.createElement("hr",null),"create"===this.props.mode&&l.a.createElement(It,{id:"acc_prvdr_choose_org",resetOrgNAddr:this.handleResetOrgNAddr,onChange:this.handleOrgChange}),l.a.createElement("div",{className:"".concat(this.state.div_style)},l.a.createElement(dt,{id:"org",title:"Organisation Details",data:this.state.org,mode:this.props.mode,onComponentChange:this.handleComponentChange}),l.a.createElement("br",null),l.a.createElement("hr",null),l.a.createElement(ot,{id:"reg_address",title:"Registered Address",data:this.state.reg_address,mode:this.props.mode,onComponentChange:this.handleComponentChange,onComponentReset:this.handleComponentReset}),l.a.createElement("br",null),l.a.createElement("hr",null)),l.a.createElement("input",{type:"button",className:"btn btn-primary ".concat("create"===this.props.mode?"show_button":"hide_button"),onClick:this.handleSubmit,value:"Create New Account Provider"}))),l.a.createElement("br",null),l.a.createElement("br",null))}}]),t}(qe),Jt=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={accPrvdrList:null},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){var e,t=this,a=this.country_code;(e=this.req({country_code:a}),F("/api/admin/acc_prvdr/list",e)).then(function(e){if(e){var a=e.data.list.map(function(e,t){return l.a.createElement("tr",{key:t},l.a.createElement("td",null," ",e.name),l.a.createElement("td",null," ",e.account_types),l.a.createElement("td",null," ",e.acc_prvdr_code),l.a.createElement(ft,{id:e.id,entity:"acc_providers",status:e.status}))});t.setState({accPrvdrList:a}),yt()("#list").removeAttr("width").dataTable({order:[],columns:[{width:"5%"},{width:"5%"},{width:"5%"},{width:"5%"},{width:"5%"}],dom:"Bfrtip",buttons:["csv","excel","print"]})}})}},{key:"render",value:function(){return null!=this.state.accPrvdrList?l.a.createElement("div",{id:"datatable"},l.a.createElement("h4",null,this.props.title||"Account Provider List"),l.a.createElement("table",{id:"list",className:"display strip row-border order-column list"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"Name"),l.a.createElement("th",null,"A/C Provider Type"),l.a.createElement("th",null,"A/C Provider Code"),l.a.createElement("th",null,"Status"),l.a.createElement("th",null,"Action"))),l.a.createElement("tbody",null,this.state.accPrvdrList))):l.a.createElement("div",null,l.a.createElement("p",null,"No Account Providers Available ! "))}}]),t}(qe),Gt=function(e){return F("/api/admin/loan_product_template",e)},Kt=function(e){return F("/api/admin/loan_product",e)},Qt=function(e){return F("/api/admin/loan_product_template/list",e)},Xt=function(e){return F("/api/admin/loan_product/list",e)},Zt=function(e){return F("/api/admin/loan_product/update",e)},$t=function(e){return F("/api/admin/loan_product/update",e)},ea=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={comp_name:"loan_product_template"},a.handleFlowFeeTypeChange=function(e){a.setState({flow_fee_type:e.target.value}),a.handleChange(e)},a.handleFlowFeeDurationChange=function(e){a.setState({flow_fee_duration:e.target.value}),a.handleProdChange(e)},a.handleProdChange=function(e){if("new_product"===a.props.id){var t=e.target.id,n=e.target.value;a.setState(Object(w.a)({},t,n),function(){var e=function(e,t,a,n,l){var r="";return e&&(r+="STD "+e+" "+l+" "),n?r+=n:t&&(r+="for "+t+" days"),a&&(r+=" @"+a),r}(a.state.max_loan_amount,a.state.duration,a.state.flow_fee,a.state.flow_fee_duration,a.currency_code);a.props.onProdChange(e)})}a.handleChange(e)},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){Object(H.a)(Object(d.a)(t.prototype),"componentWillMount",this).call(this)}},{key:"render",value:function(){return l.a.createElement("div",{id:""},l.a.createElement("div",{className:"col-md-6"},l.a.createElement("h4",{className:"fa_product"},this.props.title?this.props.title:"Float Advance Product")),l.a.createElement("div",{className:"row ".concat(this.state.button_style)},l.a.createElement("div",{className:"col-md-1 ".concat(this.state.edit_button_style)},l.a.createElement(Ze,{entity:"template",onClick:this.handleEdit})),l.a.createElement("div",{className:"col-md-1 ".concat(this.state.save_button_style)},l.a.createElement("input",{onClick:this.handleSave,type:"button",className:"btn btn-success",value:"Save"}))),l.a.createElement("div",{className:this.state.div_style},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-3"},l.a.createElement("span",null,"Float Amount"),"  (",this.currency_code,")",l.a.createElement("font",{className:"text-danger"},"   *  "),l.a.createElement("input",{id:"max_loan_amount",value:this.props.data.max_loan_amount,onChange:this.handleProdChange,onClick:this.handleClick,className:"form-control",type:"text",required:!0})),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("span",null,"Repayment Duration"),l.a.createElement("font",{className:"text-danger"},"   *  "),l.a.createElement("select",{id:"duration",value:this.props.data.duration,onChange:this.handleProdChange,className:"form-control",type:"text",required:!0},l.a.createElement("option",{value:""},"Choose"),l.a.createElement("option",{value:"1"},"1 day"),l.a.createElement("option",{value:"2"},"2 days"),l.a.createElement("option",{value:"3"},"3 days"),l.a.createElement("option",{value:"4"},"4 days"),l.a.createElement("option",{value:"5"},"5 days"),l.a.createElement("option",{value:"6"},"6 days"),l.a.createElement("option",{value:"7"},"7 days"),l.a.createElement("option",{value:"8"},"8 days"),l.a.createElement("option",{value:"9"},"9 days"),l.a.createElement("option",{value:"10"},"10 days")))),l.a.createElement("br",null),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-3"},l.a.createElement("span",null," Flow Fee Type "),l.a.createElement("font",{className:"text-danger"},"   *  "),l.a.createElement("br",null),l.a.createElement("input",{type:"radio",id:"flow_fee_type",value:"Flat",onChange:this.handleFlowFeeTypeChange,checked:"Flat"===this.props.data.flow_fee_type}),"  Flat ",l.a.createElement("br",null),l.a.createElement("input",{type:"radio",id:"flow_fee_type",value:"Percent",onChange:this.handleFlowFeeTypeChange,checked:"Percent"===this.props.data.flow_fee_type}),"  Percentage"),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("div",{id:"flat"},l.a.createElement("span",null,"Percent"===this.state.flow_fee_type?"Fee in %":"Flat Fee ("+this.currency_code+")"),l.a.createElement("font",{className:"text-danger"},"   *  "),l.a.createElement("input",{id:"flow_fee",value:this.props.data.flow_fee,onChange:this.handleProdChange,className:"form-control",type:"text",required:!0}))),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("div",null,l.a.createElement("span",null,"Fee for "),l.a.createElement("font",{className:"text-danger"},"   *  "),l.a.createElement("br",null),l.a.createElement("input",{type:"radio",id:"flow_fee_duration",value:"entire_duration",onChange:this.handleFlowFeeDurationChange,checked:"entire_duration"===this.props.data.flow_fee_duration}),"  Entire duration ",this.state.duration?this.state.duration+" days":"",l.a.createElement("br",null),l.a.createElement("input",{type:"radio",id:"flow_fee_duration",value:"each_day",onChange:this.handleFlowFeeDurationChange,checked:"each_day"===this.props.data.flow_fee_duration}),"  Each day")))))}}]),t}(Te),ta=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={toList:!1,loan_product_template:{flow_fee_duration:"entire_duration",flow_fee_type:"Flat"}},a.handleSubmit=function(e){e.preventDefault();var t=a.state.loan_product_template;t.country_code=a.country_code,t.status="enabled",Gt(a.req({loan_product_template:t})).then(function(e){e&&("success"===e.status?(a.setState({toList:!0}),alert("New FA Product Template created successfully")):alert(e.message+"\n"+JSON.stringify(e.data)))})},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){var e,t=this;if("view"===this.props.mode){var a=this.props.match.params.product_template_id,n=null;(e=this.req({product_template_id:a}),F("/api/admin/loan_product_template/view",e)).then(function(e){e&&(n=e.data,t.setState({loan_product_template:n}))})}}},{key:"render",value:function(){return!0===this.state.toList?l.a.createElement(B.a,{to:"/fa_product/template/list"}):"view"===this.props.mode?l.a.createElement("div",{className:"container"},l.a.createElement("div",{id:""},l.a.createElement(ea,{id:"loan_product_template",data:this.state.loan_product_template,mode:this.props.mode,onComponentChange:this.handleComponentChange}))):l.a.createElement("div",{className:"container"},l.a.createElement("h4",null,this.props.title),l.a.createElement("form",{id:"loan_product_template_form",onSubmit:this.handleSubmit},l.a.createElement("div",{id:""},l.a.createElement(ea,{id:"loan_product_template",data:this.state.loan_product_template,mode:this.props.mode,onComponentChange:this.handleComponentChange}),l.a.createElement("br",null),l.a.createElement("input",{type:"button",className:"btn btn-primary ".concat("create"===this.props.mode?"show_button":"hide_button"),onClick:this.handleSubmit,value:"Create Template"}))),l.a.createElement("br",null),l.a.createElement("br",null))}}]),t}(qe),aa=function(e){return F("/api/admin/score_model/cs_result_config",e)},na=function(e){return F("/api/admin/score_model/weightages/update",e)},la=function(e){return F("/api/admin/score_model/cs_factor",e)},ra=function(e){return F("/api/admin/score_model/cs_factor/list",e)},ca=function(e){return F("/api/admin/score_model/create",e)},oa=function(e){return F("/api/admin/score_model/list",e)},sa=function(e){return F("/api/admin/upload_cust_txns",e)},ia=function(e){return F("/api/admin/score_model/cust_csf_values/create",e)},da=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={templateList:null,comp_name:"loan_product",value:0},a.handleChange1=function(e){a.props.data.data_provider_id&&a.setState({option_div_style:"show_div"})},a.handleProdNameChange=function(e){a.props.data.product_name=e.target.value,a.handleChange(e)},a.handleCSChange=function(e){var t=e.target,n=t.value,l=t.min,r=t.max;n=Math.max(Number(l),Math.min(Number(r),Number(n))),n=isNaN(n)?0:n,a.props.data.min_credit_score=n},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){var e=this;Object(H.a)(Object(d.a)(t.prototype),"componentWillMount",this).call(this),this.setOptionsToStateFromApi("lender"),this.setOptionsToStateFromApi("data_provider");var a={country_code:this.country_code};oa(this.req(a)).then(function(t){t&&("success"===t.status?e.getSelectOptionsFromResult(t.data,"score_model",["model_code","model_name"]):alert(t.message+"\n"+JSON.stringify(t.data)))})}},{key:"render",value:function(){var e=this;return l.a.createElement("div",{id:""},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-3"},l.a.createElement("h4",null,this.props.title?this.props.title:"Product Details")),l.a.createElement("div",{className:"col-md-1 ".concat(this.state.edit_button_style)},l.a.createElement("input",{type:"button",onClick:this.handleEdit,value:"Edit"})),l.a.createElement("div",{className:"col-md-1 ".concat(this.state.save_button_style)},l.a.createElement("input",{onClick:this.handleSave,type:"button",className:"btn btn-success",value:"Save"}))),l.a.createElement("div",{className:this.state.div_style},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-3"},l.a.createElement("span",null,"Product Name"),l.a.createElement("font",{className:"text-danger"},"   *  "),l.a.createElement("input",{id:"product_name",value:this.props.data.product_name,onChange:function(t){e.handleProdNameChange(t),e.handleChange1(t),e.toUpperHandleChange(t)},className:"form-control",type:"text",required:"required"})),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("span",null,"Product Code"),l.a.createElement("font",{className:"text-danger"},"   *  "),l.a.createElement("input",{id:"product_code",value:this.props.data.product_code,onChange:this.handleChange,className:"form-control",type:"text",required:"required"})),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("span",null,"Product Type"),l.a.createElement("font",{className:"text-danger"},"   *  "),l.a.createElement("select",{id:"product_type",value:this.props.data.product_type,onChange:this.handleChange,className:"form-control",type:"text",required:"required"},this.getSelectOptions("product_type")))),l.a.createElement("br",null),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-3"},l.a.createElement("span",null,"Data Provider"),l.a.createElement("font",{className:"text-danger"},"   *  "),l.a.createElement("select",{id:"data_prvdr_code",value:this.props.data.data_prvdr_code,onChange:this.handleChange,className:"form-control",type:"text",required:"required"},this.state.data_provider_dd)),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("span",null,"Lender"),l.a.createElement("font",{className:"text-danger"},"   *  "),l.a.createElement("select",{id:"lender_code",value:this.props.data.lender_code,onChange:this.handleChange,className:"form-control",type:"text",required:"required"},this.state.lender_dd)),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("span",null,"Credit Score Model"),l.a.createElement("font",{className:"text-danger"},"   *  "),l.a.createElement("select",{id:"cs_model_code",value:this.props.data.model_code,onChange:this.handleChange,className:"form-control",required:"required"},this.state.score_model_dd)),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("span",null,"Penalty Amount Per Day (",this.currency_code,")"),l.a.createElement("font",{className:"text-danger"},"   *  "),l.a.createElement("input",{id:"penalty_amount",value:this.props.data.penalty_amount,onChange:this.handleChange,className:"form-control",type:"text",required:"required"}))),l.a.createElement("br",null)))}}]),t}(Te),ma=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(i.a)(this,Object(d.a)(t).call(this,e))).state={toList:!1,new_product_div_style:"hide_div",template_product_div_style:"hide_div",templates_div_style:"hide_div",product_mapping_div_style:"hide_div",templateList:null,loan_product:{},data_prvdr:{},product_template:{flow_fee_type:"Flat",flow_fee_duration:"entire_duration"},new_product:{flow_fee_type:"Flat",flow_fee_duration:"entire_duration"}},a.onChooseTemplateClick=function(e){var t=a.templates[e.target.id];a.setState({template_product_div_style:"show_div"}),a.setState({product_mapping_div_style:"show_div"}),a.setState({product_template:t})},a.handleSubmit=function(e){e.preventDefault();var t=a.state.loan_product,n={};if("from_template"===a.path){var l=a.state.product_template;(n=Object(Re.a)({},l,t)).product_template_id=l.id}else if("new_product"===a.path){var r=a.state.new_product;n=Object(Re.a)({},r,t)}n.status="enabled",n.country_code=a.country_code,Kt(a.req({loan_product:n})).then(function(e){e&&("success"===e.status?(a.setState({toList:!0}),alert("New Loan Product created successfully")):alert(e.message+"\n"+JSON.stringify(e.data)))})},a.selectCreationPath=function(e){yt()("#product_temp").DataTable().destroy(),a.path=e.target.value,"from_template"===a.path?(a.setState({new_product_div_style:"hide_div"}),a.setState({template_product_div_style:"hide_div"}),a.setState({product_mapping_div_style:"hide_div"}),a.setState({templates_div_style:"show_div"}),Qt(a.req(null)).then(function(e){if(e){a.templates=e.data;var t=e.data.map(function(e,t){return l.a.createElement("tr",{key:t},l.a.createElement("td",{"data-sort":e.max_loan_amount}," ",e.max_loan_amount," ",a.state.currency_code),l.a.createElement("td",null," ",e.duration," day(s)"),l.a.createElement("td",null," ",e.flow_fee_type," "),l.a.createElement("td",{"data-sort":e.flow_fee}," ",ze(e,a.currency_code)," "),l.a.createElement("td",null," ",We(e.flow_fee_duration,e.duration)," "),l.a.createElement("td",null," ",l.a.createElement("input",{id:t,type:"radio",name:"products",onClick:a.onChooseTemplateClick,value:"View / Edit"})))});a.setState({templateList:t}),yt()("#product_temp").removeAttr("width").dataTable({columns:[{width:"20%"},{width:"20%"},{width:"10%"},{width:"20%"},{width:"20%"},{width:"10%"}],dom:"Bfrtip",buttons:["csv","excel","print"]})}})):(a.setState({template_product_div_style:"hide_div"}),a.setState({templates_div_style:"hide_div"}),a.setState({new_product_div_style:"show_div"}),a.setState({product_mapping_div_style:"show_div"}))},a.handleProdChange=a.handleProdChange.bind(Object(u.a)(Object(u.a)(a))),a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){var e=this;if("view"===this.props.mode){this.setState({product_div_style:"show_div"});var t={product_id:this.props.match.params.product_id};(function(e){return F("/api/admin/loan_product/view",e)})(this.req(t)).then(function(t){t&&(e.loan_product=t.data,e.setState({loan_product:e.loan_product}),e.setState({loan_product_template:e.loan_product}))})}}},{key:"handleProdChange",value:function(e){var t=this.state.loan_product;t.product_name=e,this.setState({loan_product:t})}},{key:"render",value:function(){return!0===this.state.toList?l.a.createElement(B.a,{to:"/fa_product/list"}):l.a.createElement("div",{id:""},l.a.createElement("div",{className:"container"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-6"},l.a.createElement("h4",null,l.a.createElement("label",{className:"radio-inline"},l.a.createElement("input",{type:"radio",name:"option",onClick:this.selectCreationPath,onChange:this.handleChange,value:"new_product"}),"  Create New Product \xa0\xa0\xa0"),l.a.createElement("span",{id:""},l.a.createElement("label",{className:"radio-inline"},l.a.createElement("input",{type:"radio",name:"option",onClick:this.selectCreationPath,onChange:this.handleChange,value:"from_template"}),"  Create Product from Template"))),l.a.createElement("br",null))),l.a.createElement("div",{id:"",className:"".concat(this.state.templates_div_style)},l.a.createElement("h4",null,"Select Product Template"),l.a.createElement("div",{id:"datatable product_temp"},l.a.createElement("table",{id:"product_temp",className:"display strip row-border order-column list"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"FA Amount"),l.a.createElement("th",null,"FA Duration"),l.a.createElement("th",null,"Flow Fee Type"),l.a.createElement("th",null,"Flow Fee"),l.a.createElement("th",null,"Fee For"),l.a.createElement("th",null,"Choose"))),l.a.createElement("tbody",null,this.state.templateList)))),l.a.createElement("div",{id:"",className:"".concat(this.state.template_product_div_style)},l.a.createElement(ea,{title:"Float Advance Product Template",id:"product_template",mode:"disabled",data:this.state.product_template})),l.a.createElement("div",{id:"",className:"".concat(this.state.new_product_div_style)},l.a.createElement(ea,{title:"Float Advance",id:"new_product",mode:"create",data:this.state.new_product,onProdChange:this.handleProdChange,onComponentChange:this.handleComponentChange}),l.a.createElement("br",null)),l.a.createElement("div",{id:"",className:"".concat(this.state.product_mapping_div_style)},l.a.createElement(da,{id:"loan_product",data:this.state.loan_product,mode:this.props.mode,onComponentChange:this.handleComponentChange})),l.a.createElement("input",{type:"button",className:"btn btn-primary ".concat("create"===this.props.mode?"show_button":"hide_button"),onClick:this.handleSubmit,value:"Create Product"})))}}]),t}(qe),ua=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={templateList:null,toView:!1,template_id:null},a.handleClick=function(e){a.setState({template_id:e.target.id,toView:!0})},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){var e=this;Qt(this.req(null)).then(function(t){if(t){var a=t.data.map(function(t,a){return l.a.createElement("tr",{key:a},l.a.createElement("td",{"data-sort":t.max_loan_amount}," ",je(t.max_loan_amount,e.currency_code)),l.a.createElement("td",null," ",t.duration," day(s)"),l.a.createElement("td",null," ",t.flow_fee_type," "),l.a.createElement("td",{"data-sort":t.flow_fee}," ",je(ze(t,e.currency_code))," "),l.a.createElement("td",null," ",We(t.flow_fee_duration,t.duration)," "),l.a.createElement(ft,{id:t.id,entity:"loan_product_templates",status:t.status}),l.a.createElement("td",null,l.a.createElement(Xe,{id:t.id,entity:"template",onClick:e.handleClick})))});e.setState({templateList:a}),yt()("#list_template").removeAttr("width").dataTable({order:[],columns:[{width:"5%"},{width:"5%"},{width:"5%"},{width:"5%"},{width:"5%"},{width:"5%"},{width:"5%"},{width:"5%"}],dom:"Bfrtip",buttons:["csv","excel","print"]})}})}},{key:"render",value:function(){return!0===this.state.toView?l.a.createElement(B.a,{to:"/fa_product/template/view/".concat(this.state.template_id)}):null!=this.state.templateList?l.a.createElement("div",{id:"datatable"},l.a.createElement("h4",null,"List of FA Products Template"),l.a.createElement("table",{id:"list_template",className:"display strip row-border order-column list"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"FA Amount"),l.a.createElement("th",null,"FA Duration"),l.a.createElement("th",null,"Flow Fee Type"),l.a.createElement("th",null,"Flow Fee"),l.a.createElement("th",null,"Flow Fee For"),l.a.createElement("th",null,"Status"),l.a.createElement("th",null,"Action"),l.a.createElement("th",null,"Action"))),l.a.createElement("tbody",null,this.state.templateList))):l.a.createElement("div",null,l.a.createElement("p",null,"No Loan product template Available ! "))}}]),t}(qe),pa=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={save_btn_style:"disable_div"},a.handleSave=function(e){var t={loan_product:a.state};Zt(a.req(t)).then(function(e){e&&("success"===e.status?(alert(e.message),window.location.reload()):alert(e.message+"\n"+JSON.stringify(e.data)))})},a.handleValueChange=function(e){e.target.value?a.setState({save_btn_style:"show_div"}):a.setState({save_btn_style:"disable_div"}),a.handleSelfChangeState(e)},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){var e=this;this.setState({id:this.props.product.id,product_name:this.props.product.product_name,cs_model_code:this.props.product.cs_model_code,penalty_amount:this.props.product.penalty_amount});var t={country_code:this.country_code};oa(this.req(t)).then(function(t){t&&("success"===t.status?e.getSelectOptionsFromResult(t.data,"score_model",["model_code","model_name"]):alert(t.message+"\n"+JSON.stringify(t.data)))})}},{key:"render",value:function(){return l.a.createElement("div",{className:"container"},l.a.createElement("br",null),l.a.createElement("div",{className:"row"},l.a.createElement("h4",null,l.a.createElement("b",null,"Edit Product"))),l.a.createElement("br",null),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-2"},l.a.createElement("label",null,"Data Provider"),"\xa0\xa0\xa0"),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("label",null,l.a.createElement("b",null,this.props.product.data_provider))),l.a.createElement("div",{className:"col-md-2"},l.a.createElement("label",null,"Lender"),"\xa0\xa0\xa0"),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("label",null,l.a.createElement("b",null,this.props.product.lender)))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-2"},l.a.createElement("label",null,"FA Amount"),"\xa0\xa0\xa0"),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("label",null,l.a.createElement("b",null,Ve(this.props.product.max_loan_amount,this.currency_code)))),l.a.createElement("div",{className:"col-md-2"},l.a.createElement("label",null,"FA Duration"),"\xa0\xa0\xa0"),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("label",null,l.a.createElement("b",null,He(this.props.product.duration,this.props.product.flow_fee_duration))))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-2"},l.a.createElement("label",null,"Flow Fee Type"),"\xa0\xa0\xa0"),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("label",null,l.a.createElement("b",null,this.props.product.flow_fee_type))),l.a.createElement("div",{className:"col-md-2"},l.a.createElement("label",null,"Flow Fee"),"\xa0\xa0\xa0"),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("label",null,l.a.createElement("b",null,ze(this.props.product,this.currency_code))))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-2"},l.a.createElement("label",null,"Flow Fee For"),"\xa0\xa0\xa0"),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("label",null,l.a.createElement("b",null,We(this.props.product.flow_fee_duration,this.props.product.duration)))),l.a.createElement("div",{className:"col-md-2"},l.a.createElement("label",null,"Status"),"\xa0\xa0\xa0"),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("label",null,l.a.createElement("b",null,de(this.props.product.status))))),l.a.createElement("br",null),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-3"},l.a.createElement("span",null,"Product Name"),l.a.createElement("font",{className:"text-danger"},"   *  "),l.a.createElement("input",{id:"product_name",value:this.state.product_name,onChange:this.handleValueChange,className:"form-control",type:"text",required:"required"})),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("span",null,"Credit Score Model"),l.a.createElement("font",{className:"text-danger"},"   *  "),l.a.createElement("select",{id:"cs_model_code",value:this.state.cs_model_code,onChange:this.handleValueChange,className:"form-control",required:"required"},this.state.score_model_dd)),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("span",null,"Penalty Amount Per Day (",this.currency_code,")"),l.a.createElement("font",{className:"text-danger"},"   *  "),l.a.createElement("input",{id:"penalty_amount",value:this.state.penalty_amount,onChange:this.handleValueChange,className:"form-control",type:"text",required:"required"}))),l.a.createElement("br",null),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-8"}),l.a.createElement("div",{className:"col-md-4 ".concat(this.state.save_btn_style)},l.a.createElement("input",{type:"button",value:"Save",className:"btn btn-success",onClick:this.handleSave}))))}}]),t}(Te),ha=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={product_list:null,toView:!1,toEdit:!1,product_list_div_style:"hide_div",product_id:null},a.handleClick=function(e){a.setState({product_id:e.target.id,toView:!0})},a.handleEditClick=function(e,t){a.setState({product_details:t,toEdit:!0})},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){var e=this,t=f("product","edit");Xt(this.req(null)).then(function(a){if(a){var n=a.data.map(function(a,n){return l.a.createElement("tr",{key:n},l.a.createElement("td",null," ",a.product_name),l.a.createElement("td",null," ",a.data_provider),l.a.createElement("td",null," ",a.lender),l.a.createElement("td",null," ",de(a.cs_model_code)),l.a.createElement("td",{"data-sort":a.max_loan_amount}," ",je(Ce(a.max_loan_amount,e.currency_code))),l.a.createElement("td",null," ",He(a.duration,a.flow_fee_duration)," "),l.a.createElement("td",null," ",a.flow_fee_type),l.a.createElement("td",{"data-sort":a.flow_fee}," ",ze(a,e.currency_code)," "),l.a.createElement("td",null," ",We(a.flow_fee_duration,a.duration)),l.a.createElement("td",{"data-sort":a.penalty_amount}," ",je(a.penalty_amount)),l.a.createElement(ft,{id:a.id,entity:"loan_products",status:a.status}),t&&l.a.createElement("td",{key:n}," ",l.a.createElement("input",{type:"button",id:a.id,product:a,onClick:function(t){return e.handleEditClick(t,a)},value:"Edit",className:"btn btn-primary"})))});e.setState({product_list:n,can_edit:t});var r=[{width:"10%"},{width:"10%"},{width:"10%"},{width:"10%"},{width:"10%"},{width:"10%"},{width:"5%"},{width:"10%"},{width:"15%"},{width:"15%"},{width:"10%"},{width:"10%"}];t&&r.push({width:"10%"}),yt()("#list_product").removeAttr("width").dataTable({order:[],columns:r,columnDefs:[{type:"num-fmt",targets:[4,7,9]}],dom:"Bfrtip",buttons:["csv","excel","print"]})}})}},{key:"render",value:function(){return!0===this.state.toView?l.a.createElement(B.a,{to:"/fa_product/view/".concat(this.state.product_id)}):!0===this.state.toEdit?l.a.createElement(pa,{id:"product",product:this.state.product_details,onComponentChange:this.handleComponentChange}):null!=this.state.product_list?l.a.createElement("div",{className:""},l.a.createElement("div",{id:"",className:""},l.a.createElement("div",{id:"datatable"},l.a.createElement("h4",null,"List of FA Products"),l.a.createElement("table",{id:"list_product",className:"display strip row-border order-column list"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"Product Name"),l.a.createElement("th",null,"Data Provider"),l.a.createElement("th",null,"Lender"),l.a.createElement("th",null,"Credit Score Model"),l.a.createElement("th",null,"FA Amount"),l.a.createElement("th",null,"FA Duration"),l.a.createElement("th",null,"Flow Fee Type"),l.a.createElement("th",null,"Flow Fee"),l.a.createElement("th",null,"Flow Fee for "),l.a.createElement("th",null,"Penalty Amount"),l.a.createElement("th",null,"Status"),l.a.createElement("th",null,"Action"),this.state.can_edit&&l.a.createElement("th",null,"Action"))),l.a.createElement("tbody",null,this.state.product_list))))):l.a.createElement("div",null,l.a.createElement("p",null,"No FA Products Available ! "))}}]),t}(qe),_a=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={product_list:null,toView:!1,search_res_div_style:"hide_div",product_id:null,query:"",results:[]},a.getInfo=function(){$t(a.state.query).then(function(e){e&&("success"===e.status?a.setState({results:e.data}):alert(e.message+"\n"+JSON.stringify(e.data)))})},a.handleInputChange=function(){a.setState({query:a.search.value},function(){a.state.query&&a.state.query.length>1?a.state.query.length%2===0&&a.getInfo():a.state.query})},a.handleClick=function(e){a.setState({product_id:e.target.id,toView:!0})},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){var e=this;Xt(this.req(null)).then(function(t){if(t){var a=t.data.map(function(t,a){return l.a.createElement("tr",null,l.a.createElement("td",{key:a}," ",t.product_name),l.a.createElement("td",{key:a}," ",t.data_provider),l.a.createElement("td",{key:a}," ",t.lender),l.a.createElement("td",{key:a}," ",t.credit_score_model),l.a.createElement("td",{key:a}," ",t.interest_percent_per_day),l.a.createElement("td",{key:a}," ",t.tenure_in_days),l.a.createElement("td",{key:a}," ",je(t.max_loan_amount)),l.a.createElement("td",{key:a}," ",l.a.createElement(ft,{id:t.id,entity:"loan_products",status:t.status})),l.a.createElement("td",{key:a}," ",l.a.createElement("input",{id:t.id,type:"submit",className:"",onClick:e.handleClick,value:"View / Edit",class:"btn btn-primary"})))});e.setState({product_list:a})}})}},{key:"componentDidUpdate",value:function(){yt()("#list_product").dataTable({order:[],bAutoWidth:!0,bDestroy:!0})}},{key:"render",value:function(){var e=this;return!0===this.state.toView?l.a.createElement(B.a,{to:"/fa_product/product/view/".concat(this.state.product_id)}):null!=this.state.product_list?l.a.createElement("div",{className:""},l.a.createElement("form",null,l.a.createElement("input",{placeholder:"Search for...",ref:function(t){return e.search=t},onChange:this.handleInputChange})),l.a.createElement("div",{id:"datatable"},l.a.createElement("table",{id:"list_product",className:"display strip row-border order-column list"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"Product Name"),l.a.createElement("th",null,"Data Provider"),l.a.createElement("th",null,"Lender"),l.a.createElement("th",null,"Credit Score Model"),l.a.createElement("th",null,"Interest % per day"),l.a.createElement("th",null,"Tenure in days"),l.a.createElement("th",null,"Max Loan Amount"),l.a.createElement("th",null,"Status"),l.a.createElement("th",null,"Action"))),l.a.createElement("tbody",null,this.state.product_list)))):l.a.createElement("div",null,l.a.createElement("p",null,"No Float Advance Products Available ! "))}}]),t}(qe),Ea=function(e){return F("/api/admin/master_data/key/create",e)},va=function(e){return F("/api/admin/master_data/create",e)},ga=function(e){return F("/api/admin/master_data/key/status",e)},fa=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={data_keys:"",comp_name:"master_data_key"},a.globalRadiobtn=function(e){e.target.checked?a.props.data.country_code="*":a.props.data.country_code=a.country_code},a.countrySpcfcRadiobtn=function(e){e.target.checked&&(a.props.data.country_code=a.country_code)},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){var e=this.country_code;this.setOptionsListToStateFromAppApi("common/key","all_data_keys",this.req({country_code:e,status:"enabled",add_no_parent:!0}),["data_key","data_key"])}},{key:"render",value:function(){return l.a.createElement("div",{id:""},l.a.createElement("div",{className:"container"},l.a.createElement("div",{className:"row"},l.a.createElement("h4",null,"Add Master Data Key")),l.a.createElement("br",null),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-3"},l.a.createElement("label",null,"Data Group"),l.a.createElement("font",{className:"text-danger"}," * "),l.a.createElement("select",{type:"text",id:"data_group",value:this.props.data.data_group,onChange:this.handleChange,className:"form-control"},this.getSelectOptions("data_group")))),l.a.createElement("br",null),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-3"},l.a.createElement("label",null,"Data Type"),l.a.createElement("font",{className:"text-danger"}," * "),l.a.createElement("select",{type:"text",id:"data_type",value:this.props.data.data_type,onChange:this.handleChange,className:"form-control"},this.getSelectOptions("data_type")))),l.a.createElement("br",null),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-3"},l.a.createElement("span",null,"Data Key"),l.a.createElement("font",{className:"text-danger"},"   *  "),l.a.createElement("input",{id:"data_key",value:this.props.data.data_key,onChange:this.handleChange,required:"required",className:"form-control"}))),l.a.createElement("br",null),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-3"},l.a.createElement("span",null,"Parent Data Key"),l.a.createElement("select",{id:"parent_data_key",value:this.props.data.parent_data_key,onChange:this.handleChange,className:"form-control"},this.state.all_data_keys_dd))),l.a.createElement("br",null),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-3"},l.a.createElement("span",null,"Key Description"),l.a.createElement("input",{id:"key_desc",value:this.props.data.key_desc,onChange:this.handleChange,required:"required",className:"form-control"}))),l.a.createElement("br",null),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-3"},l.a.createElement("b",null,l.a.createElement("span",null,"Data Scope")),l.a.createElement("br",null),"\xa0\xa0",l.a.createElement("label",null,l.a.createElement("input",{type:"radio",name:"data_scope",onClick:this.globalRadiobtn,defaultChecked:!0}),"\xa0\xa0 Global"),l.a.createElement("br",null),"\xa0\xa0",l.a.createElement("label",{className:this.state.country_spcfc_div_style},l.a.createElement("input",{type:"radio",name:"data_scope",onClick:this.countrySpcfcRadiobtn}),"\xa0\xa0",this.country_code)))))}}]),t}(Te),ba=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={data_keys:"",master_data_key:{country_code:"*"},toList:!1},a.handleSubmit=function(e){e.preventDefault();var t=a.state.master_data_key;Ea(a.req({master_data_key:t})).then(function(e){e&&(alert("Master Data Key saved succesfully!"),a.setState({toList:!0}))})},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return!0===this.state.toList?l.a.createElement(B.a,{to:"/master_data_key/list"}):l.a.createElement("div",{id:""},l.a.createElement("div",{className:"container"},l.a.createElement(fa,{id:"master_data_key",data:this.state.master_data_key,onComponentChange:this.handleComponentChange}),l.a.createElement("input",{type:"button",className:"btn btn-primary",onClick:this.handleSubmit,value:"Save"})))}}]),t}(qe),ya=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={masterDataKeyList:null},a.handleStatusClick=function(e){var t=e.target.value.toLowerCase()+"d",a={id:e.target.id,status:t};ga({master_data_key:a}).then(function(e){e&&("success"===e.status?window.location.reload():alert(e.message+"\n"+JSON.stringify(e.data)))})},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){var e,t=this;(e=this.req(null),F("/api/admin/master_data/key/list",e)).then(function(e){if(e){var a=e.data.map(function(e,t){return l.a.createElement("tr",{key:t},l.a.createElement("td",null," ",e.data_key),l.a.createElement("td",null," ","*"===e.country_code?"Global":e.country_code),l.a.createElement("td",null," ",e.parent_data_key||"<<No Parent>>"),l.a.createElement("td",null," ",null===e.data_group?"<<No Data Group>>":e.data_group),l.a.createElement("td",null," ",null===e.data_type?"<<No Data Type>>":e.data_type),l.a.createElement("td",null," ",null===e.key_desc?"<<No Description>>":e.key_desc),l.a.createElement(ft,{id:e.id,entity:"master_data_keys",status:e.status}))});t.setState({masterDataKeyList:a}),yt()("#list").removeAttr("width").dataTable({order:[],columns:[{width:"20%"},{width:"10%"},{width:"18%"},{width:"18%"},{width:"8%"},{width:"8%"},{width:"8%"},{width:"10%"}],dom:"Bfrtip",buttons:["csv","excel","print"]})}})}},{key:"render",value:function(){return null!=this.state.masterDataKeyList?l.a.createElement("div",{id:""},l.a.createElement("div",{className:"container"},l.a.createElement("div",{id:"datatable"},l.a.createElement("div",{className:"row"},l.a.createElement("h4",{className:"fa_left"},"List Master Data Key")),l.a.createElement("br",null),l.a.createElement("table",{id:"list",className:"display strip row-border list"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"Data Key"),l.a.createElement("th",null,"Data Scope"),l.a.createElement("th",null,"Parent Data Key"),l.a.createElement("th",null,"Data Group"),l.a.createElement("th",null,"Data Type"),l.a.createElement("th",null,"Key Description"),l.a.createElement("th",null,"Status"),l.a.createElement("th",null,"Action"))),l.a.createElement("tbody",null,this.state.masterDataKeyList))))):l.a.createElement("div",null,l.a.createElement("p",null,"No Master Data Keys Available ! "))}}]),t}(qe),wa=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={dataKeyButtons:null,comp_name:"master_data",datatable_div_style:"hide_div"},a.handleClick=function(e,t){a.data_type=t,"*"===e.target.name?(a.globalCheckboxChecked=!0,a.countryCheckboxChecked=!1,a.setState({country_code:"*",country_spcfc_div_style:"disable_div"})):a.setState({country_code:a.country_code}),yt()("#table").DataTable().destroy(),a.title_case_data_key=_e(e.target.id),a.data_key=e.target.id,a.listMasterData()},a.addButtonClick=function(e){a.setState({modalBox:!0});var t={country_code:a.country_code,data_key:a.data_key,status:"enabled"};a.setOptionsListToStateFromAppApi("common/key","parent_data_codes",a.req(t),["data_code","data_value"])},a.handleClose=function(e){a.resetModalBox(),a.setState({modalBox:!1})},a.handleGlobalCheckbox=function(e){e.target.checked?a.setState({country_code:"*"}):a.setState({country_code:a.country_code,country_spcfc_div_style:"show_div"})},a.addMasterData=function(e){e.preventDefault();var t={parent_data_code:a.props.data.parent_data_code,data_code:a.props.data.data_code,data_value:a.props.data.data_value,data_key:a.data_key,data_type:a.data_type,country_code:a.state.country_code,status:"enabled"};va(a.req({master_data:t})).then(function(e){if(e)if("success"===e.status){alert("Master Data added successfully!"),a.setState({modalBox:!1}),a.resetModalBox();a.country_code,a.title_case_data_key;yt()("#table").dataTable().fnDestroy(),a.listMasterData()}else alert(e.message+"\n"+JSON.stringify(e.data))}),a.setState({modalBox:!0})},a.listMasterData=function(){var e={master_data:{country_code:a.state.country_code,data_key:a.data_key}};oe(a.req(e)).then(function(e){if(e)if("success"===e.status){var t=e.data.map(function(e,t){return l.a.createElement("tr",{key:t},l.a.createElement("td",null," ",e.data_value),l.a.createElement("td",null," ",e.data_code),l.a.createElement("td",null," ",null==e.parent_data_code?"No Parent":e.parent_data_code),l.a.createElement(ft,{id:e.id,parent:"master_data",entity:"master_data",status:e.status}))});a.setState({datatable_div_style:"show_div"}),a.setState({masterDataList:t}),a.setState({parent_data_codes_dd:null}),yt()("#table").removeAttr("width").dataTable({order:[],dom:"Bfrtip",buttons:["csv","excel","print"]})}else alert(e.message+"\n"+JSON.stringify(e.data))})},a.handleChangeDataValue=function(e){a.handleChange(e);var t=e.target.value;t=t.replace(/ /g,"_").toLowerCase(),document.getElementById("data_code").value=t,a.props.data.data_code=t},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){var e=this,t={country_code:this.country_code,status:"enabled",add_no_parent:!1};(function(e){return F(j+"/common/key/all_data_keys",e)})(this.req(t)).then(function(t){if(t)if("success"===t.status){var a=[],n=[];t.data.list.map(function(e,t){"*"===e.country_code?a.push({data_key:e.data_key,data_type:e.data_type,data_group:e.data_group}):n.push({data_key:e.data_key,data_type:e.data_type,data_group:e.data_group})});var r=a.map(function(t,a){return l.a.createElement("input",{type:"button",key:a,id:t.data_key,name:"*",className:"btn_style btn btn-success",onClick:function(a){e.handleClick(a,t.data_type)},value:_e(t.data_key)+" ("+t.data_group+")"})});e.setState({globalDatakeyButtons:r});var c=n.map(function(t,a){return l.a.createElement("input",{type:"button",key:a,id:t.data_key,name:e.country_code,className:"btn_style btn btn-warning",onClick:function(a){e.handleClick(a,t.data_type)},value:_e(t.data_key)+" ("+t.data_group+")"})});e.setState({countrySpecificDatakeys:c})}else alert(t.message+"\n"+JSON.stringify(t.data))})}},{key:"resetModalBox",value:function(){this.props.data.data_code="",this.props.data.data_value="",this.props.data.data_type="",this.props.data.parent_data_code=""}},{key:"render",value:function(){return l.a.createElement("div",{id:""},l.a.createElement("div",{className:"container"},l.a.createElement("div",{className:"row"},l.a.createElement("h4",null,"Add Master Data")),l.a.createElement("div",{className:"row"},l.a.createElement("h5",null,l.a.createElement("b",null,"Global"))),this.state.globalDatakeyButtons,l.a.createElement("br",null),l.a.createElement("div",{className:"row"},l.a.createElement("h5",null,l.a.createElement("b",null,this.country_code))),this.state.countrySpecificDatakeys,l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("div",{className:this.state.datatable_div_style},l.a.createElement("div",{id:"datatable"},l.a.createElement("div",{className:"row"},l.a.createElement("h4",null,this.title_case_data_key,"*"===this.state.country_code&&" - Global"),"\xa0\xa0",l.a.createElement("input",{type:"button",className:"btn btn-primary",onClick:this.addButtonClick,value:"Add"})),l.a.createElement("br",null),l.a.createElement("table",{id:"table",className:"display strip row-border order-column list"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,this.title_case_data_key),l.a.createElement("th",null,this.title_case_data_key," Code"),l.a.createElement("th",null,"Parent Data Code"),l.a.createElement("th",null,"Status"),l.a.createElement("th",null,"Action"))),l.a.createElement("tbody",null,this.state.masterDataList)),l.a.createElement(ht.a,{show:this.state.modalBox,onHide:this.handleClose},l.a.createElement(ht.a.Header,{closeButton:!0,show:this.state.modalBox,onHide:this.handleClose},l.a.createElement(ht.a.Title,null,"Add ",this.title_case_data_key," "),l.a.createElement("br",null)),l.a.createElement(ht.a.Body,null,l.a.createElement("h5",null,"Data Scope : ","*"==this.state.country_code?"Global":this.state.country_code," "),l.a.createElement("div",{className:"container"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-6"},l.a.createElement("span",null,this.title_case_data_key," Value"),l.a.createElement("font",{className:"text-danger"}," * "),l.a.createElement("input",{type:"text",id:"data_value",value:this.props.data.data_value,onChange:this.handleChangeDataValue,className:"form-control"}))),l.a.createElement("br",null),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-6"},l.a.createElement("span",null,this.title_case_data_key," Code"),l.a.createElement("font",{className:"text-danger"}," * "),l.a.createElement("input",{type:"text",id:"data_code",value:this.props.data.data_code,onChange:this.handleChange,className:"form-control"}))),l.a.createElement("br",null),this.state.parent_data_codes_dd&&l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-6"},l.a.createElement("label",null,"Parent Data Code"),l.a.createElement("select",{type:"text",id:"parent_data_code",value:this.props.data.parent_data_code,onChange:this.handleChange,className:"form-control"},this.state.parent_data_codes_dd))),this.state.show_data_scope&&l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-6"},l.a.createElement("label",null,"Data Scope"),l.a.createElement("br",null),"\xa0\xa0",l.a.createElement("label",null,l.a.createElement("input",{type:"radio",name:"data_scope",onClick:this.globalRadiobtn,defaultChecked:this.globalCheckboxChecked}),"\xa0\xa0 Global"),l.a.createElement("br",null),"\xa0\xa0",l.a.createElement("label",{className:this.state.country_spcfc_div_style},l.a.createElement("input",{type:"radio",name:"data_scope",onClick:this.countrySpcfcRadiobtn,defaultChecked:this.countryCheckboxChecked}),"\xa0\xa0 ",this.country_code)),l.a.createElement("br",null)))),l.a.createElement(ht.a.Footer,null,l.a.createElement(S.a,{variant:"secondary",onClick:this.handleClose},"Close"),l.a.createElement(S.a,{type:"button",variant:"primary",onClick:this.addMasterData},"Add")))))))}}]),t}(Te),Ca=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={data_keys:"",master_data:{}},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return l.a.createElement("div",{id:""},l.a.createElement("div",{className:"container"},l.a.createElement(wa,{id:"master_data",data:this.state.master_data,onComponentChange:this.handleComponentChange}),l.a.createElement("br",null)))}}]),t}(qe),Na=function(e){function t(){return Object(o.a)(this,t),Object(i.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){}},{key:"render",value:function(){return!0===this.state.toList?l.a.createElement(B.a,{to:"/app_user/list}"}):l.a.createElement("div",{className:"container"},l.a.createElement("h4",null,this.props.title+(this.state.market.name?" : "+this.state.market.name:"")),l.a.createElement("form",{id:"market_form",onSubmit:this.handleSubmit},l.a.createElement(Et,{id:"head_person",title:"Market Head",data:this.state.head_person,mode:this.props.mode,onComponentChange:this.handleComponentChange}),l.a.createElement("input",{type:"button",className:"btn btn-primary ".concat("create"===this.props.mode?"show_button":"hide_button"),onClick:this.handleSubmit,value:"Create New Market"})),l.a.createElement("br",null),l.a.createElement("br",null))}}]),t}(qe),ka=function(e){return F("/api/admin/agreement",e)},Sa=function(e){return F("/api/admin/agreement/cust",e)},Oa=function(e){return F("/api/admin/agreement/status",e)},Aa=function(e){return F("/api/admin/agreement/save",e)},xa=function(e){return F("/api/admin/agreement/list_products",e)},ja=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={productList:null,product_id_csv:{},modal_close:!1,toList:!1},a.handleProductCheckbox=function(e){e.target.checked?a.product_ids.push(e.target.id):a.product_ids=a.product_ids.filter(function(t){return t!=e.target.id})},a.handleCreateAgreementClick=function(e){var t={product_ids:a.product_ids,lender_code:a.master_agreement.lender_code,valid_from:a.master_agreement.valid_from,valid_upto:a.master_agreement.valid_upto,name:a.master_agreement.name,aggr_type:"Master",country_code:a.country_code};ka(a.req({master_agreement:t},!0)).then(function(e){a.resp(e),e&&("success"===e.status?(alert(e.message),a.setState({toList:!0})):alert(e.message+"\n"+JSON.stringify(e.data)))})},a.dropdownChange=function(e){if(a.setState({productList:null}),a[e.target.id]=e.target.value,a.data_prvdr_code&&a.lender_code){var t={lender_code:a.lender_code};xa(a.req(t,!0)).then(function(e){if(a.resp(e),e)if("success"===e.status){a.product_ids=[],e.data.map(function(e,t){return a.product_ids.push(e.id)});var t=e.data.map(function(e,t){return l.a.createElement("tr",null,l.a.createElement("td",null,l.a.createElement("input",{id:e.id,type:"checkbox",onChange:function(e){a.handleProductCheckbox(e)},defaultChecked:!0})),l.a.createElement("td",null," ",e.product_name),l.a.createElement("td",null," ",e.product_type),l.a.createElement("td",null," ",je(Ve(e.max_loan_amount,a.currency_code))),l.a.createElement("td",null," ",e.duration," days"),l.a.createElement("td",null," ",je(ze(e,a.currency_code))),l.a.createElement("td",null," ",je(Ge(e,a.currency_code))))});a.setState({productList:t})}else alert(e.message+"\n"+JSON.stringify(e.data))})}a.handleSelfChange(e)},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){this.master_agreement={},this.product_ids=[],this.setOptionsToStateFromApi("data_provider"),this.setOptionsToStateFromApi("lender")}},{key:"componentDidUpdate",value:function(){yt()("#list_products").dataTable({order:[],bAutoWidth:!0,bDestroy:!0,searching:!1,pageLength:25})}},{key:"render",value:function(){var e=this;return!0===this.state.toList?l.a.createElement(B.a,{to:"/agreement/list"}):l.a.createElement("div",{className:"container"},l.a.createElement("h4",null,this.props.title),l.a.createElement("br",null),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-3"},l.a.createElement("span",null,"Name"),l.a.createElement("input",{type:"text",id:"name",onChange:this.handleSelfChange,className:"form-control"})),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("span",null,"Lender"),l.a.createElement("font",{className:"text-danger"},"   *  "),l.a.createElement("select",{id:"lender_code",onChange:this.dropdownChange,ref:this.props.createRef,className:"form-control",type:"text",required:"required"},this.state.lender_dd)),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("span",null,"Valid From"),l.a.createElement("font",{className:"text-danger"},"   *  "),l.a.createElement(it.a,{closeOnSelect:!0,onChange:function(t){e.handleSelfDateChange("valid_from",t)},dateFormat:"DD MMM YYYY",timeFormat:!1,required:"required"})),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("span",null,"Valid Upto"),l.a.createElement(it.a,{closeOnSelect:!0,onChange:function(t){e.handleSelfDateChange("valid_upto",t)},dateFormat:"DD MMM YYYY",timeFormat:!1,required:"required"}))),l.a.createElement("br",null),null!=this.state.productList&&l.a.createElement("div",{id:"datatable"},l.a.createElement("h4",null,"Select Products"),l.a.createElement("table",{id:"list_products",className:"display strip list"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"Select"),l.a.createElement("th",null,"Product Name"),l.a.createElement("th",null,"Product Type"),l.a.createElement("th",null,"FA Amount"),l.a.createElement("th",null,"Duration"),l.a.createElement("th",null,"Flow Fee"),l.a.createElement("th",null,"Repayment"))),l.a.createElement("tbody",null,this.state.productList))),l.a.createElement("br",null),l.a.createElement("div",{className:"row",id:"float_style"},l.a.createElement("input",{type:"button",disabled:this.state.calling_api,value:"Create Agreement",onClick:this.handleCreateAgreementClick,className:"btn btn-primary"})))}}]),t}(Te),Da=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={agreementList:null},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){var e,t=this;(e=this.req(null,!0),F("/api/admin/agreement/list",e)).then(function(e){if(e){var a=e.data.map(function(e,t){return l.a.createElement("tr",{key:t},l.a.createElement("td",null," ",e.name),l.a.createElement("td",null," ",e.data_prvdr_code),l.a.createElement("td",null," ",e.lender_code),l.a.createElement("td",null," ",e.aggr_doc_id),l.a.createElement("td",null," ",ge(e.valid_from)),l.a.createElement("td",null," ",ge(e.valid_upto)),l.a.createElement(ft,{id:e.id,entity:"master_agreements",status:e.status}),l.a.createElement("td",null," ",e.aggr_file_rel_path?l.a.createElement(z.a,{to:e.aggr_file_rel_path,target:"_blank"},"View PDF"):l.a.createElement("label",null,"NA")))});t.setState({agreementList:a}),yt()("#list_agreement").removeAttr("width").dataTable({order:[],columns:[{width:"10%"},{width:"10%"},{width:"10%"},{width:"20%"},{width:"15%"},{width:"15%"},{width:"10%"},{width:"10%"},{width:"10%"}],dom:"Bfrtip",buttons:["csv","excel","print"]})}})}},{key:"render",value:function(){return l.a.createElement("div",{id:"datatable"},l.a.createElement("h4",null,"Agreement List"),l.a.createElement("table",{id:"list_agreement",className:"display strip list"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"Name"),l.a.createElement("th",null,"Data Provider"),l.a.createElement("th",null,"Lender"),l.a.createElement("th",null,"Agreement Doc ID"),l.a.createElement("th",null,"Valid from"),l.a.createElement("th",null,"Valid to"),l.a.createElement("th",null,"Status"),l.a.createElement("th",null,"Action"),l.a.createElement("th",null,"View"))),l.a.createElement("tbody",null,this.state.agreementList)))}}]),t}(qe),Fa=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={ScoreModelsList:null},a.handleClose=function(e){a.setState({modalBox:!1})},a.addButtonClick=function(e){ca(a.req(a.score_model)).then(function(e){e&&"success"==e.status&&(alert(JSON.stringify(e.message)),a.setState({modalBox:!1}),window.location.reload())})},a.handleChangeDataValue=function(e){a.handleSelfChange(e);var t=e.target.value;t=t.replace(/ /g,"_").toLowerCase(),document.getElementById("model_code").value=t,a.score_model.model_code=t},a.addScoreModel=function(e){a.setState({modalBox:!0})},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){var e=this;this.score_model={};var t={country_code:this.country_code};oa(this.req(t)).then(function(t){if(t){var a=t.data.map(function(e,t){return l.a.createElement("tr",{key:t},l.a.createElement("td",null," ",++t),l.a.createElement("td",null," ",e.model_code),l.a.createElement("td",null," ",de(e.model_name)),l.a.createElement("td",null," ",f("score","weightage_list")&&l.a.createElement(l.a.Fragment,null,l.a.createElement(z.a,{to:"/score_models/weightage/".concat(e.model_code,"/").concat(e.model_name),target:"_blank"},l.a.createElement("input",{type:"button",value:"Weightages",className:"btn btn-primary"})),"\xa0\xa0\xa0"),f("score","result_config_list")&&l.a.createElement(z.a,{to:"/score_models/result_config/".concat(e.model_code),target:"_blank"},l.a.createElement("input",{type:"button",value:"Result Configs",className:"btn btn-primary"}))))});e.setState({ScoreModelsList:a}),yt()("#list_score_models").dataTable({order:[],bAutoWidth:!0})}})}},{key:"render",value:function(){return l.a.createElement("div",{className:"container"},l.a.createElement("br",null),f("score","create")&&l.a.createElement("div",{className:"row",id:"float_style"},l.a.createElement("input",{type:"button",value:"Add Score Model",onClick:this.addScoreModel,className:"btn btn-primary"})),l.a.createElement("div",{id:"datatable"},l.a.createElement("h4",null,"Score Models"),l.a.createElement("table",{id:"list_score_models",className:"display strip list"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"S.No"),l.a.createElement("th",null,"CS Model Code"),l.a.createElement("th",null,"CS Model Name"),l.a.createElement("th",null,"Model Configs"))),l.a.createElement("tbody",null,this.state.ScoreModelsList))),l.a.createElement(ht.a,{show:this.state.modalBox,onHide:this.handleClose},l.a.createElement(ht.a.Header,{closeButton:!0,show:this.state.modalBox,onHide:this.handleClose},l.a.createElement(ht.a.Title,null,"Add Score Model "),l.a.createElement("br",null)),l.a.createElement(ht.a.Body,null,l.a.createElement("div",{className:"container"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-6"},l.a.createElement("span",null,"Score Model Value"),l.a.createElement("font",{className:"text-danger"}," * "),l.a.createElement("input",{type:"text",id:"model_name",value:this.score_model.model_name,onChange:this.handleChangeDataValue,className:"form-control"}))),l.a.createElement("br",null),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-6"},l.a.createElement("span",null,"Score Model Code"),l.a.createElement("input",{type:"text",id:"model_code",value:this.score_model.model_code,onChange:this.handleSelfChange,className:"form-control",disabled:!0}))),l.a.createElement("br",null))),l.a.createElement(ht.a.Footer,null,l.a.createElement(S.a,{variant:"secondary",onClick:this.handleClose},"Close"),l.a.createElement(S.a,{type:"button",variant:"primary",onClick:this.addButtonClick},"Add"))))}}]),t}(Te),Ma=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={ScoreFactorsList:null},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){var e=this,t={data_key:"csf_type",country_code:this.country_code};(function(e){return F("/api/admin/master_data/score_factors/list",e)})(this.req(t)).then(function(t){if(t){var a=t.data.map(function(e,t){return l.a.createElement("tr",{key:t},l.a.createElement("td",null," ",e.data_value),l.a.createElement("td",null," ",null==e.parent_data_code?"No Parent":de(e.parent_data_code)))});e.setState({ScoreFactorsList:a}),yt()("#table").dataTable({bAutoWidth:!0})}})}},{key:"render",value:function(){return l.a.createElement("div",{className:"container"},l.a.createElement("br",null),l.a.createElement("div",{className:"row"},l.a.createElement("h4",null,l.a.createElement("b",null,"Score Factors"))),l.a.createElement("table",{id:"table",className:"display strip row-border order-column list"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"Score Factor Type"),l.a.createElement("th",null,"Score Factor Group"))),l.a.createElement("tbody",null,this.state.ScoreFactorsList)))}}]),t}(Te),Pa=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={weightageList:null,cs_weightages:null},a.handleCustWeightage=function(e){var t=e.target.id,n=e.target.value;if(!(Number(e.target.value)>100)){var l=a.total_new,r=a.total_repeat,c=!1;a.cs_weightages.map(function(e,o){return t==e.csf_type+"_new"?(l-=Number(e.new_cust_weightage),void((l+=Number(n))<=100&&Number(n)>=0?(e.new_cust_weightage=n,a.new_save_style=100==l?"enable_div":"disable_div"):c=!0)):t==e.csf_type+"_repeat"?(r-=Number(e.repeat_cust_weightage),void((r+=Number(n))<=100&&Number(n)>=0?(e.repeat_cust_weightage=n,a.repeat_save_style=100==r?"enable_div":"disable_div"):c=!0)):void 0}),c||(a.handleSelfChange(e),a.renderWeightageList())}},a.handleBackButton=function(e){a.setState({toPrev:!0})},a.renderWeightageList=function(){if(null!=a.cs_weightages){a.total_new=0,a.total_repeat=0,a.cs_weightages.map(function(e,t){a.total_new+=Number(e.new_cust_weightage),a.total_repeat+=Number(e.repeat_cust_weightage)});var e=Object.keys(a.cs_weightages).length,t=a.cs_weightages.map(function(t,n){return l.a.createElement("tr",{key:n},l.a.createElement("td",null,++n),l.a.createElement("td",null,de(t.csf_type)),l.a.createElement("td",null,l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-8"},l.a.createElement("input",{id:"".concat(t.csf_type,"_new"),type:"text",value:t.new_cust_weightage,tabIndex:n++,onChange:a.handleCustWeightage,className:"form-control weightage_style ".concat(a.new_cust_style),disabled:a.new_cust_disable})),l.a.createElement("div",{className:"col-md-4 width-10"},"%"))),l.a.createElement("td",null,l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-8"},l.a.createElement("input",{id:"".concat(t.csf_type,"_repeat"),type:"text",value:t.repeat_cust_weightage,tabIndex:++e,onChange:a.handleCustWeightage,className:"form-control weightage_style ".concat(a.repeat_cust_style),disabled:a.repeat_cust_disable})),l.a.createElement("div",{className:"col-md-4 width-10"},"%"))))});t.push(l.a.createElement("tr",{key:++e},l.a.createElement("td",null),l.a.createElement("td",null,l.a.createElement("b",null,"Total")),l.a.createElement("td",null,l.a.createElement("center",null,a.total_new," %")),l.a.createElement("td",null,l.a.createElement("center",null,a.total_repeat," %")))),a.setState({weightageList:t})}},a.editWeightage=function(e){var t=e.target.id+"_style";e.target.id;"disable_div"==a[t]?(a[t]="enable_div",t.includes("new")?(a.repeat_cust_disable=!0,a.new_cust_disable=!1):t.includes("repeat")&&(a.new_cust_disable=!0,a.repeat_cust_disable=!1)):a[t]="disable_div",a.renderWeightageList()},a.handleSaveClick=function(e){a.csw_comp.score_model=a.score_model;var t=a.csw_comp;na(a.req({cs_weightages:t})).then(function(e){e&&(a.new_save_style="disable_div",a.repeat_save_style="disable_div",a.renderWeightageList(),"success"==e.status&&(alert("Weightage updated successfully"),window.location.reload()))})},a.addBtnClick=function(e){var t={cs_model_code:a.score_model,country_code:a.country_code};ra(a.req(t)).then(function(e){e&&"success"==e.status&&a.getSelectOptionsFromResult(e.data,"cs_factors",["id","name"])}),a.setState({modalBox:!0})},a.handleAddFactor=function(e){var t={country_code:a.country_code,cs_model_code:a.score_model,csf_type:a.state.csf_type,new_cust_weightage:0,repeat_cust_weightage:0};la(a.req({cs_model_weightage:t})).then(function(e){e&&(alert(e.message),window.location.reload())})},a.handleClose=function(e){a.setState({modalBox:!1})},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){var e=this;this.new_cust_disable=!1,this.repeat_cust_disable=!1,this.new_cust_style="disable_div",this.repeat_cust_style="disable_div",this.new_save_style="disable_div",this.repeat_save_style="disable_div",this.csw_comp={},this.total_new=0,this.total_repeat=0,this.score_model=this.props.match.params.score_model,this.model_name=this.props.match.params.score_model_name;var t={cs_model_code:this.score_model,country_code:this.country_code};(function(e){return F("/api/admin/score_model/weightages",e)})(this.req(t)).then(function(t){if(t){e.cs_weightages=t.data;e.renderWeightageList();yt()("#list_weightage").removeAttr("width").dataTable({order:[],ordering:!1,dom:"Bfrtip",buttons:["csv","excel","print"]})}})}},{key:"render",value:function(){return!0===this.state.toPrev?l.a.createElement(B.a,{to:"/score_models"}):l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"container"},l.a.createElement("h4",null,"CS Weightage"),l.a.createElement("br",null),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-9"},l.a.createElement("h4",null,"Score Model: ",l.a.createElement("b",null,de(this.model_name)))),f("score","weightage_create")&&l.a.createElement("div",{className:"col-md-3"},l.a.createElement("input",{type:"button",value:"Add New Factor",onClick:this.addBtnClick,className:"btn btn-primary"}))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{id:"datatable"},l.a.createElement("table",{id:"list_weightage",className:"display strip list_weightage"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"S.No"),l.a.createElement("th",null,"Factor"),l.a.createElement("th",null,"Weightage for New Cust",f("score","weightage_edit")&&l.a.createElement(l.a.Fragment,null,"\xa0\xa0\xa0",l.a.createElement("br",null),l.a.createElement("input",{type:"button",id:"new_cust",value:"Edit",onClick:this.editWeightage,className:"btn btn-success"}),"\xa0\xa0\xa0",l.a.createElement("input",{type:"button",value:"Save",onClick:this.handleSaveClick,className:"btn btn-success ".concat(this.new_save_style)}))),l.a.createElement("th",null,"Weightage for Repeat Cust",f("score","weightage_edit")&&l.a.createElement(l.a.Fragment,null,"\xa0\xa0\xa0",l.a.createElement("br",null),l.a.createElement("input",{type:"button",id:"repeat_cust",value:"Edit",onClick:this.editWeightage,className:"btn btn-success"}),"\xa0\xa0\xa0",l.a.createElement("input",{type:"button",value:"Save",onClick:this.handleSaveClick,className:"btn btn-success ".concat(this.repeat_save_style)}))))),l.a.createElement("tbody",null,this.state.weightageList)))),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("div",{className:"row"},l.a.createElement("input",{type:"button",value:"Back",onClick:this.handleBackButton,className:"btn btn-primary"}))),l.a.createElement("div",null,l.a.createElement(ht.a,{show:this.state.modalBox,onHide:this.handleClose,style:{width:"-700px"}},l.a.createElement(ht.a.Header,{closeButton:!0,show:this.state.modalBox,onHide:this.handleClose},l.a.createElement(ht.a.Title,null,l.a.createElement("h3",null,"Add New Factor"))),l.a.createElement(ht.a.Body,null,l.a.createElement("div",{className:"container"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-4"},l.a.createElement("label",null,"Factor")),l.a.createElement("div",{className:"col-md-6"},l.a.createElement("select",{id:"csf_type",onChange:this.handleSelfChangeState,className:"form-control"},this.state.cs_factors_dd))),l.a.createElement("br",null))),l.a.createElement(ht.a.Footer,null,l.a.createElement(S.a,{variant:"primary",onClick:this.handleAddFactor},"Add"),l.a.createElement(S.a,{variant:"secondary",onClick:this.handleClose},"Close")))))}}]),t}(Te),La=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={score_result_div:[]},a.renderScoreResult=function(){var e=Object.keys(a.score_results),t=e.length,n=e.map(function(e,n){return l.a.createElement("tr",{key:n},l.a.createElement("td",{className:"width-30"},l.a.createElement("b",null,de(a.score_results[e].code))),l.a.createElement("td",null),l.a.createElement("td",{className:"width-15"},l.a.createElement("input",{id:"score_from_".concat(e),type:"text",readOnly:!0,value:1==e?"0":a.score_results[e].score_from,className:"form-control width-50"})),l.a.createElement("td",{className:"width-15"},"To"),l.a.createElement("td",{className:"width-15"}," ",l.a.createElement("input",{id:"score_to_".concat(e),type:"text",value:e==t?"1000":a.score_results[e].score_to,onChange:a.handleScoreChange,readOnly:e==t,className:"form-control width-50"})),l.a.createElement("td",{className:"width-25"},"Points"))});a.setState({score_result_div:n})},a.handleScoreChange=function(e){var t=e.target.id,n=e.target.value,l=t.split("_"),r=l[l.length-1],c="score_from_"+r;if(c=document.getElementById(c).value,a.score_results[r].score_to=n,a.renderScoreResult(),Number(n)<=Number(c))a.valid=!1;else{a.valid=!0;var o=++r,s="score_from_"+o;document.getElementById(s).value=++n,a.score_results[o].score_from=n,a.handleSelfChange(e),a.renderScoreResult()}},a.handleSaveClick=function(e){var t=Object.keys(a.result_config).length,n=Object.keys(a.score_results).length;if(0==a.valid||"create"==a.mode&&t!=n-1||"edit"==a.mode&&0==t)alert("Please enter valid score range");else{var l={country_code:a.country_code,csf_model:a.score_model,score_result_codes:a.score_results,score_details:a.result_config};aa(a.req({cs_result:l})).then(function(e){e&&"success"==e.status&&(alert("CS Result configured successfully"),window.location.reload())})}},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){var e=this;this.valid=!1,this.result_config={},this.score_results={},this.score_model=this.props.match.params.score_model;var t={csf_model:this.score_model,country_code:this.country_code};(function(e){return F("/api/admin/score_model/cs_result_config/list",e)})(this.req(t)).then(function(t){t&&"success"==t.status&&(t.data.cs_result_config_details.length>0?(t.data.cs_result_config_details.map(function(t,a){var n=a+1;e.score_results[n]={},e.score_results[n].code=t.score_result_code,e.score_results[n].score_from=t.score_from,e.score_results[n].score_to=t.score_to,e.result_config["score_from_"+n]=t.score_from,e.result_config["score_to_"+n]=t.score_to}),e.mode="edit"):(e.score_results={1:{code:"ineligible"},2:{code:"requires_flow_rm_approval"},3:{code:"eligible"}},e.mode="create"),e.renderScoreResult())})}},{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("br",null),l.a.createElement("div",{className:"container  border_style"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-1"}),l.a.createElement("h3",null,"Score Result Config")),l.a.createElement("br",null),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-1"}),l.a.createElement("div",{className:"col-md-11"},l.a.createElement("table",null,l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,l.a.createElement("h5",null,"Result")),l.a.createElement("th",null),l.a.createElement("th",null,l.a.createElement("h5",null,"Score From")),l.a.createElement("th",null),l.a.createElement("th",null,l.a.createElement("h5",null,"Score To")),l.a.createElement("th",null))),l.a.createElement("tbody",null,this.state.score_result_div)))),l.a.createElement("br",null),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-9"}),f("score","result_config_create_edit")&&l.a.createElement("div",{className:"col-md-3"},l.a.createElement("input",{type:"button",value:"Save",onClick:this.handleSaveClick,className:"btn btn-success"})))))}}]),t}(Te),qa=function(e){return F("/api/admin/report/growth_chart",e)},Ra=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={section_rows_arr:null,headers:null},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"format_kpi_metric",value:function(e){var t,a=null;return e&&("%"==e.kpi_unit?a=Number(e.kpi_value).toFixed(2)+" %":"days"==e.kpi_unit?a=Number(e.kpi_value).toFixed(1)+" days":""==e.kpi_unit?a=Number(e.kpi_value).toFixed(0):["core_tot_disbursed_fa_a22","cumm_core_tot_disbursed_fa_a22"].includes(e.kpi_metric)?(t=e.kpi_value,a=(Math.abs(Number(t))>=1e9?(Math.abs(Number(t))/1e9).toFixed(3)+"B":Math.abs(Number(t))>=1e6?(Math.abs(Number(t))/1e6).toFixed(3)+"M":Math.abs(Number(t)))+" "+e.kpi_unit):a=Ce(Math.round(e.kpi_value),e.kpi_unit)),a}},{key:"metric_in_usd",value:function(e){if(e)return["%","days","","Custs","FAs"].includes(e.kpi_unit)?"":Ce(Math.round(e.usd),"USD")}},{key:"get_headers",value:function(e){var t=e.map(function(e){return l.a.createElement(l.a.Fragment,null,l.a.createElement("th",null,e.title),l.a.createElement("th",null,"USD Equivalent"))});return t.unshift(l.a.createElement("th",null,"Metric")),t.unshift(l.a.createElement("th",null,"No")),t}},{key:"get_section_rows",value:function(e,t){var a=this,n=e.items.map(function(e,n){var r="";return e.startsWith("cumm_")?(r=e.replace("cumm_",""),r=de(r)+" (Cummulative)"):r=de(e),e.startsWith("core_")&&(r=l.a.createElement("b",null,r)),l.a.createElement("tr",{key:n},l.a.createElement("td",{className:"report_left"},a.index++),l.a.createElement("td",{className:"report_left"},r),a.get_section_columns(e,t))});return n.unshift(l.a.createElement("tr",null,l.a.createElement("td",{className:"report_title"}),l.a.createElement("td",{colSpan:"1",className:"report_title"},e.title),this.get_section_columns(null,t))),n}},{key:"get_section_columns",value:function(e,t){var a=this;return t.map(function(t){return e?l.a.createElement(l.a.Fragment,null,l.a.createElement("td",null,je(a.format_kpi_metric(t[e]))),l.a.createElement("td",{style:{color:"#FA4616"}},je(a.metric_in_usd(t[e])))):l.a.createElement(l.a.Fragment,null,l.a.createElement("td",null),l.a.createElement("td",null))})}},{key:"componentWillMount",value:function(){var e,t=this,a=this.country_code;(e=this.req({current:"true",country_code:a,type:this.props.type}),F("/api/admin/report/flow_kpi_report",e)).then(function(e){if(e)if("success"===e.status){t.index=1;var a=e.data.reports,n=t.get_headers(a),l=e.data.all_sections.map(function(e){return t.get_section_rows(e,a)});t.report_date="",t.currency=e.data.currency_code,t.forex=e.data.forex,t.setState({headers:n,section_rows_arr:l}),yt()("#kpi_table").removeAttr("width").dataTable({searching:!1,paging:!1,info:!1,dom:"Bfrtip",buttons:["csv","excel","print"],order:[]})}else alert(e.message+"\n"+JSON.stringify(e.data))})}},{key:"render",value:function(){return l.a.createElement("div",{className:"container"},l.a.createElement("br",null),l.a.createElement("h4",null,"Flow KPI Report"),l.a.createElement("h5",null,"Forex : 1 USD = ",this.forex+" "+this.currency," "),l.a.createElement("br",null),l.a.createElement("div",{id:"kpi_datatable"},l.a.createElement("table",{id:"kpi_table",className:"display strip row-border order-column report"},l.a.createElement("thead",null,l.a.createElement("tr",null,this.state.headers)),l.a.createElement("tbody",null,this.state.section_rows_arr))))}}]),t}(qe),Ta=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={comp_name:"date_range"},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return l.a.createElement("div",{className:"row"},l.a.createElement("span",null,"Start Date"),l.a.createElement("div",{className:"col-md-3"},l.a.createElement(it.a,{closeOnSelect:!0,onChange:function(t){e.handleDateChange("start_date",t)},dateFormat:"DD MMM YYYY",timeFormat:!1,required:"required"})),l.a.createElement("span",null,"End Date"),l.a.createElement("div",{className:"col-md-3"},l.a.createElement(it.a,{closeOnSelect:!0,onChange:function(t){e.handleDateChange("end_date",t)},dateFormat:"DD MMM YYYY",timeFormat:!1,required:"required"})),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("input",{type:"button",className:"btn btn-primary",onClick:this.props.onSubmitClick,value:"Submit"})))}}]),t}(Te),Ba=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={rows:null,headers:null,date_range:{}},a.handleSubmit=function(e){a.get_report()},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"get_header",value:function(e){var t=e.map(function(e){return l.a.createElement("th",null,e)});return t.unshift(l.a.createElement("th",null,"No")),t}},{key:"format_metric",value:function(e,t){if("%"==t)e=Number(e).toFixed(2)+" %";else if("days"==t)e=Number(e).toFixed(0)+" days";else{if("UGX"==t||"USD"==t)return Ce(Math.round(e),t);"status"==t?e=de(e):"date"==t&&(e=fe(e))}return e}},{key:"get_rows",value:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return e.map(function(e,n){var r=e.map(function(e,n){return l.a.createElement("td",null,t.format_metric(e,a[n]))});return l.a.createElement("tr",{key:n},l.a.createElement("td",null,n+1),r)})}},{key:"componentWillMount",value:function(){"daily_activity"!=this.props.report_type&&this.get_report()}},{key:"get_report",value:function(){var e,t=this,a=this.props.report_type,n=this.country_code,l=this.state.date_range;(e=this.req({report_type:a,country_code:n,date_range:l},!0),F("/api/admin/report",e)).then(function(e){if(e)if("success"===e.status){var a=e.data.records,n=e.data.units,l=t.get_header(e.data.header),r=t.get_rows(a,n);t.setState({headers:l,rows:r,title:e.data.title}),yt()("#kpi_table").removeAttr("width").dataTable({searching:!1,paging:!1,info:!1,dom:"Bfrtip",buttons:["csv","excel","print"],order:[]})}else alert(e.message+"\n"+JSON.stringify(e.data))})}},{key:"render",value:function(){return l.a.createElement("div",{className:"container"},l.a.createElement("h3",null,this.state.title),"daily_activity"==this.props.report_type&&l.a.createElement(Ta,{id:"date_range",data:this.state.date_range,onSubmitClick:this.handleSubmit,onComponentChange:this.handleComponentChange}),l.a.createElement("div",{id:"kpi_datatable"},l.a.createElement("table",{id:"kpi_table",className:"display strip row-border order-column report flow-data-table flow-data-table-wide_header"},l.a.createElement("thead",null,l.a.createElement("tr",null,this.state.headers)),l.a.createElement("tbody",null,this.state.rows))))}}]),t}(qe),Ia=a(96),Ua=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={cust_perform_search:"hide_div"},a.handleCustIDChange=function(e){a.cust_id=e.target.value},a.handleEnter=function(e){13===e.keyCode&&a.handleSearchClick()},a.split_data_to_arr=function(e){var t=[],a=[],n=[];return Object.keys(e).map(function(l){t.push(l),a.push(e[l].loan_principal),n.push(e[l].loan_doc_id)}),{dates:t,amounts:a,loan_doc_ids:n}},a.handleSearchClick=function(e){if(null!=a.cust_id){var t=a.cust_id;qa(a.req({cust_id:t})).then(function(e){if(e)if("success"===e.status){var t=a.split_data_to_arr(e.data.chart_data);console.log(e.data.cust_data);var n=e.data.cust_data;a.dates=t.dates,a.amounts=t.amounts,a.loan_doc_ids=t.loan_doc_ids,a.setState({cust_data:n,cust_perform_search:"show_div",searchResult:!0})}else alert(e.message+"\n"+JSON.stringify(e.data))})}},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){this.cust_id=this.props.match.params.cust_id,""!=this.cust_id&&this.handleSearchClick()}},{key:"render",value:function(){if(!0===this.state.searchResult&&""==this.props.match.params.cust_id)return l.a.createElement(B.a,{to:"/report/growth_chart_for/".concat(this.cust_id)});var e={labels:this.dates,datasets:[{label:"Float Amount "+this.currency_code,backgroundColor:"#42A5F5",data:this.amounts,loan_doc_ids:this.loan_doc_ids}]},t={tooltips:{callbacks:{afterBody:function(e,t){return"FA ID : "+t.datasets[0].loan_doc_ids[e[0].index]}}},scales:{yAxes:[{type:"linear",display:!0,position:"left",id:"y-axis-1",ticks:{min:0,callback:function(e,t,a){return Ce(e,"UGX")}},scaleLabel:{display:!0,labelString:"Float Amount"}}],xAxes:[{scaleLabel:{display:!0,labelString:"Disbursal Date (showing upto last 100 FAs)"}}]}};return l.a.createElement("div",{id:""},l.a.createElement("div",{className:"container"},l.a.createElement("div",{className:"row top"},l.a.createElement("div",{className:"col-md-2"},l.a.createElement("span",null,l.a.createElement("h5",null,"Flow Customer ID "))),l.a.createElement("div",{className:"col-md-4"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-8"},l.a.createElement("input",{id:"customer_id",onChange:this.handleCustIDChange,onKeyUp:this.handleEnter,placeholder:"Enter...",className:"form-control",required:!0})),l.a.createElement("div",{className:"col-md-4"},l.a.createElement("input",{type:"button",value:"Search",onClick:this.handleSearchClick})))))),this.state.searchResult&&l.a.createElement("div",{className:this.state.cust_perform_search},l.a.createElement("div",{className:"container"},l.a.createElement("h4",{className:"chart"},"Growth Chart"),l.a.createElement("div",{className:"row chart"},l.a.createElement("label",null,l.a.createElement("b",null,"First Advance Date : ")),"\xa0\xa0\xa0",l.a.createElement("label",null,fe(this.state.cust_data.first_loan_date)," (",this.state.cust_data.days," days ago) "),"\xa0\xa0\xa0",l.a.createElement("label",null,l.a.createElement("b",null," | Total no of Advances : ")),"\xa0\xa0\xa0",l.a.createElement("label",null,this.state.cust_data.tot_loans," "),"\xa0\xa0\xa0",l.a.createElement("label",null,l.a.createElement("b",null,"| Total value of Advances : ")),"\xa0\xa0\xa0",l.a.createElement("label",null,Ce(this.state.cust_data.tot_loan_amt,this.currency_code)),"\xa0\xa0\xa0"),l.a.createElement("div",{className:"content-section implementation"},l.a.createElement(Ia.Chart,{type:"bar",data:e,options:t,style:{width:"900px",marginLeft:"100px"}})))))}}]),t}(Te),Wa=function(e){return F(j+"/loan_appl/products",e)},Ya=function(e){return F(j+"/loan/approval",e)},Va=function(e){return F(j+"/loan_appl/apply",e)},Ha=function(e){return F(j+"/loan_appl/applications",e)},za=function(e){return F(j+"/loan_appl/validate",e)},Ja=a(7);Ja.dataTable=a(37);var Ga=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={productList:null,list:!1,upload:!1,create:!1,toUpload:!1,create_agreement:{aggr_doc_id:{}},prompt_inactivate:"hide_div"},a.handleProductCheckbox=function(e){if(e.target.checked){var t=a.product_ids.slice();t.push(e.target.id),a.product_ids=t}else a.product_ids=a.product_ids.filter(function(t){return t!=e.target.id})},a.inactivateAggr=function(e){var t=e.target.id,n=a.req({aggr_id:t,cust_id:a.cust_id});Oa(n).then(function(e){e&&("success"===e.status?(alert(e.message),a.setState({agreement_tr:null,agreements:null,prompt_inactivate:!1}),a.onLoad()):alert(e.message+"\n"+JSON.stringify(e.data)))})},a.handleGenerateAggr=function(e){var t={product_ids:a.product_ids,cust_id:a.cust_id,valid_from:a.create_agreement.valid_from,valid_upto:a.create_agreement.valid_upto,country_code:a.country_code};Sa(a.req({cust_agreement:t},!0)).then(function(e){a.resp(e),e&&("success"===e.status?(a.aggr_doc_id=e.data.aggr_doc_id,a.setState({toUpload:!0,btn_style:""})):alert(e.message+"\n"+JSON.stringify(e.data)))})},a.handleUploadSignedAgr=function(e){a.setState({file_upload:!0})},a.listAgreements=function(){return l.a.createElement("div",{className:"container"},(null!=a.state.agreement_tr||"list"==a.props.mode)&&l.a.createElement("div",{id:"datatable"},l.a.createElement("table",{id:"list_agreements"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"Agreement Doc ID"),l.a.createElement("th",null,"Valid From"),l.a.createElement("th",null,"Valid Upto"),l.a.createElement("th",null,"Status"),l.a.createElement("th",null,"Action"),l.a.createElement("th",null,"View"))),l.a.createElement("tbody",null,a.state.agreement_tr))))},a.createAgreement=function(){return l.a.createElement("div",{className:"container"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-5"},l.a.createElement("h3",null,"Customer: ",a.cust_id))),l.a.createElement("br",null),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-6"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-offset-3 col-md-3"},l.a.createElement("label",null,"Valid From"),l.a.createElement("font",{className:"text-danger"},"   *  ")),l.a.createElement("div",{className:"col-md-6"},l.a.createElement(it.a,{closeOnSelect:!0,onChange:function(e){a.handleSelfDateChange("valid_from",e)},dateFormat:"DD MMM YYYY",timeFormat:!1,required:"required"})))),l.a.createElement("div",{className:"col-md-6"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-offset-3 col-md-3"},l.a.createElement("label",null,"Valid Upto")),l.a.createElement("div",{className:"col-md-6"},l.a.createElement(it.a,{closeOnSelect:!0,onChange:function(e){a.handleSelfDateChange("valid_upto",e)},dateFormat:"DD MMM YYYY",timeFormat:!1,required:"required"}))))),l.a.createElement("br",null),null!=a.state.productList&&l.a.createElement("div",{id:"datatable"},l.a.createElement("table",{id:"list_products"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"Select"),l.a.createElement("th",null,"Product Name"),l.a.createElement("th",null,"Product Type"),l.a.createElement("th",null,"FA Amount"),l.a.createElement("th",null,"Duration"),l.a.createElement("th",null,"Flow Fee"),l.a.createElement("th",null,"Repayment"))),l.a.createElement("tbody",null,a.state.productList))))},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"onLoad",value:function(){var e=this,t=!1,a={cust_id:this.cust_id};(function(e){return F("/api/admin/agreement/aggrs",e)})(this.req(a)).then(function(a){if(a)if("success"===a.status)if(a.data.prompt_inactivate||"list"==e.props.mode){t=a.data.prompt_inactivate;var n=null;a.data.agreements&&(n=a.data.agreements.map(function(t,a){return l.a.createElement("tr",null,l.a.createElement("td",null,t.aggr_doc_id),l.a.createElement("td",null,fe(t.valid_from)),l.a.createElement("td",null,fe(t.valid_upto)),l.a.createElement("td",null," ",de(t.status)),l.a.createElement("td",null," ","inactive"!=t.status?l.a.createElement("input",{type:"button",id:t.id,value:"Inactivate",onClick:e.inactivateAggr,className:"btn btn-primary"}):l.a.createElement("label",null,"NA")),l.a.createElement("td",null," ",t.aggr_file_rel_path?l.a.createElement(z.a,{to:t.aggr_file_rel_path,target:"_blank"},"View PDF"):l.a.createElement("label",null,"NA")))})),e.setState({agreement_tr:n,agreements:a.data.agreements,list:!0,create:!1,prompt_inactivate:t}),Ja("#list_agreements").dataTable({order:[],bAutoWidth:!0,bDestroy:!0})}else e.setState({list:!1,create:!0}),e.create_agreement={},e.get_product_list();else alert(a.message+"\n"+JSON.stringify(a.data))})}},{key:"get_product_list",value:function(){var e=this,t=this.cust_id;Wa(this.req({req_parameter:t},!0)).then(function(t){if(e.resp(t),t){var a=t.data;a.hasOwnProperty("borrower")?e.productList(a):a.hasOwnProperty("borrowers")}})}},{key:"componentWillMount",value:function(){void 0===Object({NODE_ENV:"production",PUBLIC_URL:"",REACT_APP_ADMIN_API_ROOT:"/api/admin",REACT_APP_APP_API_ROOT:"/api/app",REACT_APP_CORE_API_ROOT:"/api/core",REACT_APP_URL:"http://app.flowglobal.net"}).REACT_APP_USE_ROOT_ONLY_DEV?this.root="":this.root="http://localhost:8000",this.cust_id=this.props.match.params.cust_id,this.product_ids=[],this[this.props.id]={},this.onLoad()}},{key:"productList",value:function(e){var t=this;e.loan_products.map(function(e,a){return t.product_ids.push(e.id)});var a=e.loan_products.map(function(e,a){return l.a.createElement("tr",null,l.a.createElement("td",null,l.a.createElement("input",{id:e.id,type:"checkbox",onChange:t.handleProductCheckbox,defaultChecked:!0})),l.a.createElement("td",null," ",e.product_name),l.a.createElement("td",null," ",Ee(e.product_type)),l.a.createElement("td",null," ",je(Ve(e.max_loan_amount,t.currency_code))),l.a.createElement("td",null," ",e.duration," days"),l.a.createElement("td",null," ",je(ze(e,t.currency_code))),l.a.createElement("td",null," ",je(Ge(e,t.currency_code))))});this.setState({list:!1,create:!0,upload:!1}),this.setState({productList:a}),Ja("#list_products").dataTable({bAutoWidth:!0,bDestroy:!0,searching:!1,pageLength:10})}},{key:"render",value:function(){return!0===this.state.toUpload?l.a.createElement(B.a,{to:"/agreement/upload/".concat(this.cust_id,"/").concat(this.aggr_doc_id)}):l.a.createElement("div",{className:"container"},l.a.createElement("div",{className:"row"},l.a.createElement("h3",null,this.state.create&&"Select Products to create new Agreement"),l.a.createElement("h3",null,this.state.list&&"Existing Agreements : "+this.cust_id)),this.state.prompt_inactivate&&"list"!=this.props.mode&&!this.state.create&&l.a.createElement("div",{className:"row"},l.a.createElement("b",null,"Below Agreements already attached to the Customer. You have to inactivate if they are no longer valid, to create new Agreement.")),l.a.createElement("br",null),this.state.create&&this.createAgreement(),this.state.list&&this.listAgreements(),l.a.createElement("br",null),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-9"}),l.a.createElement("div",{className:"col-md-3"},"\xa0\xa0",this.state.create&&l.a.createElement(S.a,{disabled:this.state.calling_api,variant:"primary",onClick:this.handleGenerateAggr},"Generate Agreement"),"\xa0\xa0")))}}]),t}(Te),Ka=a(97),Qa=a.n(Ka),Xa=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={viewPdf:!1,sign_checked:!1,upload_checked:!1,sign_data:"",toapplyFA:!1},a.handleReset=function(){"Master"===a.aggr_type&&(a.aggr_doc_id=null),a.setState({aggr_file_rel_path:null,upload_checked:!1,sign_checked:!1,viewPdf:!1,file_upload:!1,sign_data:null,agreement:null})},a.handleAggrTypeClick=function(e){if(e.target.checked){var t=e.target.value;"Draft"===t&&(a.note=!1,a.aggr_doc_id=a.state.draft_aggr_doc_id,e.target.id="aggr_doc_id",e.target.value=a.state.draft_aggr_doc_id,a.handleSelfChangeState(e)),"no_draft"===t&&(t=null),a.setState({aggr_type:t})}"Master"===t&&(a.note=!0),a.aggr_type=t,a.handleReset()},a.handleMasterAggrChange=function(e){a.handleReset();var t=e.target.value,n=JSON.parse(t);a.handleSelfChangeState(e,n.aggr_doc_id),a.aggr_doc_id=n.aggr_doc_id},a.handleUploadSignedAgr=function(e){a.submit_btn=!0,a.aggr_doc_id?a.setState({file_upload:!0,viewPdf:!1,upload_checked:!0,sign_checked:!1}):alert("Please select an agreement")},a.handleDigitalSignature=function(e){if(a.aggr_doc_id){var t=null;a.setState({aggr_file_rel_path:t,file_upload:!1,viewPdf:!1,sign_checked:!0,upload_checked:!1,loading:!0}),"Master"===a.state.aggr_type?t=a.state.master_aggr_folder_rel_path:"Draft"==a.state.aggr_type&&(t=a.state.draft_aggr_folder_rel_path),t+="/"+a.aggr_doc_id+".pdf",a.setState({aggr_file_rel_path:t,viewPdf:!0,loading:!1})}else alert("Please select an agreement")},a.handleSubmitAggr=function(e){var t={country_code:a.country_code,file_of:"agreement",cust_id:a.cust_id,aggr_doc_id:a.aggr_doc_id,aggr_type:a.state.aggr_type,sign_type:"digital"};if(a.state.file_upload){if(null==a.state.agreement)return void alert("Please upload the file to submit.");var n=a.state.agreement.split("|");t.sign_type="upload",t.file_name=n[1],t.file_type=n[0],a.setState({file_name:t.file_name})}Aa(a.req(t,!0)).then(function(e){if(a.resp(e),e)if("success"===e.status){var t=a.cust_id.split("-");"Master"==a.state.aggr_type?alert("Signed Agreement saved successfully -"+a.aggr_doc_id+"-"+t[1]):alert("Signed Agreement saved successfully -"+a.aggr_doc_id),a.setState({toapplyFA:!0})}else alert(e.message+"\n"+JSON.stringify(e.data))})},a.handleClose=function(e){a.setState({modalBox:!1})},a.handleSignAgreement=function(e){a.setState({modalBox:!0})},a.handleCaptureSignature=function(e){if(e.target.value=a.signature.getTrimmedCanvas().toDataURL(a.file_format),a.handleSelfChangeState(e),a.setState({modalBox:!1}),1==window.confirm("Are you sure to sign and submit Agreement.")){var t={country_code:a.country_code,file_of:"agreement",file_name:a.aggr_doc_id,cust_id:a.cust_id,aggr_doc_id:a.aggr_doc_id,aggr_type:a.state.aggr_type,sign_type:"digital"};null!=e.target.value?(t.file_type=a.file_format,t.file_data_type="data-url",t.file_data=e.target.value,Aa(a.req(t,!0)).then(function(e){if(a.resp(e),e)if("success"===e.status){var t=a.cust_id.split("-");"Master"==a.state.aggr_type?alert("Signed Agreement saved successfully -"+a.aggr_doc_id+"-"+t[1]):alert("Signed Agreement saved successfully -"+a.aggr_doc_id),a.setState({toapplyFA:!0})}else alert(e.message+"\n"+JSON.stringify(e.data))})):alert("Please capture your signature digitally to submit.")}},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){var e=this;this.root="";var t=null;this.file_format="image/png",this.cust_id=this.props.match.params.cust_id,this.props.mode;var a={cust_id:this.cust_id,country_code:this.country_code};(function(e){return F("/api/admin/agreement/load",e)})(this.req(a)).then(function(a){if(e.resp(a),a)if("success"===a.status){e.getSelectOptionsFromResult(a.data.master_agreements,"agreement",["obj","name"]),null==t&&null!=a.data.draft_agreement&&(t=a.data.draft_agreement.aggr_doc_id);var n=a.data.draft_aggr_folder_rel_path,l=a.data.master_aggr_folder_rel_path;e.setState({draft_aggr_doc_id:t,draft_aggr_folder_rel_path:n,master_aggr_folder_rel_path:l})}else alert(a.message+"\n"+JSON.stringify(a.data))})}},{key:"render",value:function(){var e=this;return this.state.toapplyFA?l.a.createElement(B.a,{to:"/fa_appl_for/".concat(this.cust_id)}):l.a.createElement("div",{className:"container"},l.a.createElement("div",{className:"row"},l.a.createElement("h3",null,this.cust_id," - Sign / Upload Agreement")),l.a.createElement("br",null),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-4"},this.state.draft_aggr_doc_id&&l.a.createElement("label",null,l.a.createElement("input",{value:"Draft",onClick:this.handleAggrTypeClick,type:"radio",name:"aggr"}),"\xa0\xa0",this.state.draft_aggr_doc_id," (Customer Draft Agreement)"),!this.state.draft_aggr_doc_id&&l.a.createElement("label",null,l.a.createElement("input",{name:"aggr",value:"no_draft",onClick:this.handleAggrTypeClick,type:"radio"}),"\xa0\xa0No Draft")),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("label",null,l.a.createElement("input",{value:"Master",onClick:this.handleAggrTypeClick,type:"radio",name:"aggr"}),"\xa0\xa0Select from Master Agreements"))),l.a.createElement("br",null),this.state.aggr_type&&l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-4"},l.a.createElement("label",null,this.state.aggr_type," Agreement Doc ID")),l.a.createElement("div",{className:"col-md-3"},"Draft"===this.state.aggr_type&&null!=this.state.aggr_doc_id&&l.a.createElement("input",{type:"text",id:"aggr_doc_id",onChange:this.handleSelfChangeState,value:this.state.draft_aggr_doc_id,className:"form-control",disabled:!0}),"Master"===this.state.aggr_type&&l.a.createElement("select",{id:"aggr_doc_id",onChange:this.handleMasterAggrChange,className:"form-control"},this.state.agreement_dd))),l.a.createElement("br",null),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-4"},l.a.createElement("label",null,l.a.createElement("input",{type:"radio",name:"agreement",value:"upload",onClick:this.handleUploadSignedAgr,defaultChecked:this.state.upload_checked}),"\xa0\xa0Upload Signed Copy of ",this.state.aggr_type," Agreement")),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("label",null,l.a.createElement("input",{type:"radio",name:"agreement",value:"sign",onClick:this.handleDigitalSignature,defaultChecked:this.state.sign_checked}),"\xa0\xa0Digitally Sign ",this.state.aggr_type," Agreement"))),l.a.createElement("br",null)),this.state.file_upload&&l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-6"},l.a.createElement(_t,{id:"agreement",aggr_doc_id:this.aggr_doc_id,cust_id:this.cust_id,label:"Agreement",type:"image",mode:"create",onCreateUpload:this.handleSelfChangeState}))),this.state.loading&&l.a.createElement("span",null,"Please wait while Agreement PDF is loaded."),this.state.viewPdf&&l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row",id:"float_style"},l.a.createElement("input",{type:"button",disabled:this.state.calling_api,value:"Sign Agreement",onClick:this.handleSignAgreement,className:"btn btn-primary"})),l.a.createElement("div",{className:"row"},l.a.createElement("h4",null,"Master Agreement Document"),"\xa0\xa0\xa0",this.note&&l.a.createElement("span",{className:"cust_details"},"Note : Customer details will be automatically filled once document is digitally signed "),l.a.createElement("iframe",{className:"aggr_style",src:this.root+this.state.aggr_file_rel_path})),l.a.createElement("br",null),l.a.createElement("div",{className:"row",id:"float_style"},l.a.createElement("input",{type:"button",disabled:this.state.calling_api,value:"Sign Agreement",onClick:this.handleSignAgreement,className:"btn btn-primary"}))),l.a.createElement("br",null),this.submit_btn&&l.a.createElement("div",{className:"row"},l.a.createElement("input",{type:"button",disabled:this.state.calling_api,onClick:this.handleSubmitAggr,value:"Submit",className:"btn btn-primary"})),l.a.createElement(ht.a,{show:this.state.modalBox,onHide:this.handleClose,dialogClassName:"modal-dialog-sign"},l.a.createElement(ht.a.Header,{closeButton:!0,show:this.state.modalBox,onHide:this.handleClose},l.a.createElement(ht.a.Title,null,"Sign here")),l.a.createElement(ht.a.Body,null,l.a.createElement(Qa.a,{penColor:"blue",canvasProps:{width:250,height:120,className:"signature_style"},ref:function(t){e.signature=t}})),l.a.createElement(ht.a.Footer,null,l.a.createElement("div",{className:"center"},l.a.createElement(S.a,{variant:"primary",id:"sign_data",onClick:this.handleCaptureSignature},"Capture Signature")),l.a.createElement("div",{className:"center_btn"},l.a.createElement(S.a,{variant:"secondary",onClick:function(t){e.signature.clear()}},"Clear")),l.a.createElement(S.a,{variant:"secondary",onClick:this.handleClose},"Close"))))}}]),t}(Te),Za=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={comp_name:"transaction"},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){var e=this,t={master_data:{status:"enabled",data_key:"account_transaction_type"}};oe(this.req(t)).then(function(t){t&&("success"===t.status?e.getSelectOptionsFromResult(t.data,"account_txn_type",["data_code","data_value"]):alert(t.message+"\n"+JSON.stringify(t.data)))})}},{key:"render",value:function(){var e=this;return l.a.createElement("div",{className:"row account_left"},l.a.createElement("span",null,"Start Date"),l.a.createElement("div",{className:"col-md-3"},l.a.createElement(it.a,{closeOnSelect:!0,onChange:function(t){e.handleDateChange("start_date",t)},dateFormat:"DD MMM YYYY",timeFormat:!1,required:"required"})),l.a.createElement("span",null,"End Date"),l.a.createElement("div",{className:"col-md-3"},l.a.createElement(it.a,{closeOnSelect:!0,onChange:function(t){e.handleDateChange("end_date",t)},dateFormat:"DD MMM YYYY",timeFormat:!1,required:"required"})),l.a.createElement("span",null,"Transaction Type"),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("select",{id:"acc_txn_type",onChange:this.handleChange,className:"form-control"},this.state.account_txn_type_dd)))}}]),t}(Te),$a=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={accountTxnList:null,transaction:{},account_result:"hide_div"},a.handleTransactionSearch=function(e){yt()("#transaction").DataTable().destroy();var t=a.state.transaction;t.country_code=a.country_code,t.acc_id=a.acc_id,Dt(a.req({account_txn:t})).then(function(e){if(e)if("success"===e.status){var t=e.data.map(function(e,t){return l.a.createElement("tr",{key:t},l.a.createElement("td",null,++t),l.a.createElement("td",null," ",de(e.acc_txn_type)),l.a.createElement("td",null," ",de(e.txn_mode)),l.a.createElement("td",null," ",e.ref_acc_txt),l.a.createElement("td",null," ",je(Ce(e.credit,a.currency_code))),l.a.createElement("td",null," ",je(Ce(e.debit,a.currency_code))),l.a.createElement("td",null," ",je(Ce(e.balance,a.currency_code))),l.a.createElement("td",null," ",e.txn_id),l.a.createElement("td",null," ",e.txn_exec_by),l.a.createElement("td",null," ",ge(e.txn_date)),l.a.createElement("td",null," ",e.remarks))});a.setState({accountTxnList:t,account_result:"show_div"}),yt()("#transaction").removeAttr("width").dataTable({order:[],columns:[{width:"10%"},{width:"10%"},{width:"10%"},{width:"10%"},{width:"15%"},{width:"15%"},{width:"20%"},{width:"20%"},{width:"20%"},{width:"20%"},{width:"20%"}],dom:"Bfrtip",buttons:["csv","excel","print"]})}else alert(e.message+"\n"+JSON.stringify(e.data))})},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){this.acc_id=this.props.match.params.acc_id}},{key:"render",value:function(){return l.a.createElement("div",{id:""},l.a.createElement("br",null),l.a.createElement("div",{className:"container"},l.a.createElement("div",{className:"row"},l.a.createElement(Za,{id:"transaction",onComponentChange:this.handleComponentChange}),l.a.createElement(S.a,{className:"btn btn-primary account_txn_type",onClick:this.handleTransactionSearch},"Search"))),l.a.createElement("div",{className:"container"},l.a.createElement("br",null),l.a.createElement("div",{className:"row",id:"float_style"}),l.a.createElement("div",{className:this.state.account_result},l.a.createElement("div",{id:"datatable account_txn"},l.a.createElement("h4",null,"Account Transactions"),l.a.createElement("table",{id:"transaction"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"S.No"),l.a.createElement("th",null,"Transaction Type"),l.a.createElement("th",null,"Transaction Mode"),l.a.createElement("th",null,"Ref Account ID"),l.a.createElement("th",null,"Credit"),l.a.createElement("th",null,"Debit"),l.a.createElement("th",null,"Balance"),l.a.createElement("th",null,"Transaction ID"),l.a.createElement("th",null,"Txn Executed By"),l.a.createElement("th",null,"Transaction Date"),l.a.createElement("th",null,"Remarks"))),l.a.createElement("tbody",null,this.state.accountTxnList))))))}}]),t}(qe),en=l.a.createElement(l.a.Fragment,null,l.a.createElement(E.a,{path:"/market/create",exact:!0,component:function(){return l.a.createElement(vt,{mode:"create",title:"Create Market"})}}),l.a.createElement(E.a,{path:"/market/list",exact:!0,component:wt}),l.a.createElement(E.a,{path:"/market/view/:country_code",exact:!0,component:function(e){return l.a.createElement(vt,Object.assign({mode:"view",title:"View/Edit Market"},e))}})),tn=l.a.createElement(l.a.Fragment,null,l.a.createElement(E.a,{path:"/lender/create",exact:!0,component:function(){return l.a.createElement(Ut,{mode:"create",title:"Create Lender"})}}),l.a.createElement(E.a,{path:"/lender/list",exact:!0,component:Lt}),l.a.createElement(E.a,{path:"/lender/view/:lender_code",exact:!0,component:function(e){return l.a.createElement(Ut,Object.assign({mode:"view",title:"View/Edit Lender"},e))}})),an=l.a.createElement(l.a.Fragment,null,l.a.createElement(E.a,{path:"/data_provider/create",exact:!0,component:function(){return l.a.createElement(Yt,{mode:"create",title:"Create Data Provider"})}}),l.a.createElement(E.a,{path:"/data_provider/list",exact:!0,component:Tt}),l.a.createElement(E.a,{path:"/data_provider/view/:data_prvdr_code",exact:!0,component:function(e){return l.a.createElement(Yt,Object.assign({mode:"view",title:"View/Edit Data Provider"},e))}})),nn=l.a.createElement(l.a.Fragment,null,l.a.createElement(E.a,{path:"/account_provider/create",exact:!0,component:function(){return l.a.createElement(zt,{mode:"create",title:"Create Account Provider"})}}),l.a.createElement(E.a,{path:"/account_provider/list",exact:!0,component:function(){return l.a.createElement(Jt,null)}})),ln=l.a.createElement(l.a.Fragment,null,l.a.createElement(E.a,{path:"/fa_product/template/create",exact:!0,component:function(){return l.a.createElement(ta,{mode:"create",title:"Create FA Product Template"})}}),l.a.createElement(E.a,{path:"/fa_product/create",exact:!0,component:function(){return l.a.createElement(ma,{mode:"create",title:"Create FA Product"})}}),l.a.createElement(E.a,{path:"/fa_product/template/view/:product_template_id",exact:!0,component:function(e){return l.a.createElement(ta,Object.assign({mode:"view",title:"View/Edit FA Product Template"},e))}}),l.a.createElement(E.a,{path:"/fa_product/view/:product_id",exact:!0,component:function(e){return l.a.createElement(ma,Object.assign({mode:"view",title:"View/Edit FA Product"},e))}}),l.a.createElement(E.a,{path:"/fa_product/template/list",exact:!0,component:ua}),l.a.createElement(E.a,{path:"/fa_product/list",exact:!0,component:ha}),l.a.createElement(E.a,{path:"/fa_product/search_product",exact:!0,component:_a})),rn=l.a.createElement(l.a.Fragment,null,l.a.createElement(E.a,{path:"/master_data_key/add",exact:!0,component:function(){return l.a.createElement(ba,null)}}),l.a.createElement(E.a,{path:"/master_data_key/list",exact:!0,component:function(){return l.a.createElement(ya,null)}}),l.a.createElement(E.a,{path:"/master_data/add",exact:!0,component:Ca})),cn=(l.a.createElement(l.a.Fragment,null,l.a.createElement(E.a,{path:"/app_user/create",exact:!0,component:Na})),l.a.createElement(l.a.Fragment,null,l.a.createElement(E.a,{path:"/agreement/create",exact:!0,component:function(){return l.a.createElement(ja,{id:"master_agreement"})}}),l.a.createElement(E.a,{path:"/agreement/list",exact:!0,component:function(){return l.a.createElement(Da,null)}}),l.a.createElement(E.a,{path:"/agreement/create/:cust_id",exact:!0,component:function(e){return l.a.createElement(Ga,Object.assign({id:"create_agreement"},e))}}),l.a.createElement(E.a,{path:"/agreement/list/:cust_id",exact:!0,component:function(e){return l.a.createElement(Ga,Object.assign({mode:"list",id:"create_agreement"},e))}}),l.a.createElement(E.a,{path:"/agreement/upload/:cust_id",exact:!0,component:function(e){return l.a.createElement(Xa,e)}}),l.a.createElement(E.a,{path:"/agreement/upload/:cust_id/:aggr_doc_id",exact:!0,component:function(e){return l.a.createElement(Xa,Object.assign({mode:"sign_draft"},e))}}))),on=l.a.createElement(l.a.Fragment,null,l.a.createElement(E.a,{path:"/score_models",exact:!0,component:function(){return l.a.createElement(Fa,{id:"score_model"})}}),l.a.createElement(E.a,{path:"/score_models/weightage/:score_model?/:score_model_name?",component:function(e){return l.a.createElement(Pa,Object.assign({id:"csw_comp"},e))}}),l.a.createElement(E.a,{path:"/score_models/result_config/:score_model?",component:function(e){return l.a.createElement(La,Object.assign({id:"result_config"},e))}}),l.a.createElement(E.a,{path:"/score_factors",exact:!0,component:function(){return l.a.createElement(Ma,null)}})),sn=l.a.createElement(l.a.Fragment,null,l.a.createElement(E.a,{path:"/report/monthly_kpi_report",exact:!0,component:function(e){return l.a.createElement(Ra,Object.assign({type:"monthly"},e))}}),l.a.createElement(E.a,{path:"/report/current_kpi_report",exact:!0,component:function(e){return l.a.createElement(Ra,Object.assign({type:"current"},e))}}),l.a.createElement(E.a,{path:"/report/portfolio_quality",exact:!0,component:function(e){return l.a.createElement(Ba,Object.assign({report_type:"portfolio_quality"},e))}}),l.a.createElement(E.a,{path:"/report/product_takeup",exact:!0,component:function(e){return l.a.createElement(Ba,Object.assign({report_type:"product_takeup"},e))}}),l.a.createElement(E.a,{path:"/report/daily_activity",exact:!0,component:function(e){return l.a.createElement(Ba,Object.assign({report_type:"daily_activity"},e))}}),l.a.createElement(E.a,{path:"/report/growth_chart",exact:!0,component:function(e){return l.a.createElement(Ua,Object.assign({id:"growth_chart"},e))}}),l.a.createElement(E.a,{path:"/report/growth_chart_for/:cust_id",exact:!0,component:function(e){return l.a.createElement(Ua,Object.assign({id:"growth_chart"},e))}})),dn=l.a.createElement(l.a.Fragment,null,l.a.createElement(E.a,{path:"/acc_txns/:entity/:entity_code/:acc_id",exact:!0,component:function(e){return l.a.createElement($a,e)}})),mn=a(92),un=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(i.a)(this,Object(d.a)(t).call(this,e))).handleSection1=function(e){(e=ue()(e).format("YYYY-MM-DD")).target&&(e=e.target.value);""!=e&&a.setState({section3:"disable_div",search_by_textbox_style:"disable_div",section2:"disable_div"})},a.handleSection3=function(e){""!=e.target.value?a.setState({section1:"disable_div",section2:"disable_div"}):""==e.target.value&&a.setState({section1:"show_div",section2:"show_div"})},a.handleSection2=function(e){""!=e.target.value?a.setState({section1:"disable_div",section3:"disable_div"}):""==e.target.value&&a.setState({section1:"show_div",section3:"show_div"})},a.handleStatusChange=function(e){a.handleReset(e),a.handleElementReset(a.state.action_date_field+"__from"),a.handleElementReset(a.state.action_date_field+"__to"),a.handleElementReset(a.state.action_date_field+"__today"),a.handleElementReset(a.state.actor_id),a.setState({submitted_field_style:"enable_div",__from:"",__to:"",today:!1,show_by_today:!1,show_from_until:!1,show_approver:!1}),"loan"==a.props.mode?"pending_disbursal"==e.target.value?a.setState({action:"Approved",show_by_today:!0,show_from_until:!0,actor_id:"loan_approver_id",action_date_field:"loan_approved_date",actor_list_dd:a.state.approver_list_dd}):"ongoing"==e.target.value||"disbursed"==e.target.value?a.setState({action:"Disbursed",show_from_until:!0,actor_id:"disbursed_by",action_date_field:"disbursal_date",actor_list_dd:a.state.disbursed_by_dd,__from:"",__to:""}):"due"==e.target.value||"overdue"==e.target.value||"settled"==e.target.value&&a.setState({action:"Payment Captured",show_by_today:!0,show_from_until:!0,actor_id:"paid_by",action_date_field:"paid_date",actor_list_dd:a.state.payer_list_dd,__from:"",__to:""}):"loan_appl"==a.props.mode&&("approved"==e.target.value?a.setState({action:"Approved",show_by_today:!0,show_from_until:!1,actor_id:"loan_approver_id",action_date_field:"loan_approved_date",actor_list_dd:a.state.approver_list_dd}):"pending_approval"==e.target.value&&a.setState({action:"Applied",show_by_today:!0,show_from_until:!0,show_approver:!0,actor_id:"loan_applied_by",action_date_field:"loan_appl_date",actor_list_dd:a.state.applier_list_dd}))},a.handleDropdownValue=function(e){"status"==e.target.id&&a.handleStatusChange(e),""!=e.target.value?a.setState({search_by_textbox_style:"disable_div"}):a.setState({search_by_textbox_style:"show_div"})},a.handleApiCall=function(e,t){ee(a.req({country_code:e,screen:t,status:"enabled"})).then(function(e){if(a.resp(e),e){var t=e.data;for(var n in t){var l=t[n];if("loan_status"==n||"loan_appl_status"==n||"borrower_status"==n||"region_list"==n){a.getSelectOptionsFromResult(l,n,["data_code","data_value"])}else a.getSelectOptionsFromResult(l,n)}}})},a.toggleAdvSearch=function(){a.setState({adv_search:!a.state.adv_search})},a.SearchByFromUntil=function(e){return l.a.createElement(N.a.Row,null,a.state.show_approver&&l.a.createElement(N.a.Group,{as:mn.a,md:2,className:a.state.section1},l.a.createElement(N.a.Label,null,"Approver"),l.a.createElement(N.a.Control,{as:"select",id:"loan_approver_id",onChange:function(e){a.handleChange(e),a.handleDropdownValue(e),a.handleSection1(e)}},a.state.approver_list_dd)),a.state.show_by_today&&l.a.createElement(l.a.Fragment,null,"loan_appl"==a.props.mode?l.a.createElement(N.a.Group,{as:mn.a,md:2,className:a.state.section1},l.a.createElement(N.a.Label,null,a.state.action," By"),l.a.createElement(N.a.Control,{as:"select",id:a.state.actor_id,onChange:function(e){a.handleChange(e),a.handleDropdownValue(e),a.handleSection1(e)}},a.state.actor_list_dd)):l.a.createElement(N.a.Group,{as:mn.a,md:3,className:a.state.section1},l.a.createElement(N.a.Label,null,a.state.action," By"),l.a.createElement(N.a.Control,{as:"select",id:a.state.actor_id,onChange:function(e){a.handleChange(e),a.handleDropdownValue(e),a.handleSection1(e)}},a.state.actor_list_dd)),"loan_appl"==a.props.mode?l.a.createElement(N.a.Group,{as:mn.a,md:2,className:a.state.section1},l.a.createElement(N.a.Label,null),l.a.createElement(N.a.Row,{className:"justify-content-md-center"},l.a.createElement(N.a.Check,{className:"aggregation",type:"checkbox",id:a.state.action_date_field+"__today",onChange:function(e){a.handleCheckboxClick(e),a.handleDropdownValue(e),a.handleSection1(e)},label:a.state.action+"  Today"}))):l.a.createElement(N.a.Group,{as:mn.a,md:3,className:a.state.section1},l.a.createElement(N.a.Label,null),l.a.createElement(N.a.Row,{className:"justify-content-md-center"},l.a.createElement(N.a.Check,{className:"aggregation",type:"checkbox",id:a.state.action_date_field+"__today",onChange:function(e){a.handleCheckboxClick(e),a.handleDropdownValue(e),a.handleSection1(e)},label:a.state.action+"  Today"})))),a.state.show_from_until&&l.a.createElement(l.a.Fragment,null,l.a.createElement(N.a.Group,{as:mn.a,md:e,className:a.state.section1},l.a.createElement(N.a.Label,null,a.state.action," from"),l.a.createElement(it.a,{closeOnSelect:!0,value:a.state.__from,dateFormat:"DD MMM YYYY",timeFormat:!1,required:"required",onChange:function(e){a.handleDateChange(a.state.action_date_field+"__from",e),a.setState({__from:e}),a.handleSection1(e)}})),l.a.createElement(N.a.Group,{as:mn.a,md:e,className:a.state.section1},l.a.createElement(N.a.Label,null,a.state.action," until"),l.a.createElement(it.a,{closeOnSelect:!0,value:a.state.__to,dateFormat:"DD MMM YYYY",timeFormat:!1,required:"required",onChange:function(e){a.handleDateChange(a.state.action_date_field+"__to",e),a.setState({__to:e}),a.handleSection1(e)}}))))},a.SearchBorrower=function(){return l.a.createElement(N.a.Row,null,l.a.createElement(N.a.Group,{as:mn.a,md:3,className:a.state.section1},l.a.createElement(N.a.Label,null,"Flow Relationship Manager"),l.a.createElement(N.a.Control,{as:"select",id:"flow_rel_mgr_id",onChange:function(e){a.handleChange(e),a.handleSection1(e)}},a.state.flow_rel_list_dd)),l.a.createElement(N.a.Group,{as:mn.a,md:3,className:a.state.section1},l.a.createElement(N.a.Label,null,"Region"),l.a.createElement(N.a.Control,{as:"select",id:"region",onChange:function(e){a.handleChange(e),a.handleDropdownValue(e),a.handleSection1(e)}},a.state.region_list_dd)),l.a.createElement(N.a.Group,{as:mn.a,md:1,className:a.state.search_by_textbox_style},l.a.createElement("br",null),l.a.createElement("h4",null,"OR")),l.a.createElement(N.a.Group,{as:mn.a,md:3,className:a.state.section3},l.a.createElement(N.a.Label,null,"Any Customer ID / Mobile No / National ID"),l.a.createElement(N.a.Control,{id:"req_parameter",onChange:function(e){a.handleChange(e),a.handleSection3(e)}})))},a.WildCardSearch=function(){return l.a.createElement("div",null,l.a.createElement(N.a.Group,{as:mn.a,md:"2"},l.a.createElement("h4",null,"OR")),l.a.createElement(N.a.Row,null,l.a.createElement(N.a.Group,{as:mn.a,md:"3",className:a.state.section2},l.a.createElement(N.a.Label,null,"Any ",a.state.doc_id_lbl," / Customer ID / Mobile No / National ID"),l.a.createElement(N.a.Control,{id:"req_parameter",onChange:function(e){a.handleChange(e),a.handleSection2(e)},className:a.state.cust_div_style}))))},a.AdvancedSearch=function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(N.a.Row,null,l.a.createElement(N.a.Group,{as:mn.a,md:3,className:a.state.section1},l.a.createElement(N.a.Label,null,"Master Customer ID"),l.a.createElement(N.a.Control,{id:"master_cust_id",onChange:function(e){a.handleChange(e),a.handleSection1(e)}})),l.a.createElement(N.a.Group,{as:mn.a,md:3,className:a.state.section1},l.a.createElement(N.a.Label,null,"Registered from"),l.a.createElement(it.a,{closeOnSelect:!0,value:a.state.reg_date_from,dateFormat:"DD MMM YYYY",timeFormat:!1,required:"required",onChange:function(e){a.handleDateChange("reg_date__from",e),a.setState({reg_date_from:e}),a.handleSection1(e)}}))),l.a.createElement(N.a.Row,null,l.a.createElement(N.a.Group,{as:mn.a,className:a.state.section1},l.a.createElement(N.a.Row,{className:"justify-content-md-left"},l.a.createElement(N.a.Check,{className:"aggregation",type:"checkbox",id:"not_have_active_agrmnt",onChange:function(e){a.handleBorrowerCheckboxClick(e),a.handleSection1(e)},label:"Don't have Active Agrmt"})),l.a.createElement(N.a.Row,{className:"justify-content-md-left"},l.a.createElement(N.a.Check,{className:"aggregation",type:"checkbox",id:"have_active_agrmnt",onChange:function(e){a.handleBorrowerCheckboxClick(e),a.handleSection1(e)},label:"Have Active Agrmt"}))),l.a.createElement(N.a.Group,{as:mn.a,className:a.state.section1},l.a.createElement(N.a.Row,{className:"justify-content-md-left"},l.a.createElement(N.a.Check,{className:"aggregation",type:"checkbox",id:"non_active_cust",onChange:function(e){a.handleBorrowerCheckboxClick(e),a.handleSection1(e)},label:"Non Active Customers"})),l.a.createElement(N.a.Row,{className:"justify-content-md-left"},l.a.createElement(N.a.Check,{className:"aggregation",type:"checkbox",id:"active_cust",onChange:function(e){a.handleBorrowerCheckboxClick(e),a.handleSection1(e)},label:"Active Customers (30 Days)"}))),l.a.createElement(N.a.Group,{as:mn.a,className:a.state.section1},l.a.createElement(N.a.Row,{className:"justify-content-md-left"},l.a.createElement(N.a.Check,{className:"aggregation",type:"checkbox",id:"have_overdue_loan",onChange:function(e){a.handleBorrowerCheckboxClick(e),a.handleSection1(e)},label:"Have Overdue FA"})),l.a.createElement(N.a.Row,{className:"justify-content-md-left"},l.a.createElement(N.a.Check,{className:"aggregation",type:"checkbox",id:"not_have_overdue_loan",onChange:function(e){a.handleBorrowerCheckboxClick(e),a.handleSection1(e)},label:"Don't have Overdue FA"}))),l.a.createElement(N.a.Group,{as:mn.a,className:a.state.section1},l.a.createElement(N.a.Row,{className:"justify-content-md-left"},l.a.createElement(N.a.Check,{className:"aggregation",type:"checkbox",id:"have_pending_loan_appl",onChange:function(e){a.handleBorrowerCheckboxClick(e),a.handleSection1(e)},label:"Have FA Appl"})),l.a.createElement(N.a.Row,{className:"justify-content-md-left"},l.a.createElement(N.a.Check,{className:"aggregation",type:"checkbox",id:"not_have_pending_loan_appl",onChange:function(e){a.handleBorrowerCheckboxClick(e),a.handleSection1(e)},label:"Don't have FA Appl"}))),l.a.createElement(N.a.Group,{as:mn.a,className:a.state.section1},l.a.createElement(N.a.Row,{className:"justify-content-md-left"},l.a.createElement(N.a.Check,{className:"aggregation",type:"checkbox",id:"have_ongoing_loan",onChange:function(e){a.handleBorrowerCheckboxClick(e),a.handleSection1(e)},label:"Have Ongoing FA"})),l.a.createElement(N.a.Row,{className:"justify-content-md-left"},l.a.createElement(N.a.Check,{className:"aggregation",type:"checkbox",id:"not_have_ongoing_loan",onChange:function(e){a.handleBorrowerCheckboxClick(e),a.handleSection1(e)},label:"Don't have Ongoing FA"}))),l.a.createElement(N.a.Group,{as:mn.a,className:a.state.section1},l.a.createElement(N.a.Row,{className:"justify-content-md-left"},l.a.createElement(N.a.Check,{className:"aggregation",type:"checkbox",id:"do_not_have_score",onChange:function(e){a.handleBorrowerCheckboxClick(e),a.handleSection1(e)},label:"Don't have New Cust Score"}),l.a.createElement("br",null)),l.a.createElement(N.a.Row,{className:"justify-content-md-left"},l.a.createElement(N.a.Check,{className:"aggregation",type:"checkbox",id:"have_score",onChange:function(e){a.handleBorrowerCheckboxClick(e),a.handleSection1(e)},label:"Have New Cust Score"})))))},a.handleTextboxValue=function(e){""!=e.target.value?a.setState({search_by_dropdown_style:"disable_div",search_by_textbox_style:"show_div",section1:"disable_div",cust_div_style:"disable_div"}):a.setState({search_by_dropdown_style:"show_div",cust_div_style:"show_div"})},a.handleCheckboxClick=function(e){e.target.checked?(e.target.value=!0,a.setState({submitted_field_style:"disable_div",__from:"",__to:"",today:!0}),a.handleElementReset(a.state.action_date_field+"__from"),a.handleElementReset(a.state.action_date_field+"__to")):(e.target.value=!1,e.target.value=null,a.setState({submitted_field_style:"show_div",today:!1})),a.handleChange(e)},a.handleBorrowerCheckboxClick=function(e){e.target.checked?e.target.value=!0:e.target.value=!1,a.handleChange(e)},a.handleResetClick=function(e){a.handleReset(),a.setState({search_by_dropdown_style:"show_div"}),a.setState({search_by_textbox_style:"show_div"}),a.setState({submitted_field_style:"show_div"}),a.setState({approved_field_style:"show_div"}),a.setState({cust_div_style:"show_div"}),a.setState({loan_id_div_style:"show_div"})},a.handleChangeReset=function(){a.setState({__from:"",__to:"",reg_date_from:"",reg_date_to:"",section1:"show_div",section3:"show_div",section2:"show_div"})},a.state={action:"Approved",adv_search:!1,show_by_today:!1,show_from_until:!1,today:!1,screen:"",search_by_dropdown_style:"show_div",search_by_textbox_style:"show_div",register_date:null,__from:"",__to:"",reg_date_from:"",reg_date_to:"",section1:"show_div",section3:"show_div",value:"enabled",section2:"show_div"},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){var e=this.country_code;"loan"==this.props.mode?(this.screen="loan_search",this.setState({doc_id:"loan_doc_id"}),this.setState({doc_id_lbl:"FA ID"})):"loan_appl"==this.props.mode?(this.screen="loan_appl_search",this.setState({doc_id:"loan_appl_doc_id"}),this.setState({doc_id_lbl:"FA Application ID"})):"borrower"==this.props.mode&&(this.screen="borrower_search"),this.handleApiCall(e,this.screen),this.load_dp_rel_mgr()}},{key:"render",value:function(){var e=this;return l.a.createElement(N.a,{onReset:this.handleChangeReset},l.a.createElement("div",{className:this.state.section1},l.a.createElement(N.a.Row,null,l.a.createElement(N.a.Group,{as:mn.a},"borrower"==this.props.mode?l.a.createElement(l.a.Fragment,null,l.a.createElement(N.a.Label,null,"Status")):l.a.createElement(l.a.Fragment,null,l.a.createElement(N.a.Label,null,"Status"),l.a.createElement("font",{className:"text-danger"},"   *  ")),l.a.createElement(N.a.Control,{as:"select",id:"status",onChange:function(t){e.handleDropdownValue(t),e.handleChange(t),e.handleSection1(t)},required:!0},"loan_appl"==this.props.mode&&this.state.loan_appl_status_dd,"loan"==this.props.mode&&this.state.loan_status_dd,"borrower"==this.props.mode&&this.state.borrower_status_dd)),l.a.createElement(N.a.Group,{as:mn.a},l.a.createElement(N.a.Label,null,"DP Relationship Manager"),l.a.createElement(N.a.Control,{as:"select",id:"dp_rel_mgr_id",onChange:function(t){e.handleChange(t),e.handleDropdownValue(t),e.handleSection1(t)}},this.state.data_prvdr_rel_mgr_dd)),l.a.createElement(N.a.Group,{as:mn.a},l.a.createElement(N.a.Label,null,"Lender"),l.a.createElement(N.a.Control,{as:"select",id:"lender_code",onChange:function(t){e.handleChange(t),e.handleDropdownValue(t),e.handleSection1(t)}},this.state.lender_name_list_dd)),("loan"==this.props.mode||"loan_appl"==this.props.mode)&&l.a.createElement(N.a.Group,{as:mn.a},l.a.createElement(N.a.Label,null,"Product Name"),l.a.createElement(N.a.Control,{id:"product_id",as:"select",onChange:function(t){e.handleChange(t),e.handleDropdownValue(t),e.handleSection1(t)}},this.state.product_name_list_dd)),l.a.createElement(N.a.Group,{as:mn.a}))),("loan"==this.props.mode||"loan_appl"==this.props.mode)&&l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:this.state.search_by_dropdown_style},this.SearchByFromUntil("loan"==this.props.mode?3:0)),this.WildCardSearch()),"borrower"==this.props.mode&&l.a.createElement(l.a.Fragment,null,this.SearchBorrower(),this.state.adv_search&&this.AdvancedSearch()),l.a.createElement(N.a.Row,{className:"justify-content-md-center"},l.a.createElement(S.a,{type:"reset",onClick:this.handleResetClick},"Reset")," \xa0",l.a.createElement(S.a,{className:"pull-right",variant:"primary",onClick:this.props.onSearch},"Search"),"borrower"==this.props.mode&&l.a.createElement("div",{style:{paddingLeft:"10px"}},l.a.createElement(z.a,{to:"#",onClick:this.toggleAdvSearch},"Advanced Search"))))}}]),t}(Te),pn=function(e){return F("/api/admin/borrower",e)},hn=function(e){return F("/api/admin/borrower/view",e)},_n=function(e){return F("/api/admin/borrower/search",e)},En=function(e){return F("/api/admin/borrower/additional_approval",e)},vn=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(i.a)(this,Object(d.a)(t).call(this,e))).handleViewAccountsClick=function(e,t,n){a.setState({cust_id:e.target.id}),a.data_prvdr_cust_id=t,a.person_name=n,a.setState({modalBox:"true"})},a.handleModalClose=function(e){a.setState({modalBox:!1})},a.handleModifySearch=function(e){a.setState({search_div_style:"show_div",modify_search:"hide_div"})},a.handleClick=function(e,t,a){return function(n){n.preventDefault(),"Institution"===t?window.open("/borrower/ins/"+e+"/"+a,"_blank"):"Individual"===t&&window.open("/borrower/indiv/"+e+"/"+a,"_blank")}},a.handleSearch=function(e){yt()("#borrower_list").DataTable().destroy(),a.setState({datatable_div_style:"hide_div"});var t=a.state.searchBorrower;Object.keys(t).length>0?_n(a.req({borrower_search_criteria:t},!0)).then(function(e){if(a.resp(e),e){e.data.results.length>0?(a.borrower=e.data.results,a.showBorrowers()):alert("No results found.")}}):alert("Please enter valid criteria")},a.state={searchBorrower:{},datatable_div_style:"hide_div",search_div_style:"show_div",modalBox:!1,modify_search:"hide_div",accountList:null},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"showBorrowers",value:function(){var e=this;f("customer","list_account")?this.btn_style="show_div":this.btn_style="disable_div";var t=f("customer","edit"),a=Math.random(),n=this.borrower.map(function(n,r){return l.a.createElement("tr",{key:a+r},l.a.createElement("td",null,l.a.createElement("a",{href:"#",className:"flow_custid",onClick:e.handleClick("view",n.biz_type,n.cust_id),target:"_blank"},n.cust_id)),l.a.createElement("td",null," ",n.data_prvdr_cust_id),l.a.createElement("td",null," ",n.category),l.a.createElement("td",null," ",l.a.createElement(lt,{full_text:n.biz_name,overlay:we(n)})),l.a.createElement("td",null," ",n.mobile_num),l.a.createElement("td",null," ",n.data_prvdr_name),l.a.createElement("td",null," ",n.tot_loans?n.tot_loans:0),l.a.createElement("td",null," ",Oe(n.late_loans,n.tot_loans)),l.a.createElement("td",null,n.is_og_loan_overdue&&n.ongoing_loan_doc_id?l.a.createElement(z.a,{to:"/fa/view/"+n.ongoing_loan_doc_id,target:"_blank",className:"overdue"},n.ongoing_loan_doc_id):n.ongoing_loan_doc_id?l.a.createElement(z.a,{to:"/fa/view/"+n.ongoing_loan_doc_id,target:"_blank",className:"on_going"},n.ongoing_loan_doc_id):n.pending_loan_appl_doc_id?l.a.createElement(z.a,{to:"/fa_appl/view/"+n.pending_loan_appl_doc_id,target:"_blank",className:"pending"},n.pending_loan_appl_doc_id):l.a.createElement(z.a,{to:"/fa_appl_for/"+n.cust_id,target:"_blank",className:"apply"},"Apply FA")),l.a.createElement("td",null,l.a.createElement(rt,{remarks:n.remarks})),l.a.createElement(ft,{id:n.id,entity:"borrowers",status:n.status}),t&&l.a.createElement("td",null," ",l.a.createElement("input",{id:n.cust_id,type:"button",onClick:e.handleClick("edit",n.biz_type,n.cust_id),value:"Edit",className:"btn btn-primary"})," "),l.a.createElement("td",null," ",l.a.createElement("input",{id:n.cust_id,type:"button",onClick:function(t){return e.handleViewAccountsClick(t,n.data_prvdr_cust_id,we(n))},value:"View A/C",className:"btn btn-primary ".concat(e.btn_style)})),l.a.createElement("td",null,l.a.createElement(z.a,{to:"/report/growth_chart_for/"+n.cust_id,target:"_blank",className:"btn btn-primary"},"Growth")))});this.setState({can_edit:t,search_div_style:"hide_div",borrowerResults:n,datatable_div_style:"show_div",modify_search:"show_div"});var r=[{width:"8%"},{width:"8%"},{width:"8%"},{width:"8%"},{width:"8%"},{width:"8%"},{width:"8%"},{width:"8%"},{width:"8%"},{width:"8%"},{width:"8%"},{width:"8%"},{width:"8%"},{width:"8%"}];t&&r.push({width:"8%"}),yt()("#borrower_list").removeAttr("width").dataTable({order:[],columns:r,dom:"Bfrtip",buttons:["csv","excel","print"]})}},{key:"render",value:function(){var e;return l.a.createElement("div",{className:"container borrower_left"},l.a.createElement("div",{className:"row"},l.a.createElement("h3",null,"SEARCH - Customer ")),l.a.createElement("div",{className:this.state.modify_search},l.a.createElement("button",{type:"button",className:"btn btn-md modify",id:"float_style",onClick:this.handleModifySearch},"Modify Search")),l.a.createElement("div",{className:this.state.search_div_style},l.a.createElement(un,{id:"searchBorrower",mode:"borrower",onSearch:this.handleSearch,onComponentChange:this.handleComponentChange,onComponentReset:this.handleComponentReset,onComponentElementChange:this.handleComponentElemetChange})),l.a.createElement("div",{className:this.state.datatable_div_style},l.a.createElement("div",{id:""},l.a.createElement("div",{id:"datatable",className:"borrower_table"},l.a.createElement("table",{id:"borrower_list",className:"display strip row-border order-column list flow-data-table"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"FLOW Cust ID"),l.a.createElement("th",null,"DP Cust ID"),l.a.createElement("th",null,"Category"),l.a.createElement("th",null,"Business Name"),l.a.createElement("th",null,"Mobile Number"),l.a.createElement("th",null,"Data Provider"),l.a.createElement("th",null,"Total FAs"),l.a.createElement("th",null,"% Late Pay"),l.a.createElement("th",null,"Open FA / APPL"),l.a.createElement("th",null,"Remarks"),l.a.createElement("th",null,"Status"),this.state.can_edit&&l.a.createElement("th",null,"Action"),l.a.createElement("th",null,"Action"),l.a.createElement("th",null,"Account"),l.a.createElement("th",null,"Action"))),l.a.createElement("tbody",null,this.state.borrowerResults))),l.a.createElement(ht.a,{show:this.state.modalBox,onHide:this.handleModalClose,size:"xl"},l.a.createElement(ht.a.Header,{closeButton:!0,show:this.state.modalBox,onHide:this.handleModalClose},l.a.createElement(ht.a.Title,null,"Customer Accounts : ",this.state.cust_id)),l.a.createElement(ht.a.Body,null,l.a.createElement(Pt,(e={entity:"customer",dp_cust_id:this.data_prvdr_cust_id,cust_name:this.person_name},Object(w.a)(e,"entity","customer"),Object(w.a)(e,"entity_id",this.state.cust_id),e))),l.a.createElement(ht.a.Footer,null,l.a.createElement(S.a,{variant:"secondary",onClick:this.handleModalClose},"Close"))))))}}]),t}(qe),gn=(a(70),function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={comp_name:"borrower"},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){Object(H.a)(Object(d.a)(t.prototype),"componentWillMount",this).call(this),this.setOptionsToStateFromApi("lender"),this.load_dp_rel_mgr();this.setOptionsToStateFromApi("rel_mgr",Object(Re.a)({},this.def_req,{associated_with:"flow"}))}},{key:"render",value:function(){var e=this;return l.a.createElement("div",{id:""},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-3"},l.a.createElement("h4",null,this.props.title?this.props.title:"Customer Profile")),l.a.createElement("div",{className:"col-md-1 ".concat(this.state.edit_button_style)},l.a.createElement(Ze,{entity:"customer",onClick:this.handleEdit})),l.a.createElement("div",{className:"col-md-1 ".concat(this.state.save_button_style)},l.a.createElement("input",{onClick:this.handleSave,type:"button",className:"btn btn-success",value:"Save"}))),l.a.createElement("div",{className:this.state.div_style},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-3"},l.a.createElement("span",null,"Business Name"),l.a.createElement("font",{className:"text-danger"},"   *  "),l.a.createElement("input",{id:"biz_name",value:this.props.data.biz_name,onChange:this.toUpperHandleChange,className:"form-control",required:!0})),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("span",null,"Business Address Property Type"),l.a.createElement("font",{className:"text-danger"},"   *  "),l.a.createElement("select",{id:"biz_addr_prop_type",value:this.props.data.biz_addr_prop_type,onChange:this.handleChange,className:"form-control",type:"text",required:"required"},this.getSelectOptions("biz_addr_prop_type"))),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("span",null,"Master Customer ID"),l.a.createElement("input",{id:"master_cust_id",value:this.props.data.master_cust_id,onChange:this.handleChange,className:"form-control"}))),l.a.createElement("br",null),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-3"},l.a.createElement("span",null,"Data Provider Customer ID"),l.a.createElement("font",{className:"text-danger"}," * "),l.a.createElement("input",{id:"data_prvdr_cust_id",value:this.props.data.data_prvdr_cust_id,onChange:this.handleChange,className:"form-control",required:!0})),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("span",null,"Lender"),l.a.createElement("font",{className:"text-danger"},"   *  "),l.a.createElement("select",{id:"lender_code",value:this.props.data.lender_code,onChange:this.handleChange,className:"form-control",type:"text",required:"required"},this.state.lender_dd)),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("span",null,"Run ID"),l.a.createElement("input",{type:"text",id:"csf_run_id",value:this.props.data.csf_run_id,onChange:this.handleChange,className:"form-control"}))),l.a.createElement("br",null),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-3"},l.a.createElement("span",null,"Data Provider's Relationship Manager"),l.a.createElement("font",{className:"text-danger"},"   *  "),l.a.createElement("select",{id:"dp_rel_mgr_id",value:this.props.data.dp_rel_mgr_id,onChange:this.handleChange,className:"form-control",type:"text",required:"required"},this.state.data_prvdr_rel_mgr_dd)),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("span",null,"Flow Relationship Manager"),l.a.createElement("font",{className:"text-danger"},"   *  "),l.a.createElement("select",{id:"flow_rel_mgr_id",value:this.props.data.flow_rel_mgr_id,onChange:this.handleChange,className:"form-control",type:"text",required:"required"},this.state.flow_rel_mgr_dd)),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("span",null,"Registered Date"),l.a.createElement("font",{className:"text-danger"},"   *  "),l.a.createElement(it.a,{value:fe(this.props.data.reg_date),closeOnSelect:!0,onChange:function(t){e.handleDateChange("reg_date",t)},dateFormat:"DD MMM YYYY",timeFormat:!1,required:"required"})),"Customer Details"===this.props.title&&l.a.createElement("div",{className:"col-md-3"},l.a.createElement("span",null,"Number of Tills"),l.a.createElement("select",{id:"number_of_tills",value:this.props.data.number_of_tills,onChange:this.handleChange,className:"form-control",required:!0},l.a.createElement("option",{value:""},"Choose"),l.a.createElement("option",{value:"1"},"1"),l.a.createElement("option",{value:"2"},"2"),l.a.createElement("option",{value:"3"},"3"),l.a.createElement("option",{value:"4"},"4"),l.a.createElement("option",{value:"5"},"5"),l.a.createElement("option",{value:"6"},"6"),l.a.createElement("option",{value:"7"},"7"),l.a.createElement("option",{value:"8"},"8"),l.a.createElement("option",{value:"9"},"9"),l.a.createElement("option",{value:"10"},"10")))),l.a.createElement("br",null),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-6"},l.a.createElement(_t,{id:"photo_shop",label:"Establishment Photo",borrower_id:this.props.data.id,cust_id:this.props.data.cust_id,db_file_name:this.props.data.photo_shop,type:"image",mode:this.props.mode,onCreateUpload:this.handleChange,onEditUpload:function(t){e.handleChangeForEdit(t),e.handleSave(t,"reload")}})),l.a.createElement("div",{className:"col-md-6"},l.a.createElement(_t,{id:"photo_biz_lic",label:"Business Licence",borrower_id:this.props.data.id,cust_id:this.props.data.cust_id,db_file_name:this.props.data.photo_biz_lic,type:"image",mode:this.props.mode,onCreateUpload:this.handleChange,onEditUpload:function(t){e.handleChangeForEdit(t),e.handleSave(t,"reload")}})))," ",l.a.createElement("br",null),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-6"},l.a.createElement("span",null,"Remarks"),l.a.createElement("textarea",{id:"remarks",value:this.props.data.remarks,onChange:this.handleChange,className:"form-control",required:!0})))))}}]),t}(Te)),fn=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={logout:Object(H.a)(Object(d.a)(t.prototype),"touch_async",Object(u.a)(a)).call(Object(u.a)(a)),toList:!1,cust_id:null,biz_address:{touch:null},owner_person:{touch:null},owner_address:{touch:null},contact_person:{touch:null},borrower:{},address_div_style:"show_div",person_div_style:"show_div",send_country_code:!0,same_as_biz_address:!1,same_as_owner_person:!1},a.handleSubmit=function(e){e.preventDefault();var t=a.state.borrower;t.country_code=a.country_code,t.biz_type="Individual",t.biz_address=a.state.biz_address,t.biz_address.country_code=a.country_code,t.owner_person=a.state.owner_person,t.owner_person.owner_address=a.state.owner_address,t.owner_person.owner_address.country_code=a.country_code,t.owner_person.country_code=a.country_code,t.contact_person=a.state.contact_person,t.same_as_biz_address=a.state.same_as_biz_address,t.same_as_owner_person=a.state.same_as_owner_person,a.state.send_country_code&&(t.contact_person.country_code=a.country_code),pn(a.req({borrower:t},!0)).then(function(e){e&&("success"===e.status?(a.setState({cust_id:e.data}),a.setState({toList:!0}),alert("New Individual Customer created successfully")):alert(e.message+"\n"+JSON.stringify(e.data)))})},a.handleAddressCheckbox=function(e){e.target.checked?a.setState({address_div_style:"hide_div",same_as_biz_address:!0}):a.setState({address_div_style:"show_div",same_as_biz_address:!1})},a.handlePersonCheckbox=function(e){e.target.checked?a.setState({person_div_style:"hide_div",send_country_code:!1,same_as_owner_person:!0}):a.setState({person_div_style:"show_div",send_country_code:!0,same_as_owner_person:!1})},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){var e=this;"view"===this.props.mode?(this.cust_id=this.props.match.params.cust_id,hn(this.req({cust_id:this.cust_id,screen:"edit"})).then(function(t){t&&(e.borrower=t.data,e.setState({borrower:e.borrower,biz_address:e.borrower.biz_address,owner_person:e.borrower.owner_person,owner_address:e.borrower.owner_person.owner_address,contact_person:e.borrower.contact_person}))})):this.props.mode}},{key:"render",value:function(){var e=this;return this.state.logout.then(function(t){return e.logout=t}),this.logout?l.a.createElement(l.a.Fragment,null):!0===this.state.toList?l.a.createElement(B.a,{to:"/borrower/indiv/edit/".concat(this.state.cust_id)}):l.a.createElement("div",{className:"container"},l.a.createElement("h4",null,this.props.title+(this.state.borrower.name?" : "+this.state.borrower.name:"")+" "+(this.cust_id?this.cust_id:"")),l.a.createElement("form",{id:"borrower_form",onSubmit:this.handleSubmit},l.a.createElement("div",{id:""},l.a.createElement(gn,{id:"borrower",data:this.state.borrower,entity:"customer",screen:this.props.screen,mode:this.props.mode,onComponentChange:this.handleComponentChange}),l.a.createElement("hr",null),l.a.createElement(ot,{id:"biz_address",screen:"borrower",title:"Business Address",entity:"customer",gps:this.state.gps,data:this.state.biz_address,mode:this.props.mode,onComponentChange:this.handleComponentChange,onComponentReset:this.handleComponentReset}),l.a.createElement(Et,{id:"owner_person",title:"Business Owner Details",val:"Business Owner Details",entity:"customer",data:this.state.owner_person,mode:this.props.mode,onComponentChange:this.handleComponentChange}),l.a.createElement("br",null),"view"===this.props.mode?l.a.createElement("div",null,l.a.createElement(ot,{id:"owner_address",entity:"customer",title:"Business Owner Address",data:this.state.owner_address,mode:this.props.mode,onComponentChange:this.handleComponentChange,onComponentReset:this.handleComponentReset}),l.a.createElement(Et,{id:"contact_person",title:"Contact Person",entity:"customer",val:"Borrower Contact Person",data:this.state.contact_person,mode:this.props.mode,onComponentChange:this.handleComponentChange}),l.a.createElement("br",null),l.a.createElement("br",null)):l.a.createElement("div",null,l.a.createElement("label",{className:"checkbox-inline"},l.a.createElement("h4",null,"Business Owner Address\xa0\xa0",l.a.createElement("input",{type:"checkbox",entity:"customer",onClick:this.handleAddressCheckbox}),"\xa0\xa0","Same as Business Address")),l.a.createElement("div",{className:"".concat(this.state.address_div_style)},l.a.createElement(ot,{id:"owner_address",screen:"borrower",entity:"customer",data:this.state.owner_address,mode:this.props.mode,onComponentChange:this.handleComponentChange,onComponentReset:this.handleComponentReset}),l.a.createElement("hr",null)),l.a.createElement("br",null),l.a.createElement("label",{className:"checkbox-inline"},l.a.createElement("h4",null,"Contact Person\xa0\xa0",l.a.createElement("input",{type:"checkbox",entity:"customer",onClick:this.handlePersonCheckbox}),"\xa0\xa0","Same as Business Owner")),l.a.createElement("div",{className:"".concat(this.state.person_div_style)},l.a.createElement(Et,{id:"contact_person",title:"",val:"Borrower Contact Person",entity:"customer",data:this.state.contact_person,mode:this.props.mode,onComponentChange:this.handleComponentChange}),l.a.createElement("br",null))),l.a.createElement("input",{type:"button",className:"btn btn-primary ".concat("create"===this.props.mode?"show_button":"hide_button"),onClick:this.handleSubmit,value:"Create New Customer"}))),l.a.createElement("br",null),l.a.createElement("br",null))}}]),t}(qe),bn=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={toList:!1,org:{touch:null},cust_id:null,biz_address:{touch:null},reg_address:{touch:null},contact_person:{touch:null},borrower:{},address_div_style:"show_div",same_as_biz_address:!1},a.handleSubmit=function(e){e.preventDefault();var t=a.state.borrower;t.country_code=a.country_code,t.biz_type="Institution",t.biz_address=a.state.biz_address,t.biz_address.country_code=a.country_code,t.org=a.state.org,t.org.country_code=a.country_code,t.org.reg_address=a.state.reg_address,t.org.reg_address.country_code=a.country_code,t.contact_person=a.state.contact_person,t.contact_person.country_code=a.country_code,t.same_as_biz_address=a.state.same_as_biz_address,pn(a.req({borrower:t},!0)).then(function(e){e&&("success"===e.status?(a.setState({cust_id:e.data}),a.setState({toList:!0}),alert("New Institutional Customer created successfully")):alert(e.message+"\n"+JSON.stringify(e.data)))})},a.handleCheckboxClick=function(e){e.target.checked?a.setState({address_div_style:"hide_div",same_as_biz_address:!0}):a.setState({address_div_style:"show_div",same_as_biz_address:!1})},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){var e=this;if("view"===this.props.mode){this.cust_id=this.props.match.params.cust_id;var t={cust_id:this.cust_id,screen:"edit"};hn(this.req(t)).then(function(t){t&&(e.borrower=t.data,e.setState({borrower:e.borrower,org:e.borrower.org,biz_address:e.borrower.biz_address,reg_address:e.borrower.org.reg_address,contact_person:e.borrower.contact_person}))})}else this.props.mode}},{key:"render",value:function(){return!0===this.state.toList?l.a.createElement(B.a,{to:"/borrower/ins/edit/".concat(this.state.cust_id)}):l.a.createElement("div",{className:"container"},l.a.createElement("h4",null,this.props.title+(this.state.borrower.name?" : "+this.state.borrower.name:"")+" "+(this.cust_id?this.cust_id:"")),l.a.createElement("form",{id:"borrower_form",onSubmit:this.handleSubmit},l.a.createElement("div",{id:""},l.a.createElement(gn,{id:"borrower",title:"Customer Details",data:this.state.borrower,mode:this.props.mode,screen:this.props.screen,onComponentChange:this.handleComponentChange}),l.a.createElement("br",null),l.a.createElement(ot,{id:"biz_address",screen:"borrower",title:"Business Address",data:this.state.biz_address,mode:this.props.mode,onComponentChange:this.handleComponentChange,onComponentReset:this.handleComponentReset}),l.a.createElement("br",null),l.a.createElement(dt,{id:"org",title:"Organisation Details",component:"Institutional Borrower",data:this.state.org,mode:this.props.mode,onComponentChange:this.handleComponentChange}),l.a.createElement("br",null),"view"===this.props.mode?l.a.createElement(ot,{id:"reg_address",title:"Registered Address",data:this.state.reg_address,mode:this.props.mode,onComponentChange:this.handleComponentChange,onComponentReset:this.handleComponentReset}):l.a.createElement("div",null,l.a.createElement("label",{className:"checkbox-inline"},l.a.createElement("h4",null,"Registered Address\xa0\xa0",l.a.createElement("input",{type:"checkbox",onClick:this.handleCheckboxClick}),"\xa0\xa0","Same as Business Address")),l.a.createElement("div",{className:"".concat(this.state.address_div_style)},l.a.createElement(ot,{id:"reg_address",screen:"borrower",data:this.state.reg_address,mode:this.props.mode,onComponentChange:this.handleComponentChange,onComponentReset:this.handleComponentReset})),l.a.createElement("hr",null)),l.a.createElement(Et,{id:"contact_person",title:"Contact Person",val:"Borrower Contact Person",data:this.state.contact_person,mode:this.props.mode,onComponentChange:this.handleComponentChange}),l.a.createElement("br",null),l.a.createElement("input",{type:"button",className:"btn btn-primary ".concat("create"===this.props.mode?"show_button":"hide_button"),onClick:this.handleSubmit,value:"Create New Customer"}))),l.a.createElement("br",null),l.a.createElement("br",null))}}]),t}(qe),yn=a(178),wn=a(179),Cn=function(e){function t(){return Object(o.a)(this,t),Object(i.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,this.props.file_name&&l.a.createElement(l.a.Fragment,null,l.a.createElement("b",null,this.props.title),l.a.createElement("br",null),l.a.createElement("img",{src:this.root+this.props.image_path+"/s_"+this.props.file_name,alt:"/s_"+this.props.file_name})))}}]),t}(Te),Nn=function(e){function t(){return Object(o.a)(this,t),Object(i.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return l.a.createElement(yn.a,{variant:""},l.a.createElement(yn.a.Heading,null,l.a.createElement("b",null,"Customer"),"\xa0\xa0",l.a.createElement(gt.a,{pill:!0,variant:Se(this.props.customer.status)},de(this.props.customer.status))),l.a.createElement(wn.a,{className:"panel_border"},l.a.createElement(mn.a,{lg:"12"},l.a.createElement(wn.a,null,l.a.createElement(mn.a,null,"Data Provider Customer ID"),l.a.createElement(mn.a,null,l.a.createElement("b",null,this.props.customer.data_prvdr_cust_id)),l.a.createElement(mn.a,null,"FLOW Customer ID"),l.a.createElement(mn.a,null,l.a.createElement("b",null,this.props.customer.cust_id))),l.a.createElement(wn.a,null,l.a.createElement(mn.a,null,"Business Name"),l.a.createElement(mn.a,null,l.a.createElement("b",null,this.props.customer.biz_name)),l.a.createElement(mn.a,null,"Data Provider"),l.a.createElement(mn.a,null,l.a.createElement("b",null,this.props.customer.data_prvdr_name))),l.a.createElement(wn.a,null,l.a.createElement(mn.a,null,"Business Address Property Type"),l.a.createElement(mn.a,null,l.a.createElement("b",null,de(this.props.customer.biz_addr_prop_type))),l.a.createElement(mn.a,null,"Lender"),l.a.createElement(mn.a,null,l.a.createElement("b",null,this.props.customer.lender_name))),l.a.createElement(wn.a,null,l.a.createElement(mn.a,null,"Master Customer ID"),l.a.createElement(mn.a,null,l.a.createElement("b",null,this.props.customer.master_cust_id)),l.a.createElement(mn.a,null,"Data Provider's Relationship Manager"),l.a.createElement(mn.a,null,l.a.createElement("b",null,this.props.customer.dp_rel_mgr_name))),l.a.createElement(wn.a,null,l.a.createElement(mn.a,null,"Flow Relationship Manager"),l.a.createElement(mn.a,null,l.a.createElement("b",null,this.props.customer.flow_rel_mgr_name)),l.a.createElement(mn.a,null,"Score Run ID"),l.a.createElement(mn.a,null,l.a.createElement("b",null,this.props.customer.csf_run_id))),l.a.createElement(wn.a,null,l.a.createElement(mn.a,null,"Registered Date"),l.a.createElement(mn.a,null,l.a.createElement("b",null,fe(this.props.customer.reg_date))),l.a.createElement(mn.a,null,l.a.createElement(z.a,{to:this.props.customer.photo_biz_lic_path+"/l_"+this.props.customer.photo_biz_lic,target:"_blank"},"Business Licence Photo")),l.a.createElement(mn.a,null)),l.a.createElement(wn.a,null,l.a.createElement(mn.a,{lg:"2"}),l.a.createElement(mn.a,{lg:"5"},l.a.createElement(Cn,{title:"Owner Photo",image_path:this.props.customer.photo_pps_path,file_name:this.props.customer.photo_pps})),l.a.createElement(mn.a,{lg:"5"},l.a.createElement(Cn,{title:"Establishment Photo",image_path:this.props.customer.photo_shop_path,file_name:this.props.customer.photo_shop}))))))}}]),t}(Te),kn=function(e){function t(){return Object(o.a)(this,t),Object(i.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(yn.a,{variant:""},l.a.createElement(yn.a.Heading,null,l.a.createElement("b",null,this.props.title)),l.a.createElement(wn.a,{className:"panel_border"},l.a.createElement(mn.a,{lg:"9"},l.a.createElement(wn.a,null,l.a.createElement(mn.a,null,"First Name"),l.a.createElement(mn.a,null,l.a.createElement("b",null,this.props.data.first_name)),l.a.createElement(mn.a,null,"Middle Name"),l.a.createElement(mn.a,null,l.a.createElement("b",null,this.props.data.middle_name))),l.a.createElement(wn.a,null,l.a.createElement(mn.a,null,"Last Name"),l.a.createElement(mn.a,null,l.a.createElement("b",null,this.props.data.last_name)),l.a.createElement(mn.a,null,"Initial"),l.a.createElement(mn.a,null,l.a.createElement("b",null,this.props.data.initials))),l.a.createElement(wn.a,null,l.a.createElement(mn.a,null,"DOB"),l.a.createElement(mn.a,null,l.a.createElement("b",null,this.props.data.dob)),l.a.createElement(mn.a,null,"Gender"),l.a.createElement(mn.a,null,l.a.createElement("b",null,de(this.props.data.gender)))),l.a.createElement(wn.a,null,l.a.createElement(mn.a,null,"Email ID"),l.a.createElement(mn.a,null,l.a.createElement("b",null,this.props.data.email_id)),l.a.createElement(mn.a,null,"Mobile Number"),l.a.createElement(mn.a,null,l.a.createElement("b",null,this.props.data.mobile_num))),l.a.createElement(wn.a,null,l.a.createElement(mn.a,null,"Messenger Number"),l.a.createElement(mn.a,null,l.a.createElement("b",null,this.props.data.whatsapp)),l.a.createElement(mn.a,null,"Landline"),l.a.createElement(mn.a,null,l.a.createElement("b",null,this.props.data.phone_num))),l.a.createElement(wn.a,null,l.a.createElement(mn.a,null,"Designation"),l.a.createElement(mn.a,null,l.a.createElement("b",null,this.props.data.designation)),l.a.createElement(mn.a,null,"Nationality"),l.a.createElement(mn.a,null,l.a.createElement("b",null,this.props.data.nationality))),l.a.createElement(wn.a,null,l.a.createElement(mn.a,null,"National ID"),l.a.createElement(mn.a,null,l.a.createElement("b",null,this.props.data.national_id)),l.a.createElement(mn.a,null,"National ID Photo"),l.a.createElement(mn.a,null,l.a.createElement("b",null,this.props.data.national_id))),l.a.createElement(wn.a,null)),!this.props.no_photo&&l.a.createElement(mn.a,{lg:"3"},l.a.createElement(Cn,{title:"National ID Photo",image_path:this.props.data.photo_national_id_path,file_name:this.props.data.photo_national_id})))))}}]),t}(Te),Sn=a(100),On=function(e){function t(){return Object(o.a)(this,t),Object(i.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(yn.a,{variant:""},l.a.createElement(yn.a.Heading,null,l.a.createElement("b",null,this.props.title)),l.a.createElement(wn.a,{className:"panel_border"},l.a.createElement(mn.a,{lg:"9"},Object.entries(this.props.data).map(function(e){var t=Object(Sn.a)(e,2),a=t[0],n=t[1];return"id"!=a&&l.a.createElement(wn.a,{key:a},l.a.createElement(mn.a,null,de(a,"address_fields")),l.a.createElement(mn.a,null,l.a.createElement("b",null,Ee(n))))})),this.props.data.photo_shop_path&&l.a.createElement(mn.a,{lg:"3"},l.a.createElement("b",null,"Establishment Photo"),l.a.createElement("img",{src:this.root+this.props.data.photo_shop_path+"/s_"+this.props.data.photo_shop,alt:this.props.data.photo_shop_path+"/s_"+this.props.data.photo_shop})))))}}]),t}(Te),An=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={customer:{},owner_person:{},contact_person:{},biz_address:{}},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){var e=this;this.cust_id=this.props.match.params.cust_id,hn(this.req({cust_id:this.cust_id,screen:"view"})).then(function(t){t&&(e.contact_person=null,e.owner_address=null,t.data.owner_person_id!=t.data.contact_person_id&&(e.contact_person=t.data.contact_person),t.data.owner_address_id!=t.data.biz_address_id&&(e.owner_address=t.data.owner_person.owner_address),e.setState({customer:t.data,owner_person:t.data.owner_person,biz_address:t.data.biz_address}))})}},{key:"render",value:function(){return l.a.createElement("div",{className:"container"},l.a.createElement("br",null),l.a.createElement(Nn,{customer:this.state.customer}),l.a.createElement(kn,{data:this.state.owner_person,title:"Business Owner Person"}),this.contact_person?l.a.createElement(kn,{data:this.contact_person,no_photo:"true",title:"Contact Person"}):l.a.createElement("label",null,l.a.createElement(yn.a.Heading,null,l.a.createElement("b",null,"Contact Person : Same as Business Owner Person"))),l.a.createElement(On,{data:this.state.biz_address,title:"Business Address"}),this.owner_address?l.a.createElement(On,{data:this.owner_address,title:"Owner Address"}):l.a.createElement("label",null,l.a.createElement(yn.a.Heading,null,l.a.createElement("b",null,"Owner Address : Same as Business Address"))))}}]),t}(qe),xn=a(99),jn=a.n(xn),Dn=function(e){return F("/api/admin/rel_mgr",e)},Fn=function(e){return F("/api/admin/rel_mgr/view",e)},Mn=function(e){return F("/api/admin/rel_mgr/list",e)},Pn=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={toList:!1,new_relationship_manager_id:null,relationship_manager:{},address:{}},a.handleSubmit=function(e){e.preventDefault();var t=a.state.relationship_manager;t.country_code=a.country_code,t.associated_with="FLOW",t.address=a.state.address,Dn(a.req({relationship_manager:t})).then(function(e){e&&(a.setState({new_borrower_id:e.data}),a.setState({toList:!0}),alert("New Relationship Manager created successfully"))})},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){var e=this,t=null;if("view"===this.props.mode){var a={relationshipManager_id:this.props.match.params.relationshipManager_id};Fn(this.req(a)).then(function(a){a&&(t=a.data,e.setState({relationship_manager:t,address:t.address}))})}else this.props.mode}},{key:"render",value:function(){return!0===this.state.toList?l.a.createElement(B.a,{to:"/relationship_manager/flowrlspmanager/list"}):l.a.createElement("div",{className:"container"},l.a.createElement("h4",null,this.props.title+(this.state.relationship_manager.first_name?" : "+this.state.relationship_manager.first_name:"")),l.a.createElement("form",{id:"borrower_form",onSubmit:this.handleSubmit},l.a.createElement("div",{id:""},l.a.createElement(Et,{id:"relationship_manager",entity:"flow_rel_mgr",title:"Relationship Manager",data:this.state.relationship_manager,mode:this.props.mode,onComponentChange:this.handleComponentChange,changeComponentName:"relationship_manager"}),l.a.createElement("br",null),l.a.createElement("input",{type:"button",className:"btn btn-primary ".concat("create"===this.props.mode?"show_button":"hide_button"),onClick:this.handleSubmit,value:"Create Relationship Manager"}))),l.a.createElement("br",null),l.a.createElement("br",null))}}]),t}(qe),Ln=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={comp_name:"rel_mgr",list:"disable_div"},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){Object(H.a)(Object(d.a)(t.prototype),"componentWillMount",this).call(this),this.setOptionsToStateFromApi("data_provider")}},{key:"render",value:function(){return l.a.createElement("div",{id:""},l.a.createElement("div",{className:"view"===this.props.mode?"hide_div":"show_div"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-6"},l.a.createElement("h4",null,this.props.title?this.props.title:"")),l.a.createElement("div",{className:"col-md-1 ".concat(this.state.edit_button_style)},l.a.createElement(Ze,{entity:this.props.entity,onClick:this.handleEdit})),l.a.createElement("div",{className:"col-md-1 ".concat(this.state.save_button_style)},l.a.createElement("input",{onClick:this.handleSave,type:"button",className:"btn btn-success",value:"Save"})))))}}]),t}(Te),qn=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={toList:!1,new_relationship_manager_id:null,relationship_manager:{},data_prvdr:{},address:{}},a.handleSubmit=function(e){e.preventDefault();var t=a.state.relationship_manager;t.country_code=a.country_code,t.associated_with="data_prvdr",t.associated_entity_code=v("data_prvdr_code"),t.address=a.state.address,Dn(a.req({relationship_manager:t})).then(function(e){e&&("success"===e.status?(a.setState({new_borrower_id:e.data}),a.setState({toList:!0}),alert("New Relationship Manager created successfully")):alert(e.message+"\n"+JSON.stringify(e.data)))})},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){var e=this,t=null;if("view"===this.props.mode){var a={relationshipManager_id:this.props.match.params.relationshipManager_id};Fn(this.req(a)).then(function(a){if(a){t=a.data,e.setState({relationship_manager:t});var n={associated_entity_code:t.associated_entity_code,id:t.id};e.setState({data_prvdr:n,address:t.address})}})}else this.props.mode}},{key:"render",value:function(){return!0===this.state.toList?l.a.createElement(B.a,{to:"/relationship_manager/dprlspmanager/list"}):l.a.createElement("div",{className:"container"},l.a.createElement("h4",null,this.props.title+(this.state.relationship_manager.first_name?" : "+this.state.relationship_manager.first_name:"")),l.a.createElement("form",{id:"borrower_form",onSubmit:this.handleSubmit},l.a.createElement("div",{id:""},l.a.createElement(Ln,{id:"data_prvdr",entity:"data_prvdr_rel_mgr",data:this.state.data_prvdr,mode:this.props.mode,onComponentChange:this.handleComponentChange}),l.a.createElement(Et,{id:"relationship_manager",entity:"data_prvdr_rel_mgr",title:"Relationship Manager",data:this.state.relationship_manager,mode:this.props.mode,onComponentChange:this.handleComponentChange}),l.a.createElement("br",null),l.a.createElement("input",{type:"button",className:"btn btn-primary ".concat("create"===this.props.mode?"show_button":"hide_button"),onClick:this.handleSubmit,value:"Create Relationship Manager"}))),l.a.createElement("br",null),l.a.createElement("br",null))}}]),t}(qe),Rn=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={relationshipManagerList:null,toView:!1,relationshipManager_id:null,data_prvdr:{}},a.handleClick=function(e){a.setState({relationshipManager_id:e.target.id,toView:!0})},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){var e=this,t=v("data_prvdr_code");this.setState({table_id:t,relationshipManagerList:null});var a={associated_entity_code:t};Mn(this.req(a)).then(function(a){if(a){var n=a.data.map(function(t,a){return l.a.createElement("tr",{key:a},l.a.createElement("td",null," ",we(t)),l.a.createElement("td",null," ",t.whatsapp),l.a.createElement("td",null," ",t.mobile_num),l.a.createElement("td",null," ",t.email_id),l.a.createElement("td",null," ",t.designation),l.a.createElement(ft,{id:t.id,parent:"data_prvdr_rel_mgr",entity:"persons",status:t.status}),l.a.createElement("td",null,l.a.createElement(Xe,{id:t.id,entity:"data_prvdr_rel_mgr",onClick:e.handleClick})))});e.setState({table_id:t,relationshipManagerList:n}),yt()("#"+e.state.table_id).removeAttr("width").dataTable({order:[],columns:[{width:"15%"},{width:"15%"},{width:"15%"},{width:"15%"},{width:"10%"},{width:"10%"},{width:"10%"},{width:"10%"}],dom:"Bfrtip",buttons:["csv","excel","print"]})}})}},{key:"render",value:function(){return!0===this.state.toView?l.a.createElement(B.a,{to:"/relationship_manager/dprlspmanager/view/".concat(this.state.relationshipManager_id)}):l.a.createElement("div",{className:"container"},l.a.createElement(Ln,{id:"data_prvdr",data:this.state.data_prvdr,mode:this.props.mode,onComponentChange:this.handleComponentChange,loanOnChange:this.loanOnChange}),null!=this.state.relationshipManagerList&&l.a.createElement("div",{id:"datatable data_prvdr_table"},l.a.createElement("h4",null,"Relationship Manager List"),l.a.createElement("table",{id:this.state.table_id,className:"display strip row-border order-column list"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"Name"),l.a.createElement("th",null,"Messenger Number"),l.a.createElement("th",null,"Mobile Number"),l.a.createElement("th",null,"Email ID"),l.a.createElement("th",null,"Designation"),l.a.createElement("th",null,"Status"),l.a.createElement("th",null,"Action"),l.a.createElement("th",null,"Action"))),l.a.createElement("tbody",null,this.state.relationshipManagerList))))}}]),t}(qe),Tn=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={relationshipManagerList:null,toView:!1,relationshipManager_id:null},a.handleClick=function(e){a.setState({relationshipManager_id:e.target.id,toView:!0})},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){var e=this;Mn(this.req({associated_with:"FLOW"})).then(function(t){if(t){var a=t.data.map(function(t,a){return l.a.createElement("tr",{key:a},l.a.createElement("td",null," ",we(t)),l.a.createElement("td",null," ",t.mobile_num),l.a.createElement("td",null," ",t.email_id),l.a.createElement("td",null," ",t.designation),l.a.createElement(ft,{id:t.id,parent:"flow_rel_mgr",entity:"persons",status:t.status}),l.a.createElement("td",null,l.a.createElement(Xe,{id:t.id,entity:"flow_rel_mgr",onClick:e.handleClick})))});e.setState({relationshipManagerList:a}),yt()("#list_relationshipManager").removeAttr("width").dataTable({order:[],columns:[{width:"15%"},{width:"15%"},{width:"15%"},{width:"15%"},{width:"15%"},{width:"15%"},{width:"10%"}],dom:"Bfrtip",buttons:["csv","excel","print"]})}})}},{key:"render",value:function(){return!0===this.state.toView?l.a.createElement(B.a,{to:"/relationship_manager/flowrlspmanager/view/".concat(this.state.relationshipManager_id)}):null!=this.state.relationshipManagerList?l.a.createElement("div",{id:"datatable"},l.a.createElement("h4",null,this.props.title||"Relationship Manager List"),l.a.createElement("table",{id:"list_relationshipManager",className:"display strip row-border order-column list"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"Name"),l.a.createElement("th",null,"Mobile Number"),l.a.createElement("th",null,"Email ID"),l.a.createElement("th",null,"Designation"),l.a.createElement("th",null,"Status"),l.a.createElement("th",null,"Action"),l.a.createElement("th",null,"Action"))),l.a.createElement("tbody",null,this.state.relationshipManagerList))):l.a.createElement("div",null,l.a.createElement("p",null,"No Relationship Manager Available ! "))}}]),t}(qe);function Bn(e){var t="";return e.duration&&(t=e.duration+" day"),l.a.createElement("div",null,"*",l.a.createElement("i",null,"Total repayment if float is utilized for all the ",t," duration"),l.a.createElement("br",null))}var In=function(e){function t(){return Object(o.a)(this,t),Object(i.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return l.a.createElement("div",null,this.props.customer.current_aggr_doc_id&&l.a.createElement(yn.a,{variant:this.props.variant},l.a.createElement(wn.a,null,l.a.createElement(mn.a,{md:2},l.a.createElement(yn.a.Heading,null,l.a.createElement("b",null,"Agreement")))),l.a.createElement(wn.a,null,l.a.createElement(mn.a,null,"Agreement ID"),this.props.customer.current_aggr_doc_id&&l.a.createElement(mn.a,null," ",l.a.createElement(z.a,{to:this.props.customer.aggr_file_rel_path?this.props.customer.aggr_file_rel_path:"#",target:"_blank"},this.props.customer.current_aggr_doc_id?this.props.customer.current_aggr_doc_id:"No Agreement")),l.a.createElement(mn.a,null,"Valid Upto"),l.a.createElement(mn.a,{as:"b"},this.props.customer.aggr_valid_upto?fe(this.props.customer.aggr_valid_upto):"NA")),l.a.createElement(wn.a,null,l.a.createElement(mn.a,null,"Status"),l.a.createElement(mn.a,{as:"b"},this.props.cust_agreement_status?de(this.props.cust_agreement_status):"NA"),l.a.createElement(mn.a,null),l.a.createElement(mn.a,null))))}}]),t}(Te),Un=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={showModal:!1,days_div_style:"hide_div",disabled:""},a.handleOpen=function(e){f("customer","addl_approval")&&a.is_user_rel_mgr()?a.setState({showModal:!0}):alert("You do not have privilege to approve. Relationship Manager "+a.props.customer.flow_rel_mgr_name+" can approve")},a.handleClose=function(e){a.setState({showModal:!1})},a.handleApproveCheckbox=function(e){var t,n=e.target.id,l="hide_div";(a.setState({approve:!1,reject:!1,days_div_style:l}),e.target.checked)?("approve"==n&&(l="show_div"),a.setState((t={},Object(w.a)(t,n,e.target.checked),Object(w.a)(t,"days_div_style",l),t)),e.target.value="true"):e.target.value="false";a.handleSelfChange(e)},a.handleSubmitApproval=function(e){a.addl_approval.flow_rel_mgr_id=a.props.customer.flow_rel_mgr_id,a.addl_approval.cust_id=a.props.customer.cust_id,En(a.req({addl_approval:a.addl_approval})).then(function(e){e&&("success"===e.status?(alert(e.message),a.setState({showModal:!1})):alert(e.message))})},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"is_user_rel_mgr",value:function(){return this.props.customer.flow_rel_mgr_id==v("user_id")}},{key:"componentDidMount",value:function(){this.addl_approval={approve:"false",reject:"false"}}},{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,f("customer","addl_approval")&&l.a.createElement(z.a,{to:"#",onClick:this.handleOpen,className:"agreement"},"Action on FA Products that Require Additional Approval"),l.a.createElement(ht.a,{show:this.state.showModal,onHide:this.handleClose,backdrop:"static",size:"lg"},l.a.createElement(ht.a.Header,{closeButton:!0,show:this.state.showModal,onHide:this.handleClose},l.a.createElement(ht.a.Title,null,l.a.createElement("h3",null,"Action on FA Products that Require Additional Approval"))),l.a.createElement(ht.a.Body,null,l.a.createElement(l.a.Fragment,null,this.props.customer.addl_appr_until&&l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-12"},l.a.createElement("font",{className:"text-danger"},"Already Approved Until : ",fe(this.props.customer.addl_appr_until)))),"I am the Relationship Manager for this customer,",l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-12"},l.a.createElement("label",null,l.a.createElement("input",{id:"approve",checked:this.state.approve,type:"checkbox",onChange:this.handleApproveCheckbox}),"I herewith provide additional approval required to process FA products that lacks credit score."))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-12"},l.a.createElement("label",null,l.a.createElement("input",{id:"reject",checked:this.state.reject,type:"checkbox",onChange:this.handleApproveCheckbox}),"I reject allowing this customer to process FA products that lacks credit score"))),l.a.createElement("br",null),l.a.createElement("div",{className:"".concat(this.state.days_div_style)},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-2"},l.a.createElement("span",null,"Approval Valid for ")),l.a.createElement("div",{className:"col-md-2"},l.a.createElement("select",{id:"days",onChange:this.handleSelfChange,className:"form-control",required:!0},l.a.createElement("option",{value:""},"Choose"),l.a.createElement("option",{value:"2"},"2 days"),l.a.createElement("option",{value:"5"},"5 days"),l.a.createElement("option",{value:"10"},"10 days"),l.a.createElement("option",{value:"15"},"15 days"),l.a.createElement("option",{value:"30"},"30 days"),l.a.createElement("option",{value:"60"},"60 days"),l.a.createElement("option",{value:"99"},"Forever"))),"from today")))),l.a.createElement(ht.a.Footer,null,l.a.createElement(S.a,{variant:"secondary",onClick:this.handleClose},"Cancel"),l.a.createElement("input",{type:"button",className:"btn btn-primary",onClick:this.handleSubmitApproval,value:"Submit"}))))}}]),t}(Te),Wn=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={variant:"primary"},a.Customer=function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(yn.a.Heading,null,l.a.createElement("b",null,"Customer : ",a.props.customer.cust_id),"selection"===a.props.parent&&l.a.createElement(Un,{id:"addl_approval",customer:a.props.customer})),l.a.createElement(wn.a,null,l.a.createElement(mn.a,null,"Business Name "),l.a.createElement(mn.a,{as:"b"},a.props.customer.biz_name),l.a.createElement(mn.a,null,"Customer Name "),l.a.createElement(mn.a,{as:"b"},a.props.customer.cust_name)),l.a.createElement(wn.a,null,l.a.createElement(mn.a,null,"FLOW Cust ID"),l.a.createElement(mn.a,{as:"b"},a.props.customer.cust_id),l.a.createElement(mn.a,null,a.props.customer.data_prvdr_name," Cust ID"),l.a.createElement(mn.a,{as:"b"},a.props.customer.data_prvdr_cust_id)),l.a.createElement(wn.a,null,l.a.createElement(mn.a,null,"Mobile Number"),l.a.createElement(mn.a,{as:"b"},a.props.customer.cust_mobile_num),l.a.createElement(mn.a,null,"Customer Type"),l.a.createElement(mn.a,{as:"b"},a.props.customer.biz_type)),l.a.createElement(wn.a,null,l.a.createElement(mn.a,{md:3},"Address"),l.a.createElement(mn.a,{md:9,as:"b"},a.props.customer.cust_addr_text)))},a.ReltnShip=function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(yn.a.Heading,null,l.a.createElement("b",null,"Relationship")),l.a.createElement(wn.a,null,l.a.createElement(mn.a,{md:3},"Relationship Manager"),l.a.createElement(mn.a,{md:9,as:"b"},l.a.createElement("span",null,a.props.customer.flow_rel_mgr_name," (m: ",a.props.customer.flow_rel_mgr_mobile_num,")",l.a.createElement("br",null)))),l.a.createElement(wn.a,null,l.a.createElement(mn.a,{md:3},"Data Provider"),l.a.createElement(mn.a,{md:9,as:"b"},a.props.customer.data_prvdr_name,"\xa0 - ",a.props.customer.dp_rel_mgr_name," (m: ",a.props.customer.dp_rel_mgr_mobile_num,")")),l.a.createElement(wn.a,null,l.a.createElement(mn.a,{md:3},"Lender"),l.a.createElement(mn.a,{md:9,as:"b"},a.props.customer.lender_name)))},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){"apply"===this.props.parent||"selection"===this.props.parent?this.setState({variant:"dark"}):"loan_appl"===this.props.parent?this.setState({variant:"success"}):"loan"===this.props.parent&&this.setState({variant:"primary"})}},{key:"render",value:function(){return"selection"===this.props.parent?l.a.createElement(l.a.Fragment,null,l.a.createElement(yn.a,{variant:this.state.variant},this.Customer()),l.a.createElement(yn.a,{variant:this.state.variant},this.ReltnShip()),l.a.createElement(In,{mode:"create",variant:this.state.variant,customer:this.props.customer,cust_agreement_status:this.props.cust_agreement_status}),"selection"===this.props.parent&&this.props.loan_products&&l.a.createElement(l.a.Fragment,null,l.a.createElement(z.a,{to:this.props.customer.cust_id?"/agreement/list/".concat(this.props.customer.cust_id):"#",className:this.props.customer.account_id?"agreement":"agreement_disable",onClick:this.handleAgreementLinkClick,target:"_blank"},"List Customer Agreements"),f("cust_agreement","create")&&l.a.createElement(z.a,{to:this.props.customer.cust_id?"/agreement/create/".concat(this.props.customer.cust_id):"#",className:this.props.customer.account_id?"agreement":"agreement_disable",onClick:this.handleAgreementLinkClick,target:"_blank"},"Generate New Customer Agreement"),f("cust_agreement","sign_upload")&&l.a.createElement(z.a,{to:"/agreement/upload/".concat(this.props.customer.cust_id),className:this.props.customer.account_id?"agreement":"agreement_disable",onClick:this.handleAgreementLinkClick,target:"_blank"},"Sign / Upload Agreement")),!this.props.customer.account_id&&l.a.createElement("label",{className:"agreement"},"( Please configure account for customer to generate / upload agreement. )")):l.a.createElement(l.a.Fragment,null,l.a.createElement(yn.a,{variant:this.state.variant},this.Customer(),l.a.createElement("hr",null),this.ReltnShip()),l.a.createElement(In,{customer:this.props.customer,variant:this.state.variant,loan_products:this.props.loan_products,cust_agreement_status:this.props.cust_agreement_status}))}}]),t}(Te),Yn=Object(I.a)(Wn),Vn=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={chk_tnc:!1,chk_consent:!1},a.handleTnCConsentClick=function(e){e.target.value=e.target.checked,a.handleChange(e)},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return l.a.createElement("div",{className:"container"},l.a.createElement("div",{className:"row"},l.a.createElement("u",null,l.a.createElement("h4",null,"Terms & Conditions"))),l.a.createElement("div",{className:"row"},l.a.createElement("span",null,"1. The requested float advance is ",Ve(this.props.product.max_loan_amount,this.currency_code),".")),l.a.createElement("div",{className:"row"},l.a.createElement("span",null,"2. The FLOW fee applicable is ",ze(this.props.product,this.currency_code),".")),l.a.createElement("div",{className:"row"},l.a.createElement("span",null,"3. Total repayment amount is ",Ge(this.props.product,this.currency_code),".")),l.a.createElement("div",{className:"row"},l.a.createElement("span",null,"4. Repayment date is ",He(this.props.product.duration,this.props.product.flow_fee_duration)," from the date of disbursal.")),l.a.createElement("div",{className:"row"},l.a.createElement("span",null,"5. Repayment date shall be on or before ",fe(function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"YYYY-MM-DD";return e instanceof me?e.add(t,"days"):me(e,a).add(t,"days")}(me(),this.props.product.duration))," provided the float advance is disbursed today ",l.a.createElement("b",null,"(Sundays & Interest Free days not considered.)"),".")),this.props.customer.acc_number?l.a.createElement("div",{className:"row"},l.a.createElement("span",null,"6. Subjected to the approval, an amount of ",l.a.createElement("b",null,Ve(this.props.product.max_loan_amount,this.currency_code))," will be disbursed to ",l.a.createElement("b",null,this.props.customer.acc_prvdr_name," (",this.props.customer.acc_type,") Account number ",this.props.customer.acc_number),".")):l.a.createElement("div",null),l.a.createElement("br",null),l.a.createElement("div",{className:"row"},l.a.createElement("label",null,l.a.createElement("input",{type:"checkbox",id:"chk_tnc",onChange:this.handleTnCConsentClick}),"\xa0 Customer has agreed to the above float advance terms and conditions.")),l.a.createElement("br",null))}}]),t}(Te),Hn=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={variant:"primary"},a.PastLoans1=function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(yn.a.Heading,null,l.a.createElement("b",null,"Past Float Advances")),l.a.createElement(wn.a,null,l.a.createElement(mn.a,null,"Total FA Applications "),l.a.createElement(mn.a,{as:"b"},a.props.customer.tot_loan_appls),l.a.createElement(mn.a,null,"Total Disbursed FAs "),l.a.createElement(mn.a,{as:"b"},l.a.createElement("span",null,a.props.customer.tot_loans," / ",a.props.customer.tot_loan_appls," (",pe(a.props.customer.tot_loans,a.props.customer.tot_loan_appls),")"))),l.a.createElement(wn.a,null,l.a.createElement(mn.a,null,"Total Late FAs"),l.a.createElement(mn.a,{as:"b"},l.a.createElement("span",null,a.props.customer.late_loans," / ",a.props.customer.tot_loans," (",pe(a.props.customer.late_loans,a.props.customer.tot_loans),")")),l.a.createElement(mn.a,null,"First FA Disbursement Date"),l.a.createElement(mn.a,{as:"b"},fe(a.props.customer.first_loan_date))),l.a.createElement("hr",null))},a.FloatAdvance1=function(e){return l.a.createElement(l.a.Fragment,null,l.a.createElement(yn.a.Heading,null,l.a.createElement("b",null,"Float Advance ")),"pending_approval"!=e&&l.a.createElement(wn.a,null,l.a.createElement(mn.a,null,"Approval Date"),l.a.createElement(mn.a,{as:"b"},fe(a.props.product.loan_approved_date)),l.a.createElement(mn.a,null),l.a.createElement(mn.a,null)),l.a.createElement(wn.a,null,l.a.createElement(mn.a,null,"Approver Name"),l.a.createElement(mn.a,{as:"b"},a.props.product.loan_approver_name),l.a.createElement(mn.a,null),l.a.createElement(mn.a,null)),"pending_disbursal"!=e&&"pending_approval"!=e&&l.a.createElement(l.a.Fragment,null,l.a.createElement(wn.a,null,l.a.createElement(mn.a,null,"FA with fee"),l.a.createElement(mn.a,{as:"b"},je(Ve(a.props.product.due_amount,a.currency_code))),"approved"==e&&l.a.createElement(l.a.Fragment,null,l.a.createElement(mn.a,null),l.a.createElement(mn.a,null)),"approved"!=e&&"pending_approval"!=e&&l.a.createElement(l.a.Fragment,null,l.a.createElement(mn.a,null,"FA Repaid"),l.a.createElement(mn.a,{as:"b"},je(Ve(a.props.product.paid_amount,a.currency_code)))))),"pending_disbursal"!=e&&"approved"!=e&&"pending_approval"!=e&&l.a.createElement(l.a.Fragment,null,l.a.createElement(wn.a,null,l.a.createElement(mn.a,null,"Due Date"),l.a.createElement(mn.a,{as:"b"},fe(a.props.product.due_date)),"pending_disbursal"!=e&&"approved"!=e&&l.a.createElement(l.a.Fragment,null,l.a.createElement(mn.a,null,"Disbursal Date"),l.a.createElement(mn.a,{as:"b"},fe(a.props.product.disbursal_date)))),a.props.product.provisional_penalty>0&&l.a.createElement(wn.a,null,l.a.createElement(mn.a,null,"Provisional Penalty"),l.a.createElement(mn.a,{as:"b"},je(Ve(a.props.product.provisional_penalty,a.currency_code))),l.a.createElement(mn.a,null,"Penalty Paid"),l.a.createElement(mn.a,{as:"b"},je(Ve(a.props.product.penalty_collected,a.currency_code)))),l.a.createElement(wn.a,null,l.a.createElement(mn.a,null,"Current Due Amount"),l.a.createElement(mn.a,{as:"b"},je(Ve(a.props.product.current_os_amount,a.currency_code))),l.a.createElement(mn.a,null),l.a.createElement(mn.a,null))),l.a.createElement(wn.a,null,a.props.product.repayment_date?l.a.createElement(l.a.Fragment,null,l.a.createElement(mn.a,null,"Repayment Date"),l.a.createElement(mn.a,{as:"b"},fe(a.props.product.repayment_date))):l.a.createElement(l.a.Fragment,null,l.a.createElement(mn.a,null),l.a.createElement(mn.a,null)),"overdue"==e&&l.a.createElement(l.a.Fragment,null,l.a.createElement(mn.a,null),l.a.createElement(mn.a,null),l.a.createElement(mn.a,null,"Days Overdue"),l.a.createElement(mn.a,{as:"b"},a.props.product.days_overdue," days")),l.a.createElement(mn.a,null),l.a.createElement(mn.a,null)))},a.Product1=function(e){return l.a.createElement(l.a.Fragment,null,l.a.createElement(yn.a.Heading,null,l.a.createElement("b",null,"Product")),l.a.createElement(wn.a,null,l.a.createElement(mn.a,null,"Product Name "),l.a.createElement(mn.a,{as:"b"},a.props.product.product_name),l.a.createElement(mn.a,null,"Credit Score "),l.a.createElement(mn.a,{as:"b"},a.props.credit_score," / 1000")),l.a.createElement(wn.a,null,l.a.createElement(mn.a,null,"FA Amount "),l.a.createElement(mn.a,{as:"b",className:"right_align"},Ve(Qe(a.props.product),a.currency_code)),l.a.createElement(mn.a,null,"Duration"),l.a.createElement(mn.a,{as:"b"},He(a.props.product.duration,a.props.product.flow_fee_duration))),l.a.createElement(wn.a,null,l.a.createElement(mn.a,null,"Flow Fee "),l.a.createElement(mn.a,{as:"b"},je(ze(a.props.product,a.currency_code))),l.a.createElement(mn.a,null,"Repayment Amount"),l.a.createElement(mn.a,{as:"b"},je(Ge(a.props.product,a.currency_code)))),Ye(a.props.product.flow_fee_duration)&&l.a.createElement("div",null,"*",l.a.createElement("i",null,"Total repayment if float is utilized for all the ",a.props.product.duration," day duration"),l.a.createElement("br",null)),l.a.createElement("hr",null))},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){"apply"==this.props.parent?this.setState({variant:"dark"}):"loan_appl"==this.props.parent?this.setState({variant:"success"}):"loan"==this.props.parent&&this.setState({variant:"primary"})}},{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(yn.a,{variant:this.state.variant},this.Product1(),"loan"!=this.props.parent&&this.PastLoans1(),"apply"!=this.props.parent&&this.FloatAdvance1(this.props.product.status)))}}]),t}(Te),zn=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={tncPanel:{chk_tnc:!1},customer_accounts_dd:null},a.clickBackButton=function(e){window.location.reload()},a.handleSubmit=function(e){if(null==a.approver.value||""==a.approver.value)alert("Please select the approver.");else if(a.state.tncPanel.chk_tnc){var t=a.getLoanApplicationRequest(a.props.customer,a.props.selectedProduct,a.approver.value);t.customer_consent_rcvd=!0,t.photo_first_appl=a.state.photo_first_appl,t.product_type=a.props.product_type,t.master_loan_doc_id=a.props.master_loan_doc_id,t.min_credit_score=a.props.min_credit_score,Va(a.req({loan_application:t})).then(function(e){if(e){var t=e.data.loan_application.loan_appl_doc_id;a.setState({loan_appl_doc_id:t,viewLoanAppln:!0})}})}else alert("Please select the Terms and Conditions checkbox to proceed.")},a.getLoanApplicationRequest=function(e,t,n){var l=e;return l.product_name=t.product_name,l.product_id=t.id,l.loan_principal=t.max_loan_amount,l.duration=t.duration,l.flow_fee=t.flow_fee,l.currency_code=t.currency_code,l.cs_model_id=t.cs_model_id,l.flow_fee_type=t.flow_fee_type,l.flow_fee_duration=t.flow_fee_duration,l.due_amount=Ke(t),l.loan_approver_id=n,l.country_code=a.country_code,l.credit_score=a.props.credit_score,l},a.handleChange=function(e){var t=e.target.id;a.setState(Object(w.a)({},t,e.target.value))},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){var e=this.country_code,t={cust_id:this.props.customer.cust_id,status:"enabled"};this.setOptionsListToStateFromAppApi("common","approvers",{country_code:e,status:"enabled"},["id","name_email"]),this.setOptionsListToStateFromAppApi("common","customer_accounts",this.req({customer_account:t}),["account_id","acc_num_disp_txt"])}},{key:"render",value:function(){var e=this;return 1==this.state.viewLoanAppln?(alert("FA Application ("+this.state.loan_appl_doc_id+") has been submitted successfully "),l.a.createElement(B.a,{to:"/fa_appl/view/".concat(this.state.loan_appl_doc_id)})):l.a.createElement("div",{id:""},l.a.createElement("div",{className:"container"},l.a.createElement("div",{className:"row"},l.a.createElement("h4",null,"New Float Advance Application ")),l.a.createElement("br",null),l.a.createElement(Yn,{parent:"apply",customer:this.props.customer,cust_agreement_status:this.props.cust_agreement_status}),l.a.createElement(Hn,{parent:"apply",credit_score:this.props.credit_score,customer:this.props.customer,product:this.props.selectedProduct}),l.a.createElement(wn.a,null,l.a.createElement(mn.a,{md:2},l.a.createElement("span",null,"Select Approver"),l.a.createElement("font",{className:"text-danger"},"   *  ")),l.a.createElement(mn.a,{md:3},l.a.createElement("select",{className:"form-control",defaultValue:this.selected.approvers,ref:function(t){return e.approver=t}},this.state.approvers_dd)),l.a.createElement(mn.a,null)),l.a.createElement("hr",null),l.a.createElement("div",{className:"row"},l.a.createElement(Vn,{id:"tncPanel",mode:"apply",customer:this.props.customer,product:this.props.selectedProduct,onComponentChange:this.handleComponentChange})),l.a.createElement("div",{className:"row",id:"float_style"},l.a.createElement("input",{type:"button",className:"btn btn-primary",onClick:this.clickBackButton,value:"Back"}),"\xa0\xa0",l.a.createElement("span",null,l.a.createElement("input",{type:"button",className:"btn btn-primary",onClick:this.handleSubmit,value:"Submit for Approval"})))))}}]),t}(qe),Jn=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={customer_div_style:"hide_div",comp_name:"product",customer:{},modalBox:!1,toSummary:!1,CSvalue:!1,searchResult:!1,search_loan:"show_div"},a.handleEnter=function(e){13===e.keyCode&&a.handleSearchClick()},a.handleCustIDChange=function(e){a.customer_id=e.target.value},a.handleProductSelectClick=function(e,t,n,l,r){a.product_type=n,a.min_credit_score=l,a.selectedProduct=a.loan_products[e.target.id],a.selectedProduct.currency_code=a.currency_code,null==r?a.setState({cust_score:0}):a.setState({cust_score:r});var c={product_id:t,cust_id:a.customer.cust_id,country_code:a.country_code,product_type:a.product_type,status:"enabled"};za(a.req(c)).then(function(e){e&&("success"===e.status?(a.master_loan_doc_id=e.data.master_loan_doc_id,a.setState({toSummary:!0})):alert(e.message+"\n"+JSON.stringify(e.data)))})},a.handleClose=function(e){a.setState({modalBox:!1})},a.handleSearchClick=function(e){null!=a.customer_id?a.setState({searchResult:!0}):alert("Please Enter Customer ID or Mobile Number")},a.handleBorrowerSearch=function(e,t){a.customer_id=t,a.productSearch(),a.setState({modalBox:!1})},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){"result"==this.props.mode&&this.setState({search_loan:"hide_div"}),this.props.match&&this.props.match.params.cust_id&&(this.customer_id=this.props.match.params.cust_id,this.productSearch())}},{key:"productSearch",value:function(){var e=this,t=this.customer_id;Wa(this.req({req_parameter:t},!0)).then(function(t){if(t)if("error"!==t.status){var a=t.data;e.setState({cust_agreement_status:t.data.cust_agreement_status}),a.hasOwnProperty("borrower")?e.productList(a):a.hasOwnProperty("borrowers")&&e.borrowersList(a)}else e.setState({customer_div_style:"hide_div"})})}},{key:"borrowersList",value:function(e){var t=this,a=e.borrowers.map(function(e,a){return l.a.createElement("tr",null,l.a.createElement("td",null," ",e.biz_name),l.a.createElement("td",null," ",e.cust_id),l.a.createElement("td",null," ",e.data_prvdr_cust_id),l.a.createElement("td",null," ",l.a.createElement("input",{id:a,type:"submit",value:"Select",onClick:function(a){return t.handleBorrowerSearch(a,e.cust_id)},className:"btn btn-primary"})))});this.setState({borrowersList:a}),this.setState({modalBox:!0}),yt()("#list_brwr").dataTable({bAutoWidth:!0,bDestroy:!0})}},{key:"productList",value:function(e){var t=this,a=e.all_csf_values;this.meta_data=a.filter(function(e){return e.csf_type.includes("meta")}),this.customer=e.borrower,this.loan_products=e.loan_products;var n=e.loan_products.map(function(e,a){var n,r,c=(n=e.is_eligible,r=e.result_code,1==n?"Select":0==n?"requires_flow_rm_approval"===r?"Need Approval":"no_score_model"===r?"No Score":"no_cust_score"===r?"No Cust Score":"no_agrmt"===r?"No Agrmt":"no_result"===r?"No Result":"no_factor_data"==r?"No Factor Data":"ineligible"==r?"Ineligible Score":r:void 0);return l.a.createElement("tr",{key:a},l.a.createElement("td",null," ",e.product_name),l.a.createElement("td",null," ",l.a.createElement(at,{loan_product:e,meta_data:t.meta_data})," "),l.a.createElement("td",null," ",Ee(e.product_type)),l.a.createElement("td",{"data-sort":e.max_loan_amount}," ",Ve(e.max_loan_amount,t.currency_code)),l.a.createElement("td",null," ",e.duration," days"),l.a.createElement("td",{"data-sort":e.flow_fee}," ",ze(e,t.currency_code)),l.a.createElement("td",{"data-sort":e.max_loan_amount+e.flow_fee}," ",je(Ge(e,t.currency_code))),l.a.createElement("td",null,l.a.createElement("input",{id:a,type:"button",value:c,onClick:function(a){return t.handleProductSelectClick(a,e.id,e.product_type,e.min_credit_score,e.cust_score)},className:e.is_eligible?"btn btn-primary":"btn btn-primary disable_div"}),l.a.createElement(nt,{result_msg:e.result_msg,result_code:e.result_code,customer:t.customer})))});this.setState({customer:this.customer,loanProducts_tr:n,customer_div_style:"show_div"}),yt()("#list").removeAttr("width").dataTable({order:[],columns:[{width:"10%"},{width:"10%"},{width:"10%"},{width:"10%"},{width:"15%"},{width:"10%"},{width:"15%"},{width:"10%"}],dom:"Bfrtip",buttons:["csv","excel","print"]})}},{key:"render",value:function(){return!0===this.state.toSummary?l.a.createElement(zn,{mode:"apply",credit_score:this.state.cust_score,customer:this.customer,selectedProduct:this.selectedProduct,require_agreement:this.state.require_agreement,product_type:this.product_type,master_loan_doc_id:this.master_loan_doc_id,min_credit_score:this.min_credit_score,currency:this.currency_code,cust_agreement_status:this.state.cust_agreement_status}):!0===this.state.searchResult?l.a.createElement(B.a,{to:"/fa_appl_for/".concat(this.customer_id)}):l.a.createElement("div",{className:"container"},l.a.createElement("div",null,l.a.createElement("div",{className:"row"},l.a.createElement("h4",{className:"loan_apply"},"Create Float Advance Application")),l.a.createElement("div",{className:"row ".concat(this.state.search_loan)},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-4"},l.a.createElement("span",null,l.a.createElement("h5",null,"Any Customer ID / Mobile No / National ID\xa0\xa0\xa0"))),l.a.createElement("div",{className:"col-md-5"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-8"},l.a.createElement("input",{id:"customer_id",onChange:this.handleCustIDChange,onKeyUp:this.handleEnter,placeholder:"Enter...",className:"form-control",required:!0})),l.a.createElement("div",{className:"col-md-4"},l.a.createElement("input",{type:"button",value:"Search",onClick:this.handleSearchClick}))))))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:this.state.customer_div_style},l.a.createElement("hr",null),l.a.createElement(Yn,{parent:"selection",cust_agreement_status:this.state.cust_agreement_status,customer:this.state.customer,loan_products:this.loan_products}),l.a.createElement("hr",null),l.a.createElement("div",{className:"row"},l.a.createElement("h4",null,"Select Float Advance Product")),l.a.createElement("div",{id:""},l.a.createElement("table",{id:"list"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"Product Name"),l.a.createElement("th",null,"Cust Score"),l.a.createElement("th",null,"Product Type"),l.a.createElement("th",null,"FA Amount"),l.a.createElement("th",null,"Duration"),l.a.createElement("th",null,"Flow Fee"),l.a.createElement("th",null,"Repayment"),l.a.createElement("th",null,"Action"))),l.a.createElement("tbody",null,this.state.loanProducts_tr)),l.a.createElement(Bn,null)),l.a.createElement(ht.a,{show:this.state.modalBox,onHide:this.handleClose},l.a.createElement(ht.a.Header,{closeButton:!0,show:this.state.modalBox,onHide:this.handleClose},l.a.createElement(ht.a.Title,null,"More than one customer results found. Choose one among the following.")),l.a.createElement(ht.a.Body,null,l.a.createElement("table",{id:"list_brwr"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"Business Name"),l.a.createElement("th",null,"FLOW Cust ID"),l.a.createElement("th",null,"Data Provider Cust ID"),l.a.createElement("th",null,"Action"))),l.a.createElement("tbody",null,this.state.borrowersList))),l.a.createElement(ht.a.Footer,null,l.a.createElement(S.a,{variant:"secondary",onClick:this.handleClose},"Close"))))))}}]),t}(qe),Gn=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(i.a)(this,Object(d.a)(t).call(this,e))).viewApplication=function(e){var t=e.target.id;window.open("/fa_appl/view/"+t,"_blank")},a.handleModifySearch=function(e){a.setState({serach_loan_appl:"show_div",modify_search:"hide_div"})},a.handleSearch=function(e){e.nativeEvent;yt()("#loan_list").DataTable().destroy(),a.setState({datatable_div_style:"hide_div"});var t=a.state.searchLoanAppl;Object.keys(t).length>0?Ha(a.req({loan_appl_search_criteria:t},!0)).then(function(e){if(e){var t=[];e.data.length>0?(a.setState({search:!0}),t=e.data.map(function(e,t){return l.a.createElement("tr",null,l.a.createElement("td",null," ",e.loan_appl_doc_id),l.a.createElement("td",null," ",l.a.createElement($e,{data_prvdr_cust_id:e.data_prvdr_cust_id,biz_name:e.biz_name,cust_name:e.cust_name})," "),l.a.createElement("td",null," ",e.product_name," "),l.a.createElement("td",null," ",l.a.createElement(et,{loan:e,currency_code:a.currency_code})),l.a.createElement("td",null," ",ge(e.loan_appl_date,!0)),l.a.createElement("td",null," ",de(e.status)),l.a.createElement("td",null,l.a.createElement("input",{id:e.loan_appl_doc_id,type:"submit",value:"View Application",onClick:a.viewApplication,className:"btn btn-primary"})))}),a.setState({loanApplicationResults:t,datatable_div_style:"show_div",serach_loan_appl:"hide_div",modify_search:"show_div"}),yt()("#loan_list").removeAttr("width").dataTable({order:[],columns:[{width:"5%"},{width:"5%"},{width:"5%"},{width:"5%"},{width:"5%"},{width:"5%"},{width:"5%"}],dom:"Bfrtip",buttons:["csv","excel","print"]})):alert("No results found.")}}):alert("Choose atleast one filter to search Float Advance Applications.")},a.state={data_prvdr_name_list:[],lender_name_list:[],product_name_list:[],searchLoanAppl:{},datatable_div_style:"hide_div",serach_loan_appl:"show_div",modify_search:"hide_div",viewLoanAppln:!1},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return l.a.createElement("div",{className:"container"},l.a.createElement("div",{className:"row"},l.a.createElement("h3",{className:"serach_loan_appl"},"SEARCH - Float Advance Applications")),l.a.createElement("br",null),l.a.createElement("div",{className:this.state.modify_search},l.a.createElement("button",{type:"button",className:"btn btn-md modify",id:"float_style",onClick:this.handleModifySearch},"Modify Search")),l.a.createElement("div",{className:this.state.serach_loan_appl},l.a.createElement(un,{id:"searchLoanAppl",mode:"loan_appl",onSearch:this.handleSearch,onComponentChange:this.handleComponentChange,onComponentReset:this.handleComponentReset,onComponentElementChange:this.handleComponentElemetChange})),l.a.createElement("br",null),l.a.createElement("div",{className:this.state.datatable_div_style},l.a.createElement("table",{id:"loan_list",className:"display strip row-border order-column list"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"Float Advance Application ID"),l.a.createElement("th",null,"Data Provider Cust ID"),l.a.createElement("th",null,"Product Code"),l.a.createElement("th",null,"Product Name"),l.a.createElement("th",null,"Submitted On"),l.a.createElement("th",null,"Status"),l.a.createElement("th",null,"Action"))),l.a.createElement("tbody",null,this.state.loanApplicationResults))))}}]),t}(qe),Kn=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={viewReady:!1,approve_div_style:"hide_div",reject_div_style:"hide_div",score_div_style:"hide_div",action:"view"},a.handleRejectCheckbox=function(e){a.setState({reject_div_style:"show_div",score_div_style:"show_div",action:"reject"})},a.handleApproveCheckbox=function(e){a.setState({score_div_style:"show_div",reject_div_style:"hide_div",action:"approve"})},a.handleCancelCheckbox=function(e){a.setState({reject_div_style:"show_div",score_div_style:"hide_div",action:"cancel"})},a.handleSubmit=function(e){var t=a.state.action,n={},l=a.state.loan_appl.loan_appl_doc_id,r=a.state.loan_appl.master_loan_doc_id,c=a.country_code,o=a.state.credit_score,s=a.state.loan_appl.cust_id,i=a.state.loan_appl.product_id;if("approve"===t)n={loan_appl_doc_id:l,master_loan_doc_id:r,action:t,credit_score:o,country_code:c,cust_id:s,product_id:i};else if("reject"===t||"cancel"===t){n={loan_appl_doc_id:l,master_loan_doc_id:r,action:t,credit_score:o,action_reason_code:a.state.action_reason_code,remarks:a.state.remarks,country_code:c,product_id:i,cust_id:s}}Ya(a.req({loan_request:n})).then(function(e){if(e)if("success"===e.status){if("rejected"===e.data.status||"cancelled"===e.data.status)window.location.reload(!0);else if("approved"===e.data.status){var t=e.data.loan;a.setState({loan:t}),a.setState({viewLoan:!0}),alert(e.message)}}else alert(e.message+"\n"+JSON.stringify(e.data))})},a.handleChange=function(e){var t=e.target.id;a.setState(Object(w.a)({},t,e.target.value))},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){var e,t=this,a=this.props.match.params.loan_appl_doc_id;(e=this.req({loan_appl_doc_id:a}),F(j+"/loan_appl/application",e)).then(function(e){var a=e.data,n=f("application","approval")&&t.is_user_apprvr(e.data.loan_approver_id);t.setState({loan_appl:a,credit_score:e.data.credit_score,loan_approver_id:e.data.loan_approver_id,viewReady:!0,can_approve:n})})}},{key:"is_user_apprvr",value:function(e){return e===v("user_id")}},{key:"render",value:function(){return 1==this.state.viewLoan?l.a.createElement(B.a,{to:"/fa/view/".concat(this.state.loan.loan_doc_id)}):this.state.viewReady?l.a.createElement("div",{className:"container"},l.a.createElement("br",null),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-8"},l.a.createElement("h4",null,"Float Advance - Application ID : ",l.a.createElement("b",null,this.state.loan_appl.loan_appl_doc_id))),l.a.createElement("div",{className:"col-md-4"},l.a.createElement("h4",null,"Status: ",l.a.createElement("b",null,de(this.state.loan_appl.status))))),l.a.createElement(Yn,{parent:"loan_appl",customer:this.state.loan_appl}),l.a.createElement(Hn,{parent:"loan_appl",credit_score:this.state.credit_score,customer:this.state.loan_appl,product:this.state.loan_appl}),l.a.createElement("br",null),"pending_approval"===this.state.loan_appl.status&&this.state.can_approve&&l.a.createElement("div",null,l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-6"},l.a.createElement("span",null,l.a.createElement("b",null,"Action : ")),l.a.createElement("label",null,l.a.createElement("input",{type:"radio",name:"appr",value:"approve",onClick:this.handleApproveCheckbox}),"  Approve \xa0\xa0\xa0"),l.a.createElement("label",null,l.a.createElement("input",{type:"radio",name:"appr",value:"reject",onClick:this.handleRejectCheckbox}),"  Reject \xa0\xa0\xa0"))),l.a.createElement("br",null),l.a.createElement("div",{className:"row"},l.a.createElement("input",{type:"button",className:"btn btn-primary",value:"Submit",onClick:this.handleSubmit}),"\xa0\xa0"),l.a.createElement("br",null))):l.a.createElement(l.a.Fragment,null)}}]),t}(qe),Qn=function(e){return F(j+"/loan/loans",e)},Xn=function(e){return F(j+"/loan_txns/disburse",e)},Zn=function(e){return F(j+"/loan_txns/capture_repayment",e)},$n=function(e){return F(j+"/loan_txns/list",e)},el=function(e){return F(j+"/loan/comment",e)},tl=function(e){return F(j+"/loan/comment/assign",e)},al=a(7);al.dataTable=a(37);var nl=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={loanTxnList:null},a.handleViewTxnClick=function(e){var t=a.props.loan_doc_id;$n(a.req({loan_doc_id:t})).then(function(e){if(e){var t=e.data.map(function(e,t){return l.a.createElement("tr",{key:t},l.a.createElement("td",null,++t),l.a.createElement("td",null,de(e.txn_type)),l.a.createElement("td",null,Ve(e.amount,a.currency_code)),l.a.createElement("td",null,fe(e.txn_date,!0)),l.a.createElement("td",null,l.a.createElement(lt,{full_text:Ae(e.from_ac_text),overlay:e.from_ac_text})),l.a.createElement("td",null,l.a.createElement(lt,{full_text:Ae(e.to_ac_text),overlay:e.to_ac_text})),l.a.createElement("td",null,e.txn_id),l.a.createElement("td",null,de(e.txn_mode)),l.a.createElement("td",null,Ee(e.txn_exec_by)))});a.setState({loanTxnList:t})}}),a.setState({modalBox:!0})},a.handleModalClose=function(e){a.setState({modalBox:!1})},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidUpdate",value:function(){yt()("#list_txn").dataTable({order:[],bAutoWidth:!0,bDestroy:!0,dom:"Bfrtip",buttons:["csv","excel","print"]})}},{key:"render",value:function(){return l.a.createElement("div",{className:"container"},l.a.createElement("div",{className:"col-md-12 ".concat(this.props.parent)},l.a.createElement("input",{type:"submit",value:"View Txns",onClick:this.handleViewTxnClick,className:"btn btn-primary pull-right"})),l.a.createElement(ht.a,{show:this.state.modalBox,onHide:this.handleModalClose,size:"xl"},l.a.createElement(ht.a.Header,{closeButton:!0,show:this.state.modalBox,onHide:this.handleModalClose},l.a.createElement(ht.a.Title,null,l.a.createElement("h4",null,"Transactions of Float Advance ID: ",this.props.loan_doc_id))),l.a.createElement(ht.a.Body,null,null!=this.state.loanTxnList&&l.a.createElement("div",{id:"datatable"},l.a.createElement("table",{id:"list_txn"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"S.No"),l.a.createElement("th",null,"Transaction Type"),l.a.createElement("th",null,"Transaction Amount"),l.a.createElement("th",null,"Transaction Date / Time"),l.a.createElement("th",null,"From Account"),l.a.createElement("th",null,"To Account"),l.a.createElement("th",null,"Transaction ID"),l.a.createElement("th",null,"Transaction Mode"),l.a.createElement("th",null,"Txn Executed By"))),l.a.createElement("tbody",null,this.state.loanTxnList)))),l.a.createElement(ht.a.Footer,null,l.a.createElement(S.a,{variant:"secondary",onClick:this.handleModalClose},"Close"))))}}]),t}(Te),ll=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(i.a)(this,Object(d.a)(t).call(this,e))).handleSearch=function(e){yt()("#list").DataTable().destroy(),a.setState({datatable_div_style:"hide_div"});var t=a.state.searchLoans;Object.keys(t).length>0?Qn(a.req({loan_search_criteria:t},!0)).then(function(e){if(e){var t=[];e.data.results.length>0?(a.loan=e.data.results,a.setState({search:!0}),t=e.data.results.map(function(e,t){return l.a.createElement("tr",null,l.a.createElement("td",null," ",e.loan_doc_id),l.a.createElement("td",null,l.a.createElement($e,{data_prvdr_cust_id:e.data_prvdr_cust_id,biz_name:e.biz_name,cust_name:e.cust_name})),l.a.createElement("td",null,l.a.createElement(et,{loan:e,currency_code:a.currency_code})),l.a.createElement("td",null," ",ge(e.disbursal_date)),l.a.createElement("td",null," ",ge(e.due_date)),l.a.createElement("td",{"data-sort":e.due_amount}," ",je(Ve(e.due_amount,a.currency_code))),l.a.createElement("td",null," ",e.paid_date?function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"-NA-";return e?fe(e,!1,2):t}(e.paid_date):"Not Paid"),l.a.createElement("td",{"data-sort":e.paid_amount}," ",je(Ve(e.paid_amount,a.currency_code))),l.a.createElement("td",null," ",de(e.status)),l.a.createElement("td",null," ",l.a.createElement("input",{id:e.loan_doc_id,type:"submit",value:"View",onClick:a.viewLoan,className:"btn btn-primary"})),l.a.createElement("td",null," ",l.a.createElement(nl,{parent:"loan_search",loan_doc_id:e.loan_doc_id})))}),a.setState({datatable_div_style:"show_div",loanResults:t,search_loan:"hide_div",modify_search:"show_div"}),yt()("#list").removeAttr("width").dataTable({order:[],columns:[{width:"20%"},{width:"10%"},{width:"5%"},{width:"10%"},{width:"10%"},{width:"15%"},{width:"10%"},{width:"10%"},{width:"5%"},{width:"5%"},{width:"5%"}],dom:"Bfrtip",buttons:["csv","excel","print"]})):alert("No results found.")}}):alert("Choose atleast one filter to search Float Advance.")},a.viewLoan=function(e){var t=e.target.id;window.open("/fa/view/"+t,"_blank")},a.viewTxn=function(e){a.setState({loan_doc_id:e.target.id}),a.setState({modalBox:!0})},a.handleModalClose=function(e){a.setState({modalBox:!1})},a.handleModifySearch=function(e){a.setState({search_loan:"show_div",modify_search:"hide_div"})},a.state={data_prvdr_name_list:[],lender_name_list:[],product_name_list:[],searchLoans:{},datatable_div_style:"hide_div",search_loan:"show_div",modify_search:"hide_div",toView:!1},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return l.a.createElement("div",{className:"container"},l.a.createElement("div",{className:"row"},l.a.createElement("h3",{className:"search_loan"},"SEARCH - Float Advance ")),l.a.createElement("br",null),l.a.createElement("div",{className:this.state.modify_search},l.a.createElement("button",{type:"button",className:"btn btn-md modify",id:"float_style",onClick:this.handleModifySearch},"Modify Search")),l.a.createElement("div",{className:this.state.search_loan},l.a.createElement(un,{id:"searchLoans",mode:"loan",onSearch:this.handleSearch,onComponentChange:this.handleComponentChange,onComponentReset:this.handleComponentReset,onComponentElementChange:this.handleComponentElemetChange})),l.a.createElement("div",{id:""},l.a.createElement("div",{className:this.state.datatable_div_style},l.a.createElement("div",{id:""},l.a.createElement("br",null),l.a.createElement("table",{id:"list",className:"display strip row-border order-column list"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",{className:"loanid"},"FA ID"),l.a.createElement("th",null,"Data Provider Cust ID"),l.a.createElement("th",null,"Product Name"),l.a.createElement("th",null,"Disbursal Date"),l.a.createElement("th",null,"Due Date"),l.a.createElement("th",null,"FA With Fee"),l.a.createElement("th",null,"Payment Date"),l.a.createElement("th",null,"Payment Amount"),l.a.createElement("th",null,"Status"),l.a.createElement("th",null,"Action"),l.a.createElement("th",null,"Action"))),l.a.createElement("tbody",null,this.state.loanResults))))))}}]),t}(qe),rl=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={view_loan:!1,modalBox:!1,send_sms:!0,disable:"disable_div"},a.handleDisburseClick=function(e){var t={cust_id:a.props.data.cust_id,status:"enabled"},n={lender_code:a.props.data.lender_code,lender_data_prvdr_code:a.props.data.data_prvdr_code,status:"enabled"};a.setOptionsListToStateFromAppApi("common","lender_accounts",a.req({lender_account:n}),["account_id","acc_num_disp_txt"]),a.setOptionsListToStateFromAppApi("common","customer_accounts",a.req({customer_account:t}),["account_id","acc_num_disp_txt"]),a.setOptionsListToStateFromAppApi("common","disbursers",a.req({status:"enabled"}),["id","name_email"]),a.disbursal_txn={amount:a.props.data.amount,loan_doc_id:a.props.data.loan_doc_id},a.setState({modalBox:!0})},a.handleClose=function(e){a.setState({modalBox:!1})},a.handleTxnModeChange=function(e){a.setState({txn_mode:"("+_e(e.target.value)+")"}),a.handleSelfChange(e)},a.handleCheckboxClick=function(e){e.target.checked&&a.setState({checkbox:!0})},a.handleSMSCheckboxClick=function(e){e.target.checked?a.setState({send_sms:!0}):a.setState({send_sms:!1})},a.handleSubmit=function(e){if(e.preventDefault(),!0===a.state.checkbox){var t=a.disbursal_txn;t.send_sms=a.state.send_sms,t.from_ac_id=a.from_acc.value,t.to_ac_id=a.to_acc.value,t.txn_exec_by=a.txn_exec.value,Xn(a.req({disbursal_txn:t})).then(function(e){e&&("success"===e.status?(a.setState({view_loan:!0}),a.setState({modalBox:!1}),window.location.reload()):alert(e.message+"\n"+JSON.stringify(e.data)))})}else alert("Please select the checkbox to agree and disburse")},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return!0===this.state.view_loan?l.a.createElement(B.a,{to:"/fa/view/".concat(this.props.data.loan_doc_id,"#disbursed")}):l.a.createElement("div",{id:""},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-12"},l.a.createElement("input",{type:"button",className:"btn btn-primary disburse",value:"Disburse",onClick:this.handleDisburseClick}),"\xa0\xa0\xa0")),l.a.createElement("br",null),l.a.createElement(ht.a,{show:this.state.modalBox,onHide:this.handleClose,size:"xl"},l.a.createElement(ht.a.Header,{closeButton:!0,show:this.state.modalBox,onHide:this.handleClose},l.a.createElement(ht.a.Title,null,"FA Disbursal")),l.a.createElement(ht.a.Body,null,l.a.createElement("div",{className:"container"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-6"},l.a.createElement("h4",null,"Float Advance ID: ",this.props.data.loan_doc_id," ")),l.a.createElement("div",{className:"col-md-6"},l.a.createElement("h4",null,"Float Advance Amount: ",je(Ve(this.props.data.amount,this.currency_code))," "))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-6"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-5"},l.a.createElement("label",null,"Disburse From Account ",l.a.createElement("br",null),"( ",this.props.data.lender_name," )",l.a.createElement("font",{className:"text-danger"},"   *  "))),l.a.createElement("div",{className:"col-md-7"},l.a.createElement("select",{id:"from_ac_id",defaultValue:this.selected.lender_accounts,ref:function(t){return e.from_acc=t},onChange:this.handleSelfChange,className:"form-control",type:"text"},this.state.lender_accounts_dd))),l.a.createElement("br",null),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-5"},l.a.createElement("label",null,"Amount Disbursed"),l.a.createElement("font",{className:"text-danger"},"   *  ")),l.a.createElement("div",{className:"col-md-7"},l.a.createElement("div",{id:"",className:"".concat(this.state.disable)},l.a.createElement("input",{type:"text",id:"amount",onChange:this.handleSelfChange,value:this.props.data.amount,className:"form-control"})))),l.a.createElement("br",null),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-5"},l.a.createElement("label",null,"Disbursal Transaction ID"),l.a.createElement("font",{className:"text-danger"},"   *  ")),l.a.createElement("div",{className:"col-md-7"},l.a.createElement("input",{type:"text",id:"txn_id",onChange:this.handleSelfChange,className:"form-control spacing",required:"required"}))),l.a.createElement("br",null),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-5"},l.a.createElement("label",null,"Disbursal Mode"),l.a.createElement("font",{className:"text-danger"},"   *  ")),l.a.createElement("div",{className:"col-md-7"},l.a.createElement("select",{id:"txn_mode",onChange:this.handleTxnModeChange,className:"form-control",type:"text",required:"required"},this.getSelectOptions("transaction_mode")))),l.a.createElement("br",null)),l.a.createElement("div",{className:"col-md-6"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-5"},l.a.createElement("label",null,"Customer's Account"),l.a.createElement("font",{className:"text-danger"},"   *  ")),l.a.createElement("div",{className:"col-md-7"},l.a.createElement("select",{id:"to_ac_id",defaultValue:this.selected.customer_accounts,ref:function(t){return e.to_acc=t},onChange:this.handleSelfChange,className:"form-control",type:"text",required:"required"},this.state.customer_accounts_dd))),l.a.createElement("br",null),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-5"},l.a.createElement("label",null,"Disbursal Date"),l.a.createElement("font",{className:"text-danger"},"   *  ")),l.a.createElement("div",{className:"col-md-7"},l.a.createElement(it.a,{closeOnSelect:!0,onChange:function(t){e.handleSelfDateChange("txn_date",t)},dateFormat:"DD MMM YYYY",timeFormat:!1,required:"required"}))),l.a.createElement("br",null),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-5"},l.a.createElement("label",null,"Disbursed By"),l.a.createElement("font",{className:"text-danger"},"   *  ")),l.a.createElement("div",{className:"col-md-7"},l.a.createElement("select",{id:"txn_exec_by",ref:function(t){return e.txn_exec=t},onChange:this.handleSelfChange,className:"form-control",type:"text",required:"required"},this.state.disbursers_dd))),l.a.createElement("br",null),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-5"},l.a.createElement("label",null,"Remarks")),l.a.createElement("div",{className:"col-md-7"},l.a.createElement("input",{type:"text",id:"remarks",onChange:this.handleSelfChange,className:"form-control",required:"required"}))),l.a.createElement("br",null))),l.a.createElement("div",{className:"row"},l.a.createElement("label",null,l.a.createElement("input",{type:"checkbox",onChange:this.handleSMSCheckboxClick,defaultChecked:!0}),"\xa0 Send Disbursement confirmation notification SMS")),l.a.createElement("div",{className:"row"},l.a.createElement("label",null,l.a.createElement("input",{type:"checkbox",onChange:this.handleCheckboxClick}),"\xa0 I have transferred the above Float Advance to the Customer's Account using Third Party Platform ",this.state.txn_mode,".")))),l.a.createElement(ht.a.Footer,null,l.a.createElement(S.a,{variant:"secondary",onClick:this.handleClose},"Cancel"),l.a.createElement("input",{type:"button",className:"btn btn-primary",onClick:this.handleSubmit,value:"Submit"}))))}}]),t}(Te),cl=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={view_loan:!1,modalBox:!1,send_sms:!0,total_amount:0,penalty_div_style:"show_div",penalty_collected:0,is_part_payment:!1},a.handleRepaymentClick=function(e){a.waive_penalty=!1,a.provisional_penalty=a.props.data.provisional_penalty,a.penalty_collected=a.props.data.penalty_collected,a.os_penalty=a.provisional_penalty-a.penalty_collected;var t={lender_code:a.props.data.lender_code,status:"enabled",lender_data_prvdr_code:a.props.data.data_prvdr_code};a.setOptionsListToStateFromAppApi("common","lender_accounts",a.req({lender_account:t}),["account_id","acc_num_disp_txt"]),a.repayment_txn={loan_doc_id:a.props.data.loan_doc_id,current_os_amount:a.props.data.current_os_amount},a.setState({modalBox:!0})},a.handleSMSCheckboxClick=function(e){e.target.checked?a.setState({send_sms:!0}):a.setState({send_sms:!1})},a.handlePartPaymentCheckboxClick=function(e){e.target.checked?a.setState({is_part_payment:!0}):a.setState({is_part_payment:!1})},a.handleClose=function(e){a.setState({modalBox:!1,total_amount:0})},a.handleSubmit=function(e){e.preventDefault();var t=!0,n=be(a.repayment_txn.amount),l=be(a.props.data.current_os_amount);if(n>l)window.alert("Unable to process. You are trying to make payment more than Current OS amount.");else{if(a.state.is_part_payment){if(n==l)return void window.alert("Unable to process. You are trying to make full payment.Make sure whether you are trying to pay full amount or partial amount")}else if(n<l)return void window.alert("Unable to process. You are trying to make partial payment less than Current OS amount.");var r=be(a.repayment_txn.penalty_collected),c=be(a.props.data.provisional_penalty);if(c>0&&(a.waive_penalty?t=window.confirm("Are you sure to waive the penalty for this FA? \nPress Cancel to abort the transaction. Press OK to Proceed."):r<c?(alert("Please collect the full penalty or waive it off (if applicable). You can not collect partial penalty"),t=!1):r>c&&(alert("Please collect the full penalty or waive it off (if applicable). You can not collect penalty higher than provisional penalty."),t=!1)),!1!==t){var o=a.repayment_txn;o.to_ac_id=a.to_acc.value,o.send_sms=a.state.send_sms,o.is_part_payment=a.state.is_part_payment,o.waive_penalty=a.waive_penalty,Zn(a.req({repayment_txn:o})).then(function(e){e&&("success"===e.status?(a.setState({modalBox:!1}),window.location.reload()):alert(e.message+"\n"+JSON.stringify(e.data)))})}}},a.repayment_amount=0,a.penalty_collected=0,a.handleAmountChange=function(e){"amount"===e.target.id?a.repayment_amount=e.target.value:"penalty_collected"===e.target.id&&(a.penalty_collected=e.target.value);var t=Number(a.repayment_amount)+Number(a.penalty_collected);if(!0===a.waive_penalty){var n=Number(a.repayment_amount);a.setState({total_amount:n,penalty_collected:0})}else a.setState({total_amount:t,penalty_collected:a.penalty_collected});a.handleSelfChange(e)},a.waivePenaltyCheckbox=function(e){if(e.target.checked){a.repayment_txn.penalty_collected=null,a.waive_penalty=!0;var t=Number(a.repayment_amount);a.setState({total_amount:t,penalty_div_style:"disable_div",penalty_collected:0})}else a.waive_penalty=!1,a.setState({penalty_div_style:"show_div"})},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){}},{key:"render",value:function(){var e=this;return!0===this.state.view_loan?l.a.createElement(B.a,{to:"/fa/view/".concat(this.props.data.loan_doc_id)}):l.a.createElement("div",{id:""},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-12"},l.a.createElement("input",{type:"button",id:"float_style",className:"btn btn-primary repayment",value:"Capture Repayment",onClick:this.handleRepaymentClick}),"\xa0\xa0\xa0")),l.a.createElement("br",null),l.a.createElement(ht.a,{show:this.state.modalBox,onHide:this.handleClose,size:"xl"},l.a.createElement(ht.a.Header,{closeButton:!0,show:this.state.modalBox,onHide:this.handleClose},l.a.createElement(ht.a.Title,null,"Capture Repayment")),l.a.createElement(ht.a.Body,null,l.a.createElement("div",{className:"container"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-6"},l.a.createElement("h4",null,"Float Advance ID: ",this.props.data.loan_doc_id," ")),l.a.createElement("div",{className:"col-md-6"},l.a.createElement("h4",{className:"account"},"FA Due Date: ",fe(this.props.data.due_date)))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-6"},l.a.createElement("h4",null,"Current OS FA Amount : ",je(Ve(this.props.data.current_os_amount,this.currency_code)))),this.props.data.provisional_penalty>0&&l.a.createElement("div",{className:"col-md-6"},l.a.createElement("h4",{className:"account"},"Provisional Penalty : ",Ve(this.props.data.provisional_penalty,this.currency_code)))),l.a.createElement("br",null),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-6"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-7"},l.a.createElement("label",null,"FA Repayment")),l.a.createElement("div",{className:"col-md-5"},l.a.createElement("input",{type:"text",id:"amount",value:this.state.repayment_amount,onChange:this.handleAmountChange,className:"form-control",required:"required"}))),l.a.createElement("br",null),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-7"},l.a.createElement("label",null,"Repaid To Account ( ",this.props.data.lender_name," )"),l.a.createElement("font",{className:"text-danger"},"   *  ")),l.a.createElement("div",{className:"col-md-5"},l.a.createElement("select",{defaultValue:this.selected.lender_accounts,id:"to_ac_id",ref:function(t){return e.to_acc=t},onChange:this.handleSelfChange,className:"form-control",type:"text"},this.state.lender_accounts_dd))),l.a.createElement("br",null),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-7"},l.a.createElement("label",null,"Payment Txn ID"),l.a.createElement("font",{className:"text-danger"},"   *  ")),l.a.createElement("div",{className:"col-md-5"},l.a.createElement("input",{type:"text",id:"txn_id",onChange:this.handleSelfChange,className:"form-control spacing",required:"required"}))),l.a.createElement("br",null),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-7"},l.a.createElement("label",null,"Payment Mode"),l.a.createElement("font",{className:"text-danger"},"   *  ")),l.a.createElement("div",{className:"col-md-5"},l.a.createElement("select",{id:"txn_mode",onChange:this.handleSelfChange,className:"form-control",type:"text",required:"required"},this.getSelectOptions("transaction_mode")))),l.a.createElement("br",null)),l.a.createElement("div",{className:"col-md-6"},this.props.data.provisional_penalty>0&&l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-7"},l.a.createElement("label",null,"Penalty \xa0\xa0",l.a.createElement("input",{type:"checkbox",onClick:this.waivePenaltyCheckbox}),"\xa0\xa0 ",l.a.createElement("b",{className:"red_color_font"},"Waive Penalty"))),l.a.createElement("div",{className:"col-md-5 ".concat(this.state.penalty_div_style)},l.a.createElement("input",{type:"text",id:"penalty_collected",value:this.state.penalty_collected,onChange:this.handleAmountChange,className:"form-control",required:"required"}))),l.a.createElement("br",null)),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-7"},l.a.createElement("label",null,"Paid By")),l.a.createElement("div",{className:"col-md-5"},l.a.createElement("input",{type:"text",id:"txn_exec_by",onChange:this.handleSelfChange,className:"form-control",required:"required"}))),l.a.createElement("br",null),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-7"},l.a.createElement("label",null,"Payment Date"),l.a.createElement("font",{className:"text-danger"},"   *  ")),l.a.createElement("div",{className:"col-md-5"},l.a.createElement(it.a,{closeOnSelect:!0,onChange:function(t){e.handleSelfDateChange("txn_date",t)},dateFormat:"DD MMM YYYY",timeFormat:!1,required:"required"}))),l.a.createElement("br",null),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-7"},l.a.createElement("label",null,"Remarks")),l.a.createElement("div",{className:"col-md-5"},l.a.createElement("input",{type:"text",id:"remarks",onChange:this.handleSelfChange,className:"form-control",required:"required"}))))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-4"}),l.a.createElement("div",{className:"col-md-8"},l.a.createElement("h4",null,l.a.createElement("label",null,"Total Repaid Amount: ",Ve(this.state.total_amount,this.currency_code))))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-4"},l.a.createElement("label",null,l.a.createElement("input",{type:"checkbox",onChange:this.handleSMSCheckboxClick,defaultChecked:!0}),"\xa0 Send Payment confirmation notification SMS"))))),l.a.createElement(ht.a.Footer,null,l.a.createElement(S.a,{variant:"secondary",onClick:this.handleClose},"Cancel"),l.a.createElement("input",{type:"button",className:"btn btn-primary",onClick:this.handleSubmit,value:"Submit"}))))}}]),t}(Te),ol=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={modalBox:!1,comp_name:"loan_comment",dropdown_div_style:"disable_div"},a.handleCommentClick=function(e){re(a.req({status:"enabled"})).then(function(e){e&&("success"===e.status?a.getSelectOptionsFromResult(e.data.list,"app_users",["id","name"]):alert(e.message+"\n"+JSON.stringify(e.data)))}),a.setState({modalBox:!0})},a.handleClose=function(e){a.setState({modalBox:!1})},a.handleTaskClick=function(e){e.target.checked?a.create_task=!0:a.create_task=!1},a.handleSmsClick=function(e){e.target.checked?a.send_sms=!0:a.send_sms=!1},a.handleEmailClick=function(e){e.target.checked?a.send_email=!0:a.send_email=!1},a.handleSubmit=function(e){e.preventDefault();var t=a.props.loan_comments;t.country_code=a.country_code,t.loan_doc_id=a.props.loan_doc_id,t.task=a.create_task,t.sms=a.send_sms,t.email=a.send_email,t.cmt_to=a.assign_by.value,el(a.req({loan_comments:t})).then(function(e){e&&"success"===e.status&&window.location.reload()})},a.handleDropdownValue=function(e){var t=e.target.value;tl(a.req({person_id:t})).then(function(e){e&&"success"===e.status&&a.setState({email_id:"("+e.data.email_id+")",mobile_num:"("+e.data.mobile_num+")"})}),"disable_div"===a.state.dropdown_div_style&&(a.setState({dropdown_div_style:"show_div"}),a.setState({div_style:"disable_div"}))},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){}},{key:"render",value:function(){var e=this;return l.a.createElement("div",{id:""},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-6"},l.a.createElement("button",{className:"btn btn-primary",onClick:this.handleCommentClick},"Add Comment"))),l.a.createElement("br",null),l.a.createElement(ht.a,{className:"content",show:this.state.modalBox,onHide:this.handleClose},l.a.createElement(ht.a.Header,{closeButton:!0},l.a.createElement(ht.a.Title,null,"FA Comment")),l.a.createElement(ht.a.Body,null,l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-6"},l.a.createElement("span",null,"Comment Type"),l.a.createElement("font",{className:"text-danger"},"   *  "),l.a.createElement("select",{id:"cmt_type",onChange:this.handleChange,className:"form-control",type:"text"},this.getSelectOptions("comment_type"))),l.a.createElement("div",{className:"col-md-6"})),l.a.createElement("br",null),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-6"},l.a.createElement("label",null,"Assign To"),l.a.createElement("select",{id:"cmt_to",defaultValue:this.selected.app_users,ref:function(t){return e.assign_by=t},onChange:function(t){e.handleChange(t),e.handleDropdownValue(t)},className:"form-control",type:"text"},this.state.app_users_dd)),l.a.createElement("div",{className:"col-md-6"},l.a.createElement("span",null,l.a.createElement("div",{id:"",className:"".concat(this.state.dropdown_div_style)},l.a.createElement("div",{className:"checkbox"},l.a.createElement("label",null,l.a.createElement("input",{type:"checkbox",onClick:this.handleTaskClick})," \xa0\xa0","Create Task")))))),l.a.createElement("br",null),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-12"},l.a.createElement("span",null,"Comment"),l.a.createElement("font",{className:"text-danger"},"   *  "),l.a.createElement("textarea",{id:"comment",className:"form-control",onChange:this.handleChange}))),l.a.createElement("br",null),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-6"},l.a.createElement("span",null,l.a.createElement("div",{id:"",className:"".concat(this.state.dropdown_div_style)},l.a.createElement("div",{className:"checkbox"},l.a.createElement("label",null,l.a.createElement("input",{type:"checkbox",id:"checkbox",onClick:this.handleSmsClick}),"\xa0\xa0","Send Sms",this.state.mobile_num))))),l.a.createElement("div",{className:"col-md-6"},l.a.createElement("span",null,l.a.createElement("div",{id:"",className:"".concat(this.state.dropdown_div_style)},l.a.createElement("div",{className:"checkbox"},l.a.createElement("label",null,l.a.createElement("input",{type:"checkbox",onClick:this.handleEmailClick}),"\xa0\xa0","Send Email",this.state.email_id))))))),l.a.createElement(ht.a.Footer,null,l.a.createElement(S.a,{variant:"secondary",onClick:this.handleClose},"Cancel"),l.a.createElement("input",{type:"button",className:"btn btn-primary",onClick:this.handleSubmit,value:"Submit"}))))}}]),t}(Te),sl=(a(153),function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={variant:"primary",comp_name:"ViewComments"},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"get_style",value:function(e){return e==this.logged_in_user_id?"message-blue":"message-orange"}},{key:"componentWillMount",value:function(){var e,t=this,a=this.props.loan_doc_id;(e=this.req({loan_doc_id:a}),F(j+"/loan/comments/list",e)).then(function(e){if(e&&"success"===e.status&&null!=e.data){var a=e.data.list;t.logged_in_user_id=e.data.logged_in_user_id;var n=a.map(function(e,a){return l.a.createElement("div",{className:t.get_style(e.cmt_from)},l.a.createElement("div",{className:""},de(e.cmt_type)),l.a.createElement("p",{className:"message-content"},e.cmt_from_name," : ",e.comment),l.a.createElement("div",{className:"message-timestamp-left"},fe(e.created_at,!0)))});t.setState({comment_list:n})}})}},{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("h4",null,"Comments"),l.a.createElement("div",{className:"chat_container"},this.state.comment_list))}}]),t}(Te)),il=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={loan:[],viewReady:!1,loan_comment:{}},a.handleSMSChange=function(e){a.setState({message:e.target.value}),a.setState({message_count:ye(e.target.value)})},a.handleSendSMSClick=function(e){var t={message:a.state.message,recipient:a.state.loan.mobile_num};ne(a.req(t)).then(function(e){e&&alert("Message Sent")})},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){var e,t,a=this,n=this.props.match.params.loan_doc_id;null==n?(e=this.props.data,this.setState({loan:e})):(t=this.req({loan_doc_id:n}),F(j+"/loan",t)).then(function(t){t&&("success"===t.status?(e=t.data.loan,a.setState({message:e.message}),a.setState({message_count:ye(e.message)}),a.setState({loan:e}),a.owner_person_id=e.owner_person_id,a.setState({viewReady:!0}),a.setState({loan_doc_id:e.loan_doc_id})):alert(t.message+"\n"+JSON.stringify(t.data)))})}},{key:"render",value:function(){var e,t=this;if(!this.state.viewReady)return l.a.createElement(l.a.Fragment,null);var a=this.state.loan.loan_doc_id,n=this.state.loan.cust_id,r=this.state.loan.lender_code,c=this.state.loan.data_prvdr_code,o=this.state.loan.lender_name;if("pending_disbursal"===this.state.loan.status&&f("loan","disburse")){this.status=_e(this.state.loan.status);var s=this.state.loan.loan_principal,i=this.state.loan.cust_acc_id;this.disburse_loan={loan_doc_id:a,cust_id:n,lender_code:r,amount:s,cust_acc_id:i,lender_name:o,data_prvdr_code:c},e=l.a.createElement(rl,{id:"disbursal_txn",data:this.disburse_loan,title:"Disbursal Loan",mode:this.props.mode})}else if(("ongoing"===this.state.loan.status||"due"===this.state.loan.status||"overdue"===this.state.loan.status)&&f("loan","capture_repayment")){var d=this.state.loan.due_date,m=this.state.loan.current_os_amount,u=this.state.loan.status,p=this.state.loan.provisional_penalty,h=this.state.loan.penalty_collected;this.capture_repayment={loan_doc_id:a,due_date:d,lender_code:r,current_os_amount:m,status:u,provisional_penalty:p,cust_id:n,lender_name:o,penalty_collected:h,data_prvdr_code:c},e=l.a.createElement(cl,{id:"repayment_txn",title:"Capture Repayment",data:this.capture_repayment,mode:this.props.mode})}return l.a.createElement("div",{className:"container"},l.a.createElement("br",null),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-8"},l.a.createElement("h4",null,"Float Advance ID : ",l.a.createElement("b",null,this.state.loan.loan_doc_id))),l.a.createElement("div",{className:"col-md-4"},l.a.createElement("h4",null,"Status: ",l.a.createElement("b",null,de(this.state.loan.status))))),l.a.createElement(Yn,{parent:"loan",customer:this.state.loan}),l.a.createElement(Hn,{parent:"loan",credit_score:this.state.loan.credit_score,customer:this.state.loan,product:this.state.loan}),e,this.state.loan.message&&l.a.createElement("div",null,l.a.createElement("div",{className:"col-md-3"},l.a.createElement("h5",{className:"red_color_font"},l.a.createElement("b",null,"Notify customer on overdue")),l.a.createElement("textarea",{rows:"5",cols:"30",maxlength:"160",value:this.state.message,onChange:function(e){t.handleSMSChange(e)}}),l.a.createElement("br",null),l.a.createElement("div",{id:"float_style"},l.a.createElement("b",null,"(",this.state.message_count," / 160)")),l.a.createElement("br",null)),l.a.createElement("div",{className:"col-md-4"},l.a.createElement("div",null,l.a.createElement("input",{type:"button",value:"Send SMS",className:"btn_style btn btn-primary",onClick:this.handleSendSMSClick})))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-6"},l.a.createElement(ol,{id:"loan_comment",loan_comments:this.state.loan_comment,loan_doc_id:this.state.loan.loan_doc_id,onComponentChange:this.handleComponentChange}))),l.a.createElement("div",null,l.a.createElement(sl,{loan_doc_id:this.state.loan.loan_doc_id}),l.a.createElement(nl,{parent:"view_loan",loan_doc_id:this.state.loan.loan_doc_id})))}}]),t}(qe),dl=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={comp_name:"customer_factor",cust_id_style:"show_div",dp_cust_id_style:"show_div",dp_style:"show_div"},a.handleCustIDChange=function(e){""==e.target.value?a.setState({dp_cust_id_style:"show_div",cust_id_style:"show_div",dp_style:"show_div"}):"cust_id"==e.target.id?a.setState({dp_cust_id_style:"disable_div",cust_id_style:"show_div",dp_style:"disable_div"}):a.setState({cust_id_style:"disable_div",dp_cust_id_style:"show_div",dp_style:"show_div"}),a.handleChange(e)},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){var e=this;this.setOptionsToStateFromApi("data_provider");var t={country_code:this.country_code};oa(this.req(t)).then(function(t){return e.fillSelect(t,"score_model",["model_code","model_name"])})}},{key:"render",value:function(){return l.a.createElement("div",{id:""},l.a.createElement("h4",null,this.props.title?this.props.title:""),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-3 ".concat(this.state.cust_id_style)},l.a.createElement("span",null,"Flow Customer ID"),l.a.createElement("input",{id:"cust_id",onChange:this.handleCustIDChange,className:"form-control",required:!0})),l.a.createElement("div",{className:"col-md-3 ".concat(this.state.dp_cust_id_style)},l.a.createElement("span",null,"Data Provider Customer ID"),l.a.createElement("input",{id:"data_prvdr_cust_id",onChange:this.handleCustIDChange,className:"form-control"}))),l.a.createElement("br",null),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-3"},l.a.createElement("span",null,"Credit Score Model"),l.a.createElement("font",{className:"text-danger"},"   *  "),l.a.createElement("select",{id:"cs_model_code",onChange:this.handleChange,className:"form-control",type:"text",required:"required"},this.state.score_model_dd)),l.a.createElement("div",{className:"col-md-6"},l.a.createElement(_t,{id:"cust_txn_file",label:"Transaction File",is_mandatory:!0,mode:this.props.mode,onCreateUpload:this.handleChange}))))}}]),t}(Te),ml=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={csfList:null},a.handleSave=function(e){a.result.country_code=a.country_code,ia(a.req(a.result)).then(function(e){e&&("success"===e.status?(alert("Score Factors saved successfully"),window.location.reload()):alert(e.message+"\n"+JSON.stringify(e.data)))})},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){this.result=this.props.factors_list,this.result.customer_factor=this.props.customer_factor;var e=this.result.score_values.map(function(e,t){return l.a.createElement("tr",{key:t},l.a.createElement("td",null," ",de(e.csf_type)),l.a.createElement("td",null," ",e.csf_gross_value),l.a.createElement("td",null," ",e.csf_normal_value))});this.setState({csfList:e})}},{key:"componentDidMount",value:function(){yt()("#table").removeAttr("width").dataTable({order:[],columns:[{width:"22%"},{width:"22%"},{width:"22%"}],bPaginate:!1,searching:!1,info:!1})}},{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-3"},l.a.createElement("h5",null,l.a.createElement("b",null,"Run ID")," : ",this.result.run_id)),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("h5",null,l.a.createElement("b",null,"Score")," : ",this.result.score," / 1000")),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("h5",null,l.a.createElement("b",null,"Result")," : ",de(this.result.result))),l.a.createElement("div",{className:"col-md-3"},this.result.existing_customer?l.a.createElement("h5",null,l.a.createElement("b",null,"Flow Customer ID")," : ",this.result.cust_id):l.a.createElement("h5",{id:"red_color"},"New Customer"))),l.a.createElement("br",null),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-3"}),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("h4",null,"Score Factors"))),l.a.createElement("table",{id:"table",className:"display strip row-border order-column "},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"Factor"),l.a.createElement("th",null,"Gross Value"),l.a.createElement("th",null,"Normal Value"))),l.a.createElement("tbody",null,this.state.csfList)),l.a.createElement("br",null),l.a.createElement("input",{id:"float_style",type:"button",className:"btn btn-primary",onClick:this.handleSave,value:"Accept and Save"}))}}]),t}(Te),ul=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={customer_factor:{},list_screen:!1,run_btn_style:"show_div"},a.handleSubmit=function(e){a.setState({list_screen:!1}),e.preventDefault(),a.setState({run_btn_style:"disable_div"}),alert("It may take a while. Please wait.");var t=a.state.customer_factor;t.country_code=a.country_code,sa(a.req({customer_factor:t})).then(function(e){e?"success"===e.status?a.setState({factors_list:e.data,list_screen:!0}):(a.setState({run_btn_style:"show_div"}),alert(e.message+"\n"+JSON.stringify(e.data))):a.setState({run_btn_style:"show_div"})})},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"container"},l.a.createElement("form",{id:"borrower_form",onSubmit:this.handleSubmit},l.a.createElement("div",{id:""},l.a.createElement(dl,{id:"customer_factor",mode:this.props.mode,title:"Upload Customer Transactions",onComponentChange:this.handleComponentChange})," ",l.a.createElement("br",null),l.a.createElement("input",{type:"button",className:"btn btn-primary ".concat(this.state.run_btn_style),onClick:this.handleSubmit,value:"Run"}),l.a.createElement("br",null),l.a.createElement("br",null),this.state.list_screen&&l.a.createElement(l.a.Fragment,null,l.a.createElement("hr",null),l.a.createElement(ml,{customer_factor:this.state.customer_factor,factors_list:this.state.factors_list})),l.a.createElement("br",null)))))}}]),t}(qe),pl=l.a.createElement(l.a.Fragment,null,l.a.createElement(E.a,{path:"/borrower/indiv/create",exact:!0,component:function(){return l.a.createElement(fn,{mode:"create",title:"Create Individual Customer"})}}),l.a.createElement(E.a,{path:"/borrower/ins/create",exact:!0,component:function(){return l.a.createElement(bn,{mode:"create",title:"Create Institutional Customer"})}}),l.a.createElement(E.a,{path:"/borrower/indiv/edit/:cust_id",exact:!0,component:function(e){return l.a.createElement(fn,Object.assign({mode:"view",title:"View/Edit Customer"},e))}}),l.a.createElement(E.a,{path:"/borrower/ins/edit/:cust_id",exact:!0,component:function(e){return l.a.createElement(bn,Object.assign({mode:"view",title:"View/Edit Customer"},e))}}),l.a.createElement(E.a,{path:"/borrower/indiv/view/:cust_id",exact:!0,component:function(e){return l.a.createElement(An,Object.assign({mode:"view",title:"View Customer"},e))}}),l.a.createElement(E.a,{path:"/borrower/ins/view/:cust_id",exact:!0,component:function(e){return l.a.createElement(jn.a,Object.assign({mode:"view",title:"View Customer"},e))}}),l.a.createElement(E.a,{path:"/borrower/search",exact:!0,component:vn}),l.a.createElement(E.a,{path:"/upload_cust_txns",exact:!0,component:function(){return l.a.createElement(ul,{mode:"create"})}})),hl=l.a.createElement(l.a.Fragment,null,l.a.createElement(E.a,{path:"/relationship_manager/flowrlspmanager/create",exact:!0,component:function(){return l.a.createElement(Pn,{mode:"create",title:"Create FLOW Relationship Manager"})}}),l.a.createElement(E.a,{path:"/relationship_manager/flowrlspmanager/view/:relationshipManager_id",exact:!0,component:function(e){return l.a.createElement(Pn,Object.assign({mode:"view",title:"View/Edit Relationship Manager"},e))}}),l.a.createElement(E.a,{path:"/relationship_manager/flowrlspmanager/list",exact:!0,component:Tn})),_l=l.a.createElement(l.a.Fragment,null,l.a.createElement(E.a,{path:"/relationship_manager/dprlspmanager/create",exact:!0,component:function(){return l.a.createElement(qn,{mode:"create",title:"Create Data Provider Relationship Manager"})}}),l.a.createElement(E.a,{path:"/relationship_manager/dprlspmanager/view/:relationshipManager_id",exact:!0,component:function(e){return l.a.createElement(qn,Object.assign({mode:"view",title:"View/Edit Relationship Manager"},e))}}),l.a.createElement(E.a,{path:"/relationship_manager/dprlspmanager/list",exact:!0,component:function(){return l.a.createElement(Rn,{mode:"list"})}})),El=l.a.createElement(l.a.Fragment,null,l.a.createElement(E.a,{path:"/fa_appl/search",exact:!0,component:Gn}),l.a.createElement(E.a,{path:"/fa_appl/view/:loan_appl_doc_id",exact:!0,component:function(e){return l.a.createElement(Kn,Object.assign({mode:"view"},e))}}),l.a.createElement(E.a,{path:"/fa_appl",exact:!0,component:function(e){return l.a.createElement(Jn,Object.assign({mode:"search"},e))}}),l.a.createElement(E.a,{path:"/fa_appl_for/:cust_id",component:function(e){return l.a.createElement(Jn,Object.assign({mode:"result"},e))}})),vl=l.a.createElement(l.a.Fragment,null,l.a.createElement(E.a,{path:"/fa/view/:loan_doc_id",exact:!0,component:function(e){return l.a.createElement(il,e)}}),l.a.createElement(E.a,{path:"/fa/search",exact:!0,component:ll})),gl=a(44),fl=a.n(gl),bl=function(e){function t(){return Object(o.a)(this,t),Object(i.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){void 0==Object({NODE_ENV:"production",PUBLIC_URL:"",REACT_APP_ADMIN_API_ROOT:"/api/admin",REACT_APP_APP_API_ROOT:"/api/app",REACT_APP_CORE_API_ROOT:"/api/core",REACT_APP_URL:"http://app.flowglobal.net"}).REACT_APP_USE_ROOT_ONLY_DEV?this.root="":this.root="http://localhost:8000";var e=null;"data_prvdr"==this.props.entity?e="data_providers":"lender"==this.props.entity&&(e="lenders");var t=this.root+"/files/"+this.props.country_code+"/"+e+"/";return t+=this.props.entity_code+"/"+this.props.entity+"_logo/"+this.props.file_name,l.a.createElement(l.a.Fragment,null,l.a.createElement("img",{className:this.props.color,src:t,alt:this.props.entity_code}))}}]),t}(n.Component),yl=bl,wl=a(56),Cl=a.n(wl),Nl=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).handleClose=function(e){window.location.reload("/"),a.setState({modalBox:!1})},a.clickDataProvider=function(e,t){null!=a.selectedMarket&&b("market",a.selectedMarket),b("data_prvdr_code",e),b("data_prvdr_logo",t),"select"==a.props.action?a.props.onSelect():"change"==a.props.action&&window.location.reload("/")},a.clickMarket=function(e){a.selectedMarket=a.market_list[e.target.id];var t={country_code:a.selectedMarket.country_code,time_zone:a.selectedMarket.time_zone,status:null};ce(t).then(function(e){e&&("success"===e.status?y(e.data.master_data):alert(e.message+"\n"+JSON.stringify(e.data)),a.list_data_prvdr_api(t))})},a.list_data_provider=function(e,t){var n=t.map(function(e,t){return l.a.createElement("ul",{key:t},l.a.createElement("div",{className:"row"},l.a.createElement(z.a,{to:"#"},l.a.createElement(bl,{file_name:"t_"+e.data_prvdr_logo,entity:"data_prvdr",entity_code:e.data_prvdr_code,country_code:e.country_code}),"\xa0\xa0",l.a.createElement("a",{onClick:a.clickDataProvider.bind(Object(u.a)(Object(u.a)(a)),e.data_prvdr_code,e.data_prvdr_logo),variant:"primary"},e.name))))});a.setState({country_code:e,dataproviderLinks:n,market_style:"disable_div"})},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){var e=this;this.market_list=v("market_list");var t=v("market");if(t&&("select"==this.props.action||"data_prvdr"==this.props.toChange||"data_prvdr_only"==this.props.toChange)){this.setState({country_code:t.country_code,market_style:"disable_div"});var a={country_code:t.country_code,time_zone:t.time_zone,status:""};a=he(a),this.list_data_prvdr_api(a)}var n=null;"data_prvdr_only"!=this.props.toChange&&(n=this.market_list.map(function(t,a){return l.a.createElement("ul",{key:a},l.a.createElement("div",{className:"row"},l.a.createElement(z.a,{to:"#"},l.a.createElement(G.a,{name:t.country_code,format:"png",pngSize:32,alt:t.country,basePath:"/img/flags"}),"\xa0",l.a.createElement("a",{onClick:e.clickMarket.bind(e),variant:"primary",id:a},t.country," (",t.country_code,")"))))})),"data_prvdr_only"==this.props.toChange||"data_prvdr"==this.props.toChange?this.toChangeStr="data provider":"market"==this.props.toChange&&(this.toChangeStr="market / data provider");var r=!1;"change"==this.props.action&&(r=!0),this.setState({marketLinks:n,modalBox:!0,showX:r})}},{key:"list_data_prvdr_api",value:function(e){var t=this;Rt(e).then(function(a){a&&"success"===a.status&&t.list_data_provider(e.country_code,a.data)})}},{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(Cl.a,{show:this.state.modalBox},l.a.createElement(Cl.a.Header,null,l.a.createElement(Cl.a.Title,null,"Hello User!"),this.state.showX&&l.a.createElement("button",{type:"button",onClick:this.handleClose,className:"close","aria-label":"Close"},l.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),l.a.createElement(Cl.a.Body,null,l.a.createElement("h4",null,"Please select the ",this.toChangeStr," you would like to administrate."),"market"==this.props.toChange&&l.a.createElement(fl.a,null,l.a.createElement(fl.a.Header,null,"Choose Market"),l.a.createElement(fl.a.Body,{className:this.state.market_style},this.state.marketLinks)),this.state.country_code&&l.a.createElement(fl.a,null,l.a.createElement(fl.a.Header,null,"Choose Data Provider from ",l.a.createElement(G.a,{name:this.state.country_code,format:"png",pngSize:24,alt:this.state.country_code,basePath:"/img/flags"}),l.a.createElement("b",null,this.state.country_code)),l.a.createElement(fl.a.Body,null,this.state.dataproviderLinks)))))}}]),t}(l.a.Component),kl=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={toSelectMarket:!1},a.selectDataPrvdr=function(e){"super_admin"===a.roles?a.toChange="data_prvdr":a.toChange="data_prvdr_only",a.setState({toSelectMarket:!0})},a.selectMarket=function(e){"super_admin"===v("role_codes")&&(a.toChange="market",a.setState({toSelectMarket:!0}))},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){var e=this;this.selectMarket=this.selectMarket.bind(this);var t=v("market");this.country_code=t.country_code,this.data_prvdr_code=g("data_prvdr_code"),this.app_version=v("app_version"),this.user_name=v("user_name"),this.prv=v("privileges"),this.roles=v("role_codes"),this.data_prvdr_logo=g("data_prvdr_logo"),Object.keys(this.prv).map(function(t){var a=e.prv[t].split(",");e[t]={},a.map(function(a){e[t][a]=!0})})}},{key:"render",value:function(){return this.state.toSelectMarket?l.a.createElement(Nl,{toChange:this.toChange,action:"change"}):l.a.createElement(l.a.Fragment,null,l.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-dark bg-dark"},l.a.createElement("img",{src:"/logo_white.png"}),l.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"},l.a.createElement("span",{className:"navbar-toggler-icon"})),l.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarSupportedContent"},l.a.createElement("ul",{className:"navbar-nav mr-auto"},l.a.createElement("li",{className:"nav-item dropdown"},l.a.createElement("a",{className:"nav-link dropdown-toggle",href:"#",id:"navbarDropdown",role:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},"Search"),l.a.createElement("div",{className:"dropdown-menu","aria-labelledby":"navbarDropdown"},this.customer&&this.customer.search_list_view&&l.a.createElement(l.a.Fragment,null,l.a.createElement(z.a,{className:"dropdown-item",to:"/borrower/search"},"Search Customer")),this.loan&&this.loan.search_list_view&&l.a.createElement(z.a,{className:"dropdown-item",to:"/fa/search"},"Search Float Advance"),l.a.createElement("div",{className:"dropdown-divider"}),this.application&&this.application.search_list_view&&l.a.createElement(z.a,{className:"dropdown-item",to:"/fa_appl/search"},"Search FA Applications"))),this.application&&l.a.createElement("li",{className:"nav-item dropdown"},this.application.apply&&l.a.createElement(z.a,{className:"nav-link apply_fa",to:"/fa_appl"},"Apply FA")),this.report&&l.a.createElement("li",{className:"nav-item dropdown"},l.a.createElement("a",{className:"nav-link dropdown-toggle",href:"#",id:"navbarDropdown",role:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},"Reports"),l.a.createElement("div",{className:"dropdown-menu","aria-labelledby":"navbarDropdown"},this.report.flow_kpi_dashboard&&l.a.createElement(l.a.Fragment,null,l.a.createElement(z.a,{className:"dropdown-item",to:"/report/monthly_kpi_report"},"Monthly KPI Report"),l.a.createElement(z.a,{className:"dropdown-item",to:"/report/current_kpi_report"},"Current KPI Report"),l.a.createElement(z.a,{className:"dropdown-item",to:"/report/product_takeup"},"Product Takeup Report"),l.a.createElement(z.a,{className:"dropdown-item",to:"/report/daily_activity"},"Daily Activity Report")),this.report.portfolio_quality&&l.a.createElement(z.a,{className:"dropdown-item",to:"/report/portfolio_quality"},"Portfolio Quality"),this.report.growth_chart&&l.a.createElement(z.a,{className:"dropdown-item",to:"/report/growth_chart"},"Growth Chart"))),this.customer&&this.customer.create&&l.a.createElement("li",{className:"nav-item dropdown"},l.a.createElement("a",{className:"nav-link dropdown-toggle",href:"#",id:"navbarDropdown",role:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},"Customer"),l.a.createElement("div",{className:"dropdown-menu","aria-labelledby":"navbarDropdown"},l.a.createElement(l.a.Fragment,null,l.a.createElement(z.a,{className:"dropdown-item",to:"/borrower/indiv/create"},"Add Individual Customer"),l.a.createElement(z.a,{className:"dropdown-item",to:"/borrower/ins/create"},"Add Institutional Customer")))),this.product&&l.a.createElement("li",{className:"nav-item dropdown"},l.a.createElement("a",{className:"nav-link dropdown-toggle",href:"#",id:"navbarDropdown",role:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},"Product"),l.a.createElement("div",{className:"dropdown-menu","aria-labelledby":"navbarDropdown"},this.product.create&&l.a.createElement(z.a,{className:"dropdown-item",to:"/fa_product/create"},"Add Product"),this.product.search_list_view&&l.a.createElement(z.a,{className:"dropdown-item",to:"/fa_product/list"},"Search Products"),this.template&&l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"dropdown-divider"}),this.template.create&&l.a.createElement(z.a,{className:"dropdown-item",to:"/fa_product/template/create"},"Add Product Template"),this.template.list_view&&l.a.createElement(z.a,{className:"dropdown-item",to:"/fa_product/template/list"},"Search Product Templates")))),this.score&&l.a.createElement("li",{className:"nav-item dropdown"},l.a.createElement("a",{className:"nav-link dropdown-toggle",href:"#",id:"navbarDropdown",role:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},"Score"),l.a.createElement("div",{className:"dropdown-menu","aria-labelledby":"navbarDropdown"},this.score.list&&l.a.createElement(z.a,{className:"dropdown-item",to:"/score_models"},"Score Models"),this.score.factor_list&&l.a.createElement(z.a,{className:"dropdown-item",to:"/score_factors"},"Score Factors"),this.score.cust_txn&&l.a.createElement(z.a,{className:"dropdown-item",to:"/upload_cust_txns"},"Upload Customer Transaction"))),this.master_agreement&&l.a.createElement("li",{className:"nav-item dropdown"},l.a.createElement("a",{className:"nav-link dropdown-toggle",href:"#",id:"navbarDropdown",role:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},"Agreement"),l.a.createElement("div",{className:"dropdown-menu","aria-labelledby":"navbarDropdown"},this.master_agreement.create&&l.a.createElement(z.a,{className:"dropdown-item",to:"/agreement/create"},"Create Master Agreement"),this.master_agreement.list_view&&l.a.createElement(z.a,{className:"dropdown-item",to:"/agreement/list"},"List Master Agreement"))),(this.data_prvdr||this.data_prvdr_rel_mgr)&&l.a.createElement("li",{className:"nav-item dropdown"},l.a.createElement("a",{className:"nav-link dropdown-toggle",href:"#",id:"navbarDropdown",role:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},"Data Provider"),l.a.createElement("div",{className:"dropdown-menu","aria-labelledby":"navbarDropdown"},this.data_prvdr&&l.a.createElement(l.a.Fragment,null,this.data_prvdr.create&&l.a.createElement(z.a,{className:"dropdown-item",to:"/data_provider/create"},"Create Data Provider"),this.data_prvdr.list_view&&l.a.createElement(z.a,{className:"dropdown-item",to:"/data_provider/list"},"List Data Providers"),l.a.createElement("div",{className:"dropdown-divider"})),this.data_prvdr_rel_mgr&&l.a.createElement(l.a.Fragment,null,this.data_prvdr_rel_mgr.create&&l.a.createElement(z.a,{className:"dropdown-item",to:"/relationship_manager/dprlspmanager/create"},"Add  Rel. Manager"),this.data_prvdr_rel_mgr.list_view&&l.a.createElement(z.a,{className:"dropdown-item",to:"/relationship_manager/dprlspmanager/list"},"List Rel. Managers")))),this.lender&&l.a.createElement("li",{className:"nav-item dropdown"},l.a.createElement("a",{className:"nav-link dropdown-toggle",href:"#",id:"navbarDropdown",role:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},"Lender"),l.a.createElement("div",{className:"dropdown-menu","aria-labelledby":"navbarDropdown"},this.lender.create&&l.a.createElement(z.a,{className:"dropdown-item",to:"/lender/create"},"Create Lender"),this.lender.list_view&&l.a.createElement(z.a,{className:"dropdown-item",to:"/lender/list"},"List Lenders"))),(this.market||this.acc_prvdr||this.flow_rel_mgr)&&l.a.createElement("li",{className:"nav-item dropdown"},l.a.createElement("a",{className:"nav-link dropdown-toggle",href:"#",id:"navbarDropdown",role:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},"FLOW (Market)"),l.a.createElement("div",{className:"dropdown-menu","aria-labelledby":"navbarDropdown"},this.market&&l.a.createElement(l.a.Fragment,null,this.market.create&&l.a.createElement(z.a,{className:"dropdown-item",to:"/market/create"},"Create Market"),this.market.list_view&&l.a.createElement(z.a,{className:"dropdown-item",to:"/market/list"},"List Markets"),l.a.createElement("div",{className:"dropdown-divider"})),this.acc_prvdr&&this.acc_prvdr.create&&l.a.createElement(z.a,{className:"dropdown-item",to:"/account_provider/create"},"Create Account Provider"),this.acc_prvdr&&this.acc_prvdr.list_view&&l.a.createElement(z.a,{className:"dropdown-item",to:"/account_provider/list"},"List Account Providers"),l.a.createElement("div",{className:"dropdown-divider"}),this.flow_rel_mgr&&this.flow_rel_mgr.create&&l.a.createElement(z.a,{className:"dropdown-item",to:"/relationship_manager/flowrlspmanager/create"},"Add FLOW Rel. Manager"),this.flow_rel_mgr&&this.flow_rel_mgr.list_view&&l.a.createElement(z.a,{className:"dropdown-item",to:"/relationship_manager/flowrlspmanager/list"},"List FLOW Rel. Managers"))),this.master_data&&l.a.createElement("li",{className:"nav-item dropdown"},l.a.createElement("a",{className:"nav-link dropdown-toggle",href:"#",id:"navbarDropdown",role:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},"Master Data"),l.a.createElement("div",{className:"dropdown-menu","aria-labelledby":"navbarDropdown"},this.master_data.create&&l.a.createElement(z.a,{className:"dropdown-item",to:"/master_data/add"},"Add Master Data"),l.a.createElement("div",{className:"dropdown-divider"}),this.data_key.create&&l.a.createElement(z.a,{className:"dropdown-item",to:"/master_data_key/add"},"Add Master Data Key"),this.data_key.list_view&&l.a.createElement(z.a,{className:"dropdown-item",to:"/master_data_key/list"},"List Master Data Keys"))))),l.a.createElement("div",{className:"pull-right"},l.a.createElement("ul",{className:"pull-right menu_ul"},l.a.createElement("li",null,l.a.createElement("span",{className:"text_color"},"App Version: ",this.app_version),"\xa0\xa0"),l.a.createElement("li",null,l.a.createElement("span",{className:"text_color"},this.user_name," (",this.roles,")")),l.a.createElement("li",null,l.a.createElement("a",{href:"/logout"},l.a.createElement("i",{className:"icon-off"}),"Logout")))),l.a.createElement("div",{className:"super_admin"==v("role_codes")&&"flag_cursor",onClick:this.selectMarket},l.a.createElement(G.a,{id:"market",name:this.country_code,format:"png",pngSize:48,shiny:!1,alt:this.country_code,basePath:"/img/flags"})),l.a.createElement("div",{className:"flag_cursor",onClick:this.selectDataPrvdr},l.a.createElement(yl,{file_name:"t_"+v("data_prvdr_logo"),entity:"data_prvdr",entity_code:v("data_prvdr_code"),country_code:this.country_code,color:"logo_style"}),"\xa0\xa0")))}}]),t}(n.Component),Sl=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){var e=Object(x.a)(A.a.mark(function e(){var a;return A.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(H.a)(Object(d.a)(t.prototype),"touch_async",this).call(this);case 2:a=e.sent,this.setState({logout:a});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return this.state.logout?l.a.createElement(l.a.Fragment,null):l.a.createElement(l.a.Fragment,null,l.a.createElement(kl,null),pl,hl,_l,El,vl,en,tn,an,nn,ln,rn,cn,on,sn,dn)}}]),t}(Te),Ol=a(39),Al=Object(Ol.a)();yt.a.dataTable=a(37),a(49),a(165),a(166),a(167),a(168);var xl=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(i.a)(this,Object(d.a)(t).call(this))).state={routes:[],home:[],selectMarket:!1},e.loadScreen=function(t){"admin"===t?e.setState({home:l.a.createElement(Sl,null)}):"login"===t?e.setState({home:l.a.createElement(W,{onLogon:e.loadUser})}):"market"!==t&&"data_prvdr"!==t&&"data_prvdr_only"!==t||e.setState({home:l.a.createElement(Nl,{toChange:t,action:"select",onSelect:e.loadUser})})},e.loadUser=e.loadUser.bind(Object(u.a)(Object(u.a)(e))),console.log(t.state),e}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){this.loadUser()}},{key:"loadUser",value:function(){this.role_codes=v("role_codes");var e=null,t=v("market"),a=g("data_prvdr_code");this.role_codes?this.role_codes.includes("super_admin")?t?a||(e="data_prvdr"):e="market":!this.role_codes.includes("super_admin")&&t?e="data_prvdr_only":alert("Unable to obtain User's Market Information or No Market has been configured in the system"):e="login",t&&a&&(e="admin"),this.loadScreen(e)}},{key:"render",value:function(){var e=this;return l.a.createElement("div",{className:"App"},l.a.createElement(p.a,{history:Al},l.a.createElement(h.a,null,l.a.createElement(E.a,{path:"/login",component:function(){return l.a.createElement(W,{onLogon:e.loadUser})}}),l.a.createElement(E.a,{path:"/logout",component:function(){return l.a.createElement(V,null)}}),l.a.createElement(E.a,{path:"/"},l.a.createElement(l.a.Fragment,null,this.state.home)))))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(l.a.createElement(xl,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},32:function(e,t,a){},6:function(e,t,a){},99:function(e,t){}},[[101,1,2]]]);
//# sourceMappingURL=main.197861c0.chunk.js.map