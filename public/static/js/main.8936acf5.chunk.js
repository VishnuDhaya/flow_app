(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{123:function(e,t,a){e.exports=a(166)},128:function(e,t,a){},14:function(e,t,a){},161:function(e,t,a){},166:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),l=a(27),c=a.n(l),s=a(3),o=a(4),i=a(28),d=a(5),m=a(6),u=a(2),p=(a(14),a(188)),_=a(189),h=a(17),f=a.n(h);function v(e){if(localStorage.hasOwnProperty(e))return JSON.parse(localStorage.getItem(e))}function g(e){if(localStorage.hasOwnProperty(e))return localStorage.getItem(e)}function y(e){return E(e,"edit")?"View / Edit":E(e,"list_view")?"View":void 0}function E(e,t){var a=v("privileges"),n=!1;return Object.keys(a).map(function(r){r==e&&a[r].split(",").map(function(e){t==e&&(n=!0)})}),n}function b(){localStorage.setItem("logout","logout_"+Math.random())}function w(){localStorage.removeItem("privileges"),localStorage.removeItem("market"),localStorage.removeItem("access_token"),localStorage.removeItem("role_codes"),localStorage.removeItem("market_list"),localStorage.removeItem("user_id"),localStorage.removeItem("user_name"),localStorage.removeItem("app_version"),localStorage.removeItem("master_data"),localStorage.removeItem("master_data_version"),localStorage.removeItem("acc_prvdr_code"),localStorage.removeItem("acc_prvdr_logo")}function N(e,t){localStorage.setItem(e,JSON.stringify(t))}function x(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;(!v("master_data")||e&&v("master_data_version")!=t)&&(localStorage.setItem("master_data",JSON.stringify(e)),localStorage.setItem("master_data_version",JSON.stringify(t)))}function C(e){return v("app_config")[e]}window.addEventListener("storage",function(e){"logout"==e.key&&window.location.reload("/login")},!1);var k=a(10),S=a(108),O=a(184),A=a(109),j=(a(128),a(25));function R(){R=function(){return e};var e={},t=Object.prototype,a=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",l=n.asyncIterator||"@@asyncIterator",c=n.toStringTag||"@@toStringTag";function s(e,t,a){return Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(k){s=function(e,t,a){return e[t]=a}}function o(e,t,a,n){var r=t&&t.prototype instanceof m?t:m,l=Object.create(r.prototype),c=new N(n||[]);return l._invoke=function(e,t,a){var n="suspendedStart";return function(r,l){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===r)throw l;return C()}for(a.method=r,a.arg=l;;){var c=a.delegate;if(c){var s=E(c,a);if(s){if(s===d)continue;return s}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===n)throw n="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);n="executing";var o=i(e,t,a);if("normal"===o.type){if(n=a.done?"completed":"suspendedYield",o.arg===d)continue;return{value:o.arg,done:a.done}}"throw"===o.type&&(n="completed",a.method="throw",a.arg=o.arg)}}}(e,a,c),l}function i(e,t,a){try{return{type:"normal",arg:e.call(t,a)}}catch(k){return{type:"throw",arg:k}}}e.wrap=o;var d={};function m(){}function u(){}function p(){}var _={};s(_,r,function(){return this});var h=Object.getPrototypeOf,f=h&&h(h(x([])));f&&f!==t&&a.call(f,r)&&(_=f);var v=p.prototype=m.prototype=Object.create(_);function g(e){["next","throw","return"].forEach(function(t){s(e,t,function(e){return this._invoke(t,e)})})}function y(e,t){var n;this._invoke=function(r,l){function c(){return new t(function(n,c){!function n(r,l,c,s){var o=i(e[r],e,l);if("throw"!==o.type){var d=o.arg,m=d.value;return m&&"object"==typeof m&&a.call(m,"__await")?t.resolve(m.__await).then(function(e){n("next",e,c,s)},function(e){n("throw",e,c,s)}):t.resolve(m).then(function(e){d.value=e,c(d)},function(e){return n("throw",e,c,s)})}s(o.arg)}(r,l,n,c)})}return n=n?n.then(c,c):c()}}function E(e,t){var a=e.iterator[t.method];if(void 0===a){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method))return d;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var n=i(a,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,d;var r=n.arg;return r?r.done?(t[e.resultName]=r.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):r:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function b(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function w(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function N(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(b,this),this.reset(!0)}function x(e){if(e){var t=e[r];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,l=function t(){for(;++n<e.length;)if(a.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return l.next=l}}return{next:C}}function C(){return{value:void 0,done:!0}}return u.prototype=p,s(v,"constructor",p),s(p,"constructor",u),u.displayName=s(p,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===u||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,s(e,c,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},g(y.prototype),s(y.prototype,l,function(){return this}),e.AsyncIterator=y,e.async=function(t,a,n,r,l){void 0===l&&(l=Promise);var c=new y(o(t,a,n,r),l);return e.isGeneratorFunction(a)?c:c.next().then(function(e){return e.done?e.value:c.next()})},g(v),s(v,c,"Generator"),s(v,r,function(){return this}),s(v,"toString",function(){return"[object Generator]"}),e.keys=function(e){var t=[];for(var a in e)t.push(a);return t.reverse(),function a(){for(;t.length;){var n=t.pop();if(n in e)return a.value=n,a.done=!1,a}return a.done=!0,a}},e.values=x,N.prototype={constructor:N,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!e)for(var t in this)"t"===t.charAt(0)&&a.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(a,n){return c.type="throw",c.arg=e,t.next=a,n&&(t.method="next",t.arg=void 0),!!n}for(var r=this.tryEntries.length-1;r>=0;--r){var l=this.tryEntries[r],c=l.completion;if("root"===l.tryLoc)return n("end");if(l.tryLoc<=this.prev){var s=a.call(l,"catchLoc"),o=a.call(l,"finallyLoc");if(s&&o){if(this.prev<l.catchLoc)return n(l.catchLoc,!0);if(this.prev<l.finallyLoc)return n(l.finallyLoc)}else if(s){if(this.prev<l.catchLoc)return n(l.catchLoc,!0)}else{if(!o)throw new Error("try statement without catch or finally");if(this.prev<l.finallyLoc)return n(l.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&a.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var l=r;break}}l&&("break"===e||"continue"===e)&&l.tryLoc<=t&&t<=l.finallyLoc&&(l=null);var c=l?l.completion:{};return c.type=e,c.arg=t,l?(this.method="next",this.next=l.finallyLoc,d):this.complete(c)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.finallyLoc===e)return this.complete(a.completion,a.afterLoc),w(a),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.tryLoc===e){var n=a.completion;if("throw"===n.type){var r=n.arg;w(a)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,a){return this.delegate={iterator:x(e),resultName:t,nextLoc:a},"next"===this.method&&(this.arg=void 0),d}},e}var D="/api/app",F=new Headers;function L(e){alert(e)}F.append("Content-Type","application/json");var P=function(e,t){return null==t&&(t={}),(!(arguments.length>2&&void 0!==arguments[2])||arguments[2])&&(t.token=v("access_token")),fetch(e,{method:"POST",body:JSON.stringify(t),headers:F}).then(I,L).then(z,q)};function B(e,t){return M.apply(this,arguments)}function M(){return(M=Object(j.a)(R().mark(function e(t,a){var n,r=arguments;return R().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(!(r.length>2&&void 0!==r[2])||r[2])&&(null==a&&(a={}),a.token=v("access_token")),e.next=4,fetch(t,{method:"POST",body:JSON.stringify(a),headers:F});case 4:return n=e.sent,e.next=7,n.json();case 7:return n=e.sent,e.abrupt("return",n);case 9:case"end":return e.stop()}},e)}))).apply(this,arguments)}function T(e,t){return H.apply(this,arguments)}function H(){return(H=Object(j.a)(R().mark(function e(t,a){var n,r,l,c=arguments;return R().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=!(c.length>2&&void 0!==c[2])||c[2],r=v("market"),v("access_token"),n&&(null==a&&(a={}),a.token=v("access_token"),a.country_code=r.country_code,a.time_zone=r.time_zone,a.type="disbursal_time_report",a.report="report_type"),e.next=6,fetch(t,{method:"POST",body:JSON.stringify(a),headers:F});case 6:return l=e.sent,e.next=9,l.json();case 9:return l=e.sent,e.abrupt("return",l);case 11:case"end":return e.stop()}},e)}))).apply(this,arguments)}function q(e){alert(e)}var z=function(e){var t="";if(e)return"error"===e.status?("401"==e.status_code?window.location.reload():"401"==e.status_code&&(t+="\n"+JSON.stringify(e.data)),alert(e.message+t),!1):e};function I(e){return e.text().then(function(t){var a=t&&JSON.parse(t),n=null;return e.ok?a:"401"==e.status?(n=a.message,w(),b(),void window.location.replace("/login")):(n=a&&a.message,Promise.reject(n))})}var W={login:function(e,t){var a=v("master_data_version");return P(D+"/user/login",{email:e,password:t,master_data_version:a},!1)},logout:function(e){P(D+"/user/logout"),w(),b()}};var Y=a(185),V=a(186);function U(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(u.a)(e);if(t){var r=Object(u.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(m.a)(this,a)}}var G=function(e){Object(d.a)(a,e);var t=U(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).handleChange=function(e){n.setState(Object(k.a)({},e.target.id,e.target.value))},n.handleSubmit=function(e){e.preventDefault();var t=n.state.email,a=n.state.password;n.setState({loading:!0}),W.login(t,a).then(function(e){var t;e&&("success"===e.status?(t=e,localStorage.setItem("privileges",JSON.stringify(t.data.user.privileges)),localStorage.setItem("role_codes",JSON.stringify(t.data.user.role_codes)),localStorage.setItem("access_token",JSON.stringify(t.data.access_token)),localStorage.setItem("app_version",JSON.stringify(t.data.app_version)),localStorage.setItem("app_config",JSON.stringify(t.data.app_config)),x(t.data.master_data,t.data.master_data_version),t.data.user.market&&localStorage.setItem("market",JSON.stringify(t.data.user.market)),t.data.user.market_list&&localStorage.setItem("market_list",JSON.stringify(t.data.user.market_list)),t.data.user_id&&localStorage.setItem("user_id",JSON.stringify(t.data.user_id)),t.data.user_name&&localStorage.setItem("user_name",JSON.stringify(t.data.user_name)),n.props.onLogon()):n.setState({error:e.status,loading:!1}))})},n.state={email:"",password:"",submitted:!1,loading:!1,loggedin:!1,error:""},n.handleChange=n.handleChange.bind(Object(i.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(i.a)(n)),n}return Object(o.a)(a,[{key:"validateForm",value:function(){return this.state.email.length>0&&this.state.password.length>0}},{key:"render",value:function(){if(v("role_codes"))return r.a.createElement(Y.a,{to:{pathname:"/"}});var e=this.state,t=e.loading,a=e.error;return r.a.createElement("div",{className:"Login no-padding",style:{height:"100vh",position:"relative"}},r.a.createElement("div",{className:"loginBox"},r.a.createElement("div",{className:"text-center"},r.a.createElement("img",{src:"/logo_white_new.png",width:"200",alt:"/logo_blue.png",className:"img-responsive"})),r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement(S.a,{controlId:"email",bssize:"large"},r.a.createElement(O.a.Label,null,"Email"),r.a.createElement(A.a,{autoFocus:!0,type:"email",value:this.state.email,onChange:this.handleChange})),r.a.createElement(S.a,{controlId:"password",bssize:"large"},r.a.createElement(O.a.Label,null,"Password"),r.a.createElement(A.a,{value:this.state.password,onChange:this.handleChange,type:"password"})),r.a.createElement("button",{bssize:"large",type:"submit",className:"btn btn-primary btn-block",disabled:!this.validateForm()},"Login"),t&&r.a.createElement("img",{src:"data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA==",alt:"Image not found"}),a&&r.a.createElement("div",{className:"alert alert-danger"},a))))}}]),a}(n.Component),J=Object(V.a)(G);function K(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(u.a)(e);if(t){var r=Object(u.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(m.a)(this,a)}}var Q=function(e){Object(d.a)(a,e);var t=K(a);function a(){var e;return Object(s.a)(this,a),e=t.call(this),W.logout(),e}return Object(o.a)(a,[{key:"render",value:function(){return r.a.createElement(Y.a,{to:{pathname:"/login"}})}}]),a}(n.Component),Z=Object(V.a)(Q),X=a(21),$=a(29),ee=a(178),te=a(37),ae=a.n(te),ne=function(e){return P("/api/admin/market",e)},re=a(24),le=a(11),ce=a.n(le),se=a(182),oe=a(187),ie=a(43),de=a(176);function me(e,t){return 0==t?"NA":Math.round(e/t*100)+" %"}function ue(e){e.hasOwnProperty("status")||(e.status=null);var t=Object.keys(e)[0],a=e[t];return void 0==a||null==a||a.constructor!=Object||a.hasOwnProperty("status")||(e[t].status=null),e}function pe(e){if(null==e)return e;var t="",a=e.split("_");for(t=0;t<a.length;t++)a[t]=a[t].charAt(0).toUpperCase()+a[t].slice(1);return a.join(" ")}function _e(e){return le(e,"YYYY-MM-DD").format("DD MMM YYYY")}function he(e){return isNaN(e)&&e?e.charAt(0).toUpperCase()+e.slice(1):e}function fe(e,t,a){return e.filter(function(e){return e[t]==a})}function ve(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"YYYY-MM-DD h:mm a",l=(arguments.length>4&&void 0!==arguments[4]&&arguments[4],ge(e,t,a,n));return r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{className:"hide"},e),l)}function ge(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"YYYY-MM-DD h:mm a",r="DD MMM YYYY";return 2==a&&(r="DD MMM YY"),t&&(r+=" h:mm a"),e instanceof le?e.format(r):null==e?"":le(e,n).format(r)}function ye(e,t){if(null!=e&&null!=t){var a=le.duration(le(e).diff(le(t))),n=a.days(),r=a.hours(),l=a.minutes(),c=(n>0?n+"d ":"")+(r>0?r+"h ":"")+(l>0?l+"m ":"");return""===c?"0m ago":c+"ago"}}function Ee(e){var t=Math.floor(e/60),a=e%60;return"".concat(t," min ").concat(a," sec")}function be(e){return Number(e)}function we(e){return e?e.length:0}function Ne(e){var t="";return e.hasOwnProperty("first_name")&&e.first_name&&(t+=e.first_name),e.hasOwnProperty("middle_name")&&e.midde_name&&(t=t+" "+e.middle_name),e.hasOwnProperty("last_name")&&e.last_name&&(t=t+" "+e.last_name),t}function xe(e,t){return(new Intl.NumberFormat).format(e)+" "+t}function Ce(e){return"enabled"===e?"Disable":"Enable"}function ke(e){return"enabled"===e?"btn btn-danger do_disable":"btn do_enable"}function Se(e){return"in_progress"==e||0==e?"warning":"enabled"===e||"completed"==e?"success":"disabled"===e||"pending"==e||2==e?"danger":1==e?"secondary":"info"}function Oe(e){return"enabled"===e?"E":"D"}function Ae(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return e?e.substring(0,t)+"...":0}function je(e){return Object.keys(e).map(function(t){e[t]=""}),e}function Re(e){return r.a.createElement("span",{style:{float:"right"}},e)}function De(e,t){if(e&&t){var a=new RegExp("/"+t+"+$");return e.replace(a,"")}}function Fe(e){return r.a.createElement(r.a.Fragment,null,e.map(function(e,t){return r.a.createElement("span",{style:{paddingRight:3},key:t},Ze(e,"account_purpose"))}))}function Le(e){var t=e.logotype;return r.a.createElement("div",{style:{height:30,width:60}},r.a.createElement("img",{className:"img-fluid",src:"/img/".concat(t,"_logo_color.png"),alt:t}))}function Pe(e){var t=e.val,a=e.unit,n=e.align_center,l=e.position,c=e.notify,s=e.from,o=e.vs_value,i=e.negativesign,d=(e.type,e.currency);return function(e){if("Infinity"!=t){var m=function(e,t){for(var n=0;n<_.length;n++)if(e>=_[n].divider)return(e/_[n].divider).toFixed(2)+" "+_[n].suffix+" <span style='font-weight:lighter'>"+a+"</span>";return Number(e).toFixed(1)+" <span style='font-weight:lighter,font-size:'7px'>"+a+"</span>"},u="black",p=d||"";e=e||"";u=0==t?"gray":t<0?i?"green":"red":i?"red":s?"green":"black";var _=[{divider:1e9,suffix:"B"},{divider:1e6,suffix:"M"},{divider:1e3,suffix:"K"}];return r.a.createElement(se.a,{key:"tool-tip",placement:l,overlay:r.a.createElement(de.a,{id:"tool-tip"},s?r.a.createElement("b",{style:{fontSize:"13px"}},o?o.toLocaleString("en-GB",{maximumFractionDigits:1})+" "+p:"N/A"):r.a.createElement("b",{style:{fontSize:"13px"}},"object"==typeof t?t:t.toLocaleString("en-GB",{maximumFractionDigits:1})," ",a))},c?r.a.createElement("i",{class:"fa-solid fa-circle-exclamation"}):r.a.createElement("p",{className:"no-margin",style:{fontWeight:600,color:u,fontSize:"14px",textAlign:n?"center":""},dangerouslySetInnerHTML:{__html:e?Math.round(t)+" "+a:s&&t>0?"+"+m(t):m(t)}}))}return"N/A"}(e.noRoundoff)}function Be(e){var t=e.val,a=e.type,n=new Date(t),l=n.getDate(),c=n.getFullYear(),s=n.toLocaleString("default",{month:"long"}),o=n.toLocaleTimeString(void 0,{hour:"2-digit",minute:"2-digit"});return r.a.createElement(r.a.Fragment,null,"date-monthName-year"===a?r.a.createElement("p",{className:"no-margin text-white headerTitle preHeaderpad",style:{fontWeight:600}},"Live Report - ",l+" "+s+" "+c+" ","at"," "+o):r.a.createElement("p",{className:"no-margin text-white headerTitle preHeaderpad",style:{fontWeight:600}},"Report Run Date - ",l+" "+s+" "+c," "))}Date.prototype.addDays=function(e){var t=new Date(this.valueOf);return t.setDate(t.getDate()+e),t};var Me=function(e){return P(D+"/touch",e)},Te=function(e,t){return P("/api/admin/"+e+"/update",t)},He=function(e,t){return P("/api/admin/"+e+"/name_list",t)},qe=function(e,t,a){return P(D+"/"+e+"/"+t,a)},ze=function(e){return P(D+"/common/loan_search_criteria",e)},Ie=function(e){return P(D+"/common/currency_code",e)},We=function(e){return P("/api/admin/org/org_details",e)},Ye=function(e){return P(D+"/common/sms",e)},Ve=function(e){return P(D+"/common/update",e)},Ue=function(e){return P(D+"/user/master_data",e)},Ge=function(e){return P(D+"/common/master_data",e)},Je=function(){var e=v("master_data");if(""!=e)return e;alert("Master Data not configured for the application. Ensure you are using modern browser")},Ke=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return t?Qe(e,t):Je().filter(function(t){return t.data_key===e})},Qe=function(e,t){return Je().filter(function(a){return a.data_key===e&&a.parent_data_code===t})},Ze=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=Je();return null!=t&&(a=Ke(t)),a&&a.length>0&&(a=a.filter(function(t){return t.data_code===e})),""==a&&e&&e.includes("_")?pe(e):""==a?he(e):a&&1===a.length?a[0].data_value:e},Xe=function(e){return P(D+"/common/audit_history",e)},$e=function(e){return P(D+"/common/stmt_imports/search",e)},et=[r.a.createElement("option",{key:"-2",value:"-2"},"[ loading . . . ]")],tt=[r.a.createElement("option",{value:""},"[ No Results ]")],at=[r.a.createElement("option",{key:"",value:""},"choose")],nt=[r.a.createElement("option",{key:"",value:"{}"},"choose")],rt=a(73),lt=a(133);function ct(){ct=function(){return e};var e={},t=Object.prototype,a=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",l=n.asyncIterator||"@@asyncIterator",c=n.toStringTag||"@@toStringTag";function s(e,t,a){return Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(k){s=function(e,t,a){return e[t]=a}}function o(e,t,a,n){var r=t&&t.prototype instanceof m?t:m,l=Object.create(r.prototype),c=new N(n||[]);return l._invoke=function(e,t,a){var n="suspendedStart";return function(r,l){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===r)throw l;return C()}for(a.method=r,a.arg=l;;){var c=a.delegate;if(c){var s=E(c,a);if(s){if(s===d)continue;return s}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===n)throw n="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);n="executing";var o=i(e,t,a);if("normal"===o.type){if(n=a.done?"completed":"suspendedYield",o.arg===d)continue;return{value:o.arg,done:a.done}}"throw"===o.type&&(n="completed",a.method="throw",a.arg=o.arg)}}}(e,a,c),l}function i(e,t,a){try{return{type:"normal",arg:e.call(t,a)}}catch(k){return{type:"throw",arg:k}}}e.wrap=o;var d={};function m(){}function u(){}function p(){}var _={};s(_,r,function(){return this});var h=Object.getPrototypeOf,f=h&&h(h(x([])));f&&f!==t&&a.call(f,r)&&(_=f);var v=p.prototype=m.prototype=Object.create(_);function g(e){["next","throw","return"].forEach(function(t){s(e,t,function(e){return this._invoke(t,e)})})}function y(e,t){var n;this._invoke=function(r,l){function c(){return new t(function(n,c){!function n(r,l,c,s){var o=i(e[r],e,l);if("throw"!==o.type){var d=o.arg,m=d.value;return m&&"object"==typeof m&&a.call(m,"__await")?t.resolve(m.__await).then(function(e){n("next",e,c,s)},function(e){n("throw",e,c,s)}):t.resolve(m).then(function(e){d.value=e,c(d)},function(e){return n("throw",e,c,s)})}s(o.arg)}(r,l,n,c)})}return n=n?n.then(c,c):c()}}function E(e,t){var a=e.iterator[t.method];if(void 0===a){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method))return d;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var n=i(a,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,d;var r=n.arg;return r?r.done?(t[e.resultName]=r.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):r:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function b(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function w(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function N(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(b,this),this.reset(!0)}function x(e){if(e){var t=e[r];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,l=function t(){for(;++n<e.length;)if(a.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return l.next=l}}return{next:C}}function C(){return{value:void 0,done:!0}}return u.prototype=p,s(v,"constructor",p),s(p,"constructor",u),u.displayName=s(p,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===u||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,s(e,c,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},g(y.prototype),s(y.prototype,l,function(){return this}),e.AsyncIterator=y,e.async=function(t,a,n,r,l){void 0===l&&(l=Promise);var c=new y(o(t,a,n,r),l);return e.isGeneratorFunction(a)?c:c.next().then(function(e){return e.done?e.value:c.next()})},g(v),s(v,c,"Generator"),s(v,r,function(){return this}),s(v,"toString",function(){return"[object Generator]"}),e.keys=function(e){var t=[];for(var a in e)t.push(a);return t.reverse(),function a(){for(;t.length;){var n=t.pop();if(n in e)return a.value=n,a.done=!1,a}return a.done=!0,a}},e.values=x,N.prototype={constructor:N,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!e)for(var t in this)"t"===t.charAt(0)&&a.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(a,n){return c.type="throw",c.arg=e,t.next=a,n&&(t.method="next",t.arg=void 0),!!n}for(var r=this.tryEntries.length-1;r>=0;--r){var l=this.tryEntries[r],c=l.completion;if("root"===l.tryLoc)return n("end");if(l.tryLoc<=this.prev){var s=a.call(l,"catchLoc"),o=a.call(l,"finallyLoc");if(s&&o){if(this.prev<l.catchLoc)return n(l.catchLoc,!0);if(this.prev<l.finallyLoc)return n(l.finallyLoc)}else if(s){if(this.prev<l.catchLoc)return n(l.catchLoc,!0)}else{if(!o)throw new Error("try statement without catch or finally");if(this.prev<l.finallyLoc)return n(l.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&a.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var l=r;break}}l&&("break"===e||"continue"===e)&&l.tryLoc<=t&&t<=l.finallyLoc&&(l=null);var c=l?l.completion:{};return c.type=e,c.arg=t,l?(this.method="next",this.next=l.finallyLoc,d):this.complete(c)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.finallyLoc===e)return this.complete(a.completion,a.afterLoc),w(a),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.tryLoc===e){var n=a.completion;if("throw"===n.type){var r=n.arg;w(a)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,a){return this.delegate={iterator:x(e),resultName:t,nextLoc:a},"next"===this.method&&(this.arg=void 0),d}},e}function st(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(u.a)(e);if(t){var r=Object(u.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(m.a)(this,a)}}var ot=function(e){Object(d.a)(a,e);var t=st(a);function a(){var e;if(Object(s.a)(this,a),(e=t.call(this)).admin_roles=["super_admin","market_admin","ops_admin","it_admin"],e.fillSelect=function(t,a){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:["id","name"];t&&("success"===t.status?e.getSelectOptionsFromResult(t.data,a,n):alert(t.message+"\n"+JSON.stringify(t.data)))},e.add_status=function(e){return ue(e)},e.setOptionsToStateFromApi=function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=t;null==a?a=e.def_req:a.hasOwnProperty("associated_with")&&(n=a.associated_with+"_"+t),He(t,e.req(a)).then(function(t){e.resp(t),t&&("success"===t.status?e.getSelectOptionsFromResult(t.data,n):alert(t.message+"\n"+JSON.stringify(t.data)))})},e.setOptionsListToStateFromAppApi=function(t,a){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:["id","name"],l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;null==l&&(l=a),qe(t,a,e.req(n)).then(function(t){e.resp(t),t&&("success"===t.status?e.getSelectOptionsFromResult(t.data.list,l,r):alert(t.message+"\n"+JSON.stringify(t.data)))})},e.getSelectOptionsFromResult=function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:["id","name"],l=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],c=[];if(t.length>0){var s=n[0],o=n[1],i=!1;c=t.map(function(t,n){var l=t[s];return"obj"==s&&(l=JSON.stringify(l),i=!0),t.selected&&(e.selected[a]=l),r.a.createElement("option",{key:n,value:l},t[o])}),a+="_dd",c=0==l?Object(re.a)(c):[].concat(i?Object(re.a)(nt):Object(re.a)(at),Object(re.a)(c))}else c=tt;return null!=a&&e.setState(Object(k.a)({},a,c)),c},e.handleAlert=function(){e.setState({modal_show:!1})},e.vaildationAlert=function(t){return r.a.createElement(r.a.Fragment,null,r.a.createElement(rt.a,{show:t,variant:"danger",size:"l"},r.a.createElement(rt.a.Header,null,r.a.createElement(rt.a.Title,null,"Alert")),r.a.createElement(rt.a.Body,null,r.a.createElement("h6",null,"Please enter required fields")),r.a.createElement(rt.a.Footer,null,r.a.createElement(lt.a,{onClick:e.handleAlert,variant:"danger"},"Ok"))))},e.getMultiSelectOptions=function(e){var t=Ke(e);if(t.length>0)return t.map(function(t,a){return{value:t.data_code,label:t.data_value,id:e+"_"+a}})},e.getSelectOptions=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=Ke(e,a),l=[];if(n.length>0)return l=n.map(function(e,t){return r.a.createElement("option",{key:t,value:e.data_code},e.data_value)}),t&&(l=[].concat(Object(re.a)(at),Object(re.a)(l))),l},e.selected={},null==v("access_token"))return alert("You have been signed out. Please login again"),Object(m.a)(e);var n=v("market");null==n?alert("It looks like Market is not configured for the logged in user \nOR\n User is not assigned to a Market."):(e.country_code=n.country_code,e.lender_code="UGA"==e.country_code?"UFLW":"RWA"==e.country_code?"RFLW":null,e.currency_code=n.currency_code,e.time_zone=n.time_zone);var l=v("acc_prvdr_code");return l&&(e.acc_prvdr_code=l),e.def_req={country_code:e.country_code,status:"enabled"},e}return Object(o.a)(a,[{key:"server_time",value:function(){var e=this;return Me({country_code:this.country_code,time_zone:this.time_zone}).then(function(t){if(e.resp(),!t)return!1;"success"===t.status&&e.setState({server_time:t})})}},{key:"touch",value:function(){return Me({country_code:this.country_code,time_zone:this.time_zone}).then(function(e){return!!e&&("success"!==e.status&&(w(),b(),window.location.reload("/login"),!0))})}},{key:"touch_async",value:function(){var e=Object(j.a)(ct().mark(function e(){var t,a;return ct().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=!1,e.next=3,B(D+"/touch",{country_code:this.country_code,time_zone:this.time_zone});case 3:if(a=e.sent){e.next=6;break}return e.abrupt("return",!0);case 6:return"success"===a.status?t=!1:(w(),b(),alert("Session Expired"),window.location.reload("/login"),t=!0),e.abrupt("return",t);case 9:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"resp",value:function(e){this.setState({calling_api:!1})}},{key:"req",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return this.setState({calling_api:!0}),this.append_request(Object(X.a)({},e),this,t,a)}},{key:"append_request",value:function(e,t,a,n){return null==e&&(e={}),e.hasOwnProperty("country_code")||"super_admin"!==v("role_codes")&&"it_admin"!==v("role_codes")||(e.country_code=t.country_code),null!=v("acc_prvdr_code")?e.acc_prvdr_code=v("acc_prvdr_code"):!e.hasOwnProperty("acc_prvdr_code")&&null!=n&&e[n].hasOwnProperty("acc_prvdr_code")&&(e.acc_prvdr_code=e[n].acc_prvdr_code,delete e[n].acc_prvdr_code),e.hasOwnProperty("time_zone")||(e.time_zone=t.time_zone),e=ue(e)}}]),a}(n.Component);function it(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(u.a)(e);if(t){var r=Object(u.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(m.a)(this,a)}}var dt=function(e){Object(d.a)(a,e);var t=it(a);function a(){var e;return Object(s.a)(this,a),(e=t.call(this)).handleComponentChange=function(t,a){var n=t.target.id,r=t.target.value;console.log(n,r,a,e.state[a]);var l=e.state[a];l[n]=r,e.setState(Object(k.a)({},a,l))},e.handleComponentReset=function(t,a){e.setState(Object(k.a)({},a,{}))},e.handleComponentElemetChange=function(t,a,n){var r=e.state[t];r[a]=n,e.setState(Object(k.a)({},t,r))},e.handleResetOrgNAddr=function(t){var a=je(e.state.org),n=je(e.state.reg_address);e.setState({org:a,reg_address:n,div_style:"show_div"})},e.handleOrgChange=function(t){var a=je(e.state.org),n=je(e.state.reg_address);e.setState({org:a,reg_address:n,div_style:"disable_div"});var r={id:t.target.value};We(e.req(r)).then(function(t){if(t&&null!=t.data){var a=t.data,n=a.reg_address;e.setState({org:a,reg_address:n})}})},e.handleComponentChange=e.handleComponentChange.bind(Object(i.a)(e)),e.handleComponentReset=e.handleComponentReset.bind(Object(i.a)(e)),e}return Object(o.a)(a)}(ot);function mt(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(u.a)(e);if(t){var r=Object(u.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(m.a)(this,a)}}var ut=function(e){Object(d.a)(a,e);var t=mt(a);function a(){var e;return Object(s.a)(this,a),(e=t.call(this)).non_data_fields=["div_style","show_button_style","edit_button_style","edit_mode"],e.handleChange=function(t){console.log(t,"event on flow component"),console.log("this.props.id"+e.props.id),e.props.onComponentChange(t,e.props.id),e.handleChangeForEdit(t)},e.toUpperHandleChange=function(t){t.target.value=t.target.value.toUpperCase(),e.handleChange(t)},e.handleChangeForEdit=function(t){if(!1!==e.props.editable&&e.state.edit_mode){var a,n=t.target.id,r=t.target.value;console.log(n,r),e.setState((a={},Object(k.a)(a,n,r),Object(k.a)(a,"save_button_style","show_button"),a))}},e.handleElementReset=function(t){e.handleElementChange(t,null)},e.handleElementChange=function(t,a){e.props.onComponentElementChange(e.props.id,t,a)},e.handleSelfChangeState=function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=t.target.id;null==a&&(a=t.target.value),e.setState(Object(k.a)({},n,a))},e.setChangeToState=function(t){var a=e.props.id,n=t.target.id,r=t.target.value,l=e.state[a];l[n]=r,e.setState(Object(k.a)({},a,l))},e.setChangeToProps=function(t){var a=e.props.id,n=t.target.id,r=t.target.value,l=e.props[a];l[n]=r,e.setState(Object(k.a)({},a,l))},e.handleDateChange=function(t,a){var n={};a=ce()(a).format("YYYY-MM-DD"),n.target={id:t,value:a},e.handleChange(n)},e.handleDateTimeChange=function(t,a){var n={};a=ce()(a).format("YYYY-MM-DD HH:mm:ss"),n.target={id:t,value:a},e.handleChange(n)},e.handleSelfChange=function(t){var a=e.props.id,n=t.target.id,r=t.target.value,l=e[a];l[n]=r,e[a]=l},e.handleSelfDateChange=function(t,a){var n={};a=ce()(a).format("YYYY-MM-DD"),n.target={id:t,value:a},e.handleSelfChange(n)},e.handleMakeCopy=function(t){return function(a){e.props.onComponentChange(a,e.props.id);var n=a.target.value;document.getElementById(t).value=n,e.props.data[t]=n}},e.load_dp_rel_mgr=function(t){e.setState({data_prvdr_rel_mgr_dd:null});var a=v("acc_prvdr_code");e.setOptionsToStateFromApi("rel_mgr",Object(X.a)({},e.def_req,{associated_with:"acc_prvdr",associated_entity_code:a}))},e.load_flow_rel_mgr=function(t){e.setState({flow_rel_mgr_dd:null});e.setOptionsToStateFromApi("rel_mgr",Object(X.a)({},e.def_req,{associated_with:"flow"}))},e.load_acc_prvdrs=function(){e.setState({acc_prvdrs_dd:null}),e.setOptionsListToStateFromAppApi("common","list",e.def_req,["acc_prvdr_code","name"],"acc_prvdrs")},e.handleReset=function(t){e.props.onComponentReset(t,e.props.id)},e.handleEdit=function(t){e.setState({edit_mode:!0}),e.setState({edit_button_style:"hide_button"}),e.setState({save_button_style:"disable_div"}),e.setState({div_style:""})},e.handleSave=function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=e.getRequest();Te(e.state.comp_name,e.req(n)).then(function(t){t&&("success"===t.status?(e.setState({div_style:"disable_div"}),e.setState({save_button_style:"hide_button"}),e.setState({edit_button_style:"show_button"}),alert(t.message),"reload"==a&&window.location.reload()):alert(t.message+"\n"+JSON.stringify(t.data)))})},e.getRequest=function(){var t=e.state;return t.id=e.props.data.id,t=Object(k.a)({},e.state.comp_name,t)},e.handleChange=e.handleChange.bind(Object(i.a)(e)),void 0==Object({NODE_ENV:"production",PUBLIC_URL:"",REACT_APP_ADMIN_API_ROOT:"/api/admin",REACT_APP_APP_API_ROOT:"/api/app",REACT_APP_CORE_API_ROOT:"/api/core",REACT_APP_URL:"http://app.flowglobal.net"}).REACT_APP_USE_ROOT_ONLY_DEV?e.root="":e.root="http://localhost:8000",e}return Object(o.a)(a,[{key:"componentWillMount",value:function(){"view"===this.props.mode?(this.setState({div_style:"disable_div"}),this.setState({edit_button_style:"show_button"}),this.setState({save_button_style:"hide_button"})):(this.setState({div_style:""}),this.setState({edit_button_style:"hide_button"}),this.setState({save_button_style:"hide_button"})),("disabled"===this.props.mode||"view"===this.props.mode&&"false"===this.props.editable)&&(this.setState({div_style:"disable_div"}),this.setState({button_style:"hide_button"}))}}]),a}(ot),pt=a(177);function _t(e,t){return ht(e)?"Each day":t+" days"}function ht(e){return"each_day"===e||"1"===e}function ft(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=new Intl.NumberFormat;return t?a.format(e)+" "+t:a.format(e)}function vt(e){var t="";return ht(arguments.length>1&&void 0!==arguments[1]?arguments[1]:null)&&(t=" (max duration)"),"1"==e?e+" day"+t:e+" days"+t}function gt(e,t){var a=ft(yt(e),t),n="Percent"===e.flow_fee_type?e.flow_fee+"% | ":"(FLAT) "+ft(e.flow_fee,t),r="";return"Percent"===e.flow_fee_type&&(r+=a),ht(e.flow_fee_duration)&&(r+=" / day"),n+r}function yt(e){return wt(e)*(e.flow_fee/100)}function Et(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a="";return ht(e.flow_fee_duration)&&(a=" *"),ft(bt(e),t)+a}function bt(e){var t=function(e){var t=e.flow_fee;return"Percent"===e.flow_fee_type&&(t=yt(e)),ht(e.flow_fee_duration)&&(t*=e.duration),Math.round(t)}(e);return wt(e)+t}function wt(e){return e.hasOwnProperty("max_loan_amount")?e.max_loan_amount:e.hasOwnProperty("loan_principal")?e.loan_principal:void 0}function Nt(e){return r.a.createElement("input",{id:e.id,type:"button",onClick:e.onClick,value:y(e.entity),className:"btn-sm btn-primary"})}function xt(e){var t=E(e.entity,"edit");return r.a.createElement(r.a.Fragment,null,t&&r.a.createElement("input",{type:"button",class:"btn btn-secondary btn-std",onClick:e.onClick,value:"Edit"}))}function Ct(e){return r.a.createElement(se.a,{overlay:r.a.createElement(de.a,{id:"tooltip"},e.biz_name,"/",e.cust_name)},r.a.createElement("span",{className:"d-inline-block"},e.acc_number))}function kt(e){var t="FA Amount :"+ft(e.loan.loan_principal,e.currency_code)+"\nRepayment :"+Et(e.loan,e.currency_code);return r.a.createElement(se.a,{overlay:r.a.createElement(de.a,{id:"tooltip"},t)},r.a.createElement("span",{className:"d-inline-block"},e.loan.product_name))}function St(e,t){var a=e.prod_csf_values,n=e.cs_model_code,l=e.result_configs;if(null!=t&&void 0!=t&&""!=t)var c=fe(t,"csf_type","meta_txn_start_date")[0],s=fe(t,"csf_type","meta_txn_end_date")[0],o=fe(t,"csf_type","meta_txn_days")[0],i=fe(t,"csf_type","meta_cal_days")[0],d=o.csf_normal_value+" days",m=[{code:"Txn Dates",value:ge(c.csf_normal_value,!1)+" to "+ge(s.csf_normal_value,!1)+" ("+i.csf_normal_value+" days)"},{code:"Nett Txn Days",value:d}].map(function(e,t){return r.a.createElement("div",null,r.a.createElement("span",{className:"cust_font"},"\xa0\xa0\xa0",Ze(e.code)," : ",e.value))});if(l)var u=l.map(function(e,t){return r.a.createElement("div",null,r.a.createElement("span",{className:"cust_font"},"\xa0\xa0\xa0 Score ",e.score_from," to ",e.score_to," - ",Ze(e.score_result_code)))});if(null!=a||void 0!=a){var p=a.map(function(e,t){return r.a.createElement("div",null,r.a.createElement("span",{className:"cust_font"},"\xa0\xa0\xa0",e.weightage,"% - ",Ze(e.csf_type)," : ",e.csf_gross_value," (",e.csf_value,"/10)"))});return r.a.createElement("div",null,r.a.createElement("b",{className:"cust_font"},"Score Model Name - ",Ze(n)," "),r.a.createElement("br",null),r.a.createElement("b",{className:"cust_font"},"Eligibility Criteria"),u,r.a.createElement("hr",null),r.a.createElement("b",{className:"cust_font"},"Score Factor Values"),p,m&&r.a.createElement(r.a.Fragment,null,r.a.createElement("hr",null),r.a.createElement("b",{className:"cust_font"},"Note"),m))}return r.a.createElement("label",null,e.result_msg)}function Ot(e){return console.log(e.loan_product.cust_score),console.log(e.loan_product),console.log(e.meta_data),r.a.createElement(se.a,{trigger:"click",overlay:r.a.createElement(oe.a,null,St(e.loan_product,e.meta_data))},r.a.createElement("h4",null,r.a.createElement(pt.a,{className:"badge_style",variant:(t=e.loan_product.result_code,"eligible"===t?"success":"requires_flow_rm_approval"===t?"primary":"danger"),pill:!0},e.loan_product.cust_score||"NA")));var t}function At(e){var t=e.result_msg;return"eligible"===e.result_code&&(t=""),r.a.createElement(r.a.Fragment,null,t&&r.a.createElement(se.a,{overlay:r.a.createElement(de.a,{id:"tooltip"},t)},r.a.createElement("label",{style:{paddingTop:"5px",color:"red"}},"Result Info")))}function jt(e){return r.a.createElement("div",null,void 0==e.overlay?r.a.createElement("span",{className:"d-inline-block"},e.base):r.a.createElement(se.a,{trigger:"click",overlay:r.a.createElement(oe.a,null,e.overlay)},r.a.createElement("span",{className:"d-inline-block"},e.base)))}function Rt(e){return r.a.createElement("div",null,e.full_text?r.a.createElement(se.a,{overlay:r.a.createElement(de.a,{id:"tooltip"},e.full_text," / ",e.overlay)},r.a.createElement("span",{className:"d-inline-block"},e.no_reduce?e.full_text:Ae(e.full_text))):r.a.createElement("span",{className:"d-inline-block"},"NA"))}function Dt(e){return r.a.createElement("div",null,e.full_text?r.a.createElement(se.a,{overlay:r.a.createElement(de.a,{id:"tooltip"},e.full_text)},r.a.createElement("span",{className:"d-inline-block"},e.no_reduce?e.full_text:Ae(e.full_text))):r.a.createElement("span",{className:"d-inline-block"},"NA"))}function Ft(e){var t,a=e.data,n=e.timedata,l=e.item,c=e.action,s=e.time_limit,o=6e4*s[0],i=6e4*s[1];if("next_action_conf"===l)var d=null==a.loan_approved_date?a.loan_appl_date:a.loan_approved_date;else if("first_attempt_time"===l)d=a.first_attempt_time;else if("last_attempt_time"===l)d=a.attempt_time;else if("last_updated_at"===l)d=a.updated_at;else d="approved"===l?a.loan_approved_date:a.loan_appl_date;var m=!1,u=!1,p=!1;(t=le.duration(le(n).diff(le(d))))._milliseconds<o?(m=!1,u=!1,p=!0):t._milliseconds>=o&&t._milliseconds<=i?(m=!0,u=!1):t._milliseconds>i&&(m=!1,u=!0);var _=null;return"last_updated_at"!==l&&(_=a.loan_approver_name.split(" ")),r.a.createElement(r.a.Fragment,null,"applied"===l&&r.a.createElement(r.a.Fragment,null,p&&r.a.createElement("span",null,ye(n,a.loan_appl_date)),m&&r.a.createElement("span",{className:"text-redDark"},ye(n,a.loan_appl_date)),u&&r.a.createElement("span",{className:"text-redDark"},ye(n,a.loan_appl_date),r.a.createElement("i",{style:{paddingLeft:5},class:"fa-solid fa-triangle-exclamation excess_time_blinkerTable"}))),"approved"===l&&r.a.createElement(r.a.Fragment,null,p&&r.a.createElement("span",null,ye(n,a.loan_approved_date)),m&&r.a.createElement("span",{className:"text-redDark"},ye(n,a.loan_approved_date)),u&&r.a.createElement("span",{className:"text-redDark"},ye(n,a.loan_approved_date),r.a.createElement("i",{style:{paddingLeft:5},class:"fa-solid fa-triangle-exclamation excess_time_blinkerTable"}))),"first_attempt_time"===l&&r.a.createElement(r.a.Fragment,null,p&&r.a.createElement("span",null,ye(n,a.first_attempt_time)),m&&r.a.createElement("span",{className:"text-redDark"},ye(n,a.first_attempt_time)),u&&r.a.createElement("span",{className:"text-redDark"}," ",ye(n,a.first_attempt_time),r.a.createElement("i",{style:{paddingLeft:5},class:"fa-solid fa-triangle-exclamation excess_time_blinkerTable"}))),"last_attempt_time"===l&&r.a.createElement(r.a.Fragment,null,p&&r.a.createElement("span",null,ye(n,a.attempt_time)),m&&r.a.createElement("span",{className:"text-redDark"},ye(n,a.attempt_time)),u&&r.a.createElement("span",{className:"text-redDark"},ye(n,a.attempt_time),r.a.createElement("i",{style:{paddingLeft:5},class:"fa-solid fa-triangle-exclamation excess_time_blinkerTable"}))),"next_action"===l&&r.a.createElement(r.a.Fragment,null,m||u?r.a.createElement("span",{className:"text-uppercase"},r.a.createElement("i",{class:"fa-solid fa-phone text-white"},"\xa0\xa0"),_[0]):r.a.createElement("span",null,_[0])),"next_action_conf"===l&&r.a.createElement(r.a.Fragment,null,m||u?r.a.createElement("div",{className:"text-center"},r.a.createElement(lt.a,{className:"btn-std",onClick:function(){return c(a.cust_id,a.loan_doc_id)}},"Get Phone Confirmation")):null),"last_updated_at"===l&&r.a.createElement(r.a.Fragment,null,p&&r.a.createElement("span",null,ye(n,a.updated_at)),m&&r.a.createElement("span",{className:"text-redDark"},ye(n,a.updated_at)),u&&r.a.createElement("span",{className:"text-redDark"},ye(n,a.updated_at),r.a.createElement("i",{style:{paddingLeft:5},class:"fa-solid fa-triangle-exclamation excess_time_blinkerTable"}))))}function Lt(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(u.a)(e);if(t){var r=Object(u.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(m.a)(this,a)}}var Pt=function(e){Object(d.a)(a,e);var t=Lt(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={comp_name:"market"},e.handleChange1=function(t){var a={country_code:t.target.value};Ie(e.req(a)).then(function(t){t&&(e.props.data.currency_code=t.data[0].currency_code,e.setState({currency_code:t.data[0].currency_code}))})},e}return Object(o.a)(a,[{key:"componentWillMount",value:function(){Object($.a)(Object(u.a)(a.prototype),"componentWillMount",this).call(this),this.setOptionsListToStateFromAppApi("common","country"),this.setOptionsListToStateFromAppApi("common","currency")}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{id:""},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-2"},r.a.createElement("h4",null,this.props.title?this.props.title:"Market Details")),r.a.createElement("div",{className:this.state.button_style},r.a.createElement("div",{className:"col-md-1 ".concat(this.state.edit_button_style)},r.a.createElement(xt,{entity:"market",onClick:this.handleEdit})),r.a.createElement("div",{className:"col-md-1 ".concat(this.state.save_button_style)},r.a.createElement("input",{onClick:this.handleSave,type:"button",className:"btn btn-success",value:"Save"})))),r.a.createElement("div",{className:this.state.div_style},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-3"},r.a.createElement("span",null,"Country"),r.a.createElement("font",{className:"text-danger"},"   *  "),r.a.createElement("select",{id:"country_code",value:this.props.data.country_code,onChange:function(t){e.handleChange(t),e.handleChange1(t)},required:"required",className:"form-control"},this.state.country_dd||et)),r.a.createElement("div",{className:"col-md-3"},r.a.createElement("span",null,"Currency"),r.a.createElement("font",{className:"text-danger"},"   *  "),r.a.createElement("select",{id:"currency_code",value:this.props.data.currency_code,onChange:this.handleChange,className:"form-control",required:"required"},this.state.currency_dd||et)),r.a.createElement("div",{className:"col-md-3"},r.a.createElement("span",null,"ISD Code"),r.a.createElement("font",{className:"text-danger"},"   *  "),r.a.createElement("input",{type:"number",id:"isd_code",value:this.props.data.isd_code,maxLength:5,onChange:this.handleChange,required:!0,className:"form-control"})))))}}]),a}(ut);function Bt(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(u.a)(e);if(t){var r=Object(u.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(m.a)(this,a)}}var Mt=function(e){Object(d.a)(a,e);var t=Bt(a);function a(){var e;return Object(s.a)(this,a),(e=t.call(this)).state={comp_name:"address",addr_config:[],borrower_country:"disable_div"},e.handleCountryChange=function(t){e.handleReset(),e.addr_country_code=t.target.value,e.props.data.country_code=t.target.value,e.loadAddressUI(t.target.value),e.handleChange(t)},e.process=function(t,a,n){var r;r=a+", "+n,e.setState({gps_error:!1,gps_lat:a,gps_lon:n,gps_value:r})},e.success=function(t){var a=t.coords.latitude,n=t.coords.longitude,r=a+", "+n;e.setState({gps_error:!1,gps_lat:a,gps_lon:n,gps_value:r,loading:null});var l={target:{id:"gps",value:r}};e.handleChange(l)},e.error=function(t){e.setState({gps_error:"Unable to retrieve your location",loading:null})},e.locateMe=function(t){navigator.geolocation?(navigator.geolocation.getCurrentPosition(e.success,e.error,{enableHighAccuracy:!0,timeout:5e4}),e.setState({loading:"Finding your location..."})):e.setState({gps_error:"Geolocation is not supported by your browser"})},e.mounted=0,e.success=e.success.bind(Object(i.a)(e)),e.process=e.process.bind(Object(i.a)(e)),e}return Object(o.a)(a,[{key:"componentWillMount",value:function(){Object($.a)(Object(u.a)(a.prototype),"componentWillMount",this).call(this),this.setOptionsListToStateFromAppApi("common","country")}},{key:"componentDidMount",value:function(){"view"==this.props.mode?(this.props.data.country_code=this.country_code,this.loadAddressUI(this.props.data.country_code),this.addr_country_code=this.props.data.country_code):this.loadAddressUI(this.country_code)}},{key:"loadAddressUI",value:function(e){var t=this;if(void 0!==e){this.setState({addr_config:[],loading_addr:"LOADING ADDRESS FORM. PLEASE WAIT"});var a;(a=this.req({country_code:e,status:"enabled"}),P("/api/admin/address/addr_config",a)).then(function(a){if(a)if(t.setState({loading_addr:null}),"success"==a.status&&a.data.addr_config.length>0)if(t.setState({addr_config:a.data.addr_config}),t.selects=t.getAllSelects(a.data.addr_config,t.props.mode),"view"==t.props.mode||"create"==t.props.mode)t.fillAllSelects(t.selects,e,"enabled");else{var n=a.data.addr_config[0].field_code;t.setState(Object(k.a)({},n+"_dd",et)),t.setOptionsListToStateFromAppApi("common","dropdown",t.req({country_code:e,status:"enabled",field_code:n}),["data_code","data_value"],n)}else alert("Please ensure address form is configured correctly for "+e)})}else this.setState({addr_config:[],loading_addr:"NO COUNTRY TO LOAD"})}},{key:"createUI",value:function(){var e=this,t=(arguments.length>0&&void 0!==arguments[0]&&arguments[0],this.state.addr_config.map(function(t,a){var n=null;return"gps"==t.field_code&&(n=e.createGps(t.field_code,a)),"text"==t.field_type?n=e.createText(t.field_code,a):"select"==t.field_type&&(n=e.createSelect(t.field_code,a)),r.a.createElement("div",{className:"col-md-3"},r.a.createElement("span",{className:"viewCus_label"},t.field_name),e.getMandatoryTag(t.field_type,t.validation_rules),n)}));return t.push(r.a.createElement("div",{className:"col-md-3"},r.a.createElement("button",{id:"gps",type:"button",className:"btn-sm btn-light",onClick:this.locateMe},"Locate Me"),this.state.gps_error&&r.a.createElement("p",null,this.state.gps_error))),r.a.createElement("div",null,r.a.createElement("div",{className:"row no-margin align-items-end labelTopgap"},t.shift(),t.shift(),t.shift(),t.shift()),r.a.createElement("div",{className:"row no-margin align-items-end labelTopgap"},t.shift(),t.shift(),t.shift(),t.shift()),r.a.createElement("div",{className:"row no-margin align-items-center labelTopgap",style:{paddingBottom:23}},t.shift(),t.shift(),t.shift(),t.shift()))}},{key:"createText",value:function(e,t){return r.a.createElement("input",{id:e,value:this.props.data[e],onChange:this.handleChange.bind(this),className:"form-control",type:"text",required:"required"})}},{key:"createGps",value:function(e,t){return r.a.createElement(r.a.Fragment,null,this.state.loading&&r.a.createElement("p",null,this.state.loading),this.state.gps_value?r.a.createElement("p",null,r.a.createElement("b",null,r.a.createElement("span",null,"Lat, Lon: ",this.state.gps_value))):r.a.createElement("p",null,r.a.createElement("b",null,r.a.createElement("span",null,"Lat, Lon: ",this.props.data[e]))))}},{key:"createSelect",value:function(e,t){return r.a.createElement("div",null,r.a.createElement("select",{id:e,value:this.props.data[e],onChange:this.loadChild.bind(this),className:"form-control",type:"text",required:"required"},this.state[e+"_dd"]))}},{key:"getMandatoryTag",value:function(e,t){if("select"===e||"required"===t)return r.a.createElement("font",{className:"text-danger"},"   *  ")}},{key:"fillAllSelects",value:function(e,t,a){var n=this,r=null;e.forEach(function(e){var l,c=e.field_code,s=null;r&&["district","country"].includes(c)?(l=n.props.data[r.field_code],s={country_code:t,status:a,field_code:c,parent_data_code:l}):s={country_code:t,status:a,field_code:c},n.setOptionsListToStateFromAppApi("common","dropdown",n.req(s),["data_code","data_value"],e.field_code),r=e})}},{key:"getAllSelects",value:function(e,t){var a=this,n=[];return e.forEach(function(e){if("select"===e.field_type){n.push(e);var r,l=e.field_code;r="view"==t?et:[],a.setState(Object(k.a)({},l+"_dd",r))}}),n}},{key:"loadChild",value:function(e){this.handleChange(e);var t=e.target.id;this.getChildFieldCode(t);var a=this.child_field_code;if(null!=a){this.setState(Object(k.a)({},a+"_dd",et));var n=e.target.value,r={country_code:this.country_code,status:"enabled",field_code:a,parent_data_code:n};this.setOptionsListToStateFromAppApi("common","dropdown",this.req(r),["data_code","data_value"],a)}}},{key:"getChildFieldCode",value:function(e){var t=this;this.state.addr_config.forEach(function(a){a.field_code===e&&(t.child_field_code=a.child_field_code)})}},{key:"render",value:function(){return r.a.createElement("div",{id:""},r.a.createElement("div",{className:"row floatAdvancetitleBox agreementDateHeaderBox align-items-center no-margin"},r.a.createElement("div",{className:"col-md-4"},r.a.createElement("h4",{className:"no-margin headerTitle"},this.props.title?this.props.title:"")),r.a.createElement("div",{className:"col-md-1 ".concat(this.state.edit_button_style)},r.a.createElement(xt,{entity:this.props.entity,onClick:this.handleEdit})),r.a.createElement("div",{className:"col-md-1 ".concat(this.state.save_button_style)},r.a.createElement("input",{onClick:this.handleSave,type:"button",className:"btn btn-success btn-std",value:"Save"}))),r.a.createElement("div",{className:this.state.div_style},r.a.createElement("div",{className:"row no-margin labelTopgap align-items-end"},r.a.createElement("div",{className:"col-md-3"},r.a.createElement("span",{className:"viewCus_label"},"Country"),r.a.createElement("font",{className:"text-danger"},"   *  "),this.props.screen?r.a.createElement("div",{className:this.state.borrower_country},r.a.createElement("input",{type:"text",id:"country_code",value:this.country_code,className:"form-control"})):r.a.createElement("select",{id:"country_code",value:this.props.data.country_code,onChange:this.handleCountryChange.bind(this),required:"required",className:"form-control"},this.state.country_dd||et))),this.createUI(this.state.gps_value),this.state.loading_addr))}}]),a}(ut),Tt=a(20),Ht=a.n(Tt);function qt(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(u.a)(e);if(t){var r=Object(u.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(m.a)(this,a)}}var zt=function(e){Object(d.a)(a,e);var t=qt(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={org:null,comp_name:"org",dropdown_div_style:"disable_div"},e}return Object(o.a)(a,[{key:"componentWillMount",value:function(){Object($.a)(Object(u.a)(a.prototype),"componentWillMount",this).call(this)}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{id:""},r.a.createElement("div",{className:"row mt-4"},r.a.createElement("div",{className:"col-md-4"},r.a.createElement("h4",null,this.props.title?this.props.title:"Organisation Details")),r.a.createElement("div",{className:"col-md-1 ".concat(this.state.edit_button_style)},r.a.createElement(xt,{entity:this.props.entity,onClick:this.handleEdit})),r.a.createElement("div",{className:"col-md-1 ".concat(this.state.save_button_style)},r.a.createElement("input",{onClick:this.handleSave,type:"button",className:"btn btn-success",value:"Save"}))),r.a.createElement("div",{className:this.state.div_style},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-3"},r.a.createElement("span",null,"General Name"),r.a.createElement("font",{className:"text-danger"},"   *  "),r.a.createElement("input",{id:"name",value:this.props.data.name,onChange:this.toUpperHandleChange,onKeyUp:this.handleMakeCopy("inc_name"),className:"form-control",type:"text",required:"required"})),r.a.createElement("div",{className:"col-md-3"},r.a.createElement("span",null,"Name of Incorporation"),r.a.createElement("input",{id:"inc_name",value:this.props.data.inc_name,onChange:this.handleChange,className:"form-control",type:"text"})),r.a.createElement("div",{className:"col-md-3"},r.a.createElement("span",null,"Incorporation Number"),r.a.createElement("input",{id:"inc_number",value:this.props.data.inc_number,onChange:this.handleChange,className:"form-control",type:"text"})),r.a.createElement("div",{className:"col-md-3"},r.a.createElement("span",null,"Date of Incorporation"),r.a.createElement(Ht.a,{value:ge(this.props.data.inc_date),closeOnSelect:!0,onChange:function(t){e.handleDateChange("inc_date",t)},dateFormat:"DD MMM YYYY",timeFormat:!1,required:"required"}))),r.a.createElement("br",null),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-3"},r.a.createElement("span",null,"TAX Identifier"),r.a.createElement("input",{id:"tax_id",value:this.props.data.tax_id,onChange:this.handleChange,className:"form-control",type:"text"})))))}}]),a}(ut),It=function(e){return P("/api/admin/file/upload",e)},Wt=function(e){return P("/api/admin/file/remove",e)},Yt=function(e){return P("/api/admin/file/rel_path",e)},Vt=function(e){return P("/api/admin/file/id_textract",e)};function Ut(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(u.a)(e);if(t){var r=Object(u.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(m.a)(this,a)}}var Gt=function(e){Object(d.a)(a,e);var t=Ut(a);function a(){var e;return Object(s.a)(this,a),(e=t.call(this)).state={action:"Upload",reset_btn:"show_div",view_btn:"hide_div",base64_format:null},e.resetFile=function(t){e.fileInput.value=null,e.setState({action:"Upload",file:null})},e.load_props_for_view=function(t){if(console.log("load_props_for_view"),t.borrower_id?(e.entity_type="borrowers",e.entity_id=t.borrower_id,e.entity_code=t.cust_id):t.person_id?(e.entity_type="persons",e.entity_id=t.person_id,e.entity_code=t.person_id):t.lender_id?(e.entity_type="lenders",e.entity_id=t.lender_id,e.entity_code=t.lender_code):t.data_prvdr_id?(e.entity_type="data_prvdrs",e.entity_id=t.data_prvdr_id,e.entity_code=t.acc_prvdr_code):t.acc_prvdr_id?(e.entity_type="acc_providers",e.entity_id=t.acc_prvdr_id,e.entity_code=t.acc_prvdr_code):t.lead_id&&(e.entity_type="leads",e.entity_id=t.lead_id,e.entity_code=t.lead_id),console.log("props."+t.db_file_name),console.log("this.props.id"+e.props.id),console.log("this.entity_code"+e.entity_code),console.log("this.db_file_name"+e.db_file_name),t.db_file_name){var a={entity_code:e.entity_code,file_of:e.props.id};Yt(e.req(a)).then(function(a){if(e.resp(a),a){var n=a.data.file_rel_path;e.setState({action:"Remove",reset_btn:"hide_div",view_btn:"show_div",file_name:t.db_file_name,file_rel_path:n})}})}},e.encodeImageFileAsURL=function(t){var a=t.target.files[0],n=new FileReader;n.onloadend=function(){e.setState({base64_format:n.result})},n.readAsDataURL(a)},e.handleUploadFile=function(t){if(t.preventDefault(),t.persist(),"Upload"==e.state.action)if("accounts"==e.props.entity&&"photo_national_id"==e.props.id){var a,n=(a={file_of:e.props.id,cust_id:e.props.cust_id,type:e.props.person_type,file_data_type:e.state.file_data_type,file_data:e.state.base64_format,file_name:e.state.file_name,file_type:e.state.file_type},Object(k.a)(a,"file_of",e.props.id),Object(k.a)(a,"country_code",e.country_code),a);n.file_data?Vt(e.req(n)).then(function(a){e.resp(a),a&&(e.processUploadResponse(a,t),e.props.onTextract(a.data.textract))}):alert("Please choose the file to upload")}else{var r;(r="leads"==e.props.entity?{file_of:e.props.id,txn_id:e.props.txn_id,cust_id:e.props.cust_id,aggr_doc_id:e.props.aggr_doc_id,file_data_type:e.state.file_data_type,file_data:e.state.file,file_name:e.state.file_name,file_type:e.state.file_type,country_code:e.country_code,entity_id:e.props.entity,entity_code:e.props.lead_id}:{file_of:e.props.id,txn_id:e.props.txn_id,cust_id:e.props.cust_id,aggr_doc_id:e.props.aggr_doc_id,file_data_type:e.state.file_data_type,file_data:e.state.file,file_name:e.state.file_name,file_type:e.state.file_type,country_code:e.country_code}).file_data?It(e.req(r)).then(function(a){a&&(e.resp(a),e.processUploadResponse(a,t))}):alert("Please choose the file to upload")}else if("Remove"==e.state.action){if(window.confirm("Are you sure to remove the file? The file will be permanently deleted.")){var l={file_of:e.props.id,file_name:e.state.file_name,country_code:e.country_code,file_rel_path:e.state.file_rel_path,entity_type:e.entity_type,entity_id:e.entity_id};Wt(e.req(l)).then(function(t){e.resp(t),e.setState({file:null,action:"Upload",reset_btn:"show_div",view_btn:"hide_div"}),t&&("third_party_owner"==e.props.for&&e.props.onSaveFile(e.props.id,t.data,"remove"),alert(t.message))})}}},e.handleViewButton=function(t){e.setState({modalBox:!0})},e.handleClose=function(t){e.setState({modalBox:!1})},e.loaded=!1,void 0==Object({NODE_ENV:"production",PUBLIC_URL:"",REACT_APP_ADMIN_API_ROOT:"/api/admin",REACT_APP_APP_API_ROOT:"/api/app",REACT_APP_CORE_API_ROOT:"/api/core",REACT_APP_URL:"http://app.flowglobal.net"}).REACT_APP_USE_ROOT_ONLY_DEV?e.root="":e.root="http://localhost:8000",e}return Object(o.a)(a,[{key:"componentWillMount",value:function(){this.setState({action:"Upload",reset_btn:"show_div",view_btn:"hide_div"})}},{key:"componentWillReceiveProps",value:function(e){console.log("componentWillReceiveProps----\x3e"),console.log(e),console.log(this.loaded),this.loaded||(console.log("componentWillReceiveProps - if"),"view"==e.mode&&(console.log("componentWillReceiveProps - if - if"),this.load_props_for_view(e)),this.loaded=!0)}},{key:"handleFileChange",value:function(e){var t=e.target.files;this.createImage(t[0])}},{key:"createImage",value:function(e){var t=this,a=new FileReader;a.onload=function(a){t.setState({file:a.target.result,file_type:e.type,file_name:e.name,file_data_type:"data-url"})},a.readAsDataURL(e)}},{key:"processUploadResponse",value:function(e,t){var a={target:{id:"orig_"+this.props.id,value:e.data.original_file_name}};t.target.id=this.props.id,t.target.value=e.data.file_name,t.target.value=e.data.file_name,"view"===this.props.mode?this.props.onEditUpload(t):"create"===this.props.mode&&(this.props.onCreateUpload(t),this.props.onCreateUpload(a)),this.setState({action:"Remove",reset_btn:"hide_div",view_btn:"show_div",file_rel_path:e.data.file_rel_path,file_name:e.data.file_name}),"third_party_owner"==this.props.for&&this.props.onSaveFile(this.props.id,e.data.file_name),"create"===this.props.mode&&alert("File attached successfully. Please submit the form to complete file upload.")}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"row align-items-center"},r.a.createElement("div",{className:"col-md-6"},r.a.createElement("span",{className:"viewCus_label"},this.props.label?this.props.label:""),this.props.is_mandatory&&r.a.createElement("font",{className:"text-danger"},"   *  "),"cust_txn_file"==this.props.id&&r.a.createElement("a",{href:this.root+"/files/UGA/data_providers/sample_file.xls"},"( Download Sample File )"),"Remove"===this.state.action?r.a.createElement("b",null,r.a.createElement("label",null,this.state.file_name)):r.a.createElement("input",{type:"file",id:"file",onChange:function(t){e.handleFileChange(t),e.encodeImageFileAsURL(t)},ref:function(t){return e.fileInput=t},className:"form-control"})),"cust_txn_file"==this.props.id?r.a.createElement("div",null):r.a.createElement("div",{className:this.state.view_btn},r.a.createElement("div",{className:"col-md-3"},r.a.createElement("input",{type:"button",className:"btn-sm btn-light",value:"View",onClick:this.handleViewButton}))),r.a.createElement("div",{id:this.props.id,value:this.state.file_name,className:"col-md-2",onClick:this.handleUploadFile},r.a.createElement("input",{type:"button",className:"btn-sm ".concat("Upload"==this.state.action?"btn-light":"btn-secondary"),value:this.state.action,disabled:this.state.calling_api})),r.a.createElement("div",{className:this.state.reset_btn},r.a.createElement("div",{className:"col-md-3"},r.a.createElement("input",{type:"button",className:"btn-sm btn-secondary",value:"Reset File",onClick:this.resetFile}))),r.a.createElement("div",null,r.a.createElement(rt.a,{show:this.state.modalBox,onHide:this.handleClose,size:"Logo"==this.props.label?"sm":"lg"},r.a.createElement(rt.a.Header,{closeButton:!0,className:"modal-close-btn",show:this.state.modalBox,onHide:this.handleClose},r.a.createElement(rt.a.Title,null,this.props.label)),r.a.createElement(rt.a.Body,null,"Logo"==this.props.label?r.a.createElement("img",{src:this.root+this.state.file_rel_path+"/m_"+this.state.file_name,alt:this.state.file_rel_path+"/m_"+this.state.file_name}):r.a.createElement("img",{src:this.root+this.state.file_rel_path+"/l_"+this.state.file_name,alt:this.state.file_rel_path+"/l_"+this.state.file_name})))))}}]),a}(ut),Jt=function(e){return P("/api/admin/person/create",e)},Kt=function(e){return P("/api/admin/user/app/password/email",e)},Qt=function(e){return P("/api/admin/user/inv/password/email",e)};function Zt(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(u.a)(e);if(t){var r=Object(u.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(m.a)(this,a)}}var Xt=function(e){Object(d.a)(a,e);var t=Zt(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={comp_name:"person",initials:null,date:new Date,create_user:!1},e.handleKeyUp=function(t){return function(a){e.props.onComponentChange(a,e.props.id);var n=a.target.value.charAt(0).toUpperCase();document.getElementById(t).value=n,e.props.data[t]=n}},e.handleUserCheckboxClick=function(t){t.target.checked?e.setState({create_user:!0}):e.setState({create_user:!1}),t.target.value=t.target.checked,e.handleChange(t)},e.sendResetPasswordMail=function(){var t={email:e.props.data.email_id};"app_user"===e.props.data.user?Kt(e.req(t)).then(function(t){e.resp(t)}):"investor_user"===e.props.data.user&&Qt(e.req(t)).then(function(t){e.resp(t)})},e}return Object(o.a)(a,[{key:"componentWillMount",value:function(){Object($.a)(Object(u.a)(a.prototype),"componentWillMount",this).call(this),this.setOptionsListToStateFromAppApi("common","list",this.def_req,["acc_prvdr_code","name"],"acc_prvdrs")}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{id:"",className:"date-range"},r.a.createElement("div",{className:"row floatAdvancetitleBox agreementDateHeaderBox align-items-center no-margin"},r.a.createElement("div",{className:"col-md-4"},r.a.createElement("h4",{className:"no-margin headerTitle"},this.props.title?this.props.title:"")),r.a.createElement("div",{className:"col-md-1 ".concat(this.state.edit_button_style)},r.a.createElement(xt,{entity:this.props.entity,onClick:this.handleEdit})),r.a.createElement("div",{className:"col-md-1 ".concat(this.state.save_button_style)},r.a.createElement("input",{onClick:this.handleSave,type:"button",className:"btn btn-success btn-std",value:"Save"}))),r.a.createElement("div",{className:this.state.div_style},r.a.createElement("div",{className:"row no-margin labelTopgap align-items-end"},r.a.createElement("div",{className:"col-md-3"},r.a.createElement("span",null,"First Name"),r.a.createElement("font",{className:"text-danger"},"   *  "),r.a.createElement("input",{id:"first_name",value:this.props.data.first_name,onChange:this.toUpperHandleChange,type:"text",className:"upperCase form-control",required:"required"})),r.a.createElement("div",{className:"col-md-3"},r.a.createElement("span",null,"Middle Name"),r.a.createElement("input",{id:"middle_name",onChange:this.toUpperHandleChange,value:this.props.data.middle_name,className:"form-control",type:"text"})),r.a.createElement("div",{className:"col-md-3"},r.a.createElement("span",null,"Last Name"),r.a.createElement("font",{className:"text-danger"},"   *  "),r.a.createElement("input",{id:"last_name",value:this.props.data.last_name,onChange:this.toUpperHandleChange,className:"form-control",type:"text"})),r.a.createElement("div",{className:"col-md-3"},r.a.createElement("span",null,"Date of birth"),r.a.createElement(Ht.a,{value:ge(this.props.data.dob),closeOnSelect:!0,onChange:function(t){e.handleDateChange("dob",t)},dateFormat:"DD MMM YYYY",timeFormat:!1,required:"required"}))),r.a.createElement("div",{className:"row no-margin labelTopgap align-items-end"},r.a.createElement("div",{className:"col-md-3"},r.a.createElement("span",null,"Gender"),r.a.createElement("font",{className:"text-danger"},"   *  "),r.a.createElement("select",{id:"gender",value:this.props.data.gender,onChange:this.handleChange,className:"form-control",type:"text"},this.getSelectOptions("gender"))),r.a.createElement("div",{className:"col-md-3"},r.a.createElement("span",null,"Email ID"),"owner_person"===this.props.id?r.a.createElement("div",null):r.a.createElement("font",{className:"text-danger"},"   *  "),r.a.createElement("input",{id:"email_id",value:this.props.data.email_id,className:"form-control",onChange:this.handleChange,type:"text",required:"required",readOnly:this.props.data.user})),r.a.createElement("div",{className:"col-md-3"},r.a.createElement("span",null,"Mobile Number"),r.a.createElement("font",{className:"text-danger"},"   *  "),r.a.createElement("input",{id:"mobile_num",value:this.props.data.mobile_num,onChange:this.handleChange,onKeyUp:this.handleMakeCopy("whatsapp"),className:"form-control",type:"text"})),r.a.createElement("div",{className:"col-md-3"},r.a.createElement("span",null,"Alternate Biz Mobile Number 1"),r.a.createElement("font",{className:"text-danger"},"   *  "),r.a.createElement("input",{id:"alt_biz_mobile_num_1",value:this.props.data.alt_biz_mobile_num_1,onChange:this.handleChange,className:"form-control",type:"text"}))),r.a.createElement("div",{className:"row no-margin labelTopgap align-items-end"},r.a.createElement("div",{className:"col-md-3"},r.a.createElement("span",null,"Alternate Biz Mobile Number 2"),r.a.createElement("input",{id:"alt_biz_mobile_num_2",value:this.props.data.alt_biz_mobile_num_2,onChange:this.handleChange,className:"form-control",type:"text"})),r.a.createElement("div",{className:"col-md-3"},r.a.createElement("span",null,"WhatsApp Number"),r.a.createElement("input",{id:"whatsapp",value:this.props.data.whatsapp,onChange:this.handleChange,className:"form-control",type:"text"})),r.a.createElement("div",{className:"col-md-3"},r.a.createElement("span",null,"National ID"),r.a.createElement("font",{className:"text-danger"},"   *  "),r.a.createElement("input",{type:"text",id:"national_id",value:this.props.data.national_id,onChange:this.handleChange,className:"form-control",required:"required"})),!this.admin_roles.includes(v("role_codes"))&&r.a.createElement("div",{className:"col-md-3"},r.a.createElement("span",null,"Account Provider"),r.a.createElement("font",{className:"text-danger"},"   *  "),r.a.createElement("select",{id:"acc_prvdr_code",value:this.props.data.acc_prvdr_code,onChange:function(t){e.handleChange(t)},className:"form-control",type:"text",required:"required"},this.state.acc_prvdrs_dd))),"Business Owner Details"==this.props.title&&r.a.createElement("div",null,r.a.createElement("div",{className:"row no-margin labelTopgap align-items-center"},r.a.createElement("div",{className:"col-md-6"},r.a.createElement(Gt,{id:"photo_national_id",label:"National ID Photo",type:"image",mode:this.props.mode,person_id:this.props.data.id,db_file_name:this.props.data.photo_national_id,onEditUpload:function(t){e.handleChangeForEdit(t),e.handleSave(t,"reload")},onCreateUpload:this.handleChange}))),r.a.createElement("br",null),r.a.createElement("div",{className:"row no-margin labelTopgap align-items-center"},r.a.createElement("div",{className:"col-md-6"},r.a.createElement(Gt,{id:"photo_pps",label:"Passport Size Photo",person_id:this.props.data.id,db_file_name:this.props.data.photo_pps,type:"image",mode:this.props.mode,onEditUpload:function(t){e.handleChangeForEdit(t),e.handleSave(t,"reload")},onCreateUpload:this.handleChange}))),r.a.createElement("p",{className:"no-margin labelTopgap",style:{color:"red"}},"Note : Ensure the photos in the National ID, Passport Photo matches with the person in Selfie"),r.a.createElement("div",{className:"row no-margin labelTopgap align-items-center"},r.a.createElement("div",{className:"col-md-6"},r.a.createElement(Gt,{id:"photo_selfie",label:"Selfie with Customer",person_id:this.props.data.id,db_file_name:this.props.data.photo_selfie,type:"image",mode:this.props.mode,onEditUpload:function(t){e.handleChangeForEdit(t),e.handleSave(t,"reload")},onCreateUpload:this.handleChange})))),"person"===this.props.id&&r.a.createElement("div",{className:"row mb-5 mt-4 ml-2"},r.a.createElement("div",{class:"col-3"},null==this.props.data.user&&r.a.createElement("label",{className:"form-check-label"},r.a.createElement("input",{id:"create_user",type:"checkbox",className:"form-check-input",onClick:this.handleUserCheckboxClick}),"Create User"),this.props.data.user&&r.a.createElement("h5",null,pe(this.props.data.user))),r.a.createElement("div",{class:"col-3 ".concat(this.state.create_user?"":"d-none"," ")},r.a.createElement("select",{id:"role",name:"User Roles",onChange:this.handleChange,className:"form-control",type:"text",required:"required"},this.getSelectOptions("role_code"))),this.props.data.user&&r.a.createElement("div",{class:"col-3"},r.a.createElement(lt.a,{variant:"primary",onClick:this.sendResetPasswordMail,disabled:this.state.calling_api},"Send Reset Password E-mail"))),r.a.createElement("br",null)))}}]),a}(ut);Xt.defaultProps={designation:"text"};var $t=Xt;function ea(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(u.a)(e);if(t){var r=Object(u.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(m.a)(this,a)}}var ta=function(e){Object(d.a)(a,e);var t=ea(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={toList:!1,org:{},reg_address:{},head_person:{},market:{country_code:e.country_code,currency_code:e.currency_code}},e.handleSubmit=function(t){t.preventDefault();var a=e.state.market,n=e.state.org;n.reg_address=e.state.reg_address,n.country_code=e.country_code,a.org=n,a.head_person=e.state.head_person,a.head_person.country_code=e.country_code,ne(e.req({market:a})).then(function(t){t&&("success"===t.status?(e.setState({new_country_code:t.data}),e.setState({toList:!0}),alert("New Market created successfully")):alert(t.message+"\n"+JSON.stringify(t.data)))})},e}return Object(o.a)(a,[{key:"componentWillMount",value:function(){var e,t=this;if("view"===this.props.mode){var a=this.props.match.params.country_code;(e=this.req({country_code:a}),P("/api/admin/market/view",e)).then(function(e){e&&(t.market=e.data,t.setState({market:t.market,org:t.market.org,head_person:t.market.head_person,reg_address:t.market.org.reg_address}))})}else this.props.mode}},{key:"render",value:function(){return!0===this.state.toList?r.a.createElement(Y.a,{to:"/market/view/".concat(this.state.new_country_code)}):r.a.createElement("div",{className:"container text-labelblue"},r.a.createElement("h4",null,this.props.title+(this.state.market.name?" : "+this.state.market.name:"")),r.a.createElement("form",{id:"market_form",onSubmit:this.handleSubmit},r.a.createElement("div",{id:""},r.a.createElement(Pt,{id:"market",title:"Market Details",editable:"false",data:this.state.market,mode:this.props.mode,onComponentChange:this.handleComponentChange}),r.a.createElement("br",null),r.a.createElement("hr",null),r.a.createElement("br",null),r.a.createElement(zt,{id:"org",title:"Organisation Details",entity:"market",data:this.state.org,mode:this.props.mode,onComponentChange:this.handleComponentChange}),r.a.createElement("br",null),r.a.createElement("hr",null),r.a.createElement(Mt,{id:"reg_address",title:"Registered Address",entity:"market",data:this.state.reg_address,mode:this.props.mode,onComponentChange:this.handleComponentChange,onComponentReset:this.handleComponentReset}),r.a.createElement("br",null),r.a.createElement("hr",null),r.a.createElement($t,{id:"head_person",title:"Market Head",entity:"market",data:this.state.head_person,mode:this.props.mode,onComponentChange:this.handleComponentChange}),r.a.createElement("br",null),r.a.createElement("input",{type:"button",className:"btn btn-primary ".concat("create"===this.props.mode?"show_button":"hide_button"),onClick:this.handleSubmit,value:"Create New Market"}))),r.a.createElement("br",null),r.a.createElement("br",null))}}]),a}(dt);a(41);function aa(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(u.a)(e);if(t){var r=Object(u.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(m.a)(this,a)}}var na=function(e){Object(d.a)(a,e);var t=aa(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).updateStatus=function(t){if(0!=window.confirm("Are you sure to change the status?")){var a=t.target.value.toLowerCase()+"d",n={id:t.target.id,status:a};"users"==t.target.name&&(t.target.name="persons");var r=Object(k.a)({},t.target.name,n);Ve(e.req(r)).then(function(t){t&&("success"===t.status?e.setState({status:a}):alert(t.message+"\n"+JSON.stringify(t.data)))})}},e}return Object(o.a)(a,[{key:"componentWillMount",value:function(){console.log("componentWillMount"),console.log(this.props.status),this.setState({status:this.props.status});var e=this.props.parent;e||("borrower"==(e=this.props.entity.slice(0,-1))?e="customer":"loan_product"==e?e="product":"acc_provider"==e?e="acc_prvdr":"master_data_key"==e&&(e="data_key"));E(e,"create")?this.btn_style=!1:this.btn_style=!0,this.props.hasOwnProperty("btn_disabled")&&(this.btn_style=this.props.btn_disabled)}},{key:"componentWillReceiveProps",value:function(e){console.log("componentWillMount"),console.log(e.status),this.setState({status:e.status});var t=e.parent;t||("borrower"==(t=e.entity.slice(0,-1))?t="customer":"loan_product"==t?t="product":"acc_provider"==t?t="acc_prvdr":"master_data_key"==t&&(t="data_key"));E(t,"create")?this.btn_style=!1:this.btn_style=!0}},{key:"render",value:function(){return console.log(this.state.status),this.props.hasOwnProperty("head")?r.a.createElement(r.a.Fragment,null,"1"==this.props.head&&r.a.createElement("td",null,r.a.createElement(pt.a,{className:"badge",pill:!0,variant:Se(this.state.status)},r.a.createElement("span",null,this.state.show_1l?Oe(this.state.status):Ze(this.state.status)))),"2"==this.props.head&&r.a.createElement("td",null," ",r.a.createElement("input",{id:this.props.id,type:"button",name:this.props.entity,onClick:this.updateStatus,value:Ce(this.state.status),className:ke(this.state.status)+" btn-sm",disabled:this.btn_style}))):r.a.createElement(r.a.Fragment,null,r.a.createElement("td",null,r.a.createElement(pt.a,{className:"badge",pill:!0,variant:Se(this.state.status)},r.a.createElement("span",null,this.state.show_1l?Oe(this.state.status):Ze(this.state.status)))),r.a.createElement("td",null," ",r.a.createElement("input",{id:this.props.id,type:"button",name:this.props.entity,onClick:this.updateStatus,value:Ce(this.state.status),className:ke(this.state.status)+" btn-sm",disabled:this.btn_style})))}}]),a}(ut),ra=a(19),la=a.n(ra);function ca(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(u.a)(e);if(t){var r=Object(u.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(m.a)(this,a)}}var sa=function(e){Object(d.a)(a,e);var t=ca(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={marketList:null,toView:!1},e.handleClick=function(t){e.setState({country_code:t.target.id,toView:!0})},e}return Object(o.a)(a,[{key:"componentWillMount",value:function(){var e,t=this;(e=this.req(null),P("/api/admin/market/list",e)).then(function(e){if(e){var a=e.data.map(function(e,a){return r.a.createElement("tr",{key:a},r.a.createElement("td",null," ",Ze(e.country_code)),r.a.createElement("td",null," ",e.name," ",r.a.createElement("br",null)," ",e.inc_name),r.a.createElement("td",null," ",e.currency_code),r.a.createElement("td",null," ",Ze(e.time_zone)),r.a.createElement(na,{id:e.market_id,entity:"markets",status:e.status}),r.a.createElement("td",null,r.a.createElement(Nt,{id:e.country_code,entity:"market",onClick:t.handleClick})))});t.setState({marketList:a}),la()("#marketTable").removeAttr("width").dataTable({order:[],columns:[{width:"10%"},{width:"10%"},{width:"10%"},{width:"10%"},{width:"10%"},{width:"10%"},{width:"10%"}],dom:"Bfrtip",buttons:["csv","excel","print"]})}})}},{key:"render",value:function(){return!0===this.state.toView?r.a.createElement(Y.a,{to:"/market/view/".concat(this.state.country_code)}):null!=this.state.marketList?r.a.createElement("div",{id:"datatable",className:"table-responsive"},r.a.createElement("h5",null,this.props.title||"Market List"),r.a.createElement("table",{id:"marketTable",className:"market-table table"},r.a.createElement("thead",{className:"text-info"},r.a.createElement("tr",null,r.a.createElement("th",null,"Country"),r.a.createElement("th",null,"Market Name"),r.a.createElement("th",null,"Currency"),r.a.createElement("th",null,"Time Zone"),r.a.createElement("th",null,"Status"),r.a.createElement("th",null,"Action"),r.a.createElement("th",null,"Action"))),r.a.createElement("tbody",null,this.state.marketList))):r.a.createElement("div",null,r.a.createElement("p",null,"No Markets Available ! "))}}]),a}(dt),oa=function(e){return P("/api/admin/lender",e)},ia=function(e){return P("/api/admin/lender/account/stmt_search",e)},da=function(e){return P("/api/admin/account/create",e)},ma=function(e){return P("/api/admin/account/list",e)},ua=function(e){return P("/api/admin/account/make_primary",e)},pa=function(e){return P("/api/admin/account/update",e)},_a=a(9);function ha(e){var t=e.id,a=e.acc_purposes,l=e.initialAct_purpose,c=e.must,s=e.onChange,o=Object(n.useState)([]),i=Object(_a.a)(o,2),d=i[0],m=i[1];Object(n.useEffect)(function(){l&&m(l)},[l]);var u=Object(n.useState)(!1),p=Object(_a.a)(u,2),_=p[0],h=p[1],f=function(e,a){if(e)a!==d[0]&&(d.push(a),m(Object(re.a)(d)));else if(!e){var n=d.indexOf(a);d.splice(n,1),m(Object(re.a)(d))}s({target:{id:t,value:d}})};return r.a.createElement("div",{className:"accPur_box ".concat(_?"accPur_dropbox":"")},r.a.createElement("span",null,"Account Purpose"),c&&r.a.createElement("font",{className:"text-danger"},"\xa0* "),r.a.createElement("div",{type:"text",className:"form-control"},0===d.length?r.a.createElement("div",{style:{display:"inline-flex"}},r.a.createElement("span",null,"choose")):d.map(function(e,t){return r.a.createElement("div",{key:t,style:{display:"inline-flex"}},r.a.createElement("span",null,Ze(e,"account_purpose")),r.a.createElement("i",{class:"fa-solid fa-xmark accPur_close text-danger",onClick:function(){return f(!1,e)}}))})),r.a.createElement("i",{class:"fa-solid fa-angle-down text-white dropdownAccpur_Pos",onClick:function(){h(!_)},style:{cursor:"pointer"}}),_&&r.a.createElement("div",{className:"drop_style",onMouseLeave:function(){return h(!1)}},a.map(function(e,t){return"choose"!==e.props.children&&r.a.createElement("div",{key:t,className:"checkAndVal"},r.a.createElement("input",{type:"checkbox",checked:!!d.includes(e.props.value),onChange:function(t){return f(t.target.checked,e.props.value)}}),r.a.createElement("p",{className:"no-margin text-white",style:{cursor:"pointer",width:200},onClick:function(){return f(!d.includes(e.props.value),e.props.value)}},Ze(e.props.children)))})))}var fa=function(e){return P("/api/admin/borrower",e)},va=function(e){return P("/api/admin/borrower/view",e)},ga=function(e){return P("/api/admin/borrower/search",e)},ya=function(e){return P("/api/admin/borrower/bring_to_probation",e)},Ea=function(e){return P("/api/admin/borrower/update_status",e)},ba=function(e){return P("/api/admin/borrower/validate",e)},wa=function(e){return P("/api/admin/borrower/profile",e)},Na=function(e){return P("/api/admin/borrower/close",e)},xa=function(e){return P("/api/admin/borrower/manual_capture",e)},Ca=function(e){return P("/api/admin/borrower/app_access",e)},ka=a(60);function Sa(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(u.a)(e);if(t){var r=Object(u.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(m.a)(this,a)}}var Oa=function(e){Object(d.a)(a,e);var t=Sa(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={modalBox:!1,img_height:"",img_width:"100"},e.handleImage=function(t){e.setState({modalBox:!0})},e.handleClose=function(t){e.setState({modalBox:!1})},e}return Object(o.a)(a,[{key:"render",value:function(){var e=this;console.log("this.root-"+this.root),console.log("this.props.image_path-"+this.props.image_path),console.log("this.props.file_name-"+this.props.file_name);return r.a.createElement(r.a.Fragment,null,this.props.title&&r.a.createElement("p",{className:"text-white no-margin"},this.props.title),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:this.props.style?this.props.style:{height:this.state.img_height,width:this.state.imgWidth,margin:"auto"},className:"text-center align-items-center"},this.props.file_name?r.a.createElement("a",{href:"#"},r.a.createElement("img",{style:this.props.style?this.props.style:{height:this.state.img_height,width:this.state.imgWidth},src:this.root+this.props.image_path+"/s_"+this.props.file_name,onLoad:function(t){var a=t.target,n=a.offsetHeight,r=a.offsetWidth;console.log(n,r);var l=100/(r/n);e.setState(function(e){return e.img_height=l})},alt:"/s_"+this.props.file_name,onClick:function(t){return e.handleImage(t)}})):r.a.createElement("p",{className:"no-margin viewCus_labelVal"},"Not uploaded"))),r.a.createElement(rt.a,{show:this.state.modalBox,onHide:this.handleClose,className:"model_window"},r.a.createElement(rt.a.Header,{closeButton:!0,className:"modal-close-btn",show:this.state.modalBox,onHide:this.handleClose},r.a.createElement(rt.a.Title,null,this.props.title)),r.a.createElement(rt.a.Body,null,r.a.createElement("img",{src:this.root+this.props.image_path+"/l_"+this.props.file_name,alt:"/l_"+this.props.file_name})),r.a.createElement(rt.a.Footer,null)))}}]),a}(ut);function Aa(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(u.a)(e);if(t){var r=Object(u.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(m.a)(this,a)}}var ja=function(e){Object(d.a)(a,e);var t=Aa(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(e=t.call.apply(t,[this].concat(l))).state={edit_account:{},acc_purpose_dd:{},initialAct_purpose:[],div_style:"hide_div",person_div:"hide_div",textract_data:{},refresh_btn:"show_div",entity:"accounts",preview_modal:!1,opacity:""},e.handleTextract=function(t){var a=e.state.textract_data;(a=Object.assign(a,t)).gender=a.gender&&"F"==a.gender?"female":"male",a.type="third_party_owner",e.setState({textract_data:a,person_div:"disable_div",refresh_btn:"disable_div"})},e.handleFile=function(t,a){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=e.state.textract_data,l=e.state.person_div,c=e.state.refresh_btn,s=e.state.entity;"remove"==n?(delete r[t],"photo_national_id"==t&&(l="hide_div",c="show_div",s="accounts",r.first_name=r.last_name=r.dob=r.gender=r.national_id="")):(r[t]=a,c="disable_div"),e.setState({textract_data:r,person_div:l,refresh_btn:c,entity:s})},e.handleDateChange=function(t){var a=ce()(t).format("YYYY-MM-DD"),n=e.state.textract_data;n.dob=a,e.setState({textract_data:n})},e.handleRefresh=function(t){var a=e.state.edit_account.cust_id,n=e.state.textract_data,r={cust_id:a};va(e.req(r)).then(function(t){e.resp(t),t&&(t.data.allow_tp_ac_owner_manual_id_capture?(alert("Biz Ops (App support) has now allowed you to enter the National ID details manually."),n.first_name=n.last_name=n.dob=n.gender=n.national_id="",e.setState({entity:"",refresh_btn:"disable_div",person_div:"show_div",allow_manual_capture:t.data.allow_tp_ac_owner_manual_id_capture,textract_data:n})):alert("Biz Ops (App support) still not allowed you to enter the National ID details manually. \n Please wait until Biz Ops (App support) approve your request."))})},e.handleSave=function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=e.state.edit_account;if("float_advance"!=n.acc_purpose||n.assessment_type){var r=e.state.textract_data;if(!e.state.third_party_owner||r.photo_national_id&&r.photo_national_id_back&&r.photo_consent_letter)if(!e.state.third_party_owner||r.first_name&&r.last_name&&r.dob&&r.gender)if(e.state.third_party_owner&&"submit"!=a)e.setState({preview_modal:!0,opacity:.2});else{var l={account:e.state.edit_account,person:r};pa(e.req(l)).then(function(t){e.resp(t),t&&("success"===t.status?(alert(t.message),e.props.handleBackClick()):alert(t.message+"\n"+JSON.stringify(t.data)))})}else alert("Please enter required fields");else alert("Please upload required photos")}else alert("Select Assessment Type for Float Advance account")},e.handleBackBtn=function(t){e.props.handleBackClick(t)},e.handlePersonData=function(t){var a=e.state.textract_data;a[t.target.id]=t.target.value,e.setState({textract_data:a})},e.handleOwnerCheckboxClick=function(t){var a="",n=!1;t.target.checked?(a="show_div",n=!0):(a="hide_div",n=!1),e.setState({textract_data:{},div_style:a,third_party_owner:n,person_div:"hide_div",refresh_btn:"show_div"})},e.handlePreviewModalClose=function(t){e.setState({preview_modal:!1,opacity:""})},e.ViewPreviewModal=function(t){return r.a.createElement(rt.a,{show:e.state.preview_modal,onHide:e.handlePreviewModalClose,backdrop:"static",size:"xl",style:{backgroundColor:"#1a2035 !important",marginTop:"30px"}},r.a.createElement(rt.a.Header,{closeButton:!0,className:"modal-close-btn",show:e.state.pdf_modal,onHide:e.handlePreviewModalClose}),r.a.createElement(rt.a.Body,null,r.a.createElement(ka.a,{style:{width:"95%"}},r.a.createElement(ka.a.Header,{style:{backgroundColor:"#01062c",color:"white"}},r.a.createElement("h4",{style:{fontSize:"1.7rem"},className:"no-margin"},"Third Party A/C Owner ")),r.a.createElement(ka.a.Body,{className:"no-padding"},r.a.createElement("div",{className:"row",style:{marginRight:0,marginLeft:0,marginBottom:10}},r.a.createElement("div",{className:"col-md-3"},r.a.createElement("p",{class:"no-margin viewCus_label"},"First Name"),r.a.createElement("p",{class:"no-margin viewCus_labelVal"},t.first_name)),r.a.createElement("div",{className:"col-md-3"},r.a.createElement("p",{class:"no-margin viewCus_label"},"Last Name"),r.a.createElement("p",{class:"no-margin viewCus_labelVal"},t.last_name)),r.a.createElement("div",{className:"col-md-3"},r.a.createElement("p",{class:"no-margin viewCus_label"},"DOB"),r.a.createElement("p",{class:"no-margin viewCus_labelVal"},ve(t.dob))),r.a.createElement("div",{className:"col-md-3"},r.a.createElement("p",{class:"no-margin viewCus_label"},"Gender"),r.a.createElement("p",{class:"no-margin viewCus_labelVal"},he(t.gender))),r.a.createElement("div",{className:"col-md-3"},r.a.createElement("p",{class:"no-margin viewCus_label"},"National ID"),r.a.createElement("p",{class:"no-margin viewCus_labelVal"},t.national_id))),r.a.createElement("div",{className:"row no-margin justify-content-center",style:{marginBottom:"10px !important"}},r.a.createElement("div",{className:"col-md-3"},r.a.createElement("div",{className:"d-flex align-items-center justify-content-around pAlign_mid"},r.a.createElement("p",{class:"no-margin viewCus_label no-padding"},"National ID Photo"),r.a.createElement(Oa,{className:"img-fluid",image_path:"/files//UGA/persons/tmp/photo_national_id",file_name:t.photo_national_id}))),r.a.createElement("div",{className:"col-md-3"},r.a.createElement("div",{className:"d-flex align-items-center justify-content-around pAlign_mid"},r.a.createElement("p",{class:"no-margin viewCus_label no-padding"},"National ID Back Photo"),r.a.createElement(Oa,{className:"img-fluid",image_path:"/files//UGA/persons/tmp/photo_national_id_back",file_name:t.photo_national_id_back}))),r.a.createElement("div",{className:"col-md-3"},r.a.createElement("div",{className:"d-flex align-items-center justify-content-around pAlign_mid"},r.a.createElement("p",{class:"no-margin viewCus_label no-padding"},"Consent Letter Photo"),r.a.createElement(Oa,{className:"img-fluid",image_path:"/files//UGA/borrowers/tmp/photo_consent_letter",file_name:t.photo_consent_letter}))))))),r.a.createElement(rt.a.Footer,{className:"justify-content-center"},r.a.createElement(lt.a,{variant:"primary",onClick:e.handlePreviewModalClose}," Modify "),r.a.createElement(lt.a,{variant:"success",style:{marginLeft:20},disabled:e.state.calling_api,onClick:function(t){e.handleSave(t,"submit")}}," Submit ")))},e}return Object(o.a)(a,[{key:"componentWillMount",value:function(){var e=this;this.getSelectOptionsFromResult(Qe("account_purpose","customer"),"acc_purpose",["data_code","data_value"]);var t={account_id:this.props.account_id};(function(e){return P("/api/admin/account/view",e)})(this.req(t)).then(function(t){e.resp(t),t&&("success"===t.status?(e.setState({edit_account:t.data.account}),e.setState({initialAct_purpose:t.data.account.acc_purpose})):alert(t.message+"\n"+JSON.stringify(t.data)))})}},{key:"render",value:function(){var e=this;return this.state.toList?r.a.createElement(Va,{entity:this.props.entity,entity_id:this.props.entity_id}):r.a.createElement(r.a.Fragment,null,this.ViewPreviewModal(this.state.textract_data),r.a.createElement("div",{className:"text-labelblue",style:{opacity:this.state.opacity}},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-3"},r.a.createElement("span",null,r.a.createElement("b",null,"Account Provider")),"\xa0\xa0\xa0"),r.a.createElement("div",{className:"col-md-3"},r.a.createElement(Le,{logotype:this.state.edit_account.acc_prvdr_code}))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-3"},r.a.createElement("span",null,r.a.createElement("b",null,"Account Number")),"\xa0\xa0\xa0"),r.a.createElement("div",{className:"col-md-3"},r.a.createElement("label",null,this.state.edit_account.acc_number))),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("div",{className:"row d-flex justify-content-between"},this.state.edit_account.branch&&r.a.createElement("div",{className:"col-md-3"},r.a.createElement("span",null,"Branch"),r.a.createElement("font",{className:"text-danger"}," "),r.a.createElement("select",{id:"branch",onChange:this.setChangeToState,className:"form-control",type:"text",required:"required"},this.getSelectOptions(this.state.edit_account.acc_prvdr_code+"_branches"))),r.a.createElement("div",{className:"col-md-3"},r.a.createElement("span",null,"Account Holder Name"),r.a.createElement("font",{className:"text-danger"}," "),r.a.createElement("input",{type:"text",id:"holder_name",value:this.state.edit_account.holder_name,onChange:this.setChangeToState,className:"form-control",required:!0})),r.a.createElement("div",{className:"col-md-3"},r.a.createElement(ha,{id:"acc_purpose",onChange:this.setChangeToState,acc_purposes:this.state.acc_purpose_dd,initialAct_purpose:this.state.initialAct_purpose,must:!1})),this.state.initialAct_purpose.includes("float_advance")&&r.a.createElement("div",{className:"col-md-3"},r.a.createElement("span",null,"Assess By"),r.a.createElement("font",{className:"text-danger"}," "),r.a.createElement("select",{id:"assessment_type",value:this.state.edit_account.assessment_type,onChange:this.setChangeToState,className:"form-control",required:!0},r.a.createElement("option",{value:""},"choose"),r.a.createElement("option",{value:"self"},"Self Assessment"))),r.a.createElement("div",{className:"col-md-3"},r.a.createElement("span",null,"Alternate Account Number"),r.a.createElement("font",{className:"text-danger"}," "),r.a.createElement("input",{className:"form-control",id:"alt_acc_num",value:this.state.edit_account.alt_acc_num,onChange:this.setChangeToState,required:!0})),r.a.createElement("div",{className:"row"},E("account","third_party_owner")&&null==this.state.edit_account.tp_acc_owner_id&&"UMTN"==this.state.edit_account.acc_prvdr_code&&r.a.createElement("div",{className:"col-md-3"},r.a.createElement("div",{className:"form-check"},r.a.createElement("label",{className:"form-check-label no-margin"},r.a.createElement("input",{className:"form-check-input",type:"checkbox",onChange:function(t){e.handleOwnerCheckboxClick(t)},id:"do_not_have_score"})," Third Party A/C Owner",r.a.createElement("span",{className:"form-check-sign"},r.a.createElement("span",{className:"check"})))))),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("div",{className:this.state.div_style},r.a.createElement(ka.a,{className:"my-2"},r.a.createElement(ka.a.Header,{style:{backgroundColor:"#01062c",color:"white"}}," ",r.a.createElement("h5",{className:"no-margin",style:{fontSize:"20px"}},"Third Party A/C Owner ",r.a.createElement("div",{className:"".concat(this.state.refresh_btn," float-right")},r.a.createElement("input",{type:"button",value:"Refresh",className:"btn btn-primart float-right",onClick:this.handleRefresh,disabled:this.state.calling_api}),"\xa0\xa0\xa0"))),r.a.createElement(ka.a.Body,null,r.a.createElement("div",{className:"row no-margin labelTopgap align-items-center"},r.a.createElement("div",{className:"col-md-6"},r.a.createElement(Gt,{for:"third_party_owner",cust_id:this.state.edit_account.cust_id,entity:this.state.entity,onSaveFile:this.handleFile,id:"photo_national_id",label:"National ID Photo",type:"image",person_type:"third_party_owner",onTextract:function(t){e.handleTextract(t)},onEditUpload:function(t){e.handleChangeForEdit(t),e.handleSave(t,"reload")},onCreateUpload:function(t){e.handlePersonData(t)}})),r.a.createElement("div",{className:"col-md-6"},r.a.createElement(Gt,{for:"third_party_owner",id:"photo_national_id_back",entity:"accounts",label:"National ID Back Photo",type:"image",onSaveFile:this.handleFile,onEditUpload:function(t){e.handleChangeForEdit(t),e.handleSave(t,"reload")},onCreateUpload:this.handlePersonData}))),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("div",{className:"row no-margin labelTopgap align-items-center"},r.a.createElement("div",{className:"col-md-6"},r.a.createElement(Gt,{for:"third_party_owner",id:"photo_consent_letter",entity:"accounts",label:"Consent Letter Photo",type:"image",onSaveFile:this.handleFile,onEditUpload:function(t){e.handleChangeForEdit(t),e.handleSave(t,"reload")},onCreateUpload:this.setChangeToState}))),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("div",{className:this.state.person_div},r.a.createElement("div",{className:"row no-margin labelTopgap align-items-end"},r.a.createElement("div",{className:"col-md-3"},r.a.createElement("span",null,"First Name"),r.a.createElement("font",{className:"text-danger"},"   *  "),r.a.createElement("input",{id:"first_name",autocomplete:"off",value:this.state.textract_data.first_name,onChange:function(t){e.handlePersonData(t)},type:"text",className:"upperCase form-control",required:"required"})),r.a.createElement("div",{className:"col-md-3"},r.a.createElement("span",null,"Last Name"),r.a.createElement("font",{className:"text-danger"},"   *  "),r.a.createElement("input",{id:"last_name",autocomplete:"off",value:this.state.textract_data.last_name,onChange:function(t){e.handlePersonData(t)},className:"form-control",type:"text"})),r.a.createElement("div",{className:"col-md-3"},r.a.createElement("span",null,"Date of birth"),r.a.createElement("font",{className:"text-danger"},"   *  "),r.a.createElement(Ht.a,{id:"dob",value:this.state.textract_data.dob,closeOnSelect:!0,onChange:function(t){e.handleDateChange(t,"dob")},dateFormat:"DD MMM YYYY",timeFormat:!1,required:"required"}))),r.a.createElement("br",null),r.a.createElement("div",{className:"row no-margin labelTopgap align-items-end"},r.a.createElement("div",{className:"col-md-3"},r.a.createElement("span",null,"Gender"),r.a.createElement("font",{className:"text-danger"},"   *  "),r.a.createElement("select",{id:"gender",value:this.state.textract_data.gender?this.state.textract_data.gender:"",onChange:function(t){e.handlePersonData(t)},className:"form-control",type:"text"},r.a.createElement("option",{value:""},"Choose"),r.a.createElement("option",{value:"male"},"Male"),r.a.createElement("option",{value:"female"},"Female"))),r.a.createElement("div",{className:"col-md-3"},r.a.createElement("span",null,"National ID"),r.a.createElement("font",{className:"text-danger"},"   *  "),r.a.createElement("input",{type:"text",autocomplete:"off",id:"national_id",value:this.state.textract_data.national_id,onChange:function(t){e.handlePersonData(t)},className:"form-control",required:"required"}))),r.a.createElement("br",null))))),r.a.createElement("div",{className:""},r.a.createElement("br",null),r.a.createElement("input",{type:"button",value:this.state.third_party_owner?"Preview":"Save",className:"btn btn-success",onClick:this.handleSave,disabled:this.state.calling_api}),"\xa0\xa0\xa0",r.a.createElement("input",{type:"button",value:"Back",className:"btn btn-primary",onClick:this.handleBackBtn})),r.a.createElement("br",null))))}}]),a}(ut);function Ra(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(u.a)(e);if(t){var r=Object(u.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(m.a)(this,a)}}var Da=function(e){Object(d.a)(a,e);var t=Ra(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).handlePaste=function(e){return e.preventDefault(),!1},e}return Object(o.a)(a,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"form-group ".concat(this.props.className)},r.a.createElement("span",null,this.props.label),r.a.createElement("font",{className:"text-danger"}," * "),r.a.createElement("input",{id:this.props.id,style:{textSecurity:"disc",webkitTextSecurity:"disc"},onPaste:this.handlePaste,onChange:this.props.onChange,className:"form-control",required:!0})),r.a.createElement("div",{className:"form-group ".concat(this.props.className)},r.a.createElement("span",null,"Re-Enter ",this.props.label),r.a.createElement("font",{className:"text-danger"}," * "),r.a.createElement("input",{id:"reconfirm_"+this.props.id,onPaste:this.handlePaste,onChange:this.props.onChange,className:"form-control",required:!0})))}}]),a}(ut);function Fa(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(u.a)(e);if(t){var r=Object(u.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(m.a)(this,a)}}var La=function(e){Object(d.a)(a,e);var t=Fa(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={comp_name:"account",toList:!1,acc_purposes_to_post:[]},e.addAccpurTostate=function(t){e.setState(function(e){return e.acc_purposes_to_post=t})},e.loadbranch=function(t){var a=t.target.value.toLowerCase(),n=(e.state.account,{master_data:{status:"enabled",data_key:a+"_branches",country_code:e.country_code}});Ge(e.req(n)).then(function(t){t&&("success"===t.status?e.getSelectOptionsFromResult(t.data,"acc_branches",["data_code","data_value"]):alert(t.message+"\n"+JSON.stringify(t.data)))})},e}return Object(o.a)(a,[{key:"componentWillMount",value:function(){Object($.a)(Object(u.a)(a.prototype),"componentWillMount",this).call(this),this.setOptionsListToStateFromAppApi("common","list",this.def_req,["acc_prvdr_code","name"],"acc_prvdrs"),this.setOptionsListToStateFromAppApi("common","list",this.def_req,["account_types","account_types"],"acc_types"),"lender"==this.props.entity&&this.setOptionsToStateFromApi("acc_prvdr");var e=this.props.entity;"data_prvdr"==this.props.entity&&(e="data_provider"),this.getSelectOptionsFromResult(Qe("account_purpose",e),"acc_purpose",["data_code","data_value"])}},{key:"render",value:function(){var e=this;return r.a.createElement("form",{autoComplete:"off"},r.a.createElement("div",{id:"",className:"text-labelblue"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-3"},r.a.createElement("h4",null,"Account Details"))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-3"},r.a.createElement("span",null,"Account Provider"),r.a.createElement("font",{className:"text-danger"},"   *  "),r.a.createElement("select",{id:"acc_prvdr_code",value:this.props.data.acc_prvdr_code,onChange:function(t){e.handleChange(t),e.loadbranch(t)},className:"form-control",type:"text",required:"required"},this.state.acc_prvdrs_dd)),r.a.createElement("div",{className:"col-md-3"},r.a.createElement(ha,{id:"acc_purpose",onChange:this.handleChange,acc_purposes:this.state.acc_purpose_dd,initialAct_purpose:null,must:!0})),this.state.acc_branches_dd&&r.a.createElement("div",{className:"col-md-3"},r.a.createElement("span",null,"Branch"),r.a.createElement("font",{className:"text-danger"}," "),r.a.createElement("select",{id:"branch",value:this.props.data.branch,onChange:this.handleChange,className:"form-control",type:"text",required:"required"},this.state.acc_branches_dd)),r.a.createElement("div",{className:"col-md-3"},r.a.createElement("span",null,"Account Holder Name"),r.a.createElement("font",{className:"text-danger"}," "),r.a.createElement("input",{id:"holder_name",value:this.props.data.holder_name,onChange:this.toUpperHandleChange,className:"form-control",required:!0})))," ",r.a.createElement("br",null),this.props.data.acc_purpose&&!this.props.data.acc_purpose.includes("terminal_financing")&&r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-6"},r.a.createElement("div",{className:"row"},r.a.createElement(Da,{className:"col-md-6 ",label:"Account Number",id:"acc_number",onChange:this.handleChange})))),r.a.createElement("br",null),this.props.data.acc_purpose&&this.props.data.acc_purpose.includes("float_advance")&&r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-3"},r.a.createElement("span",null,"Assess By"),r.a.createElement("font",{className:"text-danger"}," "),r.a.createElement("select",{id:"assessment_type",value:this.props.data.assessment_type,onChange:this.handleChange,className:"form-control",required:!0},r.a.createElement("option",{selected:!0,disabled:!0,value:"self"},"Self Assessment")))),r.a.createElement("br",null),console.log(this.props.data),this.props.data.acc_purpose&&this.props.data.acc_purpose.includes("float_advance")&&this.props.ap_alw_appr.includes(this.props.data.acc_prvdr_code)&&r.a.createElement("div",{className:"container acc_elig"},r.a.createElement("div",{className:"row justify-content-center"},r.a.createElement("div",{className:"col-md-7"},r.a.createElement("span",null,"Customer holds a, "),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("label",null,r.a.createElement("input",{id:"acc_elig_reason",type:"radio",name:"acc_elig_reason",value:"elig_on_txn_stmt",onChange:function(t){e.handleChange(t),e.props.onAccElig(t)},checked:"elig_on_txn_stmt"===this.props.data.acc_elig_reason}),"  Existing Account (ELIGIBLE based on transaction statement data) \xa0\xa0\xa0"),r.a.createElement("label",null,r.a.createElement("input",{id:"acc_elig_reason",type:"radio",name:"acc_elig_reason",value:"elig_on_comms",onChange:function(t){e.handleChange(t),e.props.onAccElig(t)},checked:"elig_on_comms"===this.props.data.acc_elig_reason}),"  Existing Account (ELIGIBLE based on commission) \xa0\xa0\xa0"),r.a.createElement("label",null,r.a.createElement("input",{id:"acc_elig_reason",type:"radio",name:"acc_elig_reason",value:"appr_inelig_on_comms",onChange:function(t){e.handleChange(t),e.props.onAccElig(t)},checked:"appr_inelig_on_comms"===this.props.data.acc_elig_reason}),"  Existing Account (NOT ELIGIBLE based on commission) \xa0\xa0\xa0"),r.a.createElement("label",null,r.a.createElement("input",{id:"acc_elig_reason",type:"radio",name:"acc_elig_reason",value:"no_data",onChange:function(t){e.handleChange(t),e.props.onAccElig(t)},checked:"no_data"===this.props.data.acc_elig_reason}),"  Existing Account (Do not have commission data) \xa0\xa0\xa0"),r.a.createElement("label",null,r.a.createElement("input",{id:"acc_elig_reason",type:"radio",name:"acc_elig_reason",value:"appr_unknown_elig_new_acc",onChange:function(t){e.handleChange(t),e.props.onAccElig(t)},checked:"appr_unknown_elig_new_acc"===this.props.data.acc_elig_reason}),"  New Account (Cannot determine Eligibilty) \xa0\xa0\xa0"))),r.a.createElement("br",null),("appr_unknown_elig_new_acc"===this.props.data.acc_elig_reason||"appr_inelig_on_comms"===this.props.data.acc_elig_reason)&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"row justify-content-center"},r.a.createElement("div",{className:"col-md-4"},r.a.createElement("span",null,"Approve for ",this.props.acc_elig_days," days")),r.a.createElement("div",{className:"col-md-4"},r.a.createElement("span",null,"Validity untill ",this.props.validity_date.format("MMM Do YYYY")),r.a.createElement("br",null),r.a.createElement("br",null))),r.a.createElement("div",{className:"row justify-content-center"},r.a.createElement("div",{className:"col-md-5"},r.a.createElement("span",null,"This case requires COO approval"),r.a.createElement("font",{className:"text-danger"},"   *  ")," ",r.a.createElement("br",null),r.a.createElement("br",null))),r.a.createElement("div",{className:"row justify-content-center"},r.a.createElement("div",{className:"col-md-3"},r.a.createElement("label",{className:"checkbox-inline"},r.a.createElement("input",{id:"acc_elig_appr",type:"checkbox",onChange:this.props.onAccEligAppr}),r.a.createElement("span",null," Approve"))))))),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("div",{className:"text-white"},r.a.createElement("b",null,"Note:"),r.a.createElement("ul",null,r.a.createElement("li",null,"Adding a new account to the customer profile will initiate a ReKYC process."),r.a.createElement("li",null,"The account will be in disabled status until the ReKYC is approved by the auditor."),r.a.createElement("li",null,"Existing agreement will be inactivated."))))}}]),a}(ut),Pa=function(e){return P("/api/admin/account/ref_accounts",e)},Ba=function(e){return P("/api/admin/account/search",e)};var Ma=a(39),Ta=a(120),Ha=a(95),qa=function(){return r.a.createElement("div",null,r.a.createElement("p",{className:"no-margin text-center",style:{paddingTop:10,color:"#656d83"}},"No data found"))};function za(e){var t=e.row_data,a=e.column_data,n=e.showPag,l=e.minRow,c=e.resizable,s=e.defaultSorted,o=e.defaultPageSize,i=e.sortable,d=e.exportCSV,m=e.csvFile,u=e.csvData,p=e.timeServer,_=e.excessTimeaction,h=e.appliedRowblink,f=e.appliedRowblinktime,v=e.approveRowblinktime,g=e.paymentRowblinktime,y=e.csvstyle;return r.a.createElement("div",null,t?r.a.createElement(r.a.Fragment,null,d&&r.a.createElement("div",{className:y?" export_button_acordin export_btn ":"export_btn text-right ",style:{padding:"10px !important"}},r.a.createElement(Ha.CSVLink,{filename:"".concat(m,".csv"),data:u,className:"btn btn-secondary btn-std",style:{color:"#fff",padding:"5px !important"}},"Export as CSV")),r.a.createElement("div",{className:"table-responsive ".concat(0===t.length?"no_scroll":""," customer_list_reactTable border_bot")},r.a.createElement(Ta.a,{NoDataComponent:qa,showPaginationBottom:n&&t.length>0&&!0,minRows:l,data:t,columns:a,resizable:c,sortable:i,defaultPageSize:o,defaultSorted:s,getTrProps:function(e,t,a){return function(e,t,a){if(_&&t){if(h)return g?{className:ce.a.duration(ce()(p).diff(ce()(t.original.updated_at)))._milliseconds>6e4*g?"redBlink_table":""}:{className:ce.a.duration(ce()(p).diff(ce()(t.original.loan_appl_date)))._milliseconds>6e4*f?"redBlink_table":""};if(!h){var n=ce.a.duration(ce()(p).diff(ce()(t.original.loan_approved_date))),r=ce.a.duration(ce()(p).diff(ce()(t.original.loan_appl_date)));return{className:n._milliseconds>6e4*v||r._milliseconds>6e4*v?"redBlink_table":""}}}return{}}(0,t)}}))):r.a.createElement("div",{class:" spinner-border loader-spin",role:"status"},r.a.createElement("span",{class:"sr-only"},"Loading...")))}function Ia(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(u.a)(e);if(t){var r=Object(u.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(m.a)(this,a)}}var Wa=function(e){Object(d.a)(a,e);var t=Ia(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(e=t.call.apply(t,[this].concat(l))).state={accountList:null,editScreen:!1,row_data:[]},e.updatePrimaryAccount=function(t){var a={};if("customer"===e.props.entity){var n=e.props.entity_id;a={id:t.target.id,cust_id:n,is_primary_acc:!0}}else if("lender"===e.props.entity){var r=e.props.entity_id;a={id:t.target.id,lender_code:r,is_primary_acc:!0}}var l={account:a};ua(e.req(l)).then(function(e){e&&("success"===e.status?window.location.reload():alert(e.message+"\n"+JSON.stringify(e.data)))})},e.handleEditAccount=function(t){e.props.onEditClick(t)},e.handleAccTxns=function(t){var a=t.target.id;e.entity_id=e.props.entity_id,e.entity=e.props.entity,window.open("/acc_txns/"+e.entity+"/"+e.entity_id+"/"+a,"_blank")},e.list_accounts=function(t){ma(e.req({account:t})).then(function(t){t&&e.setState(function(e){return e.row_data=t.data})});var a=e.getListColumns();e.setState({accountList:a})},e.getListColumns=function(){var t=["super_admin","app_support","it_admin"].includes(v("role_codes"));return[{Header:"ACC PRVDR",id:"acc_prvdr_code",accessor:function(e){return r.a.createElement(Le,{logotype:e.acc_prvdr_code})}},{Header:"A/C Number",id:"acc_number",accessor:function(e){return r.a.createElement(r.a.Fragment,null,null==e.tp_acc_owner_id?r.a.createElement(r.a.Fragment,null,e.acc_number," "):r.a.createElement(r.a.Fragment,null," ",e.acc_number," ",r.a.createElement(Ma.b,{style:{fontSize:"17px"}})))}},{Header:"Alt A/C Number",id:"alt_acc_num",accessor:function(e){return r.a.createElement(r.a.Fragment,null,e.alt_acc_num)}},{Header:"Account Purpose",id:"acc_purpose",accessor:function(e){return r.a.createElement("div",null,Fe(e.acc_purpose))}},{Header:"Branch",id:"branch",accessor:function(e){return r.a.createElement("div",null,Ze(e.branch))}},{Header:function(){return r.a.createElement("div",{className:"tableAmount_rightAlign"},"Balance")},id:"balance",accessor:function(t){return r.a.createElement("div",{className:"tableAmount_rightAlign"},xe(t.balance,e.currency_code))}},{Header:function(){return r.a.createElement("div",null,"Status")},id:"status",accessor:function(a){return r.a.createElement("div",{className:"tableAmount_centerAlign"},r.a.createElement(na,{className:"text-center",head:"1",id:a.id,parent:e.props.entity,entity:"accounts",status:a.status,btn_disabled:"disabled"===a.status&&!t}))}},{Header:function(){return r.a.createElement("div",null,"Action")},id:"Action",accessor:function(a){return r.a.createElement(na,{head:"2",id:a.id,parent:e.props.entity,entity:"accounts",status:a.status,btn_disabled:"disabled"===a.status&&!t})}},{Header:"Action",id:"action",accessor:function(t){return r.a.createElement("input",{id:t.id,type:"button",value:"Configure",onClick:e.handleEditAccount,className:"btn btn-primary btn-std ".concat(e.configure_btn_style)})}}]},e.changeDataPrvdr=function(t){la()("#table2").DataTable().destroy(),e.selected_acc_prvdr_code=t.target.value,e.account.network_prvdr_code=t.target.value,e.list_accounts(e.account)},e}return Object(o.a)(a,[{key:"makePrimaryButton",value:function(e,t,a){return 0==t&&"enabled"===a?r.a.createElement("input",{id:e,type:"button",className:"btn btn-primary",onClick:this.updatePrimaryAccount,value:"Make Primary A/C "}):null}},{key:"componentWillMount",value:function(){var e=this.country_code;this.account={},this.table_id=this.props.entity_id,this.account={country_code:e},"customer"==this.props.entity?(this.account.cust_id=this.props.entity_id,this.list_accounts(this.account)):"lender"==this.props.entity?(this.account.lender_code=this.props.entity_id,this.setOptionsToStateFromApi("acc_prvdr")):"acc_prvdr"==this.props.entity&&(this.account.acc_prvdr_code=this.props.entity_id,this.list_accounts(this.account)),E(this.props.entity,"view_acc_txn")?this.view_txn_btn_style="show_div":this.view_txn_btn_style="disable_div",E(this.props.entity,"create_account")||E("account","configure_btn")?this.configure_btn_style="show_div":this.configure_btn_style="disable_div"}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,"lender"==this.props.entity&&r.a.createElement("div",{className:"row text-labelblue"},r.a.createElement("div",{className:"col-md-3"},r.a.createElement("span",null,"Account Provider"),r.a.createElement("font",{className:"text-danger"},"   *  "),r.a.createElement("select",{id:"network_prvdr_code",onChange:this.changeDataPrvdr,className:"form-control",type:"text",required:"required"},this.state.acc_prvdr_dd))),null!=this.state.accountList&&r.a.createElement(r.a.Fragment,null,r.a.createElement(za,{showPag:!1,minRow:0,row_data:void 0!==this.state.row_data?this.state.row_data:[],column_data:this.state.accountList,resizable:!1,defaultSorted:[{id:"acc_prvdr_code",desc:!0}]})),null==this.state.accountList&&r.a.createElement("div",null,r.a.createElement("p",null,"No Accounts Available ! ")))}}]),a}(dt);function Ya(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(u.a)(e);if(t){var r=Object(u.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(m.a)(this,a)}}var Va=function(e){Object(d.a)(a,e);var t=Ya(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={view:"account_list",acc_elig_appr:!1},e.handleSubmit=function(t){t.preventDefault();var a=e.state.account;a.country_code=e.country_code,a.network_prvdr_code=a.acc_prvdr_code,a.entity=e.props.entity,e.ap_alw_appr.includes(a.acc_prvdr_code)&&a.acc_purpose.includes("float_advance")&&null==e.state.account.acc_elig_reason?alert("Please choose the eligibity type"):(["appr_unknown_elig_new_acc","appr_inelig_on_comms"].includes(e.state.account.acc_elig_reason)&&e.state.acc_elig_appr&&(a.acc_elig_appr=e.state.acc_elig_appr,a.validity_date=e.validity_date.format("YYYY-MM-DD")),"customer"==e.props.entity?(a.cust_id=e.props.entity_id,a.acc_purpose.includes("float_advance")&&(a.assessment_type="self"),a.acc_purpose.includes("terminal_financing")&&(a.acc_number=a.reconfirm_acc_number="dummy")):"lender"==e.props.entity?(a.lender_code=e.props.entity_id,a.network_prvdr_code=a.acc_prvdr_code):"acc_prvdr"==e.props.entity&&(a.acc_prvdr_code=e.props.entity_id),da(e.req({account:a})).then(function(t){e.resp(t),t&&("success"===t.status?(alert(t.message),e.setState({view:"account_list"})):alert(t.message+"\n"+JSON.stringify(t.data)))}))},e.handleAddAccountClick=function(t){e.setState({view:"account",account:{is_primary_acc:!1,holder_name:e.props.cust_name,acc_number:e.props.dp_cust_id,acc_prvdr_code:e.acc_prvdr_code}})},e.handleBackClick=function(t){e.create_acc_btn="show_div",e.setState({view:"account_list"})},e.handleEdit=function(t){e.setState({view:"edit_account",account_id:t.target.id})},e.handleAccElig=function(t){e.create_acc_btn="disable_div",e.setState({acc_elig_appr:!1}),"no_data"!==e.state.account.acc_elig_reason?["appr_unknown_elig_new_acc","appr_inelig_on_comms"].includes(e.state.account.acc_elig_reason)&&e.state.acc_elig_appr?(e.create_acc_btn="show_div",e.setState({acc_elig_appr:!0})):["elig_on_comms","elig_on_txn_stmt"].includes(e.state.account.acc_elig_reason)&&(e.create_acc_btn="show_div"):alert("Cannot add a MTN account without commission data")},e.handleAccEligAppr=function(t){e.state.acc_elig_appr?(e.setState({acc_elig_appr:!1}),e.create_acc_btn="disable_div"):(e.setState({acc_elig_appr:!0}),e.create_acc_btn="show_div")},e}return Object(o.a)(a,[{key:"componentWillMount",value:function(){this.ap_alw_appr=C("acc_prvdrs_allow_approval"),this.acc_elig_days=C("acc_elig_validity_days");var e=new Date;this.validity_date=ce()(e).add(this.acc_elig_days,"day");var t=this.props.entity;this.create_acc_btn="show_div",E(t,"create_account")?this.create_acc_btn_style="show_div":this.create_acc_btn_style="disable_div","account_view"==this.props.view&&this.setState({view:"account_view"})}},{key:"createUI",value:function(e){var t=null;return"account"==e?t=r.a.createElement("div",null,r.a.createElement("input",{type:"button",onClick:this.handleBackClick,value:"Back",className:"btn btn-primary"}),r.a.createElement(La,{id:"account",entity:this.props.entity,title:"Account Provider",data:this.state.account,mode:this.props.mode,onComponentChange:this.handleComponentChange,onAccElig:this.handleAccElig,onAccEligAppr:this.handleAccEligAppr,ap_alw_appr:this.ap_alw_appr,validity_date:this.validity_date,acc_elig_days:this.acc_elig_days}),r.a.createElement("br",null),r.a.createElement("input",{type:"button",className:"btn btn-primary ".concat(this.create_acc_btn),onClick:this.handleSubmit,value:"Create New Account"})):"account_list"==e?t=r.a.createElement("div",null,r.a.createElement("input",{type:"button",className:"btn btn-primary account ".concat(this.create_acc_btn_style),onClick:this.handleAddAccountClick,value:"Add New Account"}),r.a.createElement(Wa,{entity:this.props.entity,entity_id:this.props.entity_id,onEditClick:this.handleEdit,disabled:this.state.calling_api})):"edit_account"==e&&(t=r.a.createElement("div",null,r.a.createElement(ja,{id:"edit_account",entity:this.props.entity,entity_id:this.props.entity_id,account_id:this.state.account_id,handleBackClick:this.handleBackClick}))),r.a.createElement("div",null,t)}},{key:"render",value:function(){return r.a.createElement("div",{className:"container"},this.createUI(this.state.view),r.a.createElement("br",null),r.a.createElement("br",null))}}]),a}(dt);function Ua(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(u.a)(e);if(t){var r=Object(u.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(m.a)(this,a)}}var Ga=function(e){Object(d.a)(a,e);var t=Ua(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={lenderList:null,toView:!1,lender_code:null,modalBox:!1,accountList:null,rowdatas:[],columndatas:[]},e.handleClick=function(t){e.setState({lender_code:t.target.id,toView:!0})},e.handleViewAccountsClick=function(t){e.setState({lender_code:t.target.id}),e.setState({modalBox:!0})},e.handleModalClose=function(t){e.setState({modalBox:!1})},e.changeHandler=function(t){var a=t,n=e.state.rowdatas.filter(function(e){return null!==e.name&&e.name.toLowerCase().includes(a.toLowerCase())||null!==e.lender_type&&e.lender_type.toLowerCase().includes(a.toLowerCase())});e.setState(function(e){return e.copy=n})},e}return Object(o.a)(a,[{key:"componentWillMount",value:function(){var e=this;E("lender","list_account")?this.btn_style="show_div":this.btn_style="disable_div";var t,a=this.country_code;(t=this.req({country_code:a}),P("/api/admin/lender/list",t)).then(function(t){t&&(e.setState(function(e){return e.rowdatas=t.data}),e.setState(function(e){return e.copy=t.data}),e.setState(function(t){return t.columndatas=e.columndatas()}))})}},{key:"columndatas",value:function(){var e=this;return[{Header:"Name",id:"name",accessor:function(e){return e.name}},{Header:"Lender Type",id:"lender_type",accessor:function(e){return Ze(e.lender_type)}},{Header:"Status",id:"status",accessor:function(e){return r.a.createElement(na,{id:e.id,entity:"lenders",status:e.status,head:1})}},{Header:"Action",id:"action",accessor:function(e){return r.a.createElement(na,{id:e.id,entity:"lenders",status:e.status,head:2})}},{Header:"Action",id:"lender_code",accessor:function(t){return r.a.createElement(Nt,{id:t.lender_code,entity:"lender",onClick:e.handleClick})}},{Header:"Account",id:"ids",accessor:function(t){return r.a.createElement("input",{id:t.lender_code,type:"submit",onClick:e.handleViewAccountsClick,value:"Accounts",className:"btn btn-primary ".concat(e.btn_style)})}}]}},{key:"render",value:function(){var e=this;return!0===this.state.toView?r.a.createElement(Y.a,{to:"/lender/view/".concat(this.state.lender_code)}):null!=this.state.copy?r.a.createElement("div",{className:"container containerTopmargin max-width no-padding"},r.a.createElement("div",null,r.a.createElement("h4",null,this.props.title||"Lender List"),r.a.createElement("div",{className:"d-flex justify-content-between align-items-center",style:{padding:5}},r.a.createElement("p",{className:"no-margin text-white"},r.a.createElement("b",null,"Total Entries : ",this.state.copy.length)),r.a.createElement("div",{style:{position:"relative"}},r.a.createElement("i",{class:"fa-solid fa-magnifying-glass search_pos"}),r.a.createElement("input",{placeholder:"Search here",className:"search_posInput",onChange:function(t){return e.changeHandler(t.target.value)}}))),r.a.createElement(za,{showPag:!0,minRow:0,row_data:void 0!==this.state.copy?this.state.copy:[],column_data:this.state.columndatas,resizable:!1,defaultSorted:[{id:"name",desc:!1}],exportCSV:!0,csvFile:"Lender Lists",csvData:this.state.copy})),r.a.createElement(rt.a,{show:this.state.modalBox,onHide:this.handleModalClose,size:"xl"},r.a.createElement(rt.a.Header,{closeButton:!0,show:this.state.modalBox,onHide:this.handleModalClose},r.a.createElement(rt.a.Title,null,"Lender Accounts : ",this.state.lender_code)),r.a.createElement(rt.a.Body,null,r.a.createElement(Va,{entity:"lender",entity_id:this.state.lender_code})),r.a.createElement(rt.a.Footer,null,r.a.createElement(lt.a,{variant:"secondary",onClick:this.handleModalClose},"Close")))):r.a.createElement("div",null,r.a.createElement("p",null,"No Lenders Available ! "))}}]),a}(dt),Ja=function(e){return P("/api/admin/data_provider",e)};function Ka(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(u.a)(e);if(t){var r=Object(u.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(m.a)(this,a)}}var Qa=function(e){Object(d.a)(a,e);var t=Ka(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={dataproviderList:null,toView:!1,data_provider_code:null},e.handleViewClick=function(t){e.setState({data_provider_code:t.target.id,toView:!0})},e.handleViewAccountsClick=function(t){e.setState({data_prvdr_code:t.target.id}),e.setState({modalBox:!0})},e.handleModalClose=function(t){e.setState({modalBox:!1})},e}return Object(o.a)(a,[{key:"componentWillMount",value:function(){var e,t=this,a=this.country_code;E("data_prvdr","list_account")?this.btn_style="show_div":this.btn_style="disable_div",(e=this.req({country_code:a}),P("/api/admin/data_provider/list",e)).then(function(e){if(e){var a=e.data.map(function(e,a){return r.a.createElement("tr",{key:a},r.a.createElement("td",null," ",e.name),r.a.createElement("td",null," ",Ze(e.provider_type)),r.a.createElement(na,{id:e.id,entity:"data_prvdrs",status:e.status}),r.a.createElement("td",null,r.a.createElement(Nt,{id:e.data_prvdr_code,entity:"data_prvdr",onClick:t.handleViewClick})),r.a.createElement("td",{key:a}," ",r.a.createElement("input",{id:e.data_prvdr_code,type:"submit",onClick:t.handleViewAccountsClick,value:"Accounts",className:"btn-sm btn-primary ".concat(t.btn_style)})))});t.setState({dataproviderList:a}),la()("#dp_list").removeAttr("width").dataTable({order:[],columns:[{width:"5%"},{width:"10%"},{width:"5%"},{width:"5%"},{width:"5%"},{width:"5%"}],dom:"Bfrtip",buttons:["csv","excel","print"]})}})}},{key:"render",value:function(){return!0===this.state.toView?r.a.createElement(Y.a,{to:"/data_provider/view/".concat(this.state.data_provider_code)}):null!=this.state.dataproviderList?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{id:"datatable",className:"table-responsive"},r.a.createElement("h5",null,this.props.title||"Data Provider List"),r.a.createElement("table",{id:"dp_list",className:"list"},r.a.createElement("thead",{className:"text-info"},r.a.createElement("tr",null,r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"Data Provider Type"),r.a.createElement("th",null,"Status"),r.a.createElement("th",null,"Action"),r.a.createElement("th",null,"Action"),r.a.createElement("th",null,"Account"))),r.a.createElement("tbody",null,this.state.dataproviderList))),r.a.createElement(rt.a,{show:this.state.modalBox,onHide:this.handleModalClose,size:"xl"},r.a.createElement(rt.a.Header,{closeButton:!0,show:this.state.modalBox,onHide:this.handleModalClose},r.a.createElement(rt.a.Title,null,"Data Provider Accounts : ",this.state.data_prvdr_code)),r.a.createElement(rt.a.Body,null,r.a.createElement(Va,{entity:"data_prvdr",entity_id:this.state.data_prvdr_code})),r.a.createElement(rt.a.Footer,null,r.a.createElement(lt.a,{variant:"secondary",onClick:this.handleModalClose},"Close")))):r.a.createElement("div",null,r.a.createElement("p",null,"No Data Providers Available ! "))}}]),a}(dt);function Za(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(u.a)(e);if(t){var r=Object(u.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(m.a)(this,a)}}var Xa=function(e){Object(d.a)(a,e);var t=Za(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={comp_name:"lender"},e.handleNameChange=function(t){var a=e.country_code.charAt(0);a+=t.target.value.substring(0,3).toUpperCase(),e.props.data.lender_code=a,e.toUpperHandleChange(t)},e}return Object(o.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{id:""},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-2"},r.a.createElement("h4",null,this.props.title?this.props.title:"Lender Details")),r.a.createElement("div",{className:"col-md-1 ".concat(this.state.edit_button_style)},r.a.createElement(xt,{entity:"lender",onClick:this.handleEdit})),r.a.createElement("div",{className:"col-md-1 ".concat(this.state.save_button_style)},r.a.createElement("input",{onClick:this.handleSave,type:"button",className:"btn btn-success",value:"Save"}))),r.a.createElement("div",{className:this.state.div_style},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-3"},r.a.createElement("span",null,"Lender Name"),r.a.createElement("font",{className:"text-danger"},"   *  "),r.a.createElement("input",{id:"name",value:this.props.data.name,onChange:"create"==this.props.mode?this.handleNameChange:this.toUpperHandleChange,required:"required",className:"upperCase form-control"})),r.a.createElement("div",{className:"col-md-3"},r.a.createElement("span",null,"Lender Type"),r.a.createElement("font",{className:"text-danger"},"   *  "),r.a.createElement("select",{id:"lender_type",value:this.props.data.lender_type,onChange:this.handleChange,required:"required",className:"form-control"},this.getSelectOptions("lender_type"))),r.a.createElement("div",{className:"col-md-3"},r.a.createElement("span",null,"Lender Code"),r.a.createElement("font",{className:"text-danger"}," * "),r.a.createElement("input",{type:"text",id:"lender_code",disabled:!0,value:this.props.data.lender_code,maxLength:4,onChange:this.handleChange,required:!0,className:"form-control"}))),r.a.createElement("br",null),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-6"},r.a.createElement(Gt,{id:"lender_logo",label:"Logo",lender_id:this.props.data.id,db_file_name:this.props.data.lender_logo,type:"image",mode:this.props.mode,onCreateUpload:this.handleChange,lender_code:this.props.data.lender_code,onEditUpload:function(t){e.handleChangeForEdit(t),e.handleSave(t)}})))))}}]),a}(ut);function $a(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(u.a)(e);if(t){var r=Object(u.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(m.a)(this,a)}}var en=function(e){Object(d.a)(a,e);var t=$a(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={dropdown_div_style:"disable_div"},e.handleClick=function(t){"disable_div"===e.state.dropdown_div_style?(e.setOptionsToStateFromApi("org"),e.setState({dropdown_div_style:"show_div"})):(e.setState({dropdown_div_style:"disable_div"}),e.props.resetOrgNAddr(t))},e}return Object(o.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"row mt-3"},r.a.createElement("div",{className:"col-md-3 mt-3"},r.a.createElement("span",null,r.a.createElement("h4",null,r.a.createElement("input",{type:"checkbox",id:"checkbox",onClick:this.handleClick}),"\xa0\xa0","Choose Organisation"))),r.a.createElement("div",{className:"col-md-3"},r.a.createElement("span",null,r.a.createElement("div",{id:"",className:"".concat(this.state.dropdown_div_style)},r.a.createElement("select",{id:"name_list",onChange:this.props.onChange,className:"form-control",type:"text",required:"required"},this.state.org_dd)))))}}]),a}(ut);function tn(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(u.a)(e);if(t){var r=Object(u.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(m.a)(this,a)}}var an=function(e){Object(d.a)(a,e);var t=tn(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={toList:!1,org:{},reg_address:{},contact_person:{},lender:{}},e.handleSubmit=function(t){t.preventDefault();var a=e.state.lender,n=e.state.org;n.reg_address=e.state.reg_address,n.country_code=e.country_code,a.country_code=e.country_code,a.org=n,a.contact_person=e.state.contact_person,a.contact_person.country_code=e.country_code,oa(e.req({lender:a})).then(function(t){t&&("success"===t.status?(e.setState({new_lender_code:t.data}),e.setState({toList:!0}),alert("New Lender created succesfully!")):alert(t.message+"\n"+JSON.stringify(t.data)))})},e}return Object(o.a)(a,[{key:"componentWillMount",value:function(){var e=this;if("view"===this.props.mode){var t={lender_code:this.props.match.params.lender_code};(function(e){return P("/api/admin/lender/view",e)})(this.req(t)).then(function(t){t&&(e.lender=t.data,e.setState({lender:e.lender,org:e.lender.org,contact_person:e.lender.contact_person,reg_address:e.lender.org.reg_address}))})}}},{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return!0===this.state.toList?r.a.createElement(Y.a,{to:"/lender/view/".concat(this.state.new_lender_code)}):r.a.createElement("div",{className:"container"},r.a.createElement("h5",null,this.props.title+(this.state.lender.name?" : "+this.state.lender.name:"")),r.a.createElement("form",{id:"lender_form",onSubmit:this.handleSubmit},r.a.createElement("div",{id:"",className:"text-labelblue"},r.a.createElement(Xa,{id:"lender",title:"Lender Details",data:this.state.lender,mode:this.props.mode,onComponentChange:this.handleComponentChange}),r.a.createElement("br",null),r.a.createElement("hr",null),"create"===this.props.mode&&r.a.createElement(en,{id:"data_provider_choose_org",resetOrgNAddr:this.handleResetOrgNAddr,onChange:this.handleOrgChange}),r.a.createElement("div",{className:"".concat(this.state.div_style)},r.a.createElement(zt,{id:"org",entity:"lender",title:"Organisation Details",data:this.state.org,mode:this.props.mode,onComponentChange:this.handleComponentChange}),r.a.createElement("br",null),r.a.createElement("hr",null),r.a.createElement(Mt,{id:"reg_address",entity:"lender",title:"Registered Address",data:this.state.reg_address,mode:this.props.mode,onComponentChange:this.handleComponentChange,onComponentReset:this.handleComponentReset}),r.a.createElement("br",null),r.a.createElement("hr",null)),r.a.createElement($t,{id:"contact_person",entity:"lender",title:"Contact Person",data:this.state.contact_person,mode:this.props.mode,onComponentChange:this.handleComponentChange}),r.a.createElement("br",null),r.a.createElement("input",{type:"button",className:"btn btn-primary ".concat("create"===this.props.mode?"show_button":"hide_button"),onClick:this.handleSubmit,value:"Create New Lender"}))),r.a.createElement("br",null),r.a.createElement("br",null))}}]),a}(dt);function nn(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(u.a)(e);if(t){var r=Object(u.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(m.a)(this,a)}}var rn=function(e){Object(d.a)(a,e);var t=nn(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={comp_name:"data_provider"},e.handleCodeChange=function(t){var a=t.target.value;e.setState(Object(k.a)({},t.target.value,e.country_code.charAt(0)+a)),e.handleChange(t)},e.handleNameChange=function(t){var a=e.country_code.charAt(0);a+=t.target.value.substring(0,3).toUpperCase(),document.getElementById("data_prvdr_code").value=a,e.props.data.data_prvdr_code=a,e.toUpperHandleChange(t)},e}return Object(o.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{id:""},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-2"},r.a.createElement("h4",null,this.props.title?this.props.title:"Data Provider")),r.a.createElement("div",{className:"col-md-1 ".concat(this.state.edit_button_style)},r.a.createElement(xt,{entity:"data_prvdr",onClick:this.handleEdit})),r.a.createElement("div",{className:"col-md-1 ".concat(this.state.save_button_style)},r.a.createElement("input",{onClick:this.handleSave,type:"button",className:"btn btn-success",value:"Save"}))),r.a.createElement("div",{className:this.state.div_style},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-3"},r.a.createElement("span",null,"Data Provider Name"),r.a.createElement("font",{className:"text-danger"},"   *  "),r.a.createElement("input",{id:"name",value:this.props.data.name,onChange:"create"==this.props.mode?this.handleNameChange:this.toUpperHandleChange,required:"required",className:"form-control"})),r.a.createElement("div",{className:"col-md-3"},r.a.createElement("span",null,"Data Provider Type"),r.a.createElement("font",{className:"text-danger"},"   *  "),r.a.createElement("select",{id:"provider_type",value:this.props.data.provider_type,onChange:this.handleChange,required:"required",className:"form-control"},this.getSelectOptions("data_provider_type"))),r.a.createElement("div",{className:"col-md-3"},r.a.createElement("span",null,"Data Provider Code"),r.a.createElement("font",{className:"text-danger"},"  *  "),r.a.createElement("input",{type:"text",id:"data_prvdr_code",disabled:!0,value:this.props.data.data_prvdr_code,maxLength:4,onChange:this.toUpperHandleChange,required:!0,className:"form-control"})),r.a.createElement("div",{className:"col-md-3"},r.a.createElement("span",null,"Contract Name"),r.a.createElement("font",{className:"text-danger"},"  *  "),r.a.createElement("input",{type:"text",id:"contract_name",value:this.props.data.contract_name,onChange:this.handleChange,required:!0,className:"form-control"}))),r.a.createElement("br",null),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-3"},r.a.createElement("span",null,"New Customer Commission")," (",this.currency_code,")",r.a.createElement("input",{id:"cust_comm",value:this.props.data.cust_comm,onChange:this.handleChange,className:"form-control"})),r.a.createElement("div",{className:"col-md-3"},r.a.createElement("span",null,"Repayment Commission")," (",this.currency_code,")",r.a.createElement("input",{id:"repay_comm",value:this.props.data.repay_comm,onChange:this.handleChange,className:"form-control"}))),r.a.createElement("hr",null),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-6"},r.a.createElement(Gt,{id:"data_prvdr_logo",label:"Logo",data_prvdr_id:this.props.data.id,db_file_name:this.props.data.data_prvdr_logo,type:"image",mode:this.props.mode,data_prvdr_code:this.props.data.data_prvdr_code,onCreateUpload:this.handleChange,onEditUpload:function(t){e.handleChangeForEdit(t),e.handleSave(t)}})))))}}]),a}(ut);function ln(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(u.a)(e);if(t){var r=Object(u.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(m.a)(this,a)}}var cn=function(e){Object(d.a)(a,e);var t=ln(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={toList:!1,org:{},reg_address:{},contact_person:{},data_provider:{}},e.handleSubmit=function(t){t.preventDefault();var a=e.state.data_provider,n=e.state.org;n.reg_address=e.state.reg_address,n.country_code=e.country_code,a.country_code=e.country_code,a.org=n,a.contact_person=e.state.contact_person,a.contact_person.country_code=e.country_code,Ja(e.req({data_prvdr:a})).then(function(t){t&&("success"===t.status?(e.setState({new_data_prvdr_code:t.data}),e.setState({toList:!0}),alert("New Data Provider created successfully")):alert(t.message+"\n"+JSON.stringify(t.data)))})},e}return Object(o.a)(a,[{key:"componentWillMount",value:function(){var e=this;if("view"===this.props.mode){var t={data_prvdr_code:this.props.match.params.data_prvdr_code,country_code:this.country_code};(function(e){return P("/api/admin/data_provider/view",e)})(this.req(t)).then(function(t){t&&(e.data_provider=t.data,e.setState({data_provider:e.data_provider,org:e.data_provider.org,contact_person:e.data_provider.contact_person,reg_address:e.data_provider.org.reg_address}))})}else this.props.mode}},{key:"render",value:function(){return!0===this.state.toList?r.a.createElement(Y.a,{to:"/data_provider/view/".concat(this.state.new_data_prvdr_code)}):r.a.createElement("div",{className:"container"},r.a.createElement("h5",null,this.props.title+(this.state.data_provider.name?" : "+this.state.data_provider.name:"")),r.a.createElement("form",{id:"data_provider_form",onSubmit:this.handleSubmit},r.a.createElement("div",{id:"",className:"text-labelblue"},r.a.createElement(rn,{id:"data_provider",title:"Data Provider",data:this.state.data_provider,mode:this.props.mode,onComponentChange:this.handleComponentChange}),r.a.createElement("hr",null),"create"===this.props.mode&&r.a.createElement(en,{id:"data_provider_choose_org",resetOrgNAddr:this.handleResetOrgNAddr,onChange:this.handleOrgChange}),r.a.createElement("div",{className:"".concat(this.state.div_style)},r.a.createElement(zt,{id:"org",title:"Organisation Details",entity:"data_prvdr",data:this.state.org,mode:this.props.mode,onComponentChange:this.handleComponentChange}),r.a.createElement("br",null),r.a.createElement(Mt,{id:"reg_address",title:"Registered Address",entity:"data_prvdr",data:this.state.reg_address,mode:this.props.mode,onComponentChange:this.handleComponentChange,onComponentReset:this.handleComponentReset}),r.a.createElement("hr",null)),r.a.createElement($t,{id:"contact_person",title:"Contact Person",entity:"data_prvdr",data:this.state.contact_person,mode:this.props.mode,onComponentChange:this.handleComponentChange}),r.a.createElement("br",null),r.a.createElement("input",{type:"button",className:"btn btn-primary ".concat("create"===this.props.mode?"show_button":"hide_button"),onClick:this.handleSubmit,value:"Create New Data Provider"}))),r.a.createElement("br",null),r.a.createElement("br",null))}}]),a}(dt);function sn(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(u.a)(e);if(t){var r=Object(u.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(m.a)(this,a)}}var on=function(e){Object(d.a)(a,e);var t=sn(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={start_date:null},e}return Object(o.a)(a,[{key:"componentWillMount",value:function(){}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"mb-3"},r.a.createElement("div",{className:"row no-margin"},this.props.field_visit.cust_visit_history&&E("field_visit","self_search")&&r.a.createElement("div",{className:"col-1",style:{paddingBottom:15}},r.a.createElement("div",null,r.a.createElement(O.a.Label,null,"Flow visiter")),r.a.createElement(O.a.Label,{className:"ml-3"},r.a.createElement("h5",null,"All"))),r.a.createElement("div",{className:"col-3",style:{paddingBottom:15}},r.a.createElement(O.a.Label,null,"From "),r.a.createElement("font",{className:"text-danger"},"   *  "),r.a.createElement(Ht.a,{closeOnSelect:!0,defaultValue:this.props.field_visit.visit_start_time__from,dateFormat:"DD MMM YYYY",timeFormat:!1,required:"required",onChange:function(t){e.handleDateChange("visit_start_time__from",t)}})),r.a.createElement("div",{className:"col-3",style:{paddingBottom:15}},r.a.createElement(O.a.Label,null,"To "),r.a.createElement("font",{className:"text-danger"},"   *  "),r.a.createElement(Ht.a,{closeOnSelect:!0,defaultValue:this.props.field_visit.visit_start_time__to,dateFormat:"DD MMM YYYY",timeFormat:!1,required:"required",onChange:function(t){e.handleDateChange("visit_start_time__to",t)}})),E("field_visit","all_search")&&r.a.createElement("div",{className:"col-3",style:{paddingBottom:15}},r.a.createElement(O.a.Label,null,"Flow Visiter "),r.a.createElement(O.a.Control,{as:"select",id:"visitor_id",onChange:function(t){e.props.onComponentElementChange(t)}},this.props.priv_users)),r.a.createElement("div",{className:"col-3",style:{paddingBottom:15}},r.a.createElement(O.a.Label,null,"Purpose"),r.a.createElement(O.a.Control,{as:"select",id:"visit_purpose",onChange:function(t){e.props.onComponentElementChange(t)}},this.getSelectOptions("visit_purpose"))),r.a.createElement("div",{className:"col-3",style:{display:"flex",alignItems:"center",height:60,paddingBottom:15}},r.a.createElement(O.a.Label,{for:"individual_visits",className:"no-margin"},"Individual Visits",r.a.createElement(O.a.Check,{type:"checkbox",defaultChecked:this.props.field_visit.individual_visits,id:"individual_visits",className:"float-left no-margin",onChange:function(t){e.props.onComponentElementChange(t)}})))),r.a.createElement("div",{className:"text-center"},r.a.createElement("button",{type:"button",className:"btn btn-primary ",id:"searchbtn",disabled:this.props.search_btn,onClick:this.props.onSearch},"Search")))}}]),a}(ut),dn=function(e){return P("/api/admin/field_visits/search",e)},mn=function(e){return P("/api/admin/field_visits/checkin",e)},un=function(e){return P("/api/admin/field_visits/checkout",e)},pn=function(e){return P("/api/admin/field_visits/force_checkin",e)};a(144);function _n(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(u.a)(e);if(t){var r=Object(u.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(m.a)(this,a)}}var hn=function(e){Object(d.a)(a,e);var t=_n(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).handleSearch=function(e){var t=n.state.field_visit;n.validate_search(t)&&dn(n.req(t)).then(function(e){if(e&&"success"===e.status){n.resp(e);var t=[];!0===e.data.individual_visits&&(t=[{Header:"Visitor Name",accessor:"visitor_name"},{Header:"Cust Name",accessor:"cust_name"},{Header:"Cust ID",accessor:"cust_id",Cell:function(e){return r.a.createElement(ee.a,{to:"/borrower/indiv/view/"+e.value,target:"_blank"},e.value)},width:100},{Header:"Visit Time",id:"date",accessor:function(e){return ve(e.visit_start_time,!0)}},{Header:"Purpose",id:"purpose",width:250,style:{whiteSpace:"unset"},accessor:function(e){return e.visit_purpose.map(function(e){return Ze(e)}).join(", ")}},{Header:"Remarks",accessor:"remarks",width:400,style:{whiteSpace:"unset"}}]),!1===e.data.individual_visits&&(t=[{Header:"Visitor Name",accessor:"visitor_name"},{Header:"Visit date",id:"visit",accessor:function(e){return ve(e.visit_date)}},{Header:"Visits",accessor:"visits"}]),n.setState({columns:t,visits:e.data.visits,customer_visit:"show_div"})}})},n.handlevisitchange=function(e){var t=n.state.field_visit,a="individual_visits"===e.target.id?e.target.checked:e.target.value;t[e.target.id]=a,n.setState({field_visit:t,customer_visit:"hide_div",visits:[]})},n.state={field_visit:{individual_visits:!1},customer_visit:"hide_div",visits:[],loading:!0,columns:[],from_to_dates:{}},n}return Object(o.a)(a,[{key:"componentWillMount",value:function(){var e=this.state.field_visit;if(E("field_visit","all_search")){this.setOptionsListToStateFromAppApi("common","priv_users",this.req({priv_code:"field_visit/checkin",status:"enabled"}),["id","name"])}else E("field_visit","self_search")&&(e.search_type="self_search");this.props.match.params.cust_id&&(e.visit_start_time__to=ce()(new Date),e.visit_start_time__from=ce()().subtract(3,"months"),e.individual_visits=!0,e.cust_visit_history=!0,e.cust_id=this.props.match.params.cust_id),this.setState({field_visit:e})}},{key:"componentDidMount",value:function(){if(this.props.match.params.cust_id){var e=this.state.field_visit;e.visit_start_time__to=e.visit_start_time__to.format("YYYY-MM-DD"),e.visit_start_time__from=e.visit_start_time__from.format("YYYY-MM-DD"),this.handleSearch()}}},{key:"validate_search",value:function(e){return!(!e.visit_start_time__from||!e.visit_start_time__to)||(alert("Please enter valid search criteria"),!1)}},{key:"render",value:function(){return r.a.createElement("div",{className:"container max-width containerTopmargin no-padding"},r.a.createElement("div",{className:"row no-margin"},r.a.createElement("h3",{className:"field_visit no-margin headerTitle headerPadvert"},this.state.field_visit.cust_visit_history?"Search Customer Visit ("+this.state.field_visit.cust_id+")":"Search Customer Visit")),r.a.createElement(on,{id:"searchfieldvisit",onSearch:this.handleSearch,onComponentChange:this.handlevisitchange,onComponentReset:this.handleComponentReset,search_btn:this.state.calling_api,onComponentElementChange:this.handlevisitchange,priv_users:this.state.priv_users_dd,field_visit:this.state.field_visit}),r.a.createElement("div",{className:this.state.customer_visit},r.a.createElement(za,{showPag:!0,minRow:0,row_data:void 0!==this.state.visits?this.state.visits:[],column_data:this.state.columns,resizable:!1,sortable:!1,exportCSV:!0,csvFile:"field_visits",csvData:this.state.visits?this.state.visits:[]})))}}]),a}(dt),fn=function(e){return P(D+"/loan/loans",e)},vn=function(e){return P(D+"/loan/held_loans",e)},gn=function(e){return P(D+"/loan/release",e)},yn=function(e){return P(D+"/loan/resend_otp",e)},En=function(e){return P(D+"/loan",e)},bn=function(e){return P(D+"/loan/cancel",e)},wn=function(e){return P(D+"/loan/repeat_fa",e)},Nn=function(e){return P(D+"/loan_txns/disburse",e)},xn=function(e){return P(D+"/loan_txns/instant_disburse",e)},Cn=function(e){return P(D+"/loan_txns/list",e)},kn=function(e){return P(D+"/loan/payment_summary",e)},Sn=function(e){return P(D+"/loan/capture_payment",e)},On=function(e){return P(D+"/loan/unlink_payment",e)},An=function(e){return P(D+"/loan/allow_pp",e)},jn=function(e){return P(D+"/loan/retry_disb",e)},Rn=function(e){return P(D+"/loan/change_disb_status",e)},Dn=function(e){return P(D+"/loan/bypass_cust_conf",e)},Fn=function(e){return P(D+"/loan/create_recovery",e)},Ln=function(e){return P(D+"/loan/cancel_ong_rec",e)},Pn=function(e){return P(D+"/loan/capture_recovery",e)},Bn=function(e){return P(D+"/loan/check_txn_id",e)},Mn=function(e){return P(D+"/loan/waive",e)},Tn=function(e){return P(D+"/loan/remove_payment",e)},Hn=function(e){return P(D+"/loan/capture_excess",e)},qn=function(e){return P(D+"/loan/cancel_capt_disb",e)},zn=function(e){return P(D+"/loan/upgrade",e)},In=function(e){return P(D+"/loan/recon",e)},Wn=function(e){return P(D+"/loan/reinitiate_recon",e)},Yn=function(e){return P(D+"/loan/remove_disbursal",e)},Vn=function(e){return P(D+"/loan/mnl_capture_fas",e)};function Un(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(u.a)(e);if(t){var r=Object(u.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(m.a)(this,a)}}var Gn=function(e){Object(d.a)(a,e);var t=Un(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){void 0==Object({NODE_ENV:"production",PUBLIC_URL:"",REACT_APP_ADMIN_API_ROOT:"/api/admin",REACT_APP_APP_API_ROOT:"/api/app",REACT_APP_CORE_API_ROOT:"/api/core",REACT_APP_URL:"http://app.flowglobal.net"}).REACT_APP_USE_ROOT_ONLY_DEV?this.root="":this.root="http://13.234.42.35:8000";var e=null;"acc_prvdr"==this.props.entity?e="acc_providers":"lender"==this.props.entity&&(e="lenders");var t=this.root+"/files/"+this.props.country_code+"/"+e+"/";return t+=this.props.entity_code+"/"+this.props.entity+"_logo/"+this.props.file_name,r.a.createElement(r.a.Fragment,null,r.a.createElement("img",{className:this.props.color,src:t,alt:this.props.entity_code,width:"80s"}))}}]),a}(n.Component),Jn=Gn,Kn=function(e){return P(D+"/task/create",e)},Qn=function(e){return P(D+"/task/approval",e)};function Zn(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(u.a)(e);if(t){var r=Object(u.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(m.a)(this,a)}}var Xn=function(e){Object(d.a)(a,e);var t=Zn(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={show_waiver:!0},e}return Object(o.a)(a,[{key:"componentWillMount",value:function(){this.props.hasOwnProperty("show_waiver")&&this.setState({show_waiver:this.props.show_waiver})}},{key:"render",value:function(){var e=this,t=this.props.summary;return r.a.createElement("div",null,r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-6"},r.a.createElement("div",{className:"form-group row reset-margin justify-content-center align-items-center"},r.a.createElement("label",{className:"col-md-4 reset-margin"},r.a.createElement("b",null,"Customer")),r.a.createElement("label",{className:"col-md-6 reset-margin"},t.cust_name," | ",t.biz_name," (",t.cust_mobile_num,")  "))),r.a.createElement("div",{className:"col-md-6"},r.a.createElement("div",{className:"form-group row justify-content-center align-items-center"},r.a.createElement("label",{className:"col-md-4 reset-margin"},r.a.createElement("b",null,"Status")),r.a.createElement("label",{className:"col-md-6 reset-margin"},t.status)))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-6"},r.a.createElement("fieldset",{className:"border border-dark p-2"},r.a.createElement("legend",{className:"w-auto text-labelblue",style:{fontSize:"15px"}},"Total Due"),r.a.createElement("div",{className:"form-group row reset-margin justify-content-center align-items-center py-2"},r.a.createElement("label",{className:"col-md-5 reset-margin"},r.a.createElement("b",null,"FA Due")),r.a.createElement("label",{className:"col-md-5 text-right reset-margin"},xe(t.loan_principal,this.currency_code)," ")),r.a.createElement("div",{className:"form-group row reset-margin justify-content-center py-2 align-items-center"},r.a.createElement("label",{className:"col-md-5 reset-margin"},r.a.createElement("b",null,"Fee Due")),r.a.createElement("label",{className:"col-md-5 text-right reset-margin"},xe(t.flow_fee,this.currency_code)," ")),r.a.createElement("div",{className:"form-group row reset-margin justify-content-center align-items-center py-2"},r.a.createElement("label",{className:"col-md-5 reset-margin"},r.a.createElement("b",null,"Penalty Due")),r.a.createElement("label",{className:"col-md-5 text-right reset-margin"},xe(t.to_capture.tot_prov_penalty,this.currency_code)," ")))),r.a.createElement("div",{className:"col-md-6"},r.a.createElement("fieldset",{className:"border border-dark p-2"},r.a.createElement("legend",{className:"w-auto text-labelblue",style:{fontSize:"15px"}},"Already Paid"),null==t.paid_principal&&null==t.paid_fee&&null==t.paid_penalty?r.a.createElement("lable",{className:"text-labelblue reset-margin",style:{fontSize:"56px",margin:"185px"}},"Nil"):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"form-group row reset-margin justify-content-center align-items-center py-2"},r.a.createElement("label",{className:"col-md-5 reset-margin"},r.a.createElement("b",null,"FA Paid")),r.a.createElement("label",{className:"col-md-5 text-right reset-margin"},t.paid_principal?xe(t.paid_principal,this.currency_code):r.a.createElement("b",{className:"text-labelblue"},"NIL")," ")),r.a.createElement("div",{className:"form-group row reset-margin justify-content-center align-items-center py-2"},r.a.createElement("label",{className:"col-md-5 reset-margin"},r.a.createElement("b",null,"Fee Paid")),r.a.createElement("label",{className:"col-md-5 text-right reset-margin"},t.paid_fee?xe(t.paid_fee,this.currency_code):r.a.createElement("b",{className:"text-labelblue"},"NIL")," ")),r.a.createElement("div",{className:"form-group row reset-margin justify-content-center align-items-center py-2"},r.a.createElement("label",{className:"col-md-5 reset-margin"},r.a.createElement("b",null,"Penalty (Paid + Waived)")),r.a.createElement("label",{className:"col-md-5 text-right reset-margin"},t.paid_penalty?xe(t.paid_penalty,this.currency_code):r.a.createElement("b",{className:"text-labelblue"},"NIL")," "))),t.paid_excess>0&&E("loan","capture_excess")&&r.a.createElement("div",{className:"row reset-margin justify-content-center align-items-center py-2"},r.a.createElement("label",{className:"col-md-5 no-margin"},r.a.createElement("b",null,"Excess Paid")),r.a.createElement("label",{className:"col-md-5 no-margin text-right"},xe(t.paid_excess,this.currency_code)," "),r.a.createElement(r.a.Fragment,null,r.a.createElement("h6",{className:"text-center col-md-5"}),r.a.createElement("h6",{className:"col-md-5 text-right reset-margin py-2"},r.a.createElement(ee.a,{to:"#",onClick:this.props.handleExcessModal},"Capture Excess Reversal"))))))),r.a.createElement("fieldset",{className:"border border-dark mt-2 p-2"},r.a.createElement("legend",{className:"w-auto text-labelblue",style:{fontSize:"15px"}},"Current Outstanding"),r.a.createElement("div",{className:"row justify-content-around"},r.a.createElement("div",{className:"col-md-3"},r.a.createElement("div",{className:"form-group row reset-margin justify-content-center"},r.a.createElement("label",{className:"col-md-5 reset-padding"},r.a.createElement("b",null,"OS Principal")),r.a.createElement("label",{className:"col-md-7 text-right"},xe(t.os_principal,this.currency_code)," "))),r.a.createElement("div",{className:"col-md-3"},r.a.createElement("div",{className:"form-group row reset-margin justify-content-center"},r.a.createElement("label",{className:"col-md-5 label__name reset-padding"},r.a.createElement("b",null,"OS Fee")),r.a.createElement("label",{className:"col-md-7 text-right"},xe(t.os_fee,this.currency_code)," "),t.os_fee-t.to_capture.fee>0&&this.state.show_waiver&&t.can_waive_fee&&0==t.os_principal&&r.a.createElement(r.a.Fragment,null,r.a.createElement("h6",{className:"text-center col-md-5"}),r.a.createElement("h6",{className:"text-center col-md-7"},r.a.createElement(ee.a,{to:"#",onClick:function(){return e.props.handleWaiverModal("fee")}},"Waive Fee"))))),r.a.createElement("div",{className:"col-md-3"},r.a.createElement("div",{className:"form-group row reset-margin justify-content-center"},r.a.createElement("label",{className:"col-md-5 label__name reset-padding"},r.a.createElement("b",null,"OS Penalty")),r.a.createElement("label",{className:"col-md-7 text-center"},xe(t.os_penalty,this.currency_code)," "),t.os_penalty-t.to_capture.penalty>0&&0==t.request_waiver&&this.state.show_waiver&&r.a.createElement(r.a.Fragment,null,r.a.createElement("h6",{className:"text-center col-md-5"}),r.a.createElement("h6",{className:"text-center col-md-8"},r.a.createElement(ee.a,{to:"#",onClick:function(){return e.props.handleWaiverModal("penalty")}},"Waive Penalty"))),t.os_penalty-t.to_capture.penalty>0&&t.request_waiver&&this.state.show_waiver&&r.a.createElement(r.a.Fragment,null,r.a.createElement("h6",{className:"text-center col-md-5"}),r.a.createElement("h6",{className:"text-center col-md-8"},r.a.createElement(ee.a,{to:"#",onClick:this.props.handleReqWaiverModal},"Request Waiver"))))))))}}]),a}(ut);function $n(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(u.a)(e);if(t){var r=Object(u.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(m.a)(this,a)}}var er=function(e){Object(d.a)(a,e);var t=$n(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(e=t.call.apply(t,[this].concat(l))).state={repayment_style:"disable_div",is_part_payment:!1,sync_div_style:"hide_div",btn_name:"Apply",unlink_payment:{},reviewed:0,repayment_modal:!1,waiver_modal:!1,waiver_field:null,excess_modal:!1,recon_modal:!1,req_waiver_modal:!1,modal:null,opacity:"",fa:!1,fee:!1,penalty:!1,excess:!1,recon_data:{},FAcheck_box_checked:!1,FEEcheck_box_checked:!1,PENcheck_box_checked:!1,EXCcheck_box_checked:!1,is_skip_trans_id_check:!1,txn_data:"",txn_failed_msg:"",apply_btn:"disable_div",ac_dropdown:"disable_div",txn_id_style:"txn_id_style",type:"",comp_name:"loans",repayment_txn:{},evidence_active:!1,excess_capture:!1},e.handleSkipTransIDChekCheckboxClick=function(t,a){(e.repayment_txn.acc_stmt_txn_id&&e.repayment_txn.acc_stmt_txn_id.length>5||e.state.summary.txn_id&&e.state.summary.txn_id.length>5)&&e.setState({is_skip_trans_id_check:e.state.is_skip_trans_id_check,type:a},e.handleTxnId(t,a))},e.enableTxnID=function(t){var a=e.repayment_txn,n=e.state.summary,r=e.state.recon_data;a&&a.amount>0&&null!=e.to_acc.value&&null!=a.txn_date?e.setState({txn_id_style:""}):n&&n.amount>0&&null!=e.cust_acc.value&&null!=a.txn_date&&null!=n.from_ac_id?e.setState({txn_id_style:""}):r&&r.loan_doc_id&&(r.to_acc_id||r.from_acc_id&&(r.reversal_amount||r.amount))&&null!=r.txn_date&&e.setState({txn_id_style:""})},e.handleClose=function(t){if(!t&&0==window.confirm("You have not sync the payment. Are you sure to close?"))return;e.setState({repayment_modal:!1,summary:null,reviewed:0,is_part_payment:!1,is_skip_trans_id_check:!1,txn_id_style:"disable_div"}),"capture"==e.props.mode&&window.location.reload()},e.handleWaiverModalClose=function(t){e.setState({waiver_modal:!1,opacity:""})},e.handleModalChange=function(t){var a=e.state.summary;a[t.target.id]=t.target.value,e.setState({summary:a})},e.handleReconModalChange=function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=e.state.recon_data,r=e.state.apply_btn;r="excess_reversal"==a||t.hasOwnProperty("target")&&["investment","redemption","redemption_int_transfer","charges","interest"].includes(t.target.value)?"":"disable_div","txn_date"==a?n[a]=ce()(t).format("YYYY-MM-DD"):(null==a||"excess_reversal"==a||t.hasOwnProperty("target")&&("investment"==t.target.value||"redemption"==t.target.value||"duplicate_payment"==t.target.value||"testing"==a))&&(n[t.target.id]=t.target.value),e.setState({recon_data:n,apply_btn:r})},e.handleWaiverModal=function(t){e.setState({waiver_modal:!0,opacity:.7,waiver_field:t})},e.handleExcessModal=function(){e.setState({excess_modal:!0,opacity:.7})},e.handleModify=function(){e.setState({credit_style:"show_div"})},e.handlePartPaymentCheckboxClick=function(t){if(t.target.checked)var a=!0;else a=!1;e.setState({is_part_payment:a})},e.handleExcessModalClose=function(t){e.setState({excess_modal:!1,opacity:"",txn_data:"",txn_failed_msg:"",apply_btn:"disable_div",is_skip_trans_id_check:!1,txn_id_style:"disable_div",excess_capture:!1})},e.handleSubmit=function(t){var a=e.state.summary,n=a.amount,r=(a.cust_name,a.new_status),l=be(a.amount),c=be(a.current_os_amount),s=be(a.os_penalty);if("capture"==e.props.mode)if(e.state.is_part_payment){if(l==c&&0==s||l==c+s)return void window.alert("Unable to process. You are trying to make full payment. Make sure whether you are trying to pay full amount or partial amount")}else if(l<c)return void window.alert("Unable to process. You are trying to make partial payment less than Current OS amount.");if("settled"==r){if(0==window.confirm("On syncing this transaction, customer's FA will be settled. Are you sure to proceed the sync process?"))return}else{var o=a.os_principal-a.to_capture.principal,i=a.os_fee-a.to_capture.fee,d=a.os_penalty-a.to_capture.penalty,m=o+i+d;if(0==window.confirm("On syncing this transaction, customer's FA will still be in ".concat(r," status. Below is the new outstanding details after this sync.      \n            New OS Principal  :  ").concat(xe(o,e.currency_code)," \n            New OS Fee        :  ").concat(xe(i,e.currency_code),"\n            New OS Penalty    :  ").concat(xe(d,e.currency_code),"\n                                 ------------------------------------\n            Total OS          :  ").concat(xe(m,e.currency_code),"\n                                 ------------------------------------\n            Are you sure to proceed the sync process?")))return}var u={loan_doc_id:e.state.summary.loan_doc_id,mode:e.props.mode,amount:n};"recon"==e.props.mode?u.acc_stmt_id=e.state.summary.acc_stmt_id:"capture"==e.props.mode&&((u=Object(X.a)({},e.repayment_txn,u)).to_ac_id=e.to_acc.value,u.is_part_payment=e.state.is_part_payment,u.list_date=e.state.date,u.is_skip_txn_id_chk=e.state.is_skip_trans_id_check,e.state.is_skip_trans_id_check&&(u.photo_payment_proof=e.state.repayment_txn.photo_payment_proof)),Sn(e.req(u,!0)).then(function(t){if(e.resp(t),!t)return null;"success"===t.status?(alert("Payment captured successfully"),e.handleClose("capture"),e.setState({data:t.data}),"home"!==e.props.parent&&e.props.onSync(),"capture"!=e.props.mode&&"home"!=e.props.parent||window.location.reload()):alert(t.message)})},e.handleReqWaiverModal=function(){e.setState({req_waiver_modal:!0,opacity:.7})},e.handleReqWaiverModalClose=function(t){e.setState({req_waiver_modal:!1,opacity:""})},e.handleFAID=function(t){var a=t.target.value;e.setState({ac_dropdown:"disable_div"}),a.length>7&&En(e.req({loan_doc_id:a})).then(function(t){if(t)if("success"===t.status){var a=t.data.loan,n=a.lender_code,r={status:"enabled",network_prvdr_code:a.acc_prvdr_code,lender_code:n};e.setOptionsListToStateFromAppApi("common","lender_accounts",e.req({lender_account:r}),["account_id","acc_num_disp_txt"]),e.setState({ac_dropdown:""})}else alert(t.message+"\n"+JSON.stringify(t.data))})},e.requestWaiver=function(t){var a=e.state.summary.new_outstanding_penalty,n=e.state.summary.remarks,r=e.state.summary.loan_doc_id,l=e.state.summary.waived_penalty,c=e.state.summary.cust_id,s=e.props.mode;if(l&&n)if(a<l)alert("Request waiver penalty of ".concat(xe(l,e.currency_code)," shouldn't be greater than current outstanding penalty ").concat(xe(a,e.currency_code),"."));else{if(0==window.confirm("The customer has an outstanding penalty of ".concat(xe(a,e.currency_code),", you are going to request waiver for ").concat(xe(l,e.currency_code),". Are you sure?")))return;var o={mode:s,remarks:n,loan_doc_id:r,new_outstanding_penalty:a,waived_penalty:l,task_type:"waiver_request",cust_id:c};Kn(e.req(o,!0)).then(function(t){if(e.resp(t),!t)return null;"success"===t.status&&(alert(t.message),e.handleClose("capture"))})}else alert("Please enter required fields")},e.CaptureExcessPayment=function(t){var a=e.state.summary.amount,n=e.repayment_txn.txn_date,r=e.state.summary.txn_id,l=e.state.summary.from_ac_id,c=e.state.summary.loan_doc_id,s=e.state.summary.cust_id,o=e.repayment_txn.reason_for_skip;if(n&&r&&l&&a){if(e.state.is_skip_trans_id_check){if(!e.repayment_txn.reason_for_skip)return void alert("Please select required fields");if(!e.state.repayment_txn.photo_reversal_proof)return void alert("Please upload reversal transaction proof")}if(0==window.confirm("Are you sure to capture the excess payment of ".concat(xe(a,e.currency_code))))return;var i={amount:a,txn_date:n,txn_id:r,from_ac_id:l,loan_doc_id:c,cust_id:s,reason_for_skip:o};e.state.is_skip_trans_id_check&&(i.photo_reversal_proof=e.state.repayment_txn.photo_reversal_proof),Hn(e.req(i,!0)).then(function(t){if(e.resp(t),!t)return null;alert(t.message),e.handleClose("capture")})}else alert("Please enter required fields")},e.updateWaiver=function(t){var a=e.state.waiver_field,n=e.state.summary["new_outstanding_"+a],r=e.state.summary["waived_"+a],l=e.state.summary.remarks,c=e.state.summary.loan_doc_id,s=e.state.summary.acc_stmt_id,o=e.props.mode;if(r&&l)if(n<r)alert("Waived ".concat(a," of ").concat(xe(r,e.currency_code)," shouldn't be greater than current outstanding ").concat(a," ").concat(xe(n,e.currency_code),"."));else{if(0==window.confirm("The customer has an outstanding ".concat(a," of ").concat(xe(n,e.currency_code),", you are going to waive off ").concat(xe(r,e.currency_code),". Are you sure?")))return;var i={waived_amount:r,remarks:l,loan_doc_id:c,mode:o,new_outstanding_value:n,waiver_field:a};"recon"==e.props.mode&&(i.acc_stmt_id=s),Mn(e.req(i,!0)).then(function(t){if(e.resp(t),!t)return null;"success"===t.status&&(alert("".concat(pe(a)," waived successfully")),"penalty_waived"!=t.data.txn_status&&"fee_waived"!=t.data.txn_status||"capture"!=e.props.mode?"recon"==e.props.mode?(e.handleClose("capture"),e.setState({data:t.data,waiver_modal:!1,opacity:""}),"home"!==e.props.parent&&e.props.onSync()):e.setState({summary:t.data,waiver_modal:!1,opacity:""}):(e.handleClose("capture"),window.location.reload()))})}else alert("Please enter required fields")},e.handleUnlinkPayment=function(t){var a=e.state.summary.amount,n=e.state.summary.cust_name;if(0!=window.confirm("Are you sure this payment of ".concat(xe(a,e.currency_code)," is not related ").concat(n))){var r=e.state.unlink_payment;On(e.req(r,!0)).then(function(t){if(e.resp(t),!t)return null;"success"===t.status?e.setState({repayment_modal:!1}):alert(t.message)})}},e.handleReviewChange=function(t,a){var n=t.target.checked,r=e.state.reviewed,l="disable_div",c=!1;switch(n?(r++,c=!0):(r--,c=!1),r==(e.state.excess_field?4:3)&&(l=""),a){case"fa":e.setState(function(t){return t.fa=!e.state.fa}),e.setState(function(t){return t.FAcheck_box_checked=!e.state.FAcheck_box_checked});break;case"fee":e.setState(function(t){return t.fee=!e.state.fee}),e.setState(function(t){return t.FEEcheck_box_checked=!e.state.FEEcheck_box_checked});break;case"penalty":e.setState(function(t){return t.penalty=!e.state.penalty}),e.setState(function(t){return t.PENcheck_box_checked=!e.state.PENcheck_box_checked});break;case"excess":e.setState(function(t){return t.excess=!e.state.excess}),e.setState(function(t){return t.EXCcheck_box_checked=!e.state.EXCcheck_box_checked})}e.setState({reviewed:r,repayment_style:l,checked:c})},e.handleManualReconModal=function(){e.setState({recon_modal:!0,opacity:.7})},e.handleManualReconModalClose=function(){e.setState({ac_dropdown:"disable_div",recon_modal:!1,opacity:"",recon_data:{},txn_data:"",txn_failed_msg:"",apply_btn:"disable_div"})},e.capture_repayment_summary=function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"null",n=Object(X.a)({},e.state),r=["fa","fee","penalty","excess","checked","reviewed","FAcheck_box_checked","FEEcheck_box_checked","PENcheck_box_checked","EXCcheck_box_checked"];if(Object.keys(n).forEach(function(t){r.includes(t)&&("checked"!==t?e.setState(function(e){return e[t]=!1}):e.setState(function(e){return e[t]=0}))}),"Apply"!=a||0!=e.repayment_txn.amount&&""!=e.repayment_txn.acc_stmt_txn_id&&""!=e.repayment_txn.to_ac_id&&null!=e.repayment_txn.txn_date){if(e.state.is_skip_trans_id_check){if(!e.repayment_txn.reason_for_skip)return void alert("Please select required fields");if(!e.state.repayment_txn.photo_payment_proof)return void alert("Please upload payment transaction proof")}var l={mode:e.props.mode,loan_doc_id:e.props.data.loan_doc_id},c=!0;if(t.preventDefault(),"capture"==e.props.mode){l.amount=be(e.repayment_txn.amount),l.txn_id=e.repayment_txn.acc_stmt_txn_id,l.acc_id=e.repayment_txn.to_ac_id,l.is_skip_trans_id_check=e.state.is_skip_trans_id_check;var s=e.state.btn_name,o=e.state.sync_div_style,i=e.state.repayment_style,d=!1}else"recon"==e.props.mode&&(l.acc_stmt_id=t.target.id);if("capture"==e.props.mode&&"Apply"==a)l.is_part_payment=e.state.is_part_payment,l.txn_date=e.repayment_txn.txn_date;else if("capture"==e.props.mode&&"Modify"==a){var m="show_div";o="hide_div",s="Apply",i="disable_div",c=!1}e.setState({unlink_payment:l,credit_style:m,sync_div_style:o,btn_name:s,repayment_style:i}),c&&kn(e.req(l)).then(function(t){if(e.resp(t),!t)return null;if("success"===t.status){var n=t.data,r=e.state.checked,l=e.state.reviewed;n.to_capture.excess>0&&(d=!0),"capture"==n.mode&&"Apply"==a?(o="show_div",s="Modify",m="disable_div",r?(i="",l=0):i="disable_div",window.alert("Note : Payment is not yet captured on Flow App\n \nCustomer Payment applied below. Please review and sync ")):"recon"==n.mode&&(i="disable_div"),e.setState({repayment_modal:!0,sync_div_style:o,summary:n,btn_name:s,credit_style:m,repayment_style:i,excess_field:d,reviewed:l})}else alert(t.message)})}else alert("Please enter required fields")},e.updateRecon=function(){var t="31_paid_to_different_acc"==e.props.data.recon_status?"paid_to_diff_acc":e.state.recon_data.reason,a=e.state.data.stmt_txn_id,n=e.state.data.account_id,r=e.state.recon_data.to_acc_id,l=e.state.recon_data.loan_doc_id,c=e.state.data.id,s=e.state.recon_data.txn_id,o=e.state.data.dr_amt,i=e.state.data.cr_amt,d=e.state.recon_data.reversal_amount,m=e.state.recon_data.reversal_txn_id,u=e.state.data.stmt_txn_date,p=e.state.recon_data.txn_date,_=e.state.data.account_id,h=e.state.data.descr,f=[e.state.data.id];if(e.state.txn_data&&e.state.txn_data.map(function(e){f=[].concat(Object(re.a)(f),[e.id])}),"31_paid_to_different_acc"==e.props.data.recon_status||t)if("paid_to_diff_acc"!=t||r&&s&&l)if("duplicate_payment"!=t||s&&d&&l)if("excess_reversal"!=t||l)if("testing"!=t||s){if(0==window.confirm("Are you sure you want to manually recon for this transaction?"))return;var v={txn_date:p,recon_reason:t,loan_doc_id:l,stmt_txn_id:a,from_acc_id:n,db_amount:o,cr_amount:i,to_acc_id:r,reversal_txn_id:m,reversal_amount:d,acc_stmt_id:c,txn_id:s,stmt_txn_date:u,account_id:_,acc_stmt_ids:f,descr:h};In(e.req(v,!0)).then(function(t){if(e.resp(t),!t)return null;"success"===t.status&&(alert("This transaction manually reconed sucessfully"),e.handleManualReconModalClose("capture"),"home"!==e.props.parent?e.props.onSync():"home"==e.props.parent&&window.location.reload())})}else alert("Please enter required fields");else alert("Please enter required fields");else alert("Please enter required fields");else alert("Please enter required fields");else alert("Please select required fields")},e.ManualReconModal=function(t){return e.state.recon_modal?r.a.createElement(rt.a,{show:e.state.recon_modal,onHide:e.handleManualReconModalClose,backdrop:"static",size:"l",style:{top:"25px"}},r.a.createElement(rt.a.Header,{closeButton:!0,className:"modal-close-btn",show:e.state.recon_modal,onHide:e.handleManualReconModalClose},r.a.createElement(rt.a.Title,null,"Manual Recon")),r.a.createElement(rt.a.Body,null,r.a.createElement("form",null,r.a.createElement("div",{className:"row justify-content-center py-1",style:{alignItems:"center",height:42}},r.a.createElement("label",{className:"col-md-5 label__name reset-margin"},r.a.createElement("b",null,"A/C Number")),r.a.createElement("label",{className:"col-md-5 text-right reset-margin"},t.acc_number," ")),r.a.createElement("div",{className:"row justify-content-center py-1",style:{alignItems:"center",height:42}},r.a.createElement("label",{className:"col-md-5 label__name reset-margin"},r.a.createElement("b",null,"Txn Date")),r.a.createElement("label",{className:"col-md-5 text-right reset-margin"},ge(t.stmt_txn_date)," ")),r.a.createElement("div",{className:"row justify-content-center py-1",style:{alignItems:"center",height:42}},r.a.createElement("label",{className:"col-md-5 label__name reset-margin"},r.a.createElement("b",null,"Txn ID")),r.a.createElement("label",{className:"col-md-5 text-right reset-margin"},t.stmt_txn_id," ")),r.a.createElement("div",{className:"row justify-content-center py-1",style:{alignItems:"center",height:42}},r.a.createElement("label",{className:"col-md-5 label__name reset-margin"},r.a.createElement("b",null,"Amount")),r.a.createElement("label",{className:"col-md-5 text-right reset-margin"},"debit"==t.stmt_txn_type?xe(t.dr_amt,e.currency_code):xe(t.cr_amt,e.currency_code)," ")),r.a.createElement("div",{className:"row justify-content-center py-1",style:{alignItems:"center",height:42}},r.a.createElement("label",{className:"col-md-5 label__name reset-margin"},r.a.createElement("b",null,"Description")),r.a.createElement("label",{className:"col-md-5 text-right reset-margin"},t.descr," ")),"31_paid_to_different_acc"==t.recon_status&&t.loan_doc_id&&r.a.createElement("div",{className:"row justify-content-center py-1",style:{alignItems:"center",height:42}},r.a.createElement("label",{className:"col-md-5 label__name reset-margin"},r.a.createElement("b",null,"Matching FA ID")),r.a.createElement("label",{className:"col-md-5 text-right reset-margin"},r.a.createElement(ee.a,{to:"/fa/view/"+t.loan_doc_id,style:{color:"grey"},target:"_blank"},t.loan_doc_id))),"credit"==t.stmt_txn_type?r.a.createElement("div",{className:"row justify-content-center py-1",style:{alignItems:"center",height:42}},r.a.createElement("label",{className:"col-md-4 label__name reset-margin"},r.a.createElement("b",null,"Reason"),r.a.createElement("font",{className:"text-danger"},"   *  ")),r.a.createElement("div",{className:"col-sm-6 reset-margin"},r.a.createElement("select",{id:"reason",value:"31_paid_to_different_acc"==t.recon_status?"paid_to_diff_acc":e.state.recon_data.reason,onChange:function(t){e.handleReconModalChange(t)},className:"form-control",type:"text",required:"required",disabled:"31_paid_to_different_acc"==t.recon_status},r.a.createElement("option",{value:""}," Choose"),r.a.createElement("option",{value:"paid_to_diff_acc",disabled:!0}," Paid To Different Account"),r.a.createElement("option",{value:"duplicate_payment"},"Duplicate / Additional Payment"),r.a.createElement("option",{value:"investment"},"Investment"),r.a.createElement("option",{value:"interest"},"Interest")))):r.a.createElement("div",{className:"row justify-content-center py-1",style:{alignItems:"center",height:42}},r.a.createElement("label",{className:"col-md-5 label__name reset-margin"},r.a.createElement("b",null,"Reason"),r.a.createElement("font",{className:"text-danger"},"   *  ")),r.a.createElement("div",{className:"col-sm-5 reset-margin"},r.a.createElement("select",{id:"reason",onChange:function(t){e.handleReconModalChange(t)},className:"form-control",type:"text",required:"required"},r.a.createElement("option",{value:""}," Choose"),r.a.createElement("option",{value:"excess_reversal"},"Excess Reversal"),r.a.createElement("option",{value:"testing"}," Testing"),r.a.createElement("option",{value:"redemption"}," Redemption"),r.a.createElement("option",{value:"charges"},"Charges"),r.a.createElement("option",{value:"redemption_int_transfer"},"Internal Transfer (For disbursement)")))),"31_paid_to_different_acc"==t.recon_status&&r.a.createElement(r.a.Fragment,null,r.a.createElement("p",{className:"text-left my-3",style:{fontSize:"14px"}}," ",r.a.createElement("b",null,"Note")),r.a.createElement("p",{className:"text-left my-3"}," 1. If you think this payment has been made to the  A/C number (",t.acc_number,") incorrectly by the customer",r.a.createElement("br",null)),r.a.createElement("p",{className:"text-left my-3"}," 2. Transfer this payment from the above account to the correct account and capture the transfer details below.",r.a.createElement("br",null)," "),r.a.createElement("div",{className:"row justify-content-center align-items-center py-1"},r.a.createElement("label",{className:"col-sm-5 font-weight-bold reset-margin"},r.a.createElement("b",null,"FA ID")," ",r.a.createElement("font",{className:"text-danger"},"   *  ")),r.a.createElement("div",{className:"col-sm-5 reset-margin"},r.a.createElement("input",{id:"loan_doc_id",type:"text",autocomplete:"off",onChange:function(t){e.handleReconModalChange(t),e.handleFAID(t),e.enableTxnID(t)},className:"form-control reset-padding",min:"0"}))),r.a.createElement("div",{className:"row justify-content-center py-1",style:{alignItems:"center",height:42}},r.a.createElement("label",{className:"col-md-5 label__name reset-margin"},r.a.createElement("b",null,"Internal Transfer A/C"),r.a.createElement("font",{className:"text-danger"},"   *  ")),r.a.createElement("div",{className:"col-sm-5 reset-margin ".concat(e.state.ac_dropdown)},r.a.createElement("select",{id:"to_acc_id",onChange:function(t){e.handleReconModalChange(t),e.enableTxnID(t)},className:"form-control",type:"text",required:"required"},e.state.lender_accounts_dd))),r.a.createElement("div",{className:"row my-0 justify-content-center align-items-center py-1",style:{height:42}},r.a.createElement("label",{className:"col-sm-5 label__name reset-margin"},r.a.createElement("b",null," Txn Date"),r.a.createElement("font",{className:"text-danger"},"   *  ")),r.a.createElement("div",{className:"col-sm-5 reset-margin"},r.a.createElement(Ht.a,{closeOnSelect:!0,id:"txn_date",onChange:function(t){e.handleReconModalChange(t,"txn_date"),e.enableTxnID(t)},dateFormat:"DD MMM YYYY",timeFormat:!1,required:"required"}))),r.a.createElement("div",{className:"row my-0 justify-content-center align-items-center py-1",style:{height:42}},r.a.createElement("label",{className:"col-sm-5 label__name reset-margin"},r.a.createElement("b",null,"Txn ID"),r.a.createElement("font",{className:"text-danger"},"   *  ")),r.a.createElement("div",{className:"col-sm-5 reset-margin"},r.a.createElement("input",{id:"txn_id",type:"text",autocomplete:"off",onChange:function(t){e.handleReconModalChange(t),e.handleTxnId(t,"paid_to_diff_acc")},className:"form-control reset-padding ".concat(e.state.txn_id_style),min:"0"})))),"excess_reversal"==e.state.recon_data.reason&&r.a.createElement(r.a.Fragment,null,r.a.createElement("p",{className:"text-left my-3",style:{fontSize:"14px"}}," ",r.a.createElement("b",null,"Note")),r.a.createElement("p",{className:"text-left my-3"}," 1. Capture the FA ID of the excess transaction below ",r.a.createElement("br",null)),r.a.createElement("p",{className:"text-left my-3"}," "),r.a.createElement("div",{className:"row justify-content-center align-items-center py-1"},r.a.createElement("label",{className:"col-sm-5 font-weight-bold reset-margin"},r.a.createElement("b",null,"FA ID")," ",r.a.createElement("font",{className:"text-danger"},"   *  ")),r.a.createElement("div",{className:"col-sm-5 reset-margin"},r.a.createElement("input",{id:"loan_doc_id",type:"text",autocomplete:"off",onChange:function(t){e.handleReconModalChange(t,"excess_reversal")},className:"form-control reset-padding",min:"0"})))),"testing"==e.state.recon_data.reason&&r.a.createElement(r.a.Fragment,null,r.a.createElement("p",{className:"text-left my-3",style:{fontSize:"14px"}}," ",r.a.createElement("b",null,"Note")),r.a.createElement("p",{className:"text-left my-3"}," 1. Ensure that we have received the above testing payment ",r.a.createElement("br",null)),r.a.createElement("p",{className:"text-left my-3"}," 2. Capture the transaction ID of the reversal transaction below.",r.a.createElement("br",null)," "),r.a.createElement("p",{className:"text-left my-3"}," 3. Do not use the screen to recon until the reversal has been made."),r.a.createElement("div",{className:"row justify-content-center align-items-center py-1"},r.a.createElement("label",{className:"col-sm-5 font-weight-bold reset-margin"},r.a.createElement("b",null,"Txn ID")," ",r.a.createElement("font",{className:"text-danger"},"   *  ")),r.a.createElement("div",{className:"col-sm-5 reset-margin"},r.a.createElement("input",{id:"txn_id",type:"text",autocomplete:"off",onChange:function(t){e.handleReconModalChange(t,"testing"),e.handleTxnId(t,"testing")},className:"form-control reset-padding",min:"0"})))),"duplicate_payment"==e.state.recon_data.reason&&r.a.createElement(r.a.Fragment,null,r.a.createElement("p",{className:"text-left my-3",style:{fontSize:"14px"}}," ",r.a.createElement("b",null,"Note")),r.a.createElement("p",{className:"text-left my-3"}," 1. Ensure that you have reversed the above duplicate payment made by the customer ",r.a.createElement("br",null)),r.a.createElement("p",{className:"text-left my-3"}," 2. Capture the amount and transaction ID of the  reversal transaction below.",r.a.createElement("br",null)," "),r.a.createElement("p",{className:"text-left my-3"}," 3. Do not use the screen to recon until the reversal has been made."),r.a.createElement("div",{className:"row justify-content-center align-items-center py-1"},r.a.createElement("label",{className:"col-sm-5 font-weight-bold reset-margin"},r.a.createElement("b",null,"FA ID")," ",r.a.createElement("font",{className:"text-danger"},"   *  ")),r.a.createElement("div",{className:"col-sm-5 reset-margin"},r.a.createElement("input",{id:"loan_doc_id",type:"text",autocomplete:"off",onChange:function(t){e.handleReconModalChange(t),e.enableTxnID(t),e.handleFAID(t)},className:"form-control reset-padding",min:"0"}))),r.a.createElement("div",{className:"row justify-content-center align-items-center py-1"},r.a.createElement("label",{className:"col-sm-5 font-weight-bold reset-margin"},r.a.createElement("b",null,"From A/C "),r.a.createElement("font",{className:"text-danger"},"   *  ")),r.a.createElement("div",{className:"col-sm-5 reset-margin ".concat(e.state.ac_dropdown)},r.a.createElement("select",{id:"from_acc_id",onChange:function(t){e.handleReconModalChange(t),e.enableTxnID(t)},className:"form-control",type:"text",required:"required"},e.state.lender_accounts_dd))),r.a.createElement("div",{className:"row my-0 justify-content-center align-items-center py-1",style:{height:42}},r.a.createElement("label",{className:"col-sm-5 label__name reset-margin"},r.a.createElement("b",null,"Reversal Amount"),r.a.createElement("font",{className:"text-danger"},"   *  ")),r.a.createElement("div",{className:"col-sm-5 reset-margin"},r.a.createElement("input",{id:"reversal_amount",autocomplete:"off",type:"number",onChange:function(t){e.handleReconModalChange(t),e.enableTxnID(t)},className:"form-control reset-padding",min:"0"}))),r.a.createElement("div",{className:"row my-0 justify-content-center align-items-center py-1",style:{height:42}},r.a.createElement("label",{className:"col-sm-5 label__name reset-margin"},r.a.createElement("b",null,"Reversal Txn Date"),r.a.createElement("font",{className:"text-danger"},"   *  ")),r.a.createElement("div",{className:"col-sm-5 reset-margin"},r.a.createElement(Ht.a,{closeOnSelect:!0,id:"txn_date",onChange:function(t){e.handleReconModalChange(t,"txn_date"),e.enableTxnID(t)},dateFormat:"DD MMM YYYY",timeFormat:!1,required:"required"}))),r.a.createElement("div",{className:"row my-0 justify-content-center align-items-center py-1",style:{height:42}},r.a.createElement("label",{className:"col-sm-5 label__name reset-margin"},r.a.createElement("b",null,"Reversal Txn ID"),r.a.createElement("font",{className:"text-danger"},"   *  ")),r.a.createElement("div",{className:"col-sm-5 reset-margin"},r.a.createElement("input",{id:"txn_id",autocomplete:"off",type:"text",onChange:function(t){e.handleReconModalChange(t),e.handleTxnId(t,"duplicate_payment")},className:"form-control reset-padding ".concat(e.state.txn_id_style),min:"0"})))),r.a.createElement("div",{className:"row d-flex justify-content-center"},e.state.txn_data&&r.a.createElement(r.a.Fragment,null,r.a.createElement("br",null),r.a.createElement("div",{className:"alert alert-success"},e.state.txn_data.map(function(e){return r.a.createElement("h6",null,"Amount : ",e.dr_amt," | Txn Date : ",e.stmt_txn_date," | Description : ",e.descr)}))),e.state.txn_failed_msg&&r.a.createElement(r.a.Fragment,null,"                        ",r.a.createElement("br",null),r.a.createElement("div",{className:"alert alert-danger "},e.state.txn_failed_msg.map(function(e){return r.a.createElement("h6",null,e)})))))),r.a.createElement(rt.a.Footer,null,r.a.createElement(lt.a,{variant:"secondary",onClick:e.handleManualReconModalClose},"Close"),r.a.createElement(lt.a,{variant:"primary",className:e.state.apply_btn,disabled:e.state.calling_api,style:{marginLeft:10},onClick:e.updateRecon},"Submit"))):null},e.WaiverModal=function(t,a){if(!t)return null;var n=pe(a);return r.a.createElement(rt.a,{show:e.state.waiver_modal,onHide:e.handleWaiverModalClose,backdrop:"static",size:"l",style:{top:"25px"}},r.a.createElement(rt.a.Header,{closeButton:!0,className:"modal-close-btn",show:e.state.waiver_modal,onHide:e.handleWaiverModalClose},r.a.createElement(rt.a.Title,null,"Waive ",n)),r.a.createElement(rt.a.Body,null,r.a.createElement("form",null,r.a.createElement("div",{className:"row justify-content-center py-1",style:{alignItems:"center",height:42}},r.a.createElement("label",{className:"col-md-5 label__name reset-margin"},r.a.createElement("b",null,"Current OS ",n)),r.a.createElement("label",{className:"col-md-4 text-right reset-margin"},xe(t["os_"+a],e.currency_code)," ")),r.a.createElement("div",{className:"row justify-content-center align-items-center py-1"},r.a.createElement("label",{className:"col-sm-5 font-weight-bold reset-margin"},r.a.createElement("b",null,"Waive ",n),r.a.createElement("font",{className:"text-danger"},"   *  ")),r.a.createElement("div",{className:"col-sm-4 reset-padding"},r.a.createElement("input",{autoComplete:"off",id:"waived_".concat(a),type:"number",onChange:e.handleModalChange,className:"form-control reset-padding",min:"0"}))),r.a.createElement("div",{className:"row my-0 justify-content-center align-items-center py-1",style:{height:42}},r.a.createElement("label",{className:"col-sm-5 reset-margin"},r.a.createElement("b",null,"Remarks"),r.a.createElement("font",{className:"text-danger"},"   *  ")),r.a.createElement("div",{className:"col-sm-4 reset-padding"},r.a.createElement("textarea",{id:"remarks",type:"text",onChange:e.handleModalChange,className:"form-control reset-padding"}))))),r.a.createElement(rt.a.Footer,null,r.a.createElement(lt.a,{variant:"secondary",onClick:e.handleWaiverModalClose},"Close"),r.a.createElement(lt.a,{variant:"primary",disabled:e.state.calling_api,style:{marginLeft:10},onClick:e.updateWaiver},"Waive ",n)))},e.RequestWaiverModal=function(t){return t?r.a.createElement(rt.a,{show:e.state.req_waiver_modal,onHide:e.handleReqWaiverModal,backdrop:"static",size:"l",style:{top:"25px"}},r.a.createElement(rt.a.Header,{closeButton:!0,className:"modal-close-btn",show:e.state.req_waiver_modal,onHide:e.handleReqWaiverModalClose},r.a.createElement(rt.a.Title,null,"Request Waiver")),r.a.createElement(rt.a.Body,null,r.a.createElement("form",null,r.a.createElement("div",{className:"row justify-content-center py-1",style:{alignItems:"center",height:42}},r.a.createElement("label",{className:"col-md-5 label__name reset-margin"},r.a.createElement("b",null,"Current OS Penalty")),r.a.createElement("label",{className:"col-md-4 text-right reset-margin"},xe(t.os_penalty,e.currency_code)," ")),r.a.createElement("div",{className:"row justify-content-center align-items-center py-1"},r.a.createElement("label",{className:"col-sm-5 font-weight-bold reset-margin"},r.a.createElement("b",null,"Request Waiver Amount"),r.a.createElement("font",{className:"text-danger"},"   *  ")),r.a.createElement("div",{className:"col-sm-4 reset-padding"},r.a.createElement("input",{autoComplete:"off",id:"waived_penalty",type:"number",onChange:e.handleModalChange,className:"form-control reset-padding",min:"0"}))),r.a.createElement("div",{className:"row my-0 justify-content-center align-items-center py-1",style:{height:42}},r.a.createElement("label",{className:"col-sm-5 reset-margin"},r.a.createElement("b",null,"Reason"),r.a.createElement("font",{className:"text-danger"},"   *  ")),r.a.createElement("div",{className:"col-sm-4 reset-padding"},r.a.createElement("textarea",{id:"remarks",type:"text",onChange:e.handleModalChange,className:"form-control reset-padding"}))))),r.a.createElement(rt.a.Footer,null,r.a.createElement(lt.a,{variant:"secondary",onClick:e.handleReqWaiverModalClose},"Close"),r.a.createElement(lt.a,{variant:"primary",disabled:e.state.calling_api,style:{marginLeft:10},onClick:e.requestWaiver},"Request Waiver"))):null},e.ReturnExcessModal=function(t){return t?r.a.createElement(rt.a,{show:e.state.excess_modal,onHide:e.handleExcessModalClose,backdrop:"static",size:"l",style:{top:"25px"}},r.a.createElement(rt.a.Header,{closeButton:!0,className:"modal-close-btn",show:e.state.excess_modal,onHide:e.handleExcessModalClose},r.a.createElement(rt.a.Title,null,"Capture Excess Reversal")),r.a.createElement(rt.a.Body,null,r.a.createElement("form",null,r.a.createElement("div",{className:"row justify-content-center py-1",style:{alignItems:"center",height:42}},r.a.createElement("label",{className:"col-md-5 label__name reset-margin"},r.a.createElement("b",null,"Excess Amount"),r.a.createElement("font",{className:"text-danger"},"   *  ")),r.a.createElement("div",{className:"col-sm-5 reset-padding"},r.a.createElement("input",{autoComplete:"off",id:"amount",type:"text",onChange:function(t){e.handleModalChange(t),e.enableTxnID(t)},className:"form-control reset-padding",min:"0"}))),r.a.createElement("div",{className:"row justify-content-center align-items-center py-1"},r.a.createElement("label",{className:"col-sm-5 font-weight-bold reset-margin"},r.a.createElement("b",null,"Refunded From A/C "),r.a.createElement("font",{className:"text-danger"},"   *  ")),r.a.createElement("div",{className:"col-sm-5 reset-padding"},r.a.createElement("select",{id:"from_ac_id",onChange:function(t){e.handleModalChange(t),e.enableTxnID(t)},className:"form-control",type:"text",required:"required"},e.state.lender_accounts_dd))),r.a.createElement("div",{className:"row justify-content-center align-items-center py-1"},r.a.createElement("label",{className:"col-sm-5 font-weight-bold reset-margin"},r.a.createElement("b",null,"Customer's A/C "),r.a.createElement("font",{className:"text-danger"},"   *  ")),r.a.createElement("div",{className:"col-sm-5 reset-padding"},r.a.createElement("select",{id:"to_ac_id",ref:function(t){return e.cust_acc=t},onChange:function(t){e.handleSelfChange(t),e.enableTxnID(t)},className:"form-control",type:"text",required:"required"},e.state.customer_accounts_dd))),r.a.createElement("div",{className:"row my-0 justify-content-center align-items-center py-1",style:{height:42}},r.a.createElement("label",{className:"col-sm-5 reset-margin"},r.a.createElement("b",null,"Date"),r.a.createElement("font",{className:"text-danger"},"   *  ")),r.a.createElement("div",{className:"col-sm-5 reset-padding"},r.a.createElement(Ht.a,{closeOnSelect:!0,onChange:function(t){e.handleSelfDateChange("txn_date",t),e.enableTxnID(t)},dateFormat:"DD MMM YYYY",timeFormat:!1,required:"required"}))),r.a.createElement("div",{className:"row justify-content-center align-items-center py-1"},r.a.createElement("label",{className:"col-sm-5 font-weight-bold reset-margin"},r.a.createElement("b",null,"Txn ID"),r.a.createElement("font",{className:"text-danger"},"   *  ")),r.a.createElement("div",{className:"col-sm-5 reset-padding"},r.a.createElement("input",{autoComplete:"off",id:"txn_id",type:"text",onChange:function(t){e.handleModalChange(t),e.handleTxnId(t,"excess_capture")},className:"form-control reset-padding ".concat(e.state.txn_id_style),min:"0"})),r.a.createElement("div",{className:"col-sm-5 reset-padding"})),r.a.createElement("br",null),r.a.createElement("div",{className:"row d-flex justify-content-center"},e.state.txn_data&&r.a.createElement(r.a.Fragment,null,r.a.createElement("br",null),r.a.createElement("div",{class:"alert alert-success"},e.state.txn_data.map(function(e){return r.a.createElement("h6",null,"Amount : ",e.dr_amt," | Txn Date : ",e.stmt_txn_date," | Description : ",e.descr)}))),e.state.txn_failed_msg&&r.a.createElement("div",{class:"alert alert-danger "},r.a.createElement("h6",null,e.state.txn_failed_msg))),e.state.txn_failed_msg&&E("loan","skip_txn_id_check")&&r.a.createElement(r.a.Fragment,null,r.a.createElement("br",null),r.a.createElement("fieldset",{className:"border border-dark p-2"},r.a.createElement("legend",{className:"w-auto text-labelblue",style:{fontSize:"15px"}},"Transaction Evidence"),r.a.createElement("div",{className:"row no-margin justify-content-center align_ver_center"},r.a.createElement("label",{className:"col-md-5 reset-padding no-margin"},r.a.createElement("b",null,"Reason for Skip"),r.a.createElement("font",{className:"text-danger"},"   *  ")),r.a.createElement("div",{className:"col-sm-5 reset-padding"},r.a.createElement("select",{id:"reason_for_skip",onChange:function(t){e.handleSelfChange(t)},className:"form-control ".concat(e.state.credit_style),type:"text",required:"required"},e.getSelectOptions("skip_txn_id_check")))),r.a.createElement("div",{className:"row labelTopgap align-items-center mt-2",style:{marginLeft:"40px"}},r.a.createElement(Gt,{id:"photo_reversal_proof",mode:"create",entity:"loan_txns",type:"image",txn_id:e.state.summary.txn_id,onEditUpload:function(t){e.handleChangeForEdit(t),e.handleSave(t,"reload")},onCreateUpload:e.setChangeToState,label:"Revesal Transaction Proof"})))),r.a.createElement("br",null))),r.a.createElement(rt.a.Footer,null,r.a.createElement(lt.a,{variant:"secondary",onClick:e.handleExcessModalClose},"Close"),r.a.createElement(lt.a,{variant:"primary",disabled:e.state.calling_api,className:e.state.apply_btn,style:{marginLeft:10},onClick:e.CaptureExcessPayment},"Capture Excess"))):null},e.RepaymentSummaryModal=function(t){return t?(t.paid_penalty=t.penalty_waived+t.penalty_collected,t.to_capture.penalty>t.to_capture.tot_prov_penalty-t.penalty_waived-t.penalty_collected&&t.to_capture.penalty<0&&window.alert(""),t.new_outstanding_penalty=t.to_capture.tot_prov_penalty>0?t.to_capture.tot_prov_penalty-t.penalty_waived-t.penalty_collected-t.to_capture.penalty:0,t.new_outstanding_fee=t.flow_fee-t.fee_waived-t.paid_fee-t.to_capture.fee,t.penalty_overlay=r.a.createElement("form",{className:"p-2"},r.a.createElement("div",{className:"form-group row  justify-content-center reset-margin "},r.a.createElement("label",{className:"col-sm-6 label__name "},r.a.createElement("b",null,"Provisional Penalty ")),r.a.createElement("label",{className:"col-md-6 text-right pl-0"},xe(t.to_capture.tot_prov_penalty,e.currency_code)," ")),r.a.createElement("div",{className:"form-group row justify-content-center reset-margin"},r.a.createElement("label",{className:"col-sm-6 label__name "},r.a.createElement("b",null," Waived Penalty ")),r.a.createElement("label",{className:"col-md-6 text-right pl-0"},xe(t.penalty_waived,e.currency_code)," (-) ")),r.a.createElement("div",{className:"form-group row justify-content-center reset-margin "},r.a.createElement("label",{className:"col-sm-6 label__name"},r.a.createElement("b",null," Already Paid Penalty")),r.a.createElement("label",{className:"col-md-6 text-right pl-0"},xe(t.penalty_collected,e.currency_code)," (-)")),r.a.createElement("div",{className:"form-group row justify-content-center reset-margin"},r.a.createElement("label",{className:"col-sm-6 label__name "},r.a.createElement("b",null," Payment now against Penalty ")),r.a.createElement("label",{className:"col-md-6 text-right pl-0"},xe(t.to_capture.penalty,e.currency_code)," (-) ")),r.a.createElement("hr",null),r.a.createElement("div",null,r.a.createElement("label",{className:"col-sm-6 label__name "},r.a.createElement("b",null,"OS Penalty after Payment")),r.a.createElement("label",{className:"col-md-6 text-right pl-0"},xe(t.new_outstanding_penalty,e.currency_code)," ")),r.a.createElement("hr",null)),r.a.createElement(rt.a,{show:e.state.repayment_modal,backdrop:"static",size:"xl",style:{opacity:e.state.opacity}},r.a.createElement(rt.a.Header,{closeButton:!0,className:"modal-close-btn",show:e.state.repayment_modal,onHide:e.handleClose},r.a.createElement(rt.a.Title,null,e.props.title)),r.a.createElement(rt.a.Body,null,r.a.createElement("div",{className:""},r.a.createElement("form",null,"recon"===e.props.mode&&r.a.createElement(r.a.Fragment,null,r.a.createElement(ka.a,null,r.a.createElement(ka.a.Header,{style:{backgroundColor:"#01062c",color:"white"}},r.a.createElement("h4",{className:"no-margin"},r.a.createElement(Jn,{file_name:"t_"+v("acc_prvdr_logos")[e.state.summary.acc_prvdr_code],entity:"acc_prvdr",entity_code:e.state.summary.acc_prvdr_code,country_code:e.country_code,color:"logo_style"}),"\xa0\xa0 Account Credit Transaction")),r.a.createElement(ka.a.Body,null,r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-6"},r.a.createElement("div",{className:"row justify-content-center align-items-center py-2"},r.a.createElement("label",{className:"col-md-4 no-margin"},r.a.createElement("b",null,"Txn ID")," "),r.a.createElement("label",{className:"col-md-6 no-margin"},t.stmt_txn_id)),r.a.createElement("div",{className:"row justify-content-center align-items-center py-2"},r.a.createElement("label",{className:"col-md-4 no-margin"},r.a.createElement("b",null,"Txn Desc")),r.a.createElement("label",{className:"col-md-6 no-margin"},t.descr))),r.a.createElement("div",{className:"col-md-6"},r.a.createElement("div",{className:"row justify-content-center align-items-center py-2"},r.a.createElement("label",{className:"col-md-4 no-margin"},r.a.createElement("b",null,"Txn Date")," "),r.a.createElement("label",{className:"col-md-6 no-margin"},ge(t.stmt_txn_date))),r.a.createElement("div",{className:"row justify-content-center align-items-center py-2"},r.a.createElement("label",{className:"col-md-4 no-margin"},r.a.createElement("b",null,"Txn Amount ")),r.a.createElement("label",{className:"col-md-6 no-margin"},xe(t.cr_amt,e.currency_code),"  ")))))),r.a.createElement(ka.a,{className:"my-2"},r.a.createElement(ka.a.Header,{style:{backgroundColor:"#01062c",color:"white"}},r.a.createElement("h4",{style:{fontSize:"1.7rem"},className:"no-margin"},r.a.createElement("img",{src:"/logo_white.png"})," Matching FA Record (",r.a.createElement(ee.a,{style:{color:"white"},to:"/fa/view/"+t.loan_doc_id,target:"_blank"},t.loan_doc_id)," | ",r.a.createElement(ee.a,{style:{color:"white"},to:"/borrower/indiv/view/"+t.cust_id,target:"_blank"},t.cust_id),") ")),r.a.createElement(ka.a.Body,null,r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-6"},r.a.createElement("div",{className:"row reset-margin justify-content-center align-items-center py-2"},r.a.createElement("label",{className:"col-md-4 no-margin"},r.a.createElement("b",null,"Customer")),r.a.createElement("label",{className:"col-md-6 no-margin"},t.biz_name))),r.a.createElement("div",{className:"col-md-6"},r.a.createElement("div",{className:"row justify-content-center align-items-center py-2"},r.a.createElement("label",{className:"col-md-4 no-margin"},r.a.createElement("b",null,"Status")),r.a.createElement("label",{className:"col-md-6 no-margin"},t.status)))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-6"},r.a.createElement("fieldset",{className:"border border-dark p-2"},r.a.createElement("legend",{className:"w-auto",style:{fontSize:"15px"}},"Total Due"),r.a.createElement("div",{className:"row reset-margin justify-content-center align-items-center py-2"},r.a.createElement("label",{className:"col-md-5 no-margin"},r.a.createElement("b",null,"FA Due")),r.a.createElement("label",{className:"col-md-5 no-margin text-right"},xe(t.loan_principal,e.currency_code)," ")),r.a.createElement("div",{className:"row reset-margin justify-content-center py-2 align-items-center"},r.a.createElement("label",{className:"col-md-5 no-margin"},r.a.createElement("b",null,"Fee Due")),r.a.createElement("label",{className:"col-md-5 no-margin text-right"},xe(t.flow_fee,e.currency_code)," ")),r.a.createElement("div",{className:"row reset-margin justify-content-center align-items-center py-2"},r.a.createElement("label",{className:"col-md-5 no-margin"},r.a.createElement("b",null,"Penalty Due")),r.a.createElement("label",{className:"col-md-5 no-margin text-right"},xe(t.to_capture.tot_prov_penalty,e.currency_code)," ")))),r.a.createElement("div",{className:"col-md-6"},r.a.createElement("fieldset",{className:"border border-dark p-2"},r.a.createElement("legend",{className:"w-auto",style:{fontSize:"15px"}},"Already Paid"),r.a.createElement("div",{className:"row reset-margin justify-content-center align-items-center py-2"},r.a.createElement("label",{className:"col-md-5 no-margin"},r.a.createElement("b",null,"FA Paid")),r.a.createElement("label",{className:"col-md-5 no-margin text-right"},xe(t.paid_principal,e.currency_code)," ")),r.a.createElement("div",{className:"row reset-margin justify-content-center align-items-center py-2"},r.a.createElement("label",{className:"col-md-5 no-margin"},r.a.createElement("b",null,"Fee Paid")),r.a.createElement("label",{className:"col-md-5 text-right"},xe(t.paid_fee,e.currency_code)," ")),r.a.createElement("div",{className:"row reset-margin justify-content-center align-items-center py-2"},r.a.createElement("label",{className:"col-md-5 no-margin"},r.a.createElement("b",null,"Penalty (Paid + Waived) ")),r.a.createElement("label",{className:"col-md-5 no-margin text-right"},xe(t.paid_penalty,e.currency_code)," "))))),r.a.createElement("fieldset",{className:"border border-dark mt-2 p-2"},r.a.createElement("legend",{className:"w-auto",style:{fontSize:"15px"}},"Current Outstanding"),r.a.createElement("div",{className:"row justify-content-around"},r.a.createElement("div",{className:"col-md-3"},r.a.createElement("div",{className:"row reset-margin justify-content-center align-items-center py-2"},r.a.createElement("label",{className:"col-md-5 reset-padding"},r.a.createElement("b",null,"OS Principal")),r.a.createElement("label",{className:"col-md-7 text-right"},xe(t.os_principal,e.currency_code)," "))),r.a.createElement("div",{className:"col-md-3"},r.a.createElement("div",{className:"row reset-margin justify-content-center align-items-center py-2"},r.a.createElement("label",{className:"col-md-5 label__name reset-padding"},r.a.createElement("b",null,"OS Fee")),r.a.createElement("label",{className:"col-md-7 text-right"},xe(t.os_fee,e.currency_code)," "))),r.a.createElement("div",{className:"col-md-3"},r.a.createElement("div",{className:"row reset-margin  justify-content-center align-items-center py-2"},r.a.createElement("label",{className:"col-md-5 label__name reset-padding mb-1"},r.a.createElement("b",null,"OS Penalty")),r.a.createElement("label",{className:"col-md-7 text-center"},xe(t.os_penalty,e.currency_code)),t.os_penalty-t.to_capture.penalty>0&&0==t.request_waiver&&r.a.createElement(r.a.Fragment,null,r.a.createElement("h6",{className:"col-md-5"}),r.a.createElement("h6",{className:"text-center col-md-8"},r.a.createElement(ee.a,{to:"#",onClick:e.handlePenaltyModal},"Waive Penalty"))),t.os_penalty-t.to_capture.penalty>0&&t.request_waiver&&r.a.createElement(r.a.Fragment,null,r.a.createElement("h6",{className:"col-md-5"}),r.a.createElement("h6",{className:"text-center col-md-8"},r.a.createElement(ee.a,{to:"#",onClick:e.handleReqWaiverModal},"Request Waiver")))))))))),"capture"===e.props.mode&&r.a.createElement(r.a.Fragment,null,r.a.createElement(ka.a,{className:"my-2"},r.a.createElement(ka.a.Header,{style:{backgroundColor:"#01062c",color:"white"}},r.a.createElement("h4",{className:"no-margin"},r.a.createElement("img",{src:"/logo_white.png"}))),r.a.createElement(ka.a.Body,null,r.a.createElement(Xn,{handleExcessModal:e.handleExcessModal,handleReqWaiverModal:e.handleReqWaiverModal,handleWaiverModal:e.handleWaiverModal,summary:t}))),r.a.createElement(ka.a,null,r.a.createElement(ka.a.Header,{style:{backgroundColor:"#01062c",color:"white",padding:15}},r.a.createElement("h4",{className:"no-margin",style:{fontSize:20}},r.a.createElement(Jn,{file_name:"t_"+v("acc_prvdr_logos")[e.state.summary.acc_prvdr_code],entity:"acc_prvdr",entity_code:e.state.summary.acc_prvdr_code,country_code:e.country_code,color:"logo_style"}),"\xa0\xa0 Account Credit Transaction")),r.a.createElement(ka.a.Body,null,r.a.createElement("div",{className:"row no-margin"},r.a.createElement("div",{className:"col-md-6 reset-padding"},r.a.createElement("div",{className:"row no-margin justify-content-center align_ver_center"},r.a.createElement("label",{className:"col-md-5 no-margin reset-padding"},r.a.createElement("b",null,"Credit To Account (",e.props.data.lender_name,")"),r.a.createElement("font",{className:"text-danger"},"   *  ")," "),r.a.createElement("div",{className:"col-sm-5 reset-padding"},r.a.createElement("select",{id:"to_ac_id",ref:function(t){return e.to_acc=t},onChange:function(t){e.handleSelfChange(t),e.enableTxnID(t)},className:"form-control ".concat(e.state.credit_style),type:"text"},e.state.lender_accounts_dd))),r.a.createElement("div",{className:"row no-margin justify-content-center align_ver_center"},r.a.createElement("label",{className:"col-md-5 no-margin reset-padding"},r.a.createElement("b",null,"Credit Repayment Amount "),r.a.createElement("font",{className:"text-danger"},"   *  ")," "),r.a.createElement("div",{className:"col-sm-5 reset-padding"},r.a.createElement("input",{autoComplete:"off",type:"text",className:"form-control ".concat(e.state.credit_style),id:"amount",onChange:function(t){e.handleSelfChange(t),e.enableTxnID(t)},required:"required"})),r.a.createElement("div",{className:"col-sm-5 reset-padding"}),r.a.createElement("div",{className:"col-sm-5 reset-padding"},r.a.createElement("label",{className:"mt-2 ".concat(e.state.credit_style)},r.a.createElement("input",{type:"checkbox",onChange:e.handlePartPaymentCheckboxClick}),"\xa0",r.a.createElement("b",{className:"red_color_font"},"Part Payment")))),r.a.createElement("div",{className:"row no-margin justify-content-center align_ver_center"},r.a.createElement("label",{className:"col-md-5 reset-padding no-margin"},r.a.createElement("b",null,"Credit Payment Date"),r.a.createElement("font",{className:"text-danger"},"   *  ")," "),r.a.createElement("div",{className:"col-sm-5 reset-padding  ".concat(e.state.credit_style)},r.a.createElement(Ht.a,{closeOnSelect:!0,onChange:function(t){e.handleSelfDateChange("txn_date",t),e.enableTxnID(t)},dateFormat:"DD MMM YYYY",timeFormat:!1,required:"required"}))),r.a.createElement("div",{className:"row no-margin justify-content-center align_ver_center"},r.a.createElement("label",{className:"col-md-5 no-margin reset-padding"},r.a.createElement("b",null,"Credit Payment Txn ID "),r.a.createElement("font",{className:"text-danger"},"   *  ")," "),r.a.createElement("div",{className:"col-sm-5 reset-padding"},r.a.createElement("input",{autoComplete:"off",type:"text",id:"acc_stmt_txn_id",className:"form-control ".concat(e.state.txn_id_style," ").concat(e.state.credit_style),onChange:function(t){e.handleSelfChange(t),e.handleTxnId(t,"payment_capture")},tabIndex:"-1",required:"required"})),r.a.createElement("div",{className:"col-sm-5 reset-padding"})),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("div",{className:"row d-flex justify-content-center"},e.state.txn_data&&e.state.evidence_active&&r.a.createElement(r.a.Fragment,null,r.a.createElement("br",null),r.a.createElement("div",{class:"alert alert-success"},e.state.txn_data.map(function(e){return r.a.createElement("h6",null,"Amount : ",e.cr_amt," | Txn Date : ",e.stmt_txn_date," | Description : ",e.descr)}))),e.state.txn_failed_msg&&e.state.evidence_active&&r.a.createElement("div",{class:"alert alert-danger "},r.a.createElement("h6",null,e.state.txn_failed_msg))),r.a.createElement("br",null)),e.state.txn_failed_msg&&E("loan","skip_txn_id_check")&&!e.state.txn_failed_msg[0].includes("You cannot capture the repayment here")&&r.a.createElement("div",{className:"col-md-6 reset-padding"},r.a.createElement(r.a.Fragment,null,r.a.createElement("fieldset",{className:"border border-dark p-2",style:{margin:"25px 0px"}},r.a.createElement("legend",{className:"w-auto text-labelblue",style:{fontSize:"15px"}},"Transaction Evidence"),r.a.createElement("div",{className:"row no-margin justify-content-center align_ver_center"},r.a.createElement("label",{className:"col-md-5 reset-padding no-margin"},r.a.createElement("b",null,"Reason for Skip"),r.a.createElement("font",{className:"text-danger"},"   *  ")),r.a.createElement("div",{className:"col-sm-5 reset-padding"},r.a.createElement("select",{id:"reason_for_skip",onChange:function(t){e.handleSelfChange(t)},className:"form-control ".concat(e.state.credit_style),type:"text",required:"required"},e.getSelectOptions("skip_txn_id_check")))),r.a.createElement("div",{className:"row labelTopgap align-items-center mt-2",style:{marginLeft:"40px"}},r.a.createElement(Gt,{id:"photo_payment_proof",mode:"create",entity:"loan_txns",type:"image",txn_id:e.repayment_txn.acc_stmt_txn_id,onEditUpload:function(t){e.handleChangeForEdit(t),e.handleSave(t,"reload")},onCreateUpload:e.setChangeToState,label:"Payment Transaction Proof"})))))),r.a.createElement("div",{className:"row mt-3"},r.a.createElement("div",{className:"col-md-12"},r.a.createElement("input",{type:"button",className:"btn btn-primary float-right mr-1 ".concat(e.state.apply_btn),onClick:function(t){e.capture_repayment_summary(t,"".concat(e.state.btn_name))},value:e.state.btn_name})))))),r.a.createElement("div",{className:"capture"==e.props.mode?e.state.sync_div_style:"show_div"},r.a.createElement(ka.a,null,r.a.createElement(ka.a.Header,{style:{backgroundColor:"#01062c",color:"white",padding:15}},r.a.createElement("h4",{className:"no-margin",style:{fontSize:20}},"Sync Payment Transaction")),r.a.createElement(ka.a.Body,null,r.a.createElement("div",{className:"row justify-content-center py-2"},r.a.createElement("label",{className:"col-md-2 no-margin"},r.a.createElement("b",null,"Status after Sync")),r.a.createElement("label",{className:"col-md-0 no-margin ".concat("settled"===t.new_status&&"text-green overdue_fontBold"," ").concat("overdue"===t.new_status&&"text-red overdue_fontBold excess_fieldText_blinker")},t.new_status.toUpperCase(),"  "),r.a.createElement(se.a,{placement:"top",trigger:"hover",overlay:r.a.createElement(oe.a,{style:{padding:"5px",fontFamily:"Montserrat",width:"100%"}},r.a.createElement("div",null,r.a.createElement("div",{className:"row no-margin"},r.a.createElement("h6",{className:"col-6 reset-padding",style:{fontSize:10,margin:0,textAlign:"right"}},"Payment Status\xa0\xa0:\xa0\xa0"),r.a.createElement("h6",{className:"col-6 reset-padding",style:{fontSize:10,margin:0,textAlign:"left"}},pe(t.payment_status))),"review_pending"==t.payment_status&&r.a.createElement("div",{className:"row no-margin"},r.a.createElement("h6",{className:"col-6 reset-padding",style:{fontSize:10,margin:0,textAlign:"right"}},"Review Reason\xa0\xa0:\xa0\xa0"),r.a.createElement("h6",{className:"col-6 reset-padding",style:{fontSize:10,margin:0,textAlign:"left"}},pe(t.review_reason)))))},r.a.createElement(ie.a,{class:"ml-2",size:13}))),r.a.createElement("div",{className:"row reset-margin justify-content-center py-2"},r.a.createElement("label",{className:"col-md-3 no-margin text-center"},r.a.createElement("b",null," Against FA Due")),r.a.createElement("label",{className:"col-md-3 no-margin text-center"},r.a.createElement("b",null," Against Fee ")),r.a.createElement("label",{className:"col-md-3 no-margin text-center"},r.a.createElement("b",null," Against Penalty"))),r.a.createElement("div",{className:"row reset-margin justify-content-center py-2"},r.a.createElement("div",{className:"col-md-3"},r.a.createElement("input",{type:"checkbox",id:"toggle_1",className:"toggle visually-hidden",checked:e.state.FAcheck_box_checked,onChange:function(t){return e.handleReviewChange(t,"fa")},value:"1"}),r.a.createElement("label",{className:"h-40 select_toogle reset_width reset_font_size text-right no-margin ".concat(e.state.fa?"bordered_green":" "),for:"toggle_1"},xe(t.to_capture.principal,e.currency_code)," "),e.state.fa?r.a.createElement("h6",{className:"text-center text-green"},r.a.createElement("b",null,"(reviewed)")):r.a.createElement("h6",{className:"text-center"},r.a.createElement("b",null,"(review)"))),r.a.createElement("div",{className:"col-md-3 "},r.a.createElement("input",{type:"checkbox",id:"toggle_2",className:"toggle visually-hidden",checked:e.state.FEEcheck_box_checked,onChange:function(t){return e.handleReviewChange(t,"fee")},value:"2"}),r.a.createElement("label",{className:"h-40 select_toogle reset_width reset_font_size text-right no-margin ".concat(e.state.fee?"bordered_green":" "),for:"toggle_2"},xe(t.to_capture.fee,e.currency_code)," "),e.state.fee?r.a.createElement("h6",{className:"text-center text-green"},r.a.createElement("b",null,"(reviewed)")):r.a.createElement("h6",{className:"text-center"},r.a.createElement("b",null,"(review)"))),r.a.createElement("div",{className:"col-md-3 "},r.a.createElement("input",{type:"checkbox",id:"toggle_3",className:"toggle visually-hidden",checked:e.state.PENcheck_box_checked,onChange:function(t){return e.handleReviewChange(t,"penalty")},value:"3"}),r.a.createElement("label",{className:"h-40 select_toogle reset_width reset_font_size text-right no-margin ".concat(e.state.penalty?"bordered_green":" "),for:"toggle_3"},xe(t.to_capture.penalty,e.currency_code)),e.state.penalty?r.a.createElement("h6",{className:"text-center text-green"},r.a.createElement("b",null,"(reviewed)")):r.a.createElement("h6",{className:"text-center"},r.a.createElement("b",null,"(review)")))),e.state.excess_field&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"rule-form-group form-group row reset-margin justify-content-center"},r.a.createElement("label",{className:"col-md-3 label__name text-center"},r.a.createElement("b",null," Against Excess "))),r.a.createElement("div",{className:"row justify-content-center"},r.a.createElement("div",{className:"col-md-3"},r.a.createElement("input",{type:"checkbox",id:"toggle_4",className:"toggle visually-hidden",checked:e.state.EXCcheck_box_checked,onChange:function(t){return e.handleReviewChange(t,"excess")},value:"4"}),r.a.createElement("div",{style:{position:"relative"}},r.a.createElement("div",{className:"excess_fieldBlinker_box"}),r.a.createElement("label",{className:"h-40 select_toogle reset_width reset_font_size text-right no-margin reset_position ".concat(e.state.excess?"bordered_green":" "),for:"toggle_4"}," ",xe(t.to_capture.excess,e.currency_code))),e.state.excess?r.a.createElement("h6",{className:"text-center text-green"},r.a.createElement("b",null,"(reviewed)")):r.a.createElement("h6",{className:"text-center"},r.a.createElement("b",null,"(review)")))))))))),e.state.processing&&r.a.createElement("p",{style:{color:"red",textAlign:"right"}},e.state.processing)),r.a.createElement(rt.a.Footer,null,r.a.createElement("div",{className:"col-md-9 reset-margin reset-padding"},E("loan","review_sync")&&r.a.createElement("button",{type:"button",className:"btn btn-primary float-right mr-1 ".concat(e.state.repayment_style),onClick:e.handleSubmit,disabled:e.state.calling_api},"Review & Sync"),E("loan","unlink_payment")&&"recon"==e.props.mode&&r.a.createElement("button",{type:"button",className:"btn btn-danger float-right mr-1",onClick:e.handleUnlinkPayment,disabled:e.state.calling_api},"Unlink Payment "),r.a.createElement("button",{type:"button",className:"btn btn-outline-primary float-right mr-5 ",onClick:e.handleClose,"data-dismiss":"modal","aria-label":"Close"},"Cancel"))))):null},e}return Object(o.a)(a,[{key:"componentWillMount",value:function(){this.repayment_txn={amount:0},this.setState({data:this.props.data})}},{key:"componentWillReceiveProps",value:function(e){if(this.setState({data:e.data}),"capture"==this.props.mode){var t=this.props.data.lender_code,a=this.props.data.acc_prvdr_code,n=this.props.data.cust_id,r={lender_code:t,status:"enabled",network_prvdr_code:a,cust_id:n},l={cust_id:n,status:"enabled",acc_purpose:this.props.data.loan_purpose};this.setOptionsListToStateFromAppApi("common","lender_accounts",this.req({lender_account:r}),["account_id","acc_num_disp_txt"]),this.setOptionsListToStateFromAppApi("common","customer_accounts",this.req({customer_account:l}),["account_id","acc_num_disp_txt"])}}},{key:"handleTxnId",value:function(e,t){var a=this,n="payment_capture"==t||"payment_capture"==this.state.type?this.repayment_txn.acc_stmt_txn_id:"paid_to_diff_acc"==t||"duplicate_payment"==t||"testing"==t?this.state.recon_data.txn_id:"excess_capture"!=t||this.state.summary?this.state.summary.txn_id:this.state.data.stmt_txn_id,r="payment_capture"==t||"payment_capture"==this.state.type?"credit_".concat(this.to_acc.value,",debit_").concat(this.to_acc.value):"paid_to_diff_acc"==t?"credit_".concat(this.state.recon_data.to_acc_id,",debit_").concat(this.state.data.account_id):"duplicate_payment"==t?this.state.recon_data.from_acc_id:"excess_capture"!=t&&"testing"!=t||this.state.summary?this.state.summary.from_ac_id:this.state.data.account_id,l="payment_capture"==t||"payment_capture"==this.state.type||"testing"==t?"credit":"debit",c="payment_capture"==t||"payment_capture"==this.state.type||"excess_capture"==t&&this.state.summary?this.state.summary.loan_doc_id:"testing"==this.state.type?null:this.state.recon_data.loan_doc_id,s="payment_capture"==t||"payment_capture"==this.state.type||"excess_capture"==t?this.repayment_txn.txn_date:"excess_capture"!=t||this.state.summary?this.state.recon_data.txn_date:this.state.data.stmt_txn_date;this.setState({txn_data:"",txn_msg:"",txn_failed_msg:""}),"payment_capture"==t?this.setState({evidence_active:!0,excess_capture:!1}):"excess_capture"==t&&this.setState({evidence_active:!1,excess_capture:!0}),n.length>2&&Bn(this.req({loan_doc_id:c,acc_id:r,txn_id:n,txn_date:s,is_skip_trans_id_check:!1,mode:l,type:t},!0)).then(function(e){a.resp(e),e&&("success"===e.status?(a.setState({apply_btn:"",txn_data:"",txn_failed_msg:"",is_skip_trans_id_check:!0}),e.data?e.data.hasOwnProperty("ignore_check")?a.setState({txn_failed_msg:e.data.message,apply_btn:"",is_skip_trans_id_check:!0}):e.data.hasOwnProperty("message")&&!e.data.hasOwnProperty("acc_stmt_records")?e.data.message[0].includes("You cannot capture the repayment here")?a.setState({apply_btn:"disable_div",txn_failed_msg:e.data.message}):"testing"==t?a.setState({apply_btn:"disable_div",txn_failed_msg:e.data.message}):a.setState({txn_failed_msg:e.data.message}):!e.data.hasOwnProperty("message")&&(("paid_to_diff_acc"==t||"testing"==t)&&(e.data.total_amount==a.state.data.cr_amt||e.data.total_amount==a.state.data.dr_amt)||a.repayment_txn&&e.data.total_amount==a.repayment_txn.amount||e.data.total_amount==a.state.recon_data.reversal_amount||a.state.summary&&e.data.total_amount==a.state.summary.amount||"payment_capture"==t&&e.data.total_amount==a.state.data.cr_amt||"excess_capture"==t&&e.data.total_amount==a.state.recon_data.amount)?a.setState({txn_data:e.data.acc_stmt_records,apply_btn:"",is_skip_trans_id_check:!1}):e.data.hasOwnProperty("message")&&"paid_to_diff_acc"==t&&(e.data.total_amount==a.state.data.cr_amt||e.data.total_amount==a.state.data.dr_amt)||a.repayment_txn&&e.data.total_amount==a.repayment_txn.amount||a.state.summary&&e.data.total_amount==a.state.summary.amount||"payment_capture"==t&&e.data.total_amount==a.state.data.cr_amt||e.data.total_amount==a.state.recon_data.reversal_amount?a.setState({txn_failed_msg:e.data.message,txn_data:e.data.acc_stmt_records}):"payment_capture"==t&&e.data.total_amount!=a.repayment_txn.amount?a.setState({txn_failed_msg:["Please check the repayment amount."]}):"excess_capture"==t&&(a.state.summary&&e.data.total_amount!=a.state.summary.amount||e.data.total_amount!=a.state.recon_data.amount)?a.setState({txn_failed_msg:["Please check the excess amount."]}):"duplicate_payment"==t&&e.data.total_amount!=a.state.recon_data.reversal_amount&&a.setState({txn_failed_msg:["Please check the amount."]}):a.setState({txn_failed_msg:["Please check the transaction ID. No payment received to the account with this transaction ID."]})):alert(e.message+"\n"+JSON.stringify(e.data)))})}},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,this.WaiverModal(this.state.summary,this.state.waiver_field),this.ReturnExcessModal(this.state.summary),this.ManualReconModal(this.props.data),this.RequestWaiverModal(this.state.summary),this.RepaymentSummaryModal(this.state.summary),"recon"==this.props.mode||"capture"==this.props.mode?r.a.createElement("input",{value:this.props.title,type:"button",className:"btn btn-primary repayment",id:this.props.data.id,variant:"danger",onClick:function(t){e.capture_repayment_summary(t,"capture_repayment")}}):r.a.createElement("input",{value:this.props.title,type:"button",className:"btn btn-primary repayment",id:this.props.data.id,variant:"danger",onClick:this.handleManualReconModal}))}}]),a}(ut);function tr(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(u.a)(e);if(t){var r=Object(u.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(m.a)(this,a)}}var ar=function(e){Object(d.a)(a,e);var t=tr(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={repayment_style:"disable_div",unlink_payment:{},reviewed:0,modalBox:!1,modalBox2:!1,modal:null,manual_recon:{},opacity:""},e}return Object(o.a)(a,[{key:"componentWillMount",value:function(){this.setState({data:this.props.data})}},{key:"componentWillReceiveProps",value:function(e){this.setState({data:e.data})}},{key:"recon_status",value:function(e){var t=e.recon_status,a=e.stmt_txn_type;return 1==this.props.show_btn&&"10_capture_payment_pending"==t?r.a.createElement(er,{id:"manual_recon",mode:"recon",title:"Review & Sync",data:e,onSync:this.props.onSync}):0==this.props.show_btn&&"80_recon_done"==t?r.a.createElement("span",{className:"font-weight-bold",style:{color:"#007bff"}},Ze(t)):1==this.props.show_btn&&E("recon","reinitiate_recon")&&("31_paid_to_different_acc"==t||"60_non_fa_credit"==t||"debit"==a&&"30_no_matching_fa"==t||"credit"==a&&"30_no_matching_fa"==t||"debit"==a&&"75_redemption_int_transfer"==t||"credit"==a&&"20_no_match_customers"==t)?r.a.createElement(er,{id:"manual_recon",parent:this.props.parent,mode:"manual_recon",title:"Manual Recon",data:e,onSync:this.props.onSync}):0==this.props.show_btn?Ze(t):void 0}},{key:"recon_desc",value:function(e){var t=e.recon_status,a=e.recon_desc;e.stmt_txn_type;if("70_incorrect_amount_in_fa"==t)return Ze(a);if("50_multiple_fas_matched"==t||"05_multiple_fas_captured"==t){var n=a.split(",");return r.a.createElement("span",null,r.a.createElement(ee.a,{to:"/fa/view/"+n[0],style:{color:"grey"},target:"_blank"},n[0]),"\xa0|\xa0",r.a.createElement(ee.a,{to:"/fa/view/"+n[1],style:{color:"grey"},target:"_blank"},n[1]))}if("30_no_matching_fa"==t||"20_no_match_customers"==t)return Ze(a);if("40_multi_match_customers"==t){var l=a.split(",");return r.a.createElement("span",null," ",r.a.createElement(ee.a,{to:"/borrower/indiv/view/"+l[0],target:"_blank"},l[0]),"\xa0|\xa0",r.a.createElement(ee.a,{to:"/borrower/indiv/view/"+l[1],target:"_blank"},l[1]))}}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,0==this.props.show_btn?r.a.createElement("td",null,r.a.createElement(jt,{base:this.recon_status(this.state.data),overlay:this.recon_desc(this.state.data)})):this.recon_status(this.state.data))}}]),a}(ut);function nr(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(u.a)(e);if(t){var r=Object(u.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(m.a)(this,a)}}var rr=function(e){Object(d.a)(a,e);var t=nr(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={section1:"show_div",account:{},rowdatas:[],columndatas:[],copy:[],showtable:!1,disable_btn:!0},e.handleFields=function(t){""!=t.target.value?e.setState({section1:"disable_div"}):""==t.target.value&&e.setState({section1:"show_div"}),e.handleChange(t)},e.handleChange=function(t){e.setState(Object(X.a)({},e.state,{account_id:t.target.value,disable_btn:!1}))},e.changeHandler=function(t){var a=t,n=e.state.rowdatas.filter(function(e){return null!==e.stmt_txn_type&&e.stmt_txn_type.toLowerCase().includes(a.toLowerCase())||null!==e.stmt_txn_id&&e.stmt_txn_id.includes(a)||null!==e.loan_doc_id&&e.loan_doc_id.toLowerCase().includes(a.toLowerCase())||null!==e.descr&&e.descr.toLowerCase().includes(a.toLowerCase())});e.setState(function(e){return e.copy=n})},e.SearchController=function(){var t=new Date,a=String(t.getDate()).padStart(2,"0"),n=String(t.getMonth()+1).padStart(2,"0");t=t.getFullYear()+"-"+n+"-"+a;e.setState({showtable:!0});var r={account_id:e.state.account_id,status:null,stmt_txn_date__from:t,stmt_txn_date__to:t,stmt_txn_type:"debit"};ia(e.req({statement_search:r},!1,"statement_search")).then(function(t){if(e.resp(t),console.log(t),!t)return null;"success"===t.status&&(e.setState(function(e){return e.rowdatas=t.data.account_txns}),e.setState(function(e){return e.copy=t.data.account_txns}),e.setState(function(t){return t.columndatas=e.columndatas()}))})},e}return Object(o.a)(a,[{key:"componentWillMount",value:function(){var e={lender_code:this.lender_code,acc_purpose:"disbursement",status:"enabled"};this.setOptionsListToStateFromAppApi("common","lender_accounts",this.req({lender_account:e}),["account_id","acc_num_disp_txt"])}},{key:"columndatas",value:function(){var e=this;return[{Header:"SI No.",id:"row",width:60,Cell:function(e){return r.a.createElement("div",null,e.index+1,console.log("rowtytytyg.row",e))}},{Header:"Cust ID",id:"cust_id",width:160,accessor:function(e){return r.a.createElement("div",null," ",r.a.createElement(ee.a,{className:"d-block",style:{color:"#149cb2"},to:"/borrower/indiv/view/"+e.cust_id,target:"_blank"},e.cust_id))}},{Header:"FA ID",id:"loan_doc_id",width:160,accessor:function(e){return r.a.createElement("div",null," ",r.a.createElement(ee.a,{className:"d-block",style:{color:"#149cb2"},to:"/fa/view/"+e.loan_doc_id,target:"_blank"},e.loan_doc_id))}},{Header:r.a.createElement("div",{className:"text-right"},"FA Amount"),id:"dr_amt",accessor:function(t){return Re(xe(t.dr_amt,e.currency_code))}},{Header:r.a.createElement("div",{className:"text-right"},"Disbursed Time"),id:"stmt_txn_time",width:100,accessor:function(e){return Re(r.a.createElement("div",null,e.stmt_txn_date.substr(11,20)))}},{Header:"Stmt Txn ID",id:"stmt_txn_id",accessor:function(e){return e.stmt_txn_id}},{Header:r.a.createElement("div",{className:""},"Description"),id:"descr",accessor:function(e){return r.a.createElement("div",{className:""},r.a.createElement(Dt,{full_text:e.descr,no_reduce:!0}))}},{Header:"Matching FA ID",id:"chk_fa_id",accessor:function(t){return e.chk_fa_id(t)}},{Header:"Recon Status",id:"recon",accessor:function(t){return r.a.createElement(ar,{data:t,onSync:e.handleTransactionlist})}}]}},{key:"chk_fa_id",value:function(e){var t=e.loan_doc_id,a=e.recon_status;return t?"10_capture_payment_pending"==a?r.a.createElement("span",null,r.a.createElement(ee.a,{style:{color:"grey"},to:"/fa/view/"+t,target:"_blank"},t)):"80_recon_done"==a?r.a.createElement("span",null,r.a.createElement(ee.a,{to:"/fa/view/"+t,style:{color:"#007bff"},target:"_blank"},t)):r.a.createElement(ee.a,{to:"/fa/view/"+t,style:{color:"grey"},target:"_blank"},t):"NA"}},{key:"render",value:function(){var e=this;return console.log("this.state",this.state.account_id),r.a.createElement("div",{className:""},r.a.createElement("h2",{className:"text-white text-center"},"Today Disbursed FAs"),r.a.createElement("div",{className:"date-range ",style:{padding:15}},r.a.createElement("div",{className:"form-row d-flex align-items-center"},r.a.createElement("div",{className:"form-group col-md-3"},r.a.createElement("span",{className:"form-label"},"Accounts"),r.a.createElement("font",{className:"text-danger"},"   *  "),r.a.createElement("select",{id:"from_acc_id",className:"form-control",defaultValue:this.selected.lender_accounts,ref:function(t){return e.from_acc=t},required:"required",onChange:function(t){return e.handleChange(t)}},this.state.lender_accounts_dd),console.log("this.state.today",this.state.today)),r.a.createElement("div",{className:"",style:{paddingLeft:"30px "}},r.a.createElement(lt.a,{className:"btn btn-secondory ",onClick:function(){return e.SearchController()},disabled:this.state.disable_btn},"Search")," \xa0"))),(this.state.rowdatas.length>0||0===this.state.rowdatas.length)&&this.state.showtable&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"d-flex justify-content-between align-items-center",style:{padding:5}},r.a.createElement("p",{className:"no-margin text-white"},r.a.createElement("b",null,"Total Entries : ",this.state.copy.length)),r.a.createElement("div",{style:{position:"relative"}},r.a.createElement("i",{class:"fa-solid fa-magnifying-glass search_pos"}),r.a.createElement("input",{placeholder:"Search here",className:"search_posInput",onChange:function(t){return e.changeHandler(t.target.value)}}))),r.a.createElement(za,{showPag:!0,minRow:0,row_data:void 0!==this.state.copy?this.state.copy:[],column_data:this.state.columndatas,resizable:!1,defaultSorted:[{id:"stmt_txn_date",desc:!1}],exportCSV:!0,csvFile:"Today_disbursed_FA",csvData:this.state.copy})))}}]),a}(ut);function lr(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(u.a)(e);if(t){var r=Object(u.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(m.a)(this,a)}}var cr=function(e){Object(d.a)(a,e);var t=lr(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={section1:"show_div",account:{}},e.handleResetClick=function(t){alert("called"),e.handleReset()},e.handleSection2=function(t){(t=ce()(t).format("YYYY-MM-DD")).target&&(t=t.target.value);""!=t?e.setState({section2:"disable_div"}):e.setState({section2:"show_div"})},e.handleFields=function(t){""!=t.target.value?e.setState({section1:"disable_div"}):""==t.target.value&&e.setState({section1:"show_div"}),e.handleChange(t)},e.loadAccounts=function(t){var a=e.lender_code,n=e.state.account;n[t.target.id]=t.target.value;var r=v("acc_prvdr_code")?v("acc_prvdr_code"):n.acc_prvdr_code,l=Object(X.a)({lender_code:a,country_code:e.country_code,to_recon:!0,network_prvdr_code:r},n);void 0!=r&&Pa(e.req({account:l},!0)).then(function(t){t&&("success"===t.status?""!=t.data&&e.getSelectOptionsFromResult(t.data,"lender_accounts",["id","name"]):alert(t.message+"\n"+JSON.stringify(t.data)))})},e}return Object(o.a)(a,[{key:"componentWillMount",value:function(){var e=this;this.setOptionsToStateFromApi("lender"),this.setOptionsListToStateFromAppApi("common","list",Object(X.a)({},this.def_req,{status:"enabled",biz_account:!0}),["acc_prvdr_code","name"],"acc_prvdrs");var t={master_data:{status:"enabled",data_key:"account_transaction_type"}};Ge(this.req(t)).then(function(t){t&&("success"===t.status?e.getSelectOptionsFromResult(t.data,"account_txn_type",["data_code","data_value"]):alert(t.message+"\n"+JSON.stringify(t.data)))});var a=this.lender_code,n=v("acc_prvdr_code"),r={lender_code:a,country_code:this.country_code,to_recon:!0,network_prvdr_code:n};void 0!=n&&Pa(this.req({account:r},!0)).then(function(t){t&&("success"===t.status?""!=t.data&&e.getSelectOptionsFromResult(t.data,"lender_accounts",["id","name"]):alert(t.message+"\n"+JSON.stringify(t.data)))})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"date-range",style:{padding:15}},r.a.createElement("div",{className:"form-row"},!this.admin_roles.includes(v("role_codes"))&&r.a.createElement("div",{className:"col-md-3"},r.a.createElement("span",null,"Account Provider"),r.a.createElement("font",{className:"text-danger"},"   *  "),r.a.createElement("select",{id:"acc_prvdr_code",value:this.props.data.acc_prvdr_code,onChange:function(t){e.handleChange(t),e.loadAccounts(t)},className:"form-control",type:"text",required:"required"},this.state.acc_prvdrs_dd)),r.a.createElement("div",{className:"form-group col-md-3"},r.a.createElement("span",{className:"form-label"},"Accounts"),r.a.createElement("font",{className:"text-danger"},"   *  "),r.a.createElement("select",{id:"account_id",className:"form-control",required:"required",onChange:this.handleChange},this.state.lender_accounts_dd)),r.a.createElement("div",{className:"form-group col-md-3 ".concat(this.state.section1)},r.a.createElement("span",{className:"form-label"},"Start Date"),r.a.createElement("font",{className:"text-danger"},"   *  "),r.a.createElement(Ht.a,{closeOnSelect:!0,onChange:function(t){e.handleDateChange("stmt_txn_date__from",t),e.handleSection2(t)},dateFormat:"DD MMM YYYY",timeFormat:!1,required:"required"})),r.a.createElement("div",{className:"form-group col-3 ".concat(this.state.section1)},r.a.createElement("span",{className:"form-label"},"End Date"),r.a.createElement("font",{className:"text-danger"},"   *  "),r.a.createElement(Ht.a,{closeOnSelect:!0,onChange:function(t){e.handleDateChange("stmt_txn_date__to",t),e.handleSection2(t)},dateFormat:"DD MMM YYYY",timeFormat:!1,required:"required"})),r.a.createElement("div",{className:"form-group col-md-3 ".concat(this.state.section1)},r.a.createElement("span",{className:"form-label"},"Statement Transaction Type"),r.a.createElement("select",{id:"stmt_txn_type",className:"form-control",onChange:this.handleChange},this.getSelectOptions("stmt_txn_type")))),r.a.createElement("div",{className:"form-row"},E("recon","recon_status")&&r.a.createElement("div",{className:"form-group col-md-3 ".concat(this.state.section1)},r.a.createElement("span",{className:"form-label"},"Matching Status"),r.a.createElement("select",{id:"recon_status",className:"form-control",onChange:this.handleChange},this.getSelectOptions("recon_status"))),r.a.createElement("div",{className:"form-group col-md-3 ".concat(this.state.section1)},r.a.createElement("span",{className:"form-label"},"Matching Status"),r.a.createElement("select",{id:"recon_status",className:"form-control",onChange:this.handleChange},r.a.createElement("option",{value:""},"choose"),r.a.createElement("option",{value:"10_capture_payment_pending"},"Capture Payment Pending"),r.a.createElement("option",{value:"80_recon_done"},"Recon Done"),r.a.createElement("option",{value:"cant_recon"},"Can't Recon"))),r.a.createElement("div",{className:"form-group col-md-3 ".concat(this.state.section2)},r.a.createElement("span",{className:"form-label"},"Statement Transaction ID"),r.a.createElement("input",{id:"stmt_txn_id",className:"form-control",onChange:function(t){e.handleFields(t),e.handleChange(t)},required:!0})),r.a.createElement("div",{className:"form-group col-md-3 ".concat(this.state.section2)},r.a.createElement("span",{className:"form-label"},"FA ID"),r.a.createElement("input",{id:"loan_doc_id",className:"form-control",onChange:function(t){e.handleFields(t),e.handleChange(t)},required:!0}))),r.a.createElement("div",{className:"form-row justify-content-md-center mt-3"},r.a.createElement(lt.a,{className:"btn btn-secondory ",onClick:this.props.onlist,disabled:this.props.disable_btn},"Search")," \xa0"))}}]),a}(ut),sr=a(48);function or(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(u.a)(e);if(t){var r=Object(u.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(m.a)(this,a)}}var ir=function(e){Object(d.a)(a,e);var t=or(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(e=t.call.apply(t,[this].concat(l))).state={statement_search:{},repayment_style:"disable_div",lenderTxnStmts:null,account_result:"hide_div",modalBox:!0,modal:null,unlink_payment:{},reviewed:0,recon_status:!0,rowdatas:[],columndatas:[],copy:[],show_column:!1},e.handleClose=function(t){e.setState({modalBox:!1,selected_payment:null})},e.handleSubmit=function(t){var a=e.state.selected_payment.amount,n=e.state.selected_payment.cust_name;if(0!=window.confirm("Are you sure the payment of ".concat(xe(a,e.currency_code)," was made by ").concat(n))){var r={loan_doc_id:e.state.selected_payment.loan_doc_id,acc_stmt_txn_id:e.state.selected_payment.acc_stmt_txn_id,amount:e.state.selected_payment.amount};Sn(e.req(r,!0)).then(function(t){if(!t)return null;"success"===t.status?(alert("Payment captured successfully"),e.handleClose(),e.handleTransactionlist()):alert(t.message)})}},e.capture_repayment=function(t,a){var n={acc_stmt_txn_id:t.target.id,loan_doc_id:a};e.setState({unlink_payment:n}),kn(e.req(n)).then(function(t){if(!t)return null;"success"===t.status?e.setState({modalBox:!0,selected_payment:t.data}):alert(t.message)})},e.handleUnlinkPayment=function(t){var a=e.state.selected_payment.amount,n=e.state.selected_payment.cust_name;if(console.log(e.state.selected_payment),0!=window.confirm("Are you sure this payment of ".concat(xe(a,e.currency_code)," is not related ").concat(n))){var r=e.state.unlink_payment;On(e.req(r,!0)).then(function(t){if(!t)return null;"success"===t.status?e.setState({modalBox:!1}):alert(t.message)})}},e.handleReviewChange=function(t){var a=t.target.checked,n=e.state.reviewed,r="disable_div";a?n++:n--,6==n&&(r=""),e.setState({reviewed:n,repayment_style:r})},e.handleReinitiateRecon=function(t,a){var n="credit"==a.stmt_txn_type?a.cr_amt:"debit"==a.stmt_txn_type&&a.dr_amt;0!=window.confirm("Are you sure to reinitiate this recon transaction ?")&&Wn(e.req({acc_stmt_id:a.id,txn_id:a.stmt_txn_id,amount:n})).then(function(t){e.resp(t),t&&"success"===t.status&&(alert(t.message),e.handleTransactionlist())})},e.handleTransactionlist=function(t){var a=e.state.statement_search;e.validate_search(a)&&(la()("#statement_search").DataTable().destroy(),ia(e.req({statement_search:a},!1,"statement_search")).then(function(t){if(e.resp(t),console.log(t),!t)return null;"success"===t.status?(e.setState(function(e){return e.rowdatas=t.data.account_txns}),e.setState(function(e){return e.copy=t.data.account_txns}),e.setState(function(t){return t.columndatas=e.columndatas()}),e.setState({account_result:"show_div"})):alert(t.message+"\n"+JSON.stringify(t.data))}))},e.changeHandler=function(t){var a=t,n=e.state.rowdatas.filter(function(e){return null!==e.stmt_txn_type&&e.stmt_txn_type.toLowerCase().includes(a.toLowerCase())||null!==e.stmt_txn_id&&e.stmt_txn_id.includes(a)||null!==e.loan_doc_id&&e.loan_doc_id.toLowerCase().includes(a.toLowerCase())||null!==e.descr&&e.descr.toLowerCase().includes(a.toLowerCase())});e.setState(function(e){return e.copy=n})},e.RepaymentSummaryModal=function(t){return t?r.a.createElement(rt.a,{show:e.state.modalBox,onHide:e.handleClose,size:"l"},r.a.createElement(rt.a.Header,{closeButton:!0,show:e.state.modalBox,onHide:e.handleClose},r.a.createElement(rt.a.Title,null,"Capture FA Payment (",t.loan_doc_id,")")),r.a.createElement(rt.a.Body,null,r.a.createElement("div",{className:"container"},r.a.createElement("p",null,"Review the below payment data by clicking over them."),r.a.createElement("form",null,r.a.createElement("div",{className:"rule-form-group form-group row reset-margin"},r.a.createElement("label",{for:"",className:"col-sm-4 label__name reset-padding"},"Account txn ID"),r.a.createElement("div",{className:"col-sm-8 reset-padding"},r.a.createElement("div",null,r.a.createElement("input",{type:"checkbox",id:"toggle_1",className:"toggle visually-hidden",onChange:e.handleReviewChange,value:"1"}),r.a.createElement("label",{className:"select_toogle",for:"toggle_1"},t.stmt_txn_id," "),r.a.createElement("div",{className:"control-me"})))),r.a.createElement("div",{className:"rule-form-group form-group row reset-margin"},r.a.createElement("label",{for:"",className:"col-sm-4 label__name reset-padding"},"Txn description"),r.a.createElement("div",{className:"col-sm-8 reset-padding"},r.a.createElement("div",null,r.a.createElement("input",{type:"checkbox",id:"toggle_2",className:"toggle visually-hidden",onChange:e.handleReviewChange,value:"1"}),r.a.createElement("label",{className:"select_toogle",for:"toggle_2"},t.descr),r.a.createElement("div",{className:"control-me"})))),r.a.createElement("div",{className:"rule-form-group form-group row reset-margin"},r.a.createElement("label",{for:"",className:"col-sm-4 label__name reset-padding"},"Customer"),r.a.createElement("div",{className:"col-sm-8 reset-padding"},r.a.createElement("div",null,r.a.createElement("input",{type:"checkbox",id:"toggle_3",className:"toggle visually-hidden",onChange:e.handleReviewChange,value:"1"}),r.a.createElement("label",{className:"select_toogle",for:"toggle_3"},t.cust_name," | ",t.biz_name),r.a.createElement("div",{className:"control-me"})))),r.a.createElement("div",{className:"rule-form-group form-group row reset-margin"},r.a.createElement("label",{for:"",className:"col-sm-4 label__name reset-padding"},"Cust ID"),r.a.createElement("div",{className:"col-sm-8 reset-padding"},r.a.createElement("div",null,r.a.createElement("input",{type:"checkbox",id:"toggle_4",className:"toggle visually-hidden",onChange:e.handleReviewChange,value:"2"}),r.a.createElement("label",{className:"select_toogle",for:"toggle_4"},t.cust_id," | ",t.acc_number),r.a.createElement("div",{className:"control-me"})))),r.a.createElement("div",{className:"rule-form-group form-group row reset-margin"},r.a.createElement("label",{for:"",className:"col-sm-4 label__name reset-padding"},"Payment amount"),r.a.createElement("div",{className:"col-sm-8 reset-padding"},r.a.createElement("div",null,r.a.createElement("input",{type:"checheckboxckbox",id:"toggle_5",className:"toggle visually-hidden",onChange:e.handleReviewChange,value:"3"}),r.a.createElement("label",{className:"select_toogle",for:"toggle_5"},xe(t.amount,e.currency_code)),r.a.createElement("div",{className:"control-me"})))),r.a.createElement("div",{className:"rule-form-group form-group row reset-margin"},r.a.createElement("label",{for:"",className:"col-sm-4 label__name reset-padding"},"Outstanding amount"),r.a.createElement("div",{className:"col-sm-8 reset-padding"},r.a.createElement("div",null,r.a.createElement("input",{type:"checkbox",id:"toggle_6",className:"toggle visually-hidden",onChange:e.handleReviewChange,value:"3"}),r.a.createElement("label",{className:"select_toogle",for:"toggle_6"},xe(t.current_os_amount,e.currency_code)),r.a.createElement("div",{className:"control-me"})))),r.a.createElement("div",{className:"row"},r.a.createElement("label",null,r.a.createElement("input",{type:"checkbox",onChange:e.handleSMSCheckboxClick,defaultChecked:!0}),"\xa0 Send payment confirmation notification SMS")))),e.state.processing&&r.a.createElement("p",{style:{color:"red",textAlign:"right"}},e.state.processing)),r.a.createElement(rt.a.Footer,null,r.a.createElement("div",{className:"col-md-9 reset-margin reset-padding"},r.a.createElement("button",{type:"button",className:"btn btn-primary float-right mr-1 ".concat(e.state.repayment_style),onClick:e.handleSubmit,disable:!0},"Capture Payment "),r.a.createElement("button",{type:"button",className:"btn btn-danger float-right mr-1",onClick:e.handleUnlinkPayment,disable:!0},"Unlink Payment "),r.a.createElement("button",{type:"button",className:"btn btn-outline-primary  mr-1",onClick:e.handleClose,"data-dismiss":"modal","aria-label":"Close"},"Cancel")))):null},e}return Object(o.a)(a,[{key:"componentWillMount",value:function(){E("recon","reinitiate_recon")&&this.setState({show_column:!0})}},{key:"validate_search",value:function(e){return!!(e.stmt_txn_date__from&&e.stmt_txn_date__to&&e.account_id||e.account_id&&e.stmt_txn_id||e.account_id&&e.loan_doc_id)||(alert("Please enter valid search criteria"),!1)}},{key:"chk_txn_type",value:function(e){return 0===e.cr_amt?r.a.createElement("span",null,Ze(e.stmt_txn_type)," ",r.a.createElement(sr.b,{className:"ml-2",color:"red"})):r.a.createElement("span",null,Ze(e.stmt_txn_type)," ",r.a.createElement(sr.a,{className:"ml-2",color:"green"}))}},{key:"chk_fa_id",value:function(e){var t=e.loan_doc_id,a=e.recon_status;return t?"10_capture_payment_pending"==a?r.a.createElement("span",null,r.a.createElement(ee.a,{style:{color:"grey"},to:"/fa/view/"+t,target:"_blank"},t)):"80_recon_done"==a?r.a.createElement("span",null,r.a.createElement(ee.a,{to:"/fa/view/"+t,style:{color:"#007bff"},target:"_blank"},t)):r.a.createElement(ee.a,{to:"/fa/view/"+t,style:{color:"grey"},target:"_blank"},t):"NA"}},{key:"recon_status",value:function(e){var t=this,a=e.recon_status;if("10_capture_payment_pending"==a){var n=e.id,l=e.loan_doc_id;return r.a.createElement(lt.a,{id:n,variant:"danger",onClick:function(e){return t.capture_repayment(e,l)}},"Capture Payment")}return"80_recon_done"==a?r.a.createElement("span",{className:"font-weight-bold",style:{color:"#007bff"}},Ze(a)):Ze(a)}},{key:"recon_desc",value:function(e){var t=e.recon_status,a=e.recon_desc;e.stmt_txn_type;if("70_incorrect_amount_in_fa"==t)return Ze(a);if("50_multiple_fas_matched"==t||"05_multiple_fas_captured"==t){var n=a.split(",");return r.a.createElement("span",null,r.a.createElement(ee.a,{to:"/fa/view/"+n[0],style:{color:"grey"},target:"_blank"},n[0]),"\xa0|\xa0",r.a.createElement(ee.a,{to:"/fa/view/"+n[1],style:{color:"grey"},target:"_blank"},n[1]))}if("30_no_matching_fa"==t||"20_no_match_customers"==t)return Ze(a);if("40_multi_match_customers"==t){var l=a.split(",");return r.a.createElement("span",null," ",r.a.createElement(ee.a,{to:"/borrower/indiv/view/"+l[0],target:"_blank"},l[0]),"\xa0|\xa0",r.a.createElement(ee.a,{to:"/borrower/indiv/view/"+l[1],target:"_blank"},l[1]))}}},{key:"columndatas",value:function(){var e=this;return[{Header:"SI No.",id:"row",maxWidth:50,Cell:function(e){return r.a.createElement("div",null,e.index+1)}},{Header:"Stmt Txn Type",id:"stmt Txn",maxWidth:100,accessor:function(t){return e.chk_txn_type(t)}},{Header:"Credit",id:"cr_amt",maxWidth:150,accessor:function(t){return xe(t.cr_amt,e.currency_code)}},{Header:"Debit",id:"dr_amt",maxWidth:150,accessor:function(t){return xe(t.dr_amt,e.currency_code)}},{Header:"Balance",id:"balance",maxWidth:150,accessor:function(t){return xe(t.balance,e.currency_code)}},{Header:"Stmt Txn ID",id:"stmt_txn_id",maxWidth:100,accessor:function(e){return e.stmt_txn_id}},{Header:"Description",id:"descr",maxWidth:150,accessor:function(e){return r.a.createElement(Dt,{full_text:e.descr,no_reduce:!0})}},{Header:"Stmt Txn Date",id:"stmt_txn_date",accessor:function(e){return ve(e.stmt_txn_date,!0)}},{Header:"Matching FA ID",id:"chk_fa_id",accessor:function(t){return e.chk_fa_id(t)}},{Header:"Recon Status",id:"recon",maxWidth:150,accessor:function(t){return r.a.createElement(ar,{id:"manual_recon",show_btn:!1,data:t,onSync:e.handleTransactionlist})}},{Header:"Action",id:"action",minWidth:140,maxWidth:180,accessor:function(t){return r.a.createElement(ar,{id:"manual_recon",show_btn:!0,data:t,onSync:e.handleTransactionlist})}},{Header:"Action",id:"reinitiate",minWidth:140,maxWidth:180,show:!!E("recon","reinitiate_recon"),accessor:function(t){return r.a.createElement(r.a.Fragment,null," ","80_recon_done"!=t.recon_status&&"10_capture_payment_pending"!=t.recon_status||null!=t.recon_status&&"10_capture_payment_pending"!=t.recon_status&&null==t.loan_doc_id?r.a.createElement("input",{id:t.id,type:"button",value:"Recon Again",onClick:function(a){e.handleReinitiateRecon(a,t)},className:"btn btn-primary btn-std}"}):r.a.createElement("input",{disabled:!0,id:t.id,type:"button",value:"Recon Again",onClick:function(a){e.handleReinitiateRecon(a,t)},className:"btn btn-primary btn-std}"}))}}]}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{id:"",className:"container containerTopmargin max-width no-padding"},this.RepaymentSummaryModal(this.state.selected_payment),r.a.createElement("div",null,r.a.createElement("div",{className:"form-row no-margin"},r.a.createElement("h5",{className:"lender_accounts no-margin headerTitle headerPadvert"},"Recon (Float) Account Transactions")),r.a.createElement(cr,{id:"statement_search",data:this.state.statement_search,onlist:this.handleTransactionlist,disable_btn:this.state.calling_api,onComponentChange:this.handleComponentChange,onComponentReset:this.handleComponentReset,onComponentElementChange:this.handleComponentElementChange})),r.a.createElement("div",{className:"container-fluid"},r.a.createElement("br",null),r.a.createElement("div",{className:"row",id:"float_style"}),r.a.createElement("div",{className:this.state.account_result},(this.state.rowdatas.length>0||0===this.state.rowdatas.length)&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,r.a.createElement("h4",null,"Account Transactions"),r.a.createElement("div",{className:"d-flex justify-content-between align-items-center",style:{padding:5}},r.a.createElement("p",{className:"no-margin text-white"},r.a.createElement("b",null,"Total Entries : ",this.state.copy.length)),r.a.createElement("div",{style:{position:"relative"}},r.a.createElement("i",{class:"fa-solid fa-magnifying-glass search_pos"}),r.a.createElement("input",{placeholder:"Search here",className:"search_posInput",onChange:function(t){return e.changeHandler(t.target.value)}}))),r.a.createElement(za,{showPag:!0,minRow:0,row_data:void 0!==this.state.copy?this.state.copy:[],column_data:this.state.columndatas,resizable:!1,defaultSorted:[{id:"stmt_txn_date",desc:!1}],exportCSV:!0,csvFile:"Lender_account_statement",csvData:this.state.copy}))))))}}]),a}(dt);function dr(){dr=function(){return e};var e={},t=Object.prototype,a=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",l=n.asyncIterator||"@@asyncIterator",c=n.toStringTag||"@@toStringTag";function s(e,t,a){return Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(k){s=function(e,t,a){return e[t]=a}}function o(e,t,a,n){var r=t&&t.prototype instanceof m?t:m,l=Object.create(r.prototype),c=new N(n||[]);return l._invoke=function(e,t,a){var n="suspendedStart";return function(r,l){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===r)throw l;return C()}for(a.method=r,a.arg=l;;){var c=a.delegate;if(c){var s=E(c,a);if(s){if(s===d)continue;return s}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===n)throw n="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);n="executing";var o=i(e,t,a);if("normal"===o.type){if(n=a.done?"completed":"suspendedYield",o.arg===d)continue;return{value:o.arg,done:a.done}}"throw"===o.type&&(n="completed",a.method="throw",a.arg=o.arg)}}}(e,a,c),l}function i(e,t,a){try{return{type:"normal",arg:e.call(t,a)}}catch(k){return{type:"throw",arg:k}}}e.wrap=o;var d={};function m(){}function u(){}function p(){}var _={};s(_,r,function(){return this});var h=Object.getPrototypeOf,f=h&&h(h(x([])));f&&f!==t&&a.call(f,r)&&(_=f);var v=p.prototype=m.prototype=Object.create(_);function g(e){["next","throw","return"].forEach(function(t){s(e,t,function(e){return this._invoke(t,e)})})}function y(e,t){var n;this._invoke=function(r,l){function c(){return new t(function(n,c){!function n(r,l,c,s){var o=i(e[r],e,l);if("throw"!==o.type){var d=o.arg,m=d.value;return m&&"object"==typeof m&&a.call(m,"__await")?t.resolve(m.__await).then(function(e){n("next",e,c,s)},function(e){n("throw",e,c,s)}):t.resolve(m).then(function(e){d.value=e,c(d)},function(e){return n("throw",e,c,s)})}s(o.arg)}(r,l,n,c)})}return n=n?n.then(c,c):c()}}function E(e,t){var a=e.iterator[t.method];if(void 0===a){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method))return d;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var n=i(a,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,d;var r=n.arg;return r?r.done?(t[e.resultName]=r.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):r:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function b(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function w(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function N(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(b,this),this.reset(!0)}function x(e){if(e){var t=e[r];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,l=function t(){for(;++n<e.length;)if(a.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return l.next=l}}return{next:C}}function C(){return{value:void 0,done:!0}}return u.prototype=p,s(v,"constructor",p),s(p,"constructor",u),u.displayName=s(p,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===u||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,s(e,c,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},g(y.prototype),s(y.prototype,l,function(){return this}),e.AsyncIterator=y,e.async=function(t,a,n,r,l){void 0===l&&(l=Promise);var c=new y(o(t,a,n,r),l);return e.isGeneratorFunction(a)?c:c.next().then(function(e){return e.done?e.value:c.next()})},g(v),s(v,c,"Generator"),s(v,r,function(){return this}),s(v,"toString",function(){return"[object Generator]"}),e.keys=function(e){var t=[];for(var a in e)t.push(a);return t.reverse(),function a(){for(;t.length;){var n=t.pop();if(n in e)return a.value=n,a.done=!1,a}return a.done=!0,a}},e.values=x,N.prototype={constructor:N,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!e)for(var t in this)"t"===t.charAt(0)&&a.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(a,n){return c.type="throw",c.arg=e,t.next=a,n&&(t.method="next",t.arg=void 0),!!n}for(var r=this.tryEntries.length-1;r>=0;--r){var l=this.tryEntries[r],c=l.completion;if("root"===l.tryLoc)return n("end");if(l.tryLoc<=this.prev){var s=a.call(l,"catchLoc"),o=a.call(l,"finallyLoc");if(s&&o){if(this.prev<l.catchLoc)return n(l.catchLoc,!0);if(this.prev<l.finallyLoc)return n(l.finallyLoc)}else if(s){if(this.prev<l.catchLoc)return n(l.catchLoc,!0)}else{if(!o)throw new Error("try statement without catch or finally");if(this.prev<l.finallyLoc)return n(l.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&a.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var l=r;break}}l&&("break"===e||"continue"===e)&&l.tryLoc<=t&&t<=l.finallyLoc&&(l=null);var c=l?l.completion:{};return c.type=e,c.arg=t,l?(this.method="next",this.next=l.finallyLoc,d):this.complete(c)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.finallyLoc===e)return this.complete(a.completion,a.afterLoc),w(a),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.tryLoc===e){var n=a.completion;if("throw"===n.type){var r=n.arg;w(a)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,a){return this.delegate={iterator:x(e),resultName:t,nextLoc:a},"next"===this.method&&(this.arg=void 0),d}},e}function mr(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(u.a)(e);if(t){var r=Object(u.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(m.a)(this,a)}}var ur=function(e){Object(d.a)(a,e);var t=mr(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(e=t.call.apply(t,[this].concat(l))).state={txn_type:"",from_date:"",to_date:"",recon_status:"",rowdatas:[],columndatas:[],copy:[]},e.handleTxnType=function(t){e.setState({txn_type:t.target.value})},e.handleReconStatus=function(t){e.setState({recon_status:t.target.value})},e.handleDateChange=function(t,a){a=ce()(a).format("YYYY-MM-DD"),"from_date"===t?e.setState({from_date:a}):"to_date"===t&&e.setState({to_date:a})},e.handleClick=Object(j.a)(dr().mark(function t(){var a;return dr().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.validate_search()){t.next=4;break}return a=e.state.recon_status?{stmt_txn_type:e.state.txn_type,recon_status:e.state.recon_status,stmt_txn_date__from:e.state.from_date,stmt_txn_date__to:e.state.to_date}:{stmt_txn_type:e.state.txn_type,recon_status:"unmatched_credits",stmt_txn_date__from:e.state.from_date,stmt_txn_date__to:e.state.to_date},t.next=4,ia(e.req({statement_search:a},!1,"statement_search")).then(function(t){if(e.resp(t),!t)return null;"success"===t.status?(e.setState(function(e){return e.rowdatas=t.data.account_txns}),e.setState(function(e){return e.copy=t.data.account_txns}),e.setState(function(t){return t.columndatas=e.columndatas()}),e.setState({account_result:"show_div"})):alert(t.message+"\n"+JSON.stringify(t.data))});case 4:case"end":return t.stop()}},t)})),e.handleReinitiateRecon=function(t,a){var n="credit"==a.stmt_txn_type?a.cr_amt:"debit"==a.stmt_txn_type&&a.dr_amt;0!=window.confirm("Are you sure to reinitiate this recon transaction ?")&&Wn(e.req({acc_stmt_id:a.id,txn_id:a.stmt_txn_id,amount:n})).then(function(t){e.resp(t),t&&"success"===t.status&&(alert(t.message),e.handleClick())})},e.unknown_txn_status=function(){var t=Object(j.a)(dr().mark(function t(a){return dr().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ia(e.req({statement_search:a},!1,"statement_search")).then(function(t){if(e.resp(t),!t)return null;if("success"===t.status){e.setState(function(e){return e.rowdatas=t.data.account_txns}),e.setState(function(e){return e.copy=t.data.account_txns});var a=e.columndatas();a.splice(5,1),a.splice(5,0,{Header:r.a.createElement("div",{className:"text-right"},"Credit Amount"),width:130,maxWidth:130,accessor:"cr_amt",Cell:function(t){return Re(xe(t.value,e.currency_code))}}),a.splice(6,0,{Header:r.a.createElement("div",{className:"text-right"},"Debit Amount"),width:130,maxWidth:130,accessor:"dr_amt",Cell:function(t){return Re(xe(t.value,e.currency_code))}}),e.setState(function(e){return e.columndatas=a}),e.setState({account_result:"show_div"})}else alert(t.message+"\n"+JSON.stringify(t.data))});case 2:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),e.changeHandler=function(t){var a=t,n=e.state.rowdatas.filter(function(e){return null!==e.stmt_txn_type&&e.stmt_txn_type.toLowerCase().includes(a.toLowerCase())||null!==e.stmt_txn_id&&e.stmt_txn_id.includes(a)||null!==e.loan_doc_id&&e.loan_doc_id.toLowerCase().includes(a.toLowerCase())||null!==e.descr&&e.descr.toLowerCase().includes(a.toLowerCase())});e.setState(function(e){return e.copy=n})},e}return Object(o.a)(a,[{key:"componentWillMount",value:function(){if("true"===this.props.today){var e={recon_status:"recon_not_done",stmt_txn_date__from:this.props.match.params.today,stmt_txn_date__to:this.props.match.params.today};this.unknown_txn_status(e)}else{var t=function(e,t){return t=t.replace("mm",e.getMonth()+1).replace("yy",e.getFullYear()).replace("dd",e.getDate())},a=new Date;this.setState({from_date:"".concat(a.getFullYear(),"-01-01")}),this.setState({to_date:t(a,"yy-mm-dd")});var n={stmt_txn_type:"credit",recon_status:"unmatched_credits",stmt_txn_date__from:this.state.from_date,stmt_txn_date__to:t(a,"yy-mm-dd")};this.unknown_txn_status(n),this.setState(function(e){return e.txn_type="credit"})}}},{key:"validate_search",value:function(){return!!(this.state.txn_type&&this.state.from_date&&this.state.to_date)||(alert("Please enter valid search criteria"),!1)}},{key:"chk_txn_type",value:function(e){return 0===e.cr_amt?r.a.createElement("span",null,Ze(e.stmt_txn_type)," ",r.a.createElement(sr.b,{className:"ml-2",color:"red"})):r.a.createElement("span",null,Ze(e.stmt_txn_type)," ",r.a.createElement(sr.a,{className:"ml-2",color:"green"}))}},{key:"columndatas",value:function(){var e=this;return[{Header:"Stmt Txn Type",id:"stmt Txn",maxWidth:90,accessor:function(t){return e.chk_txn_type(t)}},{Header:"Network",accessor:"network_prvdr_code",sortable:!1,maxWidth:85,Cell:function(e){return r.a.createElement(Le,{logotype:e.value})}},{Header:"Account Number",accessor:"acc_prvdr_code",sortable:!1,width:130,maxWidth:130,Cell:function(e){return r.a.createElement("div",{className:"d-flex align-items-center"}," ",r.a.createElement("div",null,r.a.createElement(Le,{logotype:e.value,style:{width:"30px",height:"20px"}})),r.a.createElement("div",{style:{paddingLeft:"10px"}},e.original.acc_number))}},{Header:"Stmt Txn Date",width:150,maxWidth:150,accessor:"stmt_txn_date",Cell:function(e){return ve(e.value,!0)}},{Header:"Stmt Txn ID",width:80,accessor:"stmt_txn_id"},{Header:r.a.createElement("div",{className:"text-right"},"Amount"),width:130,maxWidth:130,accessor:"debit"===this.state.txn_type?"dr_amt":"cr_amt",Cell:function(t){return Re(xe(t.value,e.currency_code))}},{Header:r.a.createElement("div",{className:"text-center"},"Description"),accessor:"descr",Cell:function(e){return r.a.createElement("div",{className:"text-center"},r.a.createElement(Rt,{full_text:Ze(e.value),no_reduce:!0}))}},{Header:r.a.createElement("div",{className:"text-center"},"Matching FA ID"),minWidth:140,maxWidth:180,id:"chk_fa_id",accessor:function(t){return r.a.createElement("div",{className:"text-center"},e.chk_fa_id(t))}},{Header:"Matching Status",minWidth:140,maxWidth:180,id:"recon_status",accessor:function(e){return r.a.createElement(Rt,{full_text:Ze(e.recon_status),overlay:e.recon_desc,no_reduce:!0})}},{Header:"Action",id:"action",minWidth:140,maxWidth:180,accessor:function(t){return r.a.createElement(ar,{show_btn:!0,data:t,onSync:e.handleClick})}},{Header:"Action",id:"reinitiate",minWidth:140,maxWidth:180,show:!!E("recon","reinitiate_recon"),accessor:function(t){return r.a.createElement(r.a.Fragment,null," ","80_recon_done"!=t.recon_status&&"10_capture_payment_pending"!=t.recon_status||null!=t.recon_status&&"10_capture_payment_pending"!=t.recon_status&&null==t.loan_doc_id?r.a.createElement("input",{id:t.id,stmt_txn_id:t.stmt_txn_id,row:t,amount:t.amount,type:"button",value:"Recon Again",onClick:function(a){e.handleReinitiateRecon(a,t)},className:"btn btn-primary btn-std}"}):r.a.createElement("input",{disabled:!0,id:t.id,type:"button",value:"Recon Again",onClick:e.handleReinitiateRecon,className:"btn btn-primary btn-std}"}))}}]}},{key:"chk_fa_id",value:function(e){var t=e.loan_doc_id;e.recon_status;return t?r.a.createElement(ee.a,{to:"/fa/view/"+t,style:{color:"grey"},target:"_blank"},t):"NA"}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"container containerTopmargin max-width no-padding"},r.a.createElement("h2",{className:"text-white text-center"},"Unknown Transactions"),r.a.createElement("div",{className:"date-range",style:{padding:15}},r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"form-group col-md-3"},r.a.createElement("label",null,"Statement Transaction Type   "),r.a.createElement("font",{className:"text-danger"},"   *  "),r.a.createElement("select",{id:"stmt_txn_type",className:"form-control",value:this.state.txn_type,onChange:function(t){e.handleTxnType(t)},type:"text",required:"required"},this.getSelectOptions("stmt_txn_type"))),r.a.createElement("div",{className:"form-group col-md-3"},r.a.createElement("label",null,"Start Date   "),r.a.createElement("font",{className:"text-danger"},"   *  "),r.a.createElement(Ht.a,{defaultValue:"true"===this.props.today?ce()(this.props.match.params.today,"YYYY-MM-DD"):ce()(this.state.from_date,"YYYY-MM-DD"),closeOnSelect:!0,onChange:function(t){e.handleDateChange("from_date",t)},dateFormat:"DD MMM YYYY",timeFormat:!1,required:"required"})),r.a.createElement("div",{className:"form-group col-md-3"},r.a.createElement("label",null,"End Date   "),r.a.createElement("font",{className:"text-danger"},"   *  "),r.a.createElement(Ht.a,{defaultValue:"true"===this.props.today?ce()(this.props.match.params.today,"YYYY-MM-DD"):ce()(this.state.to_date,"YYYY-MM-DD"),closeOnSelect:!0,onChange:function(t){e.handleDateChange("to_date",t)},dateFormat:"DD MMM YYYY",timeFormat:!1,required:"required"})),r.a.createElement("div",{className:"form-group col-md-3"},r.a.createElement("label",null,"Matching Status   "),r.a.createElement("select",{id:"recon_status",className:"form-control",value:this.state.recon_status,onChange:function(t){e.handleReconStatus(t)},type:"text",required:"required"},this.getSelectOptions("recon_status").filter(function(e){if("80_recon_done"!=e.props.value)return e}))))),r.a.createElement("div",{className:"form-row justify-content-md-center mt-3"},r.a.createElement(lt.a,{className:"btn btn-secondory ",onClick:this.handleClick},"Search")," \xa0"),0!==this.state.rowdatas.length&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"d-flex justify-content-between align-items-center",style:{padding:5}},r.a.createElement("p",{className:"no-margin text-white"},r.a.createElement("b",null,"Total Entries : ",this.state.copy.length)),r.a.createElement("div",{style:{position:"relative"}},r.a.createElement("i",{class:"fa-solid fa-magnifying-glass search_pos"}),r.a.createElement("input",{placeholder:"Search here",className:"search_posInput",onChange:function(t){return e.changeHandler(t.target.value)}}))),r.a.createElement(za,{showPag:!0,minRow:0,row_data:void 0!==this.state.copy?this.state.copy:[],column_data:this.state.columndatas,resizable:!1,exportCSV:!0,csvFile:"unknown_txns",csvData:this.state.copy?this.state.copy:[]})))}}]),a}(ut),pr=function(e){return P("/api/admin/acc_prvdr",e)},_r=function(e){return P("/api/admin/acc_prvdr/list",e)};function hr(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(u.a)(e);if(t){var r=Object(u.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(m.a)(this,a)}}var fr=function(e){Object(d.a)(a,e);var t=hr(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={comp_name:"account_provider"},n.state={values:[]},n}return Object(o.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{id:""},r.a.createElement("div",{className:"container no-margin"},r.a.createElement("div",{className:"row"},r.a.createElement("h4",null,"Account Provider Details")),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-3 account_prvdr"},r.a.createElement("span",null,"Account Provider Name"),r.a.createElement("font",{className:"text-danger"},"   *  "),r.a.createElement("input",{id:"name",value:this.props.data.name,onChange:this.toUpperHandleChange,required:"required",className:"form-control"})),r.a.createElement("div",{className:"col-md-3"},r.a.createElement("span",null,"Account Provider Code"),r.a.createElement("font",{className:"text-danger"},"   *  "),r.a.createElement("input",{id:"acc_prvdr_code",value:this.props.data.acc_prvdr_code,maxLength:4,onChange:this.handleChange,required:"required",className:"form-control"})),r.a.createElement("div",{className:"col-md-6"},r.a.createElement(Gt,{id:"acc_provider_logo",label:"Logo",acc_prvdr_id:this.props.data.id,acc_prvdr_code:this.props.data.acc_prvdr_code,db_file_name:this.props.data.acc_provider_logo,type:"image",mode:this.props.mode,onEditUpload:function(t){e.handleChangeForEdit(t),e.handleSave(t)},onCreateUpload:this.handleChange}))),r.a.createElement("br",null)))}}]),a}(ut);function vr(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(u.a)(e);if(t){var r=Object(u.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(m.a)(this,a)}}var gr=function(e){Object(d.a)(a,e);var t=vr(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={toList:!1,account_provider:{},reg_address:{},org:{},div_style:"show_div",dropdown_div_style:"disable_div"},e.handleSubmit=function(t){t.preventDefault();var a=e.state.account_provider;a.country_code=e.country_code,a.status="enabled";var n=e.state.org;n.reg_address=e.state.reg_address,n.reg_address.touch="",n.country_code=e.country_code,a.org=n,pr(e.req({acc_provider:a})).then(function(t){t&&("success"===t.status?(e.setState({toList:!0}),alert("New Account Provider created successfully")):alert(t.message+"\n"+JSON.stringify(t.data)))})},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return!0===this.state.toList?r.a.createElement(Y.a,{to:"/account_provider/list/"}):r.a.createElement("div",{className:"container text-labelblue"},r.a.createElement("h5",null,this.props.title+(this.state.account_provider.name?" : "+this.state.account_provider.name:"")),r.a.createElement("form",{id:"account_provider_form",onSubmit:this.handleSubmit},r.a.createElement("div",{id:""},r.a.createElement(fr,{id:"account_provider",title:"Account Provider",data:this.state.account_provider,mode:this.props.mode,onComponentChange:this.handleComponentChange}),r.a.createElement("hr",null),"create"===this.props.mode&&r.a.createElement(en,{id:"acc_prvdr_choose_org",resetOrgNAddr:this.handleResetOrgNAddr,onChange:this.handleOrgChange}),r.a.createElement("div",{className:"".concat(this.state.div_style)},r.a.createElement(zt,{id:"org",title:"Organisation Details",data:this.state.org,mode:this.props.mode,onComponentChange:this.handleComponentChange}),r.a.createElement("br",null),r.a.createElement("hr",null),r.a.createElement(Mt,{id:"reg_address",title:"Registered Address",data:this.state.reg_address,mode:this.props.mode,onComponentChange:this.handleComponentChange,onComponentReset:this.handleComponentReset}),r.a.createElement("br",null),r.a.createElement("hr",null)),r.a.createElement("input",{type:"button",className:"btn btn-primary ".concat("create"===this.props.mode?"show_button":"hide_button"),onClick:this.handleSubmit,value:"Create New Account Provider"}))),r.a.createElement("br",null),r.a.createElement("br",null))}}]),a}(dt);function yr(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(u.a)(e);if(t){var r=Object(u.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(m.a)(this,a)}}var Er=function(e){Object(d.a)(a,e);var t=yr(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={accPrvdrList:null,columndatas:[]},e}return Object(o.a)(a,[{key:"componentWillMount",value:function(){var e=this,t=this.country_code;_r(this.req({country_code:t})).then(function(t){t&&(e.setState(function(e){return e.rowdatas=t.data.list}),e.setState(function(t){return t.columndatas=e.columndatas()}))})}},{key:"columndatas",value:function(){return[{Header:"Name",id:"name",accessor:function(e){return e.name}},{Header:"ACC PRVDR Type",id:"account_types",accessor:function(e){return e.account_types}},{Header:"ACC PRVDR",id:"acc_prvdr_code",accessor:function(e){return r.a.createElement(Le,{logotype:e.acc_prvdr_code})}},{Header:"Status",id:"status",accessor:function(e){return r.a.createElement(na,{head:"1",id:e.id,entity:"acc_providers",status:e.status})}},{Header:"Action",id:"action",accessor:function(e){return r.a.createElement(na,{head:"2",id:e.id,entity:"acc_providers",status:e.status})}}]}},{key:"render",value:function(){return null!=this.state.columndatas?r.a.createElement("div",{className:"container containerTopmargin max-width no-padding"},r.a.createElement("h5",{className:"preHeaderpad headerTitle no-margin"},this.props.title||"Account Provider List"),r.a.createElement(za,{showPag:!1,minRow:0,row_data:void 0!==this.state.rowdatas?this.state.rowdatas:[],column_data:this.state.columndatas,resizable:!1})):r.a.createElement("div",null,r.a.createElement("p",null,"No Account Providers Available ! "))}}]),a}(dt),br=function(e){return P("/api/admin/loan_product",e)},wr=function(e){return P("/api/admin/loan_product_template/list",e)},Nr=function(e){return P("/api/admin/loan_product/list",e)},xr=function(e){return P("/api/admin/loan_product/update",e)},Cr=function(e){return P("/api/admin/loan_product/update",e)},kr=function(e){return P("/api/admin/score_model/cs_result_config",e)},Sr=function(e){return P("/api/admin/score_model/weightages/update",e)},Or=function(e){return P("/api/admin/score_model/cs_factor",e)},Ar=function(e){return P("/api/admin/score_model/cs_factor/list",e)},jr=function(e){return P("/api/admin/score_model/create",e)},Rr=function(e){return P("/api/admin/score_model/list",e)},Dr=function(e){return P("/api/admin/upload_cust_txns",e)},Fr=function(e){return P("/api/admin/score_model/cust_csf_values/create",e)};function Lr(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(u.a)(e);if(t){var r=Object(u.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(m.a)(this,a)}}var Pr=function(e){Object(d.a)(a,e);var t=Lr(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={templateList:null,comp_name:"loan_product",value:0},e.handleChange1=function(t){e.props.data.data_provider_id&&e.setState({option_div_style:"show_div"})},e.handleProdNameChange=function(t){e.props.data.product_name=t.target.value,e.handleChange(t)},e.handleCSChange=function(t){var a=t.target,n=a.value,r=a.min,l=a.max;n=Math.max(Number(r),Math.min(Number(l),Number(n))),n=isNaN(n)?0:n,e.props.data.min_credit_score=n},e}return Object(o.a)(a,[{key:"componentWillMount",value:function(){var e=this;Object($.a)(Object(u.a)(a.prototype),"componentWillMount",this).call(this),this.setOptionsToStateFromApi("lender"),this.setOptionsToStateFromApi("acc_prvdr");var t={country_code:this.country_code};Rr(this.req(t)).then(function(t){t&&("success"===t.status?e.getSelectOptionsFromResult(t.data,"score_model",["model_code","model_name"]):alert(t.message+"\n"+JSON.stringify(t.data)))})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{id:"",className:"col-md-12"},r.a.createElement("div",{className:"card "},r.a.createElement("div",{className:"card-header card-header-primary card-header-icon"},r.a.createElement("h3",{className:"card-title"},this.props.title?this.props.title:"Product Details")),r.a.createElement("div",{className:"card-body"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-4 form-group md-form-group"},r.a.createElement("span",{for:"product_name",className:"md-label"}," Product Name *"),r.a.createElement("input",{id:"product_name",value:this.props.data.product_name,onChange:function(t){e.handleProdNameChange(t),e.handleChange1(t),e.toUpperHandleChange(t)},className:"form-control",type:"text",required:"required"})),r.a.createElement("div",{className:"col-md-4 form-group md-form-group"},r.a.createElement("span",{for:"product_code",className:"md-label"}," Product Code *"),r.a.createElement("input",{id:"product_code",value:this.props.data.product_code,onChange:this.handleChange,className:"form-control",type:"text",required:"required"})),r.a.createElement("div",{className:"col-md-4 form-group md-form-group"},r.a.createElement("span",{for:"product_name",className:"md-label"}," Product Type *"),r.a.createElement("select",{id:"product_type",value:this.props.data.product_type,onChange:this.handleChange,className:"form-control",type:"text",required:"required"},this.getSelectOptions("product_type")))),r.a.createElement("div",{className:"row mt-50"},!this.admin_roles.includes(v("role_codes"))&&r.a.createElement("div",{className:"col-md-3 form-group md-form-group"},r.a.createElement("span",{for:"acc_prvdr_code",className:"md-label"}," Account Provider *"),r.a.createElement("select",{id:"acc_prvdr_code",value:this.props.data.acc_prvdr_code,onChange:this.handleChange,className:"form-control",type:"text",required:"required"},this.state.acc_prvdr_dd)),r.a.createElement("div",{className:"col-md-3 form-group md-form-group"},r.a.createElement("span",{for:"lender_code",className:"md-label"}," Lender *"),r.a.createElement("select",{id:"lender_code",value:this.props.data.lender_code,onChange:this.handleChange,className:"form-control",type:"text",required:"required"},this.state.lender_dd)),r.a.createElement("div",{className:"col-md-3 form-group md-form-group"},r.a.createElement("span",{for:"cs_model_code",className:"md-label"}," Credit Score Model *"),r.a.createElement("select",{id:"cs_model_code",value:this.props.data.model_code,onChange:this.handleChange,className:"form-control",required:"required"},this.state.score_model_dd)),r.a.createElement("div",{className:"col-md-3 form-group md-form-group"},r.a.createElement("span",{for:"penalty_amount",className:"md-label"}," Penalty Amount Per Day (",this.currency_code,") *"),r.a.createElement("input",{id:"penalty_amount",value:this.props.data.penalty_amount,onChange:this.handleChange,className:"form-control",type:"text",required:"required"}))))))}}]),a}(ut);function Br(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(u.a)(e);if(t){var r=Object(u.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(m.a)(this,a)}}var Mr=function(e){Object(d.a)(a,e);var t=Br(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={comp_name:"loan_product_template"},e.handleFlowFeeTypeChange=function(t){e.setState({flow_fee_type:t.target.value}),e.handleChange(t)},e.handleFlowFeeDurationChange=function(t){e.setState({flow_fee_duration:t.target.value}),e.handleProdChange(t)},e.handleProdChange=function(t){if("new_product"===e.props.id){var a=t.target.id,n=t.target.value;e.setState(Object(k.a)({},a,n),function(){var t=function(e,t,a,n,r){var l="";return e&&(l+="STD "+e+" "+r+" "),n?l+=n:t&&(l+="for "+t+" days"),a&&(l+=" @"+a),l}(e.state.max_loan_amount,e.state.duration,e.state.flow_fee,e.state.flow_fee_duration,e.currency_code);e.props.onProdChange(t)})}e.handleChange(t)},e}return Object(o.a)(a,[{key:"componentWillMount",value:function(){Object($.a)(Object(u.a)(a.prototype),"componentWillMount",this).call(this)}},{key:"render",value:function(){return r.a.createElement("div",{id:"",className:"col-md-12"},r.a.createElement("div",{className:"card "},r.a.createElement("div",{className:"card-header card-header-primary card-header-icon"},r.a.createElement("h3",{className:"card-title"},this.props.title?this.props.title:"Float Advance Product")),r.a.createElement("div",{className:"card-body"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-5 form-group md-form-group"},r.a.createElement("label",{for:"max_loan_amount",className:"md-label-floating"}," Float Amount ( ",this.currency_code," ) *"),r.a.createElement("input",{id:"max_loan_amount",value:this.props.data.max_loan_amount,onChange:this.handleProdChange,onClick:this.handleClick,className:"form-control",type:"text",required:!0})),r.a.createElement("div",{className:"col-md-5 form-group md-form-group"},r.a.createElement("label",{for:"duration",className:"md-label-floating"}," Repayment Duration *"),r.a.createElement("select",{id:"duration",value:this.props.data.duration,onChange:this.handleProdChange,className:"form-control",type:"text",required:!0},r.a.createElement("option",{value:""},"Choose"),r.a.createElement("option",{value:"1"},"1 day"),r.a.createElement("option",{value:"2"},"2 days"),r.a.createElement("option",{value:"3"},"3 days"),r.a.createElement("option",{value:"4"},"4 days"),r.a.createElement("option",{value:"5"},"5 days"),r.a.createElement("option",{value:"6"},"6 days"),r.a.createElement("option",{value:"7"},"7 days"),r.a.createElement("option",{value:"8"},"8 days"),r.a.createElement("option",{value:"9"},"9 days"),r.a.createElement("option",{value:"10"},"10 days")))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-4 checkbox-radios"},r.a.createElement("label",{className:"md-label-floating"}," Flow Fee Type *"),r.a.createElement("div",{className:"form-check"},r.a.createElement("label",{className:"form-check-label"},r.a.createElement("input",{className:"form-check-input",type:"radio",id:"flow_fee_type",value:"Flat",onChange:this.handleFlowFeeTypeChange,checked:"Flat"===this.props.data.flow_fee_type})," Flat",r.a.createElement("span",{className:"circle"},r.a.createElement("span",{className:"check"})))),r.a.createElement("div",{className:"form-check"},r.a.createElement("label",{className:"form-check-label"},r.a.createElement("input",{className:"form-check-input",type:"radio",id:"flow_fee_type",value:"Percent",onChange:this.handleFlowFeeTypeChange,checked:"Percent"===this.props.data.flow_fee_type})," Percentage",r.a.createElement("span",{className:"circle"},r.a.createElement("span",{className:"check"}))))),r.a.createElement("div",{className:"col-sm-4 checkbox-radios"},r.a.createElement("span",null,"Percent"===this.state.flow_fee_type?"Fee in %":"Flat Fee ("+this.currency_code+")"),r.a.createElement("font",{className:"text-danger"},"   *  "),r.a.createElement("input",{id:"flow_fee",value:this.props.data.flow_fee,onChange:this.handleProdChange,className:"form-control",type:"text",required:!0})),r.a.createElement("div",{className:"col-sm-4 checkbox-radios"},r.a.createElement("label",{className:"md-label-floating"}," Fee for *"),r.a.createElement("div",{className:"form-check"},r.a.createElement("label",{className:"form-check-label"},r.a.createElement("input",{className:"form-check-input",type:"radio",id:"flow_fee_duration",value:"entire_duration",onChange:this.handleFlowFeeDurationChange,checked:"entire_duration"===this.props.data.flow_fee_duration})," Entire duration ",this.state.duration?this.state.duration+" days":"",r.a.createElement("span",{className:"circle"},r.a.createElement("span",{className:"check"})))),r.a.createElement("div",{className:"form-check"},r.a.createElement("label",{className:"form-check-label"},r.a.createElement("input",{className:"form-check-input",type:"radio",id:"flow_fee_duration",value:"each_day",onChange:this.handleFlowFeeDurationChange,checked:"each_day"===this.props.data.flow_fee_duration})," Each day",r.a.createElement("span",{className:"circle"},r.a.createElement("span",{className:"check"})))))))),r.a.createElement("div",{className:"row ".concat(this.state.button_style)},r.a.createElement("div",{className:"col-md-1 ".concat(this.state.edit_button_style)},r.a.createElement(xt,{entity:"template",onClick:this.handleEdit})),r.a.createElement("div",{className:"col-md-1 ".concat(this.state.save_button_style)},r.a.createElement("input",{onClick:this.handleSave,type:"button",className:"btn btn-success",value:"Save"}))))}}]),a}(ut);function Tr(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(u.a)(e);if(t){var r=Object(u.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(m.a)(this,a)}}var Hr=function(e){Object(d.a)(a,e);var t=Tr(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={toList:!1,new_product_div_style:"show_div",template_product_div_style:"hide_div",templates_div_style:"hide_div",product_mapping_div_style:"show_div",templateList:null,loan_product:{acc_prvdr_code:n.acc_prvdr_code},data_prvdr:{},product_template:{flow_fee_type:"Flat",flow_fee_duration:"entire_duration"},new_product:{flow_fee_type:"Flat",flow_fee_duration:"entire_duration"}},n.onChooseTemplateClick=function(e){var t=n.templates[e.target.id];n.setState({template_product_div_style:"show_div"}),n.setState({product_mapping_div_style:"show_div"}),n.setState({product_template:t})},n.handleSubmit=function(e){e.preventDefault();var t=n.state.loan_product,a={},r=n.state.new_product;(a=Object(X.a)({},r,t)).status="enabled",a.country_code=n.country_code,br(n.req({loan_product:a})).then(function(e){e&&("success"===e.status?(n.setState({toList:!0}),alert("New Loan Product created successfully")):alert(e.message+"\n"+JSON.stringify(e.data)))})},n.selectCreationPath=function(e){la()("#product_temp").DataTable().destroy(),n.path=e.target.value,"from_template"===n.path?(n.setState({new_product_div_style:"hide_div"}),n.setState({template_product_div_style:"hide_div"}),n.setState({product_mapping_div_style:"hide_div"}),n.setState({templates_div_style:"show_div"}),wr(n.req(null)).then(function(e){if(e){n.templates=e.data;var t=e.data.map(function(e,t){return r.a.createElement("tr",{key:t},r.a.createElement("td",{"data-sort":e.max_loan_amount}," ",e.max_loan_amount," ",n.state.currency_code),r.a.createElement("td",null," ",e.duration," day(s)"),r.a.createElement("td",null," ",e.flow_fee_type," "),r.a.createElement("td",{"data-sort":e.flow_fee}," ",gt(e,n.currency_code)," "),r.a.createElement("td",null," ",_t(e.flow_fee_duration,e.duration)," "),r.a.createElement("td",null," ",r.a.createElement("input",{id:t,type:"radio",name:"products",onClick:n.onChooseTemplateClick,value:"View / Edit"})))});n.setState({templateList:t}),la()("#product_temp").removeAttr("width").dataTable({columns:[{width:"20%"},{width:"20%"},{width:"10%"},{width:"20%"},{width:"20%"},{width:"10%"}],dom:"Bfrtip",buttons:["csv","excel","print"]})}})):(n.setState({template_product_div_style:"hide_div"}),n.setState({templates_div_style:"hide_div"}),n.setState({new_product_div_style:"show_div"}),n.setState({product_mapping_div_style:"show_div"}))},n.handleProdChange=n.handleProdChange.bind(Object(i.a)(n)),n}return Object(o.a)(a,[{key:"componentWillMount",value:function(){var e=this;if("view"===this.props.mode){this.setState({product_div_style:"show_div"});var t={product_id:this.props.match.params.product_id};(function(e){return P("/api/admin/loan_product/view",e)})(this.req(t)).then(function(t){t&&(e.loan_product=t.data,e.setState({loan_product:e.loan_product}),e.setState({loan_product_template:e.loan_product}))})}}},{key:"handleProdChange",value:function(e){var t=this.state.loan_product;t.product_name=e,this.setState({loan_product:t})}},{key:"render",value:function(){return!0===this.state.toList?r.a.createElement(Y.a,{to:"/fa_product/list"}):r.a.createElement("div",{id:""},r.a.createElement("div",{className:"container mt-50"},r.a.createElement("div",{id:"",className:"".concat(this.state.templates_div_style)},r.a.createElement("h4",null,"Select Product Template"),r.a.createElement("div",{id:"datatable product_temp",className:"table-responsive"},r.a.createElement("table",{id:"product_temp",className:"table"},r.a.createElement("thead",{className:"text-info"},r.a.createElement("tr",null,r.a.createElement("th",null,"FA Amount"),r.a.createElement("th",null,"FA Duration"),r.a.createElement("th",null,"Flow Fee Type"),r.a.createElement("th",null,"Flow Fee"),r.a.createElement("th",null,"Fee For"),r.a.createElement("th",null,"Choose"))),r.a.createElement("tbody",null,this.state.templateList)))),r.a.createElement("div",{id:"",className:"".concat(this.state.template_product_div_style)},r.a.createElement(Mr,{title:"Float Advance Product Template",id:"product_template",mode:"disabled",data:this.state.product_template})),r.a.createElement("div",{id:"",className:"".concat(this.state.new_product_div_style)},r.a.createElement(Mr,{title:"Float Advance",id:"new_product",mode:"create",data:this.state.new_product,onProdChange:this.handleProdChange,onComponentChange:this.handleComponentChange}),r.a.createElement("br",null)),r.a.createElement("div",{id:"",className:"".concat(this.state.product_mapping_div_style)},r.a.createElement(Pr,{id:"loan_product",data:this.state.loan_product,mode:this.props.mode,onComponentChange:this.handleComponentChange})),r.a.createElement("input",{type:"button",className:"btn btn-primary ".concat("create"===this.props.mode?"show_button":"hide_button"),onClick:this.handleSubmit,value:"Create Product"})))}}]),a}(dt);function qr(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(u.a)(e);if(t){var r=Object(u.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(m.a)(this,a)}}var zr=function(e){Object(d.a)(a,e);var t=qr(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={save_btn_style:"disable_div"},e.handleSave=function(t){var a={loan_product:e.state};xr(e.req(a)).then(function(e){e&&("success"===e.status?(alert(e.message),window.location.reload()):alert(e.message+"\n"+JSON.stringify(e.data)))})},e.handleValueChange=function(t){t.target.value?e.setState({save_btn_style:"show_div"}):e.setState({save_btn_style:"disable_div"}),e.handleSelfChangeState(t)},e}return Object(o.a)(a,[{key:"componentWillMount",value:function(){var e=this;this.setState({id:this.props.product.id,product_name:this.props.product.product_name,cs_model_code:this.props.product.cs_model_code,penalty_amount:this.props.product.penalty_amount});var t={country_code:this.country_code};Rr(this.req(t)).then(function(t){t&&("success"===t.status?e.getSelectOptionsFromResult(t.data,"score_model",["model_code","model_name"]):alert(t.message+"\n"+JSON.stringify(t.data)))})}},{key:"render",value:function(){return r.a.createElement("div",{className:"container"},r.a.createElement("br",null),r.a.createElement("div",{className:"row"},r.a.createElement("h4",null,r.a.createElement("b",null,"Edit Product"))),r.a.createElement("br",null),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-2"},r.a.createElement("label",null,"Data Provider"),"\xa0\xa0\xa0"),r.a.createElement("div",{className:"col-md-3"},r.a.createElement("label",null,r.a.createElement("b",null,this.props.product.data_provider))),r.a.createElement("div",{className:"col-md-2"},r.a.createElement("label",null,"Lender"),"\xa0\xa0\xa0"),r.a.createElement("div",{className:"col-md-3"},r.a.createElement("label",null,r.a.createElement("b",null,this.props.product.lender)))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-2"},r.a.createElement("label",null,"FA Amount"),"\xa0\xa0\xa0"),r.a.createElement("div",{className:"col-md-3"},r.a.createElement("label",null,r.a.createElement("b",null,ft(this.props.product.max_loan_amount,this.currency_code)))),r.a.createElement("div",{className:"col-md-2"},r.a.createElement("label",null,"FA Duration"),"\xa0\xa0\xa0"),r.a.createElement("div",{className:"col-md-3"},r.a.createElement("label",null,r.a.createElement("b",null,vt(this.props.product.duration,this.props.product.flow_fee_duration))))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-2"},r.a.createElement("label",null,"Flow Fee Type"),"\xa0\xa0\xa0"),r.a.createElement("div",{className:"col-md-3"},r.a.createElement("label",null,r.a.createElement("b",null,this.props.product.flow_fee_type))),r.a.createElement("div",{className:"col-md-2"},r.a.createElement("label",null,"Flow Fee"),"\xa0\xa0\xa0"),r.a.createElement("div",{className:"col-md-3"},r.a.createElement("label",null,r.a.createElement("b",null,gt(this.props.product,this.currency_code))))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-2"},r.a.createElement("label",null,"Flow Fee For"),"\xa0\xa0\xa0"),r.a.createElement("div",{className:"col-md-3"},r.a.createElement("label",null,r.a.createElement("b",null,_t(this.props.product.flow_fee_duration,this.props.product.duration)))),r.a.createElement("div",{className:"col-md-2"},r.a.createElement("label",null,"Status"),"\xa0\xa0\xa0"),r.a.createElement("div",{className:"col-md-3"},r.a.createElement("label",null,r.a.createElement("b",null,Ze(this.props.product.status))))),r.a.createElement("br",null),r.a.createElement("div",{className:"row text-labelblue"},r.a.createElement("div",{className:"col-md-3"},r.a.createElement("span",null,"Product Name"),r.a.createElement("font",{className:"text-danger"},"   *  "),r.a.createElement("input",{id:"product_name",value:this.state.product_name,onChange:this.handleValueChange,className:"form-control",type:"text",required:"required"})),r.a.createElement("div",{className:"col-md-3"},r.a.createElement("span",null,"Credit Score Model"),r.a.createElement("font",{className:"text-danger"},"   *  "),r.a.createElement("select",{id:"cs_model_code",value:this.state.cs_model_code,onChange:this.handleValueChange,className:"form-control",required:"required"},this.state.score_model_dd)),r.a.createElement("div",{className:"col-md-3"},r.a.createElement("span",null,"Penalty Amount Per Day (",this.currency_code,")"),r.a.createElement("font",{className:"text-danger"},"   *  "),r.a.createElement("input",{id:"penalty_amount",value:this.state.penalty_amount,onChange:this.handleValueChange,className:"form-control",type:"text",required:"required"}))),r.a.createElement("br",null),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-8"}),r.a.createElement("div",{className:"col-md-4 ".concat(this.state.save_btn_style)},r.a.createElement("input",{type:"button",value:"Save",className:"btn btn-success",onClick:this.handleSave}))))}}]),a}(ut);function Ir(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(u.a)(e);if(t){var r=Object(u.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(m.a)(this,a)}}var Wr=function(e){Object(d.a)(a,e);var t=Ir(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={product_list:null,toView:!1,toEdit:!1,product_list_div_style:"hide_div",product_id:null},e.handleClick=function(t){e.setState({product_id:t.target.id,toView:!0})},e.handleEditClick=function(t,a){e.setState({product_details:a,toEdit:!0})},e}return Object(o.a)(a,[{key:"componentWillMount",value:function(){var e=this,t=E("product","edit");Nr(this.req(null,!0)).then(function(a){if(a){var n=a.data.map(function(a,n){return r.a.createElement("tr",{key:n},r.a.createElement("td",null," ",a.product_name),r.a.createElement("td",null," ",a.product_type),r.a.createElement("td",{"data-sort":a.cs_model_code}," ",Ze(a.cs_model_code)),r.a.createElement("td",{"data-sort":a.max_loan_amount}," ",Re(xe(a.max_loan_amount,e.currency_code))),r.a.createElement("td",null," ",vt(a.duration,a.flow_fee_duration)," "),r.a.createElement("td",{"data-sort":a.flow_fee}," ",gt(a,e.currency_code)," "),r.a.createElement("td",{"data-sort":a.penalty_amount}," ",xe(a.penalty_amount,e.currency_code)," "),r.a.createElement(na,{id:a.id,entity:"loan_products",status:a.status}),t&&r.a.createElement("td",{key:n}," ",r.a.createElement("input",{type:"button",id:a.id,product:a,onClick:function(t){return e.handleEditClick(t,a)},value:"view / edit",className:"btn btn-primary btn-sm "})))});e.setState({product_list:n,can_edit:t});t&&[{width:"10%"},{width:"10%"},{width:"10%"},{width:"10%"},{width:"5%"},{width:"10%"},{width:"15%"}].push({width:"10%"}),la()("#list_product").removeAttr("width").dataTable({order:[],dom:"Bfrtip",buttons:["csv","excel","print"]})}})}},{key:"render",value:function(){return!0===this.state.toView?r.a.createElement(Y.a,{to:"/fa_product/view/".concat(this.state.product_id)}):!0===this.state.toEdit?r.a.createElement(zr,{id:"product",product:this.state.product_details,onComponentChange:this.handleComponentChange}):null!=this.state.product_list?r.a.createElement("div",{className:"card"},r.a.createElement("div",{class:"card-header card-header-icon card-header-primary"},r.a.createElement("h3",{class:"card-title text-white d-inline-block"},"List of FA Products ")),r.a.createElement("div",{id:"",className:"p-4"},r.a.createElement("div",{id:"datatable",className:"table-responsive"},r.a.createElement("table",{id:"list_product",className:"table"},r.a.createElement("thead",{className:"text-info"},r.a.createElement("tr",null,r.a.createElement("th",null,"Product Name"),r.a.createElement("th",null,"Product Type"),r.a.createElement("th",null,"Credit Score Model"),r.a.createElement("th",null,"FA Amount"),r.a.createElement("th",null,"FA Duration"),r.a.createElement("th",null,"Flow Fee"),r.a.createElement("th",null,"Penalty Amount"),r.a.createElement("th",null,"Status"),r.a.createElement("th",null,"Action"))),r.a.createElement("tbody",null,this.state.product_list))))):r.a.createElement("div",null,r.a.createElement("p",null,"No FA Products Available ! "))}}]),a}(dt);function Yr(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(u.a)(e);if(t){var r=Object(u.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(m.a)(this,a)}}var Vr=function(e){Object(d.a)(a,e);var t=Yr(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={product_list:null,toView:!1,search_res_div_style:"hide_div",product_id:null,query:"",results:[]},e.getInfo=function(){Cr(e.state.query).then(function(t){t&&("success"===t.status?e.setState({results:t.data}):alert(t.message+"\n"+JSON.stringify(t.data)))})},e.handleInputChange=function(){e.setState({query:e.search.value},function(){e.state.query&&e.state.query.length>1?e.state.query.length%2===0&&e.getInfo():e.state.query})},e.handleClick=function(t){e.setState({product_id:t.target.id,toView:!0})},e}return Object(o.a)(a,[{key:"componentWillMount",value:function(){var e=this,t=this.acc_prvdr_code;Nr(this.req(null,t)).then(function(t){if(t){var a=t.data.map(function(t,a){return r.a.createElement("tr",null,r.a.createElement("td",{key:a}," ",t.product_name),r.a.createElement("td",{key:a}," ",t.data_provider),r.a.createElement("td",{key:a}," ",t.lender),r.a.createElement("td",{key:a}," ",t.credit_score_model),r.a.createElement("td",{key:a}," ",t.interest_percent_per_day),r.a.createElement("td",{key:a}," ",t.tenure_in_days),r.a.createElement("td",{key:a}," ",Re(t.max_loan_amount)),r.a.createElement("td",{key:a}," ",r.a.createElement(na,{id:t.id,entity:"loan_products",status:t.status})),r.a.createElement("td",{key:a}," ",r.a.createElement("input",{id:t.id,type:"submit",className:"",onClick:e.handleClick,value:"View / Edit",class:"btn btn-primary"})))});e.setState({product_list:a})}})}},{key:"componentDidUpdate",value:function(){la()("#list_product").dataTable({order:[],bAutoWidth:!0,bDestroy:!0})}},{key:"render",value:function(){var e=this;return!0===this.state.toView?r.a.createElement(Y.a,{to:"/fa_product/product/view/".concat(this.state.product_id)}):null!=this.state.product_list?r.a.createElement("div",{className:""},r.a.createElement("form",null,r.a.createElement("input",{placeholder:"Search for...",ref:function(t){return e.search=t},onChange:this.handleInputChange})),r.a.createElement("div",{id:"datatable",className:"table-responsive"},r.a.createElement("table",{id:"list_product",className:"table"},r.a.createElement("thead",{className:"text-info"},r.a.createElement("tr",null,r.a.createElement("th",null,"Product Name"),r.a.createElement("th",null,"Data Provider"),r.a.createElement("th",null,"Lender"),r.a.createElement("th",null,"Credit Score Model"),r.a.createElement("th",null,"Interest % per day"),r.a.createElement("th",null,"Tenure in days"),r.a.createElement("th",null,"Max Loan Amount"),r.a.createElement("th",null,"Status"),r.a.createElement("th",null,"Action"))),r.a.createElement("tbody",null,this.state.product_list)))):r.a.createElement("div",null,r.a.createElement("p",null,"No Float Advance Products Available ! "))}}]),a}(dt),Ur=function(e){return P("/api/admin/master_data/key/create",e)},Gr=function(e){return P("/api/admin/master_data/create",e)},Jr=function(e){return P("/api/admin/master_data/key/status",e)};function Kr(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(u.a)(e);if(t){var r=Object(u.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(m.a)(this,a)}}var Qr=function(e){Object(d.a)(a,e);var t=Kr(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={data_keys:"",comp_name:"master_data_key"},e.globalRadiobtn=function(t){t.target.checked?e.props.data.country_code="*":e.props.data.country_code=e.country_code},e.countrySpcfcRadiobtn=function(t){t.target.checked&&(e.props.data.country_code=e.country_code)},e}return Object(o.a)(a,[{key:"componentWillMount",value:function(){var e=this.country_code;this.setOptionsListToStateFromAppApi("common/key","all_data_keys",this.req({country_code:e,status:"enabled",add_no_parent:!0}),["data_key","data_key"])}},{key:"render",value:function(){return r.a.createElement("div",{id:""},r.a.createElement("div",{className:"container text-labelblue"},r.a.createElement("div",{className:"row"},r.a.createElement("h5",null,"Add Master Data Key")),r.a.createElement("br",null),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-3"},r.a.createElement("span",null,"Data Group"),r.a.createElement("font",{className:"text-danger"}," * "),r.a.createElement("select",{type:"text",id:"data_group",value:this.props.data.data_group,onChange:this.handleChange,className:"form-control"},this.getSelectOptions("data_group")))),r.a.createElement("br",null),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-3"},r.a.createElement("span",null,"Data Type"),r.a.createElement("font",{className:"text-danger"}," * "),r.a.createElement("select",{type:"text",id:"data_type",value:this.props.data.data_type,onChange:this.handleChange,className:"form-control"},this.getSelectOptions("data_type")))),r.a.createElement("br",null),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-3"},r.a.createElement("span",null,"Data Key"),r.a.createElement("font",{className:"text-danger"},"   *  "),r.a.createElement("input",{id:"data_key",value:this.props.data.data_key,onChange:this.handleChange,required:"required",className:"form-control"}))),r.a.createElement("br",null),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-3"},r.a.createElement("span",null,"Parent Data Key"),r.a.createElement("select",{id:"parent_data_key",value:this.props.data.parent_data_key,onChange:this.handleChange,className:"form-control"},this.state.all_data_keys_dd))),r.a.createElement("br",null),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-3"},r.a.createElement("span",null,"Key Description"),r.a.createElement("input",{id:"key_desc",value:this.props.data.key_desc,onChange:this.handleChange,required:"required",className:"form-control"}))),r.a.createElement("br",null),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-3"},r.a.createElement("b",null,r.a.createElement("span",null,"Data Scope")),r.a.createElement("br",null),"\xa0\xa0",r.a.createElement("label",null,r.a.createElement("input",{type:"radio",name:"data_scope",onClick:this.globalRadiobtn,defaultChecked:!0}),"\xa0\xa0 Global"),r.a.createElement("br",null),"\xa0\xa0",r.a.createElement("label",{className:this.state.country_spcfc_div_style},r.a.createElement("input",{type:"radio",name:"data_scope",onClick:this.countrySpcfcRadiobtn}),"\xa0\xa0",this.country_code)))))}}]),a}(ut);function Zr(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(u.a)(e);if(t){var r=Object(u.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(m.a)(this,a)}}var Xr=function(e){Object(d.a)(a,e);var t=Zr(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={data_keys:"",master_data_key:{country_code:"*"},toList:!1},e.handleSubmit=function(t){t.preventDefault();var a=e.state.master_data_key;Ur(e.req({master_data_key:a})).then(function(t){t&&(alert("Master Data Key saved succesfully!"),e.setState({toList:!0}))})},e}return Object(o.a)(a,[{key:"render",value:function(){return!0===this.state.toList?r.a.createElement(Y.a,{to:"/master_data_key/list"}):r.a.createElement("div",{id:""},r.a.createElement("div",{className:"container"},r.a.createElement(Qr,{id:"master_data_key",data:this.state.master_data_key,onComponentChange:this.handleComponentChange}),r.a.createElement("input",{type:"button",className:"btn btn-primary",onClick:this.handleSubmit,value:"Save"})))}}]),a}(dt);function $r(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(u.a)(e);if(t){var r=Object(u.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(m.a)(this,a)}}var el=function(e){Object(d.a)(a,e);var t=$r(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={masterDataKeyList:null},e.handleStatusClick=function(e){var t=e.target.value.toLowerCase()+"d",a={id:e.target.id,status:t};Jr({master_data_key:a}).then(function(e){e&&("success"===e.status?window.location.reload():alert(e.message+"\n"+JSON.stringify(e.data)))})},e}return Object(o.a)(a,[{key:"componentWillMount",value:function(){var e,t=this;(e=this.req(null),P("/api/admin/master_data/key/list",e)).then(function(e){if(e){var a=e.data.map(function(e,t){return r.a.createElement("tr",{key:t},r.a.createElement("td",null," ",e.data_key),r.a.createElement("td",null," ","*"===e.country_code?"Global":e.country_code),r.a.createElement("td",null," ",e.parent_data_key||"<<No Parent>>"),r.a.createElement("td",null," ",null===e.data_group?"<<No Data Group>>":e.data_group),r.a.createElement("td",null," ",null===e.data_type?"<<No Data Type>>":e.data_type),r.a.createElement("td",null," ",null===e.key_desc?"<<No Description>>":e.key_desc),r.a.createElement(na,{id:e.id,entity:"master_data_keys",status:e.status}))});t.setState({masterDataKeyList:a}),la()("#list").removeAttr("width").dataTable({order:[],columns:[{width:"20%"},{width:"10%"},{width:"18%"},{width:"18%"},{width:"8%"},{width:"8%"},{width:"8%"},{width:"10%"}],dom:"Bfrtip",buttons:["csv","excel","print"]})}})}},{key:"render",value:function(){return null!=this.state.masterDataKeyList?r.a.createElement("div",{id:""},r.a.createElement("div",{className:"container"},r.a.createElement("div",{id:"datatable",className:"table-responsive"},r.a.createElement("div",{className:"row"},r.a.createElement("h5",{className:"fa_left"},"List Master Data Key")),r.a.createElement("br",null),r.a.createElement("table",{id:"list",className:"table"},r.a.createElement("thead",{className:"text-info"},r.a.createElement("tr",null,r.a.createElement("th",null,"Data Key"),r.a.createElement("th",null,"Data Scope"),r.a.createElement("th",null,"Parent Data Key"),r.a.createElement("th",null,"Data Group"),r.a.createElement("th",null,"Data Type"),r.a.createElement("th",null,"Key Description"),r.a.createElement("th",null,"Status"),r.a.createElement("th",null,"Action"))),r.a.createElement("tbody",null,this.state.masterDataKeyList))))):r.a.createElement("div",null,r.a.createElement("p",null,"No Master Data Keys Available ! "))}}]),a}(dt);function tl(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(u.a)(e);if(t){var r=Object(u.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(m.a)(this,a)}}var al=function(e){Object(d.a)(a,e);var t=tl(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(e=t.call.apply(t,[this].concat(l))).state={dataKeyButtons:null,comp_name:"master_data",datatable_div_style:"hide_div"},e.handleClick=function(t,a){e.data_type=a,"*"===t.target.name?(e.globalCheckboxChecked=!0,e.countryCheckboxChecked=!1,e.setState({country_code:"*",country_spcfc_div_style:"disable_div"})):e.setState({country_code:e.country_code}),la()("#table").DataTable().destroy(),e.title_case_data_key=pe(t.target.id),e.data_key=t.target.id,e.listMasterData()},e.addButtonClick=function(t){e.setState({modalBox:!0});var a={country_code:e.country_code,data_key:e.data_key,status:"enabled"};e.setOptionsListToStateFromAppApi("common/key","parent_data_codes",e.req(a),["data_code","data_value"])},e.handleClose=function(t){e.resetModalBox(),e.setState({modalBox:!1})},e.handleGlobalCheckbox=function(t){t.target.checked?e.setState({country_code:"*"}):e.setState({country_code:e.country_code,country_spcfc_div_style:"show_div"})},e.addMasterData=function(t){t.preventDefault();var a={parent_data_code:e.props.data.parent_data_code,data_code:e.props.data.data_code,data_value:e.props.data.data_value,data_key:e.data_key,data_type:e.data_type,country_code:e.state.country_code,status:"enabled"};Gr(e.req({master_data:a})).then(function(t){if(t)if("success"===t.status){alert("Master Data added successfully!"),e.setState({modalBox:!1}),e.resetModalBox();e.country_code,e.title_case_data_key;la()("#table").dataTable().fnDestroy(),e.listMasterData()}else alert(t.message+"\n"+JSON.stringify(t.data))}),e.setState({modalBox:!0})},e.listMasterData=function(){var t={master_data:{country_code:e.state.country_code,data_key:e.data_key}};Ge(e.req(t)).then(function(t){if(t)if("success"===t.status){var a=t.data.map(function(e,t){return r.a.createElement("tr",{key:t},r.a.createElement("td",null," ",e.data_value),r.a.createElement("td",null," ",e.data_code),r.a.createElement("td",null," ",null==e.parent_data_code?"No Parent":e.parent_data_code),r.a.createElement(na,{id:e.id,parent:"master_data",entity:"master_data",status:e.status}))});e.setState({datatable_div_style:"show_div"}),e.setState({masterDataList:a}),e.setState({parent_data_codes_dd:null}),la()("#table").removeAttr("width").dataTable({order:[],dom:"Bfrtip",buttons:["csv","excel","print"]})}else alert(t.message+"\n"+JSON.stringify(t.data))})},e.handleChangeDataValue=function(t){e.handleChange(t);var a=t.target.value;a=a.replace(/ /g,"_").toLowerCase(),document.getElementById("data_code").value=a,e.props.data.data_code=a},e}return Object(o.a)(a,[{key:"componentWillMount",value:function(){var e=this,t={country_code:this.country_code,status:"enabled",add_no_parent:!1};(function(e){return P(D+"/common/key/all_data_keys",e)})(this.req(t)).then(function(t){if(t)if("success"===t.status){var a=[],n=[];t.data.list.map(function(e,t){"*"===e.country_code?a.push({data_key:e.data_key,data_type:e.data_type,data_group:e.data_group}):n.push({data_key:e.data_key,data_type:e.data_type,data_group:e.data_group})});var l=a.map(function(t,a){return r.a.createElement("input",{type:"button",key:a,id:t.data_key,name:"*",className:"btn_style btn btn-success",onClick:function(a){e.handleClick(a,t.data_type)},value:pe(t.data_key)+" ("+t.data_group+")"})});e.setState({globalDatakeyButtons:l});var c=n.map(function(t,a){return r.a.createElement("input",{type:"button",key:a,id:t.data_key,name:e.country_code,className:"btn_style btn btn-warning",onClick:function(a){e.handleClick(a,t.data_type)},value:pe(t.data_key)+" ("+t.data_group+")"})});e.setState({countrySpecificDatakeys:c})}else alert(t.message+"\n"+JSON.stringify(t.data))})}},{key:"resetModalBox",value:function(){this.props.data.data_code="",this.props.data.data_value="",this.props.data.data_type="",this.props.data.parent_data_code=""}},{key:"render",value:function(){return r.a.createElement("div",{id:""},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("h5",null,"Add Master Data")),r.a.createElement("div",{className:"row"},r.a.createElement("h5",null,r.a.createElement("b",null,"Global"))),this.state.globalDatakeyButtons,r.a.createElement("br",null),r.a.createElement("div",{className:"row"},r.a.createElement("h5",null,r.a.createElement("b",null,this.country_code))),this.state.countrySpecificDatakeys,r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("div",{className:this.state.datatable_div_style},r.a.createElement("div",{id:"datatable"},r.a.createElement("div",{className:"row"},r.a.createElement("h4",null,this.title_case_data_key,"*"===this.state.country_code&&" - Global"),"\xa0\xa0",r.a.createElement("input",{type:"button",className:"btn btn-primary",onClick:this.addButtonClick,value:"Add"})),r.a.createElement("br",null),r.a.createElement("table",{id:"table",className:"display strip row-border order-column list"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,this.title_case_data_key),r.a.createElement("th",null,this.title_case_data_key," Code"),r.a.createElement("th",null,"Parent Data Code"),r.a.createElement("th",null,"Status"),r.a.createElement("th",null,"Action"))),r.a.createElement("tbody",null,this.state.masterDataList)),r.a.createElement(rt.a,{show:this.state.modalBox,onHide:this.handleClose},r.a.createElement(rt.a.Header,{closeButton:!0,show:this.state.modalBox,onHide:this.handleClose},r.a.createElement(rt.a.Title,null,"Add ",this.title_case_data_key," "),r.a.createElement("br",null)),r.a.createElement(rt.a.Body,null,r.a.createElement("h5",null,"Data Scope : ","*"==this.state.country_code?"Global":this.state.country_code," "),r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row text-labelblue"},r.a.createElement("div",{className:"col-md-6"},r.a.createElement("span",null,this.title_case_data_key," Value"),r.a.createElement("font",{className:"text-danger"}," * "),r.a.createElement("input",{type:"text",id:"data_value",value:pe(this.props.data.data_value),onChange:this.handleChangeDataValue,className:"form-control"}))),r.a.createElement("br",null),r.a.createElement("div",{className:"row text-labelblue"},r.a.createElement("div",{className:"col-md-6"},r.a.createElement("span",null,this.title_case_data_key," Code"),r.a.createElement("font",{className:"text-danger"}," * "),r.a.createElement("input",{type:"text",id:"data_code",value:this.props.data.data_code,onChange:this.handleChange,className:"form-control"}))),r.a.createElement("br",null),this.state.parent_data_codes_dd&&r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-6"},r.a.createElement("label",null,"Parent Data Code"),r.a.createElement("select",{type:"text",id:"parent_data_code",value:this.props.data.parent_data_code,onChange:this.handleChange,className:"form-control"},this.state.parent_data_codes_dd))),this.state.show_data_scope&&r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-6"},r.a.createElement("label",null,"Data Scope"),r.a.createElement("br",null),"\xa0\xa0",r.a.createElement("label",null,r.a.createElement("input",{type:"radio",name:"data_scope",onClick:this.globalRadiobtn,defaultChecked:this.globalCheckboxChecked}),"\xa0\xa0 Global"),r.a.createElement("br",null),"\xa0\xa0",r.a.createElement("label",{className:this.state.country_spcfc_div_style},r.a.createElement("input",{type:"radio",name:"data_scope",onClick:this.countrySpcfcRadiobtn,defaultChecked:this.countryCheckboxChecked}),"\xa0\xa0 ",this.country_code)),r.a.createElement("br",null)))),r.a.createElement(rt.a.Footer,null,r.a.createElement(lt.a,{variant:"secondary",onClick:this.handleClose},"Close"),r.a.createElement(lt.a,{type:"button",variant:"primary",onClick:this.addMasterData},"Add")))))))}}]),a}(ut);function nl(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(u.a)(e);if(t){var r=Object(u.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(m.a)(this,a)}}var rl=function(e){Object(d.a)(a,e);var t=nl(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={data_keys:"",master_data:{}},e}return Object(o.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{id:""},r.a.createElement("div",{className:"container"},r.a.createElement(al,{id:"master_data",data:this.state.master_data,onComponentChange:this.handleComponentChange}),r.a.createElement("br",null)))}}]),a}(dt);function ll(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(u.a)(e);if(t){var r=Object(u.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(m.a)(this,a)}}var cl=function(e){Object(d.a)(a,e);var t=ll(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"componentWillMount",value:function(){}},{key:"render",value:function(){return!0===this.state.toList?r.a.createElement(Y.a,{to:"/app_user/list}"}):r.a.createElement("div",{className:"container"},r.a.createElement("h4",null,this.props.title+(this.state.market.name?" : "+this.state.market.name:"")),r.a.createElement("form",{id:"market_form",onSubmit:this.handleSubmit},r.a.createElement($t,{id:"head_person",title:"Market Head",data:this.state.head_person,mode:this.props.mode,onComponentChange:this.handleComponentChange}),r.a.createElement("input",{type:"button",className:"btn btn-primary ".concat("create"===this.props.mode?"show_button":"hide_button"),onClick:this.handleSubmit,value:"Create New Market"})),r.a.createElement("br",null),r.a.createElement("br",null))}}]),a}(dt),sl=function(e){return P("/api/admin/agreement",e)},ol=function(e){return P("/api/admin/agreement/cust",e)},il=function(e){return P("/api/admin/agreement/status",e)};function dl(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(u.a)(e);if(t){var r=Object(u.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(m.a)(this,a)}}var ml=function(e){Object(d.a)(a,e);var t=dl(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={productList:null,modal_close:!1,toList:!1,type:null},e.handleCreateAgreementClick=function(t){var a={lender_code:e.master_agreement.lender_code,duration_type:e.master_agreement.duration_type,name:e.master_agreement.name,aggr_type:e.agrmt_for,aggr_duration:e.master_agreement.validity,acc_purpose:e.product_group};sl(e.req({master_agreement:a},!0)).then(function(t){e.resp(t),t&&("success"===t.status?(alert(t.message),e.setState({toList:!0})):alert(t.message+"\n"+JSON.stringify(t.data)))})},e.loadProducts=function(t){if(e.setState({productList:null}),e[t.target.id]=t.target.value,"duration_type"==t.target.id){var a="days"==t.target.value?"days":"fas"==t.target.value?"fas":"months";e.setState({type:a})}null==e.lender_code?alert("Please select Lender"):console.log("ELSE"),e.handleSelfChange(t)},e}return Object(o.a)(a,[{key:"componentWillMount",value:function(){this.master_agreement={},this.agrmt_for="onboarded",this.product_group="float_advance",this.setOptionsToStateFromApi("lender")}},{key:"render",value:function(){return!0===this.state.toList?r.a.createElement(Y.a,{to:"/agreement/list"}):r.a.createElement("div",{className:"container text-labelblue"},r.a.createElement("h5",null,this.props.title),r.a.createElement("br",null),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-2"},r.a.createElement("span",null,"Lender"),r.a.createElement("font",{className:"text-danger"},"   *  "),r.a.createElement("select",{id:"lender_code",onChange:this.loadProducts,ref:this.props.createRef,className:"form-control",type:"text",required:"required"},this.state.lender_dd)),r.a.createElement("div",{className:"col-md-2"},r.a.createElement("span",null,"Product Group"),r.a.createElement("select",{id:"product_group",value:this.state.product_group,onChange:this.loadProducts,className:"form-control",type:"text",required:"required"},this.getSelectOptions("product_group"))),r.a.createElement("div",{className:"col-md-2"},r.a.createElement("span",null,"Agreement Type"),r.a.createElement("font",{className:"text-danger"},"   *  "),r.a.createElement("select",{id:"agrmt_for",onChange:this.loadProducts,className:"form-control",type:"text",required:"required"},r.a.createElement("option",{selected:!0},"Choose"),r.a.createElement("option",{value:"onboarded"},"Onboarded Customers"),r.a.createElement("option",{value:"condonation"},"Condonated Customers"),r.a.createElement("option",{value:"probation"},"Probationary Customers"))),r.a.createElement("div",{className:"col-md-2"},r.a.createElement("span",null,"Duration Type"),r.a.createElement("font",{className:"text-danger"},"   *  "),r.a.createElement("select",{id:"duration_type",onChange:this.loadProducts,className:"form-control",type:"text",required:"required"},r.a.createElement("option",{selected:!0},"Choose"),r.a.createElement("option",{value:"days"},"By days"),r.a.createElement("option",{value:"fas"},"By FAs"),r.a.createElement("option",{value:"months"},"By Months"))),r.a.createElement("div",{className:"col-md-2"},r.a.createElement("span",null,"Name"),r.a.createElement("input",{type:"text",id:"name",onChange:this.handleSelfChange,className:"form-control"})),"days"==this.state.type&&r.a.createElement("div",{className:"col-md-2"},r.a.createElement("span",null,"Agreement Validity"),r.a.createElement("font",{className:"text-danger"},"   *  "),r.a.createElement("select",{id:"validity",onChange:this.handleSelfChange,className:"form-control",type:"text",required:!0},r.a.createElement("option",{selected:!0},"Choose"),r.a.createElement("option",{value:"30"},"30 Days"),r.a.createElement("option",{value:"60"},"60 Days"),r.a.createElement("option",{value:"90"},"90 Days"),r.a.createElement("option",{value:"120"},"120 Days"),r.a.createElement("option",{value:"150"},"150 Days"),r.a.createElement("option",{value:"180"},"180 Days"))),"fas"==this.state.type&&r.a.createElement("div",{className:"col-md-2"},r.a.createElement("span",null,"Agreement Validity"),r.a.createElement("font",{className:"text-danger"},"   *  "),r.a.createElement("select",{id:"validity",onChange:this.handleSelfChange,className:"form-control",type:"text",required:!0},r.a.createElement("option",null,"Choose"),r.a.createElement("option",{value:"8"},"Until completing 8 FAs"),r.a.createElement("option",{value:"15"},"Until completing 15 FAs"))),"months"==this.state.type&&r.a.createElement("div",{className:"col-md-2"},r.a.createElement("span",null,"Agreement Validity"),r.a.createElement("font",{className:"text-danger"},"   *  "),r.a.createElement("select",{id:"validity",onChange:this.handleSelfChange,className:"form-control",type:"text",required:!0},r.a.createElement("option",null,"Choose"),r.a.createElement("option",{value:"12"},"12 months"),r.a.createElement("option",{value:"15"},"15 months"),r.a.createElement("option",{value:"18"},"18 months"),r.a.createElement("option",{value:"24"},"24 months"))),r.a.createElement("div",{className:"col-md-2 mt-4"},r.a.createElement("input",{type:"button",disabled:this.state.calling_api,value:"Create Agreement",onClick:this.handleCreateAgreementClick,className:"btn btn-primary"}))))}}]),a}(ut);function ul(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(u.a)(e);if(t){var r=Object(u.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(m.a)(this,a)}}var pl=function(e){Object(d.a)(a,e);var t=ul(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={agreementList:null,rowdatas:[],columndatas:[],copy:[]},e.changeHandler=function(t){var a=t,n=e.state.rowdatas.filter(function(e){return null!==e.name&&e.name.toLowerCase().includes(a.toLowerCase())||null!==e.lender_code&&e.lender_code.toLowerCase().includes(a.toLowerCase())||null!==e.aggr_type&&e.aggr_type.toLowerCase().includes(a.toLowerCase())||null!==e.aggr_doc_id&&e.aggr_doc_id.toLowerCase().includes(a.toLowerCase())});e.setState(function(e){return e.copy=n})},e}return Object(o.a)(a,[{key:"componentWillMount",value:function(){var e,t=this;this.setOptionsListToStateFromAppApi("common","list",this.def_req,["acc_prvdr_code","name"],"acc_prvdrs"),(e=this.req(null,!0),P("/api/admin/agreement/list",e)).then(function(e){e&&e&&(t.setState(function(t){return t.rowdatas=e.data}),t.setState(function(t){return t.copy=e.data}),t.setState(function(e){return e.columndatas=t.columndatas()}))})}},{key:"columndatas",value:function(){return[{Header:"Name",id:"name",accessor:function(e){return e.name}},{Header:"Lender",id:"lender_code",accessor:function(e){return e.lender_code}},{Header:"Agreement Type",id:"aggr_type",accessor:function(e){return he(e.aggr_type)}},{Header:"Agreement Doc ID",id:"aggr_doc_id",accessor:function(e){return e.aggr_doc_id}},{Header:"Duration",id:"aggr_duration",accessor:function(e){return e.aggr_duration}},{Header:"Status",id:"status",accessor:function(e){return r.a.createElement(na,{id:e.id,entity:"master_agreements",status:e.status,head:"1"})}},{Header:"Action",id:"action",accessor:function(e){return r.a.createElement(na,{id:e.id,entity:"master_agreements",status:e.status,head:"2"})}},{Header:"View",id:"aggr_file_rel_path",accessor:function(e){return e.aggr_file_rel_path?r.a.createElement(ee.a,{to:e.aggr_file_rel_path,target:"_blank"},"View PDF"):r.a.createElement("span",null,"NA")}}]}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"container containerTopmargin max-width no-padding"},r.a.createElement("div",null,r.a.createElement("h5",{className:"no-margin headerTitle"},"Agreement List"),this.state.rowdatas.length>0&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"d-flex justify-content-between align-items-center",style:{padding:5}},r.a.createElement("p",{className:"no-margin text-white"},r.a.createElement("b",null,"Total Entries : ",this.state.copy.length)),r.a.createElement("div",{style:{position:"relative"}},r.a.createElement("i",{class:"fa-solid fa-magnifying-glass search_pos"}),r.a.createElement("input",{placeholder:"Search here",className:"search_posInput",onChange:function(t){return e.changeHandler(t.target.value)}}))),r.a.createElement(za,{showPag:!0,minRow:0,row_data:void 0!==this.state.copy?this.state.copy:[],column_data:this.state.columndatas,resizable:!1,defaultSorted:[{id:"name",desc:!1}],exportCSV:!0,csvFile:"Agreement Lists",csvData:this.state.copy}))))}}]),a}(dt);function _l(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(u.a)(e);if(t){var r=Object(u.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(m.a)(this,a)}}var hl=function(e){Object(d.a)(a,e);var t=_l(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={ScoreModelsList:null,lists:[],columndatas:[]},e.handleClose=function(t){e.setState({modalBox:!1})},e.addButtonClick=function(t){jr(e.req(e.score_model)).then(function(t){t&&"success"==t.status&&(alert(JSON.stringify(t.message)),e.setState({modalBox:!1}),window.location.reload())})},e.handleChangeDataValue=function(t){e.handleSelfChange(t);var a=t.target.value;a=a.replace(/ /g,"_").toLowerCase(),document.getElementById("model_code").value=a,e.score_model.model_code=a},e.addScoreModel=function(t){e.setState({modalBox:!0})},e}return Object(o.a)(a,[{key:"componentWillMount",value:function(){var e=this;this.score_model={};var t={country_code:this.country_code};Rr(this.req(t)).then(function(t){t&&(e.setState(function(e){return e.lists=t.data}),e.setState(function(t){return t.columndatas=e.columndatas()}))})}},{key:"columndatas",value:function(){return[{Header:"SI No.",id:"row",Cell:function(e){return r.a.createElement("div",null,e.index+1)}},{Header:"CS Model Code",id:"model_code",accessor:function(e){return e.model_code}},{Header:"CS Model Name",id:"model_name",accessor:function(e){return Ze(e.model_name)}},{Header:function(){return r.a.createElement("div",{style:{textAlign:"center"}},"Model Configs")},id:"model_code_sample",show:!!E("score","weightage_list"),accessor:function(e){return r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement(ee.a,{to:"/score_models/weightage/".concat(e.model_code,"/").concat(e.model_name),target:"_blank"},r.a.createElement("input",{type:"button",value:"Weightages",className:"btn-sm btn-primary`"})),r.a.createElement(ee.a,{style:{paddingLeft:20},to:"/score_models/result_config/".concat(e.model_code),target:"_blank"},r.a.createElement("input",{type:"button",value:"Result Configs",className:"btn-sm btn-primary"})))}}]}},{key:"render",value:function(){return r.a.createElement("div",{className:"container containerTopmargin max-width no-padding"},E("score","create")&&r.a.createElement("div",{style:{textAlign:"right"}},r.a.createElement("input",{type:"button",value:"Add Score Model",onClick:this.addScoreModel,className:"btn btn-primary"})),r.a.createElement("div",null,r.a.createElement("h5",{className:"no-margin personalDetailstextval preHeaderpad headerTitle"},"Score Models"),r.a.createElement(za,{showPag:!0,minRow:0,row_data:void 0!==this.state.lists?this.state.lists:[],column_data:this.state.columndatas,resizable:!1,exportCSV:!0,csvFile:"ScoreModels",csvData:this.state.lists?this.state.lists:[]})),r.a.createElement(rt.a,{show:this.state.modalBox,onHide:this.handleClose},r.a.createElement(rt.a.Header,{closeButton:!0,show:this.state.modalBox,onHide:this.handleClose},r.a.createElement(rt.a.Title,null,"Add Score Model "),r.a.createElement("br",null)),r.a.createElement(rt.a.Body,null,r.a.createElement("div",{className:"container text-labelblue"},r.a.createElement("div",{className:"d-flex align-items-center justify-content-around"},r.a.createElement("div",{className:"col-5 text-center"},r.a.createElement("span",null,"Score Model Value"),r.a.createElement("font",{className:"text-danger"}," * "),r.a.createElement("input",{type:"text",id:"model_name",value:this.score_model.model_name,onChange:this.handleChangeDataValue,className:"form-control"})),r.a.createElement("div",{className:"col-5 text-center"},r.a.createElement("span",null,"Score Model Code"),r.a.createElement("input",{type:"text",id:"model_code",value:this.score_model.model_code,onChange:this.handleSelfChange,className:"form-control",disabled:!0}))))),r.a.createElement(rt.a.Footer,null,r.a.createElement(lt.a,{variant:"secondary",onClick:this.handleClose},"Close"),r.a.createElement(lt.a,{style:{marginLeft:10},type:"button",variant:"primary",onClick:this.addButtonClick},"Add"))))}}]),a}(ut);function fl(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(u.a)(e);if(t){var r=Object(u.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(m.a)(this,a)}}var vl=function(e){Object(d.a)(a,e);var t=fl(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={ScoreFactorsList:null},e}return Object(o.a)(a,[{key:"componentWillMount",value:function(){var e=this,t={data_key:"csf_type",country_code:this.country_code};(function(e){return P("/api/admin/master_data/score_factors/list",e)})(this.req(t)).then(function(t){if(t){var a=t.data.map(function(e,t){return r.a.createElement("tr",{key:t},r.a.createElement("td",null," ",e.data_value),r.a.createElement("td",null," ",null==e.parent_data_code?"No Parent":Ze(e.parent_data_code)))});e.setState({ScoreFactorsList:a}),la()("#table").dataTable({bAutoWidth:!0})}})}},{key:"render",value:function(){return r.a.createElement("div",{className:"container table-responsive"},r.a.createElement("br",null),r.a.createElement("div",{className:"row"},r.a.createElement("h5",null,r.a.createElement("b",null,"Score Factors"))),r.a.createElement("table",{id:"table",className:"table"},r.a.createElement("thead",{className:"text-info"},r.a.createElement("tr",null,r.a.createElement("th",null,"Score Factor Type"),r.a.createElement("th",null,"Score Factor Group"))),r.a.createElement("tbody",null,this.state.ScoreFactorsList)))}}]),a}(ut);function gl(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(u.a)(e);if(t){var r=Object(u.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(m.a)(this,a)}}var yl=function(e){Object(d.a)(a,e);var t=gl(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={weightageList:[],cs_weightages:null,lists:[]},e.handleCustWeightage=function(t){var a=t.target.id,n=t.target.value;if(console.log(a,n,"check the percent calculations"),!(Number(t.target.value)>100)){var r=e.total_new,l=e.total_repeat,c=!1;e.cs_weightages.map(function(t,s){return a==t.csf_type+"_new"?(r-=Number(t.new_cust_weightage),void((r+=Number(n))<=100&&Number(n)>=0?(t.new_cust_weightage=n,e.new_save_style=100==r?"enable_div":"disable_div"):c=!0)):a==t.csf_type+"_repeat"?(l-=Number(t.repeat_cust_weightage),void((l+=Number(n))<=100&&Number(n)>=0?(t.repeat_cust_weightage=n,e.repeat_save_style=100==l?"enable_div":"disable_div"):c=!0)):void 0}),c||(e.handleSelfChange(t),e.renderWeightageList())}},e.handleBackButton=function(t){e.setState({toPrev:!0})},e.renderWeightageList=function(){if(null!=e.cs_weightages){e.total_new=0,e.total_repeat=0,e.cs_weightages.map(function(t,a){e.total_new+=Number(t.new_cust_weightage),e.total_repeat+=Number(t.repeat_cust_weightage)});Object.keys(e.cs_weightages).length;var t=e.columndatas();e.setState({weightageList:t})}},e.editWeightage=function(t){var a=t.target.id+"_style";t.target.id;"disable_div"==e[a]?(e[a]="enable_div",a.includes("new")?(e.repeat_cust_disable=!0,e.new_cust_disable=!1):a.includes("repeat")&&(e.new_cust_disable=!0,e.repeat_cust_disable=!1)):e[a]="disable_div",e.renderWeightageList()},e.handleSaveClick=function(t){e.csw_comp.score_model=e.score_model;var a=e.csw_comp;Sr(e.req({cs_weightages:a})).then(function(t){t&&(e.new_save_style="disable_div",e.repeat_save_style="disable_div",e.renderWeightageList(),"success"==t.status&&(alert("Weightage updated successfully"),window.location.reload()))})},e.addBtnClick=function(t){var a={cs_model_code:e.score_model,country_code:e.country_code};Ar(e.req(a)).then(function(t){t&&"success"==t.status&&e.getSelectOptionsFromResult(t.data,"cs_factors",["id","name"])}),e.setState({modalBox:!0})},e.handleAddFactor=function(t){var a={country_code:e.country_code,cs_model_code:e.score_model,csf_type:e.state.csf_type,new_cust_weightage:0,repeat_cust_weightage:0};Or(e.req({cs_model_weightage:a})).then(function(e){e&&(alert(e.message),window.location.reload())})},e.handleClose=function(t){e.setState({modalBox:!1})},e}return Object(o.a)(a,[{key:"componentWillMount",value:function(){var e=this;this.new_cust_disable=!1,this.repeat_cust_disable=!1,this.new_cust_style="disable_div",this.repeat_cust_style="disable_div",this.new_save_style="disable_div",this.repeat_save_style="disable_div",this.csw_comp={},this.total_new=0,this.total_repeat=0,this.score_model=this.props.match.params.score_model,this.model_name=this.props.match.params.score_model_name;var t={cs_model_code:this.score_model,country_code:this.country_code};(function(e){return P("/api/admin/score_model/weightages",e)})(this.req(t)).then(function(t){if(t){e.cs_weightages=t.data,e.setState(function(e){return e.lists=t.data});e.renderWeightageList()}})}},{key:"columndatas",value:function(){var e=this,t=Object.keys(this.cs_weightages).length,a=1;return[{Header:"SI No.",id:"row",Cell:function(e){return r.a.createElement("div",{className:"text-center"},e.index+1)},Footer:r.a.createElement("div",{className:"text-center"},r.a.createElement("b",null))},{Header:"Factor",id:"csf_type",accessor:function(e){return Ze(e.csf_type)},Footer:r.a.createElement("div",{className:"text-center"},r.a.createElement("b",null,"Total"))},{Header:function(){return r.a.createElement("div",{className:"text-center"},"Weightage for New Cust",E("score","weightage_edit")&&r.a.createElement("div",{className:"d-flex justify-content-around align-items-center",style:{marginTop:10}},r.a.createElement("input",{type:"button",id:"new_cust",value:"Edit",onClick:e.editWeightage,className:"btn btn-success"}),r.a.createElement("input",{type:"button",value:"Save",onClick:e.handleSaveClick,className:"btn btn-success ".concat(e.new_save_style)})))},id:"sample_1",accessor:function(t){return r.a.createElement("div",{className:"d-flex justify-content-around align-items-center"},r.a.createElement("div",{className:"col-6"},r.a.createElement("input",{id:"".concat(t.csf_type,"_new"),type:"text",value:t.new_cust_weightage,tabIndex:a++,onChange:e.handleCustWeightage,className:"form-control weightage_style ".concat(e.new_cust_style),disabled:e.new_cust_disable})),r.a.createElement("div",{className:"col-5"},"%"))},Footer:r.a.createElement("div",{className:"text-center"},r.a.createElement("b",null,this.total_new," %"))},{Header:function(){return r.a.createElement("div",{className:"text-center"},"Weightage for Repeat Cust",E("score","weightage_edit")&&r.a.createElement("div",{className:"d-flex justify-content-around align-items-center",style:{marginTop:10}},r.a.createElement("input",{type:"button",id:"repeat_cust",value:"Edit",onClick:e.editWeightage,className:"btn btn-success"}),r.a.createElement("input",{type:"button",value:"Save",onClick:e.handleSaveClick,className:"btn btn-success ".concat(e.repeat_save_style)})))},id:"sample_2",accessor:function(a){return r.a.createElement("div",{className:"d-flex justify-content-around align-items-center"},r.a.createElement("div",{className:"col-6"},r.a.createElement("input",{id:"".concat(a.csf_type,"_repeat"),type:"text",value:a.repeat_cust_weightage,tabIndex:t++,onChange:e.handleCustWeightage,className:"form-control weightage_style ".concat(e.repeat_cust_style),disabled:e.repeat_cust_disable})),r.a.createElement("div",{className:"col-5"},"%"))},Footer:r.a.createElement("div",{className:"text-center"},r.a.createElement("b",null,this.total_repeat," %"))}]}},{key:"render",value:function(){return!0===this.state.toPrev?r.a.createElement(Y.a,{to:"/score_models"}):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"container containerTopmargin max-width no-padding"},r.a.createElement("div",{className:"d-flex justify-content-between align-items-center"},r.a.createElement("h4",{className:"no-margin personalDetailstextval preHeaderpad headerTitle"},"CS Weightage"),E("score","weightage_create")&&r.a.createElement("div",null,r.a.createElement("input",{type:"button",value:"Add New Factor",onClick:this.addBtnClick,className:"btn btn-primary"}))),r.a.createElement("div",{className:"d-flex justify-content-between align-items-center"},r.a.createElement("h4",{className:"no-margin headerTitle"},"Score Model: ",r.a.createElement("b",null,Ze(this.model_name)))),r.a.createElement("div",{className:"csWeightagetab"},r.a.createElement(za,{showPag:!1,minRow:0,row_data:void 0!==this.state.lists?this.state.lists:[],column_data:this.state.weightageList,resizable:!1,sortable:!1,exportCSV:!0,csvFile:"CS Weightage",csvData:this.state.lists?this.state.lists:[]})),r.a.createElement("div",{className:"row no-margin"},r.a.createElement("input",{type:"button",value:"Back",onClick:this.handleBackButton,className:"btn btn-primary"}))),r.a.createElement("div",null,r.a.createElement(rt.a,{show:this.state.modalBox,onHide:this.handleClose,style:{width:"-700px"}},r.a.createElement(rt.a.Header,{closeButton:!0,show:this.state.modalBox,onHide:this.handleClose},r.a.createElement(rt.a.Title,null,r.a.createElement("h3",null,"Add New Factor"))),r.a.createElement(rt.a.Body,null,r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"d-flex justify-content-around align-items-baseline"},r.a.createElement("div",null,r.a.createElement("label",{className:"no-margin"},"Factor"),r.a.createElement("select",{id:"csf_type",onChange:this.handleSelfChangeState,className:"form-control"},this.state.cs_factors_dd))),r.a.createElement("br",null))),r.a.createElement(rt.a.Footer,null,r.a.createElement(lt.a,{variant:"primary",onClick:this.handleAddFactor},"Add"),r.a.createElement(lt.a,{style:{marginLeft:10},variant:"secondary",onClick:this.handleClose},"Close")))))}}]),a}(ut);function El(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(u.a)(e);if(t){var r=Object(u.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(m.a)(this,a)}}var bl=function(e){Object(d.a)(a,e);var t=El(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(e=t.call.apply(t,[this].concat(l))).state={score_result_div:[]},e.renderScoreResult=function(){var t=Object.keys(e.score_results),a=t.length,n=t.map(function(t,n){return r.a.createElement("tr",{key:n},r.a.createElement("td",{className:"width-30"},r.a.createElement("b",null,Ze(e.score_results[t].code))),r.a.createElement("td",null),r.a.createElement("td",{className:"width-15"},r.a.createElement("input",{id:"score_from_".concat(t),type:"text",readOnly:!0,value:1==t?"0":e.score_results[t].score_from,className:"form-control width-50"})),r.a.createElement("td",{className:"width-15"},"To"),r.a.createElement("td",{className:"width-15"}," ",r.a.createElement("input",{id:"score_to_".concat(t),type:"text",value:t==a?"1000":e.score_results[t].score_to,onChange:e.handleScoreChange,readOnly:t==a,className:"form-control width-50"})),r.a.createElement("td",{className:"width-25"},"Points"))});e.setState({score_result_div:n})},e.handleScoreChange=function(t){var a=t.target.id,n=t.target.value,r=a.split("_"),l=r[r.length-1],c="score_from_"+l;if(c=document.getElementById(c).value,e.score_results[l].score_to=n,e.renderScoreResult(),Number(n)<=Number(c))e.valid=!1;else{e.valid=!0;var s=++l,o="score_from_"+s;document.getElementById(o).value=++n,e.score_results[s].score_from=n,e.handleSelfChange(t),e.renderScoreResult()}},e.handleSaveClick=function(t){var a=Object.keys(e.result_config).length,n=Object.keys(e.score_results).length;if(0==e.valid||"create"==e.mode&&a!=n-1||"edit"==e.mode&&0==a)alert("Please enter valid score range");else{var r={country_code:e.country_code,csf_model:e.score_model,score_result_codes:e.score_results,score_details:e.result_config};kr(e.req({cs_result:r})).then(function(e){e&&"success"==e.status&&(alert("CS Result configured successfully"),window.location.reload())})}},e}return Object(o.a)(a,[{key:"componentWillMount",value:function(){var e=this;this.valid=!1,this.result_config={},this.score_results={},this.score_model=this.props.match.params.score_model;var t={csf_model:this.score_model,country_code:this.country_code};(function(e){return P("/api/admin/score_model/cs_result_config/list",e)})(this.req(t)).then(function(t){t&&"success"==t.status&&(t.data.cs_result_config_details.length>0?(t.data.cs_result_config_details.map(function(t,a){var n=a+1;e.score_results[n]={},e.score_results[n].code=t.score_result_code,e.score_results[n].score_from=t.score_from,e.score_results[n].score_to=t.score_to,e.result_config["score_from_"+n]=t.score_from,e.result_config["score_to_"+n]=t.score_to}),e.mode="edit"):(e.score_results={1:{code:"ineligible"},2:{code:"requires_flow_rm_approval"},3:{code:"eligible"}},e.mode="create"),e.renderScoreResult())})}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"border_style text-labelblue container containerTopmargin max-width",style:{padding:15}},r.a.createElement("div",null,r.a.createElement("h3",{className:"headerTitle"},"Score Result Config")),r.a.createElement("div",null,r.a.createElement("div",{className:"table-responsive"},r.a.createElement("table",{className:"table"},r.a.createElement("thead",{className:"text-info"},r.a.createElement("tr",null,r.a.createElement("th",null,r.a.createElement("h5",{className:"headerTitle no-margin"},"Result")),r.a.createElement("th",null),r.a.createElement("th",null,r.a.createElement("h5",{className:"headerTitle no-margin"},"Score From")),r.a.createElement("th",null),r.a.createElement("th",null,r.a.createElement("h5",{className:"headerTitle no-margin"},"Score To")),r.a.createElement("th",null))),r.a.createElement("tbody",null,this.state.score_result_div)))),E("score","result_config_create_edit")&&r.a.createElement("div",{className:"text-right"},r.a.createElement("input",{type:"button",value:"Save",onClick:this.handleSaveClick,className:"btn btn-success"}))))}}]),a}(ut),wl=function(e){return P("/api/admin/report",e)},Nl=function(e){return P("/api/admin/report",e)},xl=function(e){return P("/api/admin/report/cur_details",e)},Cl=function(e){return P("/api/admin/report/sms_reports",e)},kl=function(e){return P("/api/admin/report/report_date",e)};function Sl(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(u.a)(e);if(t){var r=Object(u.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(m.a)(this,a)}}var Ol=function(e){Object(d.a)(a,e);var t=Sl(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={comp_name:"date_range"},e}return Object(o.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"row date-range"},r.a.createElement("div",{className:"col-md-4"},r.a.createElement("span",null,"Start Date"),r.a.createElement(Ht.a,{closeOnSelect:!0,onChange:function(t){e.handleDateChange("start_date",t)},dateFormat:"DD MMM YYYY",timeFormat:!1,required:"required"})),r.a.createElement("div",{className:"col-md-4"},r.a.createElement("span",null,"End Date"),r.a.createElement(Ht.a,{closeOnSelect:!0,onChange:function(t){e.handleDateChange("end_date",t)},dateFormat:"DD MMM YYYY",timeFormat:!1,required:"required"})),r.a.createElement("div",{className:"col-md-2",style:{display:"flex",alignItems:"center"}},r.a.createElement("input",{type:"button",className:"btn btn-primary",disabled:this.props.disable_btn,onClick:this.props.onSubmitClick,value:"Submit"})))}}]),a}(ut);function Al(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(u.a)(e);if(t){var r=Object(u.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(m.a)(this,a)}}var jl=function(e){Object(d.a)(a,e);var t=Al(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={rows:null,headers:null,date_range:{},account:null,tableExists:!1},e.handleSubmit=function(t){e.state.tableExists&&la()("#kpi_table").DataTable().destroy(),e.get_report()},e.handleAccPrvdrCode=function(t){e.setState({acc_prvdr_code:t.target.value}),"false"==e.props.with_date_range&&e.get_report()},e.loadAccounts=function(t){""==t.target.value&&e.setState({account:null}),""!=t.target.value&&e.setState({account:t.target.value})},e}return Object(o.a)(a,[{key:"get_header",value:function(e){var t=e.map(function(e){return r.a.createElement("th",null,e)});return t.unshift(r.a.createElement("th",null,"No")),t}},{key:"format_metric",value:function(e,t){if("%"==t)e=Number(e).toFixed(2)+" %";else if("days"==t)e=Number(e).toFixed(0)+" days";else{if("UGX"==t||"RWF"==t||"USD"==t)return xe(Math.round(e),t);"status"==t?e=Ze(e):"date"==t?e=ge(e):Array.isArray(e)&&(e=e.map(function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{style:{color:"white"}},e),r.a.createElement("br",null))}))}return e}},{key:"get_rows",value:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return e.map(function(e,n){var l=e.map(function(e,n){return r.a.createElement("td",null,t.format_metric(e,a[n]))});return r.a.createElement("tr",{key:n},r.a.createElement("td",null,n+1),l)})}},{key:"componentWillMount",value:function(){var e=this;if(null!=v("acc_prvdr_code"))if("false"==this.props.with_date_range)this.get_report();else{var t=this.props.report_type.replace(/_/g," ");this.setState({title:t})}this.setOptionsListToStateFromAppApi("common","list",Object(X.a)({},this.def_req,{status:"enabled",biz_account:!0}),["acc_prvdr_code","name"],"acc_prvdrs");var a=v("acc_prvdr_code"),n={lender_code:"UFLW",country_code:this.country_code,to_recon:!0,network_prvdr_code:a};null!=a&&Pa(this.req({account:n},!0)).then(function(t){t&&("success"===t.status?""!=t.data&&e.getSelectOptionsFromResult(t.data,"lender_accounts",["id","name"]):alert(t.message+"\n"+JSON.stringify(t.data)))})}},{key:"get_report",value:function(){var e=this,t=this.props.report_type,a=this.country_code,n=this.state.date_range,r=this.state.acc_prvdr_code,l=this.state.account;wl(this.req({report_type:t,country_code:a,date_range:n,acc_prvdr_code:r,account_id:l},!0)).then(function(t){if(e.resp(t),t)if("success"===t.status){var a=t.data.records,n=t.data.units,r=e.get_header(t.data.header),l=e.get_rows(a,n),c=t.data.page_length;e.setState({headers:r,rows:l,title:t.data.title}),la()("#kpi_table").removeAttr("width").dataTable({retrieve:!0,searching:!0,paging:!0,info:!1,pageLength:c,dom:"Bfrtip",buttons:[{title:"",extend:"print",customize:function(e){la()(e.document.body).prepend('<img src="'+window.location.origin+'/logo_blue.png" alt = "FLOW" style="float:left;"/>')}},{extend:"csv",text:"Export csv"}],order:[]}),e.setState({tableExists:!0})}else alert(t.message+"\n"+JSON.stringify(t.data))})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"container date-range containerTopmargin max-width no-padding"},r.a.createElement("h5",{className:"no-margin headerTitle headerPadvert text-capitalize"},this.state.title),r.a.createElement("div",{className:"row"},!this.admin_roles.includes(v("role_codes"))&&r.a.createElement("div",{className:"col-md-2"},r.a.createElement("span",null,"Account Provider"),r.a.createElement("font",{className:"text-danger"},"   *  "),r.a.createElement("select",{id:"acc_prvdr_code",value:this.state.acc_prvdr_code,onChange:function(t){e.handleAccPrvdrCode(t)},className:"form-control",type:"text",required:"required"},this.state.acc_prvdrs_dd)),"true"==this.props.with_date_range&&r.a.createElement("div",{className:"col-md-10"},r.a.createElement(Ol,{className:"mb-4",id:"date_range",data:this.state.date_range,onSubmitClick:this.handleSubmit,onComponentChange:this.handleComponentChange,disable_btn:this.state.calling_api})),"daily_activity"==this.props.report_type&&r.a.createElement("div",{className:"col-md-3 mt-5"},r.a.createElement("span",null,"Accounts"),r.a.createElement("select",{id:"account",className:"form-control mt-2",onChange:function(t){e.loadAccounts(t)},onComponentChange:this.handleComponentChange},this.state.lender_accounts_dd))),r.a.createElement("br",null),r.a.createElement("div",{id:"kpi_datatable",className:"table-responsive"},r.a.createElement("table",{id:"kpi_table",className:"table list no-footer"},r.a.createElement("thead",{className:"text-info"},r.a.createElement("tr",null,this.state.headers)),r.a.createElement("tbody",null,this.state.rows))))}}]),a}(dt),Rl=function(e){return P(D+"/loan_appl/products",e)},Dl=function(e){return P(D+"/loan/approval",e)},Fl=function(e){return P(D+"/loan_appl/apply",e)},Ll=function(e){return P(D+"/loan_appl/applications",e)},Pl=function(e){return P(D+"/loan_appl/validate",e)};function Bl(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(u.a)(e);if(t){var r=Object(u.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(m.a)(this,a)}}a(19).dataTable=a(53);var Ml=function(e){Object(d.a)(a,e);var t=Bl(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(e=t.call.apply(t,[this].concat(l))).state={productList:null,list:!1,upload:!1,create:!1,toUpload:!1,create_agreement:{aggr_doc_id:{}},prompt_inactivate:"hide_div",rowdatas:[],columndatas:[],copy:[]},e.handleProductCheckbox=function(t){if(t.target.checked){var a=e.product_ids.slice();a.push(t.target.id),e.product_ids=a}else e.product_ids=e.product_ids.filter(function(e){return e!=t.target.id})},e.inactivateAggr=function(t){var a=t.target.id,n=e.req({aggr_id:a,cust_id:e.cust_id});il(n).then(function(t){t&&("success"===t.status?(alert(t.message),e.setState({agreement_tr:null,agreements:null,prompt_inactivate:!1}),e.onLoad()):alert(t.message+"\n"+JSON.stringify(t.data)))})},e.handleGenerateAggr=function(t){var a,n=new Date;if(n.setDate(n.getDate()+180),a=n.toISOString().substr(0,10),0!=window.confirm("Are you sure to generate a new agreement?"))if(console.log("agreement"),console.log(e.create_agreement.valid_upto),console.log(a),e.create_agreement.valid_upto>a)alert("Agreement validity cannot be more than 180 days");else{var r={product_ids:e.product_ids,cust_id:e.cust_id,valid_from:e.create_agreement.valid_from,valid_upto:e.create_agreement.valid_upto,country_code:e.country_code};ol(e.req({cust_agreement:r},!0)).then(function(t){e.resp(t),t&&("success"===t.status?(e.aggr_doc_id=t.data.aggr_doc_id,e.setState({toUpload:!0,btn_style:""})):alert(t.message+"\n"+JSON.stringify(t.data)))})}},e.handleUploadSignedAgr=function(t){e.setState({file_upload:!0})},e.listAgreements=function(){return r.a.createElement("div",null,(null!=e.state.agreement_tr||"list"==e.props.mode)&&r.a.createElement("div",null,r.a.createElement("div",{className:"d-flex justify-content-between align-items-center",style:{padding:5}},r.a.createElement("p",{className:"no-margin text-white"},r.a.createElement("b",null,"Total Entries : ",e.state.copy.length)),r.a.createElement("div",{style:{position:"relative"}},r.a.createElement("i",{class:"fa-solid fa-magnifying-glass search_pos"}),r.a.createElement("input",{placeholder:"Search here",className:"search_posInput",onChange:function(t){return e.changeHandler(t.target.value)}}))),r.a.createElement(za,{showPag:!0,minRow:0,row_data:void 0!==e.state.copy?e.state.copy:[],column_data:e.state.columndatas,resizable:!1,defaultSorted:[{id:"aggr_doc_id",desc:!1}],exportCSV:!0,csvFile:"Agreements",csvData:e.state.copy})))},e.changeHandler=function(t){var a=t,n=e.state.rowdatas.filter(function(t){return"list"===e.props.mode?null!==t.aggr_doc_id&&t.aggr_doc_id.toLowerCase().includes(a.toLowerCase())||null!==t.aggr_type&&t.aggr_type.toLowerCase().includes(a.toLowerCase())||null!==t.status&&t.status.toLowerCase().includes(a.toLowerCase()):null!==t.product_name&&t.product_name.toLowerCase().includes(a.toLowerCase())||null!==t.product_type&&t.product_type.toLowerCase().includes(a.toLowerCase())});e.setState(function(e){return e.copy=n})},e.createAgreement=function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"row no-margin"},r.a.createElement("div",{className:"col-md-5 no-padding"},r.a.createElement("h3",{className:"headerTitle headerPadvert no-margin"},"Customer: ",e.cust_id))),r.a.createElement("div",{className:"row no-margin"},r.a.createElement("div",{className:"col-md-2"}),r.a.createElement("div",{className:"col-md-4"},r.a.createElement("label",{className:"no-margin"},"Valid From"),r.a.createElement("font",{className:"text-danger"},"   *  "),r.a.createElement(Ht.a,{closeOnSelect:!0,onChange:function(t){e.handleSelfDateChange("valid_from",t)},dateFormat:"DD MMM YYYY",timeFormat:!1,required:"required"})),r.a.createElement("div",{className:"col-md-4"},r.a.createElement("label",{className:"no-margin"},"Valid Upto"),r.a.createElement(Ht.a,{closeOnSelect:!0,onChange:function(t){e.handleSelfDateChange("valid_upto",t)},dateFormat:"DD MMM YYYY",timeFormat:!1,required:"required"})),r.a.createElement("div",{className:"col-md-2"})),r.a.createElement("br",null),null!=e.state.rowdatas&&r.a.createElement("div",null,r.a.createElement("div",{className:"d-flex justify-content-between align-items-center",style:{padding:5}},r.a.createElement("p",{className:"no-margin text-white"},r.a.createElement("b",null,"Total Entries : ",e.state.copy.length)),r.a.createElement("div",{style:{position:"relative"}},r.a.createElement("i",{class:"fa-solid fa-magnifying-glass search_pos"}),r.a.createElement("input",{placeholder:"Search here",className:"search_posInput",onChange:function(t){return e.changeHandler(t.target.value)}}))),r.a.createElement(za,{showPag:!0,minRow:0,row_data:void 0!==e.state.copy?e.state.copy:[],column_data:e.state.columndatas,resizable:!1,defaultSorted:[{id:"product_name",desc:!1}],exportCSV:!0,csvFile:"Product List",csvData:e.state.copy})))},e}return Object(o.a)(a,[{key:"onLoad",value:function(){var e=this,t=!1,a={cust_id:this.cust_id};(function(e){return P("/api/admin/agreement/aggrs",e)})(this.req(a)).then(function(a){if(a)if("success"===a.status)if(a.data.prompt_inactivate||"list"==e.props.mode){t=a.data.prompt_inactivate;e.setState(function(t){return t.columndatas=e.agreementcolumndatas()}),e.setState({agreement_tr:null,agreements:a.data.agreements,rowdatas:a.data.agreements,copy:a.data.agreements,list:!0,create:!1,prompt_inactivate:t})}else e.setState({list:!1,create:!0}),e.create_agreement={},e.get_product_list();else alert(a.message+"\n"+JSON.stringify(a.data))})}},{key:"agreementcolumndatas",value:function(){var e=this;return[{Header:"Agreement Doc ID",id:"aggr_doc_id",accessor:function(e){return e.aggr_doc_id}},{Header:"Agreement Type",id:"aggr_type",accessor:function(e){return he(e.aggr_type)}},{Header:"Valid From",id:"valid_from",accessor:function(e){return ge(e.valid_from)}},{Header:"Valid Upto",id:"valid_upto",accessor:function(e){return ge(e.valid_upto)}},{Header:"Status",id:"status",accessor:function(e){return Ze(e.status)}},{Header:"Action",id:"id",accessor:function(t){return"inactive"!=t.status?r.a.createElement("input",{type:"button",id:t.id,value:"Inactivate",onClick:e.inactivateAggr,className:"btn btn-primary"}):r.a.createElement("label",null,"NA")}},{Header:"View",id:"aggr_file_rel_path",accessor:function(e){return e.aggr_file_rel_path?r.a.createElement(ee.a,{to:e.aggr_file_rel_path,target:"_blank"},"View PDF"):r.a.createElement("label",null,"NA")}}]}},{key:"get_product_list",value:function(){var e=this,t=this.cust_id;Rl(this.req({req_parameter:t},!0)).then(function(t){if(e.resp(t),t){var a=t.data;a.hasOwnProperty("borrower")?e.productList(a):a.hasOwnProperty("borrowers")}})}},{key:"componentWillMount",value:function(){void 0===Object({NODE_ENV:"production",PUBLIC_URL:"",REACT_APP_ADMIN_API_ROOT:"/api/admin",REACT_APP_APP_API_ROOT:"/api/app",REACT_APP_CORE_API_ROOT:"/api/core",REACT_APP_URL:"http://app.flowglobal.net"}).REACT_APP_USE_ROOT_ONLY_DEV?this.root="":this.root="http://localhost:8000",this.cust_id=this.props.match.params.cust_id,this.product_ids=[],this[this.props.id]={},this.onLoad()}},{key:"productcolumndatas",value:function(){var e=this;return[{Header:"Select",id:"id",accessor:function(t){return r.a.createElement("input",{id:t.id,type:"checkbox",onChange:e.handleProductCheckbox,defaultChecked:!0})}},{Header:"Product Name",id:"product_name",accessor:function(e){return e.product_name}},{Header:"Product Type",id:"product_type",accessor:function(e){return he(e.product_type)}},{Header:function(){return r.a.createElement("div",{className:"text-center"},"FA Amount")},id:"max_loan_amount",accessor:function(t){return Re(ft(t.max_loan_amount,e.currency_code))}},{Header:"Duration",id:"duration",accessor:function(e){return e.duration+"days"}},{Header:"Flow Fee",id:"ids",accessor:function(t){return Re(gt(t,e.currency_code))}},{Header:"Repayment",id:"rep_amt",accessor:function(t){return Re(Et(t,e.currency_code))}}]}},{key:"productList",value:function(e){var t=this;this.setState(function(t){return t.copy=e.loan_products}),this.setState(function(t){return t.rowdatas=e.loan_products}),this.setState(function(e){return e.columndatas=t.productcolumndatas()}),e.loan_products.map(function(e,a){return t.product_ids.push(e.id)}),this.setState({list:!1,create:!0,upload:!1})}},{key:"render",value:function(){return!0===this.state.toUpload?r.a.createElement(Y.a,{to:"/agreement/upload/".concat(this.cust_id,"/").concat(this.aggr_doc_id)}):r.a.createElement("div",{className:"container max-width containerTopmargin no-padding"},r.a.createElement("div",{className:"row no-margin"},r.a.createElement("h3",{className:"no-margin headerTitle headerPadvert"},this.state.create&&"Select Products to create new Agreement"),r.a.createElement("h3",{className:"no-margin headerTitle headerPadvert"},this.state.list&&"Existing Agreements : "+this.cust_id)),this.state.prompt_inactivate&&"list"!=this.props.mode&&!this.state.create&&r.a.createElement("div",{className:"row"},r.a.createElement("b",null,"Below Agreements already attached to the Customer. You have to inactivate if they are no longer valid, to create new Agreement.")),this.state.create&&this.createAgreement(),this.state.list&&this.listAgreements(),r.a.createElement("div",{className:"row no-margin"},r.a.createElement("div",{className:"col-md-12 no-padding"},this.state.create&&r.a.createElement(lt.a,{disabled:this.state.calling_api,variant:"primary",onClick:this.handleGenerateAggr},"Generate Agreement"))))}}]),a}(ut);function Tl(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(u.a)(e);if(t){var r=Object(u.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(m.a)(this,a)}}var Hl=function(e){Object(d.a)(a,e);var t=Tl(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={comp_name:"transaction"},e}return Object(o.a)(a,[{key:"componentWillMount",value:function(){var e=this,t={master_data:{status:"enabled",data_key:"account_transaction_type"}};Ge(this.req(t)).then(function(t){t&&("success"===t.status?e.getSelectOptionsFromResult(t.data,"account_txn_type",["data_code","data_value"]):alert(t.message+"\n"+JSON.stringify(t.data)))})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"row no-margin account_left date-range"},r.a.createElement("div",{className:"col-md-4"},r.a.createElement("span",null,"Start Date"),r.a.createElement(Ht.a,{closeOnSelect:!0,onChange:function(t){e.handleDateChange("start_date",t)},dateFormat:"DD MMM YYYY",timeFormat:!1,required:"required"})),r.a.createElement("div",{className:"col-md-4"},r.a.createElement("span",null,"End Date"),r.a.createElement(Ht.a,{closeOnSelect:!0,onChange:function(t){e.handleDateChange("end_date",t)},dateFormat:"DD MMM YYYY",timeFormat:!1,required:"required"})),r.a.createElement("div",{className:"col-md-4"},r.a.createElement("span",null,"Transaction Type"),r.a.createElement("select",{id:"acc_txn_type",onChange:this.handleChange,className:"form-control"},this.state.account_txn_type_dd)))}}]),a}(ut);function ql(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(u.a)(e);if(t){var r=Object(u.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(m.a)(this,a)}}var zl=function(e){Object(d.a)(a,e);var t=ql(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={accountTxnList:null,transaction:{},account_result:"hide_div",columns:[],row_data:[]},e.handleTransactionSearch=function(t){la()("#transaction").DataTable().destroy();var a=e.state.transaction;a.country_code=e.country_code,a.acc_id=e.acc_id,Ba(e.req({account_txn:a})).then(function(t){t&&("success"===t.status?(e.setState(function(t){return t.columns=e.columnData()}),e.setState(function(e){return e.row_data=t.data}),e.setState({account_result:"show_div"})):alert(t.message+"\n"+JSON.stringify(t.data)))})},e}return Object(o.a)(a,[{key:"componentWillMount",value:function(){this.acc_id=this.props.match.params.acc_id}},{key:"columnData",value:function(){var e=this;return[{Header:"SI No.",id:"row",Cell:function(e){return r.a.createElement("div",null,e.index+1)}},{Header:"Transaction Type",id:"acc_txn_type",accessor:function(e){return Ze(e.acc_txn_type)}},{Header:"Transaction Mode",id:"txn_mode",accessor:function(e){return Ze(e.txn_mode)}},{Header:"Ref Account ID",id:"loan_doc_id",accessor:function(e){return e.ref_acc_txt}},{Header:"Credit",id:"credit",accessor:function(t){return Re(xe(t.credit,e.currency_code))}},{Header:"Debit",id:"debit",accessor:function(t){return Re(xe(t.debit,e.currency_code))}},{Header:"Balance",id:"balance",accessor:function(t){return Re(xe(t.balance,e.currency_code))}},{Header:"Transaction ID",id:"txn_id",accessor:function(e){return e.txn_id}},{Header:"Txn Executed By",id:"txn_exec_by",accessor:function(e){return e.txn_exec_by}},{Header:"Transaction Date",id:"txn_date",accessor:function(e){return ve(e.txn_date)}},{Header:"Remarks",id:"remarks",accessor:function(e){return e.remarks}}]}},{key:"render",value:function(){return r.a.createElement("div",{id:"",className:"container containerTopmargin max-width no-padding"},r.a.createElement("div",{className:""},r.a.createElement("div",{className:"row align-items-center"},r.a.createElement("div",{className:"col-md-10 no-padding"},r.a.createElement(Hl,{id:"transaction",onComponentChange:this.handleComponentChange})),r.a.createElement("div",{className:"col-md-2 no-padding"},r.a.createElement(lt.a,{className:"btn btn-primary no-margin",onClick:this.handleTransactionSearch},"Search")))),r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement("div",{className:"row",id:"float_style"}),r.a.createElement("div",{className:this.state.account_result},r.a.createElement("div",{id:"datatable account_txn"},r.a.createElement("h4",null,"Account Transactions"),r.a.createElement(za,{showPag:!0,minRow:0,row_data:void 0!==this.state.row_data?this.state.row_data:[],column_data:this.state.columns,resizable:!1,defaultSorted:[{id:"acc_txn_type",desc:!0}],defaultPageSize:10,sortable:!0,exportCSV:!0,csvFile:"Account TXN Lists",csvData:void 0!==this.state.row_data?this.state.row_data:[]})))))}}]),a}(dt);function Il(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(u.a)(e);if(t){var r=Object(u.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(m.a)(this,a)}}var Wl=function(e){Object(d.a)(a,e);var t=Il(a);function a(){var e;return Object(s.a)(this,a),(e=t.call(this)).state={last_updated:null,updated_since:0,timer:0,buttonName:"Pause Refresh",btn_variant:"danger",timerID:"",modalBox:!0,modal:null,end_time:""},e.handleClose=function(t){e.setState({modalBox:!1,selected_payment:null})},e.handleSubmit=function(t){if(0!=window.confirm("Are you sure capture the payment?")){var a={loan_doc_id:e.state.selected_payment.loan_doc_id,acc_stmt_txn_id:e.state.selected_payment.acc_stmt_txn_id,amount:e.state.selected_payment.amount};Sn(e.req(a)).then(function(t){if(!t)return null;"success"===t.status?(alert("Payment captured successfully"),e.handleClose()):alert(t.message)})}},e.capture_repayment=function(t,a){var n={acc_stmt_txn_id:t.target.id,loan_doc_id:a};kn(e.req(n)).then(function(t){if(!t)return null;"success"===t.status?e.setState({modalBox:!0,selected_payment:t.data}):alert(t.message)})},e.pauseRefresh=function(){e.timerID?(clearInterval(e.timerID),e.timerID=null,e.setState({buttonName:"Start Refresh",btn_variant:"success"})):(e.timerID=setInterval(function(){return e.tick()},1e3),e.setState({buttonName:"Pause Refresh",btn_variant:"danger"}))},e.refreshPaymentsList=function(){clearInterval(e.timerID);var t={today:!0};t.account_id=e.props.match.params.acc_id,ia(e.req({statement_search:t})).then(function(t){if(la()("#statement_search").DataTable().destroy(),!t)return null;if("success"===t.status){var a=t.data.acc_txt,n=new Date(t.server_time),l=new Date(t.data.float_acc_stmt_end_time),c=Math.round(n.getTime()-l.getTime())/6e4;e.setState({time_diff:Math.round(c)}),e.setState({end_time:t.data.float_acc_stmt_end_time});var s=t.data.account_txns.map(function(t,a){return r.a.createElement("tr",{key:a},r.a.createElement("td",null,++a),r.a.createElement("td",null," ",Ze(t.stmt_txn_type),"\xa0\xa0",e.chk_acc_type(t.cr_amt,t.dr_amt)),r.a.createElement("td",null," ",Re(xe(t.cr_amt,e.currency_code))),r.a.createElement("td",null," ",Re(xe(t.dr_amt,e.currency_code))),r.a.createElement("td",null," ",Re(xe(t.balance,e.currency_code))),r.a.createElement("td",null," ",t.stmt_txn_id),r.a.createElement("td",null," ",t.descr),r.a.createElement("td",null," ",ve(t.stmt_txn_date,!0)),r.a.createElement("td",null,e.chk_fa_id(t)),r.a.createElement("td",null,r.a.createElement(ar,{show_btn:!1,data:t,onSync:e.refreshPaymentsList})),r.a.createElement("td",null,r.a.createElement(ar,{show_btn:!0,data:t,onSync:e.refreshPaymentsList})))});e.timerID=setInterval(function(){return e.tick()},1e3);var o=new Date;o.setMinutes(o.getMinutes()-2),e.setState({last_updated:o.toLocaleTimeString("en-US",{hour:"numeric",minute:"numeric",second:"numeric",hour24:!0}).toString(),timer:e.REFRESH_IN,lenderTxnStmts:s,account_result:"show_div",account_num:a}),la()("#statement_search").removeAttr("width").dataTable({pageLength:20,order:[],columns:[{width:"10%"},{width:"10%"},{width:"10%"},{width:"15%"},{width:"15%"},{width:"10%"},{width:"10%"},{width:"10%"},{width:"10%"},{width:"10%"},{width:"10%"}],dom:"Bfrtip",buttons:["csv","excel","print"]})}else alert(t.message+"\n"+JSON.stringify(t.data))})},e.REFRESH_IN=120,e}return Object(o.a)(a,[{key:"componentWillUnmount",value:function(){clearInterval(this.timerID)}},{key:"tick",value:function(){0!=this.state.timer?this.setState({timer:this.state.timer-1,updated_since:this.REFRESH_IN-this.state.timer}):this.refreshPaymentsList()}},{key:"loan_doc_id",value:function(e){var t=this,a=e.loan_doc_id,n=e.id,l=e.stmt_txn_type;if(a&&"credit"==l)return r.a.createElement(lt.a,{variant:"danger",id:n,onClick:function(e){return t.capture_repayment(e,a)}},"Capture Payment")}},{key:"componentWillMount",value:function(){this.refreshPaymentsList(),this.gettime()}},{key:"gettime",value:function(){}},{key:"chk_acc_type",value:function(e,t){return 0===e&&0===t?null:0===e?r.a.createElement(sr.b,{color:"red"}):0===t?r.a.createElement(sr.a,{color:"green"}):null}},{key:"chk_fa_id",value:function(e){var t=e.loan_doc_id,a=e.recon_status;return t?"10_capture_payment_pending"==a?r.a.createElement("span",null,r.a.createElement(ee.a,{style:{color:"grey"},to:"/fa/view/"+t,target:"_blank"},t)):"80_recon_done"==a?r.a.createElement("span",null,r.a.createElement(ee.a,{to:"/fa/view/"+t,style:{color:"#007bff"},target:"_blank"},t)):r.a.createElement(ee.a,{to:"/fa/view/"+t,style:{color:"grey"},target:"_blank"},t):"NA"}},{key:"render",value:function(){return r.a.createElement("div",{id:""},r.a.createElement("br",null),console.log("this.state.end_time",this.state.end_time),r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"col-md-6"},r.a.createElement("h3",{className:"lender_accounts"},"Recent Txns of ",this.state.account_num)),r.a.createElement("div",{className:"col-md-3"}),r.a.createElement("div",{className:"col-md-3"})),r.a.createElement("div",{className:"form-row mt-3"},this.state.end_time?r.a.createElement("div",{className:"d-flex align-items-center"},r.a.createElement("h5",null,"Last updated : ",this.state.end_time," "),this.state.time_diff>1?r.a.createElement("h5",{style:{paddingLeft:"20px"}},"( ",r.a.createElement("span",{style:{color:this.state.time_diff>=3?"red":"white"}}," ",this.state.time_diff,"  mins ago ")," )"):r.a.createElement("h5",null,"( ",this.state.time_diff," minute ago )")):r.a.createElement("h5",null,"Last updated :  ")),r.a.createElement("br",null)),r.a.createElement("div",{className:this.state.account_result},r.a.createElement("div",{id:"datatable",className:"table-responsive"},r.a.createElement("table",{id:"statement_search",className:"acc-stmt-table list"},r.a.createElement("thead",{className:"text-info"},r.a.createElement("tr",null,r.a.createElement("th",null,"S.No"),r.a.createElement("th",null,"Transaction Type"),r.a.createElement("th",null,"Credit"),r.a.createElement("th",null,"Debit"),r.a.createElement("th",null,"Balance"),r.a.createElement("th",null,"Transaction ID"),r.a.createElement("th",null,"Description"),r.a.createElement("th",null,"Transaction Date"),r.a.createElement("th",null,"Matching FA ID"),r.a.createElement("th",null,"Recon Status"),r.a.createElement("th",null,"Action"))),r.a.createElement("tbody",null,this.state.lenderTxnStmts)))))}}]),a}(dt),Yl=a(51);function Vl(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(u.a)(e);if(t){var r=Object(u.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(m.a)(this,a)}}var Ul=function(e){Object(d.a)(a,e);var t=Vl(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(e=t.call.apply(t,[this].concat(l))).state={server_time:{},checkout_req:{},toSuccess:null,timer_sec:0,timer:"",timer_min:0,min_diff:0,sec_diff:0,select_value:[],checkin_path:"",alert_msg:!1,modal2_show:!1},e.refresh_timer=function(){setInterval(function(){return e.tick()},1e3)},e.handleCheckout=function(t){e.server_time();var a=e.state.checkout_req;a.remarks&&a.visit_purpose?(a.id=e.props.match.params.id,a.cust_id=e.state.cust_id,un(e.req({checkout_req:a})).then(function(t){if(e.resp(t),t)if("success"===t.status){var a=t.data,n=e.state.min_diff,r=e.state.sec_diff,l=e.state.modal2_show;if("to_success"==a.action){alert(t.data.message);var c=e.state.checkin_path,s=e.state.toSuccess;if("log_visit"==c)s=!1;else s=!0}"show_error"==a.action&&(n=a.min_diff,r=a.sec_diff,l=!0),e.setState({toSuccess:s,min_diff:n,sec_diff:r,modal2_show:l})}else alert(t.message+"\n"+JSON.stringify(t.data))})):e.setState({modal_show:!0})},e.handleCheckoutChange=function(t){var a=e.state.checkout_req;a[t.target.id]=t.target.value,e.setState({checkout_req:a})},e.handlePurposeChange=function(t){var a=t;if((t=t.map(function(e){return e.value})).includes("overdue_visit")&&1!==e.state.is_og_loan_overdue)alert("Customer do not have an overdue FA");else{var n=e.state.checkout_req;n.visit_purpose=t}e.setState({checkout_req:n,select_value:a})},e.handleWarning=function(){e.setState({modal2_show:!1})},e.checkoutDelayAlert=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(rt.a,{show:e.state.modal2_show,variant:"danger"},r.a.createElement(rt.a.Header,null,r.a.createElement(rt.a.Title,null,"Warning")),r.a.createElement(rt.a.Body,null,r.a.createElement("h4",null,"Please ensure all the visit activities are performed before you checkout.",r.a.createElement("br",null),"You have checked-in just ",e.state.min_diff," minutes and ",e.state.sec_diff," seconds ago")),r.a.createElement(rt.a.Footer,null,r.a.createElement(lt.a,{onClick:e.handleWarning,variant:"danger"},"Ok"))))},e}return Object(o.a)(a,[{key:"componentWillMount",value:function(){var e=this;alert("Keep this browser window open and continue your other visit activites.\nOnce all the activities are completed comeback to this browser window and checkout this visit"),this.server_time(),0==this.state.timer_sec?this.refresh_timer():this.setState({timer_sec:0,timer_min:0});var t=new URLSearchParams(window.location.search).get("type");this.setState({checkin_path:t});var a,n=this.props.match.params.id;this.cust_id=this.props.match.params.cust_id,wa(this.req({cust_id:this.cust_id,incl_addr:!0},!0)).then(function(t){e.resp(t),t&&("success"===t.status?t.data&&e.setState(Object(X.a)({},t.data,{cust_id:e.cust_id})):alert(t.message+"\n"+JSON.stringify(t.data)))}),(a=this.req({id:n}),P("/api/admin/field_visits/details",a)).then(function(t){if(t&&"success"===t.status){var a=t.data.visit_start_time,n=t.data.sec_diff,r=t.data.min_diff;e.setState({visit_start_time:a,timer_sec:n,timer_min:r})}})}},{key:"tick",value:function(){0==this.state.timer_sec||0!=this.state.timer_sec?(this.setState({timer_sec:this.state.timer_sec+1}),this.state.timer_sec>=60&&this.setState({timer_min:this.state.timer_min+1,timer_sec:0})):this.refresh_timer()}},{key:"validate_search",value:function(e){return!(!e.remarks||!e.visit_purpose)||(alert("Please enter required fields"),!1)}},{key:"render",value:function(){var e=this;return!0===this.state.toSuccess?r.a.createElement(Y.a,{to:"/borrower/indiv/view/".concat(this.state.cust_id)}):!1===this.state.toSuccess?r.a.createElement(Y.a,{to:"/"}):r.a.createElement("div",{className:"container"},r.a.createElement("br",null),this.checkoutDelayAlert(),this.vaildationAlert(this.state.modal_show),r.a.createElement("h4",null,"Customer Visit for ",r.a.createElement("b",null,this.state.cust_name," | ",this.state.biz_name)," ",r.a.createElement("span",{className:"float-right"},"Timer : ",this.state.timer_min,"m ",this.state.timer_sec,"s ")),r.a.createElement("br",null),r.a.createElement("form",null,r.a.createElement("div",{className:"rule-form-group  form-group row reset-margin"},r.a.createElement("label",{for:"",className:"col-sm-5 mb-3 label__name font-weight-bold reset-padding"},"Flow Cust ID | DP Cust ID"),r.a.createElement("div",{className:"col-sm-6 reset-padding"},r.a.createElement("div",null,r.a.createElement("label",{className:"",id:"cust_id"},this.state.cust_id," | ",this.state.acc_number)),r.a.createElement("div",{className:"control-me"}))),r.a.createElement("div",{className:"rule-form-group  form-group row reset-margin"},r.a.createElement("label",{for:"",className:"col-sm-5 mb-3 label__name font-weight-bold reset-padding"},"Customer Name"),r.a.createElement("div",{className:"col-sm-7 reset-padding"},r.a.createElement("div",null,r.a.createElement("label",{className:"",id:"cust_id"},this.state.cust_name)),r.a.createElement("div",{className:"control-me"}))),r.a.createElement("div",{className:"rule-form-group form-group row reset-margin"},r.a.createElement("label",{for:"",className:"col-sm-5 mb-3 font-weight-bold  label__name reset-padding"},"Address"),r.a.createElement("div",{className:"col-sm-7 reset-padding"},r.a.createElement("div",null,r.a.createElement("label",{className:"",id:"cust_id"},this.state.cust_addr_txt)),r.a.createElement("div",{className:"control-me"}))),r.a.createElement("div",{className:"rule-form-group form-group row reset-margin"},r.a.createElement("label",{for:"",className:"col-sm-5 mb-3 font-weight-bold  label__name reset-padding"},"Location"),r.a.createElement("div",{className:"col-sm-7 reset-padding"},r.a.createElement("div",null,r.a.createElement("label",{className:"",id:"cust_id"},Ze(this.state.location))),r.a.createElement("div",{className:"control-me"}))),r.a.createElement("div",{className:"rule-form-group form-group row reset-margin"},r.a.createElement("label",{for:"",className:"col-sm-5 mb-3 font-weight-bold  label__name reset-padding"},"Check In At"),r.a.createElement("div",{className:"col-sm-7 reset-padding"},r.a.createElement("div",null,r.a.createElement("b",null,r.a.createElement("label",{style:{color:"blue"},className:"",id:"visit_start_time"},this.state.visit_start_time))),r.a.createElement("div",{className:"control-me"}))),r.a.createElement("div",{className:"rule-form-group form-group row mx-0 mb-3  "},r.a.createElement("label",{for:"",className:"col-sm-5 font-weight-bold label__name reset-padding"},"Visit Purpose",r.a.createElement("font",{className:"text-danger"},"   *  ")),r.a.createElement("div",{className:"col-sm-7 reset-padding"},r.a.createElement(Yl.a,{onChange:function(t){e.handlePurposeChange(t)},value:this.state.select_value,options:this.getMultiSelectOptions("visit_purpose"),isMulti:!0}),r.a.createElement("div",{className:"control-me"}))),r.a.createElement("div",{className:"rule-form-group form-group row reset-margin "},r.a.createElement("label",{for:"",className:"col-sm-5 font-weight-bold label__name reset-padding"},"Remarks",r.a.createElement("font",{className:"text-danger"},"   *  ")),r.a.createElement("div",{className:"col-sm-7 reset-padding"},r.a.createElement("div",null,r.a.createElement("textarea",{type:"text",id:"remarks",className:"form-control",onChange:function(t){e.handleCheckoutChange(t)},maxLength:"256"})))),r.a.createElement("br",null),r.a.createElement("button",{type:"button",className:"btn btn-primary float-right mr-1 mb-3",onClick:this.handleCheckout,disabled:this.state.calling_api},"Checkout"),r.a.createElement("br",null),r.a.createElement("br",null)))}}]),a}(ut),Gl=function(e){return P("/api/admin/call_log/start",e)},Jl=function(e){return P("/api/admin/call_log/complete",e)},Kl=function(e){return P("/api/admin/call_log/cancel",e)},Ql=function(e){return P("/api/admin/call_log/search",e)},Zl=function(e){return P("/api/admin/call_log/cs_devices",e)},Xl=function(e){return P("/api/admin/call_log/update_cs_status",e)},$l=a(100);function ec(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(u.a)(e);if(t){var r=Object(u.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(m.a)(this,a)}}var tc=function(e){Object(d.a)(a,e);var t=ec(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={server_time:{},timer_sec:0,timer:"",timer_min:0,loan_data:{},cust_data:{},loan_type:"",call_log:{},call_type:"",call_start_time:null,toSuccess:!1,modal_show:!1},e.refresh_timer=function(){setInterval(function(){return e.tick()},1e3)},e.handlePurposeChange=function(t){var a=e.state.call_log;Array.isArray(t)?a.call_purpose=t.map(function(e){return e.value}):a.call_purpose=[t.value],e.setState({call_log:a})},e.handleRemarks=function(t){var a=e.state.call_log;a[t.target.id]=t.target.value,e.setState({call_log:a})},e.handleCancelCall=function(t){if(0!=window.confirm("Are you sure to Cancel the call?")){var a=e.props.match.params.id;Kl(e.req({log_id:a})).then(function(t){t&&(e.resp(t),"success"===t.status?(alert(t.message),e.setState({toSuccess:!0}),e.props.hasOwnProperty("onCancel")&&e.props.onCancel()):alert(t.message+"\n"+JSON.stringify(t.data)))})}},e.handleCallComplete=function(t){var a=e.state.call_log;if(a.call_purpose&&a.remarks){if(0==window.confirm("Are you sure to complete the call?"))return;if(a.call_purpose.includes("cust_sms_not_rcvd")&&a.call_purpose.includes("cust_sms_not_sent"))return void alert("You can only select one Customer Confirmation purpose");"current_loan"===e.state.loan_type&&(a.loan_doc_id=e.state.loan_data.loan_doc_id),a.id=e.props.match.params.id,a.mob_num=e.state.cust_data.cust_mobile_num;var n=e.state.toSuccess,r=e.state.modal_show;Jl(e.req({call_log:a})).then(function(t){e.resp(t),t&&("success"===t.status?(alert(t.message),n=!0,e.props.hasOwnProperty("onComplete")&&e.props.onComplete()):alert(t.message+"\n"+JSON.stringify(t.data)),e.setState({toSuccess:n}))})}else r=!0;e.setState({modal_show:r})},e}return Object(o.a)(a,[{key:"componentWillMount",value:function(){var e=this;this.server_time(),0==this.state.timer_sec?this.refresh_timer():this.setState({timer_sec:0,timer_min:0});var t=new URLSearchParams(window.location.search).get("type");this.setState({call_type:t}),this.cust_id=this.props.match.params.cust_id;var a,n=this.props.match.params.id;wa(this.req({cust_id:this.cust_id,incl_addr:!0,incl_fa:!0},!0)).then(function(t){if(e.resp(t),t)if("success"===t.status){if(t.data){var a=e.state.cust_data,n=e.state.loan_data,r=e.state.loan_type;t.data.current_loan?(n=t.data.current_loan,a=t.data,r="current_loan"):(a=t.data,r="no_loan"),e.setState({cust_data:a,loan_data:n,loan_type:r,cust_id:e.cust_id})}}else alert(t.message+"\n"+JSON.stringify(t.data))}),(a=this.req({id:n}),P("/api/admin/call_log/details",a)).then(function(t){if(t&&"success"===t.status){var a=t.data.call_start_time,n=t.data.sec_diff,r=t.data.min_diff;e.setState({call_start_time:a,timer_sec:n,timer_min:r})}})}},{key:"tick",value:function(){0==this.state.timer_sec||0!=this.state.timer_sec?(this.setState({timer_sec:this.state.timer_sec+1}),this.state.timer_sec>=60&&this.setState({timer_min:this.state.timer_min+1,timer_sec:0})):this.refresh_timer()}},{key:"render",value:function(){var e=this;if(!0===this.state.toSuccess)return r.a.createElement(Y.a,{to:"/"});var t=this.props.hasOwnProperty("is_conf")?"col-md-12":"col-md-8";return r.a.createElement("div",{className:"container ",style:{maxWidth:"1500px"}},this.vaildationAlert(this.state.modal_show),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("form",null,r.a.createElement(ka.a,null,r.a.createElement(ka.a.Header,{style:{backgroundColor:"#01062c",color:"white"}},r.a.createElement("h4",null,he(this.state.call_type)," Call Log",r.a.createElement("span",{className:"float-right"},"Timer : ",this.state.timer_min,"m ",this.state.timer_sec,"s "))),r.a.createElement(ka.a.Body,null,r.a.createElement("div",{className:"row justify-content-center"},r.a.createElement("div",{className:"".concat(t)},r.a.createElement("fieldset",{className:"border border-dark p-2"},r.a.createElement("legend",{className:"w-auto",style:{fontSize:"15px"}},this.state.cust_data.cust_name),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-6"},r.a.createElement("div",{className:"form-group row reset-margin justify-content-center"},r.a.createElement("label",{className:"col-md-5"},r.a.createElement("b",null,"Bussiness Name")),r.a.createElement("label",{className:"col-md-5 text-right"},this.state.cust_data.biz_name)),r.a.createElement("div",{className:"form-group row reset-margin justify-content-center py-2 "},r.a.createElement("label",{className:"col-md-5"},r.a.createElement("b",null,"Mobile Number")),r.a.createElement("label",{className:"col-md-5 text-right"},this.state.cust_data.cust_mobile_num," ")),r.a.createElement("div",{className:"form-group row reset-margin justify-content-center"},r.a.createElement("label",{className:"col-md-5"},r.a.createElement("b",null,"DOB")),r.a.createElement("label",{className:"col-md-5 text-right"},ge(this.state.cust_data.cust_dob)," "))),r.a.createElement("div",{className:"col-md-6"},r.a.createElement("div",{className:"form-group row reset-margin justify-content-center "},r.a.createElement("label",{className:"col-md-5"},r.a.createElement("b",null,"Location")),r.a.createElement("label",{className:"col-md-5 text-right"},Ze(this.state.cust_data.location)," ")),r.a.createElement("div",{className:"form-group row reset-margin justify-content-center py-2 "},r.a.createElement("label",{className:"col-md-5"},r.a.createElement("b",null,"Flow Cust ID")),r.a.createElement("label",{className:"col-md-5 text-right"},r.a.createElement(ee.a,{to:"/borrower/indiv/view/"+this.state.cust_data.cust_id,target:"_blank"},this.state.cust_data.cust_id," "))),r.a.createElement("div",{className:"form-group row reset-margin justify-content-center "},r.a.createElement("label",{className:"col-md-5"},r.a.createElement("b",null,"Data Prvdr Cust ID")),r.a.createElement("label",{className:"col-md-5 text-right"},this.state.cust_data.acc_number," "))))))),"current_loan"==this.state.loan_type&&r.a.createElement("div",{className:"row justify-content-center pt-4"},r.a.createElement("div",{className:"".concat(t)},r.a.createElement("fieldset",{className:"border border-dark p-2"},r.a.createElement("legend",{className:"w-auto"},r.a.createElement(ee.a,{style:{fontSize:"15px"},to:"/fa/view/"+this.state.loan_data.loan_doc_id,target:"_blank"},this.state.loan_data.loan_doc_id)),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-6"},r.a.createElement("div",{className:"form-group row reset-margin justify-content-center"},r.a.createElement("label",{className:"col-md-5"},r.a.createElement("b",null,"Status")),r.a.createElement("label",{className:"col-md-5 text-right "},Ze(this.state.loan_data.status))),r.a.createElement("div",{className:"form-group row reset-margin justify-content-center py-2"},r.a.createElement("label",{className:"col-md-5"},r.a.createElement("b",null,"Due Date")),r.a.createElement("label",{className:"col-md-5 text-right "},ge(this.state.loan_data.due_date)," ")),r.a.createElement("div",{className:"form-group row reset-margin justify-content-center "},r.a.createElement("label",{className:"col-md-5 "},r.a.createElement("b",null,"Due Amount")),r.a.createElement("label",{className:"col-md-5 text-right"},xe(this.state.loan_data.due_amount,this.currency_code)," "))),r.a.createElement("div",{className:"col-md-6"},r.a.createElement("div",{className:"form-group row reset-margin justify-content-center"},r.a.createElement("label",{className:"col-md-5"},r.a.createElement("b",null,"Paid Amount")),r.a.createElement("label",{className:"col-md-5 text-right"},xe(this.state.loan_data.paid_amount,this.currency_code))),r.a.createElement("div",{className:"form-group row reset-margin justify-content-center py-2"},r.a.createElement("label",{className:"col-md-5",style:{color:"green"}},r.a.createElement("b",null,"Current OS Amount")),r.a.createElement("label",{className:"col-md-5 text-right",style:{color:"green"}},xe(this.state.loan_data.current_os_amount,this.currency_code),r.a.createElement("br",null),r.a.createElement("small",null,"(Penalty not included)")," "))))))),r.a.createElement("div",{className:"row justify-content-center pt-4"},r.a.createElement("div",{className:"".concat(t)},r.a.createElement("fieldset",{className:"border border-dark p-2"},r.a.createElement("legend",{className:"w-auto"}),r.a.createElement("div",{className:"form-group row reset-margin justify-content-center "},r.a.createElement("label",{className:"col-md-3"},r.a.createElement("b",null,"Call Start Time")),r.a.createElement("label",{className:"col-md-5 "},ge(this.state.call_start_time,!0)," ")),r.a.createElement("div",{className:"form-group row reset-margin justify-content-center py-3"},r.a.createElement("div",{className:"col-md-3 mt-2"},r.a.createElement("b",null,"Purpose",r.a.createElement("font",{className:"text-danger"},"   *  "))),this.props.hasOwnProperty("is_conf")?r.a.createElement(Yl.a,{className:"col-md-5",onChange:function(t){e.handlePurposeChange(t)},options:[{value:"cust_sms_not_rcvd",label:Ze("cust_sms_not_rcvd","outgoing_call_purpose"),id:"1"},{value:"cust_sms_not_sent",label:Ze("cust_sms_not_sent","outgoing_call_purpose"),id:"2"}]}):r.a.createElement(Yl.a,{className:"col-md-5",onChange:function(t){e.handlePurposeChange(t)},options:this.getMultiSelectOptions("".concat(this.state.call_type,"_call_purpose")),isMulti:!0})),r.a.createElement("div",{className:"form-group row reset-margin justify-content-center pb-2"},r.a.createElement("label",{className:"col-md-3"},r.a.createElement("b",null,"Remarks",r.a.createElement("font",{className:"text-danger"},"   *  "))),r.a.createElement("div",{className:"col-md-5 "},r.a.createElement("textarea",{type:"text",id:"remarks",className:"form-control",rows:5,onChange:this.handleRemarks,maxLength:"512"})))))),r.a.createElement("div",{className:"form-group row reset-margin justify-content-center py-4"},r.a.createElement(lt.a,{variant:"danger",disabled:this.state.calling_api,className:"mr-3",onClick:this.handleCancelCall},r.a.createElement($l.b,{className:"mr-2"}),"Cancel Call Log"),r.a.createElement(lt.a,{variant:"success",disabled:this.state.calling_api,onClick:this.handleCallComplete},r.a.createElement($l.a,{className:"mr-2"}),"Complete Call Log"))))))}}]),a}(ut);function ac(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(u.a)(e);if(t){var r=Object(u.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(m.a)(this,a)}}var nc=function(e){Object(d.a)(a,e);var t=ac(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={purpose:!0},e}return Object(o.a)(a,[{key:"render",value:function(){var e=this,t=this.props.call_log.call_type;if("incoming"==t)var a="incoming_call_purpose";else if("outgoing"==t)a="outgoing_call_purpose";return r.a.createElement("div",{className:"mb-3"},r.a.createElement("div",{className:"row no-margin"},this.props.call_log.cust_call_history&&E("call_log","self_search")&&r.a.createElement("div",{className:"col-1",style:{paddingBottom:15}},r.a.createElement("div",null,r.a.createElement("label",null,"Call Logger")),r.a.createElement("label",{className:"ml-3"},r.a.createElement("h5",null,"All"))),r.a.createElement("div",{className:"col-3",style:{paddingBottom:15}},r.a.createElement("label",null,"From   "),r.a.createElement("font",{className:"text-danger"},"   *  "),r.a.createElement(Ht.a,{closeOnSelect:!0,defaultValue:this.props.call_log.call_start_time,dateFormat:"DD MMM YYYY",timeFormat:!1,required:"required",onChange:function(t){e.handleDateChange("call_start_time",t)}})),r.a.createElement("div",{className:"col-3",style:{paddingBottom:15}},r.a.createElement("label",null,"To "),r.a.createElement("font",{className:"text-danger"},"   *  "),r.a.createElement(Ht.a,{closeOnSelect:!0,defaultValue:this.props.call_log.call_end_time,dateFormat:"DD MMM YYYY",timeFormat:!1,required:"required",onChange:function(t){e.handleDateChange("call_end_time",t)}})),E("call_log","all_search")&&r.a.createElement("div",{className:"col-3",style:{paddingBottom:15}},r.a.createElement("label",null,"Call Logger"),r.a.createElement(O.a.Control,{as:"select",id:"call_logger",onChange:function(t){e.props.onComponentElementChange(t)}},this.props.priv_users)),r.a.createElement("div",{className:"col-3",style:{paddingBottom:15}},r.a.createElement("label",null,"Call Type"),r.a.createElement(O.a.Control,{as:"select",id:"call_type",onChange:function(t){e.props.onComponentElementChange(t)}},r.a.createElement("option",{value:""}," Choose "),r.a.createElement("option",{value:"all"},"All"),r.a.createElement("option",{value:"incoming"}," Incoming "),r.a.createElement("option",{value:"outgoing",selected:this.props.call_log.call_type_select}," Outgoing "))),this.props.purpose_field&&r.a.createElement("div",{className:"col-3",style:{paddingBottom:15}},r.a.createElement("label",null,"Purpose"),r.a.createElement(O.a.Control,{as:"select",id:"call_purpose",value:this.props.call_log.call_purpose,onChange:function(t){e.props.onComponentElementChange(t)}},this.getSelectOptions(a))),r.a.createElement("div",{className:"col-3 align-items-center d-flex",style:{height:60}},r.a.createElement("label",{for:"individual_logs",className:"no-margin"},r.a.createElement(r.a.Fragment,null,r.a.createElement(O.a.Check,{type:"checkbox",checked:this.props.call_log.individual_logs,id:"individual_logs",className:"float-left no-margin",onChange:function(t){e.props.onComponentElementChange(t)}}),"Individual Call Logs")))),r.a.createElement("div",{className:" row no-margin justify-content-md-center"},r.a.createElement("button",{type:"button",className:"btn btn-primary ",id:"searchbtn",disabled:this.props.search_btn,onClick:this.props.onSearch},"Search")))}}]),a}(ut);function rc(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(u.a)(e);if(t){var r=Object(u.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(m.a)(this,a)}}var lc=function(e){Object(d.a)(a,e);var t=rc(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).handleSearch=function(e){var t=n.state.call_log;t.call_start_time||t.call_end_time?Ql(n.req(t)).then(function(e){if(n.resp(e),e&&"success"===e.status){n.resp(e);var t=n.state.columns;!0===e.data.individual_logs&&(t=[{Header:"Call Logger Name",accessor:"call_logger_name"},{Header:"Cust Name",accessor:"cust_name"},{Header:"Call Type",id:"call_type",accessor:function(e){return he(e.call_type)}},{Header:"Cust ID",accessor:"cust_id",Cell:function(e){return r.a.createElement(ee.a,{to:"/borrower/indiv/view/"+e.value,target:"_blank"},e.value)},width:100},{Header:"Call Start Time",id:"start_time",accessor:function(e){return ve(e.call_start_time,!0)}},{Header:"Call Duration",id:"dur_secs",accessor:function(e){return function(e){console.log(e);var t=Math.trunc(e/60),a=e%60;return r.a.createElement("p",null,t,"M ",a,"S")}(e.dur_secs)}},{Header:"Purpose",id:"purpose",width:250,style:{whiteSpace:"unset"},accessor:function(e){return e.call_purpose.map(function(e){return Ze(e)}).join(", ")}},{Header:"Remarks",accessor:"remarks",width:400,style:{whiteSpace:"unset"}}]),!1===e.data.individual_logs&&(t=[{Header:"Call Logger Name",accessor:"call_logger_name"},{Header:"Log date",id:"log",accessor:function(e){return ve(e.log_date)}},{Header:"Logs",accessor:"logs"}]),n.setState({columns:t,logs:e.data.logs,log_table:!0})}}):alert("Please enter valid search criteria")},n.handleCallChange=function(e){var t=n.state.call_log,a=n.state.purpose_field,r="individual_logs"===e.target.id?e.target.checked:e.target.value;t[e.target.id]=r,"all"==t.call_type||""==t.call_type?a=!1:"incoming"!=t.call_type&&"outgoing"!=t.call_type||(a=!0),n.setState({call_log:t,log_table:!1,logs:[],purpose_field:a})},n.state={call_log:{individual_logs:!1},logs:[],columns:[],log_table:!1,purpose_field:!1},n}return Object(o.a)(a,[{key:"componentWillMount",value:function(){var e=this.state.call_log;if(E("call_log","all_search")){var t="call_log/post",a=v("role_codes");if("customer_success"==a){var n=["customer_success","customer_success_officer"];t=null}else if("rm_support"==a)n=["relationship_manager","rm_support"],t=null;else n=null;this.setOptionsListToStateFromAppApi("common","priv_users",this.req({priv_code:t,status:"enabled",role_codes:n}),["id","name"])}else E("call_log","self_search")&&(e.search_type="self_search");this.props.match.params.cust_id&&(e.call_end_time=ce()(new Date),e.call_start_time=ce()().subtract(1,"months"),e.individual_logs=!0,e.cust_call_history=!0,e.cust_id=this.props.match.params.cust_id),this.setState({call_log:e})}},{key:"componentDidMount",value:function(){if(this.props.match.params.cust_id){var e=this.state.call_log;e.call_start_time=e.call_start_time.format("YYYY-MM-DD"),e.call_end_time=e.call_end_time.format("YYYY-MM-DD"),this.handleSearch()}}},{key:"render",value:function(){return r.a.createElement("div",{className:"container max-width containerTopmargin no-padding"},r.a.createElement("div",{className:"row no-margin"},r.a.createElement("h5",{className:"field_visit headerTitle no-margin headerPadvert"},this.state.call_log.cust_call_history?"Search Call Log  ("+this.state.call_log.cust_id+")":"Search Call Log")),r.a.createElement(nc,{id:"call_log",onComponentChange:this.handleCallChange,onComponentElementChange:this.handleCallChange,onSearch:this.handleSearch,search_btn:this.state.calling_api,call_log:this.state.call_log,purpose_field:this.state.purpose_field,overdueSearch:this.handleOverdueSearch,priv_users:this.state.priv_users_dd}),this.state.log_table&&r.a.createElement("div",null,r.a.createElement(za,{showPag:!0,minRow:0,row_data:void 0!==this.state.logs?this.state.logs:[],column_data:this.state.columns,resizable:!1,exportCSV:!0,csvFile:"Call log",csvData:this.state.logs?this.state.logs:[]})))}}]),a}(dt),cc=function(e){return P("/api/admin/lead/create",e)},sc=function(e){return P("/api/admin/lead/view",e)},oc=function(e){return P("/api/admin/lead/search",e)},ic=function(e){return P("/api/admin/lead/close",e)},dc=function(e){return P("/api/admin/lead/allow_capture",e)},mc=function(e){return P("/api/admin/lead/audited_by",e)},uc=function(e){return P("/api/admin/lead/remarks/view",e)},pc=function(e){return P("/api/admin/lead/remarks/add",e)},_c=function(e){return P("/api/admin/auditor/assign",e)};function hc(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(u.a)(e);if(t){var r=Object(u.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(m.a)(this,a)}}var fc=function(e){Object(d.a)(a,e);var t=hc(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={comp_name:"lead",to_edit:!1,lead:{},save_button_style:"hide_div",disable_div:!1},e.disableAccNumber=function(t){var a=e.state.disable_div;a="terminal_financing"==t.target.value,e.setState({disable_div:a})},e}return Object(o.a)(a,[{key:"componentDidUpdate",value:function(e,t,a){!e.editable&&this.props.editable&&this.handleEdit()}},{key:"componentWillMount",value:function(){Object($.a)(Object(u.a)(a.prototype),"componentWillMount",this).call(this),this.load_flow_rel_mgr(),this.setOptionsListToStateFromAppApi("common","list",this.req({country_code:this.country_code,status:"enabled",biz_account:!0}),["acc_prvdr_code","name"],"acc_prvdrs"),this.getSelectOptionsFromResult(Qe("account_purpose","customer"),"acc_purpose",["data_code","data_value"]),this.props.data.acc_purpose&&this.props.data.acc_purpose.includes("terminal_financing")&&this.setState({disable_div:!0})}},{key:"render",value:function(){var e=this;return!0===this.state.to_edit?r.a.createElement(Y.a,{to:"/lead/edit/".concat(this.state.id)}):r.a.createElement("div",{className:"row justify-content-center"},r.a.createElement("div",{className:"col-md-12 ".concat(this.state.div_style)},r.a.createElement("div",{className:"row justify-content-center py-2 "},r.a.createElement("div",{className:"col-md-4"},r.a.createElement(ha,{id:"acc_purpose",onChange:this.handleChange,acc_purposes:this.state.acc_purpose_dd,initialAct_purpose:"view"===this.props.mode?this.props.data.acc_purpose:null,must:!1}))),r.a.createElement("fieldset",{className:"border border-dark my-5 p-2"},r.a.createElement("legend",{className:"w-auto",style:{font_size:"15px"}},"Biz Info"),r.a.createElement("div",{className:"row  ".concat(this.state.div_style)},r.a.createElement("div",{className:"col-md-3"},r.a.createElement("span",null,"Biz Name (or) Cust Name ",r.a.createElement("font",{className:"text-danger"},"   *  ")),r.a.createElement("input",{type:"text",value:this.props.data.biz_name,id:"biz_name",onChange:this.handleChange,className:"form-control"})),r.a.createElement("div",{className:"col-md-3"},r.a.createElement("span",null,"Account Provider",r.a.createElement("font",{className:"text-danger"},"   *  ")),r.a.createElement("select",{id:"acc_prvdr_code",value:this.props.data.acc_prvdr_code,onChange:this.handleChange,className:"form-control",type:"text"},this.state.acc_prvdrs_dd)),r.a.createElement("div",{className:"col-md-3"},r.a.createElement("span",null,r.a.createElement(r.a.Fragment,null,"Account Number")),r.a.createElement("input",{disabled:this.props.data.acc_purpose&&this.props.data.acc_purpose.includes("terminal_financing"),type:"text",id:"account_num",value:this.props.data.account_num,onChange:this.handleChange,className:"form-control"})),r.a.createElement("div",{className:"col-md-3"},r.a.createElement("span",null,"National ID"),r.a.createElement("input",{type:"text",id:"national_id",value:this.props.data.national_id,onChange:this.handleChange,className:"form-control"})))),r.a.createElement("fieldset",{className:"border border-dark p-2 my-5"},r.a.createElement("legend",{className:"w-auto",style:{font_size:"15px"}},"Contact Info"),r.a.createElement("div",{className:"row  ".concat(this.state.div_style)},r.a.createElement("div",{className:"col-md-3"},r.a.createElement("span",null,"Mobile Number",r.a.createElement("font",{className:"text-danger"},"   *  ")),r.a.createElement("input",{type:"text",id:"mobile_num",value:this.props.data.mobile_num,onChange:this.handleChange,className:"form-control"})),r.a.createElement("div",{className:"col-md-3"},r.a.createElement("span",null,"Territory"),r.a.createElement("select",{id:"territory",value:this.props.data.territory,onChange:this.handleChange,className:"form-control",type:"text"},this.getSelectOptions("territory"))),r.a.createElement("div",{className:"col-md-3"},r.a.createElement("span",null,"Location"),r.a.createElement("select",{id:"location",value:this.props.data.location,onChange:this.handleChange,className:"form-control",type:"text"},this.getSelectOptions("location"))),r.a.createElement("div",{className:"col-md-3"},r.a.createElement("span",null,"Landmark"),r.a.createElement("input",{type:"text",id:"landmark",value:this.props.data.landmark,onChange:this.handleChange,className:"form-control"})))),r.a.createElement("fieldset",{className:"border border-dark my-5 p-2"},r.a.createElement("legend",{className:"w-auto"},"Flow Assignment"),r.a.createElement("div",{className:"row ".concat(this.state.div_style)},r.a.createElement("div",{className:"col-md-3"},r.a.createElement("span",{style:{font_size:"15px"}},r.a.createElement("b",null,"Flow RM")),r.a.createElement("select",{id:"flow_rel_mgr_id",value:this.props.data.flow_rel_mgr_id,onChange:this.handleChange,className:"form-control",type:"text"},this.state.flow_rel_mgr_dd))))),r.a.createElement("div",{className:"col-md-1 mb-5  ".concat(this.state.save_button_style)},r.a.createElement("input",{onClick:function(t){e.handleSave(t,"reload")},type:"button",className:"btn btn-success",value:"Save"})))}}]),a}(ut),vc=a(35),gc=a.n(vc);function yc(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(u.a)(e);if(t){var r=Object(u.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(m.a)(this,a)}}var Ec=function(e){Object(d.a)(a,e);var t=yc(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={comp_name:"lead",lead_list:{},reason:"",to_edit:!1,lead:{},lead_data:{},edit_mode:!1,capture_modal:!1,person_type:null},e.handleAuditKyc=function(t){var a=e.state.lead.audited_by,n=e.state.lead.auditor_name;null==a&&"operations_auditor"==v("role_codes")?window.confirm("You are going to initiate the audit KYC process for this lead. Once you start, no other auditor can act on this lead.Are you sure?")&&mc(e.req({id:e.id})).then(function(t){e.resp(t),t&&"success"===t.status&&(window.location.href="/lead/audit_kyc/"+e.id)}):null!=a&&v("user_id")!=a?(window.alert("".concat(n," has already initiated audit process for this KYC record. You can not take action. However you can view the KYC record")),window.location.href="/lead/audit_kyc/"+e.id):null!=a&&v("user_id")==a&&(window.location.href="/lead/audit_kyc/"+e.id)},e.handleLead=function(t){var a=e.state.lead;e.validate_fields(a)&&cc(e.req({lead:a})).then(function(t){e.resp(t),t&&"success"===t.status&&(alert(t.message),e.setState({to_edit:!0,id:t.data}))})},e.handleCaptureModal=function(t){e.setState({capture_modal:!0})},e.handleAllowManualCapure=function(t){var a=e.state.lead.id,n=e.state.person_type;window.confirm("Are you sure to allow manual capture ?")&&dc(e.req({lead_id:a,type:n})).then(function(t){e.resp(t),t&&"success"===t.status&&(alert(t.message),window.location.reload())})},e.handleLeadProfile=function(t){e.setState({modalBox1:"true"})},e.handleModalClose=function(){e.setState({modalBox1:!1})},e.handleCaptureModalClose=function(){e.setState({capture_modal:!1})},e.handleModalOpen=function(t){e.setState({modalBox1:!0})},e.handleModalCloseLead=function(t){var a=e.state.lead.id,n=e.state.reason,r=e.state.lead.profile_status;ic(e.req({lead_id:a,reason:n,profile_status:r})).then(function(t){e.resp(t),t&&"success"===t.status&&(alert(t.message),window.location.reload())})},e.handleChange=function(t){console.log(t.target.value),e.setState({reason:t.target.value})},e.handleEditprofile=function(t){e.setState({edit_mode:!0})},e.handlePersonType=function(t){e.setState({person_type:t.target.value})},e}return Object(o.a)(a,[{key:"componentWillMount",value:function(){var e=this;"view"==this.props.mode?(this.lead_ref=r.a.createRef(),this.id=this.props.match.params.id,sc(this.req({id:this.id})).then(function(t){e.resp(t),t&&"success"===t.status&&(e.setState({lead:t.data,div_style:"disable_div",submit_btn_style:"hide_div"}),console.log(t.data,"response . data on view mode"))})):this.props.mode}},{key:"validate_fields",value:function(e){return e.acc_purpose&&"terminal_financing"==e.acc_purpose.includes&&!e.mobile_num?(alert("Please enter mobile number"),!1):e.account_num&&!e.acc_prvdr_code?(alert("Please select account provider"),!1):!!(e.acc_prvdr_code&&e.acc_purpose&&e.biz_name)||(alert("Please enter required fields"),!1)}},{key:"render",value:function(){var e=null,t=this.state.lead.profile_status;return this.state.lead.status&&(e=this.state.lead.status.split(/_/)[0]),!0===this.state.to_edit?r.a.createElement(Y.a,{to:"/lead/edit/".concat(this.state.id)}):r.a.createElement("div",null,"closed"==t&&r.a.createElement("div",{class:"closedStamp"},r.a.createElement("div",{className:"stamp is-nope"},"Closed")),r.a.createElement("div",{className:"container ",style:{maxWidth:"1500px"}},r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("form",{autocomplete:"off"},r.a.createElement(ka.a,null,r.a.createElement(ka.a.Header,{style:{backgroundColor:"#01062c",color:"white"}},r.a.createElement("div",{className:"d-flex justify-content-between"},r.a.createElement("h4",null,this.props.title),this.state.lead.status&&r.a.createElement("h4",null,"Status: ",Ze(this.state.lead.status)),r.a.createElement("div",null,"view"==this.props.mode&&"open"==t&&E("lead","allow_manual_capture")&&r.a.createElement(lt.a,{disabled:this.state.calling_api,className:"mr-3  text-white",variant:"primary",onClick:this.handleCaptureModal},"Allow Manual ID Capture"),"view"==this.props.mode&&"open"==t&&e<50&&r.a.createElement(lt.a,{className:"mr-3  text-white",variant:"primary",onClick:this.handleEditprofile},"EDIT"),e&&e>=40&&E("lead","audit_kyc")&&r.a.createElement(lt.a,{onClick:this.handleAuditKyc,className:"mr-3"},50==e?"Audit KYC":"View KYC"),"view"==this.props.mode&&"open"==t&&e<=50&&r.a.createElement(lt.a,{className:"mr-2",variant:"danger",onClick:this.handleLeadProfile},"Close Profile")))),r.a.createElement(ka.a.Body,{className:"p-5"},("create"==this.props.mode||!gc.a.isEmpty(this.state.lead))&&r.a.createElement(fc,{mode:this.props.mode,id:"lead",data:this.state.lead,editable:this.state.edit_mode,onComponentChange:this.handleComponentChange}),r.a.createElement("div",{className:"form-group row reset-margin justify-content-center py-4"},"create"==this.props.mode&&r.a.createElement(lt.a,{disabled:this.state.calling_api,className:"col-md-2 mr-3 btn btn-primary".concat(this.state.submit_btn_style),onClick:this.handleLead},"Submit"))))),r.a.createElement(rt.a,{show:this.state.modalBox1,onHide:this.handleModalClose,size:"l"},r.a.createElement(rt.a.Header,{closeButton:!0,show:this.state.modalBox1,onHide:this.handleModalClose},r.a.createElement(rt.a.Title,null,"Close Lead Profile ")),r.a.createElement(rt.a.Body,null,r.a.createElement("div",{className:"form-group row mx-0 mb-2 p-3 "},r.a.createElement("div",{for:"",className:"col-sm-5 font-weight-bold text-white reset-padding"}," Reason",r.a.createElement("font",{className:"text-danger"},"   *  ")),r.a.createElement("div",{className:"col-sm-7 reset-padding"},r.a.createElement("div",null,r.a.createElement(O.a.Control,{as:"select",id:"type",onChange:this.handleChange},this.getSelectOptions("close_reason"))),r.a.createElement("div",{className:"control-me"})))),r.a.createElement(rt.a.Footer,null,r.a.createElement(lt.a,{variant:"danger",onClick:this.handleModalCloseLead},"Close Lead"))),r.a.createElement(rt.a,{show:this.state.capture_modal,onHide:this.handleCaptureModalClose,size:"l"},r.a.createElement(rt.a.Header,{closeButton:!0,show:this.state.modalBox1,onHide:this.handleModalClose},r.a.createElement(rt.a.Title,null,"Manual ID Capture ")),r.a.createElement(rt.a.Body,null,r.a.createElement("div",{className:"form-group row mx-0 mb-2 p-3 "},r.a.createElement("div",{for:"",className:"col-sm-5 font-weight-bold text-white reset-padding"},"Type",r.a.createElement("font",{className:"text-danger"},"   *  ")),r.a.createElement("div",{className:"col-sm-7 reset-padding"},r.a.createElement("div",null,r.a.createElement("label",null,r.a.createElement("input",{id:"person",type:"radio",name:"person",value:"biz_owner",onChange:this.handlePersonType}),"  ID of Biz Owner \xa0\xa0\xa0"),r.a.createElement("label",null,r.a.createElement("input",{id:"person",type:"radio",name:"person",value:"third_party_owner",onChange:this.handlePersonType}),"  ID of Third Party A/C Owner \xa0\xa0\xa0")),r.a.createElement("div",{className:"control-me"})))),r.a.createElement(rt.a.Footer,null,r.a.createElement(lt.a,{variant:"primary",onClick:this.handleAllowManualCapure},"Submit")))))}}]),a}(dt),bc=a(111);function wc(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(u.a)(e);if(t){var r=Object(u.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(m.a)(this,a)}}var Nc=function(e){Object(d.a)(a,e);var t=wc(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={},e}return Object(o.a)(a,[{key:"componentWillMount",value:function(){this.load_flow_rel_mgr(),this.setOptionsListToStateFromAppApi("common","list",this.req({country_code:this.country_code,status:"enabled",biz_account:!0}),["acc_prvdr_code","name"],"acc_prvdrs"),this.setOptionsListToStateFromAppApi("common","priv_users",this.req({priv_code:"",status:"enabled",role_codes:["operations_auditor"]}),["id","name"])}},{key:"render",value:function(){var e=this;return r.a.createElement(O.a,{className:"mb-3"},r.a.createElement(O.a.Row,{className:"my-4",style:{display:"flex",alignItems:"center"}},r.a.createElement("div",{className:"col-3"},r.a.createElement("span",null,"Created From"),r.a.createElement(Ht.a,{onChange:function(t){e.handleDateChange("created_from",t)},closeOnSelect:!0,dateFormat:"DD MMM YYYY",timeFormat:!1})),r.a.createElement("div",{className:"col-3"},r.a.createElement("span",null,"Created To"),r.a.createElement(Ht.a,{onChange:function(t){e.handleDateChange("created_to",t)},closeOnSelect:!0,dateFormat:"DD MMM YYYY",timeFormat:!1})),r.a.createElement("div",{className:"col-3"},r.a.createElement("span",null,"Flow RM"),r.a.createElement(O.a.Control,{as:"select",id:"flow_rel_mgr_id",onChange:this.handleChange},this.state.flow_rel_mgr_dd)),r.a.createElement("div",{className:"col-3"},r.a.createElement("span",null,"Territory"),r.a.createElement(O.a.Control,{as:"select",id:"territory",onChange:this.handleChange},this.getSelectOptions("territory")))),r.a.createElement(O.a.Row,{className:"my-4",style:{display:"flex",alignItems:"center"}},r.a.createElement("div",{className:"col-3"},r.a.createElement("span",null,"Account Provider"),r.a.createElement(O.a.Control,{as:"select",id:"acc_prvdr_code",onChange:this.handleChange},this.state.acc_prvdrs_dd)),r.a.createElement("div",{className:"col-3"},r.a.createElement("span",null,"Account Number"),r.a.createElement(O.a.Control,{id:"account_num",onChange:this.handleChange})),r.a.createElement("div",{className:"col-3"},r.a.createElement("span",null,"Location"),r.a.createElement(O.a.Control,{as:"select",id:"location",onChange:this.handleChange},this.getSelectOptions("location"))),r.a.createElement("div",{className:"col-3"},r.a.createElement("span",null,"Biz Name (or) Cust Name"),r.a.createElement(O.a.Control,{id:"biz_name",onChange:this.handleChange}))),r.a.createElement(O.a.Row,{className:"my-4",style:{display:"flex",alignItems:"center"}},r.a.createElement("div",{className:"col-3"},r.a.createElement("span",null,"Mobile Number"),r.a.createElement(O.a.Control,{id:"mobile_num",onChange:this.handleChange})),r.a.createElement("div",{className:"col-3"},r.a.createElement("span",null,"Cust ID"),r.a.createElement(O.a.Control,{id:"cust_id",onChange:this.handleChange})),r.a.createElement("div",{className:"col-3"},r.a.createElement("span",null,"Account Purpose"),r.a.createElement(O.a.Control,{as:"select",id:"acc_purpose",onChange:this.handleChange},this.getSelectOptions("account_purpose",!0,"customer"))),r.a.createElement("div",{className:"col-3"},r.a.createElement("span",null,"Lead Status"),r.a.createElement(O.a.Control,{as:"select",id:"status",onChange:this.handleChange},this.getSelectOptions("lead_status")))),r.a.createElement(O.a.Row,{className:"my-4",style:{display:"flex",alignItems:"center"}},r.a.createElement("div",{className:"col-3"},r.a.createElement("span",null,"National ID"),r.a.createElement(O.a.Control,{id:"national_id",onChange:this.handleChange})),r.a.createElement("div",{className:"col-3"},r.a.createElement("span",null,"Lead Type"),r.a.createElement(O.a.Control,{as:"select",id:"type",onChange:this.handleChange},this.getSelectOptions("lead_type"))),r.a.createElement("div",{className:"col-3"},r.a.createElement("span",null," Audited By"),r.a.createElement(O.a.Control,{as:"select",id:"audited_by",onChange:this.handleChange},this.state.priv_users_dd)),r.a.createElement("div",{className:"col-3"},r.a.createElement(O.a.Group,{as:bc.a,className:"no-padding"},r.a.createElement(O.a.Label,{for:"closed_profile",className:"no-margin"}," Include Closed Profiles",r.a.createElement(O.a.Check,{type:"checkbox",defaultChecked:this.props.profile_status.closed_profile,id:"closed_profile",className:"float-left no-margin",onChange:function(t){e.props.onComponentElementChange(t)},style:{paddingRight:5,paddingLeft:5}})))),r.a.createElement(O.a.Group,{as:bc.a,className:"col-3"}),r.a.createElement(O.a.Group,{as:bc.a,className:"col-3"})))}}]),a}(ut);function xc(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(u.a)(e);if(t){var r=Object(u.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(m.a)(this,a)}}var Cc=function(e){Object(d.a)(a,e);var t=xc(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(e=t.call.apply(t,[this].concat(l))).state={lead:{profile_status:"open"},profile_status:{closed_profile:!1},columns:[],lead_list:[],lead_table:"hide_div"},e.handlecloseprofilechange=function(t){var a=e.state.profile_status,n="closed_profile"===t.target.id?t.target.checked:t.target.value;a[t.target.id]=n,e.state.lead.profile_status=1==a.closed_profile?"closed":"open"},e.handleSearch=function(t){e.validate_search(e.state.lead)&&oc(e.req({lead_search_criteria:e.state.lead})).then(function(t){if(e.resp(t),t){if("success"===t.status){e.resp(t);var a=e.state.columns;a=[{Header:"Cust name (or) Biz name",id:"biz_name",accessor:function(e){return Ze(e.biz_name)}},{Header:"Mobile Number",accessor:"mobile_num"},{Header:"ACC PRVDR",id:"acc_prvdr_code",accessor:function(e){return r.a.createElement(Le,{logotype:e.acc_prvdr_code})}},{Header:"Account Number",accessor:"account_num",width:125},{Header:"Location",id:"location",width:100,accessor:function(e){return he(e.location)}},{Header:"Territory",id:"territory",width:100,accessor:function(e){return he(e.territory)}},{Header:"Created At",id:"created_at",accessor:function(e){return ve(e.created_at,!0)}},{Header:"Status",id:"status",accessor:function(e){return Ze(e.status)}},{Header:"RM Name",id:"rm_name",accessor:function(e){return e.flow_rel_mgr_name}},{Header:"KYC Approved by",id:"auditor_name",accessor:function(e){return e.auditor_name}},{Header:"Profile Status",id:"profile_status",width:50,accessor:function(e){return pe(e.profile_status)}},{Header:"Type",id:"type",width:50,accessor:function(e){return Ze(e.type,"lead_type")}},{Header:"Reason",id:"reason",width:50,accessor:function(e){return pe(e.kyc_reason)}},{Header:"View / Edit",id:"id",accessor:function(e){return r.a.createElement(ee.a,{className:"btn btn-primary btn-std",role:"button",to:"/lead/edit/"+e.id,target:"_blank"},"View / Edit")}}]}e.setState({columns:a,lead_list:t.data,lead_table:"show_div"})}})},e}return Object(o.a)(a,[{key:"validate_search",value:function(e){return e.account_num&&!e.acc_prvdr_code?(alert("Please select account provider"),!1):!!(e.created_from||e.created_to||e.flow_rel_mgr_id||e.territory||e.acc_prvdr_code||e.account_num||e.location||e.mobile_num||e.status||e.biz_name||e.cust_id||e.acc_purpose||e.type||e.profile_status)||(alert("Please enter valid search criteria"),!1)}},{key:"render",value:function(){return r.a.createElement("div",{className:"container containerTopmargin max-width no-padding"},r.a.createElement("form",{className:"mb-3",autocomplete:"off"},r.a.createElement(ka.a,null,r.a.createElement(ka.a.Header,{style:{backgroundColor:"#01062c",color:"white"}},r.a.createElement("h4",null,this.props.title)),r.a.createElement(ka.a.Body,{style:{padding:15}},r.a.createElement(Nc,{id:"lead",onComponentChange:this.handleComponentChange,onComponentElementChange:this.handlecloseprofilechange,profile_status:this.state.profile_status}),r.a.createElement("div",{className:"form-group row reset-margin justify-content-center py-4"},r.a.createElement(lt.a,{disabled:this.state.calling_api,className:"col-md-2 mr-3 btn btn-primary".concat(this.state.submit_btn_style),onClick:this.handleSearch},"Search"))))),!gc.a.isEmpty(this.state.lead)&&r.a.createElement("div",{className:"mt-3 ".concat(this.state.lead_table)},r.a.createElement(za,{showPag:!0,minRow:0,row_data:void 0!==this.state.lead_list?this.state.lead_list:[],column_data:this.state.columns,resizable:!1,exportCSV:!0,csvFile:"lead",csvData:this.state.lead_list?this.state.lead_list:[]})))}}]),a}(dt),kc=a(18),Sc=a(98),Oc=a(23),Ac=function(e){return P("/api/admin/audit_kyc/cust_reg",e)},jc=function(e){return P("/api/admin/audit_kyc/update",e)},Rc=function(e){return P("/api/admin/audit_kyc/audit_name",e)},Dc=function(e){return P("/api/admin/audit_kyc/bypass_holder_name_audit",e)},Fc=function(e){return P("/api/admin/audit_kyc/holder_name_proof",e)},Lc=function(e){return P("/api/admin/audit_kyc/reject",e)};function Pc(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(u.a)(e);if(t){var r=Object(u.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(m.a)(this,a)}}var Bc=function(e){Object(d.a)(a,e);var t=Pc(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(e=t.call.apply(t,[this].concat(l))).state={lead:{},isActive:!1,account_arr:!1,bizInfor_arr:!1,bizOwner_arr:!1,bizAddress_arr:!1,ownerAddress_arr:!1,bizIdentity_arr:!1,contactAddress_arr:!1,ownerPerson_arr:!1,partnerKYC_arr:!1,contactPerson_arr:!1,references_arr:!1,consent_arr:!1,aggreements_arr:!1,reassignModal:!1,rejectModal:!1,pdf_modal:!1,third_party_owner_arr:!1,audit_lead:{},holder_name_mismatch:!1,owner_name:"",third_party_owner_name:"",tp_holder_name_n_owner_match:!1,retrieve_holder_name_successful:!0},e.handleModalAssignAuditor=function(t){_c(e.req({auditor_id:e.props.assign_audit_id.auditor,lead_id:e.props.lead_id})).then(function(t){e.resp(t),t&&"success"===t.status&&(alert(t.message),window.location.reload())})},e.handleToggle=function(t){switch(t){case"Account":e.setState(function(t){return t.account_arr=!e.state.account_arr});break;case"BizInfo":e.setState(function(t){return t.bizInfor_arr=!e.state.bizInfor_arr});break;case"BizOwner":e.setState(function(t){return t.bizOwner_arr=!e.state.bizOwner_arr});break;case"BizAddress":e.setState(function(t){return t.bizAddress_arr=!e.state.bizAddress_arr});break;case"OwnerAddress":e.setState(function(t){return t.ownerAddress_arr=!e.state.ownerAddress_arr});break;case"BizIdentity":e.setState(function(t){return t.bizIdentity_arr=!e.state.bizIdentity_arr});break;case"PartnerKYC":e.setState(function(t){return t.partnerKYC_arr=!e.state.partnerKYC_arr});break;case"ContactAddress":e.setState(function(t){return t.contactAddress_arr=!e.state.contactAddress_arr});break;case"OwnerPerson":e.setState(function(t){return t.ownerPerson_arr=!e.state.ownerPerson_arr});break;case"ContactPerson":e.setState(function(t){return t.contactPerson_arr=!e.state.contactPerson_arr});break;case"Consent":e.setState(function(t){return t.consent_arr=!e.state.consent_arr});break;case"Agreements":e.setState(function(t){return t.aggreements_arr=!e.state.aggreements_arr});break;case"References":e.setState(function(t){return t.references_arr=!e.state.references_arr});break;case"ThirdAcOwner":e.setState(function(t){return t.third_party_owner_arr=!e.state.third_party_owner_arr})}},e.addressCardData=function(e){return Object.keys(e).sort().map(function(t,a){return r.a.createElement("div",{className:"col-md-3"},r.a.createElement("p",{class:"no-margin viewCus_label"},Ze(t)),r.a.createElement("p",{class:"no-margin viewCus_labelVal"},e[t].value))})},e.handleNameMismatchReason=function(t){e.setState({holder_name_mismatch_reason:t.target.value},function(){e.props.onAuditDataChange({holder_name_mismatch_reason:e.state.holder_name_mismatch_reason})})},e.handleHolderName=function(t){e.setState({holder_name_entered_by_auditor:t.target.value})},e.handlePdfModalClose=function(){e.setState({pdf_modal:!1})},e.handlePdfModal=function(t,a){e.setState({pdf_modal:!0,pdf_path:t,pdf_modal_title:a})},e.checkNameEquality=function(t,a,n){if(t=t.replace(/\s+/g,"").toLowerCase(),a=a.replace(/\s+/g,"").toLowerCase(),n=n.replace(/\s+/g,"").toLowerCase(),e.props.data.is_rented_line)return e.state.owner_name.replace(/\s+/g,"").toLowerCase()!==n&&t!==n||!0!==e.state.tp_holder_name_n_owner_match&&e.setState({tp_holder_name_n_owner_match:!0},function(){e.props.onAuditDataChange({tp_holder_name_n_owner_match:e.state.tp_holder_name_n_owner_match})}),void(a===n?1==e.state.holder_name_mismatch&&e.setState({holder_name_mismatch:!1},function(){e.props.onAuditDataChange({holder_name_mismatch:e.state.holder_name_mismatch})}):0==e.state.holder_name_mismatch&&e.setState({holder_name_mismatch:!0},function(){e.props.onAuditDataChange({holder_name_mismatch:e.state.holder_name_mismatch})}));t===n||a===n?1==e.state.holder_name_mismatch&&e.setState({holder_name_mismatch:!1},function(){e.props.onAuditDataChange({holder_name_mismatch:e.state.holder_name_mismatch})}):0==e.state.holder_name_mismatch&&e.setState({holder_name_mismatch:!0},function(){e.props.onAuditDataChange({holder_name_mismatch:e.state.holder_name_mismatch})})},e.handleBypassHolderNameClick=function(){0!=window.confirm("Are you sure if you want to bypass the Holder Name Audit for this lead?")&&Dc(e.req({id:e.props.lead_id})).then(function(t){e.resp(t),setTimeout(function(){window.location.reload()},4e3)})},e.handleHolderNameProofSubmit=function(){e.state.audit_lead.account_holder_name_proof&&e.state.holder_name_entered_by_auditor?(e.setState({holder_name:e.state.holder_name_entered_by_auditor},function(){e.checkNameEquality(e.props.data.biz_info.biz_name.value,e.state.owner_name,e.state.holder_name),Fc(e.req({lead_id:e.props.lead_id,account_holder_name_proof:e.state.audit_lead.account_holder_name_proof,holder_name:e.state.holder_name,biz_name:e.props.data.biz_info.biz_name.value,national_id_name:"".concat(e.props.data.owner_person.first_name.value," ").concat(e.props.data.owner_person.last_name.value)}))}),setTimeout(function(){window.location.reload()},2e3)):alert("Please enter the necessary information in the above fields.")},e.setAuditLeadState=function(t){e.setChangeToState(t),e.props.onAuditDataChange({audit_lead:e.state.audit_lead})},e.determineLabelColor=function(t){return"owner_name"==t?!e.state.holder_name_mismatch&&!e.props.data.is_rented_line&&e.props.data.account.holder_name&&e.state.owner_name.toLowerCase()==e.props.data.account.holder_name.toLowerCase():"tp_acc_holder_name"==t?!e.state.holder_name_mismatch&&e.props.data.account.holder_name&&e.state.third_party_owner_name.toLowerCase()==e.props.data.account.holder_name.toLowerCase():"biz_name"==t?!e.state.holder_name_mismatch&&!e.props.data.is_rented_line&&e.props.data.account.holder_name&&e.props.data.biz_info.biz_name.value.toLowerCase()==e.props.data.account.holder_name.toLowerCase():void 0},e.handleRetrieveHolderNameClick=function(){var t=e.props.data.account.acc_prvdr_code.value,a=e.props.data.account.acc_number.value,n=null;e.props.data.account.hasOwnProperty("branch")&&(n=e.props.data.account.branch.value),Rc(e.req({acc_prvdr_code:t,acc_number:a,branch:n}),!0).then(function(t){e.resp(t),t.data?window.location.reload():t.data||e.setState({retrieve_holder_name_successful:t.data})})},e.handleCloseModal=function(t){e.setState({showModal:!1})},e.ViewPdfModal=function(){return r.a.createElement(rt.a,{show:e.state.pdf_modal,onHide:e.handlePdfModalClose,backdrop:"static",size:"xl",style:{position:"fixed"}},r.a.createElement(rt.a.Header,{closeButton:!0,show:e.state.pdf_modal,onHide:e.handlePdfModalClose},r.a.createElement(rt.a.Title,null,e.state.pdf_modal_title)),r.a.createElement(rt.a.Body,null,r.a.createElement("div",{className:"row justify-content-center"},r.a.createElement("object",{data:e.root+e.state.pdf_path+"#toolbar=0",type:"application/pdf",style:{width:"803px",height:"560px"}}))),r.a.createElement(rt.a.Footer,null,r.a.createElement(lt.a,{variant:"secondary",onClick:e.handlePdfModalClose},"Close")))},e.ViewReassignOrRejectModal=function(){var t=e.state.reassignModal||e.state.rejectModal;if(t)var a=e.state.reassignModal?["Reassign Reason","reassign_reason",e.props.handleKYCEdit]:["Reject Reason","reject_reason",e.props.handleRejectKYC],n=Object(_a.a)(a,3),l=n[0],c=n[1],s=n[2];return r.a.createElement(rt.a,{show:t,onHide:e.props.handleModalClose,size:"l"},r.a.createElement(rt.a.Header,{closeButton:!0,show:t,onHide:e.props.handleModalClose},r.a.createElement(rt.a.Title,null,l)),r.a.createElement(rt.a.Body,null,r.a.createElement("div",{className:"form-group row mx-0 mb-2 "},r.a.createElement("label",{for:"",className:"col-sm-5 font-weight-bold label__name reset-padding"},"Reason",r.a.createElement("font",{className:"text-danger"},"   *  ")),r.a.createElement("div",{className:"col-sm-7 reset-padding"},r.a.createElement("div",null,r.a.createElement("select",{id:"reason",onChange:e.handleChange,className:"form-control",type:"text"},e.getSelectOptions(c))),r.a.createElement("div",{className:"control-me"}))),r.a.createElement("div",{className:"rule-form-group form-group row reset-margin"},r.a.createElement("label",{for:"",className:"col-sm-5 font-weight-bold label__name reset-padding"},"Remarks",r.a.createElement("font",{className:"text-danger"},"   *  ")),r.a.createElement("div",{className:"col-sm-7 reset-padding"},r.a.createElement("div",null,r.a.createElement("textarea",{type:"text",id:"remarks",className:"form-control",onChange:e.handleChange,maxLength:"256"}))))),r.a.createElement(rt.a.Footer,null,r.a.createElement(lt.a,{variant:"primary",disabled:e.props.submit_btn,onClick:s},"Submit")))},e}return Object(o.a)(a,[{key:"componentWillReceiveProps",value:function(e){this.setState({reassignModal:e.reassignModal,rejectModal:e.rejectModal,showModal:this.props.showModal})}},{key:"componentWillMount",value:function(){var e=C("audit_kyc_line");this.setState({audit_kyc_line:e}),this.setOptionsToStateFromApi("auditor",Object(X.a)({},this.def_req))}},{key:"getHint",value:function(e,t){var a=C(e)[t];if(a)return a}},{key:"render",value:function(){var e=this;return this.props.data?(this.props.data.owner_person.hasOwnProperty("middle_name")&&this.props.data.owner_person.middle_name.value?this.state.owner_name!="".concat(this.props.data.owner_person.first_name.value," ").concat(this.props.data.owner_person.middle_name.value," ").concat(this.props.data.owner_person.last_name.value)&&this.setState({owner_name:"".concat(this.props.data.owner_person.first_name.value," ").concat(this.props.data.owner_person.middle_name.value," ").concat(this.props.data.owner_person.last_name.value)}):this.state.owner_name!="".concat(this.props.data.owner_person.first_name.value," ").concat(this.props.data.owner_person.last_name.value)&&this.setState({owner_name:"".concat(this.props.data.owner_person.first_name.value," ").concat(this.props.data.owner_person.last_name.value)}),this.props.data.hasOwnProperty("third_party_owner")&&this.props.data.third_party_owner.hasOwnProperty("middle_name")&&this.props.data.third_party_owner.middle_name.value?this.state.third_party_owner_name!="".concat(this.props.data.third_party_owner.first_name.value," ").concat(this.props.data.third_party_owner.middle_name.value," ").concat(this.props.data.third_party_owner.last_name.value)&&this.setState({third_party_owner_name:"".concat(this.props.data.third_party_owner.first_name.value," ").concat(this.props.data.third_party_owner.middle_name.value," ").concat(this.props.data.third_party_owner.last_name.value)}):this.props.data.hasOwnProperty("third_party_owner")&&this.state.third_party_owner_name!="".concat(this.props.data.third_party_owner.first_name.value," ").concat(this.props.data.third_party_owner.last_name.value)&&this.setState({third_party_owner_name:"".concat(this.props.data.third_party_owner.first_name.value," ").concat(this.props.data.third_party_owner.last_name.value)}),r.a.createElement(r.a.Fragment,null,this.ViewPdfModal(),this.props.data.is_rented_line?this.props.data.account.holder_name&&!this.checkNameEquality(this.props.data.biz_info.biz_name.value,this.state.third_party_owner_name,this.props.data.account.holder_name):this.props.data.account.holder_name&&!this.checkNameEquality(this.props.data.biz_info.biz_name.value,this.state.owner_name,this.props.data.account.holder_name),r.a.createElement("div",{className:"kyc_auditBox"},this.ViewReassignOrRejectModal(),r.a.createElement("div",{className:"kyc-card row"},r.a.createElement("div",{className:"col-md-12"},r.a.createElement(kc.a,{defaultActiveKey:"0"},r.a.createElement(ka.a,null,r.a.createElement(kc.a.Toggle,{style:{backgroundColor:"#3D3E53",fontSize:18},as:ka.a.Header,eventKey:"0",onClick:function(){return e.handleToggle("BizInfo")}},"Lead Name Info",r.a.createElement(Oc.a,{className:this.state.bizInfor_arr?"arrow-icon down":"arrow-icon",size:"15"})),r.a.createElement(kc.a.Collapse,{eventKey:"0"},r.a.createElement(ka.a.Body,{className:"no-padding"},r.a.createElement("div",{className:"row",style:{marginRight:0,marginLeft:0,marginBottom:5}},r.a.createElement("div",{style:{marginLeft:20}},r.a.createElement("ul",{class:"list-unstyled"},r.a.createElement("li",null,r.a.createElement("ul",{class:"list-unstyled",style:{marginBottom:10}},r.a.createElement("li",null,r.a.createElement("p",{class:"viewCus_label",style:{textTransform:"none"}},"Owner Name (As per National ID)")),r.a.createElement("li",null,r.a.createElement("p",{className:this.determineLabelColor("owner_name")?"match-label-color":"viewCus_labelVal"},this.state.owner_name)))),this.props.data.is_rented_line&&r.a.createElement("li",null,r.a.createElement("ul",{class:"list-unstyled",style:{marginBottom:10}},r.a.createElement("li",null,r.a.createElement("p",{class:"viewCus_label",style:{textTransform:"none"}},"Third Party A/C Holder Name (As per National ID)")),r.a.createElement("li",null,r.a.createElement("p",{className:this.determineLabelColor("tp_acc_holder_name")?"match-label-color":"viewCus_labelVal"},this.state.third_party_owner_name)))),r.a.createElement("li",null,r.a.createElement("ul",{class:"list-unstyled",style:{marginBottom:10}},r.a.createElement("li",null,r.a.createElement("p",{class:"viewCus_label",style:{textTransform:"none"}},"Biz Name (As entered by RM)")),r.a.createElement("li",null,r.a.createElement("p",{className:this.determineLabelColor("biz_name")?"match-label-color":"viewCus_labelVal"},this.props.data.biz_info.biz_name.value)))),r.a.createElement("li",null,r.a.createElement("ul",{class:"list-unstyled",style:{marginBottom:10}},this.props.data.account.holder_name||this.state.holder_name?r.a.createElement("div",null,r.a.createElement("li",null,r.a.createElement("p",{class:"viewCus_label",style:{textTransform:"none"}},"Account Holder Name (As per N/W Prvdr Records)")),r.a.createElement("li",{style:{display:"flex"}},r.a.createElement("p",{className:this.state.holder_name_mismatch?"mismatch-label-color":"match-label-color"},this.state.holder_name?this.state.holder_name:this.props.data.account.holder_name),!this.state.holder_name_mismatch&&r.a.createElement("div",{style:{marginLeft:15}},r.a.createElement(Ma.a,{color:"green",size:20}))),!this.state.tp_holder_name_n_owner_match&&this.state.holder_name_mismatch&&this.props.data.account.holder_name&&"50_pending_audit"==this.props.lead_data.status&&r.a.createElement("li",null,r.a.createElement("div",{style:{marginBottom:20}},r.a.createElement("label",null,"Account Holder Name Mismatch Reason   "),r.a.createElement("font",{className:"text-danger"},"   *  "),r.a.createElement("select",{id:"holder_name_mismatch_reason",className:"form-control col-md-3",value:this.state.txn_type,onChange:function(t){e.handleNameMismatchReason(t)},type:"text",required:"required"},this.getSelectOptions("holder_name_mismatch_reason"))))):"42_retrieve_holder_name"==this.props.lead_data.status?r.a.createElement("div",null,r.a.createElement("li",null,r.a.createElement("p",{class:"viewCus_label"},"Account Holder Name")),r.a.createElement("li",null,r.a.createElement("span",null,r.a.createElement(lt.a,{onClick:function(){e.handleRetrieveHolderNameClick()},disabled:this.state.calling_api},r.a.createElement("p",{style:{marginBottom:0,fontSize:7.5}},"Retrieve Holder Name")),E("lead","bypass_audit_name")&&r.a.createElement(lt.a,{variant:"danger",onClick:function(){e.handleBypassHolderNameClick()},disabled:this.state.calling_api},r.a.createElement("p",{style:{marginBottom:0,fontSize:7.5}},"Bypass Audit Name")),!this.state.retrieve_holder_name_successful&&r.a.createElement("p",{style:{color:"red"}},"Unable to Retrieve Account Holder Name. Please try again later after refreshing. If the attempt still fails contact app support.")))):(!this.state.holder_name||!this.state.audit_lead.account_holder_name_proof)&&"skip"!=this.state.audit_kyc_line[this.props.data.account.acc_prvdr_code.value]&&r.a.createElement("div",null,r.a.createElement(Gt,{is_mandatory:!0,lead_id:this.props.lead_id,id:"account_holder_name_proof",mode:"create",entity:"leads",type:"image",onEditUpload:function(t){e.handleChangeForEdit(t),e.handleSave(t,"reload")},onCreateUpload:this.setAuditLeadState,label:"Holder Name Proof"}),r.a.createElement("div",{style:{marginTop:20,marginBottom:20}},r.a.createElement("label",null,"Account Holder Name   "),r.a.createElement("font",{className:"text-danger"},"   *  "),r.a.createElement("input",{type:"text",id:"holder_name",placeholder:"Enter the holder name",onChange:function(t){e.handleHolderName(t)},className:"form-control"})),r.a.createElement(lt.a,{onClick:function(){e.handleHolderNameProofSubmit()},disabled:this.state.calling_api},r.a.createElement("p",{style:{marginBottom:0,fontSize:7.5}},"Submit"))))),this.props.data.account.holder_name&&this.state.holder_name_mismatch&&r.a.createElement("li",null,r.a.createElement("div",{className:"row justify-content-center",style:{marginTop:20,backgroundColor:"white"}},r.a.createElement("div",{className:"col-md-12",style:{backgroundColor:"rgba(255, 0, 0, .4)"}},r.a.createElement("ul",{class:"list-unstyled",style:{marginBottom:10}},r.a.createElement("li",null,r.a.createElement("p",{style:{color:"#01062c",fontSize:"14px",marginBottom:5,padding:5},class:"text-center"},"NOTE"),r.a.createElement("p",{style:{color:"#01062c",fontSize:"12px"},class:" text-center"},"The name of the customer does not match neither with National ID nor business name. If you still think this KYC can be verified go ahead and approve KYC.",r.a.createElement("b",null," Operations Admin will be notified about this case."))))))))))))))),r.a.createElement("div",{className:"col-md-12"},r.a.createElement(kc.a,{defaultActiveKey:"0"},r.a.createElement(ka.a,null,r.a.createElement(kc.a.Toggle,{style:{backgroundColor:"#3D3E53",color:"white",fontSize:18},as:ka.a.Header,eventKey:"0",onClick:function(){return e.handleToggle("Account")}},"Account",r.a.createElement(Oc.a,{className:this.state.account_arr?"arrow-icon down":"arrow-icon",size:"15"})),r.a.createElement(kc.a.Collapse,{eventKey:"0"},r.a.createElement(ka.a.Body,{className:"no-padding"},r.a.createElement("div",{className:"row",style:{marginRight:0,marginLeft:0,marginBottom:15}},r.a.createElement("div",{class:"col-md-3"},r.a.createElement("div",null,r.a.createElement("p",{class:"no-margin viewCus_label"},"Account Provider"),r.a.createElement("p",{class:"no-margin viewCus_labelVal"},r.a.createElement(Le,{logotype:this.props.data.account.acc_prvdr_code.value})))),r.a.createElement("div",{className:"col-md-3"},r.a.createElement("p",{class:"no-margin viewCus_label"},"A/C Number / ",this.getHint("ap_ac_num_name",this.props.data.account.acc_prvdr_code.value)),r.a.createElement("p",{class:"no-margin viewCus_labelVal"},this.props.data.account.acc_number.value)),this.props.data.account.alt_acc_num&&this.props.data.account.alt_acc_num.value&&r.a.createElement("div",{className:"col-md-4"},r.a.createElement("p",{class:"no-margin viewCus_label"},"Alternate A/C Number / ",this.getHint("ap_alt_ac_num_name",this.props.data.account.acc_prvdr_code.value)," "),r.a.createElement("p",{class:"no-margin viewCus_labelVal"},this.props.data.account.alt_acc_num.value)),this.props.data.account.branch&&this.props.data.account.branch.value&&r.a.createElement("div",{className:"col-md-3"},r.a.createElement("p",{class:"no-margin viewCus_label"},"Branch"),r.a.createElement("p",{class:"no-margin viewCus_labelVal"},Ze(this.props.data.account.branch.value))),r.a.createElement("div",{className:"col-md-3"},r.a.createElement("p",{class:"no-margin viewCus_label"},"Account Purpose"),r.a.createElement("p",{class:"no-margin viewCus_labelVal"},Fe(this.props.lead_data.acc_purpose)))),"re_kyc"==this.props.lead_data.type&&"new_account"==this.props.lead_data.kyc_reason&&r.a.createElement("div",{className:"row no-margin"},r.a.createElement("div",{className:"col-md-3"}),r.a.createElement("div",{className:"col-md-6"},r.a.createElement("div",{className:"d-flex align-items-center justify-content-around pAlign_mid"},r.a.createElement("p",{class:"no-margin viewCus_label no-padding"},"New A/C Request Letter Photo"),r.a.createElement(Oa,{className:"img-fluid",image_path:De(this.props.data.account.photo_new_acc_letter_full_path.value,this.props.data.account.photo_new_acc_letter.value),file_name:this.props.data.account.photo_new_acc_letter.value}))),r.a.createElement("div",{className:"col-md-3"})),1==this.props.data.is_rented_line&&r.a.createElement(kc.a,{defaultActiveKey:"0",style:{top:"20px"}},r.a.createElement(ka.a,{style:{width:"95%"}},r.a.createElement(kc.a.Toggle,{style:{backgroundColor:"#3D3E53",color:"white",fontSize:18},as:ka.a.Header,eventKey:"0",onClick:function(){return e.handleToggle("ThirdAcOwner")}},"Third Party A/C Owner",r.a.createElement(Oc.a,{className:this.state.third_party_owner_arr?"arrow-icon down":"arrow-icon",size:"15"})),r.a.createElement(kc.a.Collapse,{eventKey:"0"},r.a.createElement(ka.a.Body,{className:"no-padding"},r.a.createElement("div",{className:"row",style:{marginRight:0,marginLeft:0,marginBottom:10}},r.a.createElement("div",{className:"col-md-3"},r.a.createElement("p",{class:"no-margin viewCus_label"},"First Name"),r.a.createElement("p",{class:"no-margin viewCus_labelVal"},this.props.data.third_party_owner.first_name.value)),r.a.createElement("div",{className:"col-md-3"},r.a.createElement("p",{class:"no-margin viewCus_label"},"Last Name"),r.a.createElement("p",{class:"no-margin viewCus_labelVal"},this.props.data.third_party_owner.last_name.value)),r.a.createElement("div",{className:"col-md-3"},r.a.createElement("p",{class:"no-margin viewCus_label"},"DOB"),r.a.createElement("p",{class:"no-margin viewCus_labelVal"},this.props.data.third_party_owner.dob.value)),r.a.createElement("div",{className:"col-md-3"},r.a.createElement("p",{class:"no-margin viewCus_label"},"Gender"),r.a.createElement("p",{class:"no-margin viewCus_labelVal"},he(this.props.data.third_party_owner.gender.value))),r.a.createElement("div",{className:"col-md-3"},r.a.createElement("p",{class:"no-margin viewCus_label"},"National ID"),r.a.createElement("p",{class:"no-margin viewCus_labelVal"},this.props.data.third_party_owner.national_id.value))),r.a.createElement("div",{className:"row no-margin justify-content-center"},r.a.createElement("div",{className:"col-md-3"},r.a.createElement("div",{className:"d-flex align-items-center justify-content-around pAlign_mid"},r.a.createElement("p",{class:"no-margin viewCus_label no-padding"},"National ID Photo"),r.a.createElement(Oa,{className:"img-fluid",image_path:De(this.props.data.third_party_owner.photo_national_id_full_path.value,this.props.data.third_party_owner.photo_national_id.value),file_name:this.props.data.third_party_owner.photo_national_id.value}))),r.a.createElement("div",{className:"col-md-3"},r.a.createElement("div",{className:"d-flex align-items-center justify-content-around pAlign_mid"},r.a.createElement("p",{class:"no-margin viewCus_label no-padding"},"National ID Back Photo"),r.a.createElement(Oa,{className:"img-fluid",image_path:De(this.props.data.third_party_owner.photo_national_id_back_full_path.value,this.props.data.third_party_owner.photo_national_id_back.value),file_name:this.props.data.third_party_owner.photo_national_id_back.value}))),r.a.createElement("div",{className:"col-md-3"},r.a.createElement("div",{className:"d-flex align-items-center justify-content-around pAlign_mid"},r.a.createElement("p",{class:"no-margin viewCus_label no-padding"},"Consent Letter Photo"),r.a.createElement(Oa,{className:"img-fluid",image_path:De(this.props.data.third_party_owner.photo_consent_letter_full_path.value,this.props.data.third_party_owner.photo_consent_letter.value),file_name:this.props.data.third_party_owner.photo_consent_letter.value})))),this.props.data.allow_tp_ac_owner_manual_id_capture&&("50_pending_audit"==this.props.lead_data.status||"42_retrieve_holder_name"==this.props.lead_data.status)&&r.a.createElement("div",{className:"row justify-content-center",style:{marginTop:20,backgroundColor:"white"}},r.a.createElement("div",{className:"col-md-12",style:{backgroundColor:"rgba(255, 0, 0, .4)"}},r.a.createElement("p",{style:{color:"#01062c",fontSize:"14px",marginBottom:5,padding:5},class:"text-center"},"NOTE"),r.a.createElement("p",{style:{color:"#01062c",fontSize:"12px"},class:" text-center"},"Flow app was not able to extract text from the National ID and RM typed the data fields from National ID manually. ",r.a.createElement("br",null),"  If both are not matching, please re-assign back to RM and ask to correct it.")))))))))))),r.a.createElement("div",{className:"col-md-12"},r.a.createElement(kc.a,{defaultActiveKey:"0"},r.a.createElement(ka.a,null,r.a.createElement(kc.a.Toggle,{style:{backgroundColor:"#3D3E53",fontSize:18},as:ka.a.Header,eventKey:"0",onClick:function(){return e.handleToggle("BizInfo")}},"Biz Info",r.a.createElement(Oc.a,{className:this.state.bizInfor_arr?"arrow-icon down":"arrow-icon",size:"15"})),r.a.createElement(kc.a.Collapse,{eventKey:"0"},r.a.createElement(ka.a.Body,{className:"no-padding"},r.a.createElement("div",{className:"row",style:{marginRight:0,marginLeft:0,marginBottom:15}},r.a.createElement("div",{className:"col-md-3"},r.a.createElement("p",{class:"no-margin viewCus_label"},"Biz Name"),r.a.createElement("p",{class:"no-margin viewCus_labelVal"},this.props.data.biz_info.biz_name.value)),r.a.createElement("div",{className:"col-md-3"},r.a.createElement("p",{class:"no-margin viewCus_label"},"Business Distance"),r.a.createElement("p",{class:"no-margin viewCus_labelVal"},pe(this.props.data.biz_info.business_distance.value))),r.a.createElement("div",{className:"col-md-3"},r.a.createElement("p",{class:"no-margin viewCus_label"},"Territory"),r.a.createElement("p",{class:"no-margin viewCus_labelVal"},pe(this.props.data.biz_info.territory.value))),r.a.createElement("div",{className:"col-md-3"},r.a.createElement("p",{class:"no-margin viewCus_label"},"Ownership"),r.a.createElement("p",{class:"no-margin viewCus_labelVal"},pe(this.props.data.biz_info.ownership.value))),r.a.createElement("div",{className:"col-md-3"},r.a.createElement("p",{class:"no-margin viewCus_label"},"Business Address Type"),r.a.createElement("p",{class:"no-margin viewCus_labelVal"},pe(this.props.data.biz_info.biz_addr_prop_type.value))),r.a.createElement("div",{className:"col-md-3"},r.a.createElement("p",{class:"no-margin viewCus_label"},"Partner RM Name"),r.a.createElement("p",{class:"no-margin viewCus_labelVal"},this.props.data.biz_info.dp_rel_mgr_name))))))))),r.a.createElement("div",{className:"kyc-card row"},r.a.createElement("div",{className:"col-md-12"},r.a.createElement(kc.a,{defaultActiveKey:"0"},r.a.createElement(ka.a,null,r.a.createElement(kc.a.Toggle,{style:{backgroundColor:"#3D3E53",color:"white",fontSize:18},as:ka.a.Header,eventKey:"0",onClick:function(){return e.handleToggle("BizOwner")}},"Biz Owner",r.a.createElement(Oc.a,{className:this.state.bizOwner_arr?"arrow-icon down":"arrow-icon",size:"15"})),r.a.createElement(kc.a.Collapse,{eventKey:"0"},r.a.createElement(ka.a.Body,{className:"no-padding"},r.a.createElement("div",{className:"row",style:{marginRight:0,marginLeft:0,marginBottom:15}},r.a.createElement("div",{className:"col-md-3"},r.a.createElement("p",{class:"no-margin viewCus_label"},"First Name"),r.a.createElement("p",{class:"no-margin viewCus_labelVal"},this.props.data.owner_person.first_name.value)),r.a.createElement("div",{className:"col-md-3"},r.a.createElement("p",{class:"no-margin viewCus_label"},"Last Name"),r.a.createElement("p",{class:"no-margin viewCus_labelVal"},this.props.data.owner_person.last_name.value)),r.a.createElement("div",{className:"col-md-3"},r.a.createElement("p",{class:"no-margin viewCus_label"},"National ID"),r.a.createElement("p",{class:"no-margin viewCus_labelVal"},this.props.data.owner_person.national_id.value)),r.a.createElement("div",{className:"col-md-3"},r.a.createElement("p",{class:"no-margin viewCus_label"},"DOB"),r.a.createElement("p",{class:"no-margin viewCus_labelVal"},this.props.data.owner_person.dob.value)),r.a.createElement("div",{className:"col-md-3"},r.a.createElement("p",{class:"no-margin viewCus_label"},"Gender"),r.a.createElement("p",{class:"no-margin viewCus_labelVal"},he(this.props.data.owner_person.gender.value))),r.a.createElement("div",{className:"col-md-3"},r.a.createElement("p",{class:"no-margin viewCus_label"},"Email ID"),r.a.createElement("p",{class:"no-margin viewCus_labelVal"},this.props.data.owner_person.email_id.value)),r.a.createElement("div",{className:"col-md-3"},r.a.createElement("p",{class:"no-margin viewCus_label"},"Whatsapp"),r.a.createElement("p",{class:"no-margin viewCus_labelVal"},this.props.data.owner_person.whatsapp.value))),r.a.createElement("div",{className:"row no-margin"},r.a.createElement("div",{className:"col-md-3"}),r.a.createElement("div",{className:"col-md-6"},r.a.createElement("div",{className:"d-flex align-items-center justify-content-around pAlign_mid"},r.a.createElement("p",{class:"no-margin viewCus_label no-padding"},"Selfie Photo"),r.a.createElement(Oa,{className:"img-fluid",image_path:De(this.props.data.owner_person.photo_selfie_full_path.value,this.props.data.owner_person.photo_selfie.value),file_name:this.props.data.owner_person.photo_selfie.value}))),r.a.createElement("div",{className:"col-md-3"}))))))),r.a.createElement("div",{className:"col-md-12"},r.a.createElement(kc.a,{defaultActiveKey:"0"},r.a.createElement(ka.a,null,r.a.createElement(kc.a.Toggle,{style:{backgroundColor:"#3D3E53",color:"white",fontSize:18},as:ka.a.Header,eventKey:"0",onClick:function(){return e.handleToggle("BizAddress")}},"Biz Address",r.a.createElement(Oc.a,{className:this.state.bizAddress_arr?"arrow-icon down":"arrow-icon",size:"15"})),r.a.createElement(kc.a.Collapse,{eventKey:"0"},r.a.createElement(ka.a.Body,{className:"no-padding"},r.a.createElement("div",{className:"row",style:{marginRight:0,marginLeft:0,marginBottom:15}},this.addressCardData(this.props.data.biz_address))))))),0==this.props.data.same_as_biz_address&&r.a.createElement("div",{className:"col-md-12"},r.a.createElement(kc.a,{defaultActiveKey:"0"},r.a.createElement(ka.a,null,r.a.createElement(kc.a.Toggle,{style:{backgroundColor:"#3D3E53",color:"white",fontSize:18},as:ka.a.Header,eventKey:"0",onClick:function(){return e.handleToggle("OwnerAddress")}},"Owner Address",r.a.createElement(Oc.a,{className:this.state.ownerAddress_arr?"arrow-icon down":"arrow-icon",size:"15"})),r.a.createElement(kc.a.Collapse,{eventKey:"0"},r.a.createElement(ka.a.Body,{className:"no-padding"},r.a.createElement("div",{className:"row",style:{marginRight:0,marginLeft:0,marginBottom:15}},this.addressCardData(this.props.data.owner_address)))))))),r.a.createElement("div",{className:"kyc-card row"},r.a.createElement("div",{className:"col-md-12"},r.a.createElement(kc.a,{defaultActiveKey:"0"},r.a.createElement(ka.a,null,r.a.createElement(kc.a.Toggle,{style:{backgroundColor:"#3D3E53",color:"white",fontSize:18},as:ka.a.Header,eventKey:"0",onClick:function(){return e.handleToggle("BizIdentity")}},"Biz Identity",r.a.createElement(Oc.a,{className:this.state.bizIdentity_arr?"arrow-icon down":"arrow-icon",size:"15"})),r.a.createElement(kc.a.Collapse,{eventKey:"0"},r.a.createElement(ka.a.Body,{className:"no-padding"},r.a.createElement("div",{className:"row",style:{marginRight:0,marginLeft:0,marginBottom:15}},r.a.createElement("div",{className:"col-md-3"},r.a.createElement("p",{class:"no-margin viewCus_label"},"GPS"),r.a.createElement("span",null,r.a.createElement("a",{target:"blank",href:"http://maps.google.com/maps?t=k&q=loc:"+this.props.data.biz_identity.gps.value},"View on Map")),r.a.createElement("a",{target:"blank",href:"http://maps.google.com/maps?t=k&q=loc:"+this.props.data.biz_identity.gps.value},r.a.createElement(Sc.a,{size:"20"}))),r.a.createElement("div",{className:"col-md-3"},r.a.createElement("p",{class:"no-margin viewCus_label"},"Mobile No."),r.a.createElement("p",{class:"no-margin viewCus_labelVal"},this.props.data.biz_identity.mobile_num.value)),r.a.createElement("div",{className:"col-md-3"},r.a.createElement("p",{class:"no-margin viewCus_label"},"Alternate biz Mobilenumber 1"),r.a.createElement("p",{class:"no-margin viewCus_labelVal"},this.props.data.biz_identity.alt_biz_mobile_num_1.value)),r.a.createElement("div",{className:"col-md-3"},r.a.createElement("p",{class:"no-margin viewCus_label"},"Alternate biz Mobilenumber 2"),r.a.createElement("p",{class:"no-margin viewCus_labelVal"},this.props.data.biz_identity.alt_biz_mobile_num_2.value))),r.a.createElement("div",{className:"row no-margin"},r.a.createElement("div",{className:"col-md-4"},r.a.createElement("div",{className:"d-flex align-items-center justify-content-around pAlign_mid"},r.a.createElement("p",{class:"no-margin viewCus_label no-padding"},"Business License Photo"),r.a.createElement(Oa,{className:"img-fluid",image_path:De(this.props.data.biz_identity.photo_biz_lic_full_path.value,this.props.data.biz_identity.photo_biz_lic.value),file_name:this.props.data.biz_identity.photo_biz_lic.value}))),r.a.createElement("div",{className:"col-md-4"},r.a.createElement("div",{className:"d-flex align-items-center justify-content-around pAlign_mid"},r.a.createElement("p",{class:"no-margin viewCus_label no-padding"},"Shop Photo"),r.a.createElement(Oa,{className:"img-fluid",image_path:De(this.props.data.biz_identity.photo_shop_full_path.value,this.props.data.biz_identity.photo_shop.value),file_name:this.props.data.biz_identity.photo_shop.value}))),r.a.createElement("div",{className:"col-md-4"},r.a.createElement("div",{className:"d-flex align-items-center justify-content-around pAlign_mid"},r.a.createElement("p",{class:"no-margin viewCus_label no-padding"},"Visit Selfie Photo"),r.a.createElement(Oa,{className:"img-fluid",image_path:this.props.lead_data.photo_visit_selfie_path,file_name:this.props.lead_data.photo_visit_selfie})))))))))),r.a.createElement("div",{className:"kyc-card row"},0==this.props.data.same_as_owner_person&&r.a.createElement("div",{className:"col-md-12"},r.a.createElement(kc.a,{defaultActiveKey:"0"},r.a.createElement(ka.a,null,r.a.createElement(kc.a.Toggle,{style:{backgroundColor:"#3D3E53",color:"white",fontSize:18},as:ka.a.Header,eventKey:"0",onClick:function(){return e.handleToggle("ContactAddress")}},"Contact Address",r.a.createElement(Oc.a,{className:this.state.contactAddress_arr?"arrow-icon down":"arrow-icon",size:"15"})),r.a.createElement(kc.a.Collapse,{eventKey:"0"},r.a.createElement(ka.a.Body,{className:"no-padding"},r.a.createElement("div",{className:"row",style:{marginRight:0,marginLeft:0,marginBottom:15}},this.addressCardData(this.props.data.contact_persons[0].contact_address))))))),this.props.lead_data.acc_purpose.includes("terminal_financing")&&r.a.createElement("div",{className:"col-md-12"},r.a.createElement(kc.a,{defaultActiveKey:"0"},r.a.createElement(ka.a,null,r.a.createElement(kc.a.Toggle,{style:{backgroundColor:"#3D3E53",color:"white",fontSize:18},as:ka.a.Header,eventKey:"0",onClick:function(){return e.handleToggle("PartnerKYC")}},"Partner KYC",r.a.createElement(Oc.a,{className:this.state.partnerKYC_arr?"arrow-icon down":"arrow-icon",size:"15"})),r.a.createElement(kc.a.Collapse,{eventKey:"0"},r.a.createElement(ka.a.Body,{className:"no-padding"},r.a.createElement("div",{className:"row",style:{marginRight:0,marginLeft:0,marginBottom:15}},this.props.data.partner_kyc.UEZM.UEZM_MainContent_txtLC1&&r.a.createElement("div",{className:"col-md-3"},r.a.createElement("p",{class:"no-margin viewCus_label"},"LC1"),r.a.createElement("p",{class:"no-margin viewCus_labelVal"},this.props.data.partner_kyc.UEZM.UEZM_MainContent_txtLC1.value)),r.a.createElement("div",{className:"col-md-3"},r.a.createElement("p",{class:"no-margin viewCus_label"},"Operated by"),r.a.createElement("p",{class:"no-margin viewCus_labelVal"},this.props.data.partner_kyc.UEZM.UEZM_MainContent_ddOperatedBy.value)),this.props.data.partner_kyc.UEZM.UEZM_MainContent_ddWallet&&r.a.createElement("div",{className:"col-md-3"},r.a.createElement("p",{class:"no-margin viewCus_label"},"Wallet Type"),r.a.createElement("p",{class:"no-margin viewCus_labelVal"},this.props.data.partner_kyc.UEZM.UEZM_MainContent_ddWallet.value)),r.a.createElement("div",{className:"col-md-3"},r.a.createElement("p",{class:"no-margin viewCus_label"},"Abbreviation Name"),r.a.createElement("p",{class:"no-margin viewCus_labelVal"},this.props.data.partner_kyc.UEZM.UEZM_MainContent_txtAbbreviationName.value)),r.a.createElement("div",{className:"col-md-3"},r.a.createElement("p",{class:"no-margin viewCus_label"},"CMP Registration No."),r.a.createElement("p",{class:"no-margin viewCus_labelVal"},this.props.data.partner_kyc.UEZM.UEZM_MainContent_txtCompanyRegistrationNo.value)),r.a.createElement("div",{className:"col-md-3"},r.a.createElement("p",{class:"no-margin viewCus_label"},"Recruiter ID"),r.a.createElement("p",{class:"no-margin viewCus_labelVal"},this.props.data.partner_kyc.UEZM.UEZM_MainContent_txtRecruiterID.value))))))))),r.a.createElement("div",{className:"kyc-card row"},r.a.createElement("div",{className:"col-md-12"},r.a.createElement(kc.a,{defaultActiveKey:"0"},r.a.createElement(ka.a,null,r.a.createElement(kc.a.Toggle,{style:{backgroundColor:"#3D3E53",color:"white",fontSize:18},as:ka.a.Header,eventKey:"0",onClick:function(){return e.handleToggle("OwnerPerson")}},"Owner Person",r.a.createElement(Oc.a,{className:this.state.ownerPerson_arr?"arrow-icon down":"arrow-icon",size:"15"})),r.a.createElement(kc.a.Collapse,{eventKey:"0"},r.a.createElement(ka.a.Body,{className:"no-padding"},r.a.createElement("div",{className:"row",style:{marginRight:0,marginLeft:0,marginBottom:10}},r.a.createElement("div",{className:"col-md-3"},r.a.createElement("p",{class:"no-margin viewCus_label"},"First Name"),r.a.createElement("p",{class:"no-margin viewCus_labelVal"},this.props.data.owner_person.first_name.value)),r.a.createElement("div",{className:"col-md-3"},r.a.createElement("p",{class:"no-margin viewCus_label"},"Last Name"),r.a.createElement("p",{class:"no-margin viewCus_labelVal"},this.props.data.owner_person.last_name.value)),r.a.createElement("div",{className:"col-md-3"},r.a.createElement("p",{class:"no-margin viewCus_label"},"DOB"),r.a.createElement("p",{class:"no-margin viewCus_labelVal"},this.props.data.owner_person.dob.value)),r.a.createElement("div",{className:"col-md-3"},r.a.createElement("p",{class:"no-margin viewCus_label"},"Gender"),r.a.createElement("p",{class:"no-margin viewCus_labelVal"},he(this.props.data.owner_person.gender.value))),r.a.createElement("div",{className:"col-md-3"},r.a.createElement("p",{class:"no-margin viewCus_label"},"Email ID"),r.a.createElement("p",{class:"no-margin viewCus_labelVal"},this.props.data.owner_person.email_id.value)),r.a.createElement("div",{className:"col-md-3"},r.a.createElement("p",{class:"no-margin viewCus_label"},"Whatsapp"),r.a.createElement("p",{class:"no-margin viewCus_labelVal"},this.props.data.owner_person.whatsapp.value)),r.a.createElement("div",{className:"col-md-3"},r.a.createElement("p",{class:"no-margin viewCus_label"},"National ID"),r.a.createElement("p",{class:"no-margin viewCus_labelVal"},this.props.data.owner_person.national_id.value))),r.a.createElement("div",{className:"row no-margin"},r.a.createElement("div",{className:"col-md-3"},r.a.createElement("div",{className:"d-flex align-items-center justify-content-around pAlign_mid"},r.a.createElement("p",{class:"no-margin viewCus_label no-padding"},"Passport Size Photo"),r.a.createElement(Oa,{className:"img-fluid",image_path:De(this.props.data.owner_person.photo_pps_full_path.value,this.props.data.owner_person.photo_pps.value),file_name:this.props.data.owner_person.photo_pps.value}))),r.a.createElement("div",{className:"col-md-3"},r.a.createElement("div",{className:"d-flex align-items-center justify-content-around pAlign_mid"},r.a.createElement("p",{class:"no-margin viewCus_label no-padding"},"National ID Photo"),r.a.createElement(Oa,{className:"img-fluid",image_path:De(this.props.data.owner_person.photo_national_id_full_path.value,this.props.data.owner_person.photo_national_id.value),file_name:this.props.data.owner_person.photo_national_id.value}))),r.a.createElement("div",{className:"col-md-3"},r.a.createElement("div",{className:"d-flex align-items-center justify-content-around pAlign_mid"},r.a.createElement("p",{class:"no-margin viewCus_label no-padding"},"National ID Back Photo"),r.a.createElement(Oa,{className:"img-fluid",image_path:De(this.props.data.owner_person.photo_national_id_back_full_path.value,this.props.data.owner_person.photo_national_id_back.value),file_name:this.props.data.owner_person.photo_national_id_back.value}))),r.a.createElement("div",{className:"col-md-3"},r.a.createElement("div",{className:"d-flex align-items-center justify-content-around pAlign_mid"},r.a.createElement("p",{class:"no-margin viewCus_label no-padding"},"Selfie Photo"),r.a.createElement(Oa,{className:"img-fluid",image_path:De(this.props.data.owner_person.photo_selfie_full_path.value,this.props.data.owner_person.photo_selfie.value),file_name:this.props.data.owner_person.photo_selfie.value})))),this.props.data.allow_biz_owner_manual_id_capture&&("50_pending_audit"==this.props.lead_data.status||"42_retrieve_holder_name"==this.props.lead_data.status)&&r.a.createElement("div",{className:"row justify-content-center",style:{marginTop:20,backgroundColor:"white"}},r.a.createElement("div",{className:"col-md-12",style:{backgroundColor:"rgba(255, 0, 0, .4)"}},r.a.createElement("p",{style:{color:"#01062c",fontSize:"14px",marginBottom:5,padding:5},class:"text-center"},"NOTE"),r.a.createElement("p",{style:{color:"#01062c",fontSize:"12px"},class:" text-center"},"Flow app was not able to extract text from the National ID and RM typed the data fields from National ID manually. ",r.a.createElement("br",null),"  If both are not matching, please re-assign back to RM and ask to correct it."))))))))),0==this.props.data.same_as_owner_person&&r.a.createElement("div",{className:"kyc-card row"},r.a.createElement("div",{className:"col-md-12"},r.a.createElement(kc.a,{defaultActiveKey:"0"},r.a.createElement(ka.a,null,r.a.createElement(kc.a.Toggle,{style:{backgroundColor:"#3D3E53",color:"white",fontSize:18},as:ka.a.Header,eventKey:"0",onClick:function(){return e.handleToggle("ContactPerson")}},"Contact Person",r.a.createElement(Oc.a,{className:this.state.contactPerson_arr?"arrow-icon down":"arrow-icon",size:"15"})),r.a.createElement(kc.a.Collapse,{eventKey:"0"},r.a.createElement(ka.a.Body,{className:"no-padding"},r.a.createElement("div",{className:"row",style:{marginRight:0,marginLeft:0,marginBottom:15}},r.a.createElement("div",{className:"col-md-3"},r.a.createElement("p",{class:"no-margin viewCus_label"},"First Name"),r.a.createElement("p",{class:"no-margin viewCus_labelVal"},this.props.data.contact_persons[0].first_name.value)),r.a.createElement("div",{className:"col-md-3"},r.a.createElement("p",{class:"no-margin viewCus_label"},"Last Name"),r.a.createElement("p",{class:"no-margin viewCus_labelVal"},this.props.data.contact_persons[0].last_name.value)),r.a.createElement("div",{className:"col-md-3"},r.a.createElement("p",{class:"no-margin viewCus_label"},"DOB"),r.a.createElement("p",{class:"no-margin viewCus_labelVal"},this.props.data.contact_persons[0].dob.value)),r.a.createElement("div",{className:"col-md-3"},r.a.createElement("p",{class:"no-margin viewCus_label"},"Gender"),r.a.createElement("p",{class:"no-margin viewCus_labelVal"},this.props.data.contact_persons[0].gender.value)),r.a.createElement("div",{className:"col-md-3"},r.a.createElement("p",{class:"no-margin viewCus_label"},"National ID"),r.a.createElement("p",{class:"no-margin viewCus_labelVal"},this.props.data.contact_persons[0].national_id.value)),r.a.createElement("div",{className:"col-md-3"},r.a.createElement("p",{class:"no-margin viewCus_label"},"Email ID"),r.a.createElement("p",{class:"no-margin viewCus_labelVal"},this.props.data.contact_persons[0].email_id.value)),this.props.data.contact_persons[0].mobile_num&&r.a.createElement("div",{className:"col-md-3"},r.a.createElement("p",{class:"no-margin viewCus_label"},"Mobile Number"),r.a.createElement("p",{class:"no-margin viewCus_labelVal"},this.props.data.contact_persons[0].mobile_num.value)),this.props.data.contact_persons[0].alt_biz_mobile_num_1&&r.a.createElement("div",{className:"col-md-3"},r.a.createElement("p",{class:"no-margin viewCus_label"},"Mobile Number 1"),r.a.createElement("p",{class:"no-margin viewCus_labelVal"},this.props.data.contact_persons[0].alt_biz_mobile_num_1.value)),this.props.data.contact_persons[0].alt_biz_mobile_num_2&&r.a.createElement("div",{className:"col-md-3"},r.a.createElement("p",{class:"no-margin viewCus_label"},"Mobile Number 2"),r.a.createElement("p",{class:"no-margin viewCus_labelVal"},this.props.data.contact_persons[0].alt_biz_mobile_num_2.value)),r.a.createElement("div",{className:"col-md-3"},r.a.createElement("p",{class:"no-margin viewCus_label"},"Whatsapp"),r.a.createElement("p",{class:"no-margin viewCus_labelVal"},this.props.data.contact_persons[0].whatsapp.value)),r.a.createElement("div",{className:"col-md-3"},r.a.createElement("p",{class:"no-margin viewCus_label"},"Handling Biz Since"),r.a.createElement("p",{class:"no-margin viewCus_labelVal"},this.props.data.contact_persons[0].handling_biz_since.value)),r.a.createElement("div",{className:"col-md-3"},r.a.createElement("p",{class:"no-margin viewCus_label"},"Relation with Owner"),r.a.createElement("p",{class:"no-margin viewCus_labelVal"},this.props.data.contact_persons[0].relation_with_owner.value))),r.a.createElement("div",{className:"row no-margin"},r.a.createElement("div",{className:"col-md-3"},r.a.createElement("div",{className:"d-flex align-items-center justify-content-around pAlign_mid"},r.a.createElement("p",{class:"no-margin viewCus_label no-padding"},"National ID Photo"),r.a.createElement(Oa,{className:"img-fluid",image_path:De(this.props.data.contact_persons[0].photo_national_id_full_path.value,this.props.data.contact_persons[0].photo_national_id.value),file_name:this.props.data.contact_persons[0].photo_national_id.value}))),r.a.createElement("div",{className:"col-md-3"},r.a.createElement("div",{className:"d-flex align-items-center justify-content-around pAlign_mid"},r.a.createElement("p",{class:"no-margin viewCus_label no-padding"},"National ID Back Photo"),r.a.createElement(Oa,{className:"img-fluid",image_path:De(this.props.data.contact_persons[0].photo_national_id_back_full_path.value,this.props.data.contact_persons[0].photo_national_id_back.value),file_name:this.props.data.contact_persons[0].photo_national_id_back.value}))),r.a.createElement("div",{className:"col-md-3"},r.a.createElement("div",{className:"d-flex align-items-center justify-content-around pAlign_mid"},r.a.createElement("p",{class:"no-margin viewCus_label no-padding"},"Selfie Photo"),r.a.createElement(Oa,{className:"img-fluid",image_path:De(this.props.data.contact_persons[0].photo_selfie_full_path.value,this.props.data.contact_persons[0].photo_selfie.value),file_name:this.props.data.contact_persons[0].photo_selfie.value}))),r.a.createElement("div",{className:"col-md-3"},r.a.createElement("div",{className:"d-flex align-items-center justify-content-around pAlign_mid"},r.a.createElement("p",{class:"no-margin viewCus_label no-padding"},"Passport Size Photo"),r.a.createElement(Oa,{className:"img-fluid",image_path:De(this.props.data.contact_persons[0].photo_pps_full_path.value,this.props.data.contact_persons[0].photo_pps.value),file_name:this.props.data.contact_persons[0].photo_pps.value})))))))))),this.props.lead_data.acc_purpose.includes("terminal_financing")&&r.a.createElement("div",{className:"kyc-card row"},r.a.createElement("div",{className:"col-md-12"},r.a.createElement(kc.a,{defaultActiveKey:"0"},r.a.createElement(ka.a,null,r.a.createElement(kc.a.Toggle,{style:{backgroundColor:"#3D3E53",color:"white",fontSize:18},as:ka.a.Header,eventKey:"0",onClick:function(){return e.handleToggle("References")}},"References",r.a.createElement(Oc.a,{className:this.state.references_arr?"arrow-icon down":"arrow-icon",size:"15"})),r.a.createElement(kc.a.Collapse,{eventKey:"0"},r.a.createElement(ka.a.Body,{className:"no-padding"},r.a.createElement("div",{className:"row",style:{marginRight:0,marginLeft:0,marginBottom:15}},r.a.createElement("div",{className:"col-md-4"},r.a.createElement("p",{class:"no-margin viewCus_label"},"Guarantor 1 Name"),r.a.createElement("p",{class:"no-margin viewCus_labelVal"},this.props.data.references[0].guarantor1_name.value)),r.a.createElement("div",{className:"col-md-4"},r.a.createElement("p",{class:"no-margin viewCus_label"},"Guarantor 2 Name"),r.a.createElement("p",{class:"no-margin viewCus_labelVal"},this.props.data.references[1].guarantor2_name.value)),r.a.createElement("div",{className:"col-md-4"},r.a.createElement("p",{class:"no-margin viewCus_label"},"LC Name"),r.a.createElement("p",{class:"no-margin viewCus_labelVal"},this.props.data.references[2].lc_name.value)),r.a.createElement("div",{className:"col-md-4"},r.a.createElement("div",{className:"d-flex align-items-center justify-content-around pAlign_mid"},r.a.createElement("p",{class:"no-margin viewCus_label no-padding"},"Guarantor 1 Doc"),r.a.createElement(Oa,{className:"img-fluid",image_path:De(this.props.data.references[0].guarantor1_doc_full_path.value,this.props.data.references[0].guarantor1_doc.value),file_name:this.props.data.references[0].guarantor1_doc.value}))),r.a.createElement("div",{className:"col-md-4"},r.a.createElement("div",{className:"d-flex align-items-center justify-content-around pAlign_mid"},r.a.createElement("p",{class:"no-margin viewCus_label no-padding"},"Guarantor 2 Doc"),r.a.createElement(Oa,{className:"img-fluid",image_path:De(this.props.data.references[1].guarantor2_doc_full_path.value,this.props.data.references[1].guarantor2_doc.value),file_name:this.props.data.references[1].guarantor2_doc.value}))),r.a.createElement("div",{className:"col-md-4"},r.a.createElement("div",{className:"d-flex align-items-center justify-content-around pAlign_mid"},r.a.createElement("p",{class:"no-margin viewCus_label no-padding"},"Letter from LC"),r.a.createElement(Oa,{className:"img-fluid",image_path:De(this.props.data.references[2].lc_doc_full_path.value,this.props.data.references[2].lc_doc.value),file_name:this.props.data.references[2].lc_doc.value})))))))))),r.a.createElement("div",{className:"kyc-card row"},r.a.createElement("div",{className:"col-md-12"},r.a.createElement(kc.a,{defaultActiveKey:"0"},r.a.createElement(ka.a,null,r.a.createElement(kc.a.Toggle,{style:{backgroundColor:"#3D3E53",color:"white",fontSize:18},as:ka.a.Header,eventKey:"0",onClick:function(){return e.handleToggle("Consent")}},"Data Consent",r.a.createElement(Oc.a,{className:this.state.consent_arr?"arrow-icon down":"arrow-icon",size:"15"})),r.a.createElement(kc.a.Collapse,{eventKey:"0"},r.a.createElement(ka.a.Body,{className:"no-padding"},r.a.createElement("div",{className:"row",style:{marginRight:0,marginLeft:0,marginBottom:15}},r.a.createElement("div",{className:"col-md-12"},r.a.createElement("div",{className:"row no-margin justify-content-around"},r.a.createElement("div",{className:"col-md-4"},r.a.createElement("p",{class:"no-margin viewCus_label"},"Consent Signed Date"),r.a.createElement("p",{class:"no-margin viewCus_labelVal"},ve(this.props.lead_data.consent_signed_date))),r.a.createElement("div",{className:"col-md-4"},r.a.createElement("p",{class:"no-margin viewCus_label"},"View PDF"),r.a.createElement("span",null,r.a.createElement(lt.a,{onClick:function(){e.handlePdfModal(e.props.lead_data.consent_json.signed_consent_path,"Data Consent PDF")}},"View")))))))))))),r.a.createElement("div",{className:"kyc-card row"},r.a.createElement("div",{className:"col-md-12"},r.a.createElement(kc.a,{defaultActiveKey:"0"},r.a.createElement(ka.a,null,r.a.createElement(kc.a.Toggle,{style:{backgroundColor:"#3D3E53",color:"white",fontSize:18},as:ka.a.Header,eventKey:"0",onClick:function(){return e.handleToggle("Agreements")}},"Agreements",r.a.createElement(Oc.a,{className:this.state.aggreements_arr?"arrow-icon down":"arrow-icon",size:"15"})),r.a.createElement(kc.a.Collapse,{eventKey:"0"},r.a.createElement(ka.a.Body,{className:"no-padding"},r.a.createElement("div",{className:"row",style:{marginRight:0,marginLeft:0,marginBottom:15}},this.props.data.agreements.map(function(t,a){return r.a.createElement("div",{className:"col-md-12"},r.a.createElement("fieldset",{class:"fieldStyle_auditKYC"},r.a.createElement("legend",{class:"w-auto text-labelblue no-margin",style:{fontSize:15}},Ze(t.acc_purpose,"account_purpose")+" Agreement"),r.a.createElement("div",{className:"row no-margin"},r.a.createElement("div",{className:"col-md-4"},r.a.createElement("p",{class:"no-margin viewCus_label"},"Agreement Doc ID"),r.a.createElement("p",{class:"no-margin viewCus_labelVal"},t.aggr_doc_id)),r.a.createElement("div",{className:"col-md-4"},r.a.createElement("p",{class:"no-margin viewCus_label"},"Agreement type"),r.a.createElement("p",{class:"no-margin viewCus_labelVal"},t.aggr_type)),r.a.createElement("div",{className:"col-md-4"},r.a.createElement("p",{class:"no-margin viewCus_label"},"View PDF"),r.a.createElement("span",null,r.a.createElement(lt.a,{onClick:function(){e.handlePdfModal(t.aggr_file_path,"Agreement PDF")}},"View"))))))}))))))))),r.a.createElement(rt.a,{show:this.state.showModal,onHide:this.handleCloseModal,size:"m"},r.a.createElement(rt.a.Header,{closeButton:!0,show:this.state.showModal},r.a.createElement(rt.a.Title,null," Reassign Auditor ")),r.a.createElement(rt.a.Body,null,r.a.createElement("div",{className:"form-group row mx-0 mb-2 p-3 "},r.a.createElement("div",{for:"",className:"col-sm-5 font-weight-bold text-white reset-padding"}," Assign Audit to"),r.a.createElement("div",{className:"col-sm-7 reset-padding"},r.a.createElement("div",{className:"mb-2"},r.a.createElement("select",{className:"form-control",id:"auditor",onChange:function(t){e.handleChange(t)}},r.a.createElement("option",{selected:!0,value:""},"Auditor"),this.state.auditor_dd),r.a.createElement("div",{className:"control-me"}))))),r.a.createElement(rt.a.Footer,null,r.a.createElement(lt.a,{onClick:this.handleModalAssignAuditor},"Assign"))),"42_retrieve_holder_name"==this.props.lead_data.status&&r.a.createElement("div",{className:"row justify-content-center",style:{marginTop:20,backgroundColor:"white"}},r.a.createElement("div",{className:"col-md-12",style:{backgroundColor:"rgba(255, 0, 0, .4)"}},r.a.createElement("p",{style:{color:"#01062c",fontSize:"14px",marginBottom:5,padding:5},class:"text-center"},"NOTE"),r.a.createElement("p",{style:{color:"#01062c",fontSize:"12px"},class:" text-center"},"Please click on the RETRIEVE HOLDER NAME button under Agent Info section and then proceed with the KYC process"))))):r.a.createElement("div",null)}}]),a}(ut),Mc=a(45);function Tc(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(u.a)(e);if(t){var r=Object(u.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(m.a)(this,a)}}var Hc=function(e){Object(d.a)(a,e);var t=Tc(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={lead:{},to_edit:!1,reassignModal:!1,rejectModal:!1,audit_lead:{},view_cust_id:!1,add_review:"",remarks_arr:[],holder_name_mismatch:!1,holder_name_mismatch_reason:"",holder_name:"",tp_holder_name_n_owner_match:!1,auditor_name_list:{}},e.handleComponentDataChange=function(t){e.setState(t)},e.remarks_handler=function(){e.id=e.props.match.params.id,uc(e.req({id:e.id})).then(function(t){console.log("response outsidex",t),e.resp(t),t&&"success"===t.status&&(console.log("remark handler res insides sucess",t),e.setState({remarks_arr:t.data}))})},e.input_Handler=function(t){e.setState({add_review:t.target.value})},e.cmt_handler=function(t){""==e.state.add_review?alert("enter valid remarks"):(t.preventDefault(),e.id=e.props.match.params.id,pc(e.req({id:e.id,cmt:e.state.add_review})),e.remarks_handler(),e.setState({add_review:""}))},e.handleKYCEdit=function(t){var a=e.state.audit_lead;a.lead_id=e.id,a.reassign_reason=a.reason,e.validate_fields(a)&&jc(e.req(a)).then(function(t){e.resp(t),t&&"success"===t.status&&(alert(t.message),e.setState({to_edit:!0}))})},e.handleReassignModalOpen=function(t){e.setState({reassignModal:!0})},e.handleRejectModalOpen=function(t){e.setState({rejectModal:!0})},e.handleModalClose=function(){e.setState({reassignModal:!1,rejectModal:!1})},e.handleAudit=function(t){if(e.state.tp_holder_name_n_owner_match)alert("The Third party holder name matches with the owner's name. Reassign to the RM and register it as owner account.");else if("skip"==e.state.audit_kyc_line[e.state.lead.cust_reg_json.account.acc_prvdr_code.value]||e.state.holder_name)if("skip"==e.state.audit_kyc_line[e.state.lead.cust_reg_json.account.acc_prvdr_code.value]||!e.state.holder_name_mismatch||e.state.audit_lead.account_holder_name_proof||e.state.holder_name_mismatch_reason){t.preventDefault();var a=e.state.lead.cust_reg_json;a.lead_id=e.state.lead.id,a.flow_rel_mgr_id=e.state.lead.flow_rel_mgr_id,a.acc_purpose=e.state.lead.acc_purpose,Ac(e.req({lead_id:e.state.lead.id,holder_name_mismatch_reason:e.state.holder_name_mismatch_reason},!0)).then(function(t){e.resp(t),t&&("success"===t.status?(e.setState({cust_id:t.data}),e.setState({toList:!0}),alert(t.message),window.open("/borrower/indiv/view/".concat(e.state.lead.cust_reg_json.cust_id),"_blank"),e.setState({to_edit:!0})):alert(t.message+"\n"+JSON.stringify(t.data)))})}else alert("Please enter the required fields");else alert("Please enter the required fields")},e.handleRejectKYC=function(t){t.preventDefault();var a=e.state.audit_lead;(a.lead_id=e.id,a.reject_reason=a.reason,e.validate_fields(a))&&(window.confirm("Are you sure to mark KYC as failed and close the lead?")&&Lc(e.req(a)).then(function(t){e.resp(t),t&&("success"===t.status?(alert(t.message),e.setState({to_edit:!0})):alert(t.message+"\n"+JSON.stringify(t.data)))}))},e.handleCaptureModal=function(t){e.setState({capture_modal:!0})},e}return Object(o.a)(a,[{key:"componentWillMount",value:function(){var e=this;this.id=this.props.match.params.id,sc(this.req({id:this.id})).then(function(t){if(e.resp(t),t&&"success"===t.status){var a=t.data,n=!1;a.cust_reg_json.cust_id&&("kyc"==a.type&&a.status>="59"||"re_kyc"==a.type)&&(n=!0),e.setState({lead:a,view_cust_id:n}),a.cust_reg_json.account.hasOwnProperty("holder_name")&&e.setState({holder_name:a.cust_reg_json.account.holder_name})}}),this.remarks_handler();var t=C("audit_kyc_line");this.setState({audit_kyc_line:t})}},{key:"validate_fields",value:function(e){return!(!e.remarks||!e.reason)||(alert("Please enter required fields"),!1)}},{key:"render",value:function(){var e=this;return E("lead","audit_kyc")?r.a.createElement(r.a.Fragment,null,"  ",console.log("this.state.add_review",this.state.remarks_arr),this.state.to_edit?r.a.createElement(Y.a,{to:"/lead/edit/".concat(this.props.match.params.id)}):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"container max-width containerTopmargin no-padding",style:{maxWidth:"1500px"}},r.a.createElement(ka.a,null,r.a.createElement(ka.a.Header,{style:{backgroundColor:"#01062c",color:"white"}},r.a.createElement("div",{className:"d-flex justify-content-between"},r.a.createElement("h4",{className:"no-margin headerTitle preHeaderpad padL_15"},this.props.title),this.state.lead.auditor_name&&r.a.createElement("h4",{style:{paddingRight:"15px"},className:"no-margin headerTitle preHeaderpad"},"KYC Reviewer : ",this.state.lead.auditor_name," "),("app_support"==v("role_codes")||"it_admin"==v("role_codes"))&&this.state.lead.auditor_name&&r.a.createElement("div",{className:"mt-3"},r.a.createElement(lt.a,{disabled:this.state.calling_api,className:"mr-3  text-white",variant:"primary",onClick:this.handleCaptureModal},"Reassign Auditor")))),r.a.createElement(ka.a.Header,null,r.a.createElement("div",{className:"d-flex justify-content-between"},r.a.createElement("h4",{style:{fontSize:"18px"}},"Type : ",Ze(this.state.lead.type,"lead_type")),r.a.createElement("h4",{style:{fontSize:"18px"}},"Status : ",Ze(this.state.lead.status)))),this.state.view_cust_id||"re_kyc"==this.state.lead.type&&r.a.createElement(ka.a.Header,{style:{color:"white"}},r.a.createElement("div",{className:"d-flex justify-content-between"},this.state.view_cust_id?r.a.createElement("h4",{style:{fontSize:"18px"}},"Cust ID : ",r.a.createElement(ee.a,{to:"/borrower/indiv/view/"+this.state.lead.cust_reg_json.cust_id,target:"_blank"},r.a.createElement("span",{style:{fontSize:"18px"}},this.state.lead.cust_reg_json.cust_id))):r.a.createElement("div",null),"re_kyc"==this.state.lead.type&&r.a.createElement("h4",{style:{fontSize:"18px"}},"Reason : ",Ze(this.state.lead.kyc_reason)))),r.a.createElement("div",{className:"row "},r.a.createElement("div",{className:"col-md-8 col-sm-8 col-lg-8"},r.a.createElement("div",{className:"remarks-scroll"},r.a.createElement(ka.a.Body,null,r.a.createElement(Bc,{onAuditDataChange:function(t){return e.handleComponentDataChange(t)},lead_data:this.state.lead,submit_btn:this.state.calling_api,handleKYCEdit:this.handleKYCEdit,handleRejectKYC:this.handleRejectKYC,handleModalClose:this.handleModalClose,lead_id:this.id,id:"audit_lead",reassignModal:this.state.reassignModal,rejectModal:this.state.rejectModal,acc_purpose:this.state.lead.acc_purpose,data:this.state.lead.cust_reg_json,onComponentChange:this.handleComponentChange,showModal:this.state.capture_modal,assign_audit_id:this.state.audit_lead}),"50_pending_audit"===this.state.lead.status&&r.a.createElement("div",{className:"form-group row reset-margin justify-content-center py-4"},r.a.createElement(lt.a,{className:"btn btn-primary ml-5",disabled:this.state.calling_api,onClick:this.handleReassignModalOpen},"Assign to RM"),this.state.lead.audited_by==v("user_id")&&r.a.createElement(lt.a,{className:"btn btn-primary ml-5",disabled:this.state.calling_api,onClick:this.handleAudit},"Approve KYC"))))),r.a.createElement("div",{className:"col-sm-12 col-lg-4 col-md-4 "},console.log("get userid",v("user_id")),r.a.createElement("div",{className:"remark-discussion"},r.a.createElement("div",{className:"remarks-scroll"},r.a.createElement("h5",{className:"text-center",style:{color:"white"}},"Discussions"),this.state.remarks_arr.length>0?r.a.createElement(r.a.Fragment,null,this.state.remarks_arr.map(function(e,t){return r.a.createElement("div",{key:t},null==e.action&&e.cmtr_id!==v("user_id")&&r.a.createElement("div",{key:t,class:"d-flex flex-row"},r.a.createElement("div",{className:"p-2 no-padding remarks_audit_chat"},r.a.createElement("div",{className:"d-flex no-padding",style:{width:"250px"}},r.a.createElement("p",{className:"no-margin",style:{padding:"5px"}}," ",r.a.createElement("span",null,r.a.createElement("b",null,e.cmtr_name," "),": "),e.cmt)),r.a.createElement("div",{className:"d-flex flex-row-reverse no-padding"},r.a.createElement("div",{className:"p-2 no-padding",style:{fontSize:"9px",marginRight:"3px",opacity:"0.4"}},e.cmtr_time)))),null!=e.action&&r.a.createElement("div",{key:t},r.a.createElement("div",{className:"d-flex justify-content-center"},r.a.createElement("div",{className:"remarks-action"},r.a.createElement("p",{className:"no-margin no-padding ",style:{color:"black"}},e.action),r.a.createElement("p",{className:" no-margin text-center",style:{fontSize:"9px",marginRight:"3px",opacity:"0.5"}},e.cmtr_time)))),null==e.action&&e.cmtr_id==v("user_id")&&r.a.createElement("div",{key:t,class:"d-flex flex-row-reverse"},r.a.createElement("div",{className:"p-2 no-padding remarks-rm-chat ",style:{color:"white"}},r.a.createElement("div",{className:"d-flex",style:{width:"250px"}},r.a.createElement("p",{className:"no-margin",style:{padding:"5px 5px 0px 5px"}}," ",e.cmt)),r.a.createElement("div",{className:"d-flex flex-row-reverse"},r.a.createElement("div",{className:"p-2 no-padding",style:{fontSize:"9px",marginRight:"3px",opacity:"0.5"}},e.cmtr_time)))))})):r.a.createElement("div",{className:"text-center",style:{color:"white"}}," No discussions here")),r.a.createElement("div",{class:"input-group mb-3 d-flex pointer"},r.a.createElement("input",{type:"text",className:"remarks_input",placeholder:"Remarks",value:this.state.add_review,onChange:function(t){return e.input_Handler(t)}}),r.a.createElement("div",{class:"input-group-append"},r.a.createElement("h5",{className:"no-margin icon-head",style:{},onClick:function(t){return e.cmt_handler(t)}}," ",r.a.createElement(Mc.b,{className:"send_icon",color:"green"}))))))))))):r.a.createElement(Y.a,{to:"/"})}}]),a}(dt),qc=function(e){return P("/api/admin/pre_appr/remove",e)};function zc(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(u.a)(e);if(t){var r=Object(u.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(m.a)(this,a)}}var Ic=function(e){Object(d.a)(a,e);var t=zc(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={pre_appr:{},columns:[],pre_appr_list:[],pre_appr_table:"hide_div",copy:[]},e.handleRemoveApproval=function(t){0!=window.confirm("Are you sure to remove the Pre-approval")&&qc(e.req({cust_id:t.target.id})).then(function(e){e&&"success"===e.status&&(alert(e.message),window.location.reload())})},e.changeHandler=function(t){var a=t,n=e.state.pre_appr_list.filter(function(e){return null!==e.cust_id&&e.cust_id.toLowerCase().includes(a.toLowerCase())});e.setState(function(e){return e.copy=n})},e}return Object(o.a)(a,[{key:"componentWillMount",value:function(){var e,t=this;(e=this.req({list_pre_appr:!0}),P("/api/admin/pre_appr/list",e)).then(function(e){if(t.resp(e),e){if("success"===e.status){t.resp(e);var a=t.state.columns;a=[{Header:"Cust ID",id:"cust_id",accessor:function(e){return r.a.createElement(ee.a,{to:"/borrower/indiv/view/"+e.cust_id,target:"_blank"},e.cust_id)}},{Header:"Pre-approved By",id:"rm_name",accessor:function(e){return e.rm_name}},{Header:"Approval Count",id:"appr_count",accessor:function(e){return r.a.createElement("div",{className:"tableAmount_centerAlign"},e.appr_count)}},{Header:"Approval Start Date",id:"appr_start_date",accessor:function(e){return ge(e.appr_start_date)}},{Header:"Approval Expiry Date",id:"appr_exp_date",accessor:function(e){return ge(e.appr_exp_date)}},{Header:"Status",id:"status",accessor:function(e){return Ze(e.status)}},{Header:"Action",id:"id",accessor:function(e){return r.a.createElement("input",{id:e.cust_id,type:"button",value:"Remove Pre-approval",onClick:t.handleRemoveApproval,className:"btn btn-primary btn-std ".concat(t.configure_btn_style)})}}]}t.setState({columns:a,pre_appr_list:e.data,copy:e.data,pre_appr_table:"show_div"})}})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"container containerTopmargin max-width no-padding"},r.a.createElement("div",null,r.a.createElement("h5",{className:"no-margin headerTitle"},"Pre-approved Customers"),this.state.pre_appr_list.length>0&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"d-flex justify-content-between align-items-center",style:{padding:5}},r.a.createElement("p",{className:"no-margin text-white"},r.a.createElement("b",null,"Total Entries : ",this.state.pre_appr_list.length)),r.a.createElement("div",{style:{position:"relative"}},r.a.createElement("i",{class:"fa-solid fa-magnifying-glass search_pos"}),r.a.createElement("input",{placeholder:"Search here",className:"search_posInput",onChange:function(t){return e.changeHandler(t.target.value)}}))),r.a.createElement(za,{showPag:!0,minRow:0,row_data:void 0!==this.state.copy?this.state.copy:[],column_data:this.state.columns,resizable:!1,defaultSorted:[{id:"name",desc:!1}],exportCSV:!0,csvFile:"Pre-approved Customers",csvData:this.state.copy?this.state.copy:[]}))))}}]),a}(dt);function Wc(){Wc=function(){return e};var e={},t=Object.prototype,a=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",l=n.asyncIterator||"@@asyncIterator",c=n.toStringTag||"@@toStringTag";function s(e,t,a){return Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(k){s=function(e,t,a){return e[t]=a}}function o(e,t,a,n){var r=t&&t.prototype instanceof m?t:m,l=Object.create(r.prototype),c=new N(n||[]);return l._invoke=function(e,t,a){var n="suspendedStart";return function(r,l){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===r)throw l;return C()}for(a.method=r,a.arg=l;;){var c=a.delegate;if(c){var s=E(c,a);if(s){if(s===d)continue;return s}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===n)throw n="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);n="executing";var o=i(e,t,a);if("normal"===o.type){if(n=a.done?"completed":"suspendedYield",o.arg===d)continue;return{value:o.arg,done:a.done}}"throw"===o.type&&(n="completed",a.method="throw",a.arg=o.arg)}}}(e,a,c),l}function i(e,t,a){try{return{type:"normal",arg:e.call(t,a)}}catch(k){return{type:"throw",arg:k}}}e.wrap=o;var d={};function m(){}function u(){}function p(){}var _={};s(_,r,function(){return this});var h=Object.getPrototypeOf,f=h&&h(h(x([])));f&&f!==t&&a.call(f,r)&&(_=f);var v=p.prototype=m.prototype=Object.create(_);function g(e){["next","throw","return"].forEach(function(t){s(e,t,function(e){return this._invoke(t,e)})})}function y(e,t){var n;this._invoke=function(r,l){function c(){return new t(function(n,c){!function n(r,l,c,s){var o=i(e[r],e,l);if("throw"!==o.type){var d=o.arg,m=d.value;return m&&"object"==typeof m&&a.call(m,"__await")?t.resolve(m.__await).then(function(e){n("next",e,c,s)},function(e){n("throw",e,c,s)}):t.resolve(m).then(function(e){d.value=e,c(d)},function(e){return n("throw",e,c,s)})}s(o.arg)}(r,l,n,c)})}return n=n?n.then(c,c):c()}}function E(e,t){var a=e.iterator[t.method];if(void 0===a){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method))return d;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var n=i(a,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,d;var r=n.arg;return r?r.done?(t[e.resultName]=r.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):r:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function b(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function w(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function N(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(b,this),this.reset(!0)}function x(e){if(e){var t=e[r];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,l=function t(){for(;++n<e.length;)if(a.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return l.next=l}}return{next:C}}function C(){return{value:void 0,done:!0}}return u.prototype=p,s(v,"constructor",p),s(p,"constructor",u),u.displayName=s(p,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===u||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,s(e,c,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},g(y.prototype),s(y.prototype,l,function(){return this}),e.AsyncIterator=y,e.async=function(t,a,n,r,l){void 0===l&&(l=Promise);var c=new y(o(t,a,n,r),l);return e.isGeneratorFunction(a)?c:c.next().then(function(e){return e.done?e.value:c.next()})},g(v),s(v,c,"Generator"),s(v,r,function(){return this}),s(v,"toString",function(){return"[object Generator]"}),e.keys=function(e){var t=[];for(var a in e)t.push(a);return t.reverse(),function a(){for(;t.length;){var n=t.pop();if(n in e)return a.value=n,a.done=!1,a}return a.done=!0,a}},e.values=x,N.prototype={constructor:N,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!e)for(var t in this)"t"===t.charAt(0)&&a.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(a,n){return c.type="throw",c.arg=e,t.next=a,n&&(t.method="next",t.arg=void 0),!!n}for(var r=this.tryEntries.length-1;r>=0;--r){var l=this.tryEntries[r],c=l.completion;if("root"===l.tryLoc)return n("end");if(l.tryLoc<=this.prev){var s=a.call(l,"catchLoc"),o=a.call(l,"finallyLoc");if(s&&o){if(this.prev<l.catchLoc)return n(l.catchLoc,!0);if(this.prev<l.finallyLoc)return n(l.finallyLoc)}else if(s){if(this.prev<l.catchLoc)return n(l.catchLoc,!0)}else{if(!o)throw new Error("try statement without catch or finally");if(this.prev<l.finallyLoc)return n(l.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&a.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var l=r;break}}l&&("break"===e||"continue"===e)&&l.tryLoc<=t&&t<=l.finallyLoc&&(l=null);var c=l?l.completion:{};return c.type=e,c.arg=t,l?(this.method="next",this.next=l.finallyLoc,d):this.complete(c)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.finallyLoc===e)return this.complete(a.completion,a.afterLoc),w(a),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.tryLoc===e){var n=a.completion;if("throw"===n.type){var r=n.arg;w(a)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,a){return this.delegate={iterator:x(e),resultName:t,nextLoc:a},"next"===this.method&&(this.arg=void 0),d}},e}function Yc(){var e=Object(n.useState)(!1),t=Object(_a.a)(e,2),a=t[0],l=t[1],c=Object(n.useState)(!1),s=Object(_a.a)(c,2),o=s[0],i=s[1],d=Object(n.useState)("Select the year"),m=Object(_a.a)(d,2),u=m[0],p=m[1],_=Object(n.useState)({start_date:null,end_date:null}),h=Object(_a.a)(_,2),f=h[0],v=h[1],g="/api/admin";console.log(g);var y=function(e){"openModalbySelect"===e?l(!0):"openModalbyYear"===e?i(!0):(i(!1),l(!1))},E=function(){var e=Object(j.a)(Wc().mark(function e(){var t;return Wc().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:l(!1),t=T(g+"/report/disbursal_time_report",{date_range:f}),console.log(t<"response after clicked");case 3:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();console.log(u,"Selected year"),console.log(f,"date_range is ");var b=function(e,t){var a=ce()(e).format("YYYY-MM-DD");v(Object(X.a)({},f,Object(k.a)({},t,a)))};return r.a.createElement("div",{className:"container containerTopmargin max-width no-padding"},r.a.createElement("div",{class:"btn-group",role:"group","aria-label":"Basic mixed styles example"},r.a.createElement("button",{type:"button",class:"btn btn-danger"},"Today"),r.a.createElement("button",{type:"button",class:"btn btn-warning"},"Yesterday"),r.a.createElement("button",{type:"button",class:"btn btn-success"},"By Weeks"),r.a.createElement("button",{type:"button",class:"btn btn-info"},"By Months"),r.a.createElement("button",{type:"button",class:"btn btn-default",onClick:function(){return y("openModalbyYear")}},"By Year"),r.a.createElement("button",{type:"button",class:"btn btn-primary",onClick:function(){return y("openModalbySelect")}},"Select From")),r.a.createElement("div",{className:"table-responsive"}),r.a.createElement(rt.a,{show:a,onHide:function(){return y("closeModal")}},r.a.createElement(rt.a.Header,{closeButton:!0},r.a.createElement(rt.a.Title,null,r.a.createElement("h3",null,"Select the date range"))),r.a.createElement(rt.a.Body,null,r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-6"},r.a.createElement("label",{className:"no-margin"},"From"),r.a.createElement(Ht.a,{closeOnSelect:!0,dateFormat:"DD MMM YYYY",timeFormat:!1,required:"required",onChange:function(e){return b(e,"start_date")}})),r.a.createElement("div",{className:"col-6"},r.a.createElement("label",{className:"no-margin"},"To"),r.a.createElement(Ht.a,{closeOnSelect:!0,dateFormat:"DD MMM YYYY",timeFormat:!1,required:"required",onChange:function(e){return b(e,"end_date")}}))))),r.a.createElement(rt.a.Footer,null,r.a.createElement(lt.a,{variant:"primary",onClick:function(){return E()}},"Search"),r.a.createElement(lt.a,{style:{marginLeft:10},onClick:function(){return y("closeModal")},variant:"secondary"},"Close"))),r.a.createElement(rt.a,{show:o,onHide:function(){return y("closeModal")}},r.a.createElement(rt.a.Header,{closeButton:!0},r.a.createElement(rt.a.Title,null,r.a.createElement("h3",null,"Select the year"))),r.a.createElement(rt.a.Body,null,r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row justify-content-around"},r.a.createElement("div",{className:"col-6"},r.a.createElement("select",{id:"cs_model_code",className:"form-control",required:"required",onChange:function(e){return function(e){p(e)}(e.target.value)},value:u},r.a.createElement("option",{value:"2020"},"2020"),r.a.createElement("option",{value:"2021"},"2021"),r.a.createElement("option",{value:"2022"},"2022")))))),r.a.createElement(rt.a.Footer,null,r.a.createElement(lt.a,{variant:"primary",onClick:function(){return E()}},"Search"),r.a.createElement(lt.a,{style:{marginLeft:10},onClick:function(){return y("closeModal")},variant:"secondary"},"Close"))))}function Vc(){var e=Object(n.useState)([]),t=Object(_a.a)(e,2),a=t[0],l=t[1],c=Object(n.useState)([]),s=Object(_a.a)(c,2),o=s[0],i=s[1],d=Object(n.useState)(!0),m=Object(_a.a)(d,2),u=m[0],p=m[1],_=Object(n.useState)({country:"Global",country_code:"*"}),h=Object(_a.a)(_,2),f=h[0],g=h[1],y=Object(n.useState)({active_currency:""}),E=Object(_a.a)(y,2),b=E[0],w=E[1],N=Object(n.useState)({currency_change:!1,active_currency:"",active_currency_val:""}),x=Object(_a.a)(N,2),C=x[0],S=x[1],O=Object(n.useState)({}),A=Object(_a.a)(O,2),j=A[0],R=A[1],D=Object(n.useState)(null),F=Object(_a.a)(D,2),L=F[0],P=F[1],B=Object(n.useState)("Float Advance"),M=Object(_a.a)(B,2),T=(M[0],M[1],Object(n.useState)([])),H=Object(_a.a)(T,2),q=H[0],z=H[1];Object(n.useEffect)(function(){var e,t;g((e={},Object(k.a)(e,"country","Global"),Object(k.a)(e,"country_code","*"),e)),S((t={},Object(k.a)(t,"currency_change",!1),Object(k.a)(t,"active_currency","USD"),Object(k.a)(t,"active_currency_val",""),t))},[]),Object(n.useEffect)(function(){var e={report_type:"management_dashboard_live",time_zone:v("market").time_zone};if(Nl(e).then(function(e){if("success"===e.status){l(e.data.records);var t=e.data.currency_data;R(t),w(Object(k.a)({},"active_currency","*"!==f.country_code?t[v("market").country_code].currency_code:"USD"));var a=e.data.records.filter(function(e){return e.country_code===f.country_code});i(a)}}),"*"!=f.country_code){var t={country_code:f.country_code,time_zone:v("market").time_zone,status:""};_r(Object(X.a)({},t,{status:"enabled",biz_account:!0})).then(function(e){if(e&&"success"===e.status){var t=[];e.data.list.map(function(e){return t.push(e.acc_prvdr_code)}),z(t)}})}},[g,l,_r]);var I=v("market_list"),W=function(e,t){var n;if(p(!0),P(null),"*"!=e){var r;S((r={},Object(k.a)(r,"currency_change","UGA"!==e&&"RWA"!==e),Object(k.a)(r,"active_currency",j[e].currency_code),Object(k.a)(r,"active_currency_val",""),r));var l={country_code:e,time_zone:"UGA"===e?"EAT":"CAT",status:""};_r(Object(X.a)({},l,{status:"enabled",biz_account:!0})).then(function(e){if(e&&"success"===e.status){var t=[];e.data.list.map(function(e){return t.push(e.acc_prvdr_code)}),z(t)}})}else{var c;S((c={},Object(k.a)(c,"currency_change",!1),Object(k.a)(c,"active_currency","USD"),Object(k.a)(c,"active_currency_val",""),c))}g((n={},Object(k.a)(n,"country",t),Object(k.a)(n,"country_code",e),n));var s="*"!==e?j[e].currency_code:"USD";w(Object(k.a)({},"active_currency",s)),console.log(f,s);var o=a.filter(function(t){return t.country_code===e}),d="*"!==e?o.filter(function(e){return null===e.acc_prvdr_code}):o;i(d)},Y=function(e){p(!1),P(e);var t=a.filter(function(e){return e.country_code===f.country_code}).filter(function(t){return t.acc_prvdr_code===e});i(t)},V=function(e){var t;if("USD"===e||"EUR"===e)S((t={},Object(k.a)(t,"currency_change",!0),Object(k.a)(t,"active_currency",e),Object(k.a)(t,"active_currency_val",j[f.country_code].forex_rates[e]),t));else if("UGX"===e||"RWF"===e){var a;S((a={},Object(k.a)(a,"currency_change",!1),Object(k.a)(a,"active_currency",e),Object(k.a)(a,"active_currency_val",""),a))}};return 0!==o.length?r.a.createElement("div",{className:"containerTopmargin max-width no-padding",id:"convertPDF"},r.a.createElement("div",{style:{backgroundColor:"#1a2035"},className:"manage_dashContainer"},r.a.createElement("div",{className:"row no-margin align-items-center"},r.a.createElement("div",{className:"col-md-8 no-padding"},r.a.createElement(Be,{val:o[0].report_date})),r.a.createElement("div",{className:"col-md-4 no-padding d-flex justify-content-end"},"/management-dashboard/print"===window.location.pathname?r.a.createElement("div",null,r.a.createElement("button",{className:"btn-std",style:{borderRadius:5,border:"none",backgroundColor:"#fff"},onClick:function(){return window.print()}},"Export to PDF"),r.a.createElement(ee.a,{to:"/management-dashboard",className:"btn-std",style:{marginLeft:15,borderRadius:5,border:"none",backgroundColor:"#fff"}},"Back")):r.a.createElement(ee.a,{className:"btn-std",style:{marginLeft:15,borderRadius:5,border:"none",backgroundColor:"#fff"},to:"/management-dashboard/print"},"Export To PDF"))),r.a.createElement("div",{className:"row no-margin"},r.a.createElement("div",{className:"col-md-3 no-padding"},r.a.createElement("div",{className:"d-flex align-items-center"},r.a.createElement("div",null,r.a.createElement("label",{className:"no-margin"},"Market")),r.a.createElement("div",{className:"dropdown country_dropDownbg",style:{marginLeft:30}},r.a.createElement("div",{className:"dropdown-toggle d-flex align-items-center dropdown_trig justify-content-between",type:"button",id:"dropdownMenuButton1","data-bs-toggle":"dropdown","aria-expanded":"false"},"*"!=f.country_code?r.a.createElement(ae.a,{id:"market",name:f.country_code,format:"png",pngSize:48,shiny:!1,alt:f.country_code,basePath:"/img/flags"}):r.a.createElement(Mc.a,{size:20,style:{margin:"4px 0px"}}),r.a.createElement("span",null,f.country),r.a.createElement("span",null,r.a.createElement("i",{className:"fa-solid fa-chevron-down"}))),r.a.createElement("ul",{className:"dropdown-menu","aria-labelledby":"dropdownMenuButton1",style:{width:160}},r.a.createElement("li",{className:"country_selector",onClick:function(){return W("*","Global")}},r.a.createElement(Mc.a,{size:20,style:{margin:"4px 0px"}}),r.a.createElement("span",{style:{paddingLeft:15}},"Global")),I.map(function(e,t){return r.a.createElement("li",{key:t,className:"country_selector",onClick:function(){return W(e.country_code,e.country)}},r.a.createElement(ae.a,{id:"market",name:e.country_code,format:"png",pngSize:48,shiny:!1,alt:e.country_code,basePath:"/img/flags"}),r.a.createElement("span",{style:{paddingLeft:5}},e.country))}))))),"*"!==f.country_code&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"col-md-7 no-padding d-flex align-items-center justify-content-end"},r.a.createElement("p",{className:"no-margin text-white",style:{fontWeight:600}},""===C.active_currency_val?"":"1 ".concat(C.active_currency," ="),"\xa0"),r.a.createElement("p",{className:"no-margin text-white",style:{fontWeight:600}},""===C.active_currency_val?"":Number(1/C.active_currency_val).toFixed(3),"\xa0",""===C.active_currency_val?"":j[f.country_code].currency_code)),r.a.createElement("div",{className:"col-md-2 no-padding"},r.a.createElement("ul",{className:"manDash_currencySelector no-padding no-margin justify-content-end align-items-center"},r.a.createElement("li",{className:"border_left",style:{backgroundColor:"USD"===C.active_currency?"lightgray":""},onClick:function(){return V("USD")}},r.a.createElement("p",{className:"no-margin"},"USD")),r.a.createElement("li",{style:{backgroundColor:"EUR"===C.active_currency?"lightgray":""},onClick:function(){return V("EUR")}},r.a.createElement("p",{className:"no-margin"},"EUR")),r.a.createElement("li",{style:{backgroundColor:C.active_currency===b.active_currency?"lightgray":""},className:"border_right",onClick:function(){return V(b.active_currency)}},r.a.createElement("p",{className:"no-margin"},b.active_currency)))))),r.a.createElement("div",{className:"row no-margin justify-content-between",style:{paddingBottom:15,paddingTop:15}},r.a.createElement("div",{className:"col-md-8 no-padding"},r.a.createElement("div",{className:"d-flex align-items-center"},r.a.createElement("label",{className:"no-margin",style:{paddingRight:15}},"Provider"),r.a.createElement("button",{className:"filterBtns allBtn_size ".concat(null===L?"":"opac_50"),style:{height:30,width:60,cursor:u?"pointer":"default",marginRight:15},key:0,onClick:function(){return Y(null)}},"ALL"),"*"!==f.country_code&&q.map(function(e,t){return r.a.createElement("div",{style:{height:30,width:60,cursor:u?"pointer":"default",marginRight:15},className:null===L||L===e?"":"opac_50",key:t,onClick:function(){return Y(e)}},r.a.createElement("img",{className:"img-fluid",src:"/img/".concat(e,"_logo_color.png"),alt:e}))}))),r.a.createElement("div",{className:"col-md-4 no-padding d-flex justify-content-around align-items-center"}))),r.a.createElement("div",{className:"manDash_main"},r.a.createElement("div",{className:"manDash_bgAbs"}),r.a.createElement("div",null,r.a.createElement("div",{className:"manDash_contentBox"},r.a.createElement("div",{className:"manDash_content"},r.a.createElement("p",{className:"no-margin manDash_header"},"Business Volume"),r.a.createElement("div",{className:"row no-margin"},r.a.createElement("div",{className:"col-md-6"},r.a.createElement("div",{className:"manDash_roundBox"},r.a.createElement("p",{className:"no-margin text-center"},"Loans Disbursed"),r.a.createElement("p",{className:" no-margin text-center",style:{fontSize:"14px"}},r.a.createElement("b",null,o[0].tot_disb_fas)))),r.a.createElement("div",{className:"col-md-6"},r.a.createElement("div",{className:"manDash_roundBox"},r.a.createElement("p",{className:"no-margin text-center"},"Amount Disbursed"),r.a.createElement(Pe,{val:C.currency_change?o[0].tot_disb_amt*C.active_currency_val:o[0].tot_disb_amt,unit:C.active_currency,align_center:!0,position:"top"}))),r.a.createElement("div",{className:"col-md-6"},r.a.createElement("div",{className:"manDash_roundBox"},r.a.createElement("p",{className:"no-margin text-center"},"Average Loan Size"),r.a.createElement(Pe,{val:C.currency_change?o[0].avg_fa_size*C.active_currency_val:o[0].avg_fa_size,unit:C.active_currency,align_center:!0,position:"top"}))),r.a.createElement("div",{className:"col-md-6"},r.a.createElement("div",{className:"manDash_roundBox"},r.a.createElement("p",{className:"no-margin text-center"},"Average Loan Duration"),r.a.createElement(Pe,{val:o[0].avg_fa_duration,unit:"Days",align_center:!0,position:"top"}))),r.a.createElement("div",{className:"col-md-6"},r.a.createElement("div",{className:"manDash_roundBox"},r.a.createElement("p",{className:"no-margin text-center"},"Gross Transaction Value"),r.a.createElement(Pe,{val:C.currency_change?o[0].gross_txn_value*C.active_currency_val:o[0].gross_txn_value,unit:C.active_currency,align_center:!0,position:"top"}))),r.a.createElement("div",{className:"col-md-6"},r.a.createElement("div",{className:"manDash_roundBox",style:{position:"relative"}},r.a.createElement("p",{className:"no-margin text-center"},"Revenue"),r.a.createElement("div",{style:{position:"absolute",top:5,right:5}}),r.a.createElement(Pe,{val:C.currency_change?o[0].revenue*C.active_currency_val:o[0].revenue,unit:C.active_currency,align_center:!0,position:"top"}))))),r.a.createElement("div",{className:"manDash_content white_bg"},r.a.createElement("p",{className:"no-margin manDash_header white_bg"},"Impact"),r.a.createElement("div",{className:"d-flex justify-content-around",style:{marginTop:15}},r.a.createElement("div",null,r.a.createElement("span",null,"Female - ",(100*o[0].female_perc).toFixed(1),"%")),r.a.createElement("div",null,r.a.createElement("span",null,"Youth - ",(100*o[0].youth_perc).toFixed(1),"%")),r.a.createElement("div",null,r.a.createElement("span",null,"Male - ",(100*o[0].male_perc).toFixed(1),"%"))),r.a.createElement("div",{className:"row",style:{marginTop:15,marginBottom:15,marginLeft:0,marginRight:0}},r.a.createElement("div",{className:"col-md-4"},r.a.createElement(Pe,{val:o[0].supported_custs,unit:"",position:"left"})),r.a.createElement("div",{className:"col-md-8"},r.a.createElement("span",null,"Supported businesses"))),r.a.createElement("div",{className:"row",style:{marginTop:15,marginBottom:15,marginLeft:0,marginRight:0}},r.a.createElement("div",{className:"col-md-4"},r.a.createElement(Pe,{val:C.currency_change?o[0].tot_retail_txn_val*C.active_currency_val:o[0].tot_retail_txn_val,unit:C.active_currency,position:"left"})),r.a.createElement("div",{className:"col-md-8"},r.a.createElement("span",null,"Amount of retail txns facilitated"))),r.a.createElement("div",{className:"row",style:{marginTop:15,marginBottom:15,marginLeft:0,marginRight:0}},r.a.createElement("div",{className:"col-md-4"},r.a.createElement(Pe,{val:C.currency_change?o[0].cust_revenue*C.active_currency_val:o[0].cust_revenue,unit:C.active_currency,position:"left"})),r.a.createElement("div",{className:"col-md-8"},r.a.createElement("span",null,"Revenue generated monthly"))),r.a.createElement("div",{className:"row",style:{marginTop:15,marginBottom:15,marginLeft:0,marginRight:0}},r.a.createElement("div",{className:"col-md-4"},r.a.createElement(Pe,{val:o[0].tot_retail_txn_count,unit:"",position:"left"})),r.a.createElement("div",{className:"col-md-8"},r.a.createElement("span",null,"No. of retail txns facilitated"))),r.a.createElement("div",{className:"row",style:{marginTop:15,marginBottom:15,marginLeft:0,marginRight:0}},r.a.createElement("div",{className:"col-md-4"},r.a.createElement(Pe,{val:o[0].people_benefited,unit:"",position:"left"})),r.a.createElement("div",{className:"col-md-8"},r.a.createElement("span",null,"No. of retail users benifited"))))),r.a.createElement("div",{className:"cust_metrics"},r.a.createElement("p",{className:"no-margin manDash_header"},"Customer Metrics"),r.a.createElement("div",{className:"row no-margin align-items-center d-flex justify-content-between p-3",style:{paddingBottom:15}},r.a.createElement("div",{className:"col-md-3"},r.a.createElement("div",{className:"manDash_roundBox"},r.a.createElement("p",{className:"no-margin text-center"},"Registered  Customers"),r.a.createElement("p",{className:"no-margin text-center",style:{fontWeight:600}},o[0].reg_count))),r.a.createElement("div",{className:"col-md-3"},r.a.createElement("div",{className:"manDash_roundBox",style:{position:"relative"}},r.a.createElement("p",{className:"no-margin text-center"},"Enabled Customers"),r.a.createElement("div",{className:"row no-margin"},r.a.createElement("div",{className:"boderSeprator col-md-6"},r.a.createElement("p",{className:"no-margin text-right",style:{fontWeight:600}},o[0].enable_count),r.a.createElement("p",{className:"no-margin text-right"},(o[0].enable_count/(o[0].reg_count/100)).toFixed(1),"%")),r.a.createElement("div",{className:"col-md-6"},r.a.createElement("p",{className:"  no-margin text-gray",style:{fontWeight:600}},o[0].reg_count-o[0].enable_count),r.a.createElement("p",{className:"no-margin text-gray"},((o[0].reg_count-o[0].enable_count)/(o[0].reg_count/100)).toFixed(1),"%"))),r.a.createElement("div",{style:{position:"absolute",top:5,right:5}},r.a.createElement(Pe,{val:"Customers whose profiles are enabled on the system, meaning they can apply for loans (out of registered customers)",unit:"",align_center:!0,position:"top",notify:!0})))),r.a.createElement("div",{className:"col-md-3"},r.a.createElement("div",{className:"manDash_roundBox",style:{position:"relative"}},r.a.createElement("p",{className:"no-margin text-center"},"Active Customers"),r.a.createElement("div",{className:"row no-margin"},r.a.createElement("div",{className:"boderSeprator col-md-6"},r.a.createElement("p",{className:"no-margin text-right",style:{fontWeight:600}},o[0].active_count),r.a.createElement("p",{className:"no-margin text-right"},(o[0].active_count/(o[0].reg_count/100)).toFixed(1),"%")),r.a.createElement("div",{className:"col-md-6"},r.a.createElement("p",{className:"no-margin text-gray",style:{fontWeight:600}},o[0].reg_count-o[0].active_count),r.a.createElement("p",{className:"no-margin text-gray"},((o[0].reg_count-o[0].active_count)/(o[0].reg_count/100)).toFixed(1),"%"))),r.a.createElement("div",{style:{position:"absolute",top:5,right:5}},r.a.createElement(Pe,{val:"These are customers who have had a disbursal made to them over the last 30 days (out of registered customers)",unit:"",align_center:!0,position:"top",notify:!0})))))),r.a.createElement("div",{className:"cust_metrics"},r.a.createElement("p",{className:"no-margin manDash_header"},"Portfolio Performance"),r.a.createElement("p",{className:"no-margin manDash_subHeader"},"Outstanding Portfolio"),r.a.createElement("div",{className:"row manDash_subContent"},r.a.createElement("div",{className:"col-md-4 custMetricsbox_pad"},r.a.createElement("p",{className:"no-margin"},"Principal"),r.a.createElement(Pe,{val:C.currency_change?o[0].principal_os*C.active_currency_val:o[0].principal_os,unit:C.active_currency,align_center:!1,position:"left"})),r.a.createElement("div",{className:"col-md-4 custMetricsbox_pad"},r.a.createElement("p",{className:"no-margin"},"Fee"),r.a.createElement(Pe,{val:C.currency_change?o[0].fee_os*C.active_currency_val:o[0].fee_os,unit:C.active_currency,align_center:!1,position:"left"})),r.a.createElement("div",{className:"col-md-4 custMetricsbox_pad"},r.a.createElement("p",{className:"no-margin"},"Outstanding Loans"),r.a.createElement("p",{className:"no-margin",style:{fontWeight:600}},o[0].os_count)),r.a.createElement("div",{className:"col-md-4 custMetricsbox_pad"},r.a.createElement("p",{className:"no-margin"},"Ontime Repayments"),r.a.createElement("p",{className:"no-margin",style:{fontWeight:600}},(100*o[0].ontime_repayment_rate).toFixed(1),"%")),"investor"!==v("role_codes")&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"col-md-4 custMetricsbox_pad"},r.a.createElement("p",{className:"no-margin"},"Overdue Amount"),r.a.createElement(Pe,{val:C.currency_change?o[0].od_amount*C.active_currency_val:o[0].od_amount,unit:C.active_currency,align_center:!1,position:"left"}),r.a.createElement("p",{className:"no-margin"},(o[0].od_amount/(o[0].principal_os/100)).toFixed(1),"%")),r.a.createElement("div",{className:"col-md-4 custMetricsbox_pad"},r.a.createElement("p",{className:"no-margin"},"Overdues"),r.a.createElement("p",{className:"no-margin",style:{fontWeight:600}},o[0].od_count),r.a.createElement("p",{className:"no-margin"},(o[0].od_count/(o[0].os_count/100)).toFixed(1),"%")))),r.a.createElement("p",{className:"no-margin manDash_subHeader"},"Portfolio at Risk"),r.a.createElement("div",{className:"row manDash_subContent"},r.a.createElement("div",{className:"col-md-3 custMetricsbox_pad"},r.a.createElement("p",{className:"no-margin"},"PAR 15 - 30"),r.a.createElement(Pe,{val:C.currency_change?(o[0].par15-o[0].par30)*C.active_currency_val:o[0].par15-o[0].par30,unit:C.active_currency,align_center:!1,position:"left"}),r.a.createElement("p",{className:"no-margin"},((o[0].par15-o[0].par30)/(o[0].principal_os/100)).toFixed(1)," % of OS Principal")),r.a.createElement("div",{className:"col-md-3 custMetricsbox_pad"},r.a.createElement("p",{className:"no-margin"},"PAR 30 - 60"),r.a.createElement(Pe,{val:C.currency_change?(o[0].par30-o[0].par60)*C.active_currency_val:o[0].par30-o[0].par60,unit:C.active_currency,align_center:!1,position:"left"}),r.a.createElement("p",{className:"no-margin"},((o[0].par30-o[0].par60)/(o[0].principal_os/100)).toFixed(1)," % of OS Principal")),"investor"!==v("role_codes")&&r.a.createElement("div",{className:"col-md-3 custMetricsbox_pad"},r.a.createElement("p",{className:"no-margin"},"PAR 60 - 90"),r.a.createElement(Pe,{val:C.currency_change?(o[0].par60-o[0].par90)*C.active_currency_val:o[0].par60-o[0].par90,unit:C.active_currency,align_center:!1,position:"left"}),r.a.createElement("p",{className:"no-margin"},((o[0].par60-o[0].par90)/(o[0].principal_os/100)).toFixed(1)," % of OS Principal")),"investor"!==v("role_codes")&&r.a.createElement("div",{className:"col-md-3 custMetricsbox_pad",style:{position:"relative"}},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-6"},"NPL"),r.a.createElement("div",{className:"col-6"},r.a.createElement(Pe,{val:"10% of (PAR 30 - PAR 60) + 50% of (PAR 60 - PAR 90) + PAR 90",unit:"",align_center:!0,position:"top",notify:!0}))),r.a.createElement(Pe,{val:C.currency_change?o[0].npl*C.active_currency_val:o[0].npl,unit:C.active_currency,align_center:!1,position:"left"}),r.a.createElement("p",{className:"no-margin"},(o[0].npl/(o[0].principal_os/100)).toFixed(1)," % of OS Principal")))),r.a.createElement("div",{className:"cust_metrics"},r.a.createElement("p",{className:"no-margin manDash_header"},"Best Performance"),r.a.createElement("div",{className:"row bestPer_box"},r.a.createElement("div",{className:"col-md-6 custMetricsbox_pad"},r.a.createElement("div",{className:"bestPer_contentbox"},r.a.createElement("p",null,"Maximum Outstanding"),r.a.createElement("div",{className:"d-flex align-items-center justify-content-between"},r.a.createElement(Pe,{val:C.currency_change?Number(o[0].max_os.split(",")[0])*C.active_currency_val:Number(o[0].max_os.split(",")[0]),unit:C.active_currency,align_center:!1,position:"left"}),r.a.createElement("p",{className:"no-margin"},ve(o[0].max_os.split(",")[1],!1))))),r.a.createElement("div",{className:"col-md-6 custMetricsbox_pad"},r.a.createElement("div",{className:"bestPer_contentbox"},r.a.createElement("p",null,"Maximum Ontime Repayment"),r.a.createElement("div",{className:"d-flex align-items-center justify-content-between"},r.a.createElement("p",{className:"no-margin",style:{fontWeight:600}},Number(100*o[0].max_ontime_repay_rate.split(",")[0]).toFixed(1),"%"),r.a.createElement("p",{className:"no-margin"},ve(o[0].max_ontime_repay_rate.split(",")[1],!1)))))))))):r.a.createElement("div",null,"Loading...")}var Uc=a(85),Gc=a.n(Uc),Jc=function(){var e,t=Object(n.useState)({country:"Global",country_code:"*"}),a=Object(_a.a)(t,2),l=a[0],c=a[1],s=["USD","EUR"],o=Object(n.useState)(null),i=Object(_a.a)(o,2),d=(i[0],i[1],Object(n.useState)([])),m=Object(_a.a)(d,2),u=m[0],p=m[1],_=Object(n.useState)({}),h=Object(_a.a)(_,2),f=h[0],g=h[1],y=Object(n.useState)(!0),E=Object(_a.a)(y,2),b=E[0],w=E[1],N=Object(n.useState)(null),x=Object(_a.a)(N,2),C=x[0],S=x[1],O=Object(n.useState)([]),A=Object(_a.a)(O,2),j=A[0],R=A[1],D=Object(n.useState)({from:"",to:""}),F=Object(_a.a)(D,2),L=F[0],P=F[1],B=Object(n.useState)({currency_change:!1,active_currency:"",active_currency_val:""}),M=Object(_a.a)(B,2),T=M[0],H=M[1],q=Object(n.useState)([]),z=Object(_a.a)(q,2),I=z[0],W=z[1],Y=Object(n.useState)({active_currency:""}),V=Object(_a.a)(Y,2),U=V[0],G=V[1],J=Object(n.useState)(!1),K=Object(_a.a)(J,2),Q=K[0],Z=K[1],$=Object(n.useState)(""),te=Object(_a.a)($,2),ne=te[0],re=te[1],le=Object(n.useState)(),se=Object(_a.a)(le,2),oe=se[0],ie=se[1],de=Object(n.useState)(),me=Object(_a.a)(de,2),ue=me[0],pe=me[1];Object(n.useEffect)(function(){var e,t;Ne(),Z(!0),c((e={},Object(k.a)(e,"country","Global"),Object(k.a)(e,"country_code","*"),e)),H((t={},Object(k.a)(t,"currency_change",!1),Object(k.a)(t,"active_currency",v("market").currency_code),Object(k.a)(t,"active_currency_val",""),t));var a={country_code:v("market").country_code,time_zone:v("market").time_zone,status:""};_r(Object(X.a)({},a,{status:"enabled",biz_account:!0})).then(function(e){if(e&&"success"==e.status){var t=[];e.data.list.map(function(e){return t.push(e.acc_prvdr_code)}),R(t)}}),fe(),Ce()},[_r]),Object(n.useEffect)(function(){oe&&he("USD")},[oe,l]);var _e=function(e){S(e),w(!1),ve(u,l.country_code,e)},he=function(e){var t,a;if("*"!=l.country_code){if("USD"===e||"EUR"===e)H((t={},Object(k.a)(t,"currency_change",!0),Object(k.a)(t,"active_currency",e),Object(k.a)(t,"active_currency_val",f[l.country_code].forex_rates[e]),t));else if("UGX"===e||"RWF"===e){var n;H((n={},Object(k.a)(n,"currency_change",!1),Object(k.a)(n,"active_currency",e),Object(k.a)(n,"active_currency_val",""),n))}}else H((a={},Object(k.a)(a,"currency_change",!0),Object(k.a)(a,"active_currency",e),Object(k.a)(a,"active_currency_val",1),a))},fe=function(){var e={country_code:"*",report_type:"management_dashboard_monthly",time_zone:v("market").time_zone};wl(e).then(function(e){if(e&&"success"==e.status){p(e.data.records),ve(e.data.records,l.country_code,C);var t=e.data.currency_data;g(t),ie(Math.floor(100*Math.random())+1),G(Object(k.a)({},"active_currency",t[v("market").country_code].currency_code))}})},ve=function(e,t,a){var n=e.filter(function(e){return e.country_code==t});if(n.length>0){var r=n.filter(function(e){return e.acc_prvdr_code==a});W(r)}else W([])},ge=v("market_list"),ye=function(e,t){var a;if(c((a={},Object(k.a)(a,"country",t),Object(k.a)(a,"country_code",e),a)),w(!0),S(null),"*"!=e){var n;H((n={},Object(k.a)(n,"currency_change",e!=l.country_code),Object(k.a)(n,"active_currency",f[e].currency_code),Object(k.a)(n,"active_currency_val",""),n));var r=f[e].currency_code;G(Object(k.a)({},"active_currency",r))}else{var s;H((s={},Object(k.a)(s,"currency_change",e!=l.country_code),Object(k.a)(s,"active_currency","USD"),Object(k.a)(s,"active_currency_val",""),s))}he("USD");var o={country_code:e,time_zone:"UGA"===e?"EAT":"CAT",status:""};_r(Object(X.a)({},o,{status:"enabled",biz_account:!0})).then(function(e){if(e&&"success"===e.status){var t=[];e.data.list.map(function(e){return t.push(e.acc_prvdr_code)}),R(t)}}),ve(u,e,null)},Ee=Object(n.useState)({series:[68,32],options:(e={chart:{width:380,type:"donut"},plotOptions:{pie:{startAngle:-90,endAngle:270}},dataLabels:{enabled:!0},stroke:{colors:["#20233f"]},fill:{type:"gradient"},labels:["Female","Male"]},Object(k.a)(e,"dataLabels",{dropShadow:{blur:3,opacity:.8}}),Object(k.a)(e,"responsive",[{breakpoint:480,options:{chart:{width:200},legend:{position:"bottom"}}}]),e)}),be=Object(_a.a)(Ee,2),we=be[0],Ne=(be[1],function(e){var t=(e=e?new Date(e):new Date).getMonth()+1,a=e.getMonth(),n=e.getFullYear(),r=n+"-"+(t<=9?"0"+t:t),l=n+"-"+(a<=9?"0"+a:a);P(Object(X.a)({},L,{from:r,to:l})),re(r)}),xe=function(e,t){Z(!1);var a=new Date(e),n=a.getMonth()+1,r=a.getMonth()+1,l=a.getFullYear()+"-"+(n<=9?"0"+n:n),c=a.getFullYear()+"-"+(r<=9?"0"+r:r),s="";s="from"==t?Object(X.a)({},L,{from:l}):Object(X.a)({},L,{to:c}),P(s)},Ce=function(){kl({time_zone:v("market").time_zone,country_code:l.country_code}).then(function(e){if(e&&"success"===e.status){var t=e.data;t=ce()(t).format("DD MMM YYYY"),pe(t)}})};return r.a.createElement("div",{className:"containerTopmargin max-width no-padding",id:"convertPDF",style:{backgroundColor:"#1a2035"}},r.a.createElement("div",{style:{padding:"/monthly-report/print"===window.location.pathname?"0px 15px":"0px"}},r.a.createElement("h2",{className:"text-white",style:{fontSize:"32px"}},"Monthly Report ",r.a.createElement("span",null,"(",ue,")")),r.a.createElement("div",{style:{marginTop:"20px"}},r.a.createElement("div",{className:"row no-margin"},r.a.createElement("div",{className:"col-md-12 col-sm-12 col-lg-7 no-padding"},r.a.createElement("div",{className:"d-flex align-items-center"},r.a.createElement("p",{className:"text-white no-margin"},"Month"),r.a.createElement("input",{className:"monthly_report_input",type:"month",value:L.from,max:ne,onChange:function(e){return xe(e.target.value,"from")}}),r.a.createElement("p",{className:"text-white no-margin",style:{paddingLeft:"20px"}},"V/S"),r.a.createElement("input",{className:"monthly_report_input",type:"month",max:L.from,value:L.to,onChange:function(e){return xe(e.target.value,"to")},style:{marginRight:"20px"}}),r.a.createElement("button",{type:"button",class:"btn btn-info  align-items-center no-margin ",onClick:function(){return function(){var e={country_code:l.country_code,report_type:"management_dashboard_monthly",report_month:L.from.replace(/-/g,""),vs_month:L.to.replace(/-/g,""),time_zone:v("market").time_zone};wl(e).then(function(e){if(e){if("success"==e.status){p(e.data.records),Z(!0),ve(e.data.records,l.country_code,C);var t=e.data.currency_data;g(t),G(Object(k.a)({},"active_currency",t[l.country_code]?t[l.country_code].currency_code:"USD"));var a,n=T.active_currency;s.includes(n)&&H((a={},Object(k.a)(a,"currency_change",!0),Object(k.a)(a,"active_currency",n),Object(k.a)(a,"active_currency_val",t[l.country_code]?t[l.country_code].forex_rates[n]:1),a)),S(null)}}else Ne()})}()},style:{padding:"7px 18px"}},"Submit"))),r.a.createElement("div",{className:"col-md-12 col-sm-12 col-lg-5 no-padding monthly_report_currency_selector"},r.a.createElement("div",{className:"d-flex justify-content-end"},"*"!=l.country_code&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"d-flex align-items-center",style:{marginRight:"15px"}},r.a.createElement("p",{className:"no-margin text-white",style:{fontWeight:600}},""===T.active_currency_val?"":"1 ".concat(T.active_currency," ="),"\xa0"),r.a.createElement("p",{className:"no-margin text-white",style:{fontWeight:600}},""===T.active_currency_val?"":Number(1/T.active_currency_val).toFixed(3),"\xa0",""===T.active_currency_val?"":f[l.country_code].currency_code)),r.a.createElement("ul",{className:"monthly_report_currencySelector no-padding no-margin justify-content-end align-items-center"},s.map(function(e,t){return r.a.createElement("li",{className:T.active_currency===e?" active-currency":" ",style:{cursor:b?"pointer":"default"},onClick:function(){return he(e)}},r.a.createElement("p",{className:"no-margin"},e))}),r.a.createElement("li",{className:T.active_currency===U.active_currency?" border_right active-currency":" border_right",style:{cursor:b?"pointer":"default"},onClick:function(){return he(U.active_currency)}},r.a.createElement("p",{className:"no-margin"},U.active_currency)))),r.a.createElement("div",{className:"no-padding d-flex justify-content-end"},"/monthly-report/print"===window.location.pathname?r.a.createElement("div",null,r.a.createElement("button",{className:"btn-std",style:{borderRadius:5,border:"none",backgroundColor:"#fff",marginLeft:"10px"},onClick:function(){return window.print()}},"Export to PDF"),r.a.createElement(ee.a,{to:"/monthly-report",className:"btn-std",style:{marginLeft:15,borderRadius:5,border:"none",backgroundColor:"#fff"}},"Back")):r.a.createElement(ee.a,{className:"btn-std",style:{marginLeft:15,borderRadius:5,border:"none",backgroundColor:"#fff"},to:"/monthly-report/print"},"Export To PDF"))))),r.a.createElement("div",{className:"row no-margin"},r.a.createElement("div",{className:"col-md-6 col-sm-12 col-lg-6 no-padding"},r.a.createElement("div",{className:"d-flex align-items-center",style:{marginTop:"20px"}},r.a.createElement("div",null,r.a.createElement("label",{className:"no-margin"},"Market")),r.a.createElement("div",{className:"dropdown country_dropDownbg"},r.a.createElement("div",{className:"dropdown-toggle d-flex align-items-center dropdown_trig justify-content-between",type:"button",id:"dropdownMenuButton1","data-bs-toggle":"dropdown","aria-expanded":"false"},"*"!=l.country_code?r.a.createElement(r.a.Fragment,null,r.a.createElement(ae.a,{id:"market",name:l.country_code,format:"png",pngSize:48,shiny:!1,alt:l.country_code,basePath:"/img/flags"}),r.a.createElement("span",null,l.country),r.a.createElement("span",null,r.a.createElement("i",{className:"fa-solid fa-chevron-down"}))):r.a.createElement(r.a.Fragment,null,r.a.createElement(Mc.a,{size:20,style:{margin:"4px 0px"}}),r.a.createElement("span",null,l.country),r.a.createElement("span",null,r.a.createElement("i",{className:"fa-solid fa-chevron-down"})))),r.a.createElement("ul",{className:"dropdown-menu","aria-labelledby":"dropdownMenuButton1",style:{width:200}},r.a.createElement("li",{className:"country_selector",onClick:function(){return ye("*","Global")}},r.a.createElement(Mc.a,{size:20,style:{margin:"4px 0px"}}),r.a.createElement("span",{style:{paddingLeft:15}},"Global")),ge.map(function(e,t){return r.a.createElement("li",{key:t,className:"country_selector",onClick:function(){return ye(e.country_code,e.country)}},r.a.createElement(ae.a,{id:"market",name:e.country_code,format:"png",pngSize:48,shiny:!1,alt:e.country_code,basePath:"/img/flags"}),r.a.createElement("span",{style:{paddingLeft:5}},e.country))}))))),r.a.createElement("div",{className:"col-md-6 col-sm-12 col-lg-6 no-padding "},"*"!=l.country_code&&r.a.createElement("div",{className:"d-flex justify-content-end align-items-center "},r.a.createElement("label",{className:"no-margin"},"Provider"),r.a.createElement("button",{className:"filterBtns allBtn_size ".concat(null===C?"":"opac_50"),style:{height:30,width:60,cursor:b?"pointer":"default",marginRight:15},key:0,onClick:function(){return _e(null)}},"ALL"),j.map(function(e,t){return r.a.createElement("div",{style:{height:30,width:60,cursor:b?"pointer":"default",marginRight:"10px"},className:null===C||C===e?"":"opac_50",key:t,onClick:function(){return _e(e)}},r.a.createElement("img",{className:"img-fluid",src:"/img/".concat(e,"_logo_color.png"),alt:e}))})))),Q&&I.length>0?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"row no-margin"},r.a.createElement("div",{className:"col-md-12 col-sm-12 col-lg-5 no-padding "},r.a.createElement("div",{className:"monthly_report_business_volume"},r.a.createElement("div",{className:"d-flex align-items-center monthly_report_busiess_volume_innerheader"},r.a.createElement("img",{src:"/img/businessvolume.png",style:{height:"27px"},alt:"portfilo"}),r.a.createElement("h2",{className:"text-white no-margin",style:{paddingLeft:"10px"}},"Business Volume")),r.a.createElement("div",{className:"row no-margin",style:{padding:"20px 0 "}},r.a.createElement("div",{class:"col-md-6"},r.a.createElement("div",{className:"business_volume_blueborder"},r.a.createElement("p",{className:"text-white ",style:{fontSize:"15px"}},"Amount Disbursed"),r.a.createElement("div",{className:"d-flex justify-content-between"},r.a.createElement("div",{className:"d-flex roundoffvalue"},r.a.createElement(Pe,{val:T.currency_change?I[0].tot_disb_val.value*T.active_currency_val:I[0].tot_disb_val.value,unit:T.active_currency,align_center:!1,position:"top"})),r.a.createElement(Pe,{from:"monthly",currency:T.active_currency,vs_value:T.currency_change?I[0].tot_disb_val.vs_value*T.active_currency_val:I[0].tot_disb_val.vs_value,val:(I[0].tot_disb_val.value-I[0].tot_disb_val.vs_value)/I[0].tot_disb_val.vs_value*100,unit:"%",position:"top"}),"                                    ")),r.a.createElement("div",{className:"business_volume_blueborder"},r.a.createElement("p",{className:"text-white ",style:{fontSize:"16px"}},"Loans Disbursed"),r.a.createElement("div",{className:"d-flex justify-content-between"},r.a.createElement("div",{className:"d-flex roundoffvalue"},r.a.createElement("b",null,r.a.createElement("p",{className:"no-margin text-white"},I[0].tot_disb_count.value," "))),r.a.createElement(Pe,{from:"monthly",vs_value:I[0].tot_disb_count.vs_value,val:(I[0].tot_disb_count.value-I[0].tot_disb_count.vs_value)/I[0].tot_disb_count.vs_value*100,unit:"%",position:"top"}))),r.a.createElement("div",{className:"business_volume_blueborder",style:{marginBottom:"inherit"}},r.a.createElement("p",{className:"text-white ",style:{fontSize:"16px"}},"Loans Settled"),r.a.createElement("div",{className:"d-flex justify-content-between"},r.a.createElement("div",{className:"d-flex roundoffvalue"},r.a.createElement("b",null,r.a.createElement("p",{className:"no-margin text-white"},I[0].tot_fa_settled_count.value," "))),r.a.createElement(Pe,{from:"monthly",vs_value:I[0].tot_fa_settled_count.vs_value,val:(I[0].tot_fa_settled_count.value-I[0].tot_fa_settled_count.vs_value)/I[0].tot_fa_settled_count.vs_value*100,unit:"%",position:"top",style:{color:"white"}})))),r.a.createElement("div",{class:"col-md-6"},r.a.createElement("div",{className:"business_volume_blueborder"},r.a.createElement("p",{className:"text-white ",style:{fontSize:"16px"}},"Gross Transaction Value"),r.a.createElement("div",{className:"d-flex justify-content-between"},r.a.createElement("div",{className:"d-flex roundoffvalue"},r.a.createElement(Pe,{val:T.currency_change?I[0].gross_txn_val.value*T.active_currency_val:I[0].gross_txn_val.value,unit:T.active_currency,align_center:!1,position:"left"})),r.a.createElement(Pe,{from:"monthly",currency:T.active_currency,vs_value:T.currency_change?I[0].gross_txn_val.vs_value*T.active_currency_val:I[0].gross_txn_val.vs_value,val:(I[0].gross_txn_val.value-I[0].gross_txn_val.vs_value)/I[0].gross_txn_val.vs_value*100,unit:"%",position:"top",style:{color:"white"}}))),r.a.createElement("div",{className:"business_volume_blueborder"},r.a.createElement("p",{className:"text-white ",style:{fontSize:"16px"}},"Revenue"),r.a.createElement("div",{className:"d-flex justify-content-between"},r.a.createElement("div",{className:"d-flex roundoffvalue"},r.a.createElement(Pe,{val:T.currency_change?I[0].revenue.value*T.active_currency_val:I[0].revenue.value,unit:T.active_currency,align_center:!1,position:"left"})),r.a.createElement(Pe,{from:"monthly",currency:T.active_currency,vs_value:T.currency_change?I[0].revenue.vs_value*T.active_currency_val:I[0].revenue.vs_value,val:(I[0].revenue.value-I[0].revenue.vs_value)/I[0].revenue.vs_value*100,unit:"%",position:"top",style:{color:"white"}}))))))),r.a.createElement("div",{className:"col-md-12 col-sm-12 col-lg-7 no-padding monthly_report_porfolio"},r.a.createElement("div",{className:"monthly_report_business_volume",style:{marginLeft:"15px"}},r.a.createElement("div",{className:"d-flex align-items-center  monthly_report_busiess_volume_innerheader"},r.a.createElement("img",{src:"/img/portfolioperformance.png",style:{width:"27px"},alt:"portfilo"}),r.a.createElement("h2",{className:"text-white no-margin ",style:{paddingLeft:"10px"}},"Portfolio Performance ")),r.a.createElement("div",{className:"row no-margin",style:{padding:"10px 0"}},r.a.createElement("div",{className:"col-md-7"},r.a.createElement("div",{className:"monthly_report_outstanding_Figures",style:{}},r.a.createElement("p",{className:"text-white no-margin",style:{fontSize:"17px",padding:" 10px 0px 0px 10px"}},"Outstanding Figures ",r.a.createElement("p",{className:"text-white no-margin",style:{fontSize:"15px"}},"( as on ",ce()(L.from).format("MM Y")==ce()().format("MM Y")?ue:"last day of "+new Date(L.from).toLocaleDateString(void 0,{month:"long"})," ",r.a.createElement("span",null,")"))),r.a.createElement("table",{className:"monthly_report_outstanding_table ",style:{background:"#20233f",width:"100%"}},r.a.createElement("thead",{className:"no-margin",style:{paddingBottom:"0px",lineHeight:"initial",background:"#20233f"}},r.a.createElement("tr",{className:"no-margin"},r.a.createElement("th",{scope:"col"}),r.a.createElement("th",{scope:"col",style:{color:"white"}},"Count"),r.a.createElement("th",{scope:"col",style:{color:"white"}},"Amount"),r.a.createElement("th",{scope:"col",style:{color:"white"}},"Fee"))),r.a.createElement("tbody",null,r.a.createElement("tr",{style:{background:"#353650"}},r.a.createElement("th",{scope:"row",style:{color:"#bec2c2",paddingLeft:"10px"}},"Outstanding"),r.a.createElement("td",{style:{padding:"10px"}},r.a.createElement("div",{className:"roundoffvalue"},r.a.createElement("p",{className:"text-white no-margin"},I[0].os_count_eom.value)),r.a.createElement(Pe,{from:"monthly",vs_value:I[0].os_count_eom.vs_value,val:(I[0].os_count_eom.value-I[0].os_count_eom.vs_value)/I[0].os_count_eom.vs_value*100,unit:"%",position:"top",style:{color:"white"}})),r.a.createElement("td",null,r.a.createElement("div",{className:"roundoffvalue"},r.a.createElement(Pe,{val:T.currency_change?I[0].os_val_eom.value*T.active_currency_val:I[0].os_val_eom.value,unit:T.active_currency,align_center:!1,position:"left"})),r.a.createElement(Pe,{from:"monthly",currency:T.active_currency,vs_value:T.currency_change?I[0].os_val_eom.vs_value*T.active_currency_val:I[0].os_val_eom.vs_value,val:(I[0].os_val_eom.value-I[0].os_val_eom.vs_value)/I[0].os_val_eom.vs_value*100,unit:"%",position:"top",style:{color:"white"}})),r.a.createElement("td",null,r.a.createElement("div",{className:"roundoffvalue"},r.a.createElement(Pe,{val:T.currency_change?I[0].os_fee_eom.value*T.active_currency_val:I[0].os_fee_eom.value,unit:T.active_currency,align_center:!1,position:"left"})),r.a.createElement(Pe,{from:"monthly",currency:T.active_currency,vs_value:T.currency_change?I[0].os_fee_eom.vs_value*T.active_currency_val:I[0].os_fee_eom.vs_value,val:(I[0].os_fee_eom.value-I[0].os_fee_eom.vs_value)/I[0].os_fee_eom.vs_value*100,unit:"%",position:"top",style:{color:"white"}}))),"investor"!==v("role_codes")&&r.a.createElement("tr",{style:{background:"#353650"}},r.a.createElement("th",{scope:"row",style:{color:"#bec2c2",paddingLeft:"10px"}},"Overdue"),r.a.createElement("td",{style:{padding:"10px"}},r.a.createElement("div",{className:"roundoffvalue"},r.a.createElement("p",{className:"text-white no-margin"},I[0].od_count.value)),r.a.createElement(Pe,{from:"monthly",check:"check",negativesign:!0,currency:"",vs_value:T.currency_change?I[0].od_count.vs_value*T.active_currency_val:I[0].od_count.vs_value,val:(I[0].od_count.value-I[0].od_count.vs_value)/I[0].od_count.vs_value*100,unit:"%",position:"top",style:{color:"white"}})),r.a.createElement("td",null,r.a.createElement("div",{className:"roundoffvalue"},r.a.createElement(Pe,{val:T.currency_change?I[0].od_amount.value*T.active_currency_val:I[0].od_amount.value,unit:T.active_currency,align_center:!1,position:"left"})),r.a.createElement(Pe,{from:"monthly",negativesign:!0,currency:T.active_currency,vs_value:T.currency_change?I[0].od_amount.vs_value*T.active_currency_val:I[0].od_amount.vs_value,val:(I[0].od_amount.value-I[0].od_amount.vs_value)/I[0].od_amount.vs_value*100,unit:"%",position:"top",style:{color:"white"}})),r.a.createElement("td",null,r.a.createElement("p",{className:"no-margin"}))),r.a.createElement("tr",{style:{background:"#353650"}},r.a.createElement("th",{scope:"row",style:{color:"#bec2c2",paddingLeft:"10px"}},"New Overdue"),r.a.createElement("td",{style:{padding:"10px"}},r.a.createElement("div",{className:"roundoffvalue"},r.a.createElement("p",{className:"no-margin text-white"},I[0].new_overdue_count.value," ")),r.a.createElement(Pe,{from:"monthly",negativesign:!0,currency:"",vs_value:T.currency_change?I[0].new_overdue_count.vs_value*T.active_currency_val:I[0].new_overdue_count.vs_value,val:(I[0].new_overdue_count.value-I[0].new_overdue_count.vs_value)/I[0].new_overdue_count.vs_value*100,unit:"%",position:"top",style:{color:"white"}})),r.a.createElement("td",null,r.a.createElement("div",{className:"roundoffvalue"},r.a.createElement(Pe,{val:T.currency_change?I[0].new_overdue_val.value*T.active_currency_val:I[0].new_overdue_val.value,unit:T.active_currency,align_center:!1,position:"left"})),r.a.createElement(Pe,{from:"monthly",negativesign:!0,currency:T.active_currency,vs_value:T.currency_change?I[0].new_overdue_val.vs_value*T.active_currency_val:I[0].new_overdue_val.vs_value,val:(I[0].new_overdue_val.value-I[0].new_overdue_val.vs_value)/I[0].new_overdue_val.vs_value*100,unit:"%",position:"top",style:{color:"white"}})),r.a.createElement("td",null,r.a.createElement("p",null))))))),r.a.createElement("div",{className:"col-md-5",style:{alignSelf:"center"}},r.a.createElement("div",{className:"month_report_impact"},r.a.createElement("h2",{className:"text-white",style:{fontSize:"20px"}},"Portfolio Metrics"),r.a.createElement("div",{style:{margin:"15px 0px"}},r.a.createElement("div",{className:"d-flex row  justify-content-between",style:{marginBottom:"15px"}},r.a.createElement("div",{className:"d-flex col-7  align-items-center "},r.a.createElement("span",{className:"monthly_report_imact_list"}),r.a.createElement("p",{className:"no-margin text-white"}," Ontime Repayment Rate")),r.a.createElement("div",{className:"d-flex  col-5  justify-content-between align-items-center roundoffvalue"},r.a.createElement(Pe,{val:100*I[0].ontime_repayment_rate.value,unit:I[0].ontime_repayment_rate.unit,position:"top",style:{color:"white"}}))),r.a.createElement("div",{className:"d-flex row justify-content-between",style:{marginBottom:"15px"}},r.a.createElement("div",{className:"d-flex  col-7 align-items-center"},r.a.createElement("span",{className:"monthly_report_imact_list"}),r.a.createElement("p",{className:"no-margin text-white "}," Fee earned per FA")),r.a.createElement("div",{className:"d-flex col-5 align-items-center roundoffvalue"},r.a.createElement(Pe,{noRoundoff:!0,val:T.currency_change?I[0].fee_per_fa.value*T.active_currency_val:I[0].fee_per_fa.value,unit:T.active_currency,align_center:!1,position:"left"}))),r.a.createElement("div",{className:"d-flex row justify-content-between",style:{marginBottom:"15px"}},r.a.createElement("div",{className:"d-flex  col-7 align-items-center"},r.a.createElement("span",{className:"monthly_report_imact_list"}),r.a.createElement("p",{className:"no-margin text-white "},"  Fee earned per ",r.a.createElement("br",null),"customer")),r.a.createElement("div",{className:"d-flex col-5 align-items-center roundoffvalue "},r.a.createElement(Pe,{noRoundoff:!0,val:T.currency_change?I[0].fee_per_cust.value*T.active_currency_val:I[0].fee_per_cust.value,unit:T.active_currency}))),r.a.createElement("div",{className:"d-flex justify-content-between row"},r.a.createElement("div",{className:"d-flex align-items-center col-7"},r.a.createElement("span",{className:"monthly_report_imact_list"}),r.a.createElement("p",{className:"no-margin text-white"},"New Overdue Rate"),r.a.createElement("div",{style:{color:"#4bb6e6",fontSize:"18px",marginLeft:"10px"}},r.a.createElement(Pe,{val:r.a.createElement("div",{className:"no-padding no-margin"},r.a.createElement("p",{className:"no-margin no-padding"},"Number Of NewOverdues"),r.a.createElement("hr",{className:"no-margin no-paddon",style:{borderBottom:"1px solid green"}}),r.a.createElement("p",{className:"no-margin no-padding"},"Total FAs due this month")),unit:"",align_center:!0,position:"bottom",notify:!0}))),r.a.createElement("div",{className:"d-flex align-items-center col-5 roundoffvalue"},r.a.createElement(Pe,{val:100*I[0].due_perc.value,unit:I[0].due_perc.unit,position:"top",style:{color:"white"}})))))))))),r.a.createElement("div",{className:"monthly_report_business_volume"},r.a.createElement("div",{className:"d-flex align-items-center monthly_report_busiess_volume_innerheader"},r.a.createElement("img",{src:"/img/customermetrics.png",style:{width:"27px"},alt:"portfilo"}),r.a.createElement("h2",{className:"text-white no-margin",style:{paddingLeft:"10px"}},"Customer Metrics")),r.a.createElement("div",{className:"row no-margin"},r.a.createElement("div",{className:"col-sm-12 col-lg-4 col-md-6"},r.a.createElement("div",{style:{padding:"20px 15px 10px"}},r.a.createElement("label",null,"Registered Customers"),r.a.createElement("div",{className:"progress",style:{height:"7px "}},r.a.createElement("div",{className:"progress-bar progress-bar-striped ",role:"progressbar",style:{width:"100%",background:"#fd209b"},"aria-valuenow":"25","aria-valuemin":"0","aria-valuemax":"100"})),r.a.createElement("div",{className:"d-flex justify-content-between align-items-center"},r.a.createElement("div",{className:"roundoffvalue"},r.a.createElement("p",{className:"no-margin text-white"},I[0].cust_reg_count.value)),r.a.createElement(Pe,{from:"monthly",vs_value:I[0].cust_reg_count.vs_value,val:(I[0].cust_reg_count.value-I[0].cust_reg_count.vs_value)/I[0].cust_reg_count.vs_value*100,unit:"%",position:"top"}))),r.a.createElement("div",{style:{padding:"20px 15px 10px"}},r.a.createElement("div",{className:"d-flex"},r.a.createElement("label",null,"Active Customers"),r.a.createElement("div",{style:{color:"#4bb6e6",fontSize:"18px",marginLeft:"10px"}},r.a.createElement(Pe,{val:"These are customers who have taken an FA in this month",unit:"",align_center:!0,position:"top",notify:!0}))),r.a.createElement("div",{className:"progress",style:{height:"7px"}},r.a.createElement("div",{className:"progress-bar progress-bar-striped",role:"progressbar",style:{width:"".concat(I[0].cust_active_count.value/I[0].cust_reg_count.value*100,"%"),background:"#9bfd1d"},"aria-valuenow":"25","aria-valuemin":"0","aria-valuemax":"100"})),r.a.createElement("div",{className:"d-flex justify-content-between align-items-center"},r.a.createElement("div",{className:"roundoffvalue"},r.a.createElement("p",{className:"no-margin text-white"},I[0].cust_active_count.value," ")),r.a.createElement(Pe,{from:"monthly",vs_value:I[0].cust_active_count.vs_value,val:(I[0].cust_active_count.value-I[0].cust_active_count.vs_value)/I[0].cust_active_count.vs_value*100,unit:"%",position:"top"}))),r.a.createElement("div",{style:{padding:"20px 15px 10px"}},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-8"},r.a.createElement("div",{className:"business_volume_blueborder"},r.a.createElement("div",{className:"d-flex justify-content-between monthly-report-churnrate"},r.a.createElement("p",{className:"text-white ",style:{fontSize:"15px"}},"Churn Rate"),r.a.createElement(Pe,{val:r.a.createElement("div",{className:"no-padding no-margin"},r.a.createElement("p",{className:"no-margin no-padding"},"Number of customers who have taken FAs last month but not this month"),r.a.createElement("hr",{className:"no-margin no-paddon",style:{borderBottom:"1px solid green"}}),r.a.createElement("p",{className:"no-margin no-padding"},"Active customers last month")),unit:"",align_center:!0,position:"top",notify:!0})),r.a.createElement("div",{className:"d-flex justify-content-between"},r.a.createElement("div",{className:"d-flex roundoffvalue"},r.a.createElement(Pe,{val:100*I[0].cust_churn_perc.value,unit:I[0].cust_churn_perc.unit,position:"top",style:{color:"white"}})),r.a.createElement(Pe,{from:"monthly",negativesign:!0,vs_value:100*I[0].cust_churn_perc.vs_value,val:100*(I[0].cust_churn_perc.value-I[0].cust_churn_perc.vs_value),unit:I[0].cust_churn_perc.unit,position:"top"}))))))),r.a.createElement("div",{className:"col-sm-12 col-lg-4 col-md-6 "},r.a.createElement("div",{style:{padding:"35px 25px 0px"}},r.a.createElement("div",{className:"d-flex justify-content-center",style:{position:"relative"}},r.a.createElement("div",{className:"monthly_report_piechart_inner"},r.a.createElement("h2",{className:"text-white monthly_report_piechart_gender"},"Gender")),r.a.createElement(Gc.a,{options:we.options,series:[100*I[0].female_perc.value,100-100*I[0].female_perc.value],type:"donut",width:320})),r.a.createElement("p",{className:"text-white  monthly_report_piechart_gender",style:{fontSize:"15px",marginTop:"10px"}},"On Registered Customers"))),r.a.createElement("div",{className:"col-md-12 col-lg-4 col-sm-12 ",style:{alignSelf:"center"}},r.a.createElement("div",{className:"month_report_impact"},r.a.createElement("h2",{className:"text-white",style:{marginBottom:"20px"}},"Impact"),r.a.createElement("div",{className:"d-flex justify-content-between row",style:{marginBottom:"15px"}},r.a.createElement("div",{className:"d-flex align-items-center col-7"},r.a.createElement("span",{className:"monthly_report_imact_list_circle",style:{background:"#fd209b"}}),r.a.createElement("p",{className:"no-margin text-white"}," Amount of Retail Transactions")),r.a.createElement("div",{className:"d-flex align-items-center col-5 roundoffvalue"},r.a.createElement(Pe,{val:T.currency_change?I[0].retail_txn_val.value*T.active_currency_val:I[0].retail_txn_val.value,unit:T.active_currency,align_center:!1,position:"left"}))),r.a.createElement("div",{className:"d-flex justify-content-between row",style:{marginBottom:"15px"}},r.a.createElement("div",{className:"d-flex align-items-center col-7"},r.a.createElement("span",{className:"monthly_report_imact_list_circle",style:{background:"#047efa"}}),r.a.createElement("p",{className:"no-margin text-white"}," Count of Retail Transactions")),r.a.createElement("div",{className:"d-flex align-items-center roundoffvalue col-4"},r.a.createElement(Pe,{val:I[0].retail_txn_count.value,unit:"",align_center:!1,position:"left"}))),r.a.createElement("div",{className:"d-flex justify-content-between row",style:{marginBottom:"15px"}},r.a.createElement("div",{className:"d-flex align-items-center col-5"},r.a.createElement("span",{className:"monthly_report_imact_list_circle",style:{background:"#2fd987"}}),r.a.createElement("p",{className:"no-margin text-white"}," Retail Users Benefited")),r.a.createElement("div",{className:"d-flex align-items-center roundoffvalue col-4"},r.a.createElement(Pe,{val:I[0].people_benefited.value,unit:"",align_center:!1,position:"left"}))),r.a.createElement("div",{className:"d-flex justify-content-between row",style:{marginBottom:"15px"}},r.a.createElement("div",{className:"d-flex align-items-center col-7"},r.a.createElement("span",{className:"monthly_report_imact_list_circle",style:{background:"#6342ff"}}),r.a.createElement("p",{className:"no-margin text-white"},"Customer Revenue Generated")),r.a.createElement("div",{className:"d-flex align-items-center roundoffvalue col-5"},r.a.createElement(Pe,{val:T.currency_change?I[0].revenue_by_small_biz.value*T.active_currency_val:I[0].revenue_by_small_biz.value,unit:T.active_currency,align_center:!1,position:"left"})))))))):r.a.createElement("div",{style:{color:"white",textAlign:"center"}}," ",0==I.length?"No data found":" "))))};function Kc(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(u.a)(e);if(t){var r=Object(u.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(m.a)(this,a)}}var Qc=function(e){Object(d.a)(a,e);var t=Kc(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={toggle:!1},n.toggleState=n.toggleState.bind(Object(i.a)(n)),n}return Object(o.a)(a,[{key:"toggleState",value:function(){var e=this;this.setState({toggle:!this.state.toggle},function(){return e.props.set_tog_val(e.state.toggle)})}},{key:"render",value:function(){return r.a.createElement("form",{className:"switch-field"},r.a.createElement("p",{className:"d-flex justify-content-center",style:{color:"white",fontSize:this.props.fontSize+"px"}},this.props.icon,this.props.title),r.a.createElement("input",{type:"radio",id:"switch_left",name:"switchToggle",value:this.props.leftLabel,onClick:this.toggleState,checked:!this.props.val}),r.a.createElement("label",{htmlFor:"switch_left",style:{width:this.props.width+"px"}},this.props.leftLabel),r.a.createElement("input",{type:"radio",id:"switch_right",name:"switchToggle",value:this.props.rightLabel,onClick:this.toggleState,checked:this.props.val}),r.a.createElement("label",{htmlFor:"switch_right",style:{width:this.props.width+"px"}},this.props.rightLabel))}}]),a}(n.Component);function Zc(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(u.a)(e);if(t){var r=Object(u.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(m.a)(this,a)}}var Xc=function(e){Object(d.a)(a,e);var t=Zc(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).updateChartData=function(){var e=void 0===n.props.curr?"":n.props.curr;n.state={series:n.props.data,options:{chart:{width:"100%",height:"80%",zoom:{enabled:!0}},colors:["#00e396"," #ff3154","#fadd17"],plotOptions:{bar:{dataLabels:{position:"top"}}},dataLabels:{enabled:n.props.dataLabel,offsetY:"bar"===n.props.type?-20:0,style:{colors:["#00e396"," #ff3154","#fadd17"]}},stroke:{curve:"smooth",width:1},title:{text:n.props.title,align:"left",style:{color:"#999"}},legend:{height:"100",showForSingleSeries:!0},xaxis:{type:n.props.xaxistype,tickPlacement:"on",lines:{show:!0},labels:{style:{colors:"#999"},formatter:function(e){return ce()(e).format("MMM Y")}}},yaxis:{lines:{show:!0},min:0,forceNiceScale:!0,labels:{style:{colors:"#999"},formatter:function(t){return new Intl.NumberFormat("en-US").format(t)+" "+e}}}}}},n.updateChartData(),n}return Object(o.a)(a,[{key:"render",value:function(){return this.updateChartData(),r.a.createElement("div",{id:"chart"},r.a.createElement(Gc.a,{options:this.state.options,series:this.state.series,type:this.props.type,height:600}))}}]),a}(r.a.Component),$c=a(113);function es(e){var t=e.set_attr,a=e.incl_prvdr,l=e.title,c=e.showMonthRange,s=e.default_start_date,o=void 0===s?"":s,i=e.default_end_date,d=void 0===i?"":i,m=Object(n.useState)([]),u=Object(_a.a)(m,2),p=(u[0],u[1]),_=Object(n.useState)(o),h=Object(_a.a)(_,2),f=h[0],g=h[1],y=Object(n.useState)(d),E=Object(_a.a)(y,2),b=E[0],w=E[1],N=Object(n.useState)(!0),x=Object(_a.a)(N,2),C=x[0],S=x[1],O=Object(n.useState)([]),A=Object(_a.a)(O,2),j=(A[0],A[1],Object(n.useState)({country:"Global",country_code:"*"})),R=Object(_a.a)(j,2),D=R[0],F=R[1],L=Object(n.useState)({active_currency:""}),P=Object(_a.a)(L,2),B=P[0],M=P[1],T=Object(n.useState)({currency_change:!1,active_currency:"",active_currency_val:""}),H=Object(_a.a)(T,2),q=H[0],z=H[1],I=Object(n.useState)({globalval:!1,global_name:"",global_countryCode:null}),W=Object(_a.a)(I,2),Y=W[0],V=(W[1],Object(n.useState)({})),U=Object(_a.a)(V,2),G=U[0],J=U[1],K=Object(n.useState)(null),Q=Object(_a.a)(K,2),Z=Q[0],$=Q[1],ee=Object(n.useState)("Float Advance"),te=Object(_a.a)(ee,2),ne=(te[0],te[1],Object(n.useState)([])),re=Object(_a.a)(ne,2),le=re[0],ce=re[1],se=Object(n.useState)(null),oe=Object(_a.a)(se,2),ie=oe[0],de=oe[1],me=Object(n.useState)(null),ue=Object(_a.a)(me,2),pe=(ue[0],ue[1],Object(n.useState)()),_e=Object(_a.a)(pe,2),he=_e[0],fe=_e[1];Object(n.useEffect)(function(){var e,t;F((e={},Object(k.a)(e,"country","Global"),Object(k.a)(e,"country_code","*"),e)),z((t={},Object(k.a)(t,"currency_change","UGA"!==v("market").country_code&&"RWA"!==v("market").country_code),Object(k.a)(t,"active_currency",v("market").currency_code),Object(k.a)(t,"active_currency_val",""),t));var a={time_zone:v("market").time_zone};xl(a).then(function(e){if(!e)return"";if("success"===e.status){p(e.data);var t=e.data;J(t),fe(Math.floor(100*Math.random())+1),M(Object(k.a)({},"active_currency",t[v("market").country_code].currency_code))}});var n={country_code:v("market").country_code,time_zone:v("market").time_zone,status:""};_r(Object(X.a)({},n,{status:"enabled",biz_account:!0})).then(function(e){if(e&&"success"===e.status){var t=[];e.data.list.map(function(e){return t.push(e.acc_prvdr_code)}),ce(t)}})},[p,_r]),Object(n.useEffect)(function(){he&&Ee("USD")},[he,D]);var ve=v("market_list"),ge=function(e,t){var a;if(F((a={},Object(k.a)(a,"country",t),Object(k.a)(a,"country_code",e),a)),S(!0),$(null),"*"!=e){var n;z((n={},Object(k.a)(n,"currency_change",e!=D.country_code),Object(k.a)(n,"active_currency",G[e].currency_code),Object(k.a)(n,"active_currency_val",""),n));var r=G[e].currency_code;M(Object(k.a)({},"active_currency",r))}else{var l;z((l={},Object(k.a)(l,"currency_change",e!=D.country_code),Object(k.a)(l,"active_currency","UGX"),Object(k.a)(l,"active_currency_val",""),l))}Ee("USD");var c={country_code:e,time_zone:"UGA"===e?"EAT":"CAT",status:""};_r(Object(X.a)({},c,{status:"enabled",biz_account:!0})).then(function(e){if(e&&"success"===e.status){var t=[];e.data.list.map(function(e){return t.push(e.acc_prvdr_code)}),ce(t)}})},ye=function(e){S(!1),$(e),de(e)},Ee=function(e){var t,a;if("*"!=D.country_code){if("USD"===e||"EUR"===e)z((t={},Object(k.a)(t,"currency_change",!0),Object(k.a)(t,"active_currency",e),Object(k.a)(t,"active_currency_val",G[D.country_code].forex_rates[e]),t));else if("UGX"===e||"RWF"===e){var n;z((n={},Object(k.a)(n,"currency_change",!1),Object(k.a)(n,"active_currency",e),Object(k.a)(n,"active_currency_val",""),n))}}else z((a={},Object(k.a)(a,"currency_change",!0),Object(k.a)(a,"active_currency",e),Object(k.a)(a,"active_currency_val",G.UGA.forex_rates[e]),a))};return t({country_code:D.country_code,activeCurrency:q.active_currency,activeCurrencyVal:q.active_currency_val,country:D.country,startDate:f,endDate:b,gds_report_active_accPrvds:ie}),r.a.createElement("div",{style:{backgroundColor:"#1a2035"},className:"manage_dashContainer"},r.a.createElement("div",{className:"row no-margin align-items-center py-3"},r.a.createElement("div",{className:"col-md-8 no-padding pb-5"},r.a.createElement("h5",null,l))),r.a.createElement("div",{className:"row no-margin"},r.a.createElement("div",{className:"col-md-8 no-padding"},r.a.createElement("div",{className:"d-flex align-items-center"},r.a.createElement("div",null,r.a.createElement("label",{className:"no-margin"},"Market")),r.a.createElement("div",{className:"dropdown country_dropDownbg",style:{marginLeft:30,minWidth:"170px",maxWidth:"180px"}},r.a.createElement("div",{className:"dropdown-toggle d-flex align-items-center dropdown_trig justify-content-between",type:"button",id:"dropdownMenuButton1","data-bs-toggle":"dropdown","aria-expanded":"false"},"*"!=D.country_code?r.a.createElement(r.a.Fragment,null,r.a.createElement(ae.a,{id:"market",name:D.country_code,format:"png",pngSize:48,shiny:!1,alt:D.country_code,basePath:"/img/flags"}),r.a.createElement("span",null,D.country),r.a.createElement("span",null,r.a.createElement("i",{className:"fa-solid fa-chevron-down"}))):r.a.createElement(r.a.Fragment,null,r.a.createElement(Mc.a,{size:20,style:{margin:"4px 0px"}}),r.a.createElement("span",null,D.country),r.a.createElement("span",null,r.a.createElement("i",{className:"fa-solid fa-chevron-down"})))),r.a.createElement("ul",{className:"dropdown-menu","aria-labelledby":"dropdownMenuButton1",style:{width:160}},r.a.createElement("li",{className:"country_selector",onClick:function(){return ge("*","Global")}},r.a.createElement(Mc.a,{size:20,style:{margin:"4px 0px"}}),r.a.createElement("span",{style:{paddingLeft:15}},"Global")),ve.map(function(e,t){return r.a.createElement("li",{key:t,className:"country_selector",onClick:function(){return ge(e.country_code,e.country)}},r.a.createElement(ae.a,{id:"market",name:e.country_code,format:"png",pngSize:48,shiny:!1,alt:e.country_code,basePath:"/img/flags"}),r.a.createElement("span",{style:{paddingLeft:5}},e.country))}))),c&&r.a.createElement("div",{className:"d-flex",style:{marginTop:"-16px",paddingLeft:"5px",maxWidth:"400px"}},r.a.createElement("div",null,r.a.createElement("label",{className:"text-white no-margin",style:{paddingLeft:"35px"}},"Start Month"),r.a.createElement("input",{className:"monthly_report_input",type:"month",onChange:function(e){return function(e){g(e.target.value)}(e)},value:f})),r.a.createElement("div",null,r.a.createElement("label",{className:"text-white no-margin ",style:{paddingLeft:"30px"}},"End Month"),r.a.createElement("input",{className:"monthly_report_input",type:"month",onChange:function(e){return function(e){w(e.target.value)}(e)},value:b})),r.a.createElement("div",null,r.a.createElement("div",{style:{marginTop:"25px",paddingLeft:"20px",width:"120px"}},(""!==f||""!==b)&&r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{"data-tip":!0,"data-for":"dateRangeClear",className:"btn btn-sm",onClick:function(){return g(""),void w("")}},"Clear"),r.a.createElement($c.a,{id:"dateRangeClear",place:"top",effect:"solid"},"Show all time data"))))))),r.a.createElement(r.a.Fragment,null,"*"!=D.country_code&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"col-md-2 no-padding d-flex align-items-center justify-content-end"},r.a.createElement("p",{className:"no-margin text-white",style:{fontWeight:600}},""===q.active_currency_val?"":"1 ".concat(q.active_currency," ="),"\xa0"),r.a.createElement("p",{className:"no-margin text-white",style:{fontWeight:600}},""===q.active_currency_val?"":Number(1/q.active_currency_val).toFixed(3),"\xa0",""===q.active_currency_val?"":G[D.country_code].currency_code)),r.a.createElement("div",{className:"col-md-2 no-padding"},r.a.createElement("ul",{className:"manDash_currencySelector no-padding no-margin justify-content-end align-items-center"},r.a.createElement("li",{className:"border_left",style:{backgroundColor:"USD"===q.active_currency?"lightgray":""},onClick:function(){return Ee("USD")}},r.a.createElement("p",{className:"no-margin"},"USD")),r.a.createElement("li",{style:Object(k.a)({backgroundColor:"EUR"===q.active_currency?"lightgray":"",borderRadius:Y.globalval?"0px 5px 5px 0px":"",marginRight:Y.globalval?"20px":""},"borderRadius","*"!=D.country_code?"":"0px 5px 5px 2px"),onClick:function(){return Ee("EUR")}},r.a.createElement("p",{className:"no-margin"},"EUR")),r.a.createElement("li",{style:{backgroundColor:q.active_currency===B.active_currency?"lightgray":""},className:"border_right",onClick:function(){return Ee(B.active_currency)}},r.a.createElement("p",{className:"no-margin"},B.active_currency))))))),!0===a&&r.a.createElement("div",{className:"row no-margin justify-content-between",style:{paddingBottom:15,paddingTop:15}},r.a.createElement("div",{className:"col-md-8 no-padding"},r.a.createElement("div",{className:"d-flex align-items-center"},r.a.createElement("label",{className:"no-margin",style:{paddingRight:15}},"Provider"),r.a.createElement("button",{className:"filterBtns allBtn_size ".concat(null===Z?"":"opac_50"),style:{height:30,width:60,cursor:C?"pointer":"default",marginRight:15},key:0,onClick:function(){return ye(null)}},"ALL"),le.map(function(e,t){return r.a.createElement("div",{style:{height:30,width:60,cursor:C?"pointer":"default",marginRight:15},className:null===Z||Z===e?"":"opac_50",key:t,onClick:function(){return ye(e)}},r.a.createElement("img",{className:"img-fluid",src:"/img/".concat(e,"_logo_color.png"),alt:e}))}))),r.a.createElement("div",{className:"col-md-4 no-padding d-flex justify-content-center align-items-center"})))}function ts(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(u.a)(e);if(t){var r=Object(u.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(m.a)(this,a)}}var as=function(e){Object(d.a)(a,e);var t=ts(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={country_code:"*",country:"global",activeCurrency:"UGXS",activeCurrencyVal:"1",viewBy:!1,toggle:!0,dataLabel:!1,startDate:ce()().subtract("12","months").format("Y-MM"),endDate:ce()().format("Y-MM"),reportDate:null},e.generate_report=function(){var t={country_code:e.state.country_code,currency_code:e.state.active_currency,report_type:"get_monthly_cust_report"};e.handlemMonthlyCustReport(t),t.report_type="get_monthly_cust_report_of_country",e.handlemMonthlyCustReportOfCountry(t),t.report_type="get_reg_and_active_customer",e.handleRegAndActiveCustReport(t),t.report_type="get_revenue_per_cust",e.handleRevenuePerCustReport(t),t.report_type="get_revenue_per_cust_of_country",e.handleRevenuePerCustReportForCountry(t),t.report_type="get_revenue_per_fa",e.handleRevenuePerFAReport(t),t.report_type="get_revenue_per_fa_of_country",e.handleRevenuePerFAReportOfCountry(t),t.report_type="get_tot_disb_report",e.handleTotDisbursalReport(t),t.report_type="get_tot_disb_report_of_country",e.handleTotDisbursalReportOfCountry(t),t.report_type="get_tot_disb_count",e.handleTotalDisbCountReport(t),t.report_type="get_tot_disb_count_of_country",e.handleTotalDisbCountReportOfCountry(t),t.report_type="get_tot_settled_disb_count",e.handleTotalSettledDisbCountReport(t),t.report_type="get_tot_settled_disb_count_of_country",e.handleTotalSettledDisbCountReportForCountry(t),t.report_type="get_ontime_payments_for_country",e.handleOntimePaymentForCountryReport(t),t.report_type="get_ontime_payments",e.handleOntimePaymentReport(t),t.report_type="get_outstanding_fa_for_country",e.handleOutstandingFAForCountryReport(t),t.report_type="get_outstanding_fa",e.handleOutstandingFAReport(t),t.report_type="get_revenue",e.handleRevenueReport(t),t.report_type="get_revenue_for_country",e.handleRevenueForCountryReport(t),t.report_type="get_total_and_overdue_fa",e.handleTotalAndOverdueFAReport(t),t.report_type="get_advances_disbursed_and_completed",e.handleAdvancesDisbursedAndCompleted(t)},e.set_attributes=function(t){e.state.country_code==t.country_code&&e.state.activeCurrency==t.activeCurrency&&e.state.startDate==t.startDate&&e.state.endDate==t.endDate&&e.state.activeCurrencyVal==t.activeCurrencyVal||e.setState(t)},e.make_series_data=function(t,a){var n=[],r=""==e.state.activeCurrencyVal?1:e.state.activeCurrencyVal,l=JSON.parse(JSON.stringify(t)),c=[],s=e.state.startDate,o=e.state.endDate;return""!==s||""!==o?(s=""===s?ce()("2018-01-01").format():ce()(s).startOf("month").format(),o=""===o?ce()().format():ce()(o).endOf("month").format(),Object.keys(l).map(function(e){c[e]=[],l[e].map(function(t,a){var n=ce()(l[e][a].x);(ce()(s).isBefore(n)&&ce()(o).endOf("month").isAfter(n)||ce()(s).isSame(n,"month")||ce()(o).isSame(n,"month"))&&c[e].push(l[e][a])})})):c=l,Object.keys(c).map(function(e){var t={};t.name="*"!=e?e:"Global","currency"==a&&"*"!=e&&c[e].map(function(t,a){"type"!=a&&(c[e][a].y=c[e][a].y*r)}),t.data=c[e],"type"in c[e]&&(t.type=c[e].type),n.push(t)}),n},e.get_report_date=function(){kl(e.req()).then(function(t){if(t&&"success"===t.status){var a=t.data;a=ce()(a).format("DD MMM YYYY"),e.setState({reportDate:a})}})},e.load_currency_charts=function(){e.setState({revenuePerCustomer:e.make_series_data(e.state.revenuePerCustomerRaw,"currency"),revenuePerFa:e.make_series_data(e.state.revenuePerFaRaw,"currency"),totDisbursal:e.make_series_data(e.state.totDisbursalRaw,"currency"),revenueForCountry:e.make_series_data(e.state.revenueForCountryRaw,"currency"),revenuePerCustomerForCountry:e.make_series_data(e.state.revenuePerCustomerRawForCountry,"currency"),revenuePerFaForCountry:e.make_series_data(e.state.revenuePerFaRawForCountry,"currency"),totDisbursalForCountry:e.make_series_data(e.state.totDisbursalRawForCountry,"currency"),revenue:e.make_series_data(e.state.revenueRaw,"currency"),ontimePayment:e.make_series_data(e.state.ontimePaymentRaw),outstandingFA:e.make_series_data(e.state.outstandingFARaw,"currency"),outstandingFAForCountry:e.make_series_data(e.state.outstandingFAForCountryRaw,"currency")})},e.reload_charts=function(){e.setState({monthlyCustReport:e.make_series_data(e.state.monthlyCustReportRaw),monthlyCustReportofCountry:e.make_series_data(e.state.monthlyCustReportRawofCountry),regAndActiveCust:e.make_series_data(e.state.regAndActiveCustRaw),revenuePerCustomer:e.make_series_data(e.state.revenuePerCustomerRaw,"currency"),revenuePerFa:e.make_series_data(e.state.revenuePerFaRaw,"currency"),totDisbursal:e.make_series_data(e.state.totDisbursalRaw,"currency"),revenueForCountry:e.make_series_data(e.state.revenueForCountryRaw,"currency"),revenuePerCustomerForCountry:e.make_series_data(e.state.revenuePerCustomerRawForCountry,"currency"),revenuePerFaForCountry:e.make_series_data(e.state.revenuePerFaRawForCountry,"currency"),totDisbursalForCountry:e.make_series_data(e.state.totDisbursalRawForCountry,"currency"),totalDisbCount:e.make_series_data(e.state.totalDisbCountRaw),totalDisbCountForCountry:e.make_series_data(e.state.totalDisbCountRawForCountry),revenue:e.make_series_data(e.state.revenueRaw,"currency"),totalSettledDisbCount:e.make_series_data(e.state.totalSettledDisbCountRaw),totalSettledDisbCountForCountry:e.make_series_data(e.state.totalSettledDisbCountRawForCountry),ontimePaymentForCountry:e.make_series_data(e.state.ontimePaymentForCountryRaw,"percentage"),TotalAndOverdueFA:e.make_series_data(e.state.TotalAndOverdueFARaw),outstandingFA:e.make_series_data(e.state.outstandingFARaw,"currency"),outstandingFAForCountry:e.make_series_data(e.state.outstandingFAForCountryRaw,"currency"),AmountDisbursedAndCompleted:e.make_series_data(e.state.AmountDisbursedAndCompletedRaw)})},e.handlemMonthlyCustReport=function(t){wl(e.req(t)).then(function(t){if(t)if("success"===t.status){var a=t.data,n=e.make_series_data(a);e.setState({monthlyCustReportRaw:a,monthlyCustReport:n,monthlyCust:!0})}else alert(t.message+"\n"+JSON.stringify(t.data))})},e.handlemMonthlyCustReportOfCountry=function(t){wl(e.req(t)).then(function(t){if(t)if("success"===t.status){var a=t.data,n=e.make_series_data(a);e.setState({monthlyCustReportRawofCountry:a,monthlyCustReportofCountry:n,monthlyCustCntry:!0})}else alert(t.message+"\n"+JSON.stringify(t.data))})},e.handleRegAndActiveCustReport=function(t){wl(e.req(t)).then(function(t){if(t)if("success"===t.status){var a=t.data,n=e.make_series_data(a);e.setState({regAndActiveCustRaw:a,regAndActiveCust:n,regAndActive:!0})}else alert(t.message+"\n"+JSON.stringify(t.data))})},e.handleRevenuePerCustReport=function(t){wl(e.req(t)).then(function(t){if(t)if("success"===t.status){var a=t.data,n=e.make_series_data(t.data,"currency");e.setState({revenuePerCustomerRaw:a,revenuePerCustomer:n,revpercust:!0})}else alert(t.message+"\n"+JSON.stringify(t.data))})},e.handleRevenuePerCustReportForCountry=function(t){wl(e.req(t)).then(function(t){if(t)if("success"===t.status){var a=t.data,n=e.make_series_data(t.data,"currency");e.setState({revenuePerCustomerRawForCountry:a,revenuePerCustomerForCountry:n,revpercustCntry:!0})}else alert(t.message+"\n"+JSON.stringify(t.data))})},e.handleRevenuePerFAReport=function(t){wl(e.req(t)).then(function(t){if(t)if("success"===t.status){var a=t.data,n=e.make_series_data(a,"currency");e.setState({revenuePerFaRaw:a,revenuePerFa:n,revPerFa:!0})}else alert(t.message+"\n"+JSON.stringify(t.data))})},e.handleRevenuePerFAReportOfCountry=function(t){wl(e.req(t)).then(function(t){if(t)if("success"===t.status){var a=t.data,n=e.make_series_data(a,"currency");e.setState({revenuePerFaRawForCountry:a,revenuePerFaForCountry:n,revPerFaCntry:!0})}else alert(t.message+"\n"+JSON.stringify(t.data))})},e.handleTotDisbursalReport=function(t){wl(e.req(t)).then(function(t){if(t)if("success"===t.status){var a=t.data,n=e.make_series_data(a,"currency");e.setState({totDisbursalRaw:a,totDisbursal:n,totdisb:!0})}else alert(t.message+"\n"+JSON.stringify(t.data))})},e.handleTotDisbursalReportOfCountry=function(t){wl(e.req(t)).then(function(t){if(t)if("success"===t.status){var a=t.data,n=e.make_series_data(a,"currency");e.setState({totDisbursalRawForCountry:a,totDisbursalForCountry:n,totdisbCntry:!0})}else alert(t.message+"\n"+JSON.stringify(t.data))})},e.handleTotalDisbCountReport=function(t){wl(e.req(t)).then(function(t){if(t)if("success"===t.status){var a=t.data,n=e.make_series_data(a);e.setState({totalDisbCountRaw:a,totalDisbCount:n,totalDisbCountDiv:!0})}else alert(t.message+"\n"+JSON.stringify(t.data))})},e.handleTotalDisbCountReportOfCountry=function(t){wl(e.req(t)).then(function(t){if(t)if("success"===t.status){var a=t.data,n=e.make_series_data(a);e.setState({totalDisbCountRawForCountry:a,totalDisbCountForCountry:n,totalDisbCountDivCntry:!0})}else alert(t.message+"\n"+JSON.stringify(t.data))})},e.handleTotalSettledDisbCountReport=function(t){wl(e.req(t)).then(function(t){if(t)if("success"===t.status){var a=t.data,n=e.make_series_data(a);e.setState({totalSettledDisbCountRaw:a,totalSettledDisbCount:n,totalSettledDisbCountDiv:!0})}else alert(t.message+"\n"+JSON.stringify(t.data))})},e.handleTotalSettledDisbCountReportForCountry=function(t){wl(e.req(t)).then(function(t){if(t)if("success"===t.status){var a=t.data,n=e.make_series_data(a);e.setState({totalSettledDisbCountRawForCountry:a,totalSettledDisbCountForCountry:n,totalSettledDisbCountDivCntry:!0})}else alert(t.message+"\n"+JSON.stringify(t.data))})},e.handleOntimePaymentForCountryReport=function(t){wl(e.req(t)).then(function(t){if(t)if("success"===t.status){var a=t.data,n=e.make_series_data(a,"percentage");e.setState({ontimePaymentForCountryRaw:a,ontimePaymentForCountry:n,ontimePaymentForCountryDiv:!0})}else alert(t.message+"\n"+JSON.stringify(t.data))})},e.handleOntimePaymentReport=function(t){wl(e.req(t)).then(function(t){if(t)if("success"===t.status){var a=t.data,n=e.make_series_data(a,"percentage");e.setState({ontimePaymentRaw:a,ontimePayment:n,ontimePaymentDiv:!0})}else alert(t.message+"\n"+JSON.stringify(t.data))})},e.handleOutstandingFAForCountryReport=function(t){wl(e.req(t)).then(function(t){if(t)if("success"===t.status){var a=t.data,n=e.make_series_data(a,"currency");e.setState({outstandingFAForCountryRaw:a,outstandingFAForCountry:n,outstandingFAForCountryDiv:!0})}else alert(t.message+"\n"+JSON.stringify(t.data))})},e.handleOutstandingFAReport=function(t){wl(e.req(t)).then(function(t){if(t)if("success"===t.status){var a=t.data,n=e.make_series_data(a,"currency");e.setState({outstandingFARaw:a,outstandingFA:n,outstandingFADiv:!0})}else alert(t.message+"\n"+JSON.stringify(t.data))})},e.handleRevenueForCountryReport=function(t){wl(e.req(t)).then(function(t){if(t)if("success"===t.status){var a=t.data,n=e.make_series_data(a,"currency");e.setState({revenueForCountryRaw:a,revenueForCountry:n,revenueForCountryDiv:!0})}else alert(t.message+"\n"+JSON.stringify(t.data))})},e.handleRevenueReport=function(t){wl(e.req(t)).then(function(t){if(t)if("success"===t.status){var a=t.data,n=e.make_series_data(a,"currency");e.setState({revenueRaw:a,revenue:n,revenueDiv:!0})}else alert(t.message+"\n"+JSON.stringify(t.data))})},e.handleTotalAndOverdueFAReport=function(t){wl(e.req(t)).then(function(t){if(t)if("success"===t.status){var a=t.data,n=e.make_series_data(a);e.setState({TotalAndOverdueFARaw:a,TotalAndOverdueFA:n,TotalAndOverdueFADiv:!0})}else alert(t.message+"\n"+JSON.stringify(t.data))})},e.handleAdvancesDisbursedAndCompleted=function(t){wl(e.req(t)).then(function(t){if(t)if("success"===t.status){var a=t.data,n=e.make_series_data(a);e.setState({AmountDisbursedAndCompletedRaw:a,AmountDisbursedAndCompleted:n,AmountDisbursedAndCompletedDiv:!0})}else alert(t.message+"\n"+JSON.stringify(t.data))})},e.handleViewBy=function(t){e.state.viewBy!==t&&e.setState({viewBy:t},function(){1==e.state.viewBy?e.setState({toggle_div:"hide_div"}):e.setState({toggle_div:""})})},e.handleClick=function(t){e.setState({dataLabel:t.target.checked})},e}return Object(o.a)(a,[{key:"componentWillMount",value:function(){this.get_report_date(),this.generate_report()}},{key:"componentDidUpdate",value:function(e,t){t.country_code!=this.state.country_code?("*"==this.state.country_code&&this.setState({viewBy:!1}),this.generate_report()):t.activeCurrency!=this.state.activeCurrency||t.activeCurrencyVal!=this.state.activeCurrencyVal?this.state.revpercust&&this.state.revPerFa&&this.state.revenueDiv&&this.state.revpercust&&this.state.revpercustCntry&&this.state.revPerFa&&this.state.revPerFaCntry&&this.state.totdisb&&this.state.totdisbCntry&&this.state.revenueForCountryDiv&&this.load_currency_charts():t.startDate==this.state.startDate&&t.endDate==this.state.endDate||this.reload_charts()}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{id:""},r.a.createElement("div",{className:"container"},r.a.createElement(es,{set_attr:function(t){return e.set_attributes(t)},incl_prvdr:!1,title:"Charts ("+this.state.reportDate+")",showMonthRange:!0,default_start_date:this.state.startDate,default_end_date:this.state.endDate}),r.a.createElement("div",{className:"row top pt-3"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{id:"liveTrend",className:"carousel","data-interval":"false","data-bs-keyboard":!0},r.a.createElement("ol",{className:"carousel-indicators row"},r.a.createElement("li",{"data-target":"#liveTrend","data-slide-to":"0",className:"active col-2"},"Monthly Customer Registration"),r.a.createElement("li",{"data-target":"#liveTrend","data-slide-to":"1",className:"col-1"},"Registered Customers vs Active Customers"),r.a.createElement("li",{"data-target":"#liveTrend","data-slide-to":"2",className:"col-1"},"Revenue per Customer"),r.a.createElement("li",{"data-target":"#liveTrend","data-slide-to":"3",className:"col-1"},"Revenue per Float Advance"),r.a.createElement("li",{"data-target":"#liveTrend","data-slide-to":"4",className:"col-1"},"Amount Disbursed"),r.a.createElement("li",{"data-target":"#liveTrend","data-slide-to":"5",className:"col-1"},this.state.viewBy?"Advances Disbursed":"Advances Disbursed & Advances Completed"),r.a.createElement("li",{"data-target":"#liveTrend","data-slide-to":"6",className:"col-1",style:{display:this.state.viewBy?"flex":"none"}},"Advances Completed"),r.a.createElement("li",{"data-target":"#liveTrend","data-slide-to":"7",className:"col-1"},"Ontime Payment"),r.a.createElement("li",{"data-target":"#liveTrend","data-slide-to":"8",className:"col-1"},"Outstanding FA"),r.a.createElement("li",{"data-target":"#liveTrend","data-slide-to":"9",className:"col-1"},"Revenue"),r.a.createElement("li",{"data-target":"#liveTrend","data-slide-to":"10",className:"col-1"},"Total & New Overdue FAs")),r.a.createElement("div",{className:"d-flex justify-content-end pb-2"},r.a.createElement("label",null,r.a.createElement("input",{type:"checkbox",onClick:function(t){return e.handleClick(t)}})," ",r.a.createElement("span",{style:{fontSize:"14px"}},"Show Data Label "))),"*"!=this.state.country_code&&r.a.createElement("div",{className:"d-flex justify-content-end pb-2"},r.a.createElement(Qc,{leftLabel:"All "+this.state.country,rightLabel:"All Network Provider",val:this.state.viewBy,set_tog_val:function(t){return e.handleViewBy(t)}})),r.a.createElement("div",{className:"carousel-inner"},r.a.createElement("div",{className:"carousel-item active"},this.state.monthlyCust&&this.state.monthlyCustCntry&&r.a.createElement("div",{className:"content-section implementation"},r.a.createElement(Xc,{data:!0===this.state.viewBy?this.state.monthlyCustReport:this.state.monthlyCustReportofCountry,type:"area",dataLabel:this.state.dataLabel,xaxistype:"category",title:"Monthly Customer Registration"}))),r.a.createElement("div",{className:"carousel-item"},this.state.regAndActive&&r.a.createElement("div",{className:"content-section implementation"},r.a.createElement(Xc,{data:this.state.regAndActiveCust,type:"bar",xaxistype:"category",dataLabel:this.state.dataLabel,title:"Registered Customers vs Active Customers"}))),r.a.createElement("div",{className:"carousel-item"},this.state.revpercust&&this.state.revpercustCntry&&r.a.createElement("div",{className:"content-section implementation"},r.a.createElement(Xc,{data:!0===this.state.viewBy?this.state.revenuePerCustomer:this.state.revenuePerCustomerForCountry,type:"area",xaxistype:"category",dataLabel:this.state.dataLabel,title:"Revenue Per Customer",curr:this.state.activeCurrency}))),r.a.createElement("div",{className:"carousel-item"},this.state.revPerFa&&this.state.revPerFaCntry&&r.a.createElement("div",{className:"content-section implementation"},r.a.createElement(Xc,{data:!0===this.state.viewBy?this.state.revenuePerFa:this.state.revenuePerFaForCountry,type:"area",xaxistype:"category",dataLabel:this.state.dataLabel,title:"Revenue Per Float Advance",curr:this.state.activeCurrency}))),r.a.createElement("div",{className:"carousel-item"},this.state.totdisb&&this.state.totdisbCntry&&r.a.createElement("div",{className:"content-section implementation"},r.a.createElement(Xc,{data:!0===this.state.viewBy?this.state.totDisbursal:this.state.totDisbursalForCountry,type:"area",xaxistype:"category",dataLabel:this.state.dataLabel,title:"Amount Disbursed",curr:this.state.activeCurrency}))),this.state.viewBy?r.a.createElement("div",{className:"carousel-item"},this.state.totalDisbCountDiv&&this.state.totalDisbCountDivCntry&&r.a.createElement("div",{className:"content-section implementation"},r.a.createElement(Xc,{data:!0===this.state.viewBy?this.state.totalDisbCount:this.state.totalDisbCountForCountry,type:"area",xaxistype:"category",dataLabel:this.state.dataLabel,title:"Advances Disbursed"}))):r.a.createElement("div",{className:"carousel-item"},this.state.AmountDisbursedAndCompletedDiv&&!this.state.viewBy&&r.a.createElement("div",{className:"content-section implementation"},r.a.createElement(Xc,{data:this.state.AmountDisbursedAndCompleted,type:"area",xaxistype:"category",dataLabel:this.state.dataLabel,title:"Advances Disbursed & Advances Completed"}))),r.a.createElement("div",{className:"carousel-item"},this.state.totalSettledDisbCountDiv&&this.state.totalSettledDisbCountDivCntry&&r.a.createElement("div",{className:"content-section implementation"},r.a.createElement(Xc,{data:!0===this.state.viewBy?this.state.totalSettledDisbCount:this.state.totalSettledDisbCountForCountry,type:"area",xaxistype:"category",dataLabel:this.state.dataLabel,title:"Advances Completed"}))),r.a.createElement("div",{className:"carousel-item"},this.state.ontimePaymentDiv&&this.state.ontimePaymentForCountryDiv&&r.a.createElement("div",{className:"content-section implementation"},r.a.createElement(Xc,{data:!0===this.state.viewBy?this.state.ontimePayment:this.state.ontimePaymentForCountry,type:"area",xaxistype:"category",dataLabel:this.state.dataLabel,title:"OnTime Payment",curr:"%"}))),r.a.createElement("div",{className:"carousel-item"},this.state.outstandingFAForCountryDiv&&this.state.outstandingFADiv&&r.a.createElement("div",{className:"content-section implementation"},r.a.createElement(Xc,{data:!0===this.state.viewBy?this.state.outstandingFA:this.state.outstandingFAForCountry,type:"area",xaxistype:"category",title:"Outstanding FA",dataLabel:this.state.dataLabel,curr:this.state.activeCurrency}))),r.a.createElement("div",{className:"carousel-item"},this.state.revenueDiv&&this.state.revenueForCountryDiv&&r.a.createElement("div",{className:"content-section implementation"},r.a.createElement(Xc,{data:!0===this.state.viewBy?this.state.revenue:this.state.revenueForCountry,type:"area",xaxistype:"category",title:"Revenue",dataLabel:this.state.dataLabel,curr:this.state.activeCurrency}))),r.a.createElement("div",{className:"carousel-item"},this.state.TotalAndOverdueFADiv&&r.a.createElement("div",{className:"content-section implementation"},r.a.createElement(Xc,{data:this.state.TotalAndOverdueFA,type:"bar",xaxistype:"category",dataLabel:this.state.dataLabel,title:"Total FA and New Overdue FAs"})))))))))}}]),a}(ut),ns=a(114),rs=a(26),ls=a(115),cs=a.n(ls),ss=a(116),os=function(e){var t=e.filter,a=e.setFilter;return r.a.createElement("span",{style:{color:"white",float:"right"}},"Search:"," ",r.a.createElement("input",{style:{margin:"0px 10px 10px 0px"},value:t||"",onChange:function(e){return a(e.target.value)}}))},is=function(e){var t=e.row_data,a=e.column_data,n=e.footer,l=e.global_search,c=e.csv_file,s=e.pagination,o=e.default_page_size,i=e.FName,d=r.a.useMemo(function(){return t}),m=r.a.useMemo(function(){return a}),u=Object(rs.useTable)({columns:m,data:d,initialState:{pageSize:o},getExportFileBlob:function(e){var t=e.columns,a=e.data,n=e.fileType;e.FName;if("csv"===n){var r=t.map(function(e){return e.exportValue}),l=cs.a.unparse({fields:r,data:a});return new Blob([l],{type:"text/csv"})}return!1},getExportFileName:function(e){return Object(ns.a)(e),"".concat(i||"Export-Data")}},rs.useGlobalFilter,rs.useSortBy,rs.useBlockLayout,rs.usePagination,ss.a),p=u.getTableProps,_=u.getTableBodyProps,h=u.headerGroups,f=u.prepareRow,v=u.exportData,g=u.state,y=u.nextPage,E=u.previousPage,b=u.canNextPage,w=u.canPreviousPage,N=u.page,x=u.setPageSize,C=u.pageOptions,k=u.setGlobalFilter,S=u.gotoPage,O=(u.rows,u.footerGroups);var A=g.globalFilter,j=g.pageIndex,R=g.pageSize;return r.a.createElement(r.a.Fragment,null,c&&r.a.createElement("button",{style:{float:"right"},className:"btn btn-info btn-sm rect_tablev7_export_button",onClick:function(){v("csv",!0)}},"Export to CSV"),l&&r.a.createElement(os,{filter:A,setFilter:k}),r.a.createElement("div",{className:"react_table_v7 table-responsive customer_list_reactTable border_bot"},r.a.createElement("table",p(),r.a.createElement("thead",null,h.map(function(e){return r.a.createElement("tr",Object.assign({className:"no-margin no-padding",style:{border:"1px sold red",borderWidth:"100%"}},e.getHeaderGroupProps()),e.headers.map(function(e){return r.a.createElement("th",e.getHeaderProps(e.getSortByToggleProps()),e.render("Header"),r.a.createElement("span",null,e.isSorted?e.isSortedDesc?" \u21d1":" \u21d3":""))}))})),r.a.createElement("tbody",_(),N.map(function(e){return f(e),r.a.createElement("tr",e.getRowProps(),e.cells.map(function(e){return r.a.createElement("td",e.getCellProps(),e.render("Cell"))}))})),n&&r.a.createElement("tfoot",{style:{color:"white"}},O.map(function(e){return r.a.createElement("tr",e.getFooterGroupProps(),e.headers.map(function(e){return r.a.createElement("td",e.getFooterProps(),e.render("Footer"))}))})))),s&&r.a.createElement("div",{className:"d-flex justify-content-center align-items-center",style:{marginTop:"10px"}},r.a.createElement("button",{className:"btn btn-info gds_table_pagination",onClick:function(){return E()},disabled:!w},"Previous"),r.a.createElement("span",{style:{fontSize:"14px",color:"white",margin:"0px 30px"}},"Page",r.a.createElement("strong",null,r.a.createElement("span",null,r.a.createElement("input",{className:"btn btn-info no-margin",style:{padding:"10px 5px 10px 9px",width:"40px"},type:"number",defaultValue:j+1,onChange:function(e){var t=e.target.value?Number(e.target.value)-1:0;S(t)}}))," of ",C.length)),r.a.createElement("select",{className:"btn btn-info",value:R,onChange:function(e){return x(Number(e.target.value))},style:{margin:"0px 30px",padding:"8px"}},[5,20,50,100].map(function(e){return r.a.createElement("option",{key:e,value:e},"Show",e)})),r.a.createElement("button",{className:"btn btn-info gds_table_pagination",onClick:function(){return y()},disabled:!b},"Next")))},ds=a(117);function ms(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(u.a)(e);if(t){var r=Object(u.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(m.a)(this,a)}}var us=function(e){Object(d.a)(a,e);var t=ms(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={columndatas:[],row_Datas:[],modal_view:!1,modal_view_row_datas:[],cust_id:"",status:"raised",update_table_id:null,active_status:!1},e.StatusModalClose=function(){e.setState({modal_view:!1,cust_id:""})},e.Search_handler=function(t,a,n){e.setState(Object(X.a)({},e.state,Object(k.a)({},a,t)))},e}return Object(o.a)(a,[{key:"componentWillMount",value:function(){var e=this;this.load_flow_rel_mgr(),this.setState(function(t){return t.columndatas=e.columndatas()}),this.view_raised_complaints()}},{key:"view_handler",value:function(e,t,a,n){var r=this.state.row_Datas.filter(function(n,r){return n.cust_id==e&&n.complaint_type==t&&r==a});this.setState({modal_view:!0,modal_view_row_datas:r,cust_id:e,update_table_id:n})}},{key:"view_raised_complaints",value:function(){var e,t=this,a=this.getSelectOptions("complaint_status").filter(function(e){return"choose"!=e.props.children});this.setState({complaint_status:a}),(e=this.req(),P("/api/admin/borrower/list_complaints",e)).then(function(e){if(e&&"success"==e.status){var a=e.data.filter(function(e){return"raised"==e.status});t.setState({row_Datas:a,past_complaints_raw_data:e.data})}})}},{key:"resolution_handler",value:function(e,t){this.setState(Object(k.a)({},t,[e]))}},{key:"resolved_submit_handler",value:function(e){if(this.setState({update_table_id:e}),this.state.resolution1){var t=ce()(this.state.modal_view_row_datas[0].raised_date).format("DD-MM-YYYY"),a={cust_id:this.state.modal_view_row_datas[0].cust_id,complaint_about:this.state.modal_view_row_datas[0].complaint_type,resolution:this.state.resolution1,raised_date:t,remarks:this.state.modal_view_row_datas[0].remarks,id:null!=this.state.update_table_id?this.state.update_table_id:e};(function(e){return P("/api/admin/borrower/resolved_complaints",e)})(this.req(a)).then(function(e){e&&"success"==e.status&&(alert(e.message),window.location.reload())})}else alert("please add a resolution")}},{key:"columndatas",value:function(){var e=this;return[{Header:"Customer ID",accessor:"cust_id",Cell:function(e){return r.a.createElement("div",null," ",r.a.createElement(ee.a,{to:"/borrower/indiv/view/"+e.row.original.cust_id,target:"_blank",className:"flow_custid"},e.row.original.cust_id),"  ")}},{Header:"Business Name",id:"biz_name",accessor:"biz_name",Cell:function(e){return r.a.createElement(r.a.Fragment,null,e.row.original.biz_name)}},{Header:"Mobile Number",id:"mob_number",accessor:"mobile_num",Cell:function(e){return r.a.createElement(r.a.Fragment,null,e.row.original.mobile_num)}},{Header:"Complaint About",id:"complaint_type",accessor:"complaint_type",Cell:function(e){return r.a.createElement(r.a.Fragment,null,Ze(e.row.original.complaint_type))}},{Header:"Raised on Date",id:"raised_date",accessor:"raised_date",Cell:function(e){return r.a.createElement(r.a.Fragment,null,ce()(e.row.original.raised_date).format("DD-MMM-YYYY"))}},{Header:"Status",id:"status",accessor:"status",Cell:function(e){return r.a.createElement(r.a.Fragment,null,he(e.row.original.status))}},{Header:"Action",accessor:"cust_ids",Cell:function(t){return r.a.createElement("div",null,r.a.createElement("button",{type:"button","data-toggle":"modal","data-target":"#exampleModal",onClick:function(){return e.view_handler(t.row.original.cust_id,t.row.original.complaint_type,t.row.index,t.row.original.id)},className:"btn  btn-sm btn-primary"}," View"))}}]}},{key:"Search_Complaints_handler",value:function(){var e=this;if(this.state.status||this.state.complaint_about||this.state.cust_id){var t={req_parameter:this.state.cust_id},a={status:this.state.status,complaint_type:this.state.complaint_about,borrower_search_criteria:this.state.cust_id?t:""};(function(e){return P("/api/admin/borrower/view_cust_complaint",e)})(this.req(a)).then(function(t){t&&"success"==t.status&&e.setState({modal_view_row_datas:t.data,row_Datas:t.data,active_status:!0})})}else alert("choose select valid field")}},{key:"Reset_Complaints_handler",value:function(){this.setState({status:"",complaint_about:"",cust_id:""})}},{key:"date_handler",value:function(e,t){var a=ce()(e).format("YYYY-MM-DD");this.setState(Object(k.a)({},t,a))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("div",{className:"container containerTopmargin max-width no-padding",style:{background:"#202940"}},r.a.createElement("h2",{className:"text-white floatAdvancetitleBox",style:{padding:"10px"}}," Complaints Search"),r.a.createElement("div",{className:"d-flex justify-content-around align-items-center ",style:{padding:"20px"}},r.a.createElement("div",{className:"col-md-6"},r.a.createElement("span",{className:"text-white"},"Cust Name / Cust ID / Account Num / Mobile No "),r.a.createElement("input",{autocomplete:"off",className:"form-control",type:"text",onChange:function(t){return e.Search_handler(t.target.value,"cust_id")}})),r.a.createElement("div",{className:"col-md-3"},r.a.createElement("span",{className:"form-label text-white"},"Status"),r.a.createElement("select",{id:"status",className:"form-control",required:"required",value:this.state.status,onChange:function(t){return e.Search_handler(t.target.value,"status")}},(this.state.status,this.getSelectOptions("complaint_status")))),r.a.createElement("div",{className:"col-md-3"},r.a.createElement("span",{className:"form-label text-white"},"complaint about"),r.a.createElement("select",{id:"status",className:"form-control",required:"required",value:this.state.complaint_about,onChange:function(t){return e.Search_handler(t.target.value,"complaint_about")}},this.getSelectOptions("complaint_type")))),r.a.createElement("div",{className:"row d-flex justify-content-center"},r.a.createElement("button",{type:"button",class:"btn btn-primary btn-lg",onClick:function(){return e.Search_Complaints_handler()}},"search"))),r.a.createElement("div",{style:{marginTop:"4%"}},r.a.createElement("div",{className:"d-flex justify-content-between align-items-center"},r.a.createElement("h2",{className:"text-white",style:{margin:"20px"}}," Results"),r.a.createElement("p",{className:"no-margin text-white"},r.a.createElement("b",null,"Total Entries : ",this.state.row_Datas.length))),r.a.createElement(is,{row_data:this.state.row_Datas,FName:"raised"==this.state.status?" Raised_Complaints":"Resolved_complaints",column_data:this.state.columndatas,pagination:!0,export_csv:!0,csv_file:!0,default_page_size:10,csvData:void 0!==this.state.row_Datas?"raised"==this.state.status?this.state.row_Datas:this.state.modal_view_row_datas:[]})),this.state.modal_view&&this.state.modal_view_row_datas.length>0&&r.a.createElement(r.a.Fragment,null,r.a.createElement(r.a.Fragment,null,r.a.createElement(rt.a,{show:this.state.modal_view,onHide:this.StatusModalClose,id:"exampleModal"},r.a.createElement(rt.a.Header,{closeButton:!0,show:this.state.modal_view,onHide:this.StatusModalClose},r.a.createElement(rt.a.Title,{style:{marginBottom:"15px"}},"Complaints")),this.state.modal_view&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:{margin:"10px 25px"}},this.state.modal_view_row_datas.map(function(t,a){return r.a.createElement("div",null,e.state.modal_view_row_datas.length>1?r.a.createElement("p",{className:"text-white text-center",style:{marginTop:"10px"}}," ",r.a.createElement("b",null,"Complaint ",a+1)):"",r.a.createElement("div",null,r.a.createElement("div",{className:"row cust_complaints_resolved"},r.a.createElement("div",{className:"col-md-6 complaint_modal_box"},r.a.createElement("div",{className:"d-flex align-items-center"},r.a.createElement("p",{className:"text-white "}," ",r.a.createElement("b",null," Customer ID"),"  "),r.a.createElement("p",{className:"text-white",style:{marginLeft:"30px"}},t.cust_id))),r.a.createElement("div",{className:"col-md-6 complaint_modal_box"},r.a.createElement("div",{className:"d-flex row "},r.a.createElement("p",{className:"text-white col-md-3 "}," ",r.a.createElement("b",null," Biz Name")," "),r.a.createElement("p",{className:"text-white col-md-9 "},t.biz_name))),r.a.createElement("div",{className:"col-md-6 complaint_modal_box"},r.a.createElement("div",{className:"d-flex align-items-center"},r.a.createElement("p",{className:"text-white "}," ",r.a.createElement("b",null," Complaint  About ")," "),r.a.createElement("p",{className:"text-white  ",style:{marginLeft:"9px"}},Ze(t.complaint_type)))),r.a.createElement("div",{className:"col-md-6 complaint_modal_box"},r.a.createElement("div",{className:"d-flex row "},r.a.createElement("p",{className:"text-white col-3"}," ",r.a.createElement("b",null," Raised On")),r.a.createElement("p",{className:"text-white  col-9"},ce()(t.raised_date).format("DD-MMM-YYYY"))))),r.a.createElement("div",{className:"row complaint_modal_box"},r.a.createElement("div",{className:"col-md-3"},r.a.createElement("p",{className:"text-white "}," ",r.a.createElement("b",null," Remarks ")," ")),r.a.createElement("div",{className:"col-md-9",style:{paddingLeft:"10px"}},r.a.createElement("p",{className:"text-white "},t.remarks))),r.a.createElement("div",{className:"row complaint_modal_box d-flex align-items-center"},r.a.createElement("div",{className:"col-md-3"},r.a.createElement("p",{className:"text-white "}," ",r.a.createElement("b",null," Resolution "))),r.a.createElement("div",{className:"col-md-9 ",style:{paddingLeft:"10px"}},null!=t.resolution?r.a.createElement("p",{className:"text-white "},t.resolution," "):r.a.createElement("textarea",{id:"w3review",style:{resize:"horizontal",padding:"10px"},name:"w3review",rows:"4",cols:"45",onChange:function(t){return e.resolution_handler(t.target.value,"resolution1",1)}}))),r.a.createElement("br",null),r.a.createElement("div",{className:"".concat("raised"==t.status?"col-md-6":"col-md-12","no-padding ")},"raised"==t.status?r.a.createElement("div",{className:"d-flex align-items-center no-padding"},r.a.createElement("p",{className:"text-white "}," ",r.a.createElement("b",null," Status ")," "),r.a.createElement("div",{className:"text-center ",style:{margin:"0px 0px 0px 30%"}},r.a.createElement("button",{type:"button",className:"btn-primary btn btn-lg ",onClick:function(){return e.resolved_submit_handler(t.id)}},"Resolved"))):r.a.createElement("div",null,r.a.createElement("div",{className:"d-flex no-padding"},r.a.createElement("p",{className:"text-white "}," ",r.a.createElement("b",null," Status ")," "),r.a.createElement("p",{className:"text-white resolved_status"}," ",r.a.createElement("b",{style:{color:"green"}}," Resolved ")," ",r.a.createElement(ds.a,{size:23,style:{marginLeft:"10px"},color:"green"})," ")))),r.a.createElement("br",null)))})))))))}}]),a}(ut);function ps(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(u.a)(e);if(t){var r=Object(u.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(m.a)(this,a)}}var _s=function(e){Object(d.a)(a,e);var t=ps(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={section_rows_arr:null,headers:null},e}return Object(o.a)(a,[{key:"format_metric",value:function(e){var t=null;return e&&(t="%"==e.unit?Number(e.value).toFixed(2)+" %":"days"==e.unit?Number(e.value).toFixed(1)+" days":""==e.unit?Number(e.value).toFixed(0):xe(Math.round(e.value),e.unit)),t}},{key:"get_headers",value:function(e){var t=e.map(function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("th",{className:"w-25"},e.title))}),a="Metric";return"risk_category_report"==this.props.type&&(a="Flow RM"),t.unshift(r.a.createElement("th",null,a)),t.unshift(r.a.createElement("th",null,"No")),t}},{key:"get_section_rows",value:function(e,t){var a=this,n=e.ref,l=e.items.map(function(e,l){var c;c=Ze(e);var s=n?null:a.index++;return r.a.createElement("tr",{key:l},r.a.createElement("td",{className:"report_left"},s),r.a.createElement("td",{className:"report_left"},c),a.get_section_columns(e,t,n))}),c=n?this.index++:null;return l.unshift(r.a.createElement("tr",null,r.a.createElement("td",{className:"report_title"},c),r.a.createElement("td",{colSpan:"1",className:"report_title"},e.title),this.get_section_columns(null,t))),l}},{key:"get_section_columns",value:function(e,t){var a=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return t.map(function(t){var l=n?t[n][e]:t[e];return l?r.a.createElement(r.a.Fragment,null,r.a.createElement("td",null,Re(a.format_metric(l)))):r.a.createElement(r.a.Fragment,null,r.a.createElement("td",null))})}},{key:"componentWillMount",value:function(){var e,t=this,a=this.country_code,n=this.acc_prvdr_code;(e=this.req({current:"true",country_code:a,acc_prvdr_code:n,type:this.props.report_type}),P("/api/admin/report/custom_report",e)).then(function(e){if(console.log(e),e)if("success"===e.status){t.index=1;var a=e.data.reports,n=t.get_headers(a),r=e.data.all_sections.map(function(e){return t.get_section_rows(e,a)});t.report_date="",t.setState({headers:n,section_rows_arr:r});var l=e.data.page_length;la()("#kpi_table").removeAttr("width").dataTable({searching:!1,paging:!0,pageLength:l,info:!0,dom:"Bfrtip",buttons:[{title:"",extend:"print",customize:function(e){console.log(window),la()(e.document.body).prepend('<img src="'+window.location.origin+'/logo_blue.png" alt = "FLOW" style="float:left;"/>')}},{extend:"csv"}],order:[]})}else alert(e.message+"\n"+JSON.stringify(e.data))})}},{key:"render",value:function(){return r.a.createElement("div",{className:"container"},r.a.createElement("br",null),r.a.createElement("h4",null,pe(this.props.report_type)),r.a.createElement("div",{id:"kpi_datatable"},r.a.createElement("table",{id:"kpi_table",className:"display strip cust-rep row-border order-column report"},r.a.createElement("thead",null,r.a.createElement("tr",null,this.state.headers)),r.a.createElement("tbody",null,this.state.section_rows_arr))))}}]),a}(dt);function hs(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(u.a)(e);if(t){var r=Object(u.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(m.a)(this,a)}}var fs=function(e){Object(d.a)(a,e);var t=hs(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={account:{}},e.loadAccounts=function(t){var a={country_code:e.country_code,to_recon:!0};Pa(e.req({account:a},!0)).then(function(t){t&&("success"===t.status?""!=t.data&&e.getSelectOptionsFromResult(t.data,"lender_accounts",["id","name"]):alert(t.message+"\n"+JSON.stringify(t.data)))})},e}return Object(o.a)(a,[{key:"componentWillMount",value:function(){this.loadAccounts()}},{key:"render",value:function(){var e=this;return r.a.createElement(O.a,{className:"mb-3"},r.a.createElement(O.a.Row,{className:"my-4 justify-content-center",style:{display:"flex",alignItems:"center"}},r.a.createElement("div",{className:"col-3"},r.a.createElement("span",{className:"form-label"},"Accounts"),r.a.createElement("font",{className:"text-danger"},"   *  "),r.a.createElement("select",{id:"account_id",className:"form-control",required:"required",onChange:this.handleChange},this.state.lender_accounts_dd)),r.a.createElement("div",{className:"col-3"},r.a.createElement("span",null,"Start Time"),r.a.createElement("font",{className:"text-danger"}," * "),r.a.createElement(Ht.a,{showTimeInput:!0,onChange:function(t){e.handleDateTimeChange("start_time",t)},closeOnSelect:!0,dateFormat:"DD MMM YYYY"})),r.a.createElement("div",{className:"col-3"},r.a.createElement("span",null,"End time"),r.a.createElement("font",{className:"text-danger"}," * "),r.a.createElement(Ht.a,{showTimeInput:!0,onChange:function(t){e.handleDateTimeChange("end_time",t)},closeOnSelect:!0,dateFormat:"DD MMM YYYY"})),r.a.createElement("div",{className:"col-3"},r.a.createElement("span",{className:"form-label"},"Status"),r.a.createElement("select",{id:"status",className:"form-control",required:"required",onChange:this.handleChange},r.a.createElement("option",{value:""},"Choose"),r.a.createElement("option",{value:"started"},"Started"),r.a.createElement("option",{value:"imported"},"Imported"),r.a.createElement("option",{value:"failed"},"Failed")))))}}]),a}(ut);function vs(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(u.a)(e);if(t){var r=Object(u.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(m.a)(this,a)}}var gs=function(e){Object(d.a)(a,e);var t=vs(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(e=t.call.apply(t,[this].concat(l))).state={stmt_import:{},columns:[],stmt_imports_list:[],stmt_imports_table:"hide_div"},e.handleSearch=function(t){e.validate_search(e.state.stmt_import)&&$e(e.req({stmt_search_criteria:e.state.stmt_import})).then(function(t){if(e.resp(t),t){if("success"===t.status){e.resp(t);var a=e.state.columns;a=[{Header:"Network",id:"network_prvdr_code",accessor:function(e){return r.a.createElement(Le,{logotype:e.network_prvdr_code})}},{Header:"Acc Number",id:"acc_number",accessor:function(e){return r.a.createElement("div",{style:{height:30,width:60}},r.a.createElement("img",{className:"img-fluid",src:"/img/".concat(e.acc_prvdr_code,"_logo_color.png"),alt:e.acc_prvdr_code}),r.a.createElement("span",{className:"ml-2",style:{color:"#17a2b8"}},e.acc_number))}},{Header:"Start Time",id:"start_time",accessor:function(e){return ve(e.start_time,!0)}},{Header:"End Time",id:"end_time",accessor:function(e){return ve(e.end_time,!0)}},{Header:"Duration",id:"dur_secs",accessor:function(e){return r.a.createElement("div",null," ",e.end_time?Ee(e.dur_secs):"NA"," ")}},{Header:"Status",id:"status",accessor:function(e){return Ze(e.status)}}]}e.setState({columns:a,stmt_imports_list:t.data,stmt_imports_table:"show_div"})}})},e}return Object(o.a)(a,[{key:"validate_search",value:function(e){return e.account_id?!(!e.start_time||!e.end_time)||(alert("Please enter valid search criteria"),!1):(alert("Please select accounts"),!1)}},{key:"render",value:function(){return r.a.createElement("div",{className:"container containerTopmargin max-width no-padding"},r.a.createElement("form",{className:"mb-3",autocomplete:"off"},r.a.createElement(ka.a,null,r.a.createElement(ka.a.Header,{style:{backgroundColor:"#01062c",color:"white"}},r.a.createElement("h4",null,"Search Statement Imports")),r.a.createElement(ka.a.Body,{style:{padding:15}},r.a.createElement(fs,{id:"stmt_import",data:this.state.stmt_import,onComponentChange:this.handleComponentChange}),r.a.createElement("div",{className:"form-group row reset-margin justify-content-center py-4"},r.a.createElement(lt.a,{disabled:this.state.calling_api,className:"col-md-2 mr-3 btn btn-primary".concat(this.state.submit_btn_style),onClick:this.handleSearch},"Search"))))),r.a.createElement("div",{className:"mt-3 ".concat(this.state.stmt_imports_table)},r.a.createElement(za,{showPag:!0,minRow:0,row_data:void 0!==this.state.stmt_imports_list?this.state.stmt_imports_list:[],column_data:this.state.columns,resizable:!1,exportCSV:!0,csvFile:"stmt_imports",csvData:this.state.stmt_imports_list?this.state.stmt_imports_list:[],defaultSorted:[{id:"start_time"}]})))}}]),a}(dt),ys=a(183);function Es(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(u.a)(e);if(t){var r=Object(u.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(m.a)(this,a)}}var bs=function(e){Object(d.a)(a,e);var t=Es(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={},e}return Object(o.a)(a,[{key:"componentWillMount",value:function(){this.handleCurdate()}},{key:"handleCurdate",value:function(){var e=new Date;return Object(ys.a)(e,"dd MMM y")}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(O.a,{className:"mb-3"},r.a.createElement(O.a.Row,{className:"my-4",style:{display:"flex",alignItems:"center"}},r.a.createElement("div",{className:"col-3",style:{color:"white"}},r.a.createElement("span",{style:{color:"white"}},"Vendor Code"),r.a.createElement(O.a.Control,{as:"select",id:"vendor_code",onChange:this.handleChange},this.getSelectOptions("vendor"))),r.a.createElement("div",{className:"col-3",style:{color:"white"}},r.a.createElement("span",{style:{color:"white"}},"Direction"),r.a.createElement(O.a.Control,{as:"select",id:"direction",onChange:this.handleChange},this.getSelectOptions("direction"))),r.a.createElement("div",{className:"col-3"},r.a.createElement("span",{style:{color:"white"}},"Start Date"),r.a.createElement("font",{className:"text-danger"}," * "),r.a.createElement(Ht.a,{defaultValue:this.handleCurdate(),onChange:function(t){e.handleDateChange("start_date",t)},closeOnSelect:!0,dateFormat:"DD MMM YYYY",timeFormat:!1})),r.a.createElement("div",{className:"col-3"},r.a.createElement("span",{style:{color:"white"}},"End Date"),r.a.createElement("font",{className:"text-danger"}," * "),r.a.createElement(Ht.a,{defaultValue:this.handleCurdate(),onChange:function(t){e.handleDateChange("end_date",t)},closeOnSelect:!0,dateFormat:"DD MMM YYYY",timeFormat:!1}))),r.a.createElement(O.a.Row,{className:"my-4"},r.a.createElement("div",{className:"col-3",style:{color:"white"}},r.a.createElement("span",{style:{color:"white"}}," Status"),r.a.createElement(O.a.Control,{as:"select",id:"status",onChange:this.handleChange},this.getSelectOptions("sms_status"))),r.a.createElement("div",{className:"col-3",style:{color:"white"}},r.a.createElement("span",{style:{color:"white"}}," Purpose"),r.a.createElement(O.a.Control,{as:"select",id:"purpose",onChange:this.handleChange},this.getSelectOptions("purpose"))),r.a.createElement("div",{className:"col-3",style:{color:"white"}},r.a.createElement("span",{style:{color:"white"}},"FA ID"),r.a.createElement(O.a.Control,{id:"loan_doc_id",onChange:this.handleChange})),r.a.createElement("div",{className:"col-3",style:{color:"white"}},r.a.createElement("span",{style:{color:"white"}}," Mobile Number"),r.a.createElement(O.a.Control,{id:"mobile_num",onChange:this.handleChange}))),r.a.createElement(O.a.Row,{className:"my-4"},r.a.createElement("div",{className:"col-3",style:{color:"white"}},r.a.createElement("span",{style:{color:"white"}},"Search Text"),r.a.createElement(O.a.Control,{id:"search_text",onChange:this.handleChange})))))}}]),a}(ut),ws=function(e){return P("/api/admin/sms/search",e)};function Ns(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(u.a)(e);if(t){var r=Object(u.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(m.a)(this,a)}}var xs=function(e){Object(d.a)(a,e);var t=Ns(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={columns:[],sms_list:[],sms_search_list:{},sms_log_table:"hide_div"},e.handleCurDate=function(){var t=new Date,a=Object(ys.a)(t,"yyyy-MM-dd"),n=e.state.sms_search_list;n.start_date=a,n.end_date=a,e.setState({sms_search_list:n}),e.handleSearch()},e.handleUpperCase=function(e){return null!=e?e.toUpperCase().replace(/_/g," "):e},e.handleSearch=function(t){ws(e.req({sms_search_criteria:e.state.sms_search_list})).then(function(t){if(e.resp(t),t){if("success"===t.status){var a;e.resp(t);var n=e.state.columns;n=[{Header:"Vendor Code",accessor:"vendor_code"},(a={Header:"Vendor Ref Id",accessor:"vendor_ref_id",id:"vendor_ref_id"},Object(k.a)(a,"accessor",function(e){return null==e.vendor_ref_id?"NA":e.vendor_ref_id}),Object(k.a)(a,"width",250),a),{Header:"Mobile Number",accessor:"mobile_num"},{Header:"Status",id:"status",accessor:function(e){return he(e.status)}},{Header:"Direction",id:"direction",accessor:function(e){return he(e.direction)}},{Header:"Purpose",id:"purpose",accessor:function(e){return Ze(e.purpose)}},Object(k.a)({Header:"Loan Doc Id",accessor:"loan_doc_id",id:"loan_doc_id"},"accessor",function(e){return null==e.loan_doc_id?"NA":e.loan_doc_id}),{Header:"Content",accessor:"content",style:{whiteSpace:"unset"},width:400},{Header:"Created At",accessor:"created_at"}]}e.setState({columns:n,sms_list:t.data,sms_log_table:"show_div"})}})},e}return Object(o.a)(a,[{key:"componentWillMount",value:function(){this.handleCurDate()}},{key:"render",value:function(){return r.a.createElement("div",{className:"container containerTopmargin max-width no-padding"},r.a.createElement("form",{className:"mb-3",autocomplete:"off"},r.a.createElement(ka.a,null,r.a.createElement(ka.a.Header,{style:{backgroundColor:"#01062c",color:"white"}},r.a.createElement("h4",null,"SMS Logs")),r.a.createElement(ka.a.Body,{style:{padding:15}},r.a.createElement(bs,{id:"sms_search_list",onComponentChange:this.handleComponentChange}),r.a.createElement("div",{className:"form-group row reset-margin justify-content-center py-4"},r.a.createElement(lt.a,{disabled:this.state.calling_api,className:"col-md-2 mr-3 btn btn-primary",onClick:this.handleSearch},"Search"))))),!gc.a.isEmpty(this.state.sms_search_list)&&r.a.createElement("div",{className:"mt-3 ".concat(this.state.sms_log_table)},r.a.createElement("p",{className:"no-margin text-white"},r.a.createElement("b",null,"Total Entries : ",this.state.sms_search_list.length)),r.a.createElement(za,{showPag:!0,minRow:0,row_data:void 0!==this.state.sms_list?this.state.sms_list:[],column_data:this.state.columns,resizable:!1,exportCSV:!0,csvFile:"sms",csvData:this.state.sms_list?this.state.sms_list:[]})))}}]),a}(dt);function Cs(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(u.a)(e);if(t){var r=Object(u.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(m.a)(this,a)}}var ks=function(e){Object(d.a)(a,e);var t=Cs(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={},e}return Object(o.a)(a,[{key:"componentWillMount",value:function(){this.handleCurdate()}},{key:"handleCurdate",value:function(){var e=new Date;return Object(ys.a)(e,"dd MMM y")}},{key:"handlePurposeList",value:function(){var e=Ke("purpose",null),t=[];if(e.length>0)return"all"==this.props.data.otp_type?t=e.map(function(e,t){return r.a.createElement(r.a.Fragment,null,r.a.createElement("option",{key:t,value:e.data_code},e.data_value))}):"otp"==this.props.data.otp_type?t=e.map(function(e,t){if(!0===e.data_value.includes("OTP"))return r.a.createElement("option",{key:t,value:e.data_code},e.data_value)}):"non_otp"==this.props.data.otp_type&&(t=e.map(function(e,t){if(!1===e.data_value.includes("OTP"))return r.a.createElement("option",{key:t,value:e.data_code},e.data_value)})),t}},{key:"render",value:function(){var e=this;return r.a.createElement(O.a,{className:"mb-3"},r.a.createElement(O.a.Row,{className:"my-4",style:{display:"flex",alignItems:"center"}},r.a.createElement("div",{className:"col-3",style:{color:"white"}},r.a.createElement("span",{style:{color:"white"}},"OTP Type"),r.a.createElement("font",{className:"text-danger"}," * "),r.a.createElement(O.a.Control,{as:"select",id:"otp_type",onChange:this.handleChange},r.a.createElement("option",{value:""},"choose"),r.a.createElement("option",{value:"all"},"ALL"),r.a.createElement("option",{value:"otp"},"OTP"),r.a.createElement("option",{value:"non_otp"},"NON OTP"))),r.a.createElement("div",{className:"col-3",style:{color:"white"}},r.a.createElement("span",{style:{color:"white"}}," Purpose"),r.a.createElement(O.a.Control,{as:"select",id:"purpose",onChange:this.handleChange},r.a.createElement("option",{value:""},"choose"),this.handlePurposeList())),r.a.createElement("div",{className:"col-3"},r.a.createElement("span",{style:{color:"white"}},"Start Date"),r.a.createElement("font",{className:"text-danger"}," * "),r.a.createElement(Ht.a,{defaultValue:this.handleCurdate(),onChange:function(t){e.handleDateChange("start_date",t)},closeOnSelect:!0,dateFormat:"DD MMM YYYY",timeFormat:!1})),r.a.createElement("div",{className:"col-3"},r.a.createElement("span",{style:{color:"white"}},"End Date"),r.a.createElement("font",{className:"text-danger"}," * "),r.a.createElement(Ht.a,{defaultValue:this.handleCurdate(),onChange:function(t){e.handleDateChange("end_date",t)},closeOnSelect:!0,dateFormat:"DD MMM YYYY",timeFormat:!1}))),r.a.createElement(O.a.Row,{className:"my-4"},r.a.createElement("div",{className:"col-3",style:{color:"white"}},r.a.createElement("span",{style:{color:"white"}},"Vendor Code"),r.a.createElement(O.a.Control,{as:"select",id:"vendor_code",onChange:this.handleChange},this.getSelectOptions("vendor"))),r.a.createElement("div",{className:"col-3",style:{color:"white"}},r.a.createElement("span",{style:{color:"white"}},"Direction"),r.a.createElement(O.a.Control,{as:"select",id:"direction",onChange:this.handleChange},this.getSelectOptions("direction"))),r.a.createElement("div",{className:"col-3",style:{color:"white"}},r.a.createElement("span",{style:{color:"white"}}," Status"),r.a.createElement(O.a.Control,{as:"select",id:"status",onChange:this.handleChange},this.getSelectOptions("sms_status"))),r.a.createElement("div",{className:"col-3",style:{color:"white"}},r.a.createElement("span",{style:{color:"white"}},"Float Advance ID"),r.a.createElement(O.a.Control,{id:"loan_doc_id",onChange:this.handleChange}))),r.a.createElement(O.a.Row,{className:"my-4"},r.a.createElement("div",{className:"col-3",style:{color:"white"}},r.a.createElement("span",{style:{color:"white"}}," Mobile Number"),r.a.createElement(O.a.Control,{id:"mobile_num",onChange:this.handleChange}))))}}]),a}(ut);function Ss(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(u.a)(e);if(t){var r=Object(u.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(m.a)(this,a)}}var Os=function(e){Object(d.a)(a,e);var t=Ss(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={columns:[],report_list:[],sms_report_list:{},sms_report_table:"hide_div"},e.handleCurDate=function(){var t=new Date,a=Object(ys.a)(t,"yyyy-MM-dd"),n=e.state.sms_report_list;n.start_date=a,n.end_date=a,e.setState({sms_report_list:n}),e.handleSearch()},e.handleUpperCase=function(e){return e.toUpperCase().replace(/_/g," ")},e.handleSearch=function(t){Cl(e.req({sms_report_criteria:e.state.sms_report_list})).then(function(t){if(e.resp(t),t){if("success"===t.status){e.resp(t);var a=e.state.columns;a=[{Header:"Vendor Code",accessor:"vendor_code"},{Header:"Direction",id:"direction",accessor:function(e){return pe(e.direction)}},{Header:"Status",id:"status",accessor:function(e){return pe(e.status)}},{Header:"Purpose",id:"purpose",accessor:function(e){return null==e.purpose?"NA":Ze(e.purpose)}},{Header:"Counts",accessor:"sms_counts"}]}e.setState({columns:a,report_list:t.data,sms_report_table:"show_div"})}})},e}return Object(o.a)(a,[{key:"componentWillMount",value:function(){this.handleCurDate()}},{key:"render",value:function(){return r.a.createElement("div",{className:"container containerTopmargin max-width no-padding"},r.a.createElement("form",{className:"mb-3",autocomplete:"off"},r.a.createElement(ka.a,null,r.a.createElement(ka.a.Header,{style:{backgroundColor:"#01062c",color:"white"}},r.a.createElement("h4",null,"SMS Reports")),r.a.createElement(ka.a.Body,{style:{padding:15}},r.a.createElement(ks,{id:"sms_report_list",onComponentChange:this.handleComponentChange,data:this.state.sms_report_list}),r.a.createElement("div",{className:"form-group row reset-margin justify-content-center py-4"},r.a.createElement(lt.a,{disabled:this.state.calling_api,className:"col-md-2 mr-3 btn btn-primary",onClick:this.handleSearch},"SUBMIT"))))),!gc.a.isEmpty(this.state.sms_report_list)&&r.a.createElement("div",{className:"mt-3 ".concat(this.state.sms_report_table)},r.a.createElement(za,{showPag:!0,minRow:0,row_data:void 0!==this.state.report_list?this.state.report_list:[],column_data:this.state.columns,resizable:!1,exportCSV:!0,csvFile:"sms",csvData:this.state.report_list?this.state.report_list:[]})))}}]),a}(dt);function As(){As=function(){return e};var e={},t=Object.prototype,a=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",l=n.asyncIterator||"@@asyncIterator",c=n.toStringTag||"@@toStringTag";function s(e,t,a){return Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(k){s=function(e,t,a){return e[t]=a}}function o(e,t,a,n){var r=t&&t.prototype instanceof m?t:m,l=Object.create(r.prototype),c=new N(n||[]);return l._invoke=function(e,t,a){var n="suspendedStart";return function(r,l){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===r)throw l;return C()}for(a.method=r,a.arg=l;;){var c=a.delegate;if(c){var s=E(c,a);if(s){if(s===d)continue;return s}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===n)throw n="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);n="executing";var o=i(e,t,a);if("normal"===o.type){if(n=a.done?"completed":"suspendedYield",o.arg===d)continue;return{value:o.arg,done:a.done}}"throw"===o.type&&(n="completed",a.method="throw",a.arg=o.arg)}}}(e,a,c),l}function i(e,t,a){try{return{type:"normal",arg:e.call(t,a)}}catch(k){return{type:"throw",arg:k}}}e.wrap=o;var d={};function m(){}function u(){}function p(){}var _={};s(_,r,function(){return this});var h=Object.getPrototypeOf,f=h&&h(h(x([])));f&&f!==t&&a.call(f,r)&&(_=f);var v=p.prototype=m.prototype=Object.create(_);function g(e){["next","throw","return"].forEach(function(t){s(e,t,function(e){return this._invoke(t,e)})})}function y(e,t){var n;this._invoke=function(r,l){function c(){return new t(function(n,c){!function n(r,l,c,s){var o=i(e[r],e,l);if("throw"!==o.type){var d=o.arg,m=d.value;return m&&"object"==typeof m&&a.call(m,"__await")?t.resolve(m.__await).then(function(e){n("next",e,c,s)},function(e){n("throw",e,c,s)}):t.resolve(m).then(function(e){d.value=e,c(d)},function(e){return n("throw",e,c,s)})}s(o.arg)}(r,l,n,c)})}return n=n?n.then(c,c):c()}}function E(e,t){var a=e.iterator[t.method];if(void 0===a){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method))return d;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var n=i(a,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,d;var r=n.arg;return r?r.done?(t[e.resultName]=r.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):r:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function b(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function w(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function N(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(b,this),this.reset(!0)}function x(e){if(e){var t=e[r];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,l=function t(){for(;++n<e.length;)if(a.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return l.next=l}}return{next:C}}function C(){return{value:void 0,done:!0}}return u.prototype=p,s(v,"constructor",p),s(p,"constructor",u),u.displayName=s(p,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===u||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,s(e,c,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},g(y.prototype),s(y.prototype,l,function(){return this}),e.AsyncIterator=y,e.async=function(t,a,n,r,l){void 0===l&&(l=Promise);var c=new y(o(t,a,n,r),l);return e.isGeneratorFunction(a)?c:c.next().then(function(e){return e.done?e.value:c.next()})},g(v),s(v,c,"Generator"),s(v,r,function(){return this}),s(v,"toString",function(){return"[object Generator]"}),e.keys=function(e){var t=[];for(var a in e)t.push(a);return t.reverse(),function a(){for(;t.length;){var n=t.pop();if(n in e)return a.value=n,a.done=!1,a}return a.done=!0,a}},e.values=x,N.prototype={constructor:N,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!e)for(var t in this)"t"===t.charAt(0)&&a.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(a,n){return c.type="throw",c.arg=e,t.next=a,n&&(t.method="next",t.arg=void 0),!!n}for(var r=this.tryEntries.length-1;r>=0;--r){var l=this.tryEntries[r],c=l.completion;if("root"===l.tryLoc)return n("end");if(l.tryLoc<=this.prev){var s=a.call(l,"catchLoc"),o=a.call(l,"finallyLoc");if(s&&o){if(this.prev<l.catchLoc)return n(l.catchLoc,!0);if(this.prev<l.finallyLoc)return n(l.finallyLoc)}else if(s){if(this.prev<l.catchLoc)return n(l.catchLoc,!0)}else{if(!o)throw new Error("try statement without catch or finally");if(this.prev<l.finallyLoc)return n(l.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&a.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var l=r;break}}l&&("break"===e||"continue"===e)&&l.tryLoc<=t&&t<=l.finallyLoc&&(l=null);var c=l?l.completion:{};return c.type=e,c.arg=t,l?(this.method="next",this.next=l.finallyLoc,d):this.complete(c)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.finallyLoc===e)return this.complete(a.completion,a.afterLoc),w(a),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.tryLoc===e){var n=a.completion;if("throw"===n.type){var r=n.arg;w(a)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,a){return this.delegate={iterator:x(e),resultName:t,nextLoc:a},"next"===this.method&&(this.arg=void 0),d}},e}var js=function(e){var t=v("market");function a(){return(a=Object(j.a)(As().mark(function a(){return As().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,B(D+"/whatsapp/logout",{country_code:t.country_code,time_zone:t.time_zone,session:e.mobile_num});case 2:a.sent,e.deleteSession(e.id);case 4:case"end":return a.stop()}},a)}))).apply(this,arguments)}return r.a.createElement("tr",{className:"whatsapp-tr"},r.a.createElement("td",{className:"whatsapp-border whatsapp-padding"},e.mobile_num),r.a.createElement("td",{className:"whatsapp-border whatsapp-padding"},e.userId),r.a.createElement("td",{className:"whatsapp-border whatsapp-padding"},r.a.createElement("button",{className:"logoutBtn",onClick:function(){return a.apply(this,arguments)}},"Logout")))};var Rs=function(e){console.log(e.result);var t=Object(n.useState)(!0),a=Object(_a.a)(t,2),l=a[0],c=a[1],s=Object(n.useState)(!1),o=Object(_a.a)(s,2),i=o[0],d=o[1],m=Object(n.useState)(!0),u=Object(_a.a)(m,2),p=u[0],_=u[1];function h(t){return r.a.createElement(js,{id:t.id,key:t.id,mobile_num:t.mobile_num,userId:t.userId,deleteSession:e.deleteSession})}return Object(n.useEffect)(function(){e.result[0].mobile_num?"No session found!"===e.result[0].mobile_num?(console.log(e.result),c(!1),_(!1)):d(!0):setTimeout(function(){_("")},5e3)},[p]),!p&&(l&&i?r.a.createElement("div",null,r.a.createElement("table",{className:"whatsapp-table whatsapp-border"},r.a.createElement("tbody",null,r.a.createElement("tr",{className:"whatsapp-tr"},r.a.createElement("th",{className:"whatsapp-border whatsapp-padding"},"MOBILE NUMBER"),r.a.createElement("th",{className:"whatsapp-border whatsapp-padding"},"USER ID"),r.a.createElement("th",{className:"whatsapp-border whatsapp-padding"},"LOGOUT")),e.result.map(h)))):r.a.createElement("h4",null,e.result[0].mobile_num))};function Ds(){Ds=function(){return e};var e={},t=Object.prototype,a=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",l=n.asyncIterator||"@@asyncIterator",c=n.toStringTag||"@@toStringTag";function s(e,t,a){return Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(k){s=function(e,t,a){return e[t]=a}}function o(e,t,a,n){var r=t&&t.prototype instanceof m?t:m,l=Object.create(r.prototype),c=new N(n||[]);return l._invoke=function(e,t,a){var n="suspendedStart";return function(r,l){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===r)throw l;return C()}for(a.method=r,a.arg=l;;){var c=a.delegate;if(c){var s=E(c,a);if(s){if(s===d)continue;return s}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===n)throw n="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);n="executing";var o=i(e,t,a);if("normal"===o.type){if(n=a.done?"completed":"suspendedYield",o.arg===d)continue;return{value:o.arg,done:a.done}}"throw"===o.type&&(n="completed",a.method="throw",a.arg=o.arg)}}}(e,a,c),l}function i(e,t,a){try{return{type:"normal",arg:e.call(t,a)}}catch(k){return{type:"throw",arg:k}}}e.wrap=o;var d={};function m(){}function u(){}function p(){}var _={};s(_,r,function(){return this});var h=Object.getPrototypeOf,f=h&&h(h(x([])));f&&f!==t&&a.call(f,r)&&(_=f);var v=p.prototype=m.prototype=Object.create(_);function g(e){["next","throw","return"].forEach(function(t){s(e,t,function(e){return this._invoke(t,e)})})}function y(e,t){var n;this._invoke=function(r,l){function c(){return new t(function(n,c){!function n(r,l,c,s){var o=i(e[r],e,l);if("throw"!==o.type){var d=o.arg,m=d.value;return m&&"object"==typeof m&&a.call(m,"__await")?t.resolve(m.__await).then(function(e){n("next",e,c,s)},function(e){n("throw",e,c,s)}):t.resolve(m).then(function(e){d.value=e,c(d)},function(e){return n("throw",e,c,s)})}s(o.arg)}(r,l,n,c)})}return n=n?n.then(c,c):c()}}function E(e,t){var a=e.iterator[t.method];if(void 0===a){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method))return d;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var n=i(a,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,d;var r=n.arg;return r?r.done?(t[e.resultName]=r.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):r:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function b(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function w(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function N(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(b,this),this.reset(!0)}function x(e){if(e){var t=e[r];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,l=function t(){for(;++n<e.length;)if(a.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return l.next=l}}return{next:C}}function C(){return{value:void 0,done:!0}}return u.prototype=p,s(v,"constructor",p),s(p,"constructor",u),u.displayName=s(p,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===u||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,s(e,c,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},g(y.prototype),s(y.prototype,l,function(){return this}),e.AsyncIterator=y,e.async=function(t,a,n,r,l){void 0===l&&(l=Promise);var c=new y(o(t,a,n,r),l);return e.isGeneratorFunction(a)?c:c.next().then(function(e){return e.done?e.value:c.next()})},g(v),s(v,c,"Generator"),s(v,r,function(){return this}),s(v,"toString",function(){return"[object Generator]"}),e.keys=function(e){var t=[];for(var a in e)t.push(a);return t.reverse(),function a(){for(;t.length;){var n=t.pop();if(n in e)return a.value=n,a.done=!1,a}return a.done=!0,a}},e.values=x,N.prototype={constructor:N,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!e)for(var t in this)"t"===t.charAt(0)&&a.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(a,n){return c.type="throw",c.arg=e,t.next=a,n&&(t.method="next",t.arg=void 0),!!n}for(var r=this.tryEntries.length-1;r>=0;--r){var l=this.tryEntries[r],c=l.completion;if("root"===l.tryLoc)return n("end");if(l.tryLoc<=this.prev){var s=a.call(l,"catchLoc"),o=a.call(l,"finallyLoc");if(s&&o){if(this.prev<l.catchLoc)return n(l.catchLoc,!0);if(this.prev<l.finallyLoc)return n(l.finallyLoc)}else if(s){if(this.prev<l.catchLoc)return n(l.catchLoc,!0)}else{if(!o)throw new Error("try statement without catch or finally");if(this.prev<l.finallyLoc)return n(l.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&a.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var l=r;break}}l&&("break"===e||"continue"===e)&&l.tryLoc<=t&&t<=l.finallyLoc&&(l=null);var c=l?l.completion:{};return c.type=e,c.arg=t,l?(this.method="next",this.next=l.finallyLoc,d):this.complete(c)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.finallyLoc===e)return this.complete(a.completion,a.afterLoc),w(a),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.tryLoc===e){var n=a.completion;if("throw"===n.type){var r=n.arg;w(a)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,a){return this.delegate={iterator:x(e),resultName:t,nextLoc:a},"next"===this.method&&(this.arg=void 0),d}},e}var Fs=function(){var e=!0,t=Object(n.useState)(""),a=Object(_a.a)(t,2),l=a[0],c=a[1],s=Object(n.useState)(""),o=Object(_a.a)(s,2),i=o[0],d=o[1],m=Object(n.useState)(""),u=Object(_a.a)(m,2),p=u[0],_=u[1],h=Object(n.useState)(!0),f=Object(_a.a)(h,2),g=f[0],y=f[1],E=v("market");function b(){return(b=Object(j.a)(Ds().mark(function e(){var t;return Ds().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B(D+"/whatsapp/connect",{country_code:E.country_code,time_zone:E.time_zone});case 2:t=e.sent,c(t.data.qrCode),d(t.data.sessionId),y(!1);case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function w(){return N.apply(this,arguments)}function N(){return(N=Object(j.a)(Ds().mark(function e(){var t;return Ds().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B(D+"/whatsapp/check_session_status",{country_code:E.country_code,time_zone:E.time_zone,sessionId:i});case 2:if("You have been logged in successfully!"!==(t=e.sent).data.error){e.next=7;break}return e.abrupt("return",_(t.data.error));case 7:return e.abrupt("return",y(!0));case 8:case"end":return e.stop()}},e)}))).apply(this,arguments)}var x=function(){!function(){b.apply(this,arguments)}(),setTimeout(function(){w()},1e4)};return Object(n.useEffect)(function(){g&&x()},[g]),Object(n.useEffect)(function(){if(!g){g&&"You have been logged in successfully!"===p&&clearInterval(e);var e=setTimeout(function(){w()},7500);return function(){return clearInterval(e)}}},[g]),"You have been logged in successfully!"===p&&(e=!1),r.a.createElement("div",{className:"QrCodeModal"},r.a.createElement("div",{className:"QrCodeModalContent"},e&&r.a.createElement("div",{className:"QrCodeModalBody"},r.a.createElement("img",{src:l})),!e&&r.a.createElement("h4",{style:{color:"black",padding:"20px"}},p),r.a.createElement("div",{className:"QrCodeModalFooter"},r.a.createElement(ee.a,{to:"/whatsapp"},r.a.createElement("button",{className:"qrCodeCloseBtn"},"Close")))))};var Ls=function(){var e=v("market"),t=Object(n.useState)([{id:0,mobile_num:""}]),a=Object(_a.a)(t,2),l=a[0],c=a[1];return Object(n.useEffect)(function(){var t={country_code:e.country_code,time_zone:e.time_zone};B(D+"/whatsapp/get_sessions",t).then(function(e){c(e.data.error)})},[]),r.a.createElement("div",null,r.a.createElement("div",{className:"WhatsappLoggedPersondetailsBox"},r.a.createElement("h5",null,"EXISTING SESSIONS"),r.a.createElement(Rs,{result:l,deleteSession:function(e){c(function(t){return t.filter(function(t){return t.id!=e})})}})),r.a.createElement("div",{className:"WhatsappLoggedPersondetailsBox"},r.a.createElement(ee.a,{to:"/whatsapp/connect"},r.a.createElement("button",{className:"loginBtn"},r.a.createElement("h4",null,"Add New Session")))))},Ps=function(e){return P("/api/admin/rel_mgr",e)},Bs=function(e){return P("/api/admin/rel_mgr/view",e)},Ms=function(e){return P("/api/admin/rel_mgr/list",e)},Ts=function(e){return P("/api/admin/rm_assign/",e)},Hs=function(e){return P("/api/admin/rm_targets/update",e)},qs=function(e){return P("/api/admin/rm_assign/temp_rm_details",e)};function zs(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(u.a)(e);if(t){var r=Object(u.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(m.a)(this,a)}}var Is=function(e){Object(d.a)(a,e);var t=zs(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){var e=this,t=this.props.cur_month;return r.a.createElement("div",{className:"col-md-2",style:{paddingBottom:15}},r.a.createElement(O.a.Label,null,"Month & Year "),r.a.createElement(Ht.a,{id:"date",closeOnSelect:!0,dateFormat:"MMM YYYY",timeFormat:!1,required:"required",onChange:function(t){e.handleDateChange("past_month",t)},maxMonth:t}))}}]),a}(ut);function Ws(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(u.a)(e);if(t){var r=Object(u.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(m.a)(this,a)}}var Ys=function(e){Object(d.a)(a,e);var t=Ws(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={columns:[],lists:[],copy:[],show_target_text:!1,add_targets:!1,new_target:!1,view:null,assigned:{},edited_target:{},editable:!1,save:!1,edit:!1,next_targets:{}},e.handleComponentChange=function(t,a){var n=t.target.id,r=t.target.value;e.setState(Object(k.a)({},n,r))},e.handleCurDate=function(){var t=new Date,a=Object(ys.a)(t,"yyyy-MM-01"),n=(new Date(a),t.toLocaleString("en-US",{month:"long"}));e.setState({past_target:!1,show_target_text:!1,add_targets:!1,cur_month:a,view_month_name:n+" Month Targets"}),e.drawTable(a)},e.showAddTarget=function(t){var a=new Date,n=new Date(a.getFullYear(),a.getMonth(),1),r=Object(ys.a)(n,"yyyy-MM-01"),l=new Date(n.setMonth(n.getMonth()+1)).toLocaleString("en-US",{month:"long"});e.setState({view_month_name:l+" Month Targets",show_target_text:!0,add_targets:!0,past_target:!1,new_target:!1,cur_month:r}),e.drawTable(r)},e.showPastTarget=function(t){e.setState({past_target:!0,show_target_text:!1,new_target:!1,add_targets:!1})},e.handleSearch=function(t){var a=new Date,n=a.setMonth(a.getMonth()+1),r=new Date(e.state.past_month);if(r<=n){var l=r.toLocaleString("en-US",{month:"long"});e.setState({view_month_name:l+" Month Targets"}),e.drawTable(e.state.past_month)}else e.drawTable(e.state.past_month)},e.addTarget=function(t,a){var n=a.original.rm_id,r=Number(t.target.value),l=e.state.assigned;l[n]=r,e.setState({assigned:l})},e.handleSubmit=function(t){var a=new Date(Date.now()),n=new Date(a.getFullYear(),a.getMonth(),1),r=Object(ys.a)(n,"yyyy-MM-01"),l=(n.setMonth(n.getMonth()+1),Object(ys.a)(n,"yyyy-MM-01"));e.setState({new_target:!0,edit:!0}),Hs(e.req({data:{target:e.state.assigned,target_month:l,month:r}})),e.handleView()},e.handleView=function(){e.setState({new_target:!0,show_target_text:!1,editable:!1,save:!1}),e.handleCurDate()},e.handleEditValues=function(){e.setState({editable:!0,save:!0,edit:!1})},e.handleSave=function(t){var a=new Date(Date.now()),n=new Date(a.getFullYear(),a.getMonth(),1),r=Object(ys.a)(n,"yyyy-MM-01"),l=(n.setMonth(n.getMonth()+1),Object(ys.a)(n,"yyyy-MM-01"));e.setState({new_target:!0,show_target_text:!1}),Hs(e.req({data:{target:e.state.edited_target,target_month:l,month:r}})),e.handleView()},e}return Object(o.a)(a,[{key:"componentWillMount",value:function(){this.handleCurDate(),this.handleButtonName()}},{key:"handleButtonName",value:function(){var e=new Date(Date.now()),t=new Date(e.getFullYear(),e.getMonth(),1),a=t.toLocaleString("en-US",{month:"long"}),n=new Date(t.setMonth(t.getMonth()+1)).toLocaleString("en-US",{month:"long"});this.setState({cur_month_name:a+" Targets",next_month_name:"Add "+n+" Targets"})}},{key:"getPastTarget",value:function(){var e=this;this.state.row_datas.forEach(function(t){var a=t.rm_id,n=e.state.assigned;n[a]=Number(t.targetted),e.setState({assigned:n})})}},{key:"getNextTarget",value:function(){var e=this;this.state.row_datas.forEach(function(t){var a=t.rm_id,n=e.state.next_targets;null!==t.next_targets?(n[a]=Number(t.next_targets),e.setState({next_targets:n})):e.setState({next_targets:{}})})}},{key:"Editable",value:function(e,t){var a=t.original.rm_id,n=Number(e.target.value),r=this.state.edited_target;r[a]=n,this.setState({edited_target:r})}},{key:"cellEditable",value:function(e){var t=this;return 1==this.state.editable?r.a.createElement("td",null,r.a.createElement("input",{type:"text",style:{width:"100px"},defaultValue:e.value,onChange:function(a){return t.Editable(a,e)}})):e.row.next_targets}},{key:"updateTarget",value:function(e){var t=this;return 0==Object.keys(this.state.next_targets).length?r.a.createElement("td",null,r.a.createElement("input",{type:"text",style:{width:"100px"},defaultValue:e.value,onChange:function(a){return t.addTarget(a,e)}})):e.row.next_targets}},{key:"drawTable",value:function(e){var t,a=this;(t=this.req({month:e,view:"next_month"}),P("/api/admin/rm_targets/view",t)).then(function(e){e&&"success"===e.status&&(a.setState(function(t){return t.columns=a.columndatas(e.data.headers)}),e.data.records_arr&&(a.setState({row_datas:e.data.records_arr,copy:e.data.records_arr}),a.getPastTarget(),a.getNextTarget()))})}},{key:"columndatas",value:function(e){var t=this;return[{Header:r.a.createElement("p",{style:{fontSize:"13px"}},e.rm_name),id:"rm_name",accessor:function(e){return e.rm_name},minWidth:100,maxWidth:375},{Header:r.a.createElement("p",{style:{fontSize:"13px"}},e.month),id:"targetted",accessor:function(e){return e.targetted},minWidth:50,maxWidth:200},{Header:r.a.createElement("p",{style:{fontSize:"13px"}},e.month_accquired),id:"month_accquired",accessor:function(e){return r.a.createElement("div",{className:"text-justify"},e.month_accquired)},minWidth:50,maxWidth:200},{Header:r.a.createElement("p",{style:{fontSize:"13px"}},e.accquired),id:"accquired",accessor:function(e){return e.accquired},minWidth:50,maxWidth:200},{Header:r.a.createElement("p",{style:{fontSize:"13px"}},e.add_targets),accessor:"targetted",Cell:function(e){return t.updateTarget(e)},show:this.state.show_target_text,minWidth:50,maxWidth:200},{Header:r.a.createElement("p",{style:{fontSize:"13px"}},e.add_targets),id:"next_targets",accessor:function(e){return e.next_targets},show:this.state.new_target,Cell:function(e){return t.cellEditable(e)},minWidth:50,maxWidth:200}]}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"mb-3"},r.a.createElement("h5",{style:{color:"white"}},this.props.title)),r.a.createElement("div",{className:"row mb-5"},r.a.createElement("ul",{class:"nav nav-tabs"},r.a.createElement("li",{className:"nav-item pr-1"},r.a.createElement(lt.a,{onClick:this.showPastTarget},"View Targets")),r.a.createElement("li",{className:"nav-item pr-1"},r.a.createElement(lt.a,{onClick:this.handleCurDate},this.state.cur_month_name)),r.a.createElement("li",{className:"nav-item pr-1"},r.a.createElement(lt.a,{disabled:this.state.past_target,onClick:this.showAddTarget},this.state.next_month_name)))),this.state.past_target&&r.a.createElement("div",{className:"row mb-3"},r.a.createElement(Is,{id:"past_month",data:this.state.past_month,cur_date:this.state.cur_month,onComponentChange:this.handleComponentChange}),r.a.createElement("div",{className:"col-mt-2  mt-4"},r.a.createElement(lt.a,{onClick:this.handleSearch},"Show"))),r.a.createElement("div",{className:"text-center"},r.a.createElement("h5",{style:{color:"white"}},this.state.view_month_name)),r.a.createElement("div",{className:"card-body m-auto",style:{width:"850px"}},r.a.createElement(za,{showPag:!0,defaultPageSize:15,minRow:0,row_data:void 0!==this.state.copy?this.state.copy:[],column_data:this.state.columns,resizable:!1,defaultSorted:[{id:"RM Target",desc:!0}]})),this.state.add_targets&&0==Object.keys(this.state.next_targets).length&&r.a.createElement("div",{className:"col-md-12 text-center mt-5"},r.a.createElement(lt.a,{onClick:this.handleSubmit},"Submit")),this.state.edit&&r.a.createElement("div",{className:"text-center mt-5 "},r.a.createElement(lt.a,{onClick:this.handleEditValues},"Edit")),this.state.save&&r.a.createElement("div",{className:"text-center mt-5"},r.a.createElement(lt.a,{className:"ml-5",onClick:this.handleSave},"Save")),r.a.createElement("div",{className:"mt-5 mb-5"},r.a.createElement("p",{style:{color:"white"}},"NOTE ** Please ensure that you have Assigned Targets for Relationship Managers Before Start of the Next Month")))}}]),a}(dt);function Vs(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(u.a)(e);if(t){var r=Object(u.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(m.a)(this,a)}}var Us=function(e){Object(d.a)(a,e);var t=Vs(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={row_Datas:[],columndatas:[],rowdatas_cust_performance:[],rowdatas_outstanding:[],columndata_outstanding:[],original_row_datas:[],columndata_cust_performance:[],columndata_cust_performance2:[],country_code:v("market").country_code,country:v("market").country,activeCurrency:v("market").currency_code,activeCurrencyVal:1,active_acc_prvdr:null,gds_report_active_accPrvds:"",report_date:""},e.getListTitle=function(){switch(e.props.report_type){case"portfolio_at_risk":return"Portfolio at Risk";case"customer_performance":return"Customer Performance";case"outstanding_advances":return"Outstanding Advances"}},e}return Object(o.a)(a,[{key:"componentWillMount",value:function(){var e=this;"portfolio_at_risk"==this.props.report_type&&(this.get_gds_report(),this.setState(function(t){return t.columndatas=e.columndatas_Portfolio()})),"customer_performance"==this.props.report_type?(this.customerPerformance(),this.setState(function(t){return t.columndata_cust_performance=e.columndatas_cust_performance()}),this.setState(function(t){return t.columndata_cust_performance2=e.columndatas_cust_performance2()})):"outstanding_advances"==this.props.report_type&&(this.outstanding_performance(),this.setState(function(t){return t.columndata_outstanding=e.columndatas_outstanding()}))}},{key:"get_gds_report",value:function(e){var t=this;wl({report_type:"get_portfolio_risk",time_zone:v("market").time_zone,country_code:this.state.country_code}).then(function(e){e&&"success"==e.status&&t.setState({original_row_datas:e.data.report,report_date:e.data.report_date},t.accprvds_handler)})}},{key:"customerPerformance",value:function(){var e=this;wl({report_type:"get_cust_performance",time_zone:v("market").time_zone,country_code:this.state.country_code}).then(function(t){t&&"success"==t.status&&(console.log("rowdatas_cust_performance",t.data),e.setState({rowdatas_cust_performance:t.data.perf_list,original_row_datas:t.data.full_perf_list,report_date:t.data.report_date},e.accprvds_handler))})}},{key:"columndatas_Portfolio",value:function(){var e=this;return[{Header:"SI No",accessor:"account_id",maxWidth:150,width:180,Cell:function(e){return r.a.createElement("div",null,e.row.index+1)}},{Header:"Account Provider",id:"acc_prvdr_code",maxWidth:150,width:200,accessor:"acc_prvdr_code",Cell:function(e){return r.a.createElement(r.a.Fragment,null,"   ",r.a.createElement(Le,{logotype:e.row.original.acc_prvdr_code}))}},{Header:"Par Days",id:"par_days",accessor:"par_days",maxWidth:180,width:200,Cell:function(e){return r.a.createElement(r.a.Fragment,null,e.row.original.par_days)}},{Header:"Portfolio quality",id:"country_code",accessor:"country_code",maxWidth:200,width:200,Cell:function(e){return r.a.createElement(r.a.Fragment,null,e.row.original.country_code)},Footer:"Grand Total"},{Header:"Amount",id:"par_loan_principal",maxWidth:200,width:200,accessor:"par_loan_principal",Cell:function(t){return r.a.createElement("div",null,e.amount_Usd_convertion(t.row.original.par_loan_principal,"active_currencyConversion"))},Footer:function(t){var a=r.a.useMemo(function(){return t.rows.reduce(function(t,a){return e.amount_Usd_convertion(a.values.par_loan_principal,"totalCalculation")+t},0)},[t]);return r.a.createElement("div",null,r.a.createElement("b",null," ",a.toFixed(3)+" "+e.state.activeCurrency),"  ")}},{Header:"Percentage",id:"percentage",maxWidth:150,width:260,accessor:"percentage",Cell:function(e){return r.a.createElement("div",null,(100*e.row.original.percentage).toFixed(2),"%")}}]}},{key:"columndatas_outstanding",value:function(){var e=this;return[{Header:r.a.createElement("div",{className:"text-center"},"SI No"),accessor:"SI No",Cell:function(e){return r.a.createElement("div",{className:"text-center"},e.row.index+1)}},{Header:"Partner ID",id:"partner_id",accessor:"partner_id",Cell:function(e){return r.a.createElement(r.a.Fragment,null,e.row.original.partner_id)}},{Header:"Account Provider",id:"acc_prvdr_code",maxWidth:150,width:200,accessor:"data_prvdr_code",Cell:function(e){return r.a.createElement(r.a.Fragment,null,"  ",r.a.createElement(Le,{logotype:e.row.original.data_prvdr_code}))},Footer:"Grand Total"},{Header:"Name",id:"biz_name",accessor:"biz_name",maxWidth:200,width:260,Cell:function(e){return r.a.createElement("div",null,e.row.original.biz_name)}},{Header:"Mobile",id:"cust_mobile_num",accessor:"cust_mobile_num",Cell:function(e){return r.a.createElement(r.a.Fragment,null,e.row.original.cust_mobile_num)}},{Header:"Partner RM",id:"dp_rel_mgr_id",accessor:"dp_rel_mgr_id",Cell:function(e){return r.a.createElement(r.a.Fragment,null,e.row.original.dp_rel_mgr_id)}},{Header:"product",id:"product_name",accessor:"product_name",Cell:function(e){return r.a.createElement(r.a.Fragment,null,e.row.original.product_name)}},{Header:"Disbursal date",id:"disbursal_date",accessor:"disbursal_date",Cell:function(e){return r.a.createElement(r.a.Fragment,null,e.row.original.disbursal_date)}},{Header:"Due date",accessor:"due_date",Cell:function(e){return r.a.createElement(r.a.Fragment,null,e.row.original.due_date)}},{Header:"Overdue",accessor:"Overdue",Cell:function(e){return r.a.createElement(r.a.Fragment,null,e.row.original.overdue_days>0?"YES":"NO")}},{Header:"Overdue(days)",accessor:"overdue_days",Cell:function(e){return r.a.createElement(r.a.Fragment,null,e.row.original.overdue_days)}},{Header:"Amount",accessor:"loan_principal",Cell:function(t){return r.a.createElement("div",{className:"text-right"},e.amount_Usd_convertion(t.row.original.loan_principal,"active_currencyConversion"))}},{Header:r.a.createElement("div",{className:"text-center"},"Fee"),accessor:"flow_fee",Cell:function(t){return r.a.createElement("div",{className:"text-right"},e.amount_Usd_convertion(t.row.original.flow_fee,"active_currencyConversion"))}},{Header:r.a.createElement("div",{className:"text-center"},"Total"),accessor:"Total",Cell:function(e){return r.a.createElement("div",{className:"text-center"},e.row.original.loan_principal+e.row.original.flow_fee)}},{Header:"Paid amount",accessor:"paid_amount",Cell:function(t){return r.a.createElement(r.a.Fragment,null,e.amount_Usd_convertion(t.row.original.paid_amount,"active_currencyConversion"))}}]}},{key:"columndatas_cust_performance",value:function(){var e=this;return[{Header:"SI No",accessor:"account_id",maxWidth:100,Cell:function(e){return r.a.createElement(r.a.Fragment,null,e.row.index+1)}},{Header:"Gender",id:"gender",accessor:"gender",maxWidth:200,Cell:function(e){return r.a.createElement(r.a.Fragment,null,e.row.original.gender)}},{Header:"Tot FAs disbursed",id:"total_FA",accessor:"total_FA",maxWidth:200,Cell:function(e){return r.a.createElement(r.a.Fragment,null,e.row.original.total_FA)}},{Header:r.a.createElement("div",null,"Tot amt disbursed"," "),id:"total_Amt",maxWidth:200,accessor:"total_Amt",Cell:function(t){return r.a.createElement(r.a.Fragment,null,e.amount_Usd_convertion(t.row.original.total_Amt,"active_currencyConversion"))}},{Header:"Assumed income of agent @1.5 a day",id:"assume_income",maxWidth:200,accessor:"assume_income",Cell:function(e){return r.a.createElement(r.a.Fragment,null,e.row.original.assume_income)}},{Header:"Total fee",id:"total_Fee",maxWidth:200,accessor:"total_Fee",Cell:function(t){return r.a.createElement(r.a.Fragment,null,e.amount_Usd_convertion(t.row.original.total_Fee,"active_currencyConversion"))}},{Header:"Flow fee paid as percentage of fee income",accessor:"fee_per_income",maxWidth:200,Cell:function(e){return r.a.createElement(r.a.Fragment,null,e.row.original.fee_per_income)}},{Header:"Per advance revenue",accessor:"per_adv_revenue",maxWidth:200,Cell:function(t){return r.a.createElement(r.a.Fragment,null,e.amount_Usd_convertion(t.row.original.per_adv_revenue,"active_currencyConversion"))}},{Header:"Average FA size",accessor:"avg_fa_size",maxWidth:170,Cell:function(t){return r.a.createElement(r.a.Fragment,null,e.amount_Usd_convertion(t.row.original.avg_fa_size,"active_currencyConversion"))}},{Header:"Percentage of late repayments",maxWidth:150,accessor:"total_Late_FA_perc",Cell:function(e){return r.a.createElement("div",{className:"text-center"},(100*e.row.original.total_Late_FA_perc).toFixed(2),"%")}}]}},{key:"columndatas_cust_performance2",value:function(){var e=this;return[{Header:"SI No",accessor:"account_id",maxWidth:60,Cell:function(e){return r.a.createElement(r.a.Fragment,null,e.row.index+1)}},{Header:"Acc Prvdr",id:"acc_prvdr_code",accessor:"acc_prvdr_code",maxWidth:90,Cell:function(e){return r.a.createElement(r.a.Fragment,null,"  ",r.a.createElement(Le,{logotype:e.row.original.acc_prvdr_code}))}},{Header:"Ongoing FA",id:"ongoing_loan",accessor:"ongoing_loan",maxWidth:130,Cell:function(e){return r.a.createElement(r.a.Fragment,null,e.row.original.ongoing_loan)}},{Header:"Customer",id:"biz_name",maxWidth:130,accessor:"biz_name",Cell:function(e){return r.a.createElement(r.a.Fragment,null,e.row.original.biz_name)}},{Header:r.a.createElement("div",{className:"text-center"},"Gender"),id:"gender",maxWidth:150,accessor:"gender",Cell:function(e){return r.a.createElement("div",{className:"text-center"},e.row.original.gender)}},{Header:"Partner RM",id:"rel_mgr_name",maxWidth:120,accessor:"rel_mgr_name",Cell:function(e){return r.a.createElement(r.a.Fragment,null,e.row.original.rel_mgr_name)}},{Header:"Tot FAs disbursed",maxWidth:120,accessor:"total_FA",Cell:function(e){return r.a.createElement("div",{className:"text-center"},e.row.original.total_FA)}},{Header:"Tot amt disbursed",id:"total_Amt",maxWidth:120,accessor:"total_Amt",Cell:function(t){return r.a.createElement(r.a.Fragment,null,e.amount_Usd_convertion(t.row.original.total_Amt,"active_currencyConversion"))}},{Header:"Total fee",id:"loan_principal",maxWidth:120,accessor:"total_Fee",Cell:function(t){return r.a.createElement(r.a.Fragment,null,e.amount_Usd_convertion(t.row.original.total_Fee,"active_currencyConversion"))}},{Header:"Assumed income of agent @1.5 a day",accessor:"assume_income",maxWidth:150,Cell:function(e){return r.a.createElement(r.a.Fragment,null,e.row.original.assume_income)}},{Header:"Flow fee paid as percentage of fee income",accessor:"fee_per_income",maxWidth:150,Cell:function(e){return r.a.createElement(r.a.Fragment,null,e.row.original.fee_per_income)}},{Header:"Per advance revenue",accessor:"per_adv_revenue",maxWidth:150,Cell:function(t){return r.a.createElement(r.a.Fragment,null,e.amount_Usd_convertion(t.row.original.per_adv_revenue,"active_currencyConversion"))}},{Header:"Average FA size",accessor:"Amoavg_fa_sizeunt",maxWidth:170,width:220,Cell:function(t){return r.a.createElement(r.a.Fragment,null,e.amount_Usd_convertion(t.row.original.avg_fa_size,"active_currencyConversion"))}},{Header:"Average size duration",accessor:"avg_fa_duration",maxWidth:150,Cell:function(e){return r.a.createElement(r.a.Fragment,null,e.row.original.avg_fa_duration)}},{Header:"No of late Repayments ",accessor:"total_Late_FA",maxWidth:150,Cell:function(e){return r.a.createElement(r.a.Fragment,null,e.row.original.total_Late_FA)}},{Header:"Percentage of late repayments",maxWidth:150,accessor:"total_Late_FA_perc",Cell:function(e){return r.a.createElement("div",null,(100*e.row.original.total_Late_FA_perc).toFixed(2),"%")}}]}},{key:"componentDidUpdate",value:function(e,t){t.country_code!=this.state.country_code&&("portfolio_at_risk"==this.props.report_type&&this.get_gds_report(),"customer_performance"==this.props.report_type&&this.customerPerformance(),"outstanding_advances"==this.props.report_type&&this.outstanding_performance()),t.activeCurrency!=this.state.activeCurrency&&this.amount_Usd_convertion(),t.gds_report_active_accPrvds!=this.state.gds_report_active_accPrvds&&this.accprvds_handler(this.state.gds_report_active_accPrvds)}},{key:"amount_Usd_convertion",value:function(e,t){if("totalCalculation"==t){if(!this.state.activeCurrencyVal)return e;if(this.state.activeCurrencyVal)return e*Number(this.state.activeCurrencyVal)}else{if(!this.state.activeCurrencyVal)return e>0?e+"  "+this.state.activeCurrency:e;if(this.state.activeCurrencyVal)return e>0?(e*Number(this.state.activeCurrencyVal)).toFixed(2)+"  "+this.state.activeCurrency:e}}},{key:"set_attributes",value:function(e){this.state.country_code==e.country_code&&this.state.activeCurrency==e.activeCurrency&&this.state.gds_report_active_accPrvds==e.gds_report_active_accPrvds||this.setState(e)}},{key:"accprvds_handler",value:function(e){if(null!=e)if("outstanding_advances"==this.props.report_type){var t=this.state.original_row_datas.filter(function(t){return t.data_prvdr_code==e});this.setState({row_Datas:t})}else{var a=this.state.original_row_datas.filter(function(t){return t.acc_prvdr_code==e});this.setState({row_Datas:a})}else this.setState({row_Datas:this.state.original_row_datas})}},{key:"outstanding_performance",value:function(){var e=this;wl({report_type:"get_outstanding",time_zone:v("market").time_zone,country_code:this.state.country_code}).then(function(t){t&&"success"==t.status&&e.setState({original_row_datas:t.data.report,report_date:t.data.report_date},e.accprvds_handler)})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("h2",{className:"text-white",style:{paddingLeft:"10px"}},"GDS Table Report"),this.state.report_date&&r.a.createElement("p",{className:"text-white no-margin",style:{padding:"10px 0px 0px 10px",fontSize:"14px"}},"Report Date : ",ce()(this.state.report_date,"DD-MM-YYYY").format("DD MMM YYYY"),"  "),r.a.createElement(es,{set_attr:function(t){return e.set_attributes(t)},incl_prvdr:!0}),"portfolio_at_risk"==this.props.report_type&&r.a.createElement("div",null,r.a.createElement("h2",{className:"text-center text-white"},this.getListTitle()),r.a.createElement("div",{className:"card-body"},r.a.createElement(is,{row_data:this.state.row_Datas,column_data:this.state.columndatas,default_page_size:10,loader:!this.state.rowdatas,footer:!0,pagination:!0,global_search:!0}))),"customer_performance"==this.props.report_type&&r.a.createElement("div",null,r.a.createElement("h2",{className:"text-center text-white"},this.getListTitle()),r.a.createElement("div",{className:"card-body"},r.a.createElement(is,{row_data:null!=this.state.gds_report_active_accPrvds?this.state.row_Datas:this.state.original_row_datas,column_data:this.state.columndata_cust_performance2,csv_file:!1,global_search:!0,pagination:!0,excess_time_action:!1,default_page_size:5,loader:!this.state.rowdatas}),r.a.createElement("div",{style:{marginTop:"30px"}},r.a.createElement(is,{row_data:this.state.row_Datas,column_data:this.state.columndata_cust_performance,csv_file:!1,global_search:!0,pagination:!1,excess_time_action:!1,default_page_size:5,loader:!this.state.rowdatas}))))," ","outstanding_advances"==this.props.report_type&&r.a.createElement("div",null,r.a.createElement("h2",{className:"text-center text-white"},this.getListTitle()),r.a.createElement("div",{className:"card-body"},r.a.createElement(is,{row_data:this.state.row_Datas,column_data:this.state.columndata_outstanding,csv_file:!1,global_search:!0,pagination:!0,excess_time_action:!1,default_page_size:10,loader:!this.state.rowdatas}))))}}]),a}(ut);function Gs(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(u.a)(e);if(t){var r=Object(u.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(m.a)(this,a)}}var Js=function(e){Object(d.a)(a,e);var t=Gs(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={columns:[],lists:[],copy:[],resourse:null,cs_status:null},e.get_cs_devices=function(){Zl(e.req({resourse:"cs_devices"})).then(function(t){t&&"success"===t.status&&(e.setState(function(a){return a.columns=e.columndatas(t.data.headers)}),t.data.records_arr&&e.setState({row_datas:t.data.records_arr,copy:t.data.records_arr}))})},e.handlestatus=function(t,a){var n;n="enabled"==a.status?"disabled":"enabled",window.confirm("Are you sure want to change the status of the Customer Success ?")&&Xl(e.req({status:n,cs_number:a.number})).then(function(e){e&&("success"===e.status?window.location.reload():alert(e.message+"\n"+JSON.stringify(e.data)))})},e}return Object(o.a)(a,[{key:"componentWillMount",value:function(){this.get_cs_devices()}},{key:"columndatas",value:function(e){var t=this;return[{Header:r.a.createElement("p",{style:{fontSize:"15px"}},e.person_name),id:"name",accessor:function(e){return he(e.name)},minWidth:150,maxWidth:375},{Header:r.a.createElement("p",{style:{fontSize:"15px"}},e.type),id:"type",accessor:function(e){return he(e.type)},minWidth:75,maxWidth:200},{Header:r.a.createElement("p",{style:{fontSize:"15px"}},e.number),id:"number",accessor:function(e){return e.number},minWidth:170,maxWidth:375},{Header:r.a.createElement("p",{style:{fontSize:"15px"}},e.status),id:"status",accessor:function(e){return"enabled"==e.status?"Assigned":"Unassigned"},minWidth:75,maxWidth:200},{Header:r.a.createElement("p",{style:{fontSize:"13px"}},"Action"),id:"cs_status",accessor:function(e){return r.a.createElement(lt.a,{variant:"enabled"==e.status?"danger":"success",size:"sm",onClick:function(a){return t.handlestatus(a,e)}},"enabled"==e.status?"Unassign":"assign")},minWidth:75,maxWidth:200}]}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"cs_table"},r.a.createElement("h5",{style:{color:"white"}},this.props.title)),r.a.createElement("div",{className:"card-body m-auto",style:{width:"850px"}},r.a.createElement(za,{showPag:!0,defaultPageSize:15,minRow:0,row_data:void 0!==this.state.copy?this.state.copy:[],column_data:this.state.columns,resizable:!1,defaultSorted:[{id:"name",asc:!0}]})))}}]),a}(dt);function Ks(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(u.a)(e);if(t){var r=Object(u.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(m.a)(this,a)}}var Qs=function(e){Object(d.a)(a,e);var t=Ks(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={section1:"show_div",account:{}},e.handleSection2=function(t){(t=ce()(t).format("YYYY-MM-DD")).target&&(t=t.target.value);""!=t?e.setState({section2:"disable_div"}):e.setState({section2:"show_div"})},e.handleFields=function(t){""!=t.target.value?e.setState({section1:"disable_div"}):""==t.target.value&&e.setState({section1:"show_div"}),e.handleChange(t)},e.loadAccounts=function(t){var a=e.lender_code,n=e.state.account;n[t.target.id]=t.target.value;var r=v("acc_prvdr_code")?v("acc_prvdr_code"):n.acc_prvdr_code,l=Object(X.a)({lender_code:a,country_code:e.country_code,to_recon:!0,network_prvdr_code:r},n);void 0!=r&&Pa(e.req({account:l},!0)).then(function(t){t&&("success"===t.status?""!=t.data&&e.getSelectOptionsFromResult(t.data,"lender_accounts",["id","name"]):alert(t.message+"\n"+JSON.stringify(t.data)))})},e}return Object(o.a)(a,[{key:"componentWillMount",value:function(){var e=this;this.setOptionsListToStateFromAppApi("common","list",Object(X.a)({},this.def_req,{status:"enabled",biz_account:!0}),["acc_prvdr_code","name"],"acc_prvdrs");var t=this.lender_code,a=v("acc_prvdr_code"),n={lender_code:t,country_code:this.country_code,to_recon:!0,network_prvdr_code:a};void 0!=a&&Pa(this.req({account:n},!0)).then(function(t){t&&("success"===t.status?""!=t.data&&e.getSelectOptionsFromResult(t.data,"lender_accounts",["id","name"]):alert(t.message+"\n"+JSON.stringify(t.data)))})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"date-range",style:{padding:15}},r.a.createElement("div",{className:"form-row"},!this.admin_roles.includes(v("role_codes"))&&r.a.createElement("div",{className:"form-group col-md-3"},r.a.createElement("span",null,"Account Provider"),r.a.createElement("font",{className:"text-danger"},"   *  "),r.a.createElement("select",{id:"acc_prvdr_code",onChange:function(t){e.handleChange(t),e.loadAccounts(t)},className:"form-control",type:"text",required:"required"},this.state.acc_prvdrs_dd)),r.a.createElement("div",{className:"form-group col-md-3 ".concat(this.state.section1)},r.a.createElement("span",{className:"form-label"},"Start Date"),r.a.createElement("font",{className:"text-danger"},"   *  "),r.a.createElement(Ht.a,{closeOnSelect:!0,onChange:function(t){e.handleDateChange("txn_date__from",t),e.handleSection2(t)},dateFormat:"DD MMM YYYY",timeFormat:!1,required:"required"})),r.a.createElement("div",{className:"form-group col-3 ".concat(this.state.section1)},r.a.createElement("span",{className:"form-label"},"End Date"),r.a.createElement("font",{className:"text-danger"},"   *  "),r.a.createElement(Ht.a,{closeOnSelect:!0,onChange:function(t){e.handleDateChange("txn_date__to",t),e.handleSection2(t)},dateFormat:"DD MMM YYYY",timeFormat:!1,required:"required"})),r.a.createElement("div",{className:"form-group col-md-3 ".concat(this.state.section1)},r.a.createElement("span",{className:"form-label"},"Statement Transaction Type"),r.a.createElement("select",{id:"stmt_txn_type",className:"form-control",onChange:this.handleChange},this.getSelectOptions("stmt_txn_type"))),r.a.createElement("div",{className:"form-group col-md-3 ".concat(this.state.section2)},r.a.createElement("span",{className:"form-label"},"Statement Transaction ID"),r.a.createElement("input",{id:"txn_id",className:"form-control",onChange:function(t){e.handleFields(t),e.handleChange(t)},required:!0})),r.a.createElement("div",{className:"form-group col-md-3 ".concat(this.state.section2)},r.a.createElement("span",{className:"form-label"},"FA ID"),r.a.createElement("input",{id:"loan_doc_id",className:"form-control",onChange:function(t){e.handleFields(t),e.handleChange(t)},required:!0}))),r.a.createElement("div",{className:"form-row justify-content-md-center mt-3"},r.a.createElement(lt.a,{className:"btn btn-secondory ",onClick:this.props.onlist,disabled:this.props.disable_btn},"Search")," \xa0"))}}]),a}(ut);function Zs(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(u.a)(e);if(t){var r=Object(u.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(m.a)(this,a)}}var Xs=function(e){Object(d.a)(a,e);var t=Zs(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={manl_capture_search:{},columndatas:[],copy:[],rowdatas:[]},e.handleTransactionlist=function(t){var a=e.state.manl_capture_search;e.validate_search(a)&&Vn(e.req({manl_capture_search:a})).then(function(t){if(e.resp(t),!t)return null;"success"===t.status?""!=t.data?(e.setState(function(e){return e.rowdatas=t.data}),e.setState(function(e){return e.copy=t.data}),e.setState(function(t){return t.columndatas=e.columndatas()})):alert("No record found for your search"):alert(t.message+"\n"+JSON.stringify(t.data))})},e}return Object(o.a)(a,[{key:"validate_search",value:function(e){return!!(e.txn_date__from&&e.txn_date__to||e.txn_id||e.loan_doc_id)||(alert("Please enter valid search criteria"),!1)}},{key:"columndatas",value:function(){var e=this;return[{Header:"SI No.",id:"row",minWidth:80,maxWidth:100,Cell:function(e){return r.a.createElement("div",null,e.index+1)}},{Header:"FA ID",id:"loan_doc_id",maxWidth:170,accessor:function(e){return r.a.createElement("div",null,r.a.createElement(ee.a,{className:"d-block",to:"/fa/view/"+e.loan_doc_id,target:"_blank"},e.loan_doc_id))}},{Header:"Amount",id:"amount",maxWidth:100,accessor:function(t){return xe(t.amount,e.currency_code)}},{Header:"Txn Type",id:"txn_type",maxWidth:120,accessor:function(e){return pe(e.txn_type)}},{Header:"Txn ID",accessor:"txn_id",maxWidth:160},{Header:"Txn Exec By",accessor:"txn_exec_by",maxWidth:140},{Header:"Txn Date",id:"txn_date",maxWidth:85,accessor:function(e){return ge(e.txn_date)}},{Header:"Reason For Manual Capture",id:"reason_for_skip",maxWidth:180,accessor:function(e){return null==e.reason_for_skip?"Auto Capture Failed":pe(e.reason_for_skip)}}]}},{key:"render",value:function(){return r.a.createElement("div",{id:"",className:"container containerTopmargin max-width no-padding"},r.a.createElement("div",null,r.a.createElement("div",{className:"form-row no-margin"},r.a.createElement("h5",{className:"lender_accounts no-margin headerTitle headerPadvert"},"Manual Capture Transactions")),r.a.createElement(Qs,{id:"manl_capture_search",onComponentChange:this.handleComponentChange,onlist:this.handleTransactionlist,disable_btn:this.state.calling_api})),r.a.createElement("div",{className:"container-fluid"},r.a.createElement("br",null),r.a.createElement("div",{className:"row",id:"float_style"})),r.a.createElement("div",null,this.state.rowdatas&&this.state.rowdatas.length>0&&r.a.createElement(r.a.Fragment,null,r.a.createElement("h4",null,"Manual Capture Transactions Details"),r.a.createElement("div",{className:"d-flex justify-content-between align-items-center",style:{padding:5}}),r.a.createElement("div",{className:"card-body m-auto",style:{width:"90%"}},r.a.createElement(za,{showPag:!0,minRow:0,row_data:void 0!==this.state.copy?this.state.copy:[],column_data:this.state.columndatas,resizable:!1,defaultSorted:[{id:"stmt_txn_date",desc:!1}],exportCSV:!0,csvFile:"Manual_capture_reports",csvData:this.state.copy})))))}}]),a}(dt),$s=function(e,t){var a=e.split(" "),n=t.split(" "),r=a[0].split(","),l=n[0].split(","),c=r.join(""),s=l.join("");return parseInt(c)>parseInt(s)||parseInt(c)===parseInt(s)?1:-1},eo=function(e,t){var a=e.split(" "),n=t.split(" "),r=a[0].toLowerCase();return r===[r,n[0].toLowerCase()].sort()[0]?1:-1},to=function(e,t,a){var n=le.duration(le(a).diff(le(e))),r=le.duration(le(a).diff(le(t))),l=n.days(),c=n.hours(),s=n.minutes(),o=r.days(),i=r.hours(),d=r.minutes();if(l>o)return 1;if(l===o){if(c>i)return 1;if(c===i){if(s>d)return 1;if(s===d)return 1;if(d>s)return-1}else if(i>c)return-1}else if(o>l)return-1},ao=function(e,t){var a=new Date(e),n=new Date(t);return a.getTime()>n.getTime()||a.getTime()===n.getTime()?1:-1};function no(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(u.a)(e);if(t){var r=Object(u.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(m.a)(this,a)}}var ro=function(e){Object(d.a)(a,e);var t=no(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={cust_wo_fa:{},columns:[],cust_wo_fa_list:[],cust_wo_fa_table:"hide_div",copy:[]},e.changeHandler=function(t){var a=t,n=e.state.cust_wo_fa_list.filter(function(e){return null!==e.cust_id&&e.cust_id.toLowerCase().includes(a.toLowerCase())});e.setState(function(e){return e.copy=n})},e}return Object(o.a)(a,[{key:"sortBiz",value:function(e,t){return eo(e.props.full_text,t.props.full_text)}},{key:"sortAmount",value:function(e,t){return $s(e.props.children,t.props.children)}},{key:"sortTime",value:function(e,t){var a=e.props.data.loan_appl_date,n=t.props.data.loan_appl_date,r=this.state.server_time;return to(a,n,r)}},{key:"componentWillMount",value:function(){var e=this;ga(this.req({borrower_search_criteria:{active_cust:"true",not_have_ongoing_loan:"true",not_have_overdue_loan:"true",not_have_pending_loan_appl:"true",profile_status:"open",status:"enabled"}})).then(function(t){if(e.resp(t),t){if("success"===t.status){e.resp(t);var a=e.state.columns;console.log(t.data.results);var n=E("customer","risk_category");a=[{Header:"SI No.",id:"row",Cell:function(e){return r.a.createElement("div",null,e.index+1)},width:70},{Header:"ACC PRVDR",id:"acc_prvdr_code",sortable:!1,accessor:function(e){return r.a.createElement(Le,{logotype:e.acc_prvdr_code})}},{Header:"FLOW Cust ID",id:"cust_id",sortable:!1,accessor:function(e){return r.a.createElement(ee.a,{to:"/borrower/indiv/view/"+e.cust_id,target:"_blank",className:"flow_custid"},e.cust_id)},width:150},{Header:"A/C Number",id:"acc_number",sortable:!1,accessor:function(e){return e.acc_number}},{Header:"Category",id:"category",accessor:function(e){return e.category}},{Header:"Business Name",id:"biz_name",sortMethod:function(t,a){return e.sortBiz(t,a)},accessor:function(e){return r.a.createElement(Rt,{full_text:e.biz_name,overlay:Ne(e)})}},{Header:"RM Name",id:"flow_rel_mgr_name",accessor:function(e){return e.flow_rel_mgr_name}},{Header:"Reg RM Name",id:"reg_flow_rel_mgr_name",accessor:function(e){return e.reg_flow_rel_mgr_name}},{Header:"Total FAs",id:"tot_loans",accessor:function(e){return e.tot_loans?e.tot_loans:0}},{Header:"Reg Date",id:"reg_date",accessor:function(e){return e.reg_date?r.a.createElement("span",null,ge(e.reg_date)):"NA"}},{Header:"Last Visit",id:"last_visit_date",accessor:function(e){return e.last_visit_date?r.a.createElement("span",null,ge(e.last_visit_date)):"NA"}},{Header:"Last FA",id:"last_loan_date",accessor:function(e){return e.last_loan_date?r.a.createElement("span",null,ge(e.last_loan_date)):"NA"}},{Header:"Cond Count",id:"cond_count",accessor:function(e){return e.cond_count}},{Header:"Territory",id:"territory",accessor:function(e){return e.territory?Ze(e.territory):"NA"}},{Header:"Location",id:"location",accessor:function(e){return e.location?Ze(e.location):"NA"}},{Header:"Profile Status",id:"profile_status",accessor:function(e){return Ze(e.profile_status)}},{Header:"Risk Category",id:"risk_category",show:n,accessor:function(e){return n&&Ze(e.risk_category)}}]}e.setState({columns:a,cust_wo_fa_list:t.data.results,copy:t.data.results,cust_wo_fa_table:"show_div"})}})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"container containerTopmargin max-width no-padding"},r.a.createElement("div",null,r.a.createElement("h5",{className:"no-margin headerTitle"},"Active Customers Without FA"),this.state.cust_wo_fa_list.length>0&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"d-flex justify-content-between align-items-center",style:{padding:5}},r.a.createElement("p",{className:"no-margin text-white"},r.a.createElement("b",null,"Total Entries : ",this.state.cust_wo_fa_list.length)),r.a.createElement("div",{style:{position:"relative"}},r.a.createElement("i",{class:"fa-solid fa-magnifying-glass search_pos"}),r.a.createElement("input",{placeholder:"Search here",className:"search_posInput",onChange:function(t){return e.changeHandler(t.target.value)}}))),r.a.createElement(za,{showPag:!0,minRow:0,row_data:void 0!==this.state.copy?this.state.copy:[],column_data:this.state.columns,resizable:!1,defaultSorted:[{id:"name",desc:!1}],exportCSV:!0,csvFile:"Active customers W/o FA",csvData:this.state.copy?this.state.copy:[]}))))}}]),a}(dt);function lo(){lo=function(){return e};var e={},t=Object.prototype,a=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",l=n.asyncIterator||"@@asyncIterator",c=n.toStringTag||"@@toStringTag";function s(e,t,a){return Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(k){s=function(e,t,a){return e[t]=a}}function o(e,t,a,n){var r=t&&t.prototype instanceof m?t:m,l=Object.create(r.prototype),c=new N(n||[]);return l._invoke=function(e,t,a){var n="suspendedStart";return function(r,l){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===r)throw l;return C()}for(a.method=r,a.arg=l;;){var c=a.delegate;if(c){var s=E(c,a);if(s){if(s===d)continue;return s}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===n)throw n="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);n="executing";var o=i(e,t,a);if("normal"===o.type){if(n=a.done?"completed":"suspendedYield",o.arg===d)continue;return{value:o.arg,done:a.done}}"throw"===o.type&&(n="completed",a.method="throw",a.arg=o.arg)}}}(e,a,c),l}function i(e,t,a){try{return{type:"normal",arg:e.call(t,a)}}catch(k){return{type:"throw",arg:k}}}e.wrap=o;var d={};function m(){}function u(){}function p(){}var _={};s(_,r,function(){return this});var h=Object.getPrototypeOf,f=h&&h(h(x([])));f&&f!==t&&a.call(f,r)&&(_=f);var v=p.prototype=m.prototype=Object.create(_);function g(e){["next","throw","return"].forEach(function(t){s(e,t,function(e){return this._invoke(t,e)})})}function y(e,t){var n;this._invoke=function(r,l){function c(){return new t(function(n,c){!function n(r,l,c,s){var o=i(e[r],e,l);if("throw"!==o.type){var d=o.arg,m=d.value;return m&&"object"==typeof m&&a.call(m,"__await")?t.resolve(m.__await).then(function(e){n("next",e,c,s)},function(e){n("throw",e,c,s)}):t.resolve(m).then(function(e){d.value=e,c(d)},function(e){return n("throw",e,c,s)})}s(o.arg)}(r,l,n,c)})}return n=n?n.then(c,c):c()}}function E(e,t){var a=e.iterator[t.method];if(void 0===a){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method))return d;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var n=i(a,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,d;var r=n.arg;return r?r.done?(t[e.resultName]=r.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):r:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function b(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function w(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function N(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(b,this),this.reset(!0)}function x(e){if(e){var t=e[r];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,l=function t(){for(;++n<e.length;)if(a.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return l.next=l}}return{next:C}}function C(){return{value:void 0,done:!0}}return u.prototype=p,s(v,"constructor",p),s(p,"constructor",u),u.displayName=s(p,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===u||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,s(e,c,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},g(y.prototype),s(y.prototype,l,function(){return this}),e.AsyncIterator=y,e.async=function(t,a,n,r,l){void 0===l&&(l=Promise);var c=new y(o(t,a,n,r),l);return e.isGeneratorFunction(a)?c:c.next().then(function(e){return e.done?e.value:c.next()})},g(v),s(v,c,"Generator"),s(v,r,function(){return this}),s(v,"toString",function(){return"[object Generator]"}),e.keys=function(e){var t=[];for(var a in e)t.push(a);return t.reverse(),function a(){for(;t.length;){var n=t.pop();if(n in e)return a.value=n,a.done=!1,a}return a.done=!0,a}},e.values=x,N.prototype={constructor:N,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!e)for(var t in this)"t"===t.charAt(0)&&a.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(a,n){return c.type="throw",c.arg=e,t.next=a,n&&(t.method="next",t.arg=void 0),!!n}for(var r=this.tryEntries.length-1;r>=0;--r){var l=this.tryEntries[r],c=l.completion;if("root"===l.tryLoc)return n("end");if(l.tryLoc<=this.prev){var s=a.call(l,"catchLoc"),o=a.call(l,"finallyLoc");if(s&&o){if(this.prev<l.catchLoc)return n(l.catchLoc,!0);if(this.prev<l.finallyLoc)return n(l.finallyLoc)}else if(s){if(this.prev<l.catchLoc)return n(l.catchLoc,!0)}else{if(!o)throw new Error("try statement without catch or finally");if(this.prev<l.finallyLoc)return n(l.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&a.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var l=r;break}}l&&("break"===e||"continue"===e)&&l.tryLoc<=t&&t<=l.finallyLoc&&(l=null);var c=l?l.completion:{};return c.type=e,c.arg=t,l?(this.method="next",this.next=l.finallyLoc,d):this.complete(c)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.finallyLoc===e)return this.complete(a.completion,a.afterLoc),w(a),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.tryLoc===e){var n=a.completion;if("throw"===n.type){var r=n.arg;w(a)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,a){return this.delegate={iterator:x(e),resultName:t,nextLoc:a},"next"===this.method&&(this.arg=void 0),d}},e}function co(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(u.a)(e);if(t){var r=Object(u.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(m.a)(this,a)}}var so=function(e){Object(d.a)(a,e);var t=co(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(e=t.call.apply(t,[this].concat(l))).state={cust_wo_agg_renewal:{},columns:[],expi_agree_list:[],expi_agree_list_table:"hide_div",copy:[]},e.componentWillMount=Object(j.a)(lo().mark(function t(){var a;return lo().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:a={have_expired_agrmnt:"true"},ga(e.req({borrower_search_criteria:a})).then(function(t){if(e.resp(t),t){if("success"===t.status){e.resp(t),console.log(t.data.results);var a=e.state.columns;a=[{Header:"Account Number",id:"name",accessor:function(e){return e.acc_number}},{Header:"Cust Name",id:"first_name",accessor:function(e){return e.first_name}},{Header:"Cust ID",id:"cust_id",accessor:function(e){return r.a.createElement(ee.a,{to:"/borrower/indiv/view/"+e.cust_id,target:"_blank",className:"flow_custid"},e.cust_id)}},{Header:"Biz Name",id:"Biz Name",accessor:function(e){return e.biz_name}},{Header:"RM Name",id:"flow_rel_mgr_name",accessor:function(e){return e.flow_rel_mgr_name}},{Header:"Category",id:"Categoryame",accessor:function(e){return e.category}},{Header:"Agreement Valid Upto",id:"Agreement Valid Upto",accessor:function(e){return null!=e.aggr_valid_upto?_e(e.aggr_valid_upto):"-NA-"}},{Header:"Renewal Reason",id:"Renewal Reason",accessor:function(e){return 1==e.prob_fas?"Completing"+e.category:e.aggr_valid_upto>=ce()().format("Y-MM-DD")?"Agreement Will Expire":"Agreement Expired"}}]}e.setState({columns:a,expi_agree_list:t.data.results,copy:t.data.results,expi_agree_list_table:"show_div"})}});case 2:case"end":return t.stop()}},t)})),e.changeHandler=function(t){var a=t,n=e.state.expi_agree_list.filter(function(e){return null!==e.cust_id&&e.cust_id.toLowerCase().includes(a.toLowerCase())});e.setState(function(e){return e.copy=n},function(){return console.log(e.state.copy,"jddkd")})},e}return Object(o.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"container containerTopmargin max-width no-padding"},r.a.createElement("div",null,r.a.createElement("h5",{className:"no-margin headerTitle"},"Agreement Renewal"),this.state.expi_agree_list.length>0&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"d-flex justify-content-between align-items-center",style:{padding:5}},r.a.createElement("p",{className:"no-margin text-white"},r.a.createElement("b",null,"Total Entries : ",this.state.expi_agree_list.length)),r.a.createElement("div",{style:{position:"relative"}},r.a.createElement("i",{class:"fa-solid fa-magnifying-glass search_pos"}),r.a.createElement("input",{placeholder:"Search here",className:"search_posInput",onChange:function(t){return e.changeHandler(t.target.value)}}))),r.a.createElement(za,{showPag:!0,minRow:0,row_data:void 0!==this.state.copy?this.state.copy:[],column_data:this.state.columns,resizable:!1,defaultSorted:[{id:"name",desc:!1}],exportCSV:!0,csvFile:"Agreement Renewal",csvData:this.state.copy?this.state.copy:[]}))))}}]),a}(dt),oo=r.a.createElement(r.a.Fragment,null,r.a.createElement(f.a,{path:"/market/create",exact:!0,component:function(){return r.a.createElement(ta,{mode:"create",title:"Create Market"})}}),r.a.createElement(f.a,{path:"/market/list",exact:!0,component:sa}),r.a.createElement(f.a,{path:"/market/view/:country_code",exact:!0,component:function(e){return r.a.createElement(ta,Object.assign({mode:"view",title:"View/Edit Market"},e))}})),io=r.a.createElement(r.a.Fragment,null,r.a.createElement(f.a,{path:"/lender/create",exact:!0,component:function(){return r.a.createElement(an,{mode:"create",title:"Create Lender"})}}),r.a.createElement(f.a,{path:"/lender/list",exact:!0,component:Ga}),r.a.createElement(f.a,{path:"/lender/view/:lender_code",exact:!0,component:function(e){return r.a.createElement(an,Object.assign({mode:"view",title:"View/Edit Lender"},e))}}),r.a.createElement(f.a,{path:"/lender/accounts",exact:!0,component:ir}),r.a.createElement(f.a,{path:"/unknown_txns",exact:!0,component:function(e){return r.a.createElement(ur,e)}}),r.a.createElement(f.a,{path:"/unknown_txns/:today",exact:!0,component:function(e){return r.a.createElement(ur,Object.assign({today:"true"},e))}}),r.a.createElement(f.a,{path:"/lender/accounts/todayfa",exact:!0,component:rr}),r.a.createElement(f.a,{path:"/manual_capture_txns",exact:!0,component:Xs}),"   "),mo=r.a.createElement(r.a.Fragment,null,r.a.createElement(f.a,{path:"/data_provider/create",exact:!0,component:function(){return r.a.createElement(cn,{mode:"create",title:"Create Data Provider"})}}),r.a.createElement(f.a,{path:"/data_provider/list",exact:!0,component:Qa}),r.a.createElement(f.a,{path:"/data_provider/view/:data_prvdr_code",exact:!0,component:function(e){return r.a.createElement(cn,Object.assign({mode:"view",title:"View/Edit Data Provider"},e))}})),uo=r.a.createElement(r.a.Fragment,null,r.a.createElement(f.a,{path:"/account_provider/create",exact:!0,component:function(){return r.a.createElement(gr,{mode:"create",title:"Create Account Provider"})}}),r.a.createElement(f.a,{path:"/account_provider/list",exact:!0,component:function(){return r.a.createElement(Er,null)}})),po=r.a.createElement(r.a.Fragment,null,r.a.createElement(f.a,{path:"/fa_product/create",exact:!0,component:function(){return r.a.createElement(Hr,{mode:"create",title:"Create FA Product"})}}),r.a.createElement(f.a,{path:"/fa_product/view/:product_id",exact:!0,component:function(e){return r.a.createElement(Hr,Object.assign({mode:"view",title:"View/Edit FA Product"},e))}}),r.a.createElement(f.a,{path:"/fa_product/list",exact:!0,component:Wr}),r.a.createElement(f.a,{path:"/fa_product/search_product",exact:!0,component:Vr})),_o=r.a.createElement(r.a.Fragment,null,r.a.createElement(f.a,{path:"/master_data_key/add",exact:!0,component:function(){return r.a.createElement(Xr,null)}}),r.a.createElement(f.a,{path:"/master_data_key/list",exact:!0,component:function(){return r.a.createElement(el,null)}}),r.a.createElement(f.a,{path:"/master_data/add",exact:!0,component:rl})),ho=(r.a.Fragment,f.a,r.a.createElement(r.a.Fragment,null,r.a.createElement(f.a,{path:"/agreement/create",exact:!0,component:function(){return r.a.createElement(ml,{title:"Create Master Agreement",id:"master_agreement"})}}),r.a.createElement(f.a,{path:"/agreement/list",exact:!0,component:function(){return r.a.createElement(pl,null)}}),r.a.createElement(f.a,{path:"/agreement/list/:cust_id",exact:!0,component:function(e){return r.a.createElement(Ml,Object.assign({mode:"list",id:"create_agreement"},e))}}))),fo=r.a.createElement(r.a.Fragment,null,r.a.createElement(f.a,{path:"/score_models",exact:!0,component:function(){return r.a.createElement(hl,{id:"score_model"})}}),r.a.createElement(f.a,{path:"/score_models/weightage/:score_model?/:score_model_name?",component:function(e){return r.a.createElement(yl,Object.assign({id:"csw_comp"},e))}}),r.a.createElement(f.a,{path:"/score_models/result_config/:score_model?",component:function(e){return r.a.createElement(bl,Object.assign({id:"result_config"},e))}}),r.a.createElement(f.a,{path:"/score_factors",exact:!0,component:function(){return r.a.createElement(vl,null)}})),vo=r.a.createElement(r.a.Fragment,null,r.a.createElement(f.a,{path:"/report/portfolio_quality",exact:!0,component:function(e){return r.a.createElement(jl,Object.assign({report_type:"portfolio_quality",with_date_range:"false"},e))}}),r.a.createElement(f.a,{path:"/report/product_takeup",exact:!0,component:function(e){return r.a.createElement(jl,Object.assign({report_type:"product_takeup",with_date_range:"false"},e))}}),r.a.createElement(f.a,{path:"/report/daily_activity",exact:!0,component:function(e){return r.a.createElement(jl,Object.assign({report_type:"daily_activity",with_date_range:"true"},e))}}),r.a.createElement(f.a,{path:"/report/overdue_fa_repayments",exact:!0,component:function(e){return r.a.createElement(jl,Object.assign({report_type:"overdue_fa_repayments",with_date_range:"true"},e))}}),r.a.createElement(f.a,{path:"/report/daily_visits",exact:!0,component:function(e){return r.a.createElement(jl,Object.assign({report_type:"daily_visits",with_date_range:"true"},e))}}),r.a.createElement(f.a,{path:"/report/daily_agreements",exact:!0,component:function(e){return r.a.createElement(jl,Object.assign({report_type:"daily_agreements",with_date_range:"true"},e))}}),r.a.createElement(f.a,{path:"/report/capital_funds",exact:!0,component:function(e){return r.a.createElement(jl,Object.assign({report_type:"capital_funds",with_date_range:"false"},e))}}),r.a.createElement(f.a,{path:"/report/risk_report",exact:!0,component:function(e){return r.a.createElement(_s,Object.assign({report_type:"risk_category_report",with_date_range:"false"},e))}}),r.a.createElement(f.a,{path:"/report/lead_conversion",exact:!0,component:function(e){return r.a.createElement(jl,Object.assign({report_type:"lead_conversion",with_date_range:"true"},e))}}),r.a.createElement(f.a,{path:"/report/rm_report",exact:!0,component:function(e){return r.a.createElement(jl,Object.assign({report_type:"rm_wise_repayment_rate",with_date_range:"true"},e))}}),r.a.createElement(f.a,{path:"/report/disbursal_report",exact:!0,component:function(e){return r.a.createElement(Yc,e)}}),r.a.createElement(f.a,{path:"/management-dashboard",exact:!0,component:function(e){return r.a.createElement(Vc,e)}}),r.a.createElement(f.a,{path:"/portfolio_at_risk",exact:!0,component:function(e){return r.a.createElement(Us,Object.assign({report_type:"portfolio_at_risk"},e))}}),r.a.createElement(f.a,{path:"/customer_performance",exact:!0,component:function(e){return r.a.createElement(Us,Object.assign({report_type:"customer_performance"},e))}}),r.a.createElement(f.a,{path:"/outstanding_advances",exact:!0,component:function(e){return r.a.createElement(Us,Object.assign({report_type:"outstanding_advances"},e))}}),r.a.createElement(f.a,{path:"/monthly-report",exact:!0,component:function(e){return r.a.createElement(Jc,e)}}),r.a.createElement(f.a,{path:"/charts",exact:!0,component:as}),r.a.createElement(f.a,{path:"/complaint_lists",exact:!0,component:function(e){return r.a.createElement(us,e)}}),r.a.createElement(f.a,{path:"/stmt_imports/search",exact:!0,component:function(e){return r.a.createElement(gs,e)}}),r.a.createElement(f.a,{path:"/report/rm_wise_report",exact:!0,component:function(e){return r.a.createElement(jl,e)}}),r.a.createElement(f.a,{path:"/report/sms_report",exact:!0,component:function(e){return r.a.createElement(Os,e)}})),go=r.a.createElement(r.a.Fragment,null,r.a.createElement(f.a,{path:"/acc_txns/:entity/:entity_code/:acc_id",exact:!0,component:function(e){return r.a.createElement(zl,e)}}),r.a.createElement(f.a,{path:"/account/:acc_id/statement",exact:!0,component:function(e){return r.a.createElement(Wl,e)}})),yo=r.a.createElement(r.a.Fragment,null,r.a.createElement(f.a,{path:"/field_visit/search",exact:!0,component:function(e){return r.a.createElement(hn,e)}}),r.a.createElement(f.a,{path:"/field_visit/search/:cust_id",exact:!0,component:function(e){return r.a.createElement(hn,e)}}),r.a.createElement(f.a,{path:"/checkout/:cust_id/:id",exact:!0,component:function(e){return r.a.createElement(Ul,e)}})),Eo=r.a.createElement(r.a.Fragment,null,r.a.createElement(f.a,{path:"/call_log/search/:cust_id",exact:!0,component:function(e){return r.a.createElement(lc,e)}}),r.a.createElement(f.a,{path:"/call_log/search",exact:!0,component:function(e){return r.a.createElement(lc,e)}}),r.a.createElement(f.a,{path:"/compl_call_log/:cust_id/:id",exact:!0,component:function(e){return r.a.createElement(tc,e)}})),bo=r.a.createElement(r.a.Fragment,null,r.a.createElement(f.a,{path:"/sms_logs",exact:!0,component:xs})),wo=r.a.createElement(r.a.Fragment,null,r.a.createElement(f.a,{path:"/pre_appr/list",exact:!0,component:function(e){return r.a.createElement(Ic,e)}})),No=r.a.createElement(r.a.Fragment,null,r.a.createElement(f.a,{path:"/lead/create",exact:!0,component:function(e){return r.a.createElement(Ec,Object.assign({mode:"create",title:"Create Lead"},e))}}),r.a.createElement(f.a,{path:"/lead/edit/:id",exact:!0,component:function(e){return r.a.createElement(Ec,Object.assign({mode:"view",title:"View/Edit Lead"},e))}}),r.a.createElement(f.a,{path:"/lead/search",exact:!0,component:function(e){return r.a.createElement(Cc,Object.assign({mode:"search",title:"Search Lead"},e))}}),r.a.createElement(f.a,{path:"/lead/audit_kyc/:id",exact:!0,component:function(e){return r.a.createElement(Hc,Object.assign({title:"Audit KYC"},e))}}),r.a.createElement(f.a,{path:"/whatsapp",exact:!0,component:function(){return r.a.createElement(Ls,null)}}),r.a.createElement(f.a,{path:"/whatsapp/connect",exact:!0,component:function(e){return r.a.createElement(Fs,null)}})),xo=r.a.createElement(r.a.Fragment,null,r.a.createElement(f.a,{path:"/management-dashboard/print",exact:!0,component:function(e){return r.a.createElement(Vc,null)}})),Co=r.a.createElement(r.a.Fragment,null,r.a.createElement(f.a,{path:"/assign/rm_target",exact:!0,component:function(e){return r.a.createElement(Ys,Object.assign({title:"Monthly Target For RMs"},e))}})),ko=r.a.createElement(r.a.Fragment,null,r.a.createElement(f.a,{path:"/monthly-report/print",exact:!0,component:function(e){return r.a.createElement(Jc,null)}})),So=r.a.createElement(r.a.Fragment,null,r.a.createElement(f.a,{path:"/cs_management/cs_rosters",exact:!0,component:function(e){return r.a.createElement(Js,Object.assign({title:"CS Rosters "},e))}})),Oo=r.a.createElement(r.a.Fragment,null,r.a.createElement(f.a,{path:"/active_cust_wo_fa/list",exact:!0,component:function(e){return r.a.createElement(ro,e)}})),Ao=r.a.createElement(r.a.Fragment,null,r.a.createElement(f.a,{path:"/aggrement_renewal/list",exact:!0,component:function(e){return r.a.createElement(so,e)}})),jo=a(179);function Ro(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(u.a)(e);if(t){var r=Object(u.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(m.a)(this,a)}}var Do=function(e){Object(d.a)(a,e);var t=Ro(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).handleSection1=function(e){(e=ce()(e).format("YYYY-MM-DD")).target&&(e=e.target.value);""!=e?n.setState({section3:"disable_div",search_by_textbox_style:"disable_div",section2:"disable_div"}):n.setState({section1:"show_div",search_by_textbox_style:"show_div"})},n.handleSection3=function(e){""==e.target.value?n.setState({section1:"disable_div",section2:"disable_div"}):""!=e.target.value&&n.setState({section1:"show_div",section2:"show_div"})},n.handleSection2=function(e){""!=e.target.value?n.setState({section1:"disable_div",section3:"disable_div"}):""==e.target.value&&n.setState({section1:"show_div",section3:"show_div"})},n.handleStatusChange=function(e){n.handleReset(e),n.handleElementReset(n.state.action_date_field+"__from"),n.handleElementReset(n.state.action_date_field+"__to"),n.handleElementReset(n.state.action_date_field+"__today"),n.handleElementReset(n.state.actor_id),n.setState({submitted_field_style:"enable_div",__from:"",__to:"",today:!1,show_by_today:!1,show_from_until:!1,show_approver:!1}),"loan"==n.props.mode?"pending_disbursal"==e.target.value?n.setState({action:"Approved",show_by_today:!0,show_from_until:!0,actor_id:"loan_approver_id",action_date_field:"loan_approved_date",actor_list_dd:n.state.approver_list_dd}):"ongoing"==e.target.value||"disbursed"==e.target.value?n.setState({action:"Disbursed",show_from_until:!0,actor_id:"disbursed_by",action_date_field:"disbursal_date",actor_list_dd:n.state.disbursed_by_dd,__from:"",__to:""}):"due"==e.target.value||("Overdue"==e.target.value?n.setState({action:"Due",show_from_until:!0,action_date_field:"due_date",__from:"",__to:""}):"settled"==e.target.value&&n.setState({action:"Payment Captured",show_by_today:!0,show_from_until:!0,actor_id:"paid_by",action_date_field:"paid_date",actor_list_dd:n.state.payer_list_dd,__from:"",__to:""})):"loan_appl"==n.props.mode&&("approved"==e.target.value?n.setState({action:"Approved",show_by_today:!0,show_from_until:!1,actor_id:"loan_approver_id",action_date_field:"loan_approved_date",actor_list_dd:n.state.approver_list_dd}):"pending_approval"==e.target.value&&n.setState({action:"Applied",show_by_today:!0,show_from_until:!0,show_approver:!0,actor_id:"loan_applied_by",action_date_field:"loan_appl_date",actor_list_dd:n.state.applier_list_dd}))},n.handleDropdownValue=function(e){"status"==e.target.id&&n.handleStatusChange(e),""!=e.target.value?n.setState({search_by_textbox_style:"disable_div"}):n.setState({search_by_textbox_style:"show_div"})},n.handleApiCall=function(e,t){var a=n.acc_prvdr_code;ze(n.req({country_code:e,screen:t,acc_prvdr_code:a,status:"enabled"})).then(function(e){if(e){var t=e.data;for(var a in t){var r=t[a];if("loan_status"==a||"loan_appl_status"==a||"borrower_status"==a||"territory_list"==a||"profile_status"==a||"activity_status"==a||"risk_category"==a||"write_off_status_list"==a||"location"==a){n.getSelectOptionsFromResult(r,a,["data_code","data_value"],!1)}else n.getSelectOptionsFromResult(r,a)}}})},n.toggleAdvSearch=function(){n.setState({adv_search:!n.state.adv_search})},n.SearchByFromUntil=function(e){return r.a.createElement("div",{className:"d-flex align-items-start textInputshow_searchBox",style:{flexWrap:"wrap"}},n.state.show_approver&&r.a.createElement("div",{className:"col-md-3 marT-5"},r.a.createElement("div",{className:n.state.section1},r.a.createElement(O.a.Group,{className:"no-margin"},r.a.createElement(O.a.Label,{className:"no-margin"},"Approver"),r.a.createElement(O.a.Control,{as:"select",id:"loan_approver_id",onChange:function(e){n.handleChange(e),n.handleDropdownValue(e),n.handleSection1(e)}},n.state.approver_list_dd)))),n.state.show_by_today&&r.a.createElement(r.a.Fragment,null,"loan_appl"==n.props.mode?r.a.createElement("div",{className:"col-md-3"},r.a.createElement("div",{className:n.state.section1},r.a.createElement(O.a.Group,null,r.a.createElement(O.a.Label,{className:"no-margin"},n.state.action),r.a.createElement(O.a.Control,{as:"select",id:n.state.actor_id,onChange:function(e){n.handleChange(e),n.handleDropdownValue(e),n.handleSection1(e)}},n.state.actor_list_dd)))):r.a.createElement("div",{className:"col-md-3 marT-5 searchInput_height"},r.a.createElement("div",{className:n.state.section1},r.a.createElement(O.a.Group,{className:"no-margin"},r.a.createElement(O.a.Label,{className:"no-margin"},n.state.action," By"),r.a.createElement(O.a.Control,{as:"select",id:n.state.actor_id,onChange:function(e){n.handleChange(e),n.handleDropdownValue(e),n.handleSection1(e)}},n.state.actor_list_dd)))),(n.props.mode,r.a.createElement("div",{className:"col-md-3 searchInput_height"},r.a.createElement("div",{className:n.state.section1},r.a.createElement(O.a.Group,{className:"no-margin"},r.a.createElement(O.a.Label,{className:"no-margin"}),r.a.createElement(O.a.Row,{className:"justify-content-md-center"},r.a.createElement(O.a.Check,{className:"aggregation",type:"checkbox",id:n.state.action_date_field+"__today",onChange:function(e){n.handleCheckboxClick(e),n.handleDropdownValue(e),n.handleSection1(e)},label:n.state.action+"  Today"}))))))),n.state.show_from_until&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"col-md-3 marT-5"},r.a.createElement(O.a.Group,{className:"".concat(n.state.section1," no-margin searchInput_height")},r.a.createElement(O.a.Label,{className:"no-margin"},n.state.action," from"),r.a.createElement(Ht.a,{closeOnSelect:!0,value:n.state.__from,dateFormat:"DD MMM YYYY",timeFormat:!1,required:"required",onChange:function(e){n.handleDateChange(n.state.action_date_field+"__from",e),n.setState({__from:e}),n.handleSection1(e)}}))),r.a.createElement("div",{className:"col-md-3 marT-5"},r.a.createElement(O.a.Group,{className:"".concat(n.state.section1," no-margin searchInput_height")},r.a.createElement(O.a.Label,{className:"no-margin"},n.state.action," until"),r.a.createElement(Ht.a,{closeOnSelect:!0,value:n.state.__to,dateFormat:"DD MMM YYYY",timeFormat:!1,required:"required",onChange:function(e){n.handleDateChange(n.state.action_date_field+"__to",e),n.setState({__to:e}),n.handleSection1(e)}}))),"Due"==n.state.action&&r.a.createElement("div",{className:"col-md-3 p-2 mt-4"},r.a.createElement("div",{className:""},r.a.createElement("label",{className:"checkbox-inline no-margin"},r.a.createElement("input",{id:"include_setld_fa",type:"checkbox",onChange:function(e){n.handleBorrowerCheckboxClick(e)}}),r.a.createElement("span",null,"  Include Settled FA"))))))},n.handleClick=function(e){window.open("/borrower/indiv/view/"+n.state.customer_id)},n.SearchBorrower=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"col-md-3 marT-5"},r.a.createElement("div",{className:""},r.a.createElement("select",{className:"form-control",id:"activity_status",onChange:function(e){n.handleChange(e),n.handleDropdownValue(e),n.handleSection1(e)}},r.a.createElement("option",{selected:!0,value:""},"Activity Status"),n.state.activity_status_dd))),r.a.createElement("div",{className:"col-md-3 marT-5"},r.a.createElement("div",{className:""},r.a.createElement("select",{className:"form-control",id:"location",onChange:function(e){n.handleChange(e),n.handleDropdownValue(e),n.handleSection1(e)}},r.a.createElement("option",{selected:!0,value:""},"Location"),n.state.location_dd))),r.a.createElement("div",{className:"col-md-3 marT-5"},r.a.createElement("div",{className:""},r.a.createElement("select",{className:"form-control",id:"territory",onChange:function(e){n.handleChange(e),n.handleDropdownValue(e),n.handleSection1(e)}},r.a.createElement("option",{selected:!0,value:""},"Territory"),n.getSelectOptions("territory")))),E("customer","risk_category")&&r.a.createElement("div",{className:"col-md-3 marT-5"},r.a.createElement("div",{className:""},r.a.createElement("select",{className:"form-control",id:"risk_category",onChange:function(e){n.handleChange(e),n.handleDropdownValue(e),n.handleSection1(e)}},n.state.risk_category_dd,r.a.createElement("option",{selected:!0,value:""},"Risk Category")))),r.a.createElement("div",{className:"col-md-3 marT-5"},r.a.createElement(jo.a,null,r.a.createElement(O.a.Group,{as:bc.a},r.a.createElement(O.a.Label,{for:"closed_profile"},"Include Closed Profile",r.a.createElement(O.a.Check,{type:"checkbox",defaultChecked:n.props.profile_status.closed_profile,id:"closed_profile",className:"float-left mx-3 ",onChange:function(e){n.props.onComponentCheckboxclick(e)}}))))),r.a.createElement("div",{className:"col-12 text-center"},r.a.createElement("h3",{className:"font-weight-bolder no-margin",style:{padding:10}},"OR")),r.a.createElement("div",{className:"col-8"},r.a.createElement(jo.a,{className:"no-margin align-items-center searchInput_height"},r.a.createElement(O.a.Group,{as:bc.a,className:"".concat(n.state.section3," no-padding no-margin")},r.a.createElement(O.a.Label,{className:"no-margin"},"Cust Name / Cust ID / Account Num / Mobile No / National ID"),r.a.createElement(O.a.Control,{id:"req_parameter",onChange:function(e){n.handleChange(e),n.handleSection3(e)}})),"borrower"==n.props.mode&&r.a.createElement(r.a.Fragment,null,r.a.createElement(lt.a,{style:{margin:"23px 0px 12px 0px"},className:n.state.section3,id:"view_btn",onChange:function(e){n.handleSection3(e)},onClick:n.props.onSearch("view","Individual")},"View")," \xa0",r.a.createElement(lt.a,{style:{margin:"23px 0px 12px 0px"},className:n.state.section3,id:"view_btn",onChange:function(e){n.handleSection3(e)},onClick:n.props.onView("edit","Individual",null)},"Edit")))))},n.WildCardSearch=function(){return r.a.createElement("div",{className:"col-md-12"},r.a.createElement("div",{className:"col-md-12"},r.a.createElement("div",{className:"row no-margin text-center d-flex align-items-center justify-content-center"},"loan"==n.props.mode&&r.a.createElement("div",{className:"col-md-2 mt-4 d-flex align-items-center "},r.a.createElement("div",{className:n.state.section2},r.a.createElement("label",{className:"checkbox-inline no-margin  d-flex align-items-center"},r.a.createElement("input",{id:"voided_fa",type:"checkbox",onChange:function(e){n.handleBorrowerCheckboxClick(e)}}),r.a.createElement("span",{style:{paddingLeft:"5px"}}," Include Voided FA ")))),"loan"==n.props.mode&&r.a.createElement("div",{className:"col-md-2 mt-4 d-flex align-items-center"},r.a.createElement("div",{className:""},r.a.createElement("label",{className:"checkbox-inline no-margin d-flex align-items-center"},r.a.createElement("input",{id:"exclude_wo_fa",type:"checkbox",onChange:function(e){n.handleBorrowerCheckboxClick(e)}}),r.a.createElement("span",{style:{paddingLeft:"5px"}},"  Exclude Written Off FA"))))),r.a.createElement("div",null,r.a.createElement("h3",{className:"font-weight-bolder no-margin text-center",style:{padding:10}},"OR"))),r.a.createElement("div",{className:"row no-margin"},r.a.createElement("div",{className:"col-md-5 no-padding searchInput_height"},r.a.createElement("div",{className:"form-group ".concat(n.state.section3)},r.a.createElement(O.a.Label,{className:"no-margin"},"Any Customer ID / Mobile No / National ID / Account No"),r.a.createElement(O.a.Control,{id:"req_parameter",onChange:function(e){n.handleChange(e),n.handleSection3(e)}}))),r.a.createElement("div",{className:"col-md-1"},r.a.createElement("div",{className:"form-group"},"loan"==n.props.mode&&r.a.createElement(lt.a,{style:{margin:"40px 0px 12px 0px"},id:"view",className:n.state.section2,onChange:function(e){n.handleSection2(e)},onClick:n.props.onSearch},"View")))))},n.AdvancedSearch=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"col-md-12"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-4"},r.a.createElement("div",{className:"form-group searchInput_height"},r.a.createElement("label",{className:"no-margin"},"Registered from"),r.a.createElement(Ht.a,{closeOnSelect:!0,value:n.state.reg_date_from,dateFormat:"DD MMM YYYY",timeFormat:!1,required:"required",onChange:function(e){n.handleDateChange("reg_date__from",e),n.setState({reg_date_from:e}),n.handleSection1(e)}}))),r.a.createElement("div",{className:"col-md-4"},r.a.createElement("div",{className:"form-group searchInput_height"},r.a.createElement("label",{className:"no-margin"},"Registered to"),r.a.createElement(Ht.a,{closeOnSelect:!0,value:n.state.reg_date_to,dateFormat:"DD MMM YYYY",timeFormat:!1,required:"required",onChange:function(e){n.handleDateChange("reg_date__to",e),n.setState({reg_date_to:e}),n.handleSection1(e)}}))))),r.a.createElement("div",{className:"col-md-12",style:{marginTop:5,marginBottom:10}},r.a.createElement("div",{className:"row formInputadvanced_search"},r.a.createElement("div",{className:"col-md-6"},r.a.createElement("div",{className:"advanceSearch_groupBox"},r.a.createElement("div",{className:"form-check"},r.a.createElement("label",{className:"form-check-label no-margin"},r.a.createElement("input",{className:"form-check-input",type:"checkbox",value:"",id:"not_have_active_agrmnt",onChange:function(e){n.handleBorrowerCheckboxClick(e),n.handleSection1(e)}})," Don't have Active Agrmt",r.a.createElement("span",{className:"form-check-sign"},r.a.createElement("span",{className:"check"})))),r.a.createElement("div",{className:"form-check"},r.a.createElement("label",{className:"form-check-label no-margin"},r.a.createElement("input",{className:"form-check-input",type:"checkbox",id:"have_active_agrmnt",onChange:function(e){n.handleBorrowerCheckboxClick(e),n.handleSection1(e)}})," Have Active Agrmt",r.a.createElement("span",{className:"form-check-sign"},r.a.createElement("span",{className:"check"})))))),r.a.createElement("div",{className:"col-md-6"},r.a.createElement("div",{className:"advanceSearch_groupBox"},r.a.createElement("div",{className:"form-check"},r.a.createElement("label",{className:"form-check-label no-margin"},r.a.createElement("input",{className:"form-check-input",type:"checkbox",id:"non_active_cust",onChange:function(e){n.handleBorrowerCheckboxClick(e),n.handleSection1(e)}})," Non Active Customers",r.a.createElement("span",{className:"form-check-sign"},r.a.createElement("span",{className:"check"})))),r.a.createElement("div",{className:"form-check"},r.a.createElement("label",{className:"form-check-label no-margin"},r.a.createElement("input",{className:"form-check-input",type:"checkbox",id:"active_cust",onChange:function(e){n.handleBorrowerCheckboxClick(e),n.handleSection1(e)}})," Active Customers (30 Days)",r.a.createElement("span",{className:"form-check-sign"},r.a.createElement("span",{className:"check"})))))),r.a.createElement("div",{className:"col-md-6"},r.a.createElement("div",{className:"advanceSearch_groupBox"},r.a.createElement("div",{className:"form-check"},r.a.createElement("label",{className:"form-check-label no-margin"},r.a.createElement("input",{className:"form-check-input",type:"checkbox",id:"not_have_overdue_loan",onChange:function(e){n.handleBorrowerCheckboxClick(e),n.handleSection1(e)}})," Don't have Overdue FA",r.a.createElement("span",{className:"form-check-sign"},r.a.createElement("span",{className:"check"})))),r.a.createElement("div",{className:"form-check"},r.a.createElement("label",{className:"form-check-label no-margin"},r.a.createElement("input",{className:"form-check-input",type:"checkbox",id:"have_overdue_loan",onChange:function(e){n.handleBorrowerCheckboxClick(e),n.handleSection1(e)}})," Have Overdue FA",r.a.createElement("span",{className:"form-check-sign"},r.a.createElement("span",{className:"check"})))))),r.a.createElement("div",{className:"col-md-6"},r.a.createElement("div",{className:"advanceSearch_groupBox"},r.a.createElement("div",{className:"form-check"},r.a.createElement("label",{className:"form-check-label no-margin"},r.a.createElement("input",{className:"form-check-input",type:"checkbox",id:"not_have_pending_loan_appl",onChange:function(e){n.handleBorrowerCheckboxClick(e),n.handleSection1(e)}})," Don't have FA Appl",r.a.createElement("span",{className:"form-check-sign"},r.a.createElement("span",{className:"check"})))),r.a.createElement("div",{className:"form-check"},r.a.createElement("label",{className:"form-check-label no-margin"},r.a.createElement("input",{className:"form-check-input",type:"checkbox",id:"have_pending_loan_appl",onChange:function(e){n.handleBorrowerCheckboxClick(e),n.handleSection1(e)}})," Have FA Appl",r.a.createElement("span",{className:"form-check-sign"},r.a.createElement("span",{className:"check"})))))),r.a.createElement("div",{className:"col-md-6"},r.a.createElement("div",{className:"advanceSearch_groupBox"},r.a.createElement("div",{className:"form-check"},r.a.createElement("label",{className:"form-check-label no-margin"},r.a.createElement("input",{className:"form-check-input",type:"checkbox",id:"not_have_ongoing_loan",onChange:function(e){n.handleBorrowerCheckboxClick(e),n.handleSection1(e)}})," Don't have Ongoing FA",r.a.createElement("span",{className:"form-check-sign"},r.a.createElement("span",{className:"check"})))),r.a.createElement("div",{className:"form-check"},r.a.createElement("label",{className:"form-check-label no-margin"},r.a.createElement("input",{className:"form-check-input",type:"checkbox",id:"have_ongoing_loan",onChange:function(e){n.handleBorrowerCheckboxClick(e),n.handleSection1(e)}})," Have Ongoing FA",r.a.createElement("span",{className:"form-check-sign"},r.a.createElement("span",{className:"check"})))))),r.a.createElement("div",{className:"col-md-6"},r.a.createElement("div",{className:"advanceSearch_groupBox"},r.a.createElement("div",{className:"form-check"},r.a.createElement("label",{className:"form-check-label no-margin"},r.a.createElement("input",{className:"form-check-input",type:"checkbox",id:"do_not_have_score",onChange:function(e){n.handleBorrowerCheckboxClick(e),n.handleSection1(e)}})," Don't have New Cust Score",r.a.createElement("span",{className:"form-check-sign"},r.a.createElement("span",{className:"check"})))),r.a.createElement("div",{className:"form-check"},r.a.createElement("label",{className:"form-check-label no-margin"},r.a.createElement("input",{className:"form-check-input",type:"checkbox",id:"have_score",onChange:function(e){n.handleBorrowerCheckboxClick(e),n.handleSection1(e)}})," Have New Cust Score",r.a.createElement("span",{className:"form-check-sign"},r.a.createElement("span",{className:"check"})))))),r.a.createElement("div",{className:"col-md-6"},r.a.createElement("div",{className:"advanceSearch_groupBox"},r.a.createElement("div",{className:"form-check"},r.a.createElement("label",{className:"form-check-label no-margin"},r.a.createElement("input",{className:"form-check-input",type:"checkbox",id:"with_tp_acc",onChange:function(e){n.handleBorrowerCheckboxClick(e),n.handleSection1(e)}})," With Third Party Account",r.a.createElement("span",{className:"form-check-sign"},r.a.createElement("span",{className:"check"})))),r.a.createElement("div",{className:"form-check"},r.a.createElement("label",{className:"form-check-label no-margin"},r.a.createElement("input",{className:"form-check-input",type:"checkbox",id:"without_tp_acc",onChange:function(e){n.handleBorrowerCheckboxClick(e),n.handleSection1(e)}})," Without Third Party Account",r.a.createElement("span",{className:"form-check-sign"},r.a.createElement("span",{className:"check"})))))))))},n.handleTextboxValue=function(e){""!=e.target.value?n.setState({search_by_dropdown_style:"disable_div",search_by_textbox_style:"show_div",section1:"disable_div",cust_div_style:"disable_div"}):n.setState({search_by_dropdown_style:"show_div",cust_div_style:"show_div"})},n.handleCheckboxClick=function(e){e.target.checked?(e.target.value=!0,n.setState({submitted_field_style:"disable_div",__from:"",__to:"",today:!0}),n.handleElementReset(n.state.action_date_field+"__from"),n.handleElementReset(n.state.action_date_field+"__to")):(e.target.value=!1,e.target.value=null,n.setState({submitted_field_style:"show_div",today:!1})),n.handleChange(e)},n.handleBorrowerCheckboxClick=function(e){e.target.checked?e.target.value=!0:e.target.value=!1,n.handleChange(e)},n.handleResetClick=function(e){n.setState({section3:"show_div",search_by_textbox_style:"show_div"}),n.handleReset(),n.setState({search_by_dropdown_style:"show_div"}),n.setState({search_by_textbox_style:"show_div"}),n.setState({submitted_field_style:"show_div"}),n.setState({approved_field_style:"show_div"}),n.setState({cust_div_style:"show_div"}),n.setState({loan_id_div_style:"show_div"}),console.log("search_by_dropdown_style",n.state.search_by_dropdown_style),console.log("search_by_textbox_style",n.state.search_by_textbox_style),console.log("submitted_field_style",n.state.submitted_field_style),console.log("approved_field_style",n.state.approved_field_style),console.log("cust_div_style",n.state.cust_div_style),console.log("loan_id_div_style",n.state.loan_id_div_style)},n.handleChangeReset=function(){n.setState({__from:"",__to:"",reg_date_from:"",reg_date_to:"",section1:"show_div",section3:"show_div",section2:"show_div"})},n.state={customer_id:"",action:"Approved",adv_search:!1,show_by_today:!1,show_from_until:!1,today:!1,screen:"",search_by_dropdown_style:"show_div",search_by_textbox_style:"show_div",register_date:null,__from:"",__to:"",reg_date_from:"",reg_date_to:"",section1:"show_div",section3:"show_div",value:"enabled",section2:"show_div"},n}return Object(o.a)(a,[{key:"componentWillMount",value:function(){var e=this.country_code;"loan"==this.props.mode?(this.screen="loan_search",this.setState({doc_id:"loan_doc_id"}),this.setState({doc_id_lbl:"FA ID"})):"loan_appl"==this.props.mode?(this.screen="loan_appl_search",this.setState({doc_id:"loan_appl_doc_id"}),this.setState({doc_id_lbl:"FA Application ID"})):"borrower"==this.props.mode&&(this.screen="borrower_search"),this.handleApiCall(e,this.screen),this.load_flow_rel_mgr(),this.load_dp_rel_mgr(),this.setOptionsListToStateFromAppApi("common","list",Object(X.a)({},this.def_req,{status:"enabled",biz_account:!0}),["acc_prvdr_code","name"],"acc_prvdr")}},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement("form",{method:"get",action:"/",className:"form-horizontal",autocomplete:"off"},r.a.createElement("div",{className:"row no-margin",style:{backgroundColor:"#202940"}},r.a.createElement("div",{className:"col-md-3 marT-5"},r.a.createElement("div",{className:"",style:{position:"relative"}},"borrower"==this.props.mode?null:r.a.createElement("font",{className:"text-danger",style:{position:"absolute",top:0,left:0}},"   *  "),r.a.createElement("select",{className:"form-control",title:"Status",id:"status",onChange:function(t){e.handleDropdownValue(t),e.handleChange(t),e.handleSection1(t)},required:!0},r.a.createElement("option",{selected:!0,value:""},"Status"),"loan_appl"==this.props.mode&&this.state.loan_appl_status_dd,"loan"==this.props.mode&&this.state.loan_status_dd,"borrower"==this.props.mode&&this.state.borrower_status_dd))),r.a.createElement("div",{className:"col-md-3 marT-5"},r.a.createElement("div",{className:""},r.a.createElement("select",{className:"form-control",id:"acc_prvdr_code",onChange:function(t){e.handleChange(t),e.handleDropdownValue(t),e.handleSection1(t)}},r.a.createElement("option",{selected:!0,value:""},"Account Provider"),this.state.acc_prvdr_dd))),r.a.createElement("div",{className:"col-md-3 marT-5"},r.a.createElement("div",{className:""},r.a.createElement("select",{className:"form-control",title:"Flow Relationship Manager",id:"flow_rel_mgr_id",onChange:function(t){e.handleChange(t),e.handleDropdownValue(t),e.handleSection1(t)}},r.a.createElement("option",{selected:!0,value:""},"Flow Relationship Manager"),this.state.flow_rel_mgr_dd))),("loan"==this.props.mode||"loan_appl"==this.props.mode)&&r.a.createElement("div",{className:"col-md-3 marT-5"},r.a.createElement("div",{className:""},r.a.createElement("select",{className:"form-control",id:"product_id",onChange:function(t){e.handleChange(t),e.handleDropdownValue(t),e.handleSection1(t)}},r.a.createElement("option",{selected:!0,value:""},"Product Name"),this.state.product_name_list_dd))),"loan"==this.props.mode&&E("loan","search_list_view_write_off")&&r.a.createElement(r.a.Fragment,null,"loan"==this.props.mode&&r.a.createElement("div",{className:"col-md-3 marT-5"},r.a.createElement("div",{className:""},r.a.createElement("select",{className:"form-control",id:"write_off_status",onChange:function(t){e.handleChange(t),e.handleDropdownValue(t),e.handleSection1(t)}},r.a.createElement("option",{selected:!0,value:""},"Write Off Status"),this.state.write_off_status_list_dd)))),("loan"==this.props.mode||"loan_appl"==this.props.mode)&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"".concat(this.state.search_by_dropdown_style," col-md-12 no-padding")},this.SearchByFromUntil("loan"==this.props.mode?3:0)),this.WildCardSearch()),"borrower"==this.props.mode&&r.a.createElement(r.a.Fragment,null,this.SearchBorrower(),r.a.createElement("div",{className:"col-12"},r.a.createElement("div",{className:"col-12 text-center d-flex justify-content-center align-items-center",style:{padding:10}},r.a.createElement("h3",{className:"font-weight-bolder no-margin"},"OR"),r.a.createElement("h3",{className:"no-margin",style:{paddingLeft:15,cursor:"pointer"},onClick:this.toggleAdvSearch},"Advanced search")),this.state.adv_search&&this.AdvancedSearch())),r.a.createElement("div",{className:"col-12 text-center",style:{paddingBottom:15,paddingTop:5}},r.a.createElement(lt.a,{type:"reset",variant:"secondary",onClick:this.handleResetClick},"Reset")," \xa0",r.a.createElement(lt.a,{id:"searchbtn",varient:"info",disabled:this.props.disable_btn,className:"btn-primary",onClick:"borrower"==this.props.mode?this.props.onSearch("search",null):this.props.onSearch},"Search")," \xa0"))))}}]),a}(ut);function Fo(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(u.a)(e);if(t){var r=Object(u.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(m.a)(this,a)}}var Lo=function(e){Object(d.a)(a,e);var t=Fo(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).handleViewAccountsClick=function(e,t,a){n.setState({cust_id:e.target.id}),n.acc_number=t,n.person_name=a,n.setState({modalBox:"true"})},n.handleModalClose=function(e){n.setState({modalBox:!1})},n.handleModifySearch=function(e){n.setState({search_div_style:"show_div",modify_search:"hide_div"})},n.handleClick=function(e,t,a){return function(r){if(r.preventDefault(),null==a){if(!n.state.searchBorrower.req_parameter)return void alert("Please enter a criteria in 'Any Customer ID / Mobile No / National ID'");a=n.state.searchBorrower.req_parameter}"institutional"===t?window.open("/borrower/ins/"+e+"/"+a,"_blank"):window.open("/borrower/indiv/"+e+"/"+a,"_blank")}},n.handleSearch=function(e,t){return function(a){la()("#borrower_list").DataTable().destroy();var r=n.state.searchBorrower;r.mode=e,Object.keys(r).length>0?(n.setState({datatable_div_style:"hide_div"}),ga(n.req({borrower_search_criteria:r},!0)).then(function(a){n.resp(a),a&&("success"===a.status?("view"==a.data.mode?"institutional"===t?window.open("/borrower/ins/"+e+"/"+a.data.cust_id,"_blank"):window.open("/borrower/indiv/"+e+"/"+a.data.cust_id,"_blank"):"search"==a.data.mode&&(n.borrower=a.data.results),E("customer","list_account")?n.btn_style="show_div":n.btn_style="disable_div",n.setState(function(e){return e.columndatas=n.drawColumndata()}),n.setState(function(e){return e.rowdatas=a.data.results}),n.setState(function(e){return e.copy=a.data.results})):alert("No results found."))})):alert("Please enter valid criteria")}},n.changeHandler=function(e){var t=e,a=n.state.rowdatas.filter(function(e){return null!==e.cust_id&&e.cust_id.toLowerCase().includes(t.toLowerCase())||null!==e.acc_number&&e.acc_number.includes(t)||null!==e.category&&e.category.toLowerCase().includes(t.toLowerCase())||null!==e.biz_name&&e.biz_name.toLowerCase().includes(t.toLowerCase())||null!==e.flow_rel_mgr_name&&e.flow_rel_mgr_name.toLowerCase().includes(t.toLowerCase())||null!==e.reg_flow_rel_mgr_name&&e.reg_flow_rel_mgr_name.toLowerCase().includes(t.toLowerCase())||null!==e.territory&&e.territory.toLowerCase().includes(t.toLowerCase())||null!==e.location&&e.location.toLowerCase().includes(t.toLowerCase())});n.setState(function(e){return e.copy=a})},n.handlecloseprofilechange=function(e){var t=n.state.profile_status,a="closed_profile"===e.target.id?e.target.checked:e.target.value;t[e.target.id]=a,n.state.searchBorrower.profile_status=1==t.closed_profile?"closed":"open"},n.state={searchBorrower:{profile_status:"open"},datatable_div_style:"hide_div",search_div_style:"show_div",modalBox:!1,modify_search:"hide_div",accountList:null,profile_status:{closed_profile:!1},columndatas:[],rowdatas:[],copy:[]},n}return Object(o.a)(a,[{key:"drawColumndata",value:function(){var e=this,t=E("customer","edit"),a=E("customer","risk_category");return[{Header:"SI No.",id:"row",Cell:function(e){return r.a.createElement("div",null,e.index+1)}},{Header:"ACC PRVDR",id:"acc_prvdr_code",sortable:!1,accessor:function(e){return r.a.createElement(Le,{logotype:e.acc_prvdr_code})}},{Header:"FLOW Cust ID",id:"cust_id",sortable:!1,accessor:function(t){return r.a.createElement("a",{href:"#",className:"flow_custid",onClick:e.handleClick("view",t.biz_type,t.cust_id),target:"_blank"},t.cust_id)}},{Header:"A/C Number",id:"acc_number",sortable:!1,accessor:function(e){return e.acc_number}},{Header:"Category",id:"category",accessor:function(e){return e.category}},{Header:"Business Name",id:"biz_name",sortMethod:function(t,a){return e.sortBiz(t,a)},accessor:function(e){return r.a.createElement(Rt,{full_text:e.biz_name,overlay:Ne(e)})}},{Header:"RM Name",id:"flow_rel_mgr_name",accessor:function(e){return e.flow_rel_mgr_name}},{Header:"Reg RM Name",id:"reg_flow_rel_mgr_name",accessor:function(e){return e.reg_flow_rel_mgr_name}},{Header:"Total FAs",id:"tot_loans",accessor:function(e){return e.tot_loans?e.tot_loans:0}},{Header:"Open FA / APPL",sortable:!1,id:"ongoing_loan_doc_id",accessor:function(e){return e.is_og_loan_overdue&&e.ongoing_loan_doc_id?r.a.createElement(ee.a,{to:"/fa/view/"+e.ongoing_loan_doc_id,target:"_blank",className:"overdue"},e.ongoing_loan_doc_id):e.ongoing_loan_doc_id?r.a.createElement(ee.a,{to:"/fa/view/"+e.ongoing_loan_doc_id,target:"_blank",className:"on_going"},e.ongoing_loan_doc_id):e.pending_loan_appl_doc_id?r.a.createElement(ee.a,{to:"/fa_appl/view/"+e.pending_loan_appl_doc_id,target:"_blank",className:"pending"},e.pending_loan_appl_doc_id):r.a.createElement(ee.a,{to:"/fa_appl_for/"+e.cust_id,target:"_blank",className:"apply"},"Apply FA")}},{Header:"Overdue",id:"is_og_loan_overdue",accessor:function(e){return e.is_og_loan_overdue?"YES":"NO"}},{Header:"Reg Date",id:"reg_date",sortMethod:function(t,a){return e.sortDate(t,a)},accessor:function(e){return e.reg_date?r.a.createElement("span",null,ge(e.reg_date)):"NA"}},{Header:"Last Visit",id:"last_visit_date",sortMethod:function(t,a){return e.sortDate(t,a)},accessor:function(e){return e.last_visit_date?r.a.createElement("span",null,ge(e.last_visit_date)):"NA"}},{Header:"Last FA",id:"last_loan_date",sortMethod:function(t,a){return e.sortDate(t,a)},accessor:function(e){return e.last_loan_date?r.a.createElement("span",null,ge(e.last_loan_date)):"NA"}},{Header:"Cond Count",id:"cond_count",accessor:function(e){return e.cond_count}},{Header:"Territory",id:"territory",accessor:function(e){return Ze(e.territory)}},{Header:"Location",id:"location",accessor:function(e){return Ze(e.location)}},{Header:"Profile Status",id:"profile_status",accessor:function(e){return Ze(e.profile_status)}},{Header:"Activity Status",id:"activity_status",accessor:function(e){return Ze(e.activity_status)}},{Header:"Risk Category",id:"risk_category",show:a,accessor:function(e){return a&&Ze(e.risk_category)}},{Header:"Status",id:"status",accessor:function(e){return Ze(e.status)}},{Header:"Edit",sortable:!1,id:"edit",show:t,accessor:function(a){return t&&r.a.createElement("input",{id:a.cust_id,type:"button",onClick:e.handleClick("edit",a.biz_type,a.cust_id),value:"Edit",className:"btn-sm btn-primary"})}}]}},{key:"sortDate",value:function(e,t){var a=e.props.children,n=t.props.children;return ao(a,n)}},{key:"sortBiz",value:function(e,t){return eo(e.props.full_text,t.props.full_text)}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"container containerTopmargin max-width no-padding"},r.a.createElement("div",{className:"floatAdvancetitleBox"},r.a.createElement("h5",{className:"no-margin preHeaderpad",style:{paddingLeft:15,fontSize:20}},"SEARCH - Customer ")),r.a.createElement("div",{className:this.state.modify_search},r.a.createElement("button",{type:"button",className:"btn btn-md btn-light",id:"float_style",onClick:this.handleModifySearch},"Modify Search")),r.a.createElement("div",{className:this.state.search_div_style},r.a.createElement(Do,{id:"searchBorrower",mode:"borrower",onSearch:this.handleSearch,onView:this.handleClick,disable_btn:this.state.calling_api,onComponentChange:this.handleComponentChange,onComponentReset:this.handleComponentReset,onComponentElementChange:this.handleComponentElemetChange,onComponentCheckboxclick:this.handlecloseprofilechange,profile_status:this.state.profile_status})),this.state.rowdatas&&r.a.createElement("div",{className:this.state.datatable_div_style+"card"},r.a.createElement("div",{id:""},r.a.createElement("div",{className:"customer_list_reactTable"},this.state.rowdatas.length>0&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"d-flex justify-content-between align-items-center",style:{padding:5}},r.a.createElement("p",{className:"no-margin text-white"},r.a.createElement("b",null,"Total Entries : ",this.state.copy.length)),r.a.createElement("div",{style:{position:"relative"}},r.a.createElement("i",{class:"fa-solid fa-magnifying-glass search_pos"}),r.a.createElement("input",{placeholder:"Search here",className:"search_posInput",onChange:function(t){return e.changeHandler(t.target.value)}}))),r.a.createElement(za,{showPag:!0,defaultPageSize:10,minRow:0,row_data:void 0!==this.state.copy?this.state.copy:[],column_data:this.state.columndatas,resizable:!1,exportCSV:!0,csvFile:"Customer Lists",csvData:void 0!==this.state.copy?this.state.copy:[]}))),r.a.createElement(rt.a,{show:this.state.modalBox,onHide:this.handleModalClose,size:"xl"},r.a.createElement(rt.a.Header,{closeButton:!0,show:this.state.modalBox,onHide:this.handleModalClose},r.a.createElement(rt.a.Title,null,"Customer Accounts : ",this.state.cust_id)),r.a.createElement(rt.a.Body,null,r.a.createElement(Va,{entity:"customer",dp_cust_id:this.acc_number,cust_name:this.person_name,entity_id:this.state.cust_id})),r.a.createElement(rt.a.Footer,null,r.a.createElement(lt.a,{variant:"secondary",onClick:this.handleModalClose},"Close"))))))}}]),a}(dt);a(75);function Po(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(u.a)(e);if(t){var r=Object(u.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(m.a)(this,a)}}var Bo=function(e){Object(d.a)(a,e);var t=Po(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={comp_name:"borrower",biz_type:"individual",cus_type:"show_div"},e.handleCustTypeChange=function(t){var a=t.target.value;"flow_rm"==a&&E("flow_rel_mgr","create")||"data_prvdr_rm"==a&&E("data_prvdr_rel_mgr","create")||"individual"==a?(e.handleChange(t),e.props.onCustTypeChange(t),e.setState({biz_type:a})):(alert("You can not create a "+a+" customer"),window.location.reload())},e.handleCheck=function(t){t.target.checked?e.handleChange({target:{id:"use_as_ac_num",value:!0}}):e.handleChange({target:{id:"use_as_ac_num",value:!1}})},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.handleChange({target:{id:"use_as_ac_num",value:!0}})}},{key:"componentWillMount",value:function(){Object($.a)(Object(u.a)(a.prototype),"componentWillMount",this).call(this),this.setOptionsToStateFromApi("lender"),this.load_dp_rel_mgr();this.setOptionsToStateFromApi("rel_mgr",Object(X.a)({},this.def_req,{associated_with:"flow"})),"view"==this.props.mode&&this.setState({cus_type:"disable_div"})}},{key:"render",value:function(){var e=this;return console.log("this.props.data.photo_biz_lic"+this.props.data),r.a.createElement("div",{id:""},r.a.createElement("div",{className:"row no-margin align-items-center floatAdvancetitleBox agreementDateHeaderBox"},r.a.createElement("div",{className:"col-md-4"},r.a.createElement("h4",{className:"no-margin headerTitle"},this.props.title?this.props.title:"Customer Profile")),r.a.createElement("div",{className:"col-md-1 ".concat(this.state.edit_button_style)},r.a.createElement(xt,{entity:"customer",onClick:this.handleEdit})),r.a.createElement("div",{className:"col-md-1 ".concat(this.state.save_button_style)},r.a.createElement("input",{onClick:this.handleSave,type:"button",className:"btn btn-success btn-std",value:"Save"}))),r.a.createElement("div",{className:this.state.div_style},r.a.createElement("div",{className:"row no-margin labelTopgap align-items-end"},r.a.createElement("div",{className:"col-md-3"},r.a.createElement("span",{className:"viewCus_label"},"Business Name"),r.a.createElement("font",{className:"text-danger"},"   *  "),r.a.createElement("input",{id:"biz_name",value:this.props.data.biz_name,onChange:this.toUpperHandleChange,className:"form-control",required:!0})),r.a.createElement("div",{className:"col-md-3 ".concat(this.state.cus_type)},r.a.createElement("span",{className:"viewCus_label"},"Customer Type"),r.a.createElement("font",{className:"text-danger"},"   *  "),r.a.createElement("select",{id:"biz_type",value:this.props.data.biz_type,onChange:function(t){e.handleCustTypeChange(t)},className:"form-control",type:"text",required:"required"},this.getSelectOptions("borrower_type"))),r.a.createElement("div",{className:"col-md-3"},r.a.createElement("span",{className:"viewCus_label"},"Business Address Type"),r.a.createElement("font",{className:"text-danger"},"   *  "),r.a.createElement("select",{id:"biz_addr_prop_type",value:this.props.data.biz_addr_prop_type,onChange:this.handleChange,className:"form-control",type:"text",required:"required"},this.getSelectOptions("biz_addr_prop_type"))),r.a.createElement("div",{className:"col-md-3"},r.a.createElement("span",{className:"viewCus_label"},"Ownership "),r.a.createElement("font",{className:"text-danger"},"   *  ")," ",r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("label",null,r.a.createElement("input",{id:"ownership",type:"radio",name:"ownership",value:"owned",onChange:this.handleChange,checked:"owned"===this.props.data.ownership}),"  Owned \xa0\xa0\xa0"),r.a.createElement("label",null,r.a.createElement("input",{id:"ownership",type:"radio",name:"ownership",value:"rented",onChange:this.handleChange,checked:"rented"===this.props.data.ownership}),"  Rented \xa0\xa0\xa0"))),r.a.createElement("div",{className:"row no-margin labelTopgap align-items-end"},r.a.createElement("div",{className:"col-md-3"},r.a.createElement("span",{className:"viewCus_label"},"Business distance from Home"),r.a.createElement("font",{className:"text-danger"},"   *  "),r.a.createElement("select",{id:"business_distance",value:this.props.data.business_distance,onChange:this.handleChange,className:"form-control",type:"text",required:"required"},this.getSelectOptions("business_distance"))),"view"!==this.props.mode&&r.a.createElement(r.a.Fragment,null,r.a.createElement(Da,{className:"col-md-3",label:"Data Provider Customer ID",id:"data_prvdr_cust_id",onChange:this.handleChange}),r.a.createElement("div",{className:"col-md-3"},r.a.createElement("label",{className:"checkbox-inline"},r.a.createElement("input",{id:"use_as_ac_num",type:"checkbox",defaultChecked:!0,onChange:function(t){e.handleCheck(t)}}),r.a.createElement("span",null," Use this DP cust ID as A/C number for disbursal credit"))))),r.a.createElement("div",{className:"row labelTopgap no-margin align-items-end"},r.a.createElement("div",{className:"col-md-3"},r.a.createElement("span",{className:"viewCus_label"},"Lender"),r.a.createElement("font",{className:"text-danger"},"   *  "),r.a.createElement("select",{id:"lender_code",value:this.props.data.lender_code,onChange:this.handleChange,className:"form-control",type:"text",required:"required"},this.state.lender_dd)),r.a.createElement("div",{className:"col-md-3"},r.a.createElement("span",{className:"viewCus_label"},"Account Provider's Relationship Manager"),r.a.createElement("font",{className:"text-danger"},"   *  "),r.a.createElement("select",{id:"dp_rel_mgr_id",value:this.props.data.dp_rel_mgr_id,onChange:this.handleChange,className:"form-control",type:"text",required:"required"},this.state.acc_prvdr_rel_mgr_dd)),r.a.createElement("div",{className:"col-md-3"},r.a.createElement("span",{className:"viewCus_label"},"Flow Relationship Manager"),r.a.createElement("font",{className:"text-danger"},"   *  "),r.a.createElement("select",{id:"flow_rel_mgr_id",value:this.props.data.flow_rel_mgr_id,onChange:this.handleChange,className:"form-control",type:"text",required:"required"},this.state.flow_rel_mgr_dd)),r.a.createElement("div",{className:"col-md-3"},r.a.createElement("span",{className:"viewCus_label"},"Registered Date"),r.a.createElement("font",{className:"text-danger"},"   *  "),r.a.createElement(Ht.a,{value:ge(this.props.data.reg_date),closeOnSelect:!0,onChange:function(t){e.handleDateChange("reg_date",t)},dateFormat:"DD MMM YYYY",timeFormat:!1,required:"required"}))),r.a.createElement("div",{className:"row"},"Customer Details"===this.props.title&&r.a.createElement("div",{className:"col-md-3"},r.a.createElement("span",null,"Number of Tills"),r.a.createElement("select",{id:"number_of_tills",value:this.props.data.number_of_tills,onChange:this.handleChange,className:"form-control",required:!0},r.a.createElement("option",{value:""},"Choose"),r.a.createElement("option",{value:"1"},"1"),r.a.createElement("option",{value:"2"},"2"),r.a.createElement("option",{value:"3"},"3"),r.a.createElement("option",{value:"4"},"4"),r.a.createElement("option",{value:"5"},"5"),r.a.createElement("option",{value:"6"},"6"),r.a.createElement("option",{value:"7"},"7"),r.a.createElement("option",{value:"8"},"8"),r.a.createElement("option",{value:"9"},"9"),r.a.createElement("option",{value:"10"},"10")))),("individual"==this.state.biz_type||"institutional"==this.state.biz_type)&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"row labelTopgap no-margin"},r.a.createElement("div",{className:"col-md-6"},r.a.createElement(Gt,{id:"photo_shop",label:"Establishment Photo",borrower_id:this.props.data.id,cust_id:this.props.data.cust_id,db_file_name:this.props.data.photo_shop,type:"image",mode:this.props.mode,onCreateUpload:this.handleChange,onEditUpload:function(t){e.handleChangeForEdit(t),e.handleSave(t,"reload")}}))),r.a.createElement("div",{className:"row labelTopgap no-margin"},r.a.createElement("div",{className:"col-md-6"},r.a.createElement(Gt,{id:"photo_biz_lic",label:"Business Licence",borrower_id:this.props.data.id,cust_id:this.props.data.cust_id,db_file_name:this.props.data.photo_biz_lic,type:"image",mode:this.props.mode,onCreateUpload:this.handleChange,onEditUpload:function(t){e.handleChangeForEdit(t),e.handleSave(t,"reload")}})))),r.a.createElement("div",{className:"row labelTopgap no-margin",style:{paddingBottom:23}},r.a.createElement("div",{className:"col-md-6"},r.a.createElement("span",{className:"viewCus_label"},"Remarks"),r.a.createElement("textarea",{id:"remarks",value:this.props.data.remarks,onChange:this.handleChange,className:"form-control",required:!0})))))}}]),a}(ut);function Mo(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(u.a)(e);if(t){var r=Object(u.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(m.a)(this,a)}}var To=function(e){Object(d.a)(a,e);var t=Mo(a);function a(){var e,n;Object(s.a)(this,a);for(var r=arguments.length,l=new Array(r),c=0;c<r;c++)l[c]=arguments[c];return(n=t.call.apply(t,[this].concat(l))).state={biz_type:"individual",logout:Object($.a)((e=Object(i.a)(n),Object(u.a)(a.prototype)),"touch_async",e).call(e),toList:!1,cust_id:null,disburse_style:"",biz_address:{touch:null},owner_person:{touch:null},contact_person:{touch:null},owner_address:{touch:null},contact_address:{touch:null},borrower:{},person_div_style:"show_div",send_country_code:!0,same_as_biz_address:!1,acc_num_check_box:"",pointer_evt:""},n.handleSubmit=function(e){e.preventDefault();var t=n.state.borrower;t.country_code=n.country_code,t.biz_address=n.state.biz_address,t.biz_address.country_code=n.country_code,t.owner_person=n.state.owner_person,t.owner_person.owner_address=n.state.owner_address,t.owner_person.owner_address.country_code=n.country_code,t.owner_person.country_code=n.country_code,"business_at_home"==n.state.borrower.business_distance?t.same_as_biz_address=!0:t.same_as_biz_address=!1,n.setState({disburse_style:"disable_div"}),fa(n.req({borrower:t},!0)).then(function(e){n.setState({disburse_style:""}),e&&("success"===e.status?(n.setState({cust_id:e.data}),n.setState({toList:!0}),alert("New Customer created successfully")):alert(e.message+"\n"+JSON.stringify(e.data)))})},n.handleCustTypeChange=function(e){n.setState({biz_type:e.target.value})},n.handleCheck=function(e){n.state.acc_num_check_box=1==e},n}return Object(o.a)(a,[{key:"componentWillMount",value:function(){var e=this;"view"===this.props.mode?(this.cust_id=this.props.match.params.cust_id,va(this.req({cust_id:this.cust_id,screen:"edit"})).then(function(t){if(t){e.borrower=t.data;var a=e.borrower.owner_person,n=a?a.owner_address:null,r=e.borrower.contact_persons?e.borrower.contact_persons:{};r.length>0&&r.map(function(t){return e.setState({contact_persons:t,contact_address:t.contact_address})}),e.setState({borrower:e.borrower,biz_address:e.borrower.biz_address,owner_person:a,owner_address:n,biz_type:e.borrower.biz_type}),"closed"==e.state.borrower.profile_status&&e.setState({pointer_evt:"pointer_evt"})}})):this.props.mode}},{key:"render",value:function(){var e=this;if("business_at_home"==this.state.borrower.business_distance)var t="hide_div";else t="show_div";return console.log("borrower"+this.state.borrower.photo_biz_lic),this.state.logout.then(function(t){return e.logout=t}),this.logout?r.a.createElement(r.a.Fragment,null):!0===this.state.toList?r.a.createElement(Y.a,{to:"/borrower/indiv/edit/".concat(this.state.cust_id)}):r.a.createElement("div",{className:"container date-range max-width containerTopmargin no-padding"},r.a.createElement("h5",{className:"no-margin headerTitle headerPadvert"},this.props.title+(this.state.borrower.name?" : "+this.state.borrower.name:"")+" "+(this.cust_id?this.cust_id:"")+(this.state.borrower.acc_number?" / "+this.state.borrower.acc_number:"")),r.a.createElement("form",{id:"borrower_form",class:"borrower_form",onSubmit:this.handleSubmit},r.a.createElement("div",{id:"",className:"".concat(this.state.pointer_evt," loggedPersondetailsBox")},("create"==this.props.mode||!gc.a.isEmpty(this.state.borrower))&&r.a.createElement(Bo,{id:"borrower",data:this.state.borrower,onCustTypeChange:this.handleCustTypeChange,entity:"customer",screen:this.props.screen,mode:this.props.mode,onComponentChange:this.handleComponentChange,onCheck:this.handleCheck}),"individual"==this.state.biz_type&&r.a.createElement(r.a.Fragment,null,r.a.createElement(Mt,{id:"biz_address",screen:"borrower",title:"Business Address",entity:"customer",gps:this.state.gps,data:this.state.biz_address,mode:this.props.mode,onComponentChange:this.handleComponentChange,onComponentReset:this.handleComponentReset}),r.a.createElement($t,{id:"owner_person",title:"Business Owner Details",val:"Business Owner Details",entity:"customer",data:this.state.owner_person,mode:this.props.mode,onComponentChange:this.handleComponentChange})),"individual"==this.state.biz_type&&"view"===this.props.mode&&r.a.createElement("div",{className:t},r.a.createElement(Mt,{id:"owner_address",entity:"customer",title:"Business Owner Address",data:this.state.owner_address,mode:this.props.mode,onComponentChange:this.handleComponentChange,onComponentReset:this.handleComponentReset})),"individual"==this.state.biz_type&&"view"!==this.props.mode&&r.a.createElement("div",null,r.a.createElement("div",{className:t},r.a.createElement("label",{className:"checkbox-inline"},r.a.createElement("h4",null,"Business Owner Address")),r.a.createElement(Mt,{id:"owner_address",screen:"borrower",entity:"customer",data:this.state.owner_address,mode:this.props.mode,onComponentChange:this.handleComponentChange,onComponentReset:this.handleComponentReset}))),"individual"==this.state.biz_type&&!gc.a.isEmpty(this.state.contact_persons)&&r.a.createElement(r.a.Fragment,null,r.a.createElement($t,{id:"contact_person",title:"Handler Details",val:"Contact Person Details",entity:"customer",data:this.state.contact_person,mode:this.props.mode,onComponentChange:this.handleComponentChange}),r.a.createElement(Mt,{id:"contact_address",screen:"borrower",title:"Handler Address",entity:"customer",data:this.state.contact_address,mode:this.props.mode,onComponentChange:this.handleComponentChange,onComponentReset:this.handleComponentReset}),r.a.createElement("br",null)),r.a.createElement("input",{type:"button",className:"btn btn-primary ".concat(this.state.disburse_style," ").concat("create"===this.props.mode?"show_button":"hide_button"),onClick:this.handleSubmit,value:"Create New Customer"}))))}}]),a}(dt);function Ho(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(u.a)(e);if(t){var r=Object(u.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(m.a)(this,a)}}var qo=function(e){Object(d.a)(a,e);var t=Ho(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={modalBox2:!1,status_history:[],audit_type:"status_change",columns:[]},e.StatusModalClose=function(){e.setState({modalBox2:!1})},e.audit_changes=function(t){var a={record_code:e.props.record_code,audit_type:e.props.audit_type};Xe(e.req(a)).then(function(t){if(t&&"success"===t.status){var a;a=[{Header:"Change Time",id:"Date",accessor:function(e){return ve(e.created_at,!0)}},{Header:e.props.title+" Before",accessor:"data_before"},{Header:e.props.title+" After",accessor:"data_after",style:{whiteSpace:"unset"},width:400},{Header:"Remarks",accessor:"remarks",style:{whiteSpace:"unset"}}],e.setState({modalBox2:!0,status_history:t.data,columns:a})}}),e.setState({modalBox2:!0})},e}return Object(o.a)(a,[{key:"render",value:function(){return r.a.createElement(rt.a,{show:this.state.modalBox2,onHide:this.StatusModalClose,size:"xl",className:"recordAuditbox"},r.a.createElement(rt.a.Header,{closeButton:!0,show:this.state.modalBox2,onHide:this.StatusModalClose},r.a.createElement(rt.a.Title,{style:{fontWeight:"bold"}}," ",this.props.title+" Change History"," ",Ze(this.props.cust_id))),r.a.createElement(za,{showPag:!1,minRow:0,row_data:void 0!==this.state.status_history?this.state.status_history:[],column_data:this.state.columns,resizable:!1}))}}]),a}(ut);function zo(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(u.a)(e);if(t){var r=Object(u.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(m.a)(this,a)}}var Io=function(e){Object(d.a)(a,e);var t=zo(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={modalBox:!1,status_change:{},audit_type:"status_change"},e.updateStatus=function(t){var a=e.state.status_change,n=e.validate_status_change(a),r=t.target.value.toLowerCase()+"d";if(n){var l=Object(X.a)({id:e.props.id,cust_id:e.props.cust_id,status:r},a),c=Object(k.a)({},t.target.name,l);Ea(e.req(c)).then(function(t){t&&("success"===t.status?(e.handleModalClose(),window.location.reload()):alert(t.message+"\n"+JSON.stringify(t.data)))})}},e.handleModalClose=function(){e.setState({modalBox:!1})},e.handleStatusChange=function(t){var a=e.state.status_change;a[t.target.id]=t.target.value,e.setState({status_change:a})},e.handleReasonChange=function(t){var a=e.state.status_change;a.status_reason=t.map(function(e){return e.value}),e.setState({status_change:a})},e.handleModalOpen=function(t){e.setState({modalBox:!0})},e}return Object(o.a)(a,[{key:"componentWillMount",value:function(){console.log(this.props,"props on will mount"),this.setState({status:this.props.status});var e=this.props.parent;e||("borrower"==(e=this.props.entity.slice(0,-1))?e="customer":"loan_product"==e?e="product":"acc_provider"==e?e="acc_prvdr":"master_data_key"==e&&(e="data_key"));E(e,"create")?this.btn_style=!1:this.btn_style=!0}},{key:"componentWillReceiveProps",value:function(e){this.setState({status:e.status});var t=e.parent;t||("borrower"==(t=e.entity.slice(0,-1))?t="customer":"loan_product"==t?t="product":"acc_provider"==t?t="acc_prvdr":"master_data_key"==t&&(t="data_key"));E(t,"create")?this.btn_style=!1:this.btn_style=!0}},{key:"validate_status_change",value:function(e){return!(!e.remarks||!e.status_reason)||(alert("Please enter required fields"),!1)}},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement(rt.a,{show:this.state.modalBox,onHide:this.handleModalClose,size:"l"},r.a.createElement(rt.a.Header,{closeButton:!0,show:this.state.modalBox,onHide:this.handleModalClose},r.a.createElement(rt.a.Title,null,"Reason to ",Ce(this.state.status))),r.a.createElement(rt.a.Body,null,r.a.createElement("div",{className:"form-group row mx-0 mb-2 "},r.a.createElement("label",{for:"",className:"col-sm-5 font-weight-bold label__name reset-padding"}," Reason",r.a.createElement("font",{className:"text-danger"},"   *  ")),r.a.createElement("div",{className:"col-sm-7 reset-padding"},r.a.createElement("div",null,"disabled"===this.state.status&&r.a.createElement(Yl.a,{onChange:function(t){e.handleReasonChange(t)},options:this.getMultiSelectOptions("reason_for_enable"),isMulti:!0}),"enabled"===this.state.status&&r.a.createElement(Yl.a,{onChange:function(t){e.handleReasonChange(t)},options:this.getMultiSelectOptions("reason_for_disable"),isMulti:!0})),r.a.createElement("div",{className:"control-me"}))),r.a.createElement("div",{className:"rule-form-group form-group row reset-margin"},r.a.createElement("label",{for:"",className:"col-sm-5 font-weight-bold label__name reset-padding"},"Remarks",r.a.createElement("font",{className:"text-danger"},"   *  ")),r.a.createElement("div",{className:"col-sm-7 reset-padding"},r.a.createElement("div",null,r.a.createElement("textarea",{type:"text",id:"remarks",className:"form-control",onChange:function(t){e.handleStatusChange(t)},maxLength:"256"}))))),r.a.createElement(rt.a.Footer,null,r.a.createElement(lt.a,{variant:"secondary",onClick:this.handleModalClose,className:"btn-std"},"Close"),r.a.createElement(lt.a,{variant:"primary",name:this.props.entity,value:Ce(this.state.status),className:"ml-2 btn-std",onClick:this.updateStatus},"Submit"))),r.a.createElement(qo,{record_code:this.props.cust_id,audit_type:this.state.audit_type,title:"Customer Status",ref:function(t){e.RecordAudit=t}}),r.a.createElement("button",{className:"btn btn-primary btn-std",onClick:function(){return e.RecordAudit.audit_changes()}},"Status History"),console.log(this.state.status,"button status"),r.a.createElement("button",{id:this.props.id,type:"button",name:this.props.entity,onClick:this.handleModalOpen,className:"btn btn-primary btn-std ml-2",disabled:this.btn_style},Ce(this.state.status)))}}]),a}(ut);a(180);var Wo=a(90),Yo={width:"100%",height:"80vh"};function Vo(e){var t=e.coordinates,a=Object(n.useState)({lat:8.088306,lng:77.538452}),l=Object(_a.a)(a,2),c=l[0],s=l[1];Object(n.useEffect)(function(){if(t){var e=t.split(",")[0],a=t.split(",")[1],n=Number(a),r=Number(e);s({lat:r,lng:n})}},[t]);var o=Object(Wo.c)({googleMapsApiKey:"AIzaSyBXK88JmBu1jfJinv0d8bU4sFZN8o7LgPI"}),i=o.isLoaded;return o.loadError?"Error loading maps":i?r.a.createElement("div",null,r.a.createElement(Wo.a,{mapContainerStyle:Yo,zoom:20,center:c},r.a.createElement(Wo.b,{position:{lat:c.lat,lng:c.lng},onClick:function(e){return function(e){console.log(e,"value from marker")}(e)}}))):"Loading maps"}function Uo(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(u.a)(e);if(t){var r=Object(u.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(m.a)(this,a)}}var Go=function(e){Object(d.a)(a,e);var t=Uo(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={server_time:{},checkin_req:{},pointer_evt:"",mapShow:!1,cust_app_access:!1,show_force_checkin_btn:"disable_div"},e.handleViewAccountsClick=function(t,a,n){e.setState({cust_id:t.target.id}),e.acc_number=a,e.person_name=n,e.setState({modalBox1:"true"})},e.handleModalClose=function(t){e.setState({modalBox1:!1,modalBox2:!1})},e.handleToggleBtn=function(t){e.state.cust_app_access!==t&&e.setState({cust_app_access:t},function(){return e.handleAppAccess()})},e.handleAppAccess=function(){var t="disabled";e.state.cust_app_access&&(t="enabled"),Ca(e.req({cust_id:e.props.customer.cust_id,status:t,cust_app_access:e.state.cust_app_access})).then(function(t){e.resp(t),t&&"success"===t.status&&alert(t.message)})},e.handleCheckIn=function(t){if(!1!==window.confirm("Are you sure to Check-In?")){var a=e.state.checkin_req;a.cust_id=e.props.customer.cust_id,mn(e.req({checkin_req:a})).then(function(e){if(e)if("success"===e.status){var t=e.data,a=!0;"lastvisit"==t.action&&(a=window.confirm(t.message)),a&&t.visit_id&&window.open("/checkout/".concat(t.cust_id,"/").concat(t.visit_id),"_blank")}else alert(e.message+"\n"+JSON.stringify(e.data))})}},e.handleForceCheckIn=function(t){if(!1!==window.confirm("Are you sure to allow Force Check-In?")){var a=e.props.customer.cust_id;pn(e.req({cust_id:a})).then(function(e){e&&(e.status,alert(e.message),window.location.reload())})}},e.handleManualCapture=function(t){if(!1!==window.confirm("Are you sure to allow manual capture?")){var a=e.props.customer.cust_id;xa(e.req({cust_id:a})).then(function(t){e.resp(t),t&&(t.status,alert(t.message),window.location.reload())})}},e.handleSubmit=function(t){var a=e.state.checkin_req;a.cust_id=e.props.customer.cust_id,a.visit_start_time=e.state.server_time.server_time_db,mn(e.req({checkin_req:a})).then(function(t){t&&("success"===t.status?(alert(t.message),e.setState({modalBox2:!1})):alert(t.message+"\n"+JSON.stringify(t.data)))})},e.handleCheckinChange=function(t){var a=e.state.checkin_req;a[t.target.id]=t.target.value,e.setState({checkin_req:a})},e.bring_to_probation=function(t){var a={cust_id:e.props.customer.cust_id};ya(e.req(a,!0)).then(function(t){e.resp(t),t&&("success"===t.status?window.location.reload():alert(t.message+"\n"+JSON.stringify(t.data)))})},e.repeatFloatAdvance=function(t){var a={cust_id:e.props.customer.cust_id};wn(e.req(a)).then(function(e){e&&e&&(alert("Float Advance Application created successfully"),window.location.reload())})},e.handleSignAgreement=function(t){var a=!0;e.props.customer.current_aggr_doc_id&&(a=window.confirm("An agreement already exists for this customer. Do you want to inactivate it and generate a new agreement? ")),a&&window.open("/agreement/upload/".concat(e.props.customer.cust_id),"_blank")},e.close_profile=function(t){if(!1!==window.confirm("Are you sure to close this profile?")){var a={cust_id:e.props.customer.cust_id};Na(e.req(a)).then(function(t){e.resp(t),t&&("success"===t.status?window.location.reload():alert(t.message+"\n"+JSON.stringify(t.data)))})}},e}return Object(o.a)(a,[{key:"componentWillMount",value:function(){}},{key:"componentWillReceiveProps",value:function(e){"closed"==e.customer.profile_status&&this.setState({pointer_evt:"pointer_evt"}),e.customer.show_force_checkin_btn&&this.setState({show_force_checkin_btn:""}),this.setState({cust_app_access:e.app_access})}},{key:"render",value:function(){var e=this;E("customer","bring_to_probation");return console.log("---------------------------------------------------------"+this.props.customer.current_aggr_doc_id),r.a.createElement("div",{className:"".concat(this.state.pointer_evt)},r.a.createElement("div",{className:"floatAdvancecontainer floatAdvancecontainer_nopad"},"closed"==this.props.customer.profile_status&&r.a.createElement("div",{class:"closedStamp"},r.a.createElement("div",{className:"stamp is-nope"},"Closed")),r.a.createElement("section",null,r.a.createElement("div",{className:"d-flex justify-content-between"},r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("p",{className:"personalDetailstextval no-margin preHeaderpad headerTitle",style:{display:"inline-flex"}},this.props.customer.biz_name),r.a.createElement("p",{className:"mt-10 headerTitle no-margin preHeaderpad",style:{display:"inline-flex"}},"\xa0 | ",this.props.customer.cust_id,E("customer","edit")&&r.a.createElement(ee.a,{to:"/borrower/indiv/edit/"+this.props.customer.cust_id,target:"_blank",className:"px-3 fs-6"},r.a.createElement("i",{className:"pb-2 material-icons flag-cursor"},"edit")))),r.a.createElement("div",{className:"row no-margin",style:{paddingBottom:15}},r.a.createElement("span",{className:"statusStyle","data-toggle":"tooltip","data-placement":"top",title:"Category"},Ze(this.props.customer.category),0===this.props.customer.prob_fas&&r.a.createElement("span",{className:"text-white"}," \xa0|\xa0"),this.props.customer.prob_fas>0&&r.a.createElement("span",{className:"text-white"},"(",this.props.customer.prob_fas,"/ ",this.props.customer.tot_prob_cond_fas,") |\xa0")),r.a.createElement("span",{className:"statusStyle","data-toggle":"tooltip","data-placement":"top",title:"Total FAs"},this.props.customer.tot_loans," FAs",r.a.createElement("span",{className:"text-white"},"\xa0|\xa0")),r.a.createElement("span",{className:"statusStyle","data-toggle":"tooltip","data-placement":"top",title:"Activity Status"},he(this.props.customer.activity_status),r.a.createElement("span",{className:"text-white"},"\xa0|\xa0")),E("customer","risk_category")&&r.a.createElement("span",{className:"statusStyle","data-toggle":"tooltip","data-placement":"top",title:"Risk Category"},Ze(this.props.customer.risk_category)),r.a.createElement("span",{className:"statusStyle","data-toggle":"tooltip","data-placement":"top",title:"Status"},r.a.createElement("span",{className:"text-white"},"\xa0|\xa0"),Ze(this.props.customer.status),r.a.createElement("span",{className:"text-white"},"\xa0|\xa0")),r.a.createElement(Io,{show_1l:"true",id:this.props.customer.id,entity:"borrowers",status:this.props.customer.status,category:this.props.customer.category,prob_fas:this.props.customer.prob_fas,kyc_status:this.props.customer.kyc_status,cust_id:this.props.customer.cust_id,tot_prob_cond_fas:this.props.customer.tot_prob_cond_fas,cond_count:this.props.customer.cond_count}))),r.a.createElement("div",{className:"shadow-sm p-3 mb-5 rounded"},E("customer","cust_app_access")&&r.a.createElement(Qc,{title:"Customer App Access",width:"100",leftLabel:this.state.cust_app_access?"Disable":"Disabled",rightLabel:this.state.cust_app_access?"Enabled":"Enable",fontSize:"15",icon:r.a.createElement(Ma.c,{style:{color:"white"}}),val:this.state.cust_app_access,set_tog_val:function(t){return e.handleToggleBtn(t)}})))),r.a.createElement("section",null,r.a.createElement("div",{className:"floatAdvancetitleBox agreementDateHeaderBox"},r.a.createElement("div",{className:"row no-margin agreementDateHeaderBox_pad verticalAlign"},r.a.createElement("div",{className:"no-padding col-lg-1 text-center"},r.a.createElement("h2",{className:"no-margin text-white agreementDateHeaderBoxdate"},"Last Visit : "),r.a.createElement("h2",{className:"no-margin agreementDateHeaderBoxdate agreementDateHeaderBoxdateno_pad text-blue"},"\xa0",ge(this.props.customer.last_visit_date))),r.a.createElement("div",{className:"no-padding col-lg-5 text-center"},r.a.createElement("button",{className:"btn btn-primary",onClick:this.handleCheckIn},r.a.createElement("i",{className:"fa fa-map-marker","aria-hidden":"true"}),"Check In"),r.a.createElement("button",{className:"btn btn-primary",onClick:this.handleViewAccountsClick},r.a.createElement("i",{className:"fa fa-eye",z:!0}),"View A/C"),E("field_visit","allow_force_checkin")&&r.a.createElement("button",{className:"btn btn-primary ".concat(this.state.show_force_checkin_btn),disabled:this.state.calling_api,onClick:this.handleForceCheckIn},"Allow Force CheckIn"),E("account","allow_tp_nid_manual_capture")&&r.a.createElement("button",{className:"btn btn-primary ".concat(this.state.show_force_checkin_btn),disabled:this.state.calling_api,onClick:this.handleManualCapture},"Allow TP NID Manual Capture")),r.a.createElement("div",{className:"no-padding col-lg-6 d-flex justify-content-between"},r.a.createElement("div",null,r.a.createElement(ee.a,{to:"/field_visit/search/"+this.props.customer.cust_id,target:"_blank"},r.a.createElement("a",{className:"custVisit_link"},r.a.createElement("u",null,"Recent Visits")),r.a.createElement("span",{className:"text-white",style:{fontSize:15}},"\xa0|\xa0")),r.a.createElement(ee.a,{to:"/call_log/search/"+this.props.customer.cust_id,target:"_blank"},r.a.createElement("a",{className:"custVisit_link"},r.a.createElement("u",null,"Recent Calls")),r.a.createElement("span",{className:"text-white",style:{fontSize:15}},"\xa0|\xa0")),null!=this.props.customer.ongoing_loan_doc_id&&r.a.createElement(ee.a,{to:"/fa/view/"+this.props.customer.ongoing_loan_doc_id,target:"_blank"},r.a.createElement("a",{className:"custVisit_link"},r.a.createElement("u",null,"View Ongoing FA")),r.a.createElement("span",{className:"text-white",style:{fontSize:15}},"\xa0|\xa0")),null!=this.props.customer.last_loan_doc_id&&r.a.createElement(ee.a,{to:"/fa/view/"+this.props.customer.last_loan_doc_id},r.a.createElement("a",{href:"",className:"custVisit_link"},"View Last FA"))),r.a.createElement("div",{className:"px-3"},E("customer","close")&&r.a.createElement("button",{type:"button",className:"btn btn-danger btn-std ml-5",disabled:this.state.calling_api,onClick:this.close_profile},"Close Profile"))))),r.a.createElement("div",{className:"loggedPersondetailsBox mapModal_width"},r.a.createElement("section",null,r.a.createElement("div",{className:"row no-margin"},r.a.createElement("div",{className:"col-lg-3"},r.a.createElement("p",{className:"no-margin loggedPersondetails loggedPersonid text-center"},this.props.customer.cust_id),r.a.createElement("div",{className:"loggedPersondetailsImg"},r.a.createElement(Oa,{className:"img-fluid",image_path:this.props.customer.photo_pps_path,file_name:this.props.customer.photo_pps})),r.a.createElement("p",{className:"personalDetailstextval no-margin loggedPersondetails loggedPersonname text-center"},this.props.customer.cust_name)),r.a.createElement("div",{className:"col-lg-3 personalDetailsbox"},r.a.createElement("ul",{className:"no-padding"},r.a.createElement("li",null,r.a.createElement("div",{className:""},r.a.createElement("p",{className:"viewCus_label no-margin"},r.a.createElement("i",{class:"fa-solid fa-phone cusVisiticon"}),"Mobile Number"),r.a.createElement("p",{className:"viewCus_labelVal  no-margin"},this.props.owner_person.mobile_num))),r.a.createElement("li",null,r.a.createElement("div",{className:""},r.a.createElement("p",{className:"viewCus_label no-margin"},r.a.createElement("i",{class:"fa-solid fa-location-dot cusVisiticon"}),"Location"),r.a.createElement("p",{className:"viewCus_labelVal no-margin"},this.props.customer.location))),r.a.createElement("li",null,r.a.createElement("div",{className:""},r.a.createElement("p",{className:"viewCus_label no-margin"},r.a.createElement("i",{class:"fa-solid fa-map cusVisiticon"}),"Territory"),r.a.createElement("p",{className:"viewCus_labelVal no-margin"},this.props.customer.territory))),r.a.createElement("li",null,r.a.createElement("div",{className:""},r.a.createElement("p",{className:"viewCus_label no-margin"},r.a.createElement("i",{class:"fa-solid fa-map-pin cusVisiticon"}),"GPS"),r.a.createElement("p",{className:"viewCus_labelVal  no-margin","data-toggle":"modal","data-target":"#exampleModal",style:{cursor:"pointer"}},this.props.customer.gps)),r.a.createElement("div",{class:"modal fade",id:"exampleModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},r.a.createElement("div",{class:"modal-dialog",role:"document"},r.a.createElement("div",{class:"modal-content"},r.a.createElement("div",{class:"modal-header"},r.a.createElement("h5",{class:"modal-title",id:"exampleModalLabel"},"Map View"),r.a.createElement("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close"},r.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),r.a.createElement("div",{class:"modal-body"},r.a.createElement(Vo,{coordinates:this.props.customer.gps})))))))),r.a.createElement("div",{className:"col-lg-3 personalDetailsciewIdbox"},r.a.createElement("ul",{className:"no-padding"},r.a.createElement("li",null,r.a.createElement("div",{className:""},r.a.createElement("p",{className:"viewCus_label no-margin"},"Flow RM"),r.a.createElement("p",{className:"viewCus_labelVal no-margin"},this.props.customer.flow_rel_mgr_name))),r.a.createElement("li",null,r.a.createElement("div",{className:""},r.a.createElement("p",{className:"viewCus_label no-margin"},"Partner RM"),r.a.createElement("p",{className:"viewCus_labelVal no-margin"},this.props.customer.dp_rel_mgr_name))),r.a.createElement("li",null,r.a.createElement("div",{className:""},r.a.createElement("p",{className:"viewCus_label no-margin"},"Registered RM"),r.a.createElement("p",{className:"viewCus_labelVal no-margin"},this.props.customer.reg_flow_rel_mgr_name))))),r.a.createElement("div",{className:"col-lg-3 personalDetailsciewIdbox"},r.a.createElement("ul",{className:"no-padding"},r.a.createElement("li",null,r.a.createElement("div",{className:""},r.a.createElement("p",{className:"viewCus_label no-margin"},"Registration Date"),r.a.createElement("p",{className:"viewCus_labelVal no-margin"},ge(this.props.customer.reg_date)))),r.a.createElement("li",null,r.a.createElement("div",{className:""},r.a.createElement("p",{className:"viewCus_label no-margin"},"Last Visit Date"),r.a.createElement("p",{className:"viewCus_labelVal no-margin"},ge(this.props.customer.last_visit_date)))))))),r.a.createElement("section",{className:"agreementPhotobox"},r.a.createElement("div",{className:"agreementPhotobox_padTop"},r.a.createElement("div",{className:"row no-margin text-center"},r.a.createElement("div",{className:"col-lg-4 cusVisit_imgCen"},r.a.createElement("span",{className:"no-padding viewCus_imglabel"},"Selfie"),r.a.createElement(Oa,{className:"img-fluid",image_path:this.props.customer.photo_selfie_path,file_name:this.props.customer.photo_selfie})),r.a.createElement("div",{className:"col-lg-4 cusVisit_imgCen"},r.a.createElement("span",{className:"no-padding viewCus_imglabel"},"Establishment Photo"),r.a.createElement(Oa,{className:"img-fluid",image_path:this.props.customer.photo_shop_path,file_name:this.props.customer.photo_shop})),r.a.createElement("div",{className:"col-lg-4 cusVisit_imgCen"},r.a.createElement("span",{className:"no-padding viewCus_imglabel"},"Biz License Photo"),r.a.createElement(Oa,{className:"img-fluid",image_path:this.props.customer.photo_biz_lic_path,file_name:this.props.customer.photo_biz_lic}))))),r.a.createElement("div",{className:"floatAdvanceperiodHeaderBox"},r.a.createElement("h2",{className:"floatAdvanceperiodHeader no-margin padL_15"},"Agreement")),r.a.createElement("section",{className:"agreementSignbtn_Box"},r.a.createElement("ul",{className:"pad_15 no-margin ul4_count cust_agreementBox"},r.a.createElement("li",null,r.a.createElement("div",{className:""},r.a.createElement("p",{className:"viewCus_label no-margin no-padding"},"Agreement ID"),r.a.createElement("p",{className:"viewCus_labelVal no-margin"},this.props.customer.current_aggr_doc_id))),r.a.createElement("li",null,r.a.createElement("div",{className:""},r.a.createElement("p",{className:"viewCus_label no-margin no-padding"},"Status"),r.a.createElement("p",{className:"viewCus_labelVal no-margin text-capitalize"},this.props.customer.aggr_status))),r.a.createElement("li",null,r.a.createElement("div",{className:""},r.a.createElement("p",{className:"viewCus_label no-margin no-padding"},"Valid Upto"),r.a.createElement("p",{className:"viewCus_labelVal no-margin"},this.props.customer.aggr_valid_upto))),r.a.createElement("li",null,r.a.createElement(ee.a,{to:"/agreement/list/"+this.props.customer.cust_id},r.a.createElement("button",{className:"btn btn-light no-margin"},"List Customer Agreements")),this.props.customer.data_consent_path&&r.a.createElement(ee.a,{to:"".concat(this.props.customer.data_consent_path)+"/"+"".concat(this.props.customer.file_data_consent),style:{marginLeft:10,marginBottom:0}},r.a.createElement("button",{className:"btn btn-light no-margin"},"View Customer Data Consent")))))))),r.a.createElement(rt.a,{show:this.state.modalBox1,onHide:this.handleModalClose,size:"xl"},r.a.createElement(rt.a.Header,{closeButton:!0,className:"modal-close-btn",show:this.state.modalBox1,onHide:this.handleModalClose},r.a.createElement(rt.a.Title,{style:{fontSize:20}},"Customer Accounts :  ",this.props.customer.cust_id)),r.a.createElement(rt.a.Body,null,r.a.createElement(Va,{entity:"customer",acc_number:this.acc_number,cust_name:this.person_name,entity_id:this.props.customer.cust_id})),r.a.createElement(rt.a.Footer,null,r.a.createElement(lt.a,{variant:"secondary",onClick:this.handleModalClose},"Close"))),r.a.createElement(rt.a,{show:this.state.modalBox2,onHide:this.handleModalClose,size:"l"},r.a.createElement(rt.a.Header,{closeButton:!0,show:this.state.modalBox1,onHide:this.handleModalClose},r.a.createElement(rt.a.Title,null,"Check In")),r.a.createElement(rt.a.Body,null,r.a.createElement("div",{className:"container"},r.a.createElement("form",null,r.a.createElement("div",{className:"rule-form-group  form-group row reset-margin"},r.a.createElement("label",{for:"",className:"col-sm-5 mb-3 label__name font-weight-bold reset-padding"},"Flow Cust ID | DP Cust ID"),r.a.createElement("div",{className:"col-sm-7 reset-padding"},r.a.createElement("div",null,r.a.createElement("label",{className:"",id:"cust_id"},this.props.customer.cust_id," | ",this.props.customer.acc_number)),r.a.createElement("div",{className:"control-me"}))),r.a.createElement("div",{className:"rule-form-group form-group row reset-margin"},r.a.createElement("label",{for:"",className:"col-sm-5 mb-3 font-weight-bold  label__name reset-padding"},"Address"),r.a.createElement("div",{className:"col-sm-7 reset-padding"},r.a.createElement("div",null,r.a.createElement("label",{className:"",id:"cust_id"},this.props.customer.cust_addr_txt)),r.a.createElement("div",{className:"control-me"}))),r.a.createElement("div",{className:"rule-form-group form-group row reset-margin"},r.a.createElement("label",{for:"",className:"col-sm-5 mb-3 font-weight-bold  label__name reset-padding"},"Check In At"),r.a.createElement("div",{className:"col-sm-7 reset-padding"},r.a.createElement("div",null,r.a.createElement("label",{className:"",id:"visit_start_time"},this.state.server_time.server_time_ui)),r.a.createElement("div",{className:"control-me"}))),r.a.createElement("div",{className:"rule-form-group form-group row reset-margin"},r.a.createElement("label",{for:"",className:"col-sm-5 font-weight-bold label__name reset-padding"},"Time Spent"),r.a.createElement("div",{className:"col-sm-7 reset-padding"},r.a.createElement("div",null,r.a.createElement("select",{id:"time_spent",className:"form-control mb-3",onChange:function(t){e.handleCheckinChange(t)}},r.a.createElement("option",{value:""},"choose"),r.a.createElement("option",{value:"5"},"5 Minutes"),r.a.createElement("option",{value:"10"},"10 Minutes"),r.a.createElement("option",{value:"15"},"15 Minutes"),r.a.createElement("option",{value:"20"},"20 Minutes"),r.a.createElement("option",{value:"25"},"25 Minutes"),r.a.createElement("option",{value:"30"},"30 Minutes"))),r.a.createElement("div",{className:"control-me"}))),r.a.createElement("div",{className:"rule-form-group form-group row reset-margin "},r.a.createElement("label",{for:"",className:"col-sm-5 font-weight-bold label__name reset-padding"},"Visit Purpose"),r.a.createElement("div",{className:"col-sm-7 reset-padding"},r.a.createElement("div",null,r.a.createElement("select",{id:"visit_purpose",className:"form-control mb-3",onChange:function(t){e.handleCheckinChange(t)}},this.getSelectOptions("visit_purpose"))),r.a.createElement("div",{className:"control-me"}))),r.a.createElement("div",{className:"rule-form-group form-group row reset-margin"},r.a.createElement("label",{for:"",className:"col-sm-5 font-weight-bold label__name reset-padding"},"Remarks"),r.a.createElement("div",{className:"col-sm-7 reset-padding"},r.a.createElement("div",null,r.a.createElement("input",{autocomplete:"off",type:"text",id:"remarks",className:"form-control",onChange:function(t){e.handleCheckinChange(t)},maxLength:"50"})),r.a.createElement("div",{className:"control-me"}))),r.a.createElement("div",{className:"rule-form-group form-group row reset-margin"},r.a.createElement("label",{className:"cameraButton"},"Take a picture"),r.a.createElement("div",{className:"col-sm-7 reset-padding"},r.a.createElement("div",null,r.a.createElement("input",{type:"file",accept:"image/*",capture:""})),r.a.createElement("div",{className:"control-me"})))))),r.a.createElement(rt.a.Footer,null,r.a.createElement("button",{type:"button",className:"btn btn-primary float-right mr-1",onClick:this.handleSubmit,disable:!0},"Submit"),r.a.createElement(lt.a,{variant:"secondary",onClick:this.handleModalClose},"Close"))))}}]),a}(ut);function Jo(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(u.a)(e);if(t){var r=Object(u.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(m.a)(this,a)}}var Ko=function(e){Object(d.a)(a,e);var t=Jo(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"floatAdvancetitleBox",style:{backgroundColor:"#202940"}},r.a.createElement("div",{className:"floatAdvanceperiodHeaderBox"},"Third Party A/C Owner"==this.props.title&&r.a.createElement("h2",{className:"floatAdvanceperiodHeader padL_15 no-margin"},this.props.title,"  ",r.a.createElement("img",{src:"/img/".concat(this.props.data.acc_prvdr_code,"_logo_color.png "),style:{paddingLeft:"20px",height:30,width:85},alt:this.props.data.acc_prvdr_code})," ",r.a.createElement("span",{style:{paddingLeft:"10px"}},this.props.data.acc_number," ")),"Business Owner Person"==this.props.title&&r.a.createElement("h2",{className:"floatAdvanceperiodHeader padL_15 no-margin"},this.props.title)),r.a.createElement("div",{className:"row no-margin"},r.a.createElement("div",{className:"col-md-3"},r.a.createElement("div",null,r.a.createElement("p",{className:"no-margin viewCus_label"},"First Name"),r.a.createElement("p",{className:"no-margin viewCus_labelVal"},this.props.data.first_name)),r.a.createElement("div",null,r.a.createElement("p",{className:"no-margin viewCus_label"},"Middle Name"),r.a.createElement("p",{className:"no-margin viewCus_labelVal"},this.props.data.middle_name)),r.a.createElement("div",null,r.a.createElement("p",{className:"no-margin viewCus_label"},"Last Name"),r.a.createElement("p",{className:"no-margin viewCus_labelVal"},this.props.data.last_name))),r.a.createElement("div",{className:"col-md-3"},r.a.createElement("div",null,r.a.createElement("p",{className:"no-margin viewCus_label"},"DOB"),r.a.createElement("p",{className:"no-margin viewCus_labelVal"}," ",ce()(this.props.data.dob,"YYYY-MM-DD").format("DD MMM YYYY")," ")),r.a.createElement("div",null,r.a.createElement("p",{className:"no-margin viewCus_label"},"Gender"),r.a.createElement("p",{className:"no-margin viewCus_labelVal"},Ze(this.props.data.gender))),r.a.createElement("div",null,r.a.createElement("p",{className:"no-margin viewCus_label"},"Email ID"),r.a.createElement("p",{className:"no-margin viewCus_labelVal"},this.props.data.email_id))),r.a.createElement("div",{className:"col-md-3"},r.a.createElement("div",null,r.a.createElement("p",{className:"no-margin viewCus_label"},"National ID"),r.a.createElement("p",{className:"no-margin viewCus_labelVal"},this.props.data.national_id)),r.a.createElement("div",null,r.a.createElement("p",{className:"no-margin viewCus_label"},"Mobile Number"),r.a.createElement("p",{className:"no-margin viewCus_labelVal"},this.props.data.mobile_num)),r.a.createElement("div",null,r.a.createElement("p",{className:"no-margin viewCus_label"},"WhatsApp Number"),r.a.createElement("p",{className:"no-margin viewCus_labelVal"},this.props.data.whatsapp))),"Business Owner Person"==this.props.title&&r.a.createElement("div",{className:"col-md-3"},r.a.createElement("div",null,r.a.createElement("p",{className:"no-margin viewCus_label"},"Alt Biz Mobile Num 1"),r.a.createElement("p",{className:"no-margin viewCus_labelVal"},this.props.data.alt_biz_mobile_num_1)),r.a.createElement("div",null,r.a.createElement("p",{className:"no-margin viewCus_label"},"Alt Biz Mobile Num 2"),r.a.createElement("p",{className:"no-margin viewCus_labelVal"},this.props.data.alt_biz_mobile_num_2)),r.a.createElement("div",null))),r.a.createElement("div",{className:"row no-margin text-center pad_15"},r.a.createElement("div",{className:"col-md-6 no-padding cusVisit_imgCen"},r.a.createElement(Oa,{title:"National ID Photo",image_path:this.props.data.photo_national_id_path,file_name:this.props.data.photo_national_id})),r.a.createElement("div",{className:"col-md-6 no-padding cusVisit_imgCen"},r.a.createElement(Oa,{title:"National ID Back Photo",image_path:this.props.data.photo_national_id_back_path,file_name:this.props.data.photo_national_id_back})),"Third Party A/C Owner"==this.props.title&&r.a.createElement("div",{className:" col-md-6 no-padding cusVisit_imgCen",style:{margin:"20px 0px"}},r.a.createElement(Oa,{title:"Photo Consent Letter",image_path:this.props.data.photo_consent_letter_file_path,file_name:this.props.data.photo_consent})))))}}]),a}(ut);function Qo(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(u.a)(e);if(t){var r=Object(u.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(m.a)(this,a)}}var Zo=function(e){Object(d.a)(a,e);var t=Qo(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{variant:"",className:"floatAdvancetitleBox",style:{backgroundColor:"#202940"}},r.a.createElement("div",{className:"floatAdvanceperiodHeaderBox"},r.a.createElement("h2",{className:"floatAdvanceperiodHeader padL_15 no-margin"},this.props.title)),r.a.createElement("div",{className:"row no-margin",style:{paddingBottom:15}},Object.entries(this.props.data).map(function(e){var t=Object(_a.a)(e,2),a=t[0],n=t[1];return"id"!=a&&r.a.createElement("div",{key:a,className:"col-md-3"},"gps"===a?r.a.createElement("div",null,r.a.createElement("p",{className:"no-margin viewCus_label"},Ze(a,"address_fields")),r.a.createElement("p",{className:"no-margin viewCus_labelVal","data-toggle":"modal","data-target":"#exampleModal",style:{cursor:"pointer"}},he(n)),r.a.createElement("div",{class:"modal fade",id:"exampleModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},r.a.createElement("div",{class:"modal-dialog",role:"document"},r.a.createElement("div",{class:"modal-content"},r.a.createElement("div",{class:"modal-header"},r.a.createElement("h5",{class:"modal-title",id:"exampleModalLabel"},"Map View"),r.a.createElement("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close"},r.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),r.a.createElement("div",{class:"modal-body"},r.a.createElement(Vo,{coordinates:n})))))):r.a.createElement("div",null,r.a.createElement("p",{className:"no-margin viewCus_label"},Ze(a,"address_fields")),r.a.createElement("p",{className:"no-margin viewCus_labelVal"},he(n))))}),this.props.data.photo_shop_path&&r.a.createElement("div",{className:"col-md-3"},r.a.createElement("b",null,"Establishment Photo"),r.a.createElement("img",{src:this.root+this.props.data.photo_shop_path+"/s_"+this.props.data.photo_shop,alt:this.props.data.photo_shop_path+"/s_"+this.props.data.photo_shop})))))}}]),a}(ut);function Xo(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(u.a)(e);if(t){var r=Object(u.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(m.a)(this,a)}}var $o=function(e){Object(d.a)(a,e);var t=Xo(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={customer:{},owner_person:{},biz_address:{},thirdparty_details:""},e}return Object(o.a)(a,[{key:"componentWillMount",value:function(){var e,t=this;this.cust_id=this.props.match.params.cust_id,va(this.req({cust_id:this.cust_id,screen:"view"},!0)).then(function(e){e&&(t.owner_address=t.contact_persons=null,e.data.owner_address_id!=e.data.biz_address_id&&e.data.owner_person&&(t.owner_address=e.data.owner_person.owner_address),e.data.contact_persons&&(t.contact_persons=e.data.contact_persons),t.setState({customer:e.data,owner_person:e.data.owner_person,biz_address:e.data.biz_address,cust_app_access:e.data.cust_app_access}))}),(e=this.req({cust_id:this.cust_id}),P("/api/admin/borrower/third_party_details",e)).then(function(e){e&&"success"==e.status&&(null!=e.data?(console.log("response.data",e.data),t.setState({thirdparty_details:e.data.third_party})):t.setState({thirdparty_details:null}))})}},{key:"render",value:function(){return r.a.createElement("div",{className:"container containerTopmargin max-width no-padding"},console.log("this.acc_number",this.acc_number),r.a.createElement(Go,{customer:this.state.customer,address:this.state.biz_address,owner_person:this.state.owner_person,app_access:this.state.cust_app_access}),this.state.owner_person&&r.a.createElement(Ko,{data:this.state.owner_person,title:"Business Owner Person"}),this.state.thirdparty_details&&r.a.createElement(Ko,{data:this.state.thirdparty_details,title:"Third Party A/C Owner"}),this.state.biz_address&&r.a.createElement(Zo,{data:this.state.biz_address,title:"Business Address "}),this.owner_address?r.a.createElement("div",{data:this.owner_address,title:"Owner Address"}):r.a.createElement("div",{className:"floatAdvanceperiodHeaderBox"},r.a.createElement("h2",{className:"floatAdvanceperiodHeader padL_15 no-margin"},"Owner Address : Same as Business Address")),this.contact_persons?this.contact_persons.map(function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ko,{data:e,title:"Handler"}),r.a.createElement(Zo,{data:e.contact_address,title:"Handler Address"}))}):r.a.createElement("div",{className:"floatAdvanceperiodHeaderBox"},r.a.createElement("h2",{className:"floatAdvanceperiodHeader padL_15 no-margin"},"Handler : Same as Owner Person")))}}]),a}(dt);function ei(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(u.a)(e);if(t){var r=Object(u.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(m.a)(this,a)}}var ti=function(e){Object(d.a)(a,e);var t=ei(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={toList:!1,new_relationship_manager_id:null,relationship_manager:{},address:{}},e.handleSubmit=function(t){t.preventDefault();var a=e.state.relationship_manager;a.country_code=e.country_code,a.associated_with="FLOW",a.address=e.state.address,Ps(e.req({relationship_manager:a})).then(function(t){t&&(e.setState({new_borrower_id:t.data}),e.setState({toList:!0}),alert("New Relationship Manager created successfully"))})},e}return Object(o.a)(a,[{key:"componentWillMount",value:function(){var e=this,t=null;if("view"===this.props.mode){var a={relationshipManager_id:this.props.match.params.relationshipManager_id};Bs(this.req(a)).then(function(a){a&&(t=a.data,e.setState({relationship_manager:t,address:t.address}))})}else this.props.mode}},{key:"render",value:function(){return!0===this.state.toList?r.a.createElement(Y.a,{to:"/relationship_manager/flowrlspmanager/list"}):r.a.createElement("div",{className:"container"},r.a.createElement("h4",null,this.props.title+(this.state.relationship_manager.first_name?" : "+this.state.relationship_manager.first_name:"")),r.a.createElement("form",{id:"borrower_form",onSubmit:this.handleSubmit},r.a.createElement("div",{id:""},r.a.createElement($t,{id:"relationship_manager",entity:"flow_rel_mgr",title:"Relationship Manager",data:this.state.relationship_manager,mode:this.props.mode,onComponentChange:this.handleComponentChange,changeComponentName:"relationship_manager"}),r.a.createElement("br",null),r.a.createElement("input",{type:"button",className:"btn btn-primary ".concat("create"===this.props.mode?"show_button":"hide_button"),onClick:this.handleSubmit,value:"Create Relationship Manager"}))),r.a.createElement("br",null),r.a.createElement("br",null))}}]),a}(dt);function ai(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(u.a)(e);if(t){var r=Object(u.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(m.a)(this,a)}}var ni=function(e){Object(d.a)(a,e);var t=ai(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={comp_name:"rel_mgr",list:"disable_div"},e}return Object(o.a)(a,[{key:"componentWillMount",value:function(){Object($.a)(Object(u.a)(a.prototype),"componentWillMount",this).call(this),this.setOptionsToStateFromApi("acc_prvdr")}},{key:"render",value:function(){return r.a.createElement("div",{id:""},r.a.createElement("div",{className:"view"===this.props.mode?"hide_div":"show_div"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-6"},r.a.createElement("h4",null,this.props.title?this.props.title:"")),r.a.createElement("div",{className:"col-md-1 ".concat(this.state.edit_button_style)},r.a.createElement(xt,{entity:this.props.entity,onClick:this.handleEdit})),r.a.createElement("div",{className:"col-md-1 ".concat(this.state.save_button_style)},r.a.createElement("input",{onClick:this.handleSave,type:"button",className:"btn btn-success",value:"Save"})))))}}]),a}(ut);function ri(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(u.a)(e);if(t){var r=Object(u.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(m.a)(this,a)}}var li=function(e){Object(d.a)(a,e);var t=ri(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={toList:!1,new_relationship_manager_id:null,relationship_manager:{},data_prvdr:{},address:{}},e.handleSubmit=function(t){t.preventDefault();var a=e.state.relationship_manager;a.country_code=e.country_code,a.associated_with="acc_prvdr",a.address=e.state.address,Ps(e.req({relationship_manager:a})).then(function(t){t&&("success"===t.status?(e.setState({new_borrower_id:t.data}),e.setState({toList:!0}),alert("New Relationship Manager created successfully")):alert(t.message+"\n"+JSON.stringify(t.data)))})},e}return Object(o.a)(a,[{key:"componentWillMount",value:function(){var e=this,t=null;if("view"===this.props.mode){var a={relationshipManager_id:this.props.match.params.relationshipManager_id};Bs(this.req(a)).then(function(a){if(a){t=a.data,e.setState({relationship_manager:t});var n={associated_entity_code:t.associated_entity_code,id:t.id};e.setState({data_prvdr:n,address:t.address})}})}else this.props.mode}},{key:"render",value:function(){return!0===this.state.toList?r.a.createElement(Y.a,{to:"/relationship_manager/dprlspmanager/list"}):r.a.createElement("div",{className:"container"},r.a.createElement("h4",null,this.props.title+(this.state.relationship_manager.first_name?" : "+this.state.relationship_manager.first_name:"")),r.a.createElement("form",{id:"borrower_form",onSubmit:this.handleSubmit},r.a.createElement("div",{id:""},r.a.createElement(ni,{id:"data_prvdr",entity:"data_prvdr_rel_mgr",data:this.state.data_prvdr,mode:this.props.mode,onComponentChange:this.handleComponentChange}),r.a.createElement($t,{id:"relationship_manager",entity:"data_prvdr_rel_mgr",title:"Relationship Manager",data:this.state.relationship_manager,mode:this.props.mode,onComponentChange:this.handleComponentChange}),r.a.createElement("br",null),r.a.createElement("input",{type:"button",className:"btn btn-primary ".concat("create"===this.props.mode?"show_button":"hide_button"),onClick:this.handleSubmit,value:"Create Relationship Manager"}))),r.a.createElement("br",null),r.a.createElement("br",null))}}]),a}(dt);function ci(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(u.a)(e);if(t){var r=Object(u.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(m.a)(this,a)}}var si=function(e){Object(d.a)(a,e);var t=ci(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={relationshipManagerList:null,toView:!1,relationshipManager_id:null,data_prvdr:{}},e.handleClick=function(t){e.setState({relationshipManager_id:t.target.id,toView:!0})},e}return Object(o.a)(a,[{key:"componentWillMount",value:function(){var e=this,t=v("acc_prvdr_code");this.setState({table_id:t,relationshipManagerList:null});var a={associated_entity_code:t};Ms(this.req(a)).then(function(a){if(a){var n=a.data.map(function(t,a){return r.a.createElement("tr",{key:a},r.a.createElement("td",null," ",Ne(t)),r.a.createElement("td",null," ",t.whatsapp),r.a.createElement("td",null," ",t.mobile_num),r.a.createElement("td",null," ",t.email_id),r.a.createElement("td",null," ",t.designation),r.a.createElement(na,{id:t.id,parent:"data_prvdr_rel_mgr",entity:"persons",status:t.status}),r.a.createElement("td",null,r.a.createElement(Nt,{id:t.id,entity:"data_prvdr_rel_mgr",onClick:e.handleClick})))});e.setState({table_id:t,relationshipManagerList:n}),la()("#"+e.state.table_id).removeAttr("width").dataTable({order:[],columns:[{width:"15%"},{width:"15%"},{width:"15%"},{width:"15%"},{width:"10%"},{width:"10%"},{width:"10%"},{width:"10%"}],dom:"Bfrtip",buttons:["csv","excel","print"]})}})}},{key:"render",value:function(){return!0===this.state.toView?r.a.createElement(Y.a,{to:"/relationship_manager/dprlspmanager/view/".concat(this.state.relationshipManager_id)}):r.a.createElement("div",{className:"container"},r.a.createElement(ni,{id:"data_prvdr",data:this.state.data_prvdr,mode:this.props.mode,onComponentChange:this.handleComponentChange,loanOnChange:this.loanOnChange}),null!=this.state.relationshipManagerList&&r.a.createElement("div",{id:"datatable data_prvdr_table",className:"table-responsive"},r.a.createElement("h4",null,"Relationship Manager List"),r.a.createElement("table",{id:this.state.table_id,className:"table"},r.a.createElement("thead",{className:"text-info"},r.a.createElement("tr",null,r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"WhatsApp Number"),r.a.createElement("th",null,"Mobile Number"),r.a.createElement("th",null,"Email ID"),r.a.createElement("th",null,"Designation"),r.a.createElement("th",null,"Status"),r.a.createElement("th",null,"Action"),r.a.createElement("th",null,"Action"))),r.a.createElement("tbody",null,this.state.relationshipManagerList))))}}]),a}(dt);function oi(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(u.a)(e);if(t){var r=Object(u.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(m.a)(this,a)}}var ii=function(e){Object(d.a)(a,e);var t=oi(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={relationshipManagerList:null,toView:!1,relationshipManager_id:null},e.handleClick=function(t){e.setState({relationshipManager_id:t.target.id,toView:!0})},e}return Object(o.a)(a,[{key:"componentWillMount",value:function(){var e=this;Ms(this.req({associated_with:"FLOW"})).then(function(t){if(t){var a=t.data.map(function(t,a){return r.a.createElement("tr",{key:a},r.a.createElement("td",null," ",Ne(t)),r.a.createElement("td",null," ",t.mobile_num),r.a.createElement("td",null," ",t.email_id),r.a.createElement("td",null," ",t.designation),r.a.createElement(na,{id:t.id,parent:"flow_rel_mgr",entity:"persons",status:t.status}),r.a.createElement("td",null,r.a.createElement(Nt,{id:t.id,entity:"flow_rel_mgr",onClick:e.handleClick})))});e.setState({relationshipManagerList:a}),la()("#list_relationshipManager").removeAttr("width").dataTable({order:[],columns:[{width:"15%"},{width:"15%"},{width:"15%"},{width:"15%"},{width:"15%"},{width:"15%"},{width:"10%"}],dom:"Bfrtip",buttons:["csv","excel","print"]})}})}},{key:"render",value:function(){return!0===this.state.toView?r.a.createElement(Y.a,{to:"/relationship_manager/flowrlspmanager/view/".concat(this.state.relationshipManager_id)}):null!=this.state.relationshipManagerList?r.a.createElement("div",{id:"datatable",className:"table-responsive"},r.a.createElement("h4",null,this.props.title||"Relationship Manager List"),r.a.createElement("table",{id:"list_relationshipManager",className:"table"},r.a.createElement("thead",{className:"text-info"},r.a.createElement("tr",null,r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"Mobile Number"),r.a.createElement("th",null,"Email ID"),r.a.createElement("th",null,"Designation"),r.a.createElement("th",null,"Status"),r.a.createElement("th",null,"Action"),r.a.createElement("th",null,"Action"))),r.a.createElement("tbody",null,this.state.relationshipManagerList))):r.a.createElement("div",null,r.a.createElement("p",null,"No Relationship Manager Available ! "))}}]),a}(dt);function di(e){var t="";return e.duration&&(t=e.duration+" day"),r.a.createElement("div",null,"*",r.a.createElement("i",null,"Total repayment if float is utilized for all the ",t," duration"),r.a.createElement("br",null))}function mi(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(u.a)(e);if(t){var r=Object(u.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(m.a)(this,a)}}var ui=function(e){Object(d.a)(a,e);var t=mi(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(e=t.call.apply(t,[this].concat(l))).state={variant:"primary"},e.Customer=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,r.a.createElement("div",{className:"floatAdvancecontainer"},r.a.createElement("div",{className:"floatAdvancetitleBox"},r.a.createElement("h2",{className:"floatAdvancetitle no-margin"},"Customer :"),r.a.createElement("a",{href:"/borrower/indiv/view/".concat(e.props.customer.cust_id),target:"_blank"}," ",r.a.createElement("h2",{className:"floatAdvanceBluetitle no-margin"},e.props.customer.cust_id))),r.a.createElement("div",{className:"loggedPersondetailsBox"},r.a.createElement("div",{className:"row no-margin"},r.a.createElement("div",{className:"col-lg-2 no-padding"},r.a.createElement("p",{className:"no-margin loggedPersondetails loggedPersonid text-center"},e.props.customer.cust_id),r.a.createElement("div",{className:"loggedPersondetailsImg"},r.a.createElement("img",{className:"img-fluid",src:e.root+e.props.customer.photo_pps_path+"/s_"+e.props.customer.photo_pps})),r.a.createElement("p",{className:"personalDetailstextval no-margin loggedPersondetails loggedPersonname text-center"},e.props.customer.cust_name)),r.a.createElement("div",{className:"col-lg-5 no-padding personalDetailsbox"},r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement("div",{className:"row no-margin"},r.a.createElement("div",{className:"no-padding col-lg-5"},r.a.createElement("p",{className:"personalDetailstext personalDetailsviewText no-margin"},"Name ")),r.a.createElement("div",{className:"col-lg-7 no-padding"},r.a.createElement("p",{className:"personalDetailstextval no-margin"},e.props.customer.biz_name)))),r.a.createElement("li",null,r.a.createElement("div",{className:"row no-margin"},r.a.createElement("div",{className:"no-padding col-lg-5"},r.a.createElement("p",{className:"personalDetailstext personalDetailsviewText no-margin"},"Location")),r.a.createElement("div",{className:"col-lg-7 no-padding"},r.a.createElement("p",{className:"personalDetailstextval no-margin"},Ze(e.props.customer.location))))),r.a.createElement("li",null,r.a.createElement("div",{className:"row no-margin"},r.a.createElement("div",{className:"no-padding col-lg-5"},r.a.createElement("p",{className:"personalDetailstext personalDetailsviewText no-margin"},"Flow RM")),r.a.createElement("div",{className:"col-lg-7 no-padding"},r.a.createElement("p",{className:"personalDetailstextval no-margin"},e.props.customer.flow_rel_mgr_name)))),r.a.createElement("li",null,r.a.createElement("div",{className:"row no-margin"},r.a.createElement("div",{className:"no-padding col-lg-5"},r.a.createElement("p",{className:"personalDetailstext personalDetailsviewText no-margin"},"Address")),r.a.createElement("div",{className:"col-lg-7 no-padding"},r.a.createElement("p",{className:"personalDetailstextval no-margin"},e.props.customer.cust_addr_text)))))),r.a.createElement("div",{className:"col-lg-5 no-padding personalDetailsciewIdbox"},r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement("div",{className:"row no-margin"},r.a.createElement("div",{className:"no-padding col-lg-5"},r.a.createElement("p",{className:"personalDetailstext personalDetailsviewText no-margin"},e.props.customer.acc_prvdr_code," Account Number")),r.a.createElement("div",{className:"col-lg-7 no-padding"},r.a.createElement("p",{className:"personalDetailstextval  no-margin"},e.props.customer.acc_number)))),r.a.createElement("li",null,r.a.createElement("div",{className:"row no-margin"},r.a.createElement("div",{className:"no-padding col-lg-5"},r.a.createElement("p",{className:"personalDetailstext personalDetailsviewText no-margin"},"Mobile Number")),r.a.createElement("div",{className:"col-lg-7 no-padding"},r.a.createElement("p",{className:"personalDetailstextval  no-margin"},e.props.customer.cust_mobile_num)))),r.a.createElement("li",null,r.a.createElement("div",{className:"row no-margin"},r.a.createElement("div",{className:"no-padding col-lg-5"},r.a.createElement("p",{className:"personalDetailstext personalDetailsviewText no-margin"},"Partner RM")),r.a.createElement("div",{className:"col-lg-7 no-padding"},r.a.createElement("p",{className:"personalDetailstextval no-margin"},e.props.customer.dp_rel_mgr_name)))))))))))},e.PastLoans1=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"floatAdvanceperiodHeaderBox"},r.a.createElement("h2",{className:"floatAdvanceperiodHeader no-margin"},"Past Float Advances")),r.a.createElement("div",{className:"row no-margin pastFloatAdvanceBox"},r.a.createElement("div",{className:"col-lg-6 no-padding personalDetailsbox"},r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement("div",{className:"row no-margin"},r.a.createElement("div",{className:"no-padding col-lg-5"},r.a.createElement("p",{className:"personalDetailstext no-margin"},"Total FA Application")),r.a.createElement("div",{className:"col-lg-7 no-padding"},r.a.createElement("p",{className:"personalDetailstextval no-margin"},e.props.customer.tot_loan_appls)))),r.a.createElement("li",null,r.a.createElement("div",{className:"row no-margin"},r.a.createElement("div",{className:"no-padding col-lg-5"},r.a.createElement("p",{className:"personalDetailstext no-margin"},"Total Late FAs")),r.a.createElement("div",{className:"col-lg-7 no-padding"},r.a.createElement("ul",{className:"personalPastDetailstext"},r.a.createElement("li",null,null==e.props.customer.late_loans?0:e.props.customer.late_loans," / ",e.props.customer.tot_loans," (",me(e.props.customer.late_loans,e.props.customer.tot_loans),")"))))))),r.a.createElement("div",{className:"col-lg-6 no-padding"},r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement("div",{className:"row no-margin"},r.a.createElement("div",{className:"no-padding col-lg-5"},r.a.createElement("p",{className:"personalDetailstext no-margin"},"Total Dsibursed FAs")),r.a.createElement("div",{className:"col-lg-7 no-padding"},r.a.createElement("ul",{className:"personalPastDetailstext"},r.a.createElement("li",null,e.props.customer.tot_loans," / ",e.props.customer.tot_loan_appls," ( ",me(e.props.customer.tot_loans,e.props.customer.tot_loan_appls)," )"))))),r.a.createElement("li",null,r.a.createElement("div",{className:"row no-margin"},r.a.createElement("div",{className:"no-padding col-lg-5"},r.a.createElement("p",{className:"personalDetailstext no-margin"},"First FA Disbursement Date")),r.a.createElement("div",{className:"col-lg-7 no-padding"},r.a.createElement("p",{className:"personalDetailstextval no-margin"},ge(e.props.customer.first_loan_date)))))))))},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){"apply"===this.props.parent||"selection"===this.props.parent?this.setState({variant:"dark"}):"loan_appl"===this.props.parent?this.setState({variant:"success"}):"loan"===this.props.parent&&this.setState({variant:"primary"})}},{key:"render",value:function(){return"selection"===this.props.parent?r.a.createElement(r.a.Fragment,null,this.Customer(),this.PastLoans1(),!this.props.customer.account_id&&r.a.createElement("label",{className:"agreement"},"( Please configure account for customer to generate / upload agreement. )")):r.a.createElement(r.a.Fragment,null,this.Customer())}}]),a}(ut),pi=Object(V.a)(ui);function _i(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(u.a)(e);if(t){var r=Object(u.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(m.a)(this,a)}}var hi=function(e){Object(d.a)(a,e);var t=_i(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={chk_tnc:!1,chk_consent:!1},e.handleTnCConsentClick=function(t){t.target.value=t.target.checked,e.handleChange(t)},e}return Object(o.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"container FAApplicationTermsContainer"},r.a.createElement("div",{className:"row"},r.a.createElement("u",null,r.a.createElement("h4",null,"Terms & Conditions"))),r.a.createElement("div",{className:"row"},r.a.createElement("span",null,"1. The requested float advance is ",ft(this.props.product.max_loan_amount,this.currency_code),".")),r.a.createElement("div",{className:"row"},r.a.createElement("span",null,"2. The FLOW fee applicable is ",gt(this.props.product,this.currency_code),".")),r.a.createElement("div",{className:"row"},r.a.createElement("span",null,"3. Total repayment amount is ",Et(this.props.product,this.currency_code),".")),r.a.createElement("div",{className:"row"},r.a.createElement("span",null,"4. Repayment date is ",vt(this.props.product.duration,this.props.product.flow_fee_duration)," from the date of disbursal.")),r.a.createElement("div",{className:"row"},r.a.createElement("span",null,"5. Repayment date shall be on or before ",ge(function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"YYYY-MM-DD";return e instanceof le?e.add(t,"days"):le(e,a).add(t,"days")}(le(),this.props.product.duration))," provided the float advance is disbursed today ",r.a.createElement("b",null,"(Sundays & Interest Free days not considered.)"),".")),this.props.customer.acc_number?r.a.createElement("div",{className:"row"},r.a.createElement("span",null,"6. Subjected to the approval, an amount of ",r.a.createElement("b",null,ft(this.props.product.max_loan_amount,this.currency_code))," will be disbursed to ",r.a.createElement("b",null,this.props.customer.acc_prvdr_name," (",this.props.customer.acc_type,") Account number ",this.props.customer.acc_number),".")):r.a.createElement("div",null),r.a.createElement("br",null),r.a.createElement("div",{className:"row"},r.a.createElement("label",null,r.a.createElement("input",{type:"checkbox",id:"chk_tnc",onChange:this.handleTnCConsentClick}),"\xa0 Customer has agreed to the above float advance terms and conditions.")),r.a.createElement("br",null))}}]),a}(ut);function fi(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(u.a)(e);if(t){var r=Object(u.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(m.a)(this,a)}}var vi=function(e){Object(d.a)(a,e);var t=fi(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(e=t.call.apply(t,[this].concat(l))).state={variant:"primary"},e.FloatAdvance1=function(t){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"card viewFloatApplication"},r.a.createElement("div",{className:"row viewFloatApplicationTitle"},r.a.createElement("h3",null,"Float Advance ")),r.a.createElement("div",{className:"card-body"},r.a.createElement("div",{className:"row floatadvance-body"},"pending_approval"!=t&&r.a.createElement("div",{className:"col-6 row"},r.a.createElement("span",{className:"col-sm-5"},"Approval Date"),r.a.createElement("div",{className:"col-sm-7"},r.a.createElement("label",null,ge(e.props.product.loan_approved_date)))),r.a.createElement("div",{className:"col-6 row"},r.a.createElement("span",{className:"col-sm-5"},"Approver Name"),r.a.createElement("div",{className:"col-sm-7"},r.a.createElement("label",null,e.props.product.loan_approver_name))),"pending_disbursal"!=t&&"pending_approval"!=t&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"col-6 row"},r.a.createElement("span",{className:"col-sm-5"},"FA w/ Fee"),r.a.createElement("div",{className:"col-sm-7"},r.a.createElement("label",null,Re(ft(e.props.product.due_amount,e.currency_code))))),"approved"!=t&&"pending_approval"!=t&&r.a.createElement("div",{className:"col-6 row"},r.a.createElement("span",{className:"col-sm-5"},"FA Repaid"),r.a.createElement("div",{className:"col-sm-7"},r.a.createElement("label",null,Re(ft(e.props.product.paid_amount,e.currency_code)))))),"pending_disbursal"!=t&&"approved"!=t&&"pending_approval"!=t&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"col-6 row"},r.a.createElement("span",{className:"col-sm-5"},"Due Date"),r.a.createElement("div",{className:"col-sm-7"},r.a.createElement("label",null,ge(e.props.product.due_date)))),"pending_disbursal"!=t&&"approved"!=t&&r.a.createElement("div",{className:"col-6 row"},r.a.createElement("span",{className:"col-sm-5"},"Disbursal Date"),r.a.createElement("div",{className:"col-sm-7"},r.a.createElement("label",null,ge(e.props.product.disbursal_date)))),e.props.product.provisional_penalty>0&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"col-6 row"},r.a.createElement("span",{className:"col-sm-5"},"Provisional Penalty"),r.a.createElement("div",{className:"col-sm-7"},r.a.createElement("label",null,Re(ft(e.props.product.provisional_penalty,e.currency_code))))),r.a.createElement("div",{className:"col-6 row"},r.a.createElement("span",{className:"col-sm-5"},"Penalty Paid"),r.a.createElement("div",{className:"col-sm-7"},r.a.createElement("label",null,Re(ft(e.props.product.penalty_collected,e.currency_code)))))),r.a.createElement("div",{className:"col-6 row"},r.a.createElement("span",{className:"col-sm-5"},"Current Due Amount"),r.a.createElement("div",{className:"col-sm-7"},r.a.createElement("label",null,Re(ft(e.props.product.current_os_amount,e.currency_code)))))),e.props.product.repayment_date?r.a.createElement("div",{className:"col-6 row"},r.a.createElement("span",{className:"col-sm-5"},"Repayment Date"),r.a.createElement("div",{className:"col-sm-7"},r.a.createElement("label",null,ge(e.props.product.repayment_date)))):null,"overdue"==t&&r.a.createElement("div",{className:"col-6 row"},r.a.createElement("span",{className:"col-sm-5"},"Days Overdue"),r.a.createElement("div",{className:"col-sm-7"},r.a.createElement("label",null,e.props.product.days_overdue," days (",e.props.product.penalty_days," penalty days) ")))))))},e.Product1=function(t){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"floatAdvanceperiodHeaderBox"},r.a.createElement("h2",{className:"floatAdvanceperiodHeader no-margin"},"Product")),r.a.createElement("div",{className:"row no-margin pastFloatAdvanceBox"},r.a.createElement("div",{className:"col-lg-6 no-padding personalDetailsbox"},r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement("div",{className:"row no-margin"},r.a.createElement("div",{className:"no-padding col-lg-5"},r.a.createElement("p",{className:"personalDetailstext no-margin"},"Product Name")),r.a.createElement("div",{className:"col-lg-7 no-padding"},r.a.createElement("p",{className:"personalDetailstextval no-margin"},e.props.product.product_name)))),r.a.createElement("li",null,r.a.createElement("div",{className:"row no-margin"},r.a.createElement("div",{className:"no-padding col-lg-5"},r.a.createElement("p",{className:"personalDetailstext no-margin"},"FA Amount")),r.a.createElement("div",{className:"col-lg-7 no-padding"},r.a.createElement("ul",{className:"personalPastDetailstext"},r.a.createElement("li",null,ft(wt(e.props.product),e.currency_code)))))),r.a.createElement("li",null,r.a.createElement("div",{className:"row no-margin"},r.a.createElement("div",{className:"no-padding col-lg-5"},r.a.createElement("p",{className:"personalDetailstext no-margin"},"Flow Fee")),r.a.createElement("div",{className:"col-lg-7 no-padding"},r.a.createElement("ul",{className:"personalPastDetailstext"},r.a.createElement("li",null,gt(e.props.product,e.currency_code)))))))),r.a.createElement("div",{className:"col-lg-6 no-padding personalDetailsbox"},r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement("div",{className:"row no-margin"},r.a.createElement("div",{className:"no-padding col-lg-5"},r.a.createElement("p",{className:"personalDetailstext no-margin"},"Credit Score")),r.a.createElement("div",{className:"col-lg-7 no-padding"},r.a.createElement("ul",{className:"personalPastDetailstext"},r.a.createElement("li",null,e.props.credit_score," / 1000"))))),r.a.createElement("li",null,r.a.createElement("div",{className:"row no-margin"},r.a.createElement("div",{className:"no-padding col-lg-5"},r.a.createElement("p",{className:"personalDetailstext no-margin"},"Duration")),r.a.createElement("div",{className:"col-lg-7 no-padding"},r.a.createElement("p",{className:"personalDetailstextval no-margin"},vt(e.props.product.duration,e.props.product.flow_fee_duration))))),r.a.createElement("li",null,r.a.createElement("div",{className:"row no-margin"},r.a.createElement("div",{className:"no-padding col-lg-5"},r.a.createElement("p",{className:"personalDetailstext no-margin"},"Repayment Amount")),r.a.createElement("div",{className:"col-lg-7 no-padding"},r.a.createElement("p",{className:"personalDetailstextval no-margin"},Et(e.props.product,e.currency_code)))))))))},e}return Object(o.a)(a,[{key:"componentWillMount",value:function(){"apply"==this.props.parent?this.setState({variant:"dark"}):"loan_appl"==this.props.parent?this.setState({variant:"success"}):"loan"==this.props.parent&&this.setState({variant:"primary"})}},{key:"render",value:function(){return console.log(JSON.stringify(this.props.product)),r.a.createElement(r.a.Fragment,null,this.Product1(),"apply"!=this.props.parent&&this.FloatAdvance1(this.props.product.status))}}]),a}(ut);function gi(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(u.a)(e);if(t){var r=Object(u.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(m.a)(this,a)}}var yi=function(e){Object(d.a)(a,e);var t=gi(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={tncPanel:{chk_tnc:!1},customer_accounts_dd:null,viewLoan:!1},e.clickBackButton=function(e){window.location.reload()},e.handleSubmit=function(t){if(e.state.tncPanel.chk_tnc){var a=e.getLoanApplicationRequest(e.props.customer,e.props.selectedProduct,e.props.customer.flow_rel_mgr_id);a.customer_consent_rcvd=!0,a.product_type=e.props.product_type,a.master_loan_doc_id=e.props.master_loan_doc_id,a.cs_result_code=e.props.cs_result_code,Fl(e.req({loan_application:a},!0)).then(function(t){if(e.resp(t),t){if(t.data.loan_application){var a=t.data.loan_application.loan_appl_doc_id,n=t.data.loan_application.loan_approver_name;e.setState({loan_appl_doc_id:a,viewLoanAppln:!0,approver_name:n})}else if(t.data.loan){var r=t.data.loan.loan_doc_id;e.setState({loan_doc_id:r,viewLoan:!0})}alert(t.message)}})}else alert("Please select the Terms and Conditions checkbox to proceed.")},e.getLoanApplicationRequest=function(t,a,n){var r=t;return r.product_name=a.product_name,r.product_id=a.id,r.loan_principal=a.max_loan_amount,r.duration=a.duration,r.flow_fee=a.flow_fee,r.currency_code=a.currency_code,r.cs_model_id=a.cs_model_id,r.flow_fee_type=a.flow_fee_type,r.flow_fee_duration=a.flow_fee_duration,r.due_amount=bt(a),r.loan_approver_id=n,r.cust_acc_id=e.props.cust_account.value,r.country_code=e.country_code,r.credit_score=e.props.credit_score,r},e.handleChange=function(t){var a=t.target.id;e.setState(Object(k.a)({},a,t.target.value))},e}return Object(o.a)(a,[{key:"componentWillMount",value:function(){this.country_code;var e={cust_id:this.props.customer.cust_id,status:"enabled",acc_purpose:"float_advance"};this.setOptionsListToStateFromAppApi("common","customer_accounts",this.req({customer_account:e}),["account_id","acc_num_disp_txt"])}},{key:"render",value:function(){return console.log("calling_api"),console.log(this.state.calling_api),1==this.state.viewLoanAppln?r.a.createElement(Y.a,{to:"/fa_appl/view/".concat(this.state.loan_appl_doc_id)}):1==this.state.viewLoan?r.a.createElement(Y.a,{to:"/fa/view/".concat(this.state.loan_doc_id)}):(this.appl_action="create_fa","probation"!=this.props.product_type&&"ineligible"!=this.props.cs_result_code&&"requires_flow_rm_approval"!=this.props.cs_result_code||(this.appl_action="submit_for_approval"),r.a.createElement("div",{id:""},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("h4",null,"New Float Advance Application ")),r.a.createElement(pi,{parent:"apply",customer:this.props.customer,cust_agreement_status:this.props.cust_agreement_status}),r.a.createElement(vi,{parent:"apply",credit_score:this.props.credit_score,customer:this.props.customer,product:this.props.selectedProduct}),r.a.createElement("div",{className:"card selectCusAccountBox"},r.a.createElement("div",{className:"card-body"},"submit_for_approval"!==!this.appl_action&&r.a.createElement("div",{className:"row"},r.a.createElement("label",{className:"col-sm-2 col-form-label"},"Approver Name"),r.a.createElement("div",{className:"col-sm-7"},r.a.createElement("div",{className:"form-group md-form-group"},r.a.createElement("label",{className:"col-sm-5 col-form-label personalDetailstextval"},this.props.selectedProduct.approver_name)))))),r.a.createElement("div",{className:"row"},r.a.createElement(hi,{id:"tncPanel",mode:"apply",customer:this.props.customer,product:this.props.selectedProduct,onComponentChange:this.handleComponentChange})),r.a.createElement("div",{className:"row",id:"float_style"},r.a.createElement("input",{type:"button",className:"btn btn-primary",onClick:this.clickBackButton,value:"Back"}),"\xa0\xa0",r.a.createElement("span",null,r.a.createElement("input",{type:"button",disabled:this.state.calling_api,className:"submit_for_approval"==this.appl_action?"btn btn-danger":"btn btn-success",onClick:this.handleSubmit,value:"submit_for_approval"==this.appl_action?"Submit for Approval":"Go to Disbursal"}))))))}}]),a}(dt);function Ei(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(u.a)(e);if(t){var r=Object(u.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(m.a)(this,a)}}var bi=function(e){Object(d.a)(a,e);var t=Ei(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={columns:[],loans:[],data:{}},e}return Object(o.a)(a,[{key:"componentWillMount",value:function(){var e=this,t={cust_id:this.props.cust_id,last_n_fas:this.props.last_n_fas,mode:"search"};console.log(t),this.props.cust_id&&fn(this.req({loan_search_criteria:t},!0)).then(function(t){t&&"success"===t.status&&t.data.results.length>0&&e.setState({loans:t.data.results,length:t.data.results.length})})}},{key:"render",value:function(){var e=this;return this.state.length>0?r.a.createElement(r.a.Fragment,null,this.state.loans.length>0&&r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("h2",{className:"floatAdvanceperiodViewheader no-margin"},"Recent FA")),r.a.createElement("div",{className:"floatAdvanceperiodViewbox"},r.a.createElement("div",{className:"row no-margin"},console.log("this.state.loans-----------",this.state.loans),this.state.loans.map(function(t,a){return r.a.createElement("div",{className:"col-lg-3"},r.a.createElement("div",{className:"floatAdvanceperiodIconbox"},r.a.createElement("img",{className:"img-fluid",src:"/img/frame.png"}),r.a.createElement("span",null,"#",a+1)),r.a.createElement("div",{className:"floatAdvanceperiodDateiconBox floatAdvanceperiodDateiconRightborder"},r.a.createElement("div",null,r.a.createElement("img",{className:"img-fluid",src:"/img/dateicon.png"}),r.a.createElement("span",null,t.disbursal_date))),r.a.createElement("div",{className:"floatAdvanceperiodDateiconBox floatAdvanceperiodDateiconRightborder"},r.a.createElement("div",null,r.a.createElement("img",{className:"img-fluid",src:"/img/ugxicon.png"}),r.a.createElement("span",null,xe(t.loan_principal,e.currency_code)))),r.a.createElement("div",{className:"floatAdvanceperiodDateiconBox floatAdvanceperiodDateiconRightborder"},r.a.createElement("div",null,r.a.createElement("img",{className:"img-fluid",src:t.overdue_days>0?"/img/vectoricon.png":"/img/ontimeicon.png"}),r.a.createElement("span",{className:"text-red"},t.overdue_days))),r.a.createElement("div",{className:"floatAdvanceperiodDateiconBox floatAdvanceperiodDateiconRightborder"},r.a.createElement("div",null,r.a.createElement("img",{className:"img-fluid",src:"/img/rmicon.png"}),r.a.createElement("span",null,pe(t.cs_result_code)))))}))))):r.a.createElement(r.a.Fragment,null)}}]),a}(ut);function wi(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(u.a)(e);if(t){var r=Object(u.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(m.a)(this,a)}}var Ni=function(e){Object(d.a)(a,e);var t=wi(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={customer_div_style:"hide_div",comp_name:"product",customer:{},modalBox:!1,toSummary:!1,CSvalue:!1,searchResult:!1,cs_result_code:"",search_loan:"show_div",acc_selected:!1,requested_amount:null,requested:!1},e.handleEnter=function(t){13===t.keyCode&&e.handleSearchClick()},e.handleCustIDChange=function(t){e.customer_id=t.target.value},e.handleProductSelectClick=function(t,a,n,r,l){if("completed"==e.customer.kyc_status){console.log(e.customer),e.product_type=n,e.selectedProduct=e.loan_products[t.target.id],e.selectedProduct.currency_code=e.currency_code,null==r?e.setState({cust_score:0}):e.setState({cust_score:r,cs_result_code:l});var c={product_id:a,cust_id:e.customer.cust_id,country_code:e.country_code,product_type:e.product_type,status:"enabled",perf_eff_data:e.customer.perf_eff_date};Pl(e.req(c,!0)).then(function(t){e.resp(t),t&&("success"===t.status?(e.master_loan_doc_id=t.data.master_loan_doc_id,e.setState({toSummary:!0})):alert(t.message+"\n"+JSON.stringify(t.data)))})}else alert("Could not allow new application. KYC status is "+e.customer.kyc_status)},e.handleClose=function(t){e.setState({modalBox:!1})},e.handleSearchClick=function(t){null!=e.customer_id?e.setState({searchResult:!0}):alert("Please Enter Customer ID or Mobile Number")},e.accountSelect=function(t){e.setState({acc_selected:!0,cust_account:e.cust_account}),la()("#list").DataTable().destroy(),e.productSearch()},e.handleBorrowerSearch=function(t,a){e.customer_id=a,e.productSearch(),e.setState({modalBox:!1})},e}return Object(o.a)(a,[{key:"componentWillMount",value:function(){var e=this;"result"==this.props.mode&&this.setState({search_loan:"hide_div"}),this.props.match&&this.props.match.params.cust_id&&(this.customer_id=this.props.match.params.cust_id,va(this.req({cust_id:this.customer_id,screen:"view"},!0)).then(function(t){if(e.resp(t),t){e.state.customer_div_style="show_div",t.data.cust_mobile_num=t.data.owner_person.mobile_num,t.data.cust_addr_text=t.data.cust_addr_txt,e.setState({customer:t.data,cust_agreement_status:t.data.aggr_status});var a={cust_id:t.data.cust_id,status:"enabled",acc_purpose:"float_advance"};qe("common","customer_accounts",e.req({customer_account:a})).then(function(t){if(e.resp(t),t)if("success"===t.status)if(1==t.data.list.length){e.getSelectOptionsFromResult(t.data.list,"customer_accounts",["account_id","acc_num_disp_txt"],!1);var a={value:t.data.list[0].account_id};e.setState({acc_selected:!0,cust_account:a}),e.productSearch()}else e.getSelectOptionsFromResult(t.data.list,"customer_accounts",["account_id","acc_num_disp_txt"]);else alert(t.message+"\n"+JSON.stringify(t.data))})}}))}},{key:"productSearch",value:function(){var e=this;this.requestUpgradeStatusWeb();var t=this.customer_id,a=this.cust_account.value;Rl(this.req({req_parameter:t,account_id:a},!0)).then(function(t){if(e.resp(t),t)if("error"!==t.status){var a=t.data;console.log(t.data),e.setState({cust_agreement_status:t.data.cust_agreement_status,all_ineligible:t.data.all_ineligible}),a.hasOwnProperty("borrower")?e.productList(a):a.hasOwnProperty("borrowers")&&e.borrowersList(a),1!=a.all_ineligible||"Probation"!=a.category&&"Condonation"!=a.category||alert("Customer is ineligible for all the FA products. Customer is already on Condonation/Probation"),1==a.all_ineligible&&"Probation"!=a.category&&"Condonation"!=a.category&&alert("Customer is ineligible for all the FA products. RM shall decide to allow condonation to the customer.")}else e.setState({customer_div_style:"hide_div"})})}},{key:"borrowersList",value:function(e){var t=this,a=e.borrowers.map(function(e,a){return r.a.createElement("tr",null,r.a.createElement("td",null," ",e.biz_name),r.a.createElement("td",null," ",e.cust_id),r.a.createElement("td",null," ",e.acc_number),r.a.createElement("td",null," ",r.a.createElement("input",{id:a,type:"submit",value:"Select",onClick:function(a){return t.handleBorrowerSearch(a,e.cust_id)},className:"btn btn-primary"})))});this.setState({borrowersList:a}),this.setState({modalBox:!0}),la()("#list_brwr").dataTable({bAutoWidth:!0,bDestroy:!0})}},{key:"requestUpgradeStatusWeb",value:function(){var e,t=this,a=this.state.customer.cust_id;(e=this.req({cust_id:a}),P(D+"/loan_appl/req_upgrade_status_web",e)).then(function(e){t.resp(e),null!=e.data&&t.setState({requested_amount:e.data.requested_amount})})}},{key:"requestUpgrade",value:function(e){var t,a=this,n=this.state.customer.cust_id,r=e,l=this.state.customer.acc_number,c=this.state.customer.acc_prvdr_code;window.confirm("Any amount under ".concat(ft(e,this.currency_code)," will also be considered as requested amount.\nDo you want to continue?"))&&(t=this.req({cust_id:n,requested_amount:r,acc_number:l,acc_prvdr_code:c},!0),P(D+"/loan_appl/req_upgrade",t)).then(function(e){a.resp(e),a.setState({requested_amount:r}),null!=e.data&&(a.setState({requested:!0}),window.location.reload())})}},{key:"productList",value:function(e){var t=this,a=e.all_csf_values;console.log("all_csf_values"),console.log(a),this.meta_data=a.filter(function(e){return e.csf_type.includes("meta")}),this.customer=e.borrower,this.loan_products=e.loan_products;var n=e.loan_products.map(function(e,a){var n,l=(n=e.result_code,e.approver_first_name,"eligible"==n?"Select":"requires_flow_rm_approval"===n?"Request Approval":"product upgrade"===n?"Request Upgrade":n),c=function(e,t){return"eligible"==e?"Eligible":"requires_flow_rm_approval"===e?"Need "+t+"'s Approval":"ineligible"==e?"Ineligible":"product upgrade"==e?"Need Upgrade":e?he(e):e}(e.result_code,e.approver_first_name),s=function(e,t,a){return t.all_ineligible?"Customer is ineligible for this FA product. "+t.opm_name+" shall decide to allow condonation to the customer.":"Can not apply FA. "+e.result_msg}(e,t.state,t.customer.category);return r.a.createElement("tr",{key:a,className:"float-advance-products"},r.a.createElement("td",null," ",e.product_name),r.a.createElement("td",null," ",r.a.createElement(Ot,{loan_product:e,meta_data:t.meta_data})," "),r.a.createElement("td",null," ",Ze(e.product_type)+" / "+Ze(e.cs_model_code)),r.a.createElement("td",{"data-sort":e.max_loan_amount}," ",ft(e.max_loan_amount,t.currency_code)),r.a.createElement("td",null," ",e.duration," days"),r.a.createElement("td",{"data-sort":e.max_loan_amount+e.flow_fee}," ",Re(Et(e,t.currency_code))),r.a.createElement("td",null,c),r.a.createElement("td",null,"eligible"==e.result_code||"requires_flow_rm_approval"==e.result_code?r.a.createElement("input",{id:a,type:"button",value:l,onClick:function(a){return t.handleProductSelectClick(a,e.id,e.product_type,e.cust_score,e.result_code)},className:"eligible"==e.result_code?"btn btn-success loan_select":"requires_flow_rm_approval"==e.result_code?"btn btn-primary":"btn btn-danger"}):"product upgrade"==e.result_code?r.a.createElement("input",{id:a,type:"button",value:null===t.state.requested_amount?l:e.max_loan_amount<=t.state.requested_amount?"Requested":l,onClick:function(){return t.requestUpgrade(e.max_loan_amount)},className:"btn btn-warning",disabled:e.max_loan_amount<=t.state.requested_amount||t.state.calling_api}):r.a.createElement("span",null,r.a.createElement(At,{result_msg:s,result_code:e.result_code}))))});this.setState({customer:this.customer,loanProducts_tr:n,customer_div_style:"show_div"}),la()("#list").removeAttr("width").dataTable({order:[],pageLength:15,columns:[{width:"10%"},{width:"10%"},{width:"10%"},{width:"10%"},{width:"15%"},{width:"10%"},{width:"20%"},{width:"20%"}],dom:"Bfrtip",buttons:["csv","excel","print"]})}},{key:"render",value:function(){var e=this;return console.log(this.selectedProduct),!0===this.state.toSummary?r.a.createElement(yi,{mode:"apply",cust_account:this.state.cust_account,credit_score:this.state.cust_score,customer:this.customer,selectedProduct:this.selectedProduct,require_agreement:this.state.require_agreement,product_type:this.product_type,master_loan_doc_id:this.master_loan_doc_id,min_credit_score:this.min_credit_score,currency:this.currency_code,cust_agreement_status:this.state.cust_agreement_status,eligible:this.eligible,cs_result_code:this.state.cs_result_code,loan_products:this.loan_products,rel_mgr:{id:this.state.customer.flow_rel_mgr_id,name:this.state.customer.flow_rel_mgr_name}}):!0===this.state.searchResult?r.a.createElement(Y.a,{to:"/fa_appl_for/".concat(this.customer_id)}):r.a.createElement("div",{className:"container"},r.a.createElement("div",null,r.a.createElement("div",{className:"row ".concat(this.state.search_loan)},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-12"},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-header card-header-icon card-header-info"},r.a.createElement("div",{className:"card-icon"},r.a.createElement("i",{className:"material-icons"},"search")),r.a.createElement("h3",{className:"card-title"},"Create Float Advance Application")),r.a.createElement("div",{className:"card-body mt-50"},r.a.createElement("form",null,r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-3"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"md-label-floating"},"Any Customer ID / Mobile No / National ID   "))),r.a.createElement("div",{className:"col-md-5"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"md-label-floating"},"Enter ..."),r.a.createElement("input",{type:"text",id:"customer_id",onChange:this.handleCustIDChange,onKeyUp:this.handleEnter,className:"form-control",required:!0}))),r.a.createElement("div",{className:"col-md-2"},r.a.createElement("div",{className:"form-group"},r.a.createElement("button",{type:"button",className:"btn btn-primary pull-right",onClick:this.handleSearchClick},"Search"))))))))))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:this.state.customer_div_style},r.a.createElement(pi,{parent:"selection",cust_agreement_status:this.state.cust_agreement_status,customer:this.state.customer,loan_products:this.loan_products}),this.state.customer.cust_id&&r.a.createElement(bi,{cust_id:this.state.customer.cust_id,last_n_fas:"4"}),r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-body"},r.a.createElement("div",{className:"row"},r.a.createElement("label",{className:"col-sm-3",style:{fontSize:"15px",padding:"17px 13px"}},"Select Customer Account ",r.a.createElement("font",{className:"text-danger"}," *  ")),r.a.createElement("div",{className:"col-sm-7"},r.a.createElement("div",{className:"form-group md-form-group"},r.a.createElement("select",{className:"form-control",style:{fontSize:"15px"},onChange:this.accountSelect,ref:function(t){return e.cust_account=t}},this.state.customer_accounts_dd)))))),this.state.acc_selected&&r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-header card-header-icon card-header-primary"},r.a.createElement("h3",{className:"card-title text-white d-inline-block"},"Select Float Advance Product")),r.a.createElement("div",{className:"card-body"},r.a.createElement("div",{id:"",className:"table-responsive selectFloatProduct"},r.a.createElement("table",{className:"table",id:"list"},r.a.createElement("thead",{className:"text-info"},r.a.createElement("tr",null,r.a.createElement("th",null,"Product Name"),r.a.createElement("th",null,"Cust Score"),r.a.createElement("th",null,"Product Type"),r.a.createElement("th",null,"FA Amount"),r.a.createElement("th",null,"Duration"),r.a.createElement("th",null,"Repayment"),r.a.createElement("th",null,"Eligibility"),r.a.createElement("th",null,"Action"))),r.a.createElement("tbody",null,this.state.loanProducts_tr)),r.a.createElement(di,null)))),r.a.createElement(rt.a,{show:this.state.modalBox,onHide:this.handleClose},r.a.createElement(rt.a.Header,{closeButton:!0,show:this.state.modalBox,onHide:this.handleClose},r.a.createElement(rt.a.Title,null,"More than one customer results found. Choose one among the following.")),r.a.createElement(rt.a.Body,null,r.a.createElement("table",{id:"list_brwr",className:"table"},r.a.createElement("thead",{className:"text-info"},r.a.createElement("tr",null,r.a.createElement("th",null,"Business Name"),r.a.createElement("th",null,"FLOW Cust ID"),r.a.createElement("th",null,"Data Provider Cust ID"),r.a.createElement("th",null,"Action"))),r.a.createElement("tbody",null,this.state.borrowersList))),r.a.createElement(rt.a.Footer,null,r.a.createElement(lt.a,{variant:"secondary",onClick:this.handleClose},"Close"))))))}}]),a}(dt);function xi(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(u.a)(e);if(t){var r=Object(u.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(m.a)(this,a)}}var Ci=function(e){Object(d.a)(a,e);var t=xi(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).viewApplication=function(e){var t=e.target.id;window.open("/fa_appl/view/"+t,"_blank")},n.handleModifySearch=function(e){n.setState({serach_loan_appl:"show_div",modify_search:"hide_div"})},n.handleSearch=function(e){e.nativeEvent;la()("#loan_list").DataTable().destroy(),n.setState({datatable_div_style:"hide_div",search_btn_style:"disable_div"});var t=n.state.searchLoanAppl;console.log(Object.keys(t).length),Object.keys(t).length>0?Ll(n.req({loan_appl_search_criteria:t},!0)).then(function(e){if(n.resp(e),n.setState({search_btn_style:""}),e){e.data.length>0?(n.setState(function(t){return t.rowdatas=e.data}),n.setState(function(t){return t.copy=e.data}),n.setState(function(e){return e.columndatas=n.columndatas()}),n.setState({search:!0}),n.setState({loanApplicationResults:[],datatable_div_style:"show_div",serach_loan_appl:"hide_div",modify_search:"show_div"})):alert("No results found.")}}):(n.setState({search_btn_style:""}),alert("Choose atleast one filter to search Float Advance Applications."))},n.changeHandler=function(e){var t=e,a=n.state.rowdatas.filter(function(e){return null!==e.loan_appl_doc_id&&e.loan_appl_doc_id.toLowerCase().includes(t.toLowerCase())||null!==e.loan_doc_id&&e.loan_doc_id.toLowerCase().includes(t.toLowerCase())||null!==e.acc_number&&e.acc_number.includes(t)||null!==e.product_name&&e.product_name.toLowerCase().includes(t.toLowerCase())||null!==e.status&&e.status.toLowerCase().includes(t.toLowerCase())||null!==e.cs_result_code&&e.cs_result_code.toLowerCase().includes(t.toLowerCase())});n.setState(function(e){return e.copy=a})},n.state={search_btn_style:"",data_prvdr_name_list:[],lender_name_list:[],product_name_list:[],searchLoanAppl:{},datatable_div_style:"hide_div",serach_loan_appl:"show_div",modify_search:"hide_div",viewLoanAppln:!1,copy:[],rowdatas:[],columndatas:[]},n}return Object(o.a)(a,[{key:"columndatas",value:function(){var e=this;return[{Header:"FA Appl ID",id:"loan_appl_doc_id",accessor:function(e){return r.a.createElement(ee.a,{className:"link-doc-id",to:"/fa_appl/view/"+e.loan_appl_doc_id,target:"_blank"},e.loan_appl_doc_id)}},{Header:"FA ID",id:"loan_doc_id",accessor:function(e){return e.loan_doc_id?r.a.createElement(ee.a,{to:"/fa/view/"+e.loan_doc_id,target:"_blank"},e.loan_doc_id):"NA"}},{Header:"Data Provider Cust ID",id:"acc_number",accessor:function(e){return r.a.createElement(Ct,{acc_number:e.acc_number,biz_name:e.biz_name,cust_name:e.cust_name})}},{Header:"Product Code",id:"product_name",accessor:function(e){return e.product_name}},{Header:"Product Name",id:"product",accessor:function(t){return r.a.createElement(kt,{loan:t,currency_code:e.currency_code})}},{Header:"Submitted On",id:"loan_appl_date",accessor:function(e){return ve(e.loan_appl_date,!0)}},{Header:"Status",id:"status",accessor:function(e){return Ze(e.status)}},{Header:"Action",id:"cs_result_code",accessor:function(e){return e.cs_result_code?Ze(e.cs_result_code):"NULL"}}]}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"container containerTopmargin max-width no-padding"},r.a.createElement("div",{className:"floatAdvancetitleBox"},r.a.createElement("h5",{className:"preHeaderpad no-margin",style:{paddingLeft:15,fontSize:20}},"SEARCH - Float Advance Applications")),r.a.createElement("div",{className:"text-right",style:{marginTop:"show_div"===this.state.modify_search?15:0}},r.a.createElement("div",{className:this.state.modify_search},r.a.createElement("button",{type:"button",className:"btn btn-md btn-light",id:"float_style",onClick:this.handleModifySearch},"Modify Search"))),r.a.createElement("div",{className:this.state.serach_loan_appl},r.a.createElement(Do,{id:"searchLoanAppl",mode:"loan_appl",onSearch:this.handleSearch,search_btn_style:this.state.search_btn_style,onComponentChange:this.handleComponentChange,onComponentReset:this.handleComponentReset,disable_btn:this.state.calling_api,onComponentElementChange:this.handleComponentElemetChange})),r.a.createElement("div",{className:"".concat(this.state.datatable_div_style)},r.a.createElement("div",{className:"d-flex justify-content-between align-items-center",style:{padding:5,marginTop:15}},r.a.createElement("p",{className:"no-margin text-white"},r.a.createElement("b",null,"Total Entries : ",this.state.copy.length)),r.a.createElement("div",{style:{position:"relative"}},r.a.createElement("i",{class:"fa-solid fa-magnifying-glass search_pos"}),r.a.createElement("input",{placeholder:"Search here",className:"search_posInput",onChange:function(t){return e.changeHandler(t.target.value)}}))),r.a.createElement(za,{showPag:!0,minRow:0,row_data:void 0!==this.state.copy?this.state.copy:[],column_data:this.state.columndatas,defaultPageSize:10,resizable:!1,defaultSorted:[{id:"loan_appl_date",desc:!0}],exportCSV:!0,csvFile:"FA applications",csvData:this.state.copy})))}}]),a}(dt),ki=a(181),Si=a(110);function Oi(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(u.a)(e);if(t){var r=Object(u.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(m.a)(this,a)}}var Ai=function(e){Object(d.a)(a,e);var t=Oi(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={viewReady:!1,approve_div_style:"hide_div",reject_div_style:"hide_div",score_div_style:"hide_div",action:"view",appr_reason:""},e.handleRejectCheckbox=function(t){e.setState({reject_div_style:"show_div",score_div_style:"show_div",action:"reject"})},e.handleApproveCheckbox=function(t){e.setState({score_div_style:"show_div",reject_div_style:"hide_div",action:"approve"})},e.handleCancelCheckbox=function(t){e.setState({reject_div_style:"show_div",score_div_style:"hide_div",action:"cancel"})},e.handleSubmit=function(t){var a=e.state.action,n=e.state.appr_reason;"view"==a?alert("Please choose action "):""==n&&alert("Please enter reason");var r={},l=e.state.loan_appl.loan_appl_doc_id,c=e.state.loan_appl.master_loan_doc_id,s=e.country_code,o=e.state.credit_score,i=e.state.loan_appl.cust_id,d=e.state.loan_appl.product_id;if("approve"===a)r={loan_appl_doc_id:l,master_loan_doc_id:c,action:a,credit_score:o,country_code:s,cust_id:i,product_id:d,appr_reason:n};else if("reject"===a||"cancel"===a){r={loan_appl_doc_id:l,master_loan_doc_id:c,action:a,credit_score:o,action_reason_code:e.state.action_reason_code,remarks:e.state.remarks,country_code:s,product_id:d,cust_id:i,appr_reason:n}}"view"!=a&&""!=n&&Dl(e.req({loan_request:r})).then(function(t){if(t)if("success"===t.status){if("rejected"===t.data.status||"cancelled"===t.data.status)window.location.reload(!0);else if("approved"===t.data.status){var a=t.data.loan;e.setState({loan:a}),e.setState({viewLoan:!0}),alert(t.message)}}else alert(t.message+"\n"+JSON.stringify(t.data))})},e.handleChange=function(t){e.setState({appr_reason:t.target.value})},e}return Object(o.a)(a,[{key:"componentWillMount",value:function(){var e,t=this,a=this.props.match.params.loan_appl_doc_id;(e=this.req({loan_appl_doc_id:a}),P(D+"/loan_appl/application",e)).then(function(e){var a=e.data,n=E("application","approval");t.setState({loan_appl:a,credit_score:e.data.credit_score,loan_approver_id:e.data.loan_approver_id,viewReady:!0,can_approve:n})})}},{key:"is_user_apprvr",value:function(e){return console.log("loan_approver_id"),console.log(e),e===v("user_id")}},{key:"render",value:function(){var e=this;if(1==this.state.viewLoan)return r.a.createElement(Y.a,{to:"/fa/view/".concat(this.state.loan.loan_doc_id)});if(!this.state.viewReady)return r.a.createElement(r.a.Fragment,null);v("role_codes");return r.a.createElement("div",{className:"container"},r.a.createElement("br",null),r.a.createElement("div",{className:"row topTitle"},r.a.createElement("div",{className:"col-md-8"},r.a.createElement("h4",null,"Float Advance - Application ID : ",r.a.createElement("b",null,this.state.loan_appl.loan_appl_doc_id))),r.a.createElement("div",{className:"col-md-4"},r.a.createElement("h4",null,"Status: ",r.a.createElement("b",null,Ze(this.state.loan_appl.status))))),r.a.createElement(pi,{parent:"loan_appl",customer:this.state.loan_appl}),r.a.createElement(vi,{parent:"loan_appl",credit_score:this.state.credit_score,customer:this.state.loan_appl,product:this.state.loan_appl}),r.a.createElement("br",null),"pending_approval"===this.state.loan_appl.status&&this.state.can_approve&&r.a.createElement("div",null,r.a.createElement(bi,{cust_id:this.state.loan_appl.cust_id,last_n_fas:"4"}),r.a.createElement("div",{className:"row mt-3"},r.a.createElement("div",{className:"col-md-6"},r.a.createElement("span",{className:"text-white"},r.a.createElement("b",null,"Action : ")),r.a.createElement("label",null,r.a.createElement("input",{type:"radio",name:"appr",value:"approve",onClick:this.handleApproveCheckbox}),"  Approve \xa0\xa0\xa0"),r.a.createElement("label",null,r.a.createElement("input",{type:"radio",name:"appr",value:"reject",onClick:this.handleRejectCheckbox}),"  Reject \xa0\xa0\xa0"))),r.a.createElement(ki.a,null,r.a.createElement(Si.a,null,r.a.createElement("b",null,"Reason :")),r.a.createElement(A.a,{as:"textarea","aria-label":"With textarea",rows:5,onChange:function(t){return e.handleChange(t)},style:{width:"200px"}})),r.a.createElement("br",null),r.a.createElement("div",{className:"row"},r.a.createElement("input",{type:"button",className:"btn btn-primary",value:"Submit",onClick:this.handleSubmit}),"\xa0\xa0"),r.a.createElement("br",null)))}}]),a}(dt);var ji=a(19);ji.dataTable=a(53);function Ri(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(u.a)(e);if(t){var r=Object(u.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(m.a)(this,a)}}var Di=function(e){Object(d.a)(a,e);var t=Ri(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(e=t.call.apply(t,[this].concat(l))).state={loanTxnList:null},e.handleRemovePayment=function(t){if(!1!==window.confirm("Are you sure to remove this payment?")){var a={loan_txn_id:t};Tn(e.req(a,!0)).then(function(e){e&&("success"===e.status?window.location.reload():alert(e.message+"\n"+JSON.stringify(e.data)))})}},e.handleRemoveDisbursal=function(t){if(!1!==window.confirm("Are you sure to remove this disbursal ?")){var a={loan_txn_id:t};Yn(e.req(a,!0)).then(function(e){e&&("success"===e.status?window.location.reload():alert(e.message+"\n"+JSON.stringify(e.data)))})}},e.handleViewTxnClick=function(t){var a=e.props.loan_doc_id;Cn(e.req({loan_doc_id:a})).then(function(t){if(t){e.setState(function(e){return e.rowdatas=t.data}),e.setState(function(e){return e.copy=t.data}),e.setState(function(t){return t.columndatas=e.columndatas()});var a=t.data.map(function(t,a){return r.a.createElement("tr",{key:a},r.a.createElement("td",null,++a),r.a.createElement("td",null,Ze(t.txn_type)),r.a.createElement("td",null,ft(t.amount,e.currency_code)),r.a.createElement("td",null,ge(t.txn_date,!0)),r.a.createElement("td",null,r.a.createElement(Rt,{full_text:Ae(t.from_ac_text),overlay:t.from_ac_text})),r.a.createElement("td",null,r.a.createElement(Rt,{full_text:Ae(t.to_ac_text),overlay:t.to_ac_text})),r.a.createElement("td",null,t.txn_id),r.a.createElement("td",null,Ze(t.txn_mode)),r.a.createElement("td",null,he(t.txn_exec_by)))});e.setState({loanTxnList:a})}}),e.setState({modalBox:!0})},e.handleModalClose=function(t){e.setState({modalBox:!1})},e.changeHandler=function(t){var a=t,n=e.state.rowdatas.filter(function(e){return null!==e.txn_type&&e.txn_type.toLowerCase().includes(a.toLowerCase())||null!==e.to_ac_text&&e.to_ac_text.toLowerCase().includes(a.toLowerCase())||null!==e.txn_id&&e.txn_id.toLowerCase().includes(a.toLowerCase())||null!==e.txn_mode&&e.txn_mode.toLowerCase().includes(a.toLowerCase())});e.setState(function(e){return e.copy=n})},e}return Object(o.a)(a,[{key:"columndatas",value:function(){var e=this;return[{Header:"SI No.",id:"row",Cell:function(e){return r.a.createElement("div",null,e.index+1)}},{Header:"Transaction Type",id:"txn_type",accessor:function(e){return Ze(e.txn_type)}},{Header:"Transaction Amount",id:"amount",accessor:function(t){return ft(t.amount,e.currency_code)}},{Header:"Transaction Date / Time",id:"txn_date",accessor:function(e){return ge(e.txn_date,!0)}},{Header:"From Account",id:"from_ac_text",accessor:function(e){return r.a.createElement(Rt,{full_text:Ae(e.from_ac_text),overlay:e.from_ac_text})}},{Header:"To Account",id:"to_ac_text",accessor:function(e){return r.a.createElement(Rt,{full_text:Ae(e.to_ac_text),overlay:e.to_ac_text})}},{Header:"Transaction ID",id:"txn_id",accessor:function(e){return e.txn_id}},{Header:"Transaction Mode",id:"txn_mode",accessor:function(e){return Ze(e.txn_mode)}},{Header:"Txn Executed By",id:"txn_exec_by",accessor:function(e){return he(e.txn_exec_by)}},{Header:"Action",id:"id",accessor:function(t){return r.a.createElement("div",null,!E("loan","reverse_payment")||"payment"!=t.txn_type&&"penalty_payment"!=t.txn_type?E("loan","reverse_payment")&&"disbursal"==t.txn_type&&r.a.createElement(lt.a,{onClick:function(a){return e.handleRemoveDisbursal(t.id)}},"Remove Disbursal"):r.a.createElement(lt.a,{onClick:function(a){return e.handleRemovePayment(t.id)}},"Remove Payment"))}}]}},{key:"componentDidUpdate",value:function(){la()("#list_txn").dataTable({order:[],bAutoWidth:!0,bDestroy:!0,dom:"Bfrtip",buttons:["csv","excel","print"]})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"",style:{"padding-left":"0px"}},r.a.createElement("div",{className:"pull"},r.a.createElement("input",{type:"submit",value:"View Txns",onClick:this.handleViewTxnClick,className:"".concat("btn"==this.props.btn?"btn":"btn-sm"," btn-primary")})),r.a.createElement(rt.a,{show:this.state.modalBox,onHide:this.handleModalClose,size:"xl"},r.a.createElement(rt.a.Header,{closeButton:!0,show:this.state.modalBox,onHide:this.handleModalClose},r.a.createElement(rt.a.Title,null,r.a.createElement("h4",null,"Transactions of Float Advance ID: ",this.props.loan_doc_id))),r.a.createElement(rt.a.Body,null,null!=this.state.loanTxnList&&r.a.createElement("div",null,r.a.createElement("div",{className:"d-flex justify-content-between align-items-center",style:{padding:5}},r.a.createElement("p",{className:"no-margin text-white"},r.a.createElement("b",null,"Total Entries : ",this.state.copy.length)),r.a.createElement("div",{style:{position:"relative"}},r.a.createElement("i",{class:"fa-solid fa-magnifying-glass search_pos"}),r.a.createElement("input",{placeholder:"Search here",className:"search_posInput",onChange:function(t){return e.changeHandler(t.target.value)}}))),r.a.createElement(za,{showPag:!0,minRow:0,row_data:void 0!==this.state.copy?this.state.copy:[],column_data:this.state.columndatas,resizable:!1,defaultSorted:[{id:"txn_date",desc:!0}],exportCSV:!0,csvFile:"TransactionsList",csvData:this.state.copy}))),r.a.createElement(rt.a.Footer,null,r.a.createElement(lt.a,{variant:"secondary",onClick:this.handleModalClose},"Close"))))}}]),a}(ut);function Fi(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(u.a)(e);if(t){var r=Object(u.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(m.a)(this,a)}}var Li=function(e){Object(d.a)(a,e);var t=Fi(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).viewLoanPage=function(e){var t=n.state.searchLoans;Object.keys(t).length>0?fn(n.req({loan_search_criteria:t},!0)).then(function(e){if(e){e.data.results.length>0&&(n.loan=e.data.results,e.data.results.map(function(e,t){return window.open("/fa/view/"+e.loan_doc_id,"_blank")}))}}):alert("No results found.")},n.handleSearch=function(e){var t=e.target.id;la()("#list").DataTable().destroy(),n.setState({datatable_div_style:"hide_div",search_btn_style:"disable_div"});var a=n.state.searchLoans;a.mode=t,Object.keys(a).length>0?fn(n.req({loan_search_criteria:a},!0)).then(function(e){if(n.resp(e),n.setState({search_btn_style:""}),e){"view"==e.data.mode?window.open("/fa/view/"+e.data.loan_doc_id,"_blank"):"search"==e.data.mode?(n.setState(function(t){return t.copy=e.data.results}),n.setState(function(t){return t.rowdatas=e.data.results}),n.setState(function(e){return e.columndatas=n.columndatas()}),n.loan=e.data.results,n.setState({search:!0}),n.setState({datatable_div_style:"show_div",loanResults:[],search_loan:"hide_div",modify_search:"show_div"})):alert("No results found.")}}):(n.setState({search_btn_style:""}),alert("Choose atleast one filter to search Float Advance."))},n.changeHandler=function(e){var t=e,a=n.state.rowdatas.filter(function(e){return null!==e.loan_doc_id&&e.loan_doc_id.toLowerCase().includes(t.toLowerCase())||null!==e.acc_number&&e.acc_number.includes(t)||null!==e.product_name&&e.product_name.toLowerCase().includes(t.toLowerCase())||null!==e.flow_rel_mgr_name&&e.flow_rel_mgr_name.toLowerCase().includes(t.toLowerCase())||null!==e.biz_name&&e.biz_name.toLowerCase().includes(t.toLowerCase())});n.setState(function(e){return e.copy=a})},n.viewLoan=function(e){var t=e.target.id;window.open("/fa/view/"+t,"_blank")},n.viewTxn=function(e){n.setState({loan_doc_id:e.target.id}),n.setState({modalBox:!0})},n.handleModalClose=function(e){n.setState({modalBox:!1})},n.handleModifySearch=function(e){n.setState({search_loan:"show_div",modify_search:"hide_div"})},n.state={search_btn_style:"",data_prvdr_name_list:[],lender_name_list:[],product_name_list:[],searchLoans:{voided_fa:"false"},datatable_div_style:"hide_div",search_loan:"show_div",modify_search:"hide_div",toView:!1,copy:[],rowdatas:[],columndatas:[]},n}return Object(o.a)(a,[{key:"columndatas",value:function(){var e=this;return[{Header:"FA ID",id:"loan_doc_id",accessor:function(e){return r.a.createElement(ee.a,{className:"link-doc-id",to:"/fa/view/"+e.loan_doc_id,target:"_blank"},e.loan_doc_id)}},{Header:"A/C Number",id:"acc_number",accessor:function(e){return e.acc_number}},{Header:"Product",id:"product_name",accessor:function(e){return e.product_name}},{Header:"RM",id:"flow_rel_mgr_name",accessor:function(e){return e.flow_rel_mgr_name}},{Header:"Biz Name | Cust Name",id:"biz_name",accessor:function(e){return e.biz_name+" | "+e.cust_name}},{Header:"Disbursal Date",id:"disbursal_date",accessor:function(e){return ve(e.disbursal_date)}},{Header:"Due Date",id:"due_date",accessor:function(e){return ve(e.due_date)}},{Header:function(){return r.a.createElement("div",{className:"text-center"},"FA Amount (",e.currency_code,")")},id:"loan_principal",accessor:function(e){return Re(ft(e.loan_principal))}},{Header:function(){return r.a.createElement("div",{className:"text-center"},"Fee (",e.currency_code,")")},id:"flow_fee",accessor:function(e){return Re(ft(e.flow_fee))}},{Header:function(){return r.a.createElement("div",{className:"text-center"},"Paid Amount (",e.currency_code,")")},id:"paid_amount",accessor:function(e){return Re(ft(e.paid_amount))}},{Header:"Paid Date",id:"paid_date",accessor:function(e){return e.paid_date?function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"-NA-";return e?ge(e,!1,2):t}(e.paid_date):"Not Paid"}},{Header:"Overdue Days",id:"overdue_days",accessor:function(e){return e.overdue_days}},{Header:"Action",id:"action",accessor:function(e){return r.a.createElement(Di,{parent:"loan_search",loan_doc_id:e.loan_doc_id})}}]}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"container containerTopmargin max-width no-padding"},r.a.createElement("div",{className:"floatAdvancetitleBox"},r.a.createElement("h3",{className:"preHeaderpad no-margin",style:{paddingLeft:15,fontSize:20}},"SEARCH - Float Advance ")),r.a.createElement("div",{className:"text-right",style:{marginTop:"show_div"===this.state.modify_search?15:0}},r.a.createElement("div",{className:this.state.modify_search},r.a.createElement("button",{type:"button",className:"btn btn-md btn-light",id:"float_style",onClick:this.handleModifySearch},"Modify Search"))),r.a.createElement("div",{className:this.state.search_loan},r.a.createElement(Do,{id:"searchLoans",mode:"loan",onSearch:this.handleSearch,search_btn_style:this.state.search_btn_style,onComponentChange:this.handleComponentChange,onComponentReset:this.handleComponentReset,disable_btn:this.state.calling_api,onComponentElementChange:this.handleComponentElemetChange})),r.a.createElement("div",{id:"",style:{marginTop:15}},r.a.createElement("div",{className:this.state.datatable_div_style},r.a.createElement("div",{className:"d-flex justify-content-between align-items-center",style:{padding:5}},r.a.createElement("p",{className:"no-margin text-white"},r.a.createElement("b",null,"Total Entries : ",this.state.copy.length)),r.a.createElement("div",{style:{position:"relative"}},r.a.createElement("i",{class:"fa-solid fa-magnifying-glass search_pos"}),r.a.createElement("input",{placeholder:"Search here",className:"search_posInput",onChange:function(t){return e.changeHandler(t.target.value)}}))),r.a.createElement(za,{showPag:!0,defaultPageSize:10,minRow:0,row_data:void 0!==this.state.copy?this.state.copy:[],column_data:this.state.columndatas,resizable:!1,defaultSorted:[{id:"disbursal_date",desc:!1}],exportCSV:!0,csvFile:"Loans List",csvData:this.state.copy}))))}}]),a}(dt);function Pi(){Pi=function(){return e};var e={},t=Object.prototype,a=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",l=n.asyncIterator||"@@asyncIterator",c=n.toStringTag||"@@toStringTag";function s(e,t,a){return Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(k){s=function(e,t,a){return e[t]=a}}function o(e,t,a,n){var r=t&&t.prototype instanceof m?t:m,l=Object.create(r.prototype),c=new N(n||[]);return l._invoke=function(e,t,a){var n="suspendedStart";return function(r,l){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===r)throw l;return C()}for(a.method=r,a.arg=l;;){var c=a.delegate;if(c){var s=E(c,a);if(s){if(s===d)continue;return s}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===n)throw n="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);n="executing";var o=i(e,t,a);if("normal"===o.type){if(n=a.done?"completed":"suspendedYield",o.arg===d)continue;return{value:o.arg,done:a.done}}"throw"===o.type&&(n="completed",a.method="throw",a.arg=o.arg)}}}(e,a,c),l}function i(e,t,a){try{return{type:"normal",arg:e.call(t,a)}}catch(k){return{type:"throw",arg:k}}}e.wrap=o;var d={};function m(){}function u(){}function p(){}var _={};s(_,r,function(){return this});var h=Object.getPrototypeOf,f=h&&h(h(x([])));f&&f!==t&&a.call(f,r)&&(_=f);var v=p.prototype=m.prototype=Object.create(_);function g(e){["next","throw","return"].forEach(function(t){s(e,t,function(e){return this._invoke(t,e)})})}function y(e,t){var n;this._invoke=function(r,l){function c(){return new t(function(n,c){!function n(r,l,c,s){var o=i(e[r],e,l);if("throw"!==o.type){var d=o.arg,m=d.value;return m&&"object"==typeof m&&a.call(m,"__await")?t.resolve(m.__await).then(function(e){n("next",e,c,s)},function(e){n("throw",e,c,s)}):t.resolve(m).then(function(e){d.value=e,c(d)},function(e){return n("throw",e,c,s)})}s(o.arg)}(r,l,n,c)})}return n=n?n.then(c,c):c()}}function E(e,t){var a=e.iterator[t.method];if(void 0===a){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method))return d;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var n=i(a,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,d;var r=n.arg;return r?r.done?(t[e.resultName]=r.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):r:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function b(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function w(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function N(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(b,this),this.reset(!0)}function x(e){if(e){var t=e[r];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,l=function t(){for(;++n<e.length;)if(a.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return l.next=l}}return{next:C}}function C(){return{value:void 0,done:!0}}return u.prototype=p,s(v,"constructor",p),s(p,"constructor",u),u.displayName=s(p,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===u||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,s(e,c,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},g(y.prototype),s(y.prototype,l,function(){return this}),e.AsyncIterator=y,e.async=function(t,a,n,r,l){void 0===l&&(l=Promise);var c=new y(o(t,a,n,r),l);return e.isGeneratorFunction(a)?c:c.next().then(function(e){return e.done?e.value:c.next()})},g(v),s(v,c,"Generator"),s(v,r,function(){return this}),s(v,"toString",function(){return"[object Generator]"}),e.keys=function(e){var t=[];for(var a in e)t.push(a);return t.reverse(),function a(){for(;t.length;){var n=t.pop();if(n in e)return a.value=n,a.done=!1,a}return a.done=!0,a}},e.values=x,N.prototype={constructor:N,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!e)for(var t in this)"t"===t.charAt(0)&&a.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(a,n){return c.type="throw",c.arg=e,t.next=a,n&&(t.method="next",t.arg=void 0),!!n}for(var r=this.tryEntries.length-1;r>=0;--r){var l=this.tryEntries[r],c=l.completion;if("root"===l.tryLoc)return n("end");if(l.tryLoc<=this.prev){var s=a.call(l,"catchLoc"),o=a.call(l,"finallyLoc");if(s&&o){if(this.prev<l.catchLoc)return n(l.catchLoc,!0);if(this.prev<l.finallyLoc)return n(l.finallyLoc)}else if(s){if(this.prev<l.catchLoc)return n(l.catchLoc,!0)}else{if(!o)throw new Error("try statement without catch or finally");if(this.prev<l.finallyLoc)return n(l.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&a.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var l=r;break}}l&&("break"===e||"continue"===e)&&l.tryLoc<=t&&t<=l.finallyLoc&&(l=null);var c=l?l.completion:{};return c.type=e,c.arg=t,l?(this.method="next",this.next=l.finallyLoc,d):this.complete(c)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.finallyLoc===e)return this.complete(a.completion,a.afterLoc),w(a),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.tryLoc===e){var n=a.completion;if("throw"===n.type){var r=n.arg;w(a)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,a){return this.delegate={iterator:x(e),resultName:t,nextLoc:a},"next"===this.method&&(this.arg=void 0),d}},e}function Bi(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(u.a)(e);if(t){var r=Object(u.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(m.a)(this,a)}}var Mi=function(e){Object(d.a)(a,e);var t=Bi(a);function a(){var e,n;Object(s.a)(this,a);for(var r=arguments.length,l=new Array(r),c=0;c<r;c++)l[c]=arguments[c];return(n=t.call.apply(t,[this].concat(l))).state=(e={view_loan:!1,modalBox:!1,send_sms:!0,disable:"disable_div",capture_btn:"disable_div",txn_id_style:"txn_id_style"},Object(k.a)(e,"txn_id_style","txn_id_style"),Object(k.a)(e,"is_skip_trans_id_check",!1),Object(k.a)(e,"txn_data",""),Object(k.a)(e,"disbursal_txn",{}),e),n.handleSkipTransIDChekCheckboxClick=function(e){n.setState({is_skip_trans_id_check:e.target.checked},n.handleTxnId)},n.disb_attempt_failed_msg="##The last instant disbursement attempt for this FA got failed. If you think RETRY instant disbursement can not be done, proceed manual disbursement here.##\n\n",n.handleDisburseManually=Object(j.a)(Pi().mark(function e(){var t;return Pi().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:"pending_mnl_dsbrsl",window.confirm(n.get_disburse_manually_alert())&&("pending_mnl_dsbrsl"!=n.props.data.status||null==n.props.data.manual_disb_user_id?(t={loan_doc_id:n.props.data.loan_doc_id,loan_status:"pending_mnl_dsbrsl",manual_disb_user_id:v("user_id")},Rn(n.req(t)).then(function(){var e=Object(j.a)(Pi().mark(function e(t){return Pi().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n.resp(t),t&&"success"==t.status&&n.handleDisburseClick();case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}())):n.handleDisburseClick());case 2:case"end":return e.stop()}},e)})),n.handleDisburseClick=function(){var e=Object(j.a)(Pi().mark(function e(t){var a,r,l,c,s,o;return Pi().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.props.onDisburseClick(!1);case 2:a=n.props.data.cust_id,"enabled",r=n.props.data.lender_code,l=n.props.data.acc_prvdr_code,c="home"==n.props.parent?n.props.data.loan_purpose:n.props.data.acc_purpose,s={cust_id:a,status:"enabled",acc_purpose:c},o={lender_code:r,network_prvdr_code:l,acc_purpose:"disbursement",status:"enabled",cust_id:a},n.setOptionsListToStateFromAppApi("common","lender_accounts",n.req({lender_account:o}),["account_id","acc_num_disp_txt"]),n.setOptionsListToStateFromAppApi("common","customer_accounts",n.req({customer_account:s}),["account_id","acc_num_disp_txt"]),n.disbursal_txn={amount:n.props.data.amount,loan_doc_id:n.props.data.loan_doc_id},n.setState({modalBox:!0});case 13:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),n.handleClose=function(){var e=Object(j.a)(Pi().mark(function e(t){var a;return Pi().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a={loan_doc_id:n.props.data.loan_doc_id,loan_status:"pending_mnl_dsbrsl",manual_disb_user_id:null},qn(n.req(a)).then(function(){var e=Object(j.a)(Pi().mark(function e(t){return Pi().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n.resp(t),!t||"success"!=t.status){e.next=5;break}return n.setState({modalBox:!1,txn_data:"",capture_btn:"disable_div",txn_id_style:"txn_id_style",txn_failed_msg:""}),e.next=5,n.props.onDisburseClick(!0);case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),n.handleTxnModeChange=function(e){n.setState({txn_mode:"("+pe(e.target.value)+")"}),n.handleSelfChange(e)},n.handleCheckboxClick=function(e){e.target.checked&&n.setState({checkbox:!0})},n.handleSMSCheckboxClick=function(e){e.target.checked?n.setState({send_sms:!0}):n.setState({send_sms:!1})},n.handleSubmit=function(e){if(e.preventDefault(),!0===n.state.checkbox||n.state.is_skip_trans_id_check){if(n.state.is_skip_trans_id_check){if(null==n.disbursal_txn.reason_for_skip)return void alert("Please select required fields");if(!n.state.disbursal_txn.photo_disbursal_proof)return void alert("Please upload disbursal proof photo")}var t=n.disbursal_txn;"home"==n.props.parent&&(t.amount=n.props.data.loan_principal,t.capture_only=!0),t.send_sms=n.state.send_sms,t.from_ac_id=n.from_acc.value,t.to_ac_id=n.to_acc.value,t.is_skip_trans_id_check=n.state.is_skip_trans_id_check,n.state.is_skip_trans_id_check&&(t.reason_for_skip=n.disbursal_txn.reason_for_skip,t.photo_disbursal_proof=n.state.disbursal_txn.photo_disbursal_proof),Nn(n.req({disbursal_txn:t})).then(function(e){n.resp(e),e&&("success"===e.status?(n.setState({modalBox:!1}),"home"==n.props.parent?n.setState({view_loan:!1}):n.setState({view_loan:!0}),window.location.reload()):(alert(e.message+"\n"+JSON.stringify(e.data)),n.setState({capture_btn:""})))})}else alert("Please select the checkbox to agree and disburse")},n.enableTxnID=function(e){var t=n.disbursal_txn;t.amount>0&&null!=t.from_ac_id&&null!=t.txn_date&&n.setState({txn_id_style:""})},n}return Object(o.a)(a,[{key:"handleTxnId",value:function(){var e=this,t=this.disbursal_txn.txn_id;t.length>5&&Bn(this.req({loan_doc_id:this.disbursal_txn.loan_doc_id,acc_id:this.disbursal_txn.from_ac_id,txn_id:t,is_skip_trans_id_check:!1,mode:"debit",txn_date:this.disbursal_txn.txn_date},!0)).then(function(t){e.resp(t),t&&("success"===t.status?(e.setState({capture_btn:"",txn_data:"",txn_failed_msg:"",is_skip_trans_id_check:!0}),t.data?t.data.hasOwnProperty("ignore_check")?e.setState({txn_failed_msg:t.data.message,capture_btn:"",is_skip_trans_id_check:!0}):t.data.hasOwnProperty("message")?e.setState({txn_failed_msg:t.data.message}):t.data.total_amount==e.disbursal_txn.amount?e.setState({txn_data:t.data.acc_stmt_records,capture_btn:"",is_skip_trans_id_check:!1}):t.data.total_amount!=e.disbursal_txn.amount&&e.setState({txn_data:t.data.acc_stmt_records,is_skip_trans_id_check:!1}):e.setState({txn_failed_msg:"Please check the transaction ID. No payment received to the account with this transaction ID."})):alert(t.message+"\n"+JSON.stringify(t.data)))})}},{key:"get_disburse_manually_alert",value:function(){var e="You are going to start the manual disbursement. Follow the below steps always to avoid duplicate disbursement.\n\n1. After you click OK, 'Disburse Manually' screen will open. Don't close this screen during the entire disbursement process.\n2. Send FA to customer manually using web portal, USSD etc., (If you do not know how to do this, discuss with Tech Support)\n3. Capture the disburement details on the 'Disburse Manually' screen.\n\nClick 'Cancel' if you are not ready to do the above steps.",t="##For this Account Provider (".concat(this.props.data.acc_prvdr_code,"), Instant Disbursal has not been configured##\n\n");return 1==this.props.data.is_manual_disb_ap_code?t+e:this.disb_attempt_failed_msg+e}},{key:"render",value:function(){var e=this;return!0===this.state.view_loan?r.a.createElement(Y.a,{to:"/fa/view/".concat(this.props.data.loan_doc_id,"#disbursed")}):r.a.createElement("div",{id:""},r.a.createElement("div",{className:"row"},"home"==this.props.parent?r.a.createElement(r.a.Fragment,null,this.props.data.manual_disb_user_id!=v("user_id")&&null!=this.props.data.manual_disb_user_id?r.a.createElement("div",{className:"col-md-12 mt-1"},r.a.createElement(se.a,{overlay:r.a.createElement(de.a,{id:"tooltip-disabled"},"Manual disbursement initiated by ".concat(this.props.data.manual_disb_user_name,". No other user will be able to capture this manual disbursement"))},r.a.createElement("span",{className:"d-inline-block"},r.a.createElement("input",{type:"submit",disabled:!0,className:"btn btn-primary btn-sm",value:"Disburse Manually"}),"\xa0\xa0\xa0"))):r.a.createElement("div",{className:"col-md-12 mt-1"},r.a.createElement("input",{type:"submit",className:"btn btn-primary btn-sm",disabled:this.state.calling_api,value:"Disburse Manually",onClick:this.handleDisburseManually}),"\xa0\xa0\xa0")):r.a.createElement("div",{className:"col-md-12"},r.a.createElement("input",{type:"button",className:"btn btn-primary disburse",disabled:this.state.calling_api,value:"Capture Disbursal",onClick:this.handleDisburseClick}),"\xa0\xa0\xa0")),r.a.createElement("br",null),r.a.createElement(rt.a,{show:this.state.modalBox,onHide:this.handleClose,size:"xl"},r.a.createElement(rt.a.Header,{closeButton:!0,className:"modal-close-btn",show:this.state.modalBox,onHide:this.handleClose},r.a.createElement(rt.a.Title,null,"FA Disbursal")),r.a.createElement(rt.a.Body,null,r.a.createElement("div",{className:"container"},"home"==this.props.parent&&r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-12"},r.a.createElement("label",null,1==this.props.data.is_manual_disb_ap_code?"##For this Account Provider (".concat(this.props.data.acc_prvdr_code,"), Instant Disbursal has not been configured##"):this.disb_attempt_failed_msg,r.a.createElement("br",null),r.a.createElement("br",null),"Follow the below steps always to avoid duplicate disbursement.",r.a.createElement("br",null),r.a.createElement("br",null),"1. Don't close this screen during the entire disbursement process.",r.a.createElement("br",null),"2. Send FA to customer manually using web portal, USSD etc., (If you do not know how to do this, discuss with Tech Support)",r.a.createElement("br",null),'3. Capture the disbursement details on this screen and click "Submit".',r.a.createElement("br",null),r.a.createElement("br",null)))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-6"},r.a.createElement("h4",null,"Float Advance ID: ",this.props.data.loan_doc_id," ")),r.a.createElement("div",{className:"col-md-6"},r.a.createElement("h4",null,"Float Advance Amount: ",Re(ft(this.props.data.amount,this.currency_code))," "))),r.a.createElement("div",{className:"row date-range"},r.a.createElement("div",{className:"col-md-6"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-5"},r.a.createElement("span",null,"Disburse From A/C",r.a.createElement("br",null),"( ",this.props.data.lender_name," )",r.a.createElement("font",{className:"text-danger"},"   *  "))),r.a.createElement("div",{className:"col-md-7"},r.a.createElement("select",{id:"from_ac_id",defaultValue:this.selected.lender_accounts,ref:function(t){return e.from_acc=t},onChange:function(t){e.handleSelfChange(t),e.enableTxnID(t)},className:"form-control",type:"text"},this.state.lender_accounts_dd))),r.a.createElement("br",null),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-5"},r.a.createElement("span",null,"Amount Disbursed"),r.a.createElement("font",{className:"text-danger"},"   *  ")),r.a.createElement("div",{className:"col-md-7"},r.a.createElement("div",{id:"",className:"".concat(this.state.disable)},r.a.createElement("input",{type:"text",id:"amount",onChange:this.handleSelfChange,value:this.props.data.amount,className:"form-control"})))),r.a.createElement("br",null),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-5"},r.a.createElement("span",null,"Disbursal Date"),r.a.createElement("font",{className:"text-danger"},"   *  ")),r.a.createElement("div",{className:"col-md-7"},r.a.createElement(Ht.a,{closeOnSelect:!0,onChange:function(t){e.handleSelfDateChange("txn_date",t),e.enableTxnID(t)},dateFormat:"DD MMM YYYY",timeFormat:!1,required:"required"}))),r.a.createElement("br",null),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-5"},r.a.createElement("span",null,"Disbursal Mode"),r.a.createElement("font",{className:"text-danger"},"   *  ")),r.a.createElement("div",{className:"col-md-7"},r.a.createElement("select",{id:"txn_mode",onChange:this.handleTxnModeChange,className:"form-control",type:"text",required:"required"},this.getSelectOptions("transaction_mode")))),r.a.createElement("br",null)),r.a.createElement("div",{className:"col-md-6"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-5"},r.a.createElement("span",null,"Customer's A/C"),r.a.createElement("font",{className:"text-danger"},"   *  ")),r.a.createElement("div",{className:"col-md-7"},r.a.createElement("select",{id:"to_ac_id",defaultValue:this.selected.customer_accounts,ref:function(t){return e.to_acc=t},onChange:function(t){e.handleSelfChange(t),e.enableTxnID(t)},className:"form-control",type:"text",required:"required"},this.state.customer_accounts_dd))),r.a.createElement("br",null),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-5"},r.a.createElement("span",null,"Remarks")),r.a.createElement("div",{className:"col-md-7"},r.a.createElement("input",{type:"text",id:"remarks",onChange:this.handleSelfChange,className:"form-control",required:"required"}))),r.a.createElement("br",null),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-5"},r.a.createElement("span",null,"Disbursal Transaction ID"),r.a.createElement("font",{className:"text-danger"},"   *  ")),r.a.createElement("div",{className:"col-md-7 ".concat(this.state.txn_id_style)},r.a.createElement("input",{type:"text",id:"txn_id",onChange:function(t){e.handleSelfChange(t),e.handleTxnId(t)},className:"form-control spacing",tabIndex:"-1",required:"required"}))),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("div",{className:"row"},this.state.txn_data&&r.a.createElement(r.a.Fragment,null,r.a.createElement("br",null),r.a.createElement("div",{class:"alert alert-success"},this.state.txn_data.map(function(e){return r.a.createElement("h6",null,"Amount : ",e.dr_amt," | Txn Date : ",e.stmt_txn_date," | Description : ",e.descr)}))),this.state.txn_failed_msg&&r.a.createElement("div",{class:"alert alert-danger"},r.a.createElement("h6",null,this.state.txn_failed_msg))),this.state.txn_failed_msg&&E("loan","skip_txn_id_check")&&r.a.createElement(r.a.Fragment,null,r.a.createElement("fieldset",{className:"border border-dark p-2"},r.a.createElement("legend",{className:"w-auto text-labelblue",style:{fontSize:"15px"}},"Transaction Evidence"),r.a.createElement("div",{className:"row  align_ver_center"},r.a.createElement("label",{className:"col-md-5 "},r.a.createElement("b",null,"Reason for Skip"),r.a.createElement("font",{className:"text-danger"},"   *  ")),r.a.createElement("div",{className:"col-sm-7"},r.a.createElement("select",{id:"reason_for_skip",onChange:function(t){e.handleSelfChange(t)},className:"form-control ".concat(this.state.credit_style),type:"text",required:"required"},this.getSelectOptions("skip_txn_id_check")))),r.a.createElement("div",{className:"row labelTopgap align-items-center ml-1"},r.a.createElement(Gt,{id:"photo_disbursal_proof",mode:"create",entity:"loan_txns",type:"image",txn_id:this.disbursal_txn.txn_id,onEditUpload:function(t){e.handleChangeForEdit(t),e.handleSave(t,"reload")},onCreateUpload:this.setChangeToState,label:"Disbursal Proof Photo"})))),r.a.createElement("br",null))),r.a.createElement("div",{className:"row"},r.a.createElement("label",null,r.a.createElement("input",{type:"checkbox",onChange:this.handleSMSCheckboxClick,defaultChecked:!0}),"\xa0 Send Disbursement confirmation notification SMS")),r.a.createElement("div",{className:"row"},r.a.createElement("label",null,r.a.createElement("input",{type:"checkbox",onChange:this.handleCheckboxClick}),"\xa0 I have transferred the above Float Advance to the Customer's Account using Third Party Platform ",this.state.txn_mode,".")))),r.a.createElement(rt.a.Footer,null,r.a.createElement(lt.a,{variant:"secondary",onClick:this.handleClose},"Cancel"),r.a.createElement("input",{type:"button",className:"btn btn-primary ".concat(this.state.capture_btn),disabled:this.state.calling_api,onClick:this.handleSubmit,value:"Submit"}))))}}]),a}(ut);function Ti(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(u.a)(e);if(t){var r=Object(u.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(m.a)(this,a)}}var Hi=function(e){Object(d.a)(a,e);var t=Ti(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={view_loan:!1,modalBox:!1,send_sms:!0,disburse_style:"disable_div",processing:"",reviewed:0},e.handleInstantDisburalClick=function(t){var a=e.props.data,n=a.lender_code,r=a.acc_prvdr_code,l=a.loan_principal,c=a.loan_doc_id,s=a.cust_id,o=a.cust_acc_id,i=a.to_acc_num;e.txn={lender_code:n,acc_prvdr_code:r,amount:l,loan_doc_id:c,cust_id:s,to_ac_id:o,to_acc_num:i},e.setState({modalBox:!0})},e.handleClose=function(t){e.setState({modalBox:!1})},e.handleSMSCheckboxClick=function(t){t.target.checked?e.setState({send_sms:!0}):e.setState({send_sms:!1})},e.handleSubmit=function(t){if((t.preventDefault(),e.props.data.data_prvdr_cust_id!=e.props.data.to_acc_num)&&0==window.confirm("Data provider customer ID and A/C number are different. Are you sure to disburse the amount?"))return;if(5===e.state.reviewed){var a=e.txn;a.send_sms=e.state.send_sms,a.instant_disbursal=!0,e.setState({disburse_style:"disable_div",processing:"Payment is being processes. please wait... it shall take upto 60 secs"}),xn(e.req({instant_disbursal_txn:a})).then(function(t){if(e.setState({disburse_style:"",processing:!1}),t)if("success"===t.status)e.setState({view_loan:!0}),e.setState({modalBox:!1}),window.location.reload();else if("warning"===t.status){if(0==window.confirm(t.message))return}else alert(t.message+"\n"+JSON.stringify(t.data))})}else alert("Please review all the data before disbursing")},e.handleReviewChange=function(t){var a=t.target.checked,n=e.state.reviewed,r="disable_div";a?n++:n--,5==n&&(r=""),e.setState({reviewed:n,disburse_style:r})},e.handleTxtModeChange=function(t){e.setState({txn_mode:"("+pe(t.target.value)+")"})},e}return Object(o.a)(a,[{key:"render",value:function(){return!0===this.state.view_loan?r.a.createElement(Y.a,{to:"/fa/view/".concat(this.props.data.loan_doc_id,"#disbursed")}):r.a.createElement("div",{id:""},r.a.createElement("div",{className:"row"},r.a.createElement("div",null,r.a.createElement("input",{type:"button",className:"btn btn-primary disburse",value:"Instant Disbursal",onClick:this.handleInstantDisburalClick}))),r.a.createElement("br",null),r.a.createElement(rt.a,{className:"instant_disbursal",show:this.state.modalBox,onHide:this.handleClose,size:"l"},r.a.createElement(rt.a.Header,{closeButton:!0,show:this.state.modalBox,onHide:this.handleClose},r.a.createElement(rt.a.Title,null,"Instant FA Disbursal (",this.props.data.acc_number,")")),r.a.createElement(rt.a.Body,null,r.a.createElement("div",{className:"container instant_disbursal"},r.a.createElement("p",null,"Review the below disbursal data by clicking over them. "),r.a.createElement("form",null,r.a.createElement("div",{className:"rule-form-group form-group row reset-margin"},r.a.createElement("label",{for:"",className:"col-sm-4 label__name reset-padding"},"Customer"),r.a.createElement("div",{className:"col-sm-8 reset-padding"},r.a.createElement("div",null,r.a.createElement("input",{type:"checkbox",id:"toggle_1",className:"toggle visually-hidden",onChange:this.handleReviewChange,value:"1"}),r.a.createElement("label",{className:"select_toogle",for:"toggle_1"},this.props.data.cust_name," | ",this.props.data.biz_name),r.a.createElement("div",{className:"control-me"})))),r.a.createElement("div",{className:"rule-form-group form-group row reset-margin"},r.a.createElement("label",{for:"",className:"col-sm-4 label__name reset-padding"},"A/C Number"),r.a.createElement("div",{className:"col-sm-8 reset-padding"},r.a.createElement("div",null,r.a.createElement("input",{type:"checkbox",id:"toggle_2",className:"toggle visually-hidden",onChange:this.handleReviewChange,value:"2"}),r.a.createElement("label",{className:"select_toogle",for:"toggle_2"},this.props.data.to_acc_num||"NA"),r.a.createElement("div",{className:"control-me"})))),r.a.createElement("div",{className:"rule-form-group form-group row reset-margin"},r.a.createElement("label",{for:"",className:"col-sm-4 label__name reset-padding"},"Float amount"),r.a.createElement("div",{className:"col-sm-8 reset-padding"},r.a.createElement("div",null,r.a.createElement("input",{type:"checkbox",id:"toggle_3",className:"toggle visually-hidden",onChange:this.handleReviewChange,value:"3"}),r.a.createElement("label",{className:"select_toogle",for:"toggle_3"},ft(this.props.data.loan_principal,this.props.data.currency_code)),r.a.createElement("div",{className:"control-me"})))),r.a.createElement("div",{className:"rule-form-group form-group row reset-margin"},r.a.createElement("label",{for:"",className:"col-sm-4 label__name reset-padding"},"Duration / Due date"),r.a.createElement("div",{className:"col-sm-8 reset-padding"},r.a.createElement("div",null,r.a.createElement("input",{type:"checkbox",id:"toggle_4",className:"toggle visually-hidden",onChange:this.handleReviewChange,value:"4"}),r.a.createElement("label",{className:"select_toogle",for:"toggle_4"},this.props.data.duration," days / ",this.props.data.due_date),r.a.createElement("div",{className:"control-me"})))),r.a.createElement("div",{className:"rule-form-group form-group row reset-margin"},r.a.createElement("label",{for:"",className:"col-sm-4 label__name reset-padding"},"Repayment / Fee"),r.a.createElement("div",{className:"col-sm-8 reset-padding"},r.a.createElement("div",null,r.a.createElement("input",{type:"checkbox",id:"toggle_5",className:"toggle visually-hidden",onChange:this.handleReviewChange,value:"5"}),r.a.createElement("label",{className:"select_toogle",for:"toggle_5"},ft(this.props.data.due_amount,this.props.data.currency_code)," / ",ft(this.props.data.flow_fee,this.props.data.currency_code)),r.a.createElement("div",{className:"control-me"})))),r.a.createElement("div",{className:"row"},r.a.createElement("label",null,r.a.createElement("input",{type:"checkbox",onChange:this.handleSMSCheckboxClick,defaultChecked:!0}),"\xa0 Send Disbursement confirmation notification SMS")))),this.state.processing&&r.a.createElement("p",{style:{color:"red",textAlign:"right",fontWeight:"bold"}},this.state.processing)),r.a.createElement(rt.a.Footer,null,r.a.createElement("div",{className:"col-md-8 reset-margin reset-padding"},r.a.createElement("button",{type:"button",className:"btn btn-primary float-right mr-1 ".concat(this.state.disburse_style),onClick:this.handleSubmit},"Disburse ",ft(this.props.data.loan_principal,this.props.data.currency_code)),r.a.createElement("button",{disabled:!0,type:"button",className:"btn btn-outline-primary float-right mr-1",onClick:this.handleClose,"data-dismiss":"modal","aria-label":"Close"},"Cancel")))))}}]),a}(ut);a(161);function qi(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(u.a)(e);if(t){var r=Object(u.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(m.a)(this,a)}}var zi=function(e){Object(d.a)(a,e);var t=qi(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={disabled:!0,timer_min:-1,timer_sec:null,timer:null},e.disableButton=function(){return e.setState({disabled:!0})},e.enableButton=function(){return e.setState({disabled:!1})},e.resendOTP=function(t){var a={entity_id:e.props.entity_id,otp_type:e.props.otp_type};e.disableButton(),yn(e.req(a)).then(function(t){t?(e.componentDidMount(),alert(t.message)):e.enableButton()})},e.runTimer=function(){clearInterval(e.state.timer);var t=setInterval(function(){return e.tick()},1e3);e.setState({timer:t})},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this,t={entity_id:this.props.entity_id,otp_type:this.props.otp_type};(function(e){return P(D+"/otp/status",e)})(this.req(t)).then(function(t){if(t)if(1==t.data.status){var a=E("loan","view_fa_capture_disbursal");if(t.data.expired)return void(a?e.setState({expired:!0,disabled:!1,timer_min:0,timer_sec:0}):e.setState({expired:!0,timer_min:0,timer_sec:0}));var n=~~(t.data.time_left/60),r=t.data.time_left-60*n;e.setState({timer_min:n,timer_sec:r}),e.runTimer(),a?e.enableButton():(e.disableButton(),setTimeout(function(){e.enableButton()},1e3*t.data.time_left))}else e.enableButton()})}},{key:"tick",value:function(){this.state.timer_min<0||0!=this.state.timer_sec&&0==this.state.timer_sec||(this.setState({timer_sec:this.state.timer_sec-1}),this.state.timer_sec<0&&this.setState({timer_min:this.state.timer_min-1,timer_sec:59}))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement(lt.a,{variant:"primary",disabled:this.state.disabled,onClick:function(){window.confirm("At the time of FA application, the app had sent the confirmation code to the customer as an SMS . Click 'OK' if you are sure if the customer has not received the SMS with confirmation code and would like to send the confirmation code SMS with confirmation code again.")&&e.resendOTP()}},this.props.buttonName)),r.a.createElement("div",{className:"text-labelblue"},60*this.state.timer_min+this.state.timer_sec>0&&r.a.createElement("span",null," ",this.state.timer_min,"m ",this.state.timer_sec,"s to resend"),this.state.expired&&r.a.createElement("span",null," Resend Limit Exceeded")))}}]),a}(ut);zi.defaultProps={buttonName:"Resend Code"};var Ii=zi,Wi=a(76);function Yi(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(u.a)(e);if(t){var r=Object(u.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(m.a)(this,a)}}var Vi=function(e){Object(d.a)(a,e);var t=Yi(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={accountDiv:"hide",disabled:!0,ongoing:!1,recovery_details:{}},e.recovery_txn={},e.captureRecovery=function(){var t={rec_id:e.state.recovery_details.id};Pn(e.req(t)).then(function(e){e&&window.location.reload()})},e.handleOpen=function(){e.componentWillMount(),e.setState({modal:!0})},e.handleClose=function(){e.setState({modal:!1})},e.handleSubmit=function(){e.setState({disabled:!0}),console.log(JSON.stringify(e.recovery_txn));var t=Object(X.a)({},e.recovery_txn,{loan_doc_id:e.props.loan_doc_id,cust_id:e.props.cust_id,biz_name:e.props.biz_name});Fn(e.req({loan_recovery:t})).then(function(t){t?e.handleOpen():e.setState({disabled:!1})})},e.cancelRecovery=function(t){window.confirm("Are you sure you want to cancel the collection?")&&Ln(e.req({rec_id:e.state.recovery_details.id})).then(function(t){t&&e.handleOpen()})},e.rotateIcon=function(t){e.setState({rotate:!0}),setTimeout(function(){e.setState({rotate:!1})},1500)},e}return Object(o.a)(a,[{key:"componentWillMount",value:function(){var e,t=this;this.setState({modal:!1}),(e=this.req({loan_doc_id:this.props.loan_doc_id}),P(D+"/loan/check_ong_rec",e)).then(function(e){e&&(t.setState({ongoing:e.data.ongoing}),e.data.ongoing?t.setState({recovery_details:e.data}):t.setState({disabled:!1}))})}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"rcvry_btn"},r.a.createElement(lt.a,{className:"collectionPro_actBtn",variant:"primary",onClick:this.handleOpen},this.props.name)),r.a.createElement(rt.a,{dialogClassName:"rec-form-modal",show:this.state.modal,onHide:this.handleClose},r.a.createElement(rt.a.Header,{closeButton:!0,show:this.state.modal,onHide:this.handleClose},r.a.createElement(rt.a.Title,null,"Cash Payment Request ",!this.state.ongoing&&"Form"," ",r.a.createElement("span",{className:"rec-title-right"},r.a.createElement("b",null,this.state.ongoing&&pe(this.state.recovery_details.status)+" - ",this.getCurrentStep()," of 3")))),r.a.createElement(rt.a.Body,null,this.state.ongoing&&r.a.createElement(lt.a,{variant:"link",style:{fontSize:"30px",borderRadius:"50%",padding:0,float:"right",width:"35px"},onClick:this.handleOpen},r.a.createElement(Wi.GrRefresh,{id:"ref-icon",onClick:this.rotateIcon,className:this.state.rotate?"rotate-icon ":""})),r.a.createElement("div",{className:"mb-4"},r.a.createElement("h4",null,r.a.createElement("b",null,this.props.biz_name)),r.a.createElement("ul",null,"pending_customer_otp"===this.state.recovery_details.status&&r.a.createElement(r.a.Fragment,null,r.a.createElement("li",null,r.a.createElement("p",{className:"text-danger"},this.state.recovery_details.otp_info[0]))," ",r.a.createElement("li",null,r.a.createElement("p",{className:"text-danger"},this.state.recovery_details.otp_info[1]))),!this.state.ongoing&&r.a.createElement(r.a.Fragment,null,r.a.createElement("li",null,r.a.createElement("p",{className:"text-danger"},"Use this form if and only if customer requests to make cash payment.")),r.a.createElement("li",null,r.a.createElement("p",{className:"text-danger"},"Submitting this form will send an OTP to the customer"))),"ready_to_collect"!==this.state.recovery_details.status&&r.a.createElement("li",null,r.a.createElement("p",{className:"text-danger"}," ",r.a.createElement("span",{className:"text-uppercase font-weight-bold"},"Do not collect cash")," from the customer until the customer sends OTP",r.a.createElement("br",null))))),r.a.createElement("div",{className:"container rec-form "+"".concat(this.state.ongoing&&"hide")},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-6 row"},r.a.createElement("div",{className:"col-12"},r.a.createElement("label",null,"Requested Cash Payment Amount"),r.a.createElement("font",{className:"text-danger"},"   *  "))),r.a.createElement("div",{className:"col-6 d-flex align-items-center"},r.a.createElement("input",{type:"text",className:"form-control",id:"amount",onChange:this.handleSelfChange,placeholder:"Enter Amount",required:!0})))),this.state.ongoing&&r.a.createElement("div",{class:"container rec-form"},r.a.createElement("div",{class:"row"},r.a.createElement("div",{class:"col-6"},r.a.createElement("h5",null,"Cash Amount")),r.a.createElement("div",{class:"col-6>"},r.a.createElement("h5",null,r.a.createElement("b",null,xe(this.state.recovery_details.amount,this.currency_code))))),r.a.createElement("div",{class:"row"},r.a.createElement("div",{class:"col-6"},"Initiated On"),r.a.createElement("div",{class:"col-6>"},_e(this.state.recovery_details.created_at))),r.a.createElement("div",{class:"row"},r.a.createElement("div",{class:"col-6"},"Status"),r.a.createElement("div",{class:"col-6>"},pe(this.state.recovery_details.status))),r.a.createElement("div",{class:"row"},r.a.createElement("div",{class:"col-6"},"Initiated by"),r.a.createElement("div",{class:"col-6>"},this.state.recovery_details.rs_name)),"ready_to_collect"===this.state.recovery_details.status&&r.a.createElement("p",{className:"text-primary"},r.a.createElement("span",{className:"text-uppercase font-weight-bold"},"Now collect cash of ",xe(this.state.recovery_details.amount,this.currency_code)),"  from customer and click the button below to record the collection"))),r.a.createElement(rt.a.Footer,null,!this.state.ongoing&&r.a.createElement(lt.a,{variant:"primary",disabled:this.state.disabled,onClick:this.handleSubmit},"Send OTP"),this.state.ongoing&&"pending_customer_otp"===this.state.recovery_details.status&&r.a.createElement(lt.a,{variant:"danger",onClick:this.cancelRecovery},"Cancel Payment Request"),this.state.ongoing&&"pending_customer_otp"===this.state.recovery_details.status&&r.a.createElement(Ii,{entity_id:this.state.recovery_details.id,otp_type:"confirm_recovery",buttonName:"Resend OTP"}),this.state.ongoing&&"ready_to_collect"===this.state.recovery_details.status&&r.a.createElement(lt.a,{variant:"primary",onClick:this.captureRecovery},"Record Collection"))))}},{key:"getCurrentStep",value:function(){var e="";return this.state.ongoing?"pending_customer_otp"===this.state.recovery_details.status?e="STEP 2":"ready_to_collect"===this.state.recovery_details.status&&(e="STEP 3"):e="STEP 1",e}}]),a}(ut),Ui=function(e){return P(D+"/write_off/req_write_off",e)},Gi=function(e){return P(D+"/write_off/appr_reject",e)},Ji=function(e){return P(D+"/write_off/recover_amt",e)};function Ki(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(u.a)(e);if(t){var r=Object(u.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(m.a)(this,a)}}var Qi=function(e){Object(d.a)(a,e);var t=Ki(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={modalBox:!1,write_off:{},writeoff_data:{},summary:{},loan_prov:{},message_count:0,loan_provisioning:{},is_selected_prov_year:!1},e.handleApproveReject=function(t){var a=t.target.value,n={write_off_id:e.state.writeoff_data.id,loan_doc_id:e.props.loan_doc_id,mode:a};Gi(e.req(n)).then(function(t){e.resp(t),t&&"success"===t.status&&(e.setState({modalBox:!1}),window.location.reload(),"Approve"==a?alert("Write Off Approved successfully."):alert("Write Off Approval rejected successfully."))})},e.handleOpen=function(t){e.setState({modalBox:!0})},e.handleClose=function(t){e.setState({modalBox:!1,message_count:0})},e.handleReason=function(t){var a=e.state.write_off;a[t.target.id]=t.target.value,e.setState({write_off:a,message_count:we(t.target.value)})},e.handleReqWriteOff=function(t){var a,n=e.state.write_off;if(e.state.summary.os_principal>e.state.loan_prov.balance)alert("Provisioning amount is less than write off amount. Cannot write off for this customer.");else{var r={loan_doc_id:e.props.loan_doc_id,acc_prvdr_code:e.props.acc_prvdr_code};n.remarks&&e.write_off.loan_prov_id?(a=Object(X.a)({loan_prov_id:e.write_off.loan_prov_id,write_off_amount:e.state.write_off_amount},r,n),Ui(e.req(a,!0)).then(function(t){e.resp(t),t&&"success"===t.status&&(e.setState({modalBox:!1}),alert("Write Off ".concat(t.data.status," submitted successfully.")),window.location.reload())})):alert("Please enter required field")}},e.getRecoveryAmount=function(t){var a={loan_doc_id:e.props.loan_doc_id,loan_prov_id:e.write_off.loan_prov_id};e.write_off.loan_prov_id&&Ji(e.req(a)).then(function(t){e.resp(t),t&&"success"===t.status&&e.setState({is_selected_prov_year:!0,write_off_amount:e.state.summary.os_principal+t.data})})},e}return Object(o.a)(a,[{key:"componentWillMount",value:function(){var e=this;this.write_off={loan_prov_id:""};var t={loan_doc_id:this.props.loan_doc_id,mode:"capture",amount:0};if(kn(this.req(t)).then(function(t){e.resp(t),t&&"success"===t.status&&e.setState({summary:t.data})}),[null,"rejected"].includes(this.props.write_off_status)&&this.setOptionsListToStateFromAppApi("write_off","loan_prov_year",this.req(),["loan_prov_id","loan_prov_year_bal"]),"requested"==this.props.write_off_status){var a={write_off_id:this.props.write_off_id};(function(e){return P(D+"/write_off",e)})(this.req(a,!0)).then(function(t){e.resp(t),t&&"success"===t.status&&e.setState({writeoff_data:t.data})})}}},{key:"render",value:function(){var e=this,t="requested"==this.props.write_off_status?"Approve":"Submit for Approval",a="requested"==this.props.write_off_status?"Reject":"Cancel";return r.a.createElement("div",null,[null,"rejected"].includes(this.props.write_off_status)&&E("loan","request_write_off")&&r.a.createElement("div",{className:"col-md-12"},r.a.createElement(lt.a,{variant:"primary",onClick:this.handleOpen,value:"write_off"},"Request Write Off"),r.a.createElement("br",null),r.a.createElement("br",null)),"requested"==this.props.write_off_status&&E("loan","approve_write_off")&&r.a.createElement("div",{className:"col-md-12"},r.a.createElement(lt.a,{variant:"primary",onClick:this.handleOpen,value:"write_off"},"Approve Write Off"),r.a.createElement("br",null),r.a.createElement("br",null)),r.a.createElement(rt.a,{show:this.state.modalBox,onHide:this.handleClose,size:"xl"},r.a.createElement(rt.a.Header,{closeButton:!0,show:this.state.modalBox,onHide:this.handleClose},r.a.createElement(rt.a.Title,null,[null,"rejected"].includes(this.props.write_off_status)&&"Request Write Off ","requested"==this.props.write_off_status&&"Approve Write Off ","- ",this.state.summary.cust_name," / ",this.state.summary.acc_number)),r.a.createElement(rt.a.Body,{style:{width:"1000px",margin:"0 auto"}},r.a.createElement("div",{class:"d-flex"},r.a.createElement("div",{class:"mr-auto p-2",style:{width:"350px"}},"requested"==this.props.write_off_status&&r.a.createElement("div",{className:"text-labelblue"},r.a.createElement(jo.a,null,r.a.createElement(bc.a,null,r.a.createElement("b",null,"Requester")),r.a.createElement(bc.a,null,this.state.writeoff_data.req_name)),r.a.createElement(jo.a,null,r.a.createElement(bc.a,null,r.a.createElement("b",null,"Requested Date")),r.a.createElement(bc.a,null,this.state.writeoff_data.req_date)))),r.a.createElement("div",{class:"p-2"},r.a.createElement(ee.a,{className:"nav-link",to:"/call_log/search/".concat(this.props.cust_id),target:"_blank"},"Reason Call Log")),r.a.createElement("div",{class:"p-2"},r.a.createElement(ee.a,{className:"nav-link",to:"/field_visit/search/".concat(this.props.cust_id),target:"_blank"},"Reason Visit Log"))),r.a.createElement("div",null,r.a.createElement("hr",null),r.a.createElement(Xn,{summary:this.state.summary,show_waiver:!1}),r.a.createElement("hr",null)),"requested"==this.props.write_off_status&&r.a.createElement("div",{className:"text-labelblue"},r.a.createElement(jo.a,null,r.a.createElement("div",{className:"col-md-2 text-center"},r.a.createElement("b",null,"Remarks")),r.a.createElement("div",{className:"col-md-10",style:{textAlign:"justify"}},this.state.writeoff_data.remarks)),r.a.createElement("hr",null)),r.a.createElement("div",null,[null,"rejected"].includes(this.props.write_off_status)&&r.a.createElement(jo.a,null,r.a.createElement("label",{className:"col-md-5 text-right"},r.a.createElement("b",null,"Provisioning Balance"),r.a.createElement("font",{className:"text-danger"},"   *  ")),r.a.createElement("div",{className:"col-sm-4 reset-padding"},r.a.createElement("select",{id:"loan_prov_id",ref:function(t){return e.loan_prov=t},onChange:function(t){e.handleSelfChange(t),e.getRecoveryAmount(t)},className:"form-control ".concat(this.state.credit_style),type:"text"},this.state.loan_prov_year_dd))),r.a.createElement("div",null,r.a.createElement(jo.a,null,this.state.is_selected_prov_year&&r.a.createElement(bc.a,{className:"writeoff-text"},r.a.createElement("div",null,"Write Off"),r.a.createElement("div",null,xe(this.state.write_off_amount,this.currency_code))),"requested"==this.props.write_off_status&&r.a.createElement(r.a.Fragment,null,r.a.createElement(bc.a,{className:"writeoff-text"},r.a.createElement("div",null,"Provisioning Year"),r.a.createElement("div",null,this.state.writeoff_data.year)),r.a.createElement(bc.a,{className:"writeoff-text"},r.a.createElement("div",null,"Balance"),r.a.createElement("div",null,xe(this.state.writeoff_data.balance,this.currency_code))),r.a.createElement(bc.a,{className:"writeoff-text"},r.a.createElement("div",null,"Write Off"),r.a.createElement("div",null,xe(this.state.writeoff_data.write_off_amount,this.currency_code)))),r.a.createElement("hr",null))),"requested"==this.props.write_off_status&&r.a.createElement(jo.a,null)),[null,"rejected"].includes(this.props.write_off_status)&&r.a.createElement("div",null,r.a.createElement(jo.a,null,r.a.createElement(bc.a,null,r.a.createElement(bc.a,null,r.a.createElement("label",{for:"",className:"font-weight-bold"},"Remarks",r.a.createElement("font",{className:"text-danger"},"   *  "))),r.a.createElement(bc.a,null,r.a.createElement("div",null,r.a.createElement("textarea",{type:"text",id:"remarks",className:"form-control",onChange:function(t){e.handleReason(t)},maxLength:"2000",rows:"5",cols:"30"}))),r.a.createElement("div",{id:"float_style"},r.a.createElement("b",null,"(",this.state.message_count," char )")))))),r.a.createElement(rt.a.Footer,null,[null,"rejected"].includes(this.props.write_off_status)&&r.a.createElement(r.a.Fragment,null,r.a.createElement("input",{type:"button",className:"btn btn-secondary",onClick:this.handleClose,value:a}),r.a.createElement("input",{type:"button",disabled:this.state.calling_api,className:"btn btn-primary",onClick:this.handleReqWriteOff,value:t})),"requested"==this.props.write_off_status&&r.a.createElement(r.a.Fragment,null,r.a.createElement("input",{type:"button",disabled:this.state.calling_api,className:"btn btn-secondary",onClick:this.handleApproveReject,value:a}),r.a.createElement("input",{type:"button",disabled:this.state.calling_api,className:"btn btn-primary",onClick:this.handleApproveReject,value:t})))))}}]),a}(ut);function Zi(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(u.a)(e);if(t){var r=Object(u.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(m.a)(this,a)}}var Xi=function(e){Object(d.a)(a,e);var t=Zi(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={loan:[],viewReady:!1,viewLoan:!1,viewLoanAppln:!1,loan_comment:{}},e.handleSMSChange=function(t){e.setState({message:t.target.value}),e.setState({message_count:we(t.target.value)})},e.handleSendSMSClick=function(t){var a={message:e.state.message,recipient:e.state.loan.mobile_num};Ye(e.req(a)).then(function(e){e&&alert("Message Sent")})},e.cancelLoan=function(t){if(0!=window.confirm("Are you sure to cancel FA?")){var a={cancel_loan:{loan_doc_id:e.state.loan.loan_doc_id}};bn(e.req(a)).then(function(t){e.resp(t),t&&t.success&&window.location.reload()})}},e.releaseLoan=function(t){if(0!=window.confirm("Are you sure to release FA?")){var a={loan_doc_id:e.state.loan.loan_doc_id};gn(e.req(a)).then(function(t){e.resp(t),t&&t&&window.location.reload()})}},e.bypassCustConf=function(){if(0!=window.confirm("Are you sure if you want to bypass the customer confirmation process and proceed to initiate FA disbursal?")){var t={loan_doc_id:e.state.loan.loan_doc_id};Dn(e.req(t)).then(function(t){e.resp(t),t&&t&&window.location.reload()})}},e.resendOTP=function(t){var a={loan_doc_id:e.state.loan.loan_doc_id};yn(e.req(a)).then(function(t){e.resp(t),t&&alert(t.message)})},e.repeatFloatAdvance=function(t){if(0!=window.confirm("Are you sure to confirm?")){var a={cust_id:e.state.loan.cust_id,loan_doc_id:e.state.loan.loan_doc_id};wn(e.req(a,!0)).then(function(t){if(e.resp(t),t){if(t)if(t.data.loan_application){var a=t.data.loan_application.loan_appl_doc_id,n=t.data.loan_application.loan_approver_name;e.setState({loan_appl_doc_id:a,viewLoanAppln:!0,approver_name:n})}else if(t.data.loan){var r=t.data.loan.loan_doc_id;e.setState({loan_doc_id:r,viewLoan:!0})}alert(t.message)}})}},e.handleCheck=function(t){var a=t.target.checked,n={loan_doc_id:e.state.loan_doc_id,allow_pp:a};An(e.req(n)).then(function(t){e.resp(t),t&&"success"===t.status&&("enabled"==t.data.allow_pp?(e.setState({allow_pp:!0}),alert("Customer Success will now be able to capture part payments for this FA.")):"disabled"==t.data.allow_pp&&(e.setState({allow_pp:!1}),alert("Customer Success will not be able to make part payment for this FA.")))})},e}return Object(o.a)(a,[{key:"componentWillMount",value:function(){var e,t=this,a=this.props.match.params.loan_doc_id;null==a?(e=this.props.data,this.setState({loan:e})):En(this.req({loan_doc_id:a})).then(function(a){if(t.resp(a),a)if("success"===a.status){e=a.data.loan,t.setState({message:e.message}),t.setState({message_count:we(e.message)}),t.setState({loan:e}),t.owner_person_id=e.owner_person_id,t.setState({viewReady:!0});var n="enabled"==e.allow_pp;t.setState({loan_doc_id:e.loan_doc_id,allow_pp:n})}else alert(a.message+"\n"+JSON.stringify(a.data))})}},{key:"render",value:function(){if(!this.state.viewReady)return r.a.createElement(r.a.Fragment,null);var e,t,a,n=this.state.loan.loan_doc_id,l=this.state.loan.cust_id,c=this.state.loan.lender_code,s=this.state.loan.acc_prvdr_code,o=this.state.loan.lender_name,i=E("application","cancel"),d=E("loan","release");if(1==this.state.viewLoanAppln)return r.a.createElement(Y.a,{to:"/fa_appl/view/".concat(this.state.loan_appl_doc_id)});if(1==this.state.viewLoan)return r.a.createElement(Y.a,{to:"/fa/view/".concat(this.state.loan_doc_id)});if(this.state.loan.customer_consent_rcvd||"pending_disbursal"!==this.state.loan.status||E("loan","retry_disbursal")&&(a=r.a.createElement(lt.a,{variant:"danger",onClick:this.bypassCustConf},"Bypass Cust Confirm")),this.state.loan.customer_consent_rcvd&&"pending_disbursal"===this.state.loan.status){if(E("loan","view_fa_capture_disbursal")){var m=this.state.loan.loan_principal,u=this.state.loan.cust_acc_id,p=this.state.loan.loan_purpose;this.disburse_loan={loan_doc_id:n,cust_id:l,lender_code:c,amount:m,cust_acc_id:u,lender_name:o,acc_prvdr_code:s,acc_purpose:p},e=r.a.createElement(Mi,{id:"disbursal_txn",data:this.disburse_loan,title:"Disbursal Loan",mode:this.props.mode})}if(E("loan","disburse")){var _=this.state.loan.cust_acc_id,h=this.state.loan,f=h.biz_name,v=h.cust_name,g=h.acc_number,y=h.loan_principal,b=h.duration,w=h.flow_fee,N=h.due_amount,x=h.to_acc_num,C=h.due_date,k=h.currency_code;this.instant_disburse_loan={biz_name:f,cust_name:v,acc_number:g,loan_principal:y,duration:b,flow_fee:w,due_amount:N,loan_doc_id:n,cust_id:l,cust_acc_id:_,to_acc_num:x,lender_code:c,acc_prvdr_code:s,currency_code:k,due_date:C},t=r.a.createElement(Hi,{id:"instant_disbursal_txn",data:this.instant_disburse_loan,title:"Instant Disbursal Loan",mode:this.props.mode})}}else if("ongoing"===this.state.loan.status||"due"===this.state.loan.status||"overdue"===this.state.loan.status){this.state.loan.due_date;var S=this.state.loan.cust_id,O=(this.state.loan.current_os_amount,this.state.loan.status),A=this.state.loan.acc_prvdr_code,j=this.state.loan.loan_purpose,R=(this.state.loan.provisional_penalty,this.state.loan.penalty_collected,this.state.loan.allow_pp);"days_overdue"in this.state.loan&&this.state.loan.days_overdue,"penalty_days"in this.state.loan&&this.state.loan.penalty_days;E("loan","capture_repayment")&&(this.capture_repayment={loan_purpose:j,loan_doc_id:n,lender_code:c,status:O,acc_prvdr_code:A,lender_name:o,allow_partial_payment:R,cust_id:S},e=r.a.createElement(er,{id:"repayment_txn",mode:"capture",parent:"view_fa",title:"Capture Repayment (New)",data:this.capture_repayment}))}return r.a.createElement("div",{className:"container main_div"},r.a.createElement("br",null),r.a.createElement("div",{className:"row view_loan_menu"},["approved","recovered","partially_recovered"].includes(this.state.loan.write_off_status)&&E("loan","search_list_view_write_off")&&r.a.createElement("div",{class:"closedStamp"},r.a.createElement("div",{className:"stamp is-nope"},"Written-Off")),r.a.createElement("div",{className:"col-md-4"},r.a.createElement("div",{className:"row p-inherit"},r.a.createElement("h4",null,"Float Advance ID")),r.a.createElement("div",{className:"row p-inherit"},r.a.createElement("h4",null,r.a.createElement("b",null,this.state.loan.loan_doc_id)))),r.a.createElement("div",{className:"col-md-3 "},r.a.createElement("h4",null,"Status: ",r.a.createElement("br",null),r.a.createElement("b",null,function(e){if(0==e.customer_consent_rcvd&&"pending_disbursal"===e.status){var t=function(e){var t={};return"sent"==e.otp_status?(t.status="Pending w/ SMS Provider",t.overlay_info="Sending of the confirmation code SMS has been initiated and is now pending with the SMS Provider. The SMS will reach the customer shortly. If the status doesn't change for 2 minutes, if required, you shall decide to resend the code."):(t.status="Pending w/ Customer",t.overlay_info=e.confirm_code_info),t}(e);return r.a.createElement(se.a,{placement:"bottom",trigger:"hover",overlay:r.a.createElement(oe.a,{style:{fontSize:"15px",padding:"15px",color:"mediumblue",fontFamily:"Montserrat"}},t.overlay_info)},r.a.createElement("span",null,t.status," ",r.a.createElement("sup",null,r.a.createElement(ie.a,null))))}return"pending_disbursal"===e.status||"hold"===e.status?r.a.createElement(se.a,{placement:"bottom",trigger:"hover",overlay:r.a.createElement(oe.a,{style:{fontSize:"13px",padding:"15px",color:"mediumblue",fontFamily:"Montserrat"}},r.a.createElement("b",null,r.a.createElement("u",null,"Disbursal Status:"),r.a.createElement("br",null),pe(e.disbursal_status||"not_initiated")))},r.a.createElement("span",null,Ze(e.status)," ",r.a.createElement("sup",null,r.a.createElement(ie.a,null)))):Ze(e.status)}(this.state.loan),"overdue"==this.state.loan.status&&" (".concat(this.state.loan.overdue_days,")")))),r.a.createElement("div",{className:"col-md-5"},r.a.createElement("div",{className:"row d-flex justify-content-between p-inherit"},r.a.createElement("div",{className:"pb-2"},"settled"===this.state.loan.status&&null==this.state.loan.pending_loan_appl_doc_id&&null==this.state.loan.ongoing_loan_doc_id&&this.state.loan.last_loan_doc_id==this.state.loan.loan_doc_id&&r.a.createElement("input",{type:"button",disabled:this.state.calling_api,className:"btn btn-primary pull",value:"Repeat this FA",onClick:this.repeatFloatAdvance}),!this.state.loan.customer_consent_rcvd&&"pending_disbursal"===this.state.loan.status&&r.a.createElement(Ii,{entity_id:this.state.loan.loan_doc_id,otp_type:"confirm_fa"}),e,"hold"===this.state.loan.status&&d&&r.a.createElement("div",{className:"pb-2"},r.a.createElement("input",{type:"button",className:"btn btn-primary pull",value:"Release",onClick:this.releaseLoan}))),r.a.createElement("div",{className:"pb-2"},t,a),r.a.createElement("div",{className:"pb-2"},r.a.createElement(Di,{parent:"view_loan",loan_doc_id:this.state.loan.loan_doc_id,btn:"btn"})),"overdue"===this.state.loan.status&&E("loan","capture_recovery")&&r.a.createElement("div",{className:"pb-2"},r.a.createElement(Vi,{id:"recovery_txn",name:"Request Cash",loan_doc_id:this.state.loan.loan_doc_id,cust_id:this.state.loan.cust_id,biz_name:this.state.loan.biz_name})),"pending_disbursal"===this.state.loan.status&&i&&!this.state.loan.customer_consent_rcvd&&r.a.createElement("div",{className:"pb-2"},r.a.createElement("input",{type:"button",className:"btn btn-primary pull",value:"Cancel",onClick:this.cancelLoan}))))),this.state.loan.overdue_days>this.state.loan.write_off_od_days&&"overdue"==this.state.loan.status&&r.a.createElement(Qi,{id:"write_off",loan_doc_id:this.state.loan.loan_doc_id,acc_prvdr_code:this.state.loan.acc_prvdr_code,cust_id:this.state.loan.cust_id,write_off_status:this.state.loan.write_off_status,write_off_id:this.state.loan.write_off_id}),r.a.createElement(pi,{parent:"loan",customer:this.state.loan}),r.a.createElement(vi,{parent:"loan",credit_score:this.state.loan.credit_score,customer:this.state.loan,product:this.state.loan}))}}]),a}(dt);function $i(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(u.a)(e);if(t){var r=Object(u.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(m.a)(this,a)}}var ed=function(e){Object(d.a)(a,e);var t=$i(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={comp_name:"customer_factor",cust_id_style:"show_div",dp_cust_id_style:"show_div",dp_style:"show_div"},e.handleCustIDChange=function(t){""==t.target.value?e.setState({dp_cust_id_style:"show_div",cust_id_style:"show_div",dp_style:"show_div"}):"cust_id"==t.target.id?e.setState({dp_cust_id_style:"disable_div",cust_id_style:"show_div",dp_style:"disable_div"}):e.setState({cust_id_style:"disable_div",dp_cust_id_style:"show_div",dp_style:"show_div"}),e.handleChange(t)},e}return Object(o.a)(a,[{key:"componentWillMount",value:function(){var e=this;this.setOptionsToStateFromApi("data_provider");var t={country_code:this.country_code};Rr(this.req(t)).then(function(t){return e.fillSelect(t,"score_model",["model_code","model_name"])})}},{key:"render",value:function(){return r.a.createElement("div",{id:""},r.a.createElement("h5",null,this.props.title?this.props.title:""),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-3 ".concat(this.state.cust_id_style)},r.a.createElement("span",null,"Flow Customer ID"),r.a.createElement("input",{id:"cust_id",onChange:this.handleCustIDChange,className:"form-control",required:!0})),r.a.createElement("div",{className:"col-md-3 ".concat(this.state.dp_cust_id_style)},r.a.createElement("span",null,"Account Number"),r.a.createElement("input",{id:"acc_number",onChange:this.handleCustIDChange,className:"form-control"}))),r.a.createElement("br",null),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-3"},r.a.createElement("span",null,"Credit Score Model"),r.a.createElement("font",{className:"text-danger"},"   *  "),r.a.createElement("select",{id:"cs_model_code",onChange:this.handleChange,className:"form-control",type:"text",required:"required"},this.state.score_model_dd)),r.a.createElement("div",{className:"col-md-6"},r.a.createElement(Gt,{id:"cust_txn_file",label:"Transaction File",is_mandatory:!0,mode:this.props.mode,onCreateUpload:this.handleChange}))))}}]),a}(ut);function td(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(u.a)(e);if(t){var r=Object(u.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(m.a)(this,a)}}var ad=function(e){Object(d.a)(a,e);var t=td(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={csfList:null},e.handleSave=function(t){e.result.country_code=e.country_code,Fr(e.req(e.result)).then(function(e){e&&("success"===e.status?(alert("Score Factors saved successfully"),window.location.reload()):alert(e.message+"\n"+JSON.stringify(e.data)))})},e}return Object(o.a)(a,[{key:"componentWillMount",value:function(){this.result=this.props.factors_list,this.result.customer_factor=this.props.customer_factor;var e=this.result.score_values.map(function(e,t){return r.a.createElement("tr",{key:t},r.a.createElement("td",null," ",Ze(e.csf_type)),r.a.createElement("td",null," ",e.csf_gross_value),r.a.createElement("td",null," ",e.csf_normal_value))});this.setState({csfList:e})}},{key:"componentDidMount",value:function(){la()("#table").removeAttr("width").dataTable({order:[],columns:[{width:"22%"},{width:"22%"},{width:"22%"}],bPaginate:!1,searching:!1,info:!1})}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-3"},r.a.createElement("h5",null,r.a.createElement("b",null,"Run ID")," : ",this.result.run_id)),r.a.createElement("div",{className:"col-md-3"},r.a.createElement("h5",null,r.a.createElement("b",null,"Score")," : ",this.result.score," / 1000")),r.a.createElement("div",{className:"col-md-3"},r.a.createElement("h5",null,r.a.createElement("b",null,"Result")," : ",Ze(this.result.result))),r.a.createElement("div",{className:"col-md-3"},this.result.existing_customer?r.a.createElement("h5",null,r.a.createElement("b",null,"Flow Customer ID")," : ",this.result.cust_id):r.a.createElement("h5",{id:"red_color"},"New Customer"))),r.a.createElement("br",null),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-3"}),r.a.createElement("div",{className:"col-md-3"},r.a.createElement("h4",null,"Score Factors"))),r.a.createElement("table",{id:"table",className:"table-responsive table"},r.a.createElement("thead",{className:"text-info"},r.a.createElement("tr",null,r.a.createElement("th",null,"Factor"),r.a.createElement("th",null,"Gross Value"),r.a.createElement("th",null,"Normal Value"))),r.a.createElement("tbody",null,this.state.csfList)),r.a.createElement("br",null),r.a.createElement("input",{id:"float_style",type:"button",className:"btn btn-primary",onClick:this.handleSave,value:"Accept and Save"}))}}]),a}(ut);function nd(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(u.a)(e);if(t){var r=Object(u.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(m.a)(this,a)}}var rd=function(e){Object(d.a)(a,e);var t=nd(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={customer_factor:{},list_screen:!1,run_btn_style:"show_div"},e.handleSubmit=function(t){e.setState({list_screen:!1}),t.preventDefault(),e.setState({run_btn_style:"disable_div"}),alert("It may take a while. Please wait.");var a=e.state.customer_factor;a.country_code=e.country_code,Dr(e.req({customer_factor:a})).then(function(t){t?"success"===t.status?e.setState({factors_list:t.data,list_screen:!0}):(e.setState({run_btn_style:"show_div"}),alert(t.message+"\n"+JSON.stringify(t.data))):e.setState({run_btn_style:"show_div"})})},e}return Object(o.a)(a,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"containerTopmargin container text-labelblue"},r.a.createElement("form",{id:"borrower_form",onSubmit:this.handleSubmit},r.a.createElement("div",{id:""},r.a.createElement(ed,{id:"customer_factor",mode:this.props.mode,title:"Upload Customer Transactions",onComponentChange:this.handleComponentChange})," ",r.a.createElement("br",null),r.a.createElement("input",{type:"button",className:"btn btn-primary ".concat(this.state.run_btn_style),onClick:this.handleSubmit,value:"Run"}),r.a.createElement("br",null),r.a.createElement("br",null),this.state.list_screen&&r.a.createElement(r.a.Fragment,null,r.a.createElement("hr",null),r.a.createElement(ad,{customer_factor:this.state.customer_factor,factors_list:this.state.factors_list})),r.a.createElement("br",null)))))}}]),a}(dt);function ld(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(u.a)(e);if(t){var r=Object(u.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(m.a)(this,a)}}var cd=function(e){Object(d.a)(a,e);var t=ld(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={person:{},address:{}},e.handleUserCheckboxClick=function(t){t.target.checked?e.setState({create_user:!0}):e.setState({create_user:!1})},e.handleSubmit=function(t){t.preventDefault();var a=e.state.person;a.country_code=e.country_code,a.address=e.state.address,a.associated_with="FLOW",Jt(e.req({person:a})).then(function(t){e.resp(t),t&&(alert("New Person created successfully"),window.location.reload())})},e.handleRoleSelect=function(t){e.state.person.role=t.target.value},e}return Object(o.a)(a,[{key:"componentWillMount",value:function(){var e=this,t=null;if("view"===this.props.mode){var a={person_id:this.props.match.params.person_id};(function(e){return P("/api/admin/person/view",e)})(this.req(a)).then(function(a){a&&(t=a.data,e.setState({person:t,address:t.address}))})}}},{key:"render",value:function(){return r.a.createElement("div",{className:"container text-labelblue"},r.a.createElement("h5",null,this.props.title+(this.state.person.first_name?" : "+this.state.person.first_name:"")),r.a.createElement("form",{id:"borrower_form",onSubmit:this.handleSubmit},r.a.createElement("div",{id:""},r.a.createElement($t,{id:"person",title:"",entity:"user",designation:"list",data:this.state.person,mode:this.props.mode,onComponentChange:this.handleComponentChange,changeComponentName:"person"}),r.a.createElement("br",null),r.a.createElement("input",{type:"button",className:"btn btn-primary ".concat("create"===this.props.mode?"show_button":"hide_button"),onClick:this.handleSubmit,value:"Create Person",disabled:this.state.calling_api}))),r.a.createElement("br",null),r.a.createElement("br",null))}}]),a}(dt);function sd(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(u.a)(e);if(t){var r=Object(u.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(m.a)(this,a)}}var od=function(e){Object(d.a)(a,e);var t=sd(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"componentWillMount",value:function(){}},{key:"render",value:function(){return r.a.createElement("input",{id:this.props.id,type:"button",onClick:this.props.onClick,value:y(this.props.entity),className:"btn btn-primary"})}}]),a}(ut);function id(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(u.a)(e);if(t){var r=Object(u.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(m.a)(this,a)}}var dd=function(e){Object(d.a)(a,e);var t=id(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={userList:null,toView:!1,person_id:null,data_prvdr:{}},e.handleClick=function(t){e.setState({person_id:t.target.id,toView:!0})},e}return Object(o.a)(a,[{key:"componentWillMount",value:function(){var e,t=this;(e=this.req({associated_with:"FLOW"}),P("/api/admin/person/list",e)).then(function(e){if(e){var a=e.data.map(function(e,a){return r.a.createElement("tr",{key:a},r.a.createElement("td",null," ",Ne(e)),r.a.createElement("td",null," ",e.whatsapp),r.a.createElement("td",null," ",e.mobile_num),r.a.createElement("td",null," ",e.email_id),r.a.createElement("td",null," ",e.designation),r.a.createElement(na,{id:e.id,entity:"users",status:e.status}),r.a.createElement("td",null,r.a.createElement(od,{id:e.id,entity:"user",onClick:t.handleClick})))});t.setState({userList:a}),la()("#user-list").removeAttr("width").dataTable({order:[],columns:[{width:"15%"},{width:"15%"},{width:"15%"},{width:"15%"},{width:"10%"},{width:"10%"},{width:"10%"},{width:"10%"}],dom:"Bfrtip",buttons:["csv","excel","print"]})}})}},{key:"render",value:function(){return!0===this.state.toView?r.a.createElement(Y.a,{to:"/user/view/".concat(this.state.person_id)}):r.a.createElement("div",{className:"container"},null!=this.state.userList&&r.a.createElement("div",{id:"datatable data_prvdr_table",className:"table-responsive"},r.a.createElement("h5",null,"Person List"),r.a.createElement("table",{id:"user-list",className:"table"},r.a.createElement("thead",{className:"text-info"},r.a.createElement("tr",null,r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"WhatsApp Number"),r.a.createElement("th",null,"Mobile Number"),r.a.createElement("th",null,"Email ID"),r.a.createElement("th",null,"Designation"),r.a.createElement("th",null,"Status"),r.a.createElement("th",null,"Action"),r.a.createElement("th",null,"Action"))),r.a.createElement("tbody",null,this.state.userList))))}}]),a}(dt),md=a(91),ud=a(119);function pd(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(u.a)(e);if(t){var r=Object(u.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(m.a)(this,a)}}var _d=function(e){Object(d.a)(a,e);var t=pd(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).tabCheck=function(e){n.setState(Object(X.a)({},n.state,{active:e,filteredArray:[],cust_id_active:!1,reason_for_reassign:""})),n.load_flow_rel_mgr(),"From Temporary Assignments"==e&&n.temp_rmassign()},n.temp_rmassign=function(){var e={time_zone:v("market").time_zone};qs(Object(X.a)({},e)).then(function(e){e&&"success"===e.status&&n.setState({customer_data:e.data,resp_active_status:!0})})},n.newReassign=function(e){n.setState({reason_for_reassign:"",from_assign_rmName:""}),"new_reassign"==e?n.setState({new_reassign:!0,temp_reassign:!1,temp_assign_rm_id:"",to_rm_id:""}):n.setState({new_reassign:!1,temp_reassign:!0,filteredArray:""})},n.state={by_territory_status:!0,from_rm_id:null,to_rm_id:null,isActive:!1,flow_rel_mgr_dd:"",filteredArray:[],cust_id:null,active:"By Territory",cust_detls:{},cust_id_active:!1,is_temp_assign:!0,to_assign_rmName:"",temp_assign_rm_id:null,customer_data:[],tot_cust_count:"",new_reassign:!1,temp_reassign:!1,loader:!1,from_assign_rmName:"",resp_active_status:!1,reason_for_reassign:"",sms_temp:""},n}return Object(o.a)(a,[{key:"componentWillMount",value:function(){this.load_flow_rel_mgr()}},{key:"getSMSDetailhandler",value:function(){var e,t=this,a={reason_for_reassign:this.state.reason_for_reassign};(e=Object(X.a)({},a),P("/api/admin/rm_assign/SMS_details",e)).then(function(e){e&&t.setState({sms_temp:e.data})})}},{key:"onchange_ReasonForReassignhandler",value:function(e,t){var a=this;this.setState({reason_for_reassign:t},function(){return a.getSMSDetailhandler()})}},{key:"onchange_Reassignhandler",value:function(e,t){var a=this;if("from_rm_id"===t){this.state.flow_rel_mgr_dd.filter(function(t,n){return t.props.value==e.target.value?a.setState({from_assign_rmName:t.props.children}):null}),this.setState({from_rm_id:e.target.value});var n={from_rm_id:e.target.value,country_code:v("market").country_code,time_zone:v("market").time_zone,status:""};(function(e){return P("/api/admin/rm_assign/rm_details",e)})(Object(X.a)({},n)).then(function(e){if(e){var t=Object(re.a)(e.data.rm_data);t.map(function(e,a){t[a].isActive=!1}),a.setState({filteredArray:t,isActive:!1,tot_cust_count:e.data.total_cust_count})}})}else if("from_cust_id"===t)this.setState({cust_id:e.target.value});else if("temp_assign"===t){console.log("this.state.customer_data",this.state.customer_data);var r=this.state.customer_data.filter(function(t){return t.rm_name==e.target.value});this.setState({temp_assign_rm_id:r[0].id,from_assign_rmName:r[0].from_rm_name})}else"to_rm_id"===t&&(this.state.flow_rel_mgr_dd.filter(function(t,n){return t.props.value==e.target.value?a.setState({to_assign_rmName:t.props.children}):null}),this.setState({to_rm_id:e.target.value}))}},{key:"item_handler",value:function(e,t,a){var n,r=Object(re.a)(this.state[a]);r[t]=Object(X.a)({},r[t],{isActive:!r[t].isActive}),this.setState(Object(X.a)({},this.state,(n={},Object(k.a)(n,a,r),Object(k.a)(n,"isActive",!0),n)))}},{key:"territory_Assign",value:function(e){var t=this;if("by_territory"===e){var a=this.state.filteredArray.filter(function(e){return 1==e.isActive}),n=[];if(a.map(function(e,t){n.push(e.territory)}),this.state.to_rm_id)if(n.length>=1){if(window.confirm("Are you sure to assign all customers from territories  ' "+n.join(", ")+" '  to "+this.state.to_assign_rmName))if(this.state.from_rm_id){var r={from_rm_id:this.state.from_rm_id,to_rm_id:this.state.to_rm_id,territories:n,reason_for_reassign:this.state.reason_for_reassign,time_zone:v("market").time_zone,assign_by:"territory"};this.setState({loader:!0}),Ts(Object(X.a)({},r)).then(function(e){e?"success"===e.status&&(alert(e.message),t.setState({loader:!1}),window.location.reload()):t.setState({loader:!1,filteredArray:[]})})}else alert("please select from assigned RM")}else alert("please select territories");else alert("please select to assign RM")}if("by_rm"===e){var l=[];if(this.state.filteredArray.map(function(e,t){l.push(e.territory)}),this.state.from_rm_id)if(this.state.to_rm_id){if(window.confirm("Are you sure to assign all customers from territories  ' "+l.join(", ")+" '  to "+this.state.to_assign_rmName)){var c={from_rm_id:this.state.from_rm_id,to_rm_id:this.state.to_rm_id,reason_for_reassign:this.state.reason_for_reassign,time_zone:v("market").time_zone,assign_by:"rm",temporary_assign:this.state.is_temp_assign};this.setState({loader:!0}),Ts(Object(X.a)({},c)).then(function(e){e?"success"===e.status&&(t.setState({loader:!1}),alert(e.message),window.location.reload()):t.setState({loader:!1,filteredArray:[]})})}}else alert("please select to-assign RM");else alert("please select from assigned RM")}if("by_customer"===e)if(this.state.to_rm_id)if(this.state.reason_for_reassign){if(window.confirm("Are you sure to assign "+this.state.cust_id+" to "+this.state.to_assign_rmName)){var s={from_rm_id:this.state.cust_detls.rm_id,cust_id:this.state.cust_id,to_rm_id:this.state.to_rm_id,reason_for_reassign:this.state.reason_for_reassign,time_zone:v("market").time_zone,assign_by:"customer"};this.setState({loader:!0}),Ts(Object(X.a)({},s)).then(function(e){e?"success"===e.status&&(t.setState({loader:!1}),alert(e.message),window.location.reload()):t.setState({loader:!1,filteredArray:[]})})}}else alert("Please select the reason for reassignment");else alert("Please select to-assign RM");if("temp_assign"===e)if(this.state.temp_assign_rm_id)if(this.state.to_rm_id){if(window.confirm("Are you sure to assign  to "+this.state.to_assign_rmName)){var o={from_rm_id:this.state.temp_assign_rm_id,to_rm_id:parseInt(this.state.to_rm_id),reason_for_reassign:this.state.reason_for_reassign,time_zone:v("market").time_zone,assign_by:"temp_assign"};this.setState({loader:!0}),Ts(Object(X.a)({},o)).then(function(e){e?"success"===e.status&&(t.setState({loader:!1}),alert(e.message),window.location.reload()):t.setState({loader:!1,filteredArray:[]})})}}else alert("Please Select to-assign RM");else alert("please select temporarily-assigned RM")}},{key:"cust_id_SubmitHandler",value:function(){var e,t=this;if(this.state.cust_id){var a={borrower_search_criteria:{mode:"search",req_parameter:this.state.cust_id},time_zone:v("market").time_zone,country_code:v("market").country_code};(e=Object(X.a)({},a),P("/api/admin/rm_assign/cust_details",e)).then(function(e){e?"success"===e.status&&t.setState({cust_detls:e.data,cust_id_active:!0,cust_id:e.data.cust_id}):t.setState({loader:!1,filteredArray:[]})})}else alert("enter valid Customer ID")}},{key:"isPermanent_assign",value:function(e){this.setState({is_temp_assign:e.target.checked})}},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",{className:"text-white text-center"}," RM-Customer Reassignment"),r.a.createElement(ud.a,{defaultActiveKey:this.state.active,id:"justify-tab-example",className:"mb-3",justify:!0,style:{marginTop:"50px"},onSelect:function(t){return e.tabCheck(t)}},r.a.createElement(md.a,{eventKey:"By Territory",title:"By Territory"},r.a.createElement("div",{className:"row justify-content-center"},this.state.loader?" ":r.a.createElement("div",null,this.state.filteredArray.length>0?r.a.createElement("p",{className:"text-white no-margin text-center",style:{fontSize:"19px",padding:"30% 0px 0px 0px"}},"Select Territories to Reassign"):"")),this.state.loader?r.a.createElement("div",{class:"d-flex justify-content-center"},r.a.createElement("div",{class:"spinner-border text-info",role:"status"},r.a.createElement("span",{class:"sr-only"},"Loading..."))):r.a.createElement("div",{className:this.state.filteredArray.length>0?"d-flex justify-content-around":"d-flex justify-content-start reassign_assignFrom_label"},r.a.createElement("div",{className:this.state.filteredArray.length>0?"form-group col-md-3 form_rm_reassignment":"form-group col-md-4 reassign_territory_form "},r.a.createElement("label",{className:"text-white",style:{marginTop:"16px"}},"Assign From"),r.a.createElement("select",{id:"from_acc_id",className:"form-control",required:"required",onChange:function(t){return e.onchange_Reassignhandler(t,"from_rm_id")}},this.state.flow_rel_mgr_dd)),r.a.createElement("div",null,this.state.filteredArray.length>0?r.a.createElement("div",{className:"rm_territories"},this.state.filteredArray.map(function(t,a){return r.a.createElement("div",{className:"example color",key:a,style:{backgroundColor:t.isActive&&"#49aebe",cursor:"pointer",boxShadow:" 0 1rem 3rem rgba(0, 0, 0, 0.175) "},onClick:e.state.by_territory_status?function(){return e.item_handler(t,a,"filteredArray")}:""},r.a.createElement("div",{className:"d-flex  justify-content-around align-items-center "},r.a.createElement("p",{className:"text-white no-margin",style:{paddingTop:"15px"}},he(t.territory)," ( ",t.ter_cust_count," )")),r.a.createElement("div",null,r.a.createElement("hr",{className:"hr_reassign",style:{margin:"10px 0px 0px 0px"}})))})):""),this.state.filteredArray.length>0?r.a.createElement("div",{className:this.state.filteredArray.length>0?"form-group col-md-3 form_rm_reassignment ":"form-group col-md-4 reassign_territory_form "},r.a.createElement("label",{style:{margin:"8% 0px 5px 0px"},className:"text-white"},"Assign To"),r.a.createElement("select",{id:"from_acc_id",className:"form-control",required:"required",onChange:function(t){return e.onchange_Reassignhandler(t,"to_rm_id")}},this.state.flow_rel_mgr_dd),r.a.createElement("div",{className:"form-group "},r.a.createElement("label",{className:"text-white",style:{marginTop:"16px"}},"Reason for reassignment"),r.a.createElement("div",{className:"d-flex justify-content-center"},r.a.createElement("div",{class:"form-check"},r.a.createElement("input",{class:"form-check-input form-check-input-reassignment",type:"radio",name:"flexRadioDefault",id:"flexRadioDefault5",value:this.state.reason_for_reassign,onChange:function(t){return e.onchange_ReasonForReassignhandler(t,"rm_has_resigned")}}),r.a.createElement("label",{class:"form-check-label",for:"flexRadioDefault5",style:{fontSize:"13px"}},this.state.from_assign_rmName," has resigned")),r.a.createElement("div",{class:"form-check",style:{marginLeft:"20px"}},r.a.createElement("input",{class:"form-check-input form-check-input-reassignment",type:"radio",name:"flexRadioDefault",id:"flexRadioDefault6",value:this.state.reason_for_reassign,onChange:function(t){return e.onchange_ReasonForReassignhandler(t,"other_reason")}}),r.a.createElement("label",{class:"form-check-label",for:"flexRadioDefault6",style:{fontSize:"13px"}},"Other reason"))),r.a.createElement("div",null,r.a.createElement("p",{className:"form-group text-white text-center",style:{marginTop:"20px"}},"Note : Customers  WILL BE communicated about this reassignment with an SMS template as below."),this.state.reason_for_reassign&&r.a.createElement("p",{className:"form-group text-white text-justify"},"SMS template : ",r.a.createElement("span",{className:"font-italic"},this.state.sms_temp)))),r.a.createElement("div",{className:"mt-4",style:{marginTop:"60px"}},r.a.createElement("button",{type:"button",className:"btn btn-info",style:{borderRadius:"10px"},disabled:!this.state.isActive,onClick:function(){return e.territory_Assign("by_territory")}},"Assign"))):"")),r.a.createElement(md.a,{eventKey:"By RM",title:"By RM"},r.a.createElement("div",{className:"d-flex justify-content-center",style:{marginTop:"61px"}},r.a.createElement("div",{class:"form-check"},r.a.createElement("input",{class:"form-check-input form-check-input-reassignment",type:"radio",name:"flexRadioDefault",id:"flexRadioDefault1",onChange:function(){return e.newReassign("new_reassign")}}),r.a.createElement("label",{class:"form-check-label",for:"flexRadioDefault1",style:{fontSize:"16px"}},"New Reassignment")),r.a.createElement("div",{class:"form-check",style:{marginLeft:"20px"}},r.a.createElement("input",{class:"form-check-input form-check-input-reassignment",type:"radio",name:"flexRadioDefault",id:"flexRadioDefault2",onChange:function(){return e.newReassign("temp_reassign")},onClick:function(){return e.temp_rmassign()}}),r.a.createElement("label",{class:"form-check-label",for:"flexRadioDefault2",style:{fontSize:"16px"}},"From Temporary Assignments"))),this.state.loader?r.a.createElement("div",{class:"d-flex justify-content-center"},r.a.createElement("div",{class:"spinner-border text-info",role:"status"},r.a.createElement("span",{class:"sr-only"},"Loading..."))):r.a.createElement(r.a.Fragment,null,this.state.new_reassign&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:this.state.filteredArray.length>0?"d-flex justify-content-around ":"d-flex justify-content-start reassign_assignFrom_label",style:{marginTop:this.state.filteredArray.length>0?"3%":"-45px"}},r.a.createElement("div",{className:this.state.filteredArray.length>0?"form-group col-md-3 form_rm_reassignment ":"form-group col-md-4 reassign_territory_form "},r.a.createElement("label",{style:{marginTop:"32px"},className:"text-white"},"Assign From"),r.a.createElement("select",{id:"from_acc_id",className:"form-control",required:"required",onChange:function(t){return e.onchange_Reassignhandler(t,"from_rm_id")}},this.state.flow_rel_mgr_dd)),r.a.createElement("div",null,this.state.filteredArray.length>0?r.a.createElement(r.a.Fragment,null,r.a.createElement("p",{className:"text-white no-margin text-center",style:{fontSize:"14px"}},this.state.from_assign_rmName,"'s Territories"),r.a.createElement("div",{className:"rm_territories"},this.state.filteredArray.map(function(e,t){return r.a.createElement("div",{className:"example color",key:t,style:{backgroundColor:e.isActive&&"#49aebe",boxShadow:" 0 1rem 3rem rgba(0, 0, 0, 0.175) "}},r.a.createElement("div",{className:"d-flex  justify-content-around align-items-center "},r.a.createElement("p",{className:"text-white no-margin",style:{paddingTop:"15px"}},he(e.territory)," (",e.ter_cust_count,")")),r.a.createElement("div",null,r.a.createElement("hr",{className:"hr_reassign",style:{margin:"10px 0px 0px 0px"}})))}))):"",this.state.filteredArray.length>0?r.a.createElement("h3",{className:"text-white text-center"},"Total Customers : ",this.state.tot_cust_count):""),this.state.filteredArray.length>0?r.a.createElement("div",{className:this.state.filteredArray.length>0?"form-group col-md-3 form_rm_reassignment ":"form-group col-md-4 reassign_territory_form "},r.a.createElement("label",{style:{margin:"30px 0px 5px 0px"}},"Assign To"),r.a.createElement("select",{id:"from_acc_id",className:"form-control",required:"required",onChange:function(t){return e.onchange_Reassignhandler(t,"to_rm_id")}},this.state.flow_rel_mgr_dd),this.state.filteredArray.length>0&&r.a.createElement("div",{class:"form-check"},r.a.createElement("input",{class:"form-check-input",type:"checkbox",value:"",id:"by_rm",onChange:function(t){return e.isPermanent_assign(t)},defaultChecked:this.state.is_temp_assign}),r.a.createElement("label",{class:"form-check-label",for:"by_rm",style:{fontSize:"12px",opacity:"0.8"}},"Assign Temporarily"),r.a.createElement("div",{className:"form-group "},r.a.createElement("label",{className:"text-white",style:{marginTop:"16px"}},"Reason for reassignment"),r.a.createElement("div",{className:"d-flex justify-content-center"},r.a.createElement("div",{class:"form-check"},r.a.createElement("input",{class:"form-check-input form-check-input-reassignment",type:"radio",name:"flexRadioDefault",id:"flexRadioDefault7",value:this.state.reason_for_reassign,onChange:function(t){return e.onchange_ReasonForReassignhandler(t,"rm_has_resigned")}}),r.a.createElement("label",{class:"form-check-label",for:"flexRadioDefault7",style:{fontSize:"13px"}},this.state.from_assign_rmName," has resigned")),r.a.createElement("div",{class:"form-check",style:{marginLeft:"20px"}},r.a.createElement("input",{class:"form-check-input form-check-input-reassignment",type:"radio",name:"flexRadioDefault",id:"flexRadioDefault8",value:this.state.reason_for_reassign,onChange:function(t){return e.onchange_ReasonForReassignhandler(t,"other_reason")}}),r.a.createElement("label",{class:"form-check-label",for:"flexRadioDefault8",style:{fontSize:"13px"}},"Other reason"))),r.a.createElement("div",null,r.a.createElement("p",{className:"text-white text-center",style:{marginTop:"20px"}},"Note : Customers ",r.a.createElement("b",{style:{color:this.state.is_temp_assign?"red":"white"}},this.state.is_temp_assign?"WILL NOT BE":"WILL BE")," communicated about this reassignment",this.state.is_temp_assign?".":" with a SMS template as below."),!this.state.is_temp_assign&&this.state.reason_for_reassign&&r.a.createElement("p",{className:"form-group text-white text-justify"},"SMS template : ",r.a.createElement("span",{className:"font-italic"},this.state.sms_temp))))),r.a.createElement("div",{style:{marginTop:"20px"}},r.a.createElement("button",{type:"button",className:"btn btn-info rm_territory_assign_btn",style:{borderRadius:"10px"},onClick:function(){return e.territory_Assign("by_rm")}},"Assign"))):""))),this.state.temp_reassign&&r.a.createElement(r.a.Fragment,null," ",console.log("this.state.customer_data.length",this.state.customer_data.length),this.state.customer_data.length>0&&this.state.resp_active_status&&r.a.createElement("div",{className:"d-flex justify-content-center"},r.a.createElement("div",{className:"form-group col-md-4 ",style:{marginTop:"25px"}},r.a.createElement("select",{id:"from_acc_id",className:"form-control",required:"required",style:{marginTop:"35px"},onChange:function(t){return e.onchange_Reassignhandler(t,"temp_assign")}},r.a.createElement("option",null,"Temporary Assigned RM"),this.state.customer_data.map(function(e,t){return r.a.createElement(r.a.Fragment,null,r.a.createElement("option",null," ",e.rm_name))})),r.a.createElement("select",{id:"from_acc_id",className:"form-control",required:"required",style:{margin:"30px 0px 5px 0px"},onChange:function(t){return e.onchange_Reassignhandler(t,"to_rm_id")}},r.a.createElement("option",null,"Assign To"),this.state.flow_rel_mgr_dd),this.state.from_assign_rmName&&r.a.createElement("div",{className:"form-group "},r.a.createElement("label",{className:"text-white",style:{marginTop:"16px"}},"Reason for reassignment"),r.a.createElement("div",{className:"d-flex justify-content-center"},r.a.createElement("div",{class:"form-check"},r.a.createElement("input",{class:"form-check-input form-check-input-reassignment",type:"radio",name:"flexRadioDefault",id:"flexRadioDefault9",value:this.state.reason_for_reassign,onChange:function(t){return e.onchange_ReasonForReassignhandler(t,"rm_has_resigned")}}),r.a.createElement("label",{class:"form-check-label",for:"flexRadioDefault9",style:{fontSize:"13px"}},this.state.from_assign_rmName," has resigned")),r.a.createElement("div",{class:"form-check",style:{marginLeft:"20px"}},r.a.createElement("input",{class:"form-check-input form-check-input-reassignment",type:"radio",name:"flexRadioDefault",id:"flexRadioDefault10",value:this.state.reason_for_reassign,onChange:function(t){return e.onchange_ReasonForReassignhandler(t,"other_reason")}}),r.a.createElement("label",{class:"form-check-label",for:"flexRadioDefault10",style:{fontSize:"13px"}},"Other reason"))),r.a.createElement("div",null,r.a.createElement("p",{className:"form-group text-white text-center",style:{marginTop:"20px"}},"Note : Customers  WILL BE communicated about this reassignment with an SMS template as below."),this.state.reason_for_reassign&&r.a.createElement("p",{className:"form-group text-white text-justify"},"SMS template : ",r.a.createElement("span",{className:"font-italic"},this.state.sms_temp)))),r.a.createElement("div",{className:"d-flex justify-content-around",style:{alignItems:"center",maxHeight:"140px"}},r.a.createElement("button",{type:"button",className:"btn btn-info text-center",style:{borderRadius:"10px"},onClick:function(){return e.territory_Assign("temp_assign")}},"Assign")))),this.state.resp_active_status&&this.state.customer_data.length<=0&&r.a.createElement("div",{className:"d-flex justify-content-center"},r.a.createElement("h2",{className:"text-white",style:{marginTop:"50px"}},"Currently there is no temporary RM assignment.")))),r.a.createElement(md.a,{eventKey:"By Customer",title:"By Customer"},r.a.createElement("div",{className:"d-flex justify-content-center align-items-center",style:{marginTop:"50px"}},r.a.createElement("div",{className:"col-md-5"},r.a.createElement("div",{className:"form-group d-flex"},r.a.createElement("label",{className:"md-label-floating",style:{fontSize:"12px"}},"Cust Name / Cust ID / Account Num / Mobile No / National ID"),r.a.createElement("input",{type:"text",className:"form-control",onChange:function(t){return e.onchange_Reassignhandler(t,"from_cust_id")}}),r.a.createElement("button",{type:"button",class:"btn btn-primary btn-sm",style:{marginLeft:"10px"},onClick:function(){return e.cust_id_SubmitHandler()}},"Search")))),this.state.loader?r.a.createElement("div",{class:"d-flex justify-content-center"},r.a.createElement("div",{class:"spinner-border text-info",role:"status"},r.a.createElement("span",{class:"sr-only"},"Loading..."))):r.a.createElement(r.a.Fragment,null,this.state.cust_id_active&&r.a.createElement("div",{className:"container"},this.state.cust_detls?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"reassign_cust_details",style:{background:"#202940",margin:"20px 85px"}},r.a.createElement("h2",{className:"text-white",style:{background:"#01062c",padding:"10px"}},"Customer Details"),r.a.createElement("div",{className:"d-flex justify-content-around",style:{padding:"25px 0px"}},r.a.createElement("p",{className:"text-white no-margin"},"Biz Name : ",this.state.cust_detls.biz_name),r.a.createElement("p",{className:"text-white  no-margin"},"Territory : ",this.state.cust_detls.territory),r.a.createElement("p",{className:"text-white  no-margin"},"RM Name : ",this.state.cust_detls.rm_name))),r.a.createElement("div",{className:"d-flex justify-content-center"},r.a.createElement("div",{className:"form-group col-5"},r.a.createElement("label",{className:"text-white",style:{marginTop:"16px"}},"Assign To"),r.a.createElement("select",{id:"from_acc_id",className:"form-control",required:"required",onChange:function(t){return e.onchange_Reassignhandler(t,"to_rm_id")}},this.state.flow_rel_mgr_dd))),r.a.createElement("div",{className:"d-flex justify-content-center"},r.a.createElement("label",{className:"text-white text-center",style:{marginTop:"16px"}},"Reason for reassignment :  "),r.a.createElement("div",{class:"form-check"},r.a.createElement("input",{class:"form-check-input form-check-input-reassignment",style:{marginLeft:"20px",marginTop:"13px"},type:"radio",name:"flexRadioDefault",id:"flexRadioDefault11",value:this.state.reason_for_reassign,onChange:function(t){return e.onchange_ReasonForReassignhandler(t,"rm_has_resigned")}}),r.a.createElement("label",{class:"form-check-label",for:"flexRadioDefault11",style:{marginLeft:"20px",marginTop:"16px",fontSize:"13px"}},this.state.cust_detls.rm_name," has resigned")),r.a.createElement("div",{class:"form-check",style:{marginLeft:"20px"}},r.a.createElement("input",{class:"form-check-input form-check-input-reassignment",style:{marginTop:"13px"},type:"radio",name:"flexRadioDefault",id:"flexRadioDefault12",value:this.state.reason_for_reassign,onChange:function(t){return e.onchange_ReasonForReassignhandler(t,"other_reason")}}),r.a.createElement("label",{class:"form-check-label",for:"flexRadioDefault12",style:{marginTop:"16px",fontSize:"13px"}},"Other reason"))),r.a.createElement("div",{className:" d-flex justify-content-center",style:{marginTop:"20px"}},r.a.createElement("p",{className:"form-group text-white text-center col-5"},"Note : Customers  WILL BE communicated about this reassignment with an SMS template as below.")),r.a.createElement("div",{className:" d-flex justify-content-center"},this.state.reason_for_reassign&&r.a.createElement("p",{className:"form-group text-white text-justify col-5"},"SMS template : ",r.a.createElement("span",{className:"font-italic"},this.state.sms_temp))),r.a.createElement("div",{className:"d-flex justify-content-around",style:{alignItems:"center",maxHeight:"140px"}},r.a.createElement("button",{type:"button",className:"btn btn-info text-center",style:{borderRadius:"10px"},onClick:function(){return e.territory_Assign("by_customer")}},"Assign"))):r.a.createElement("div",{className:"text-white text-center"},"Enter Valid custmerID "))))),r.a.createElement("div",{className:"d-flex justify-content-between territory_tittle_hr "},r.a.createElement("hr",{style:{width:"135px",border:"By Territory"===this.state.active?"0.3px solid #22cbed":"0.3px solid white"}}),r.a.createElement("hr",{style:{width:"100px",border:"By RM"===this.state.active?"0.3px solid #22cbed":"0.3px solid white"}}),r.a.createElement("hr",{style:{width:"130px",border:"By Customer"===this.state.active?"0.3px solid #22cbed":"0.3px solid white"}})))}}]),a}(ut),hd=r.a.createElement(r.a.Fragment,null,r.a.createElement(f.a,{path:"/borrower/indiv/edit/:cust_id",exact:!0,component:function(e){return r.a.createElement(To,Object.assign({mode:"view",title:"View/Edit Customer"},e))}}),r.a.createElement(f.a,{path:"/borrower/indiv/view/:cust_id",exact:!0,component:function(e){return r.a.createElement($o,Object.assign({mode:"view",title:"View Customer"},e))}}),r.a.createElement(f.a,{path:"/borrower/search",exact:!0,component:Lo}),r.a.createElement(f.a,{path:"/upload_cust_txns",exact:!0,component:function(){return r.a.createElement(rd,{mode:"create"})}})),fd=r.a.createElement(r.a.Fragment,null,r.a.createElement(f.a,{path:"/reassign",exact:!0,component:function(){return r.a.createElement(_d,null)}}),r.a.createElement(f.a,{path:"/relationship_manager/flowrlspmanager/create",exact:!0,component:function(){return r.a.createElement(ti,{mode:"create",title:"Create FLOW Relationship Manager"})}}),r.a.createElement(f.a,{path:"/relationship_manager/flowrlspmanager/view/:relationshipManager_id",exact:!0,component:function(e){return r.a.createElement(ti,Object.assign({mode:"view",title:"View/Edit Relationship Manager"},e))}}),r.a.createElement(f.a,{path:"/relationship_manager/flowrlspmanager/list",exact:!0,component:ii})),vd=r.a.createElement(r.a.Fragment,null,r.a.createElement(f.a,{path:"/relationship_manager/dprlspmanager/create",exact:!0,component:function(){return r.a.createElement(li,{mode:"create",title:"Create Account Provider Relationship Manager"})}}),r.a.createElement(f.a,{path:"/relationship_manager/dprlspmanager/view/:relationshipManager_id",exact:!0,component:function(e){return r.a.createElement(li,Object.assign({mode:"view",title:"View/Edit Relationship Manager"},e))}}),r.a.createElement(f.a,{path:"/relationship_manager/dprlspmanager/list",exact:!0,component:function(){return r.a.createElement(si,{mode:"list"})}})),gd=r.a.createElement(r.a.Fragment,null,r.a.createElement(f.a,{path:"/user/list",exact:!0,component:function(){return r.a.createElement(dd,{mode:"list"})}}),r.a.createElement(f.a,{path:"/user/create",exact:!0,component:function(){return r.a.createElement(cd,{id:"person",mode:"create",title:"Create User"})}}),r.a.createElement(f.a,{path:"/user/view/:person_id",exact:!0,component:function(e){return r.a.createElement(cd,Object.assign({id:"person",mode:"view",title:"Edit User"},e))}})),yd=r.a.createElement(r.a.Fragment,null,r.a.createElement(f.a,{path:"/fa_appl/search",exact:!0,component:Ci}),r.a.createElement(f.a,{path:"/fa_appl/view/:loan_appl_doc_id",exact:!0,component:function(e){return r.a.createElement(Ai,Object.assign({mode:"view"},e))}}),r.a.createElement(f.a,{path:"/fa_appl",exact:!0,component:function(e){return r.a.createElement(Ni,Object.assign({mode:"search"},e))}}),r.a.createElement(f.a,{path:"/fa_appl_for/:cust_id",component:function(e){return r.a.createElement(Ni,Object.assign({mode:"result"},e))}})),Ed=r.a.createElement(r.a.Fragment,null,r.a.createElement(f.a,{path:"/fa/view/:loan_doc_id",exact:!0,component:function(e){return r.a.createElement(Xi,e)}}),r.a.createElement(f.a,{path:"/fa/search",exact:!0,component:Li})),bd=a(55),wd=Object(bd.a)();function Nd(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(u.a)(e);if(t){var r=Object(u.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(m.a)(this,a)}}var xd=function(e){Object(d.a)(a,e);var t=Nd(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(e=t.call.apply(t,[this].concat(l))).handleClose=function(t){e.setState({modalBox:!1}),e.props.onClose()},e.clickAccProvider=function(t,a){console.log(a),null!=e.selectedMarket&&N("market",e.selectedMarket);["super_admin","ops_admin","market_admin","it_admin"].includes(v("role_codes"))&&(N("acc_prvdr_code",t),N("acc_prvdr_logo",a),"super_admin"!==e.roles&&"it_admin"!==e.roles||wd.push("/management-dashboard")),"select"==e.props.action?e.props.onSelect():"change"==e.props.action&&window.location.reload("/")},e.clickMarket=function(t){e.selectedMarket=e.market_list[t.target.id];var a={country_code:e.selectedMarket.country_code,time_zone:e.selectedMarket.time_zone,status:null};Ue(a).then(function(t){t&&("success"===t.status?x(t.data.master_data):alert(t.message+"\n"+JSON.stringify(t.data)),e.list_acc_prvdr_api(a))})},e.list_account_provider=function(t,a){console.log(a);var n=a.list.map(function(t,a){return r.a.createElement("ul",{key:a},r.a.createElement("div",{className:"row"},r.a.createElement(ee.a,{to:"#"},r.a.createElement(Gn,{file_name:"t_"+t.acc_provider_logo,entity:"acc_prvdr",entity_code:t.acc_prvdr_code,country_code:t.country_code}),r.a.createElement("a",{className:"linkText ml-10",onClick:e.clickAccProvider.bind(Object(i.a)(e),t.acc_prvdr_code,t.acc_provider_logo),variant:"primary"},t.name))))});e.setState({country_code:t,acc_prvdr_links:n,market_style:"disable_div"})},e}return Object(o.a)(a,[{key:"componentWillMount",value:function(){var e=this;this.market_list=v("market_list");var t=v("market");if(t&&("select"==this.props.action||"acc_prvdr"==this.props.toChange||"acc_prvdr_only"==this.props.toChange)){this.setState({country_code:t.country_code,market_style:"disable_div"});var a={country_code:t.country_code,time_zone:t.time_zone,status:""};a=ue(a),this.list_acc_prvdr_api(a)}var n=null;"acc_prvdr_only"!=this.props.toChange&&(n=this.market_list.map(function(t,a){return r.a.createElement("ul",{key:a},r.a.createElement("div",{className:"row"},r.a.createElement(ee.a,{to:"#"},r.a.createElement(ae.a,{name:t.country_code,format:"png",pngSize:32,alt:t.country,basePath:"/img/flags"}),"\xa0",r.a.createElement("a",{className:"linkText ml-10",onClick:e.clickMarket.bind(e),variant:"primary",id:a},t.country," (",t.country_code,")"))))})),"acc_prvdr_only"==this.props.toChange||"acc_prvdr"==this.props.toChange?this.toChangeStr="account provider":"market"==this.props.toChange&&(this.toChangeStr="market / account provider");var l=!1;"change"==this.props.action&&(l=!0),this.setState({marketLinks:n,modalBox:!0,showX:l})}},{key:"list_acc_prvdr_api",value:function(e){var t=this;_r(Object(X.a)({},e,{status:"enabled",biz_account:!0})).then(function(a){a&&"success"===a.status&&(console.log(a.data),t.list_account_provider(e.country_code,a.data))})}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(rt.a,{show:this.state.modalBox,onHide:this.handleClose},r.a.createElement(rt.a.Header,null,r.a.createElement(rt.a.Title,{style:{fontSize:22}},"Hello User!"),this.state.showX&&r.a.createElement("button",{type:"button",onClick:this.handleClose,className:"close","aria-label":"Close"},r.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),r.a.createElement(rt.a.Body,null,r.a.createElement("h4",{className:"no-margin text-center",style:{fontSize:18}},"Please select the ",this.toChangeStr," you would like to administrate."),"market"==this.props.toChange&&r.a.createElement(ka.a,null,r.a.createElement(ka.a.Header,null,"Choose Market"),r.a.createElement(ka.a.Body,{className:this.state.market_style},this.state.marketLinks)),this.state.country_code&&r.a.createElement(ka.a,null,r.a.createElement(ka.a.Header,null,"Choose Account Provider from ",r.a.createElement(ae.a,{name:this.state.country_code,format:"png",pngSize:24,alt:this.state.country_code,basePath:"/img/flags"}),r.a.createElement("b",null," ",this.state.country_code)),r.a.createElement(ka.a.Body,null,this.state.acc_prvdr_links)))))}}]),a}(r.a.Component);function Cd(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(u.a)(e);if(t){var r=Object(u.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(m.a)(this,a)}}var kd=function(e){Object(d.a)(a,e);var t=Cd(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={toSelectMarket:!1},e}return Object(o.a)(a,[{key:"server_time",value:function(e){var t=this;return Me({country_code:this.country_code,time_zone:e}).then(function(e){if(!e)return!1;if("success"===e.status){var a=new Date(e.server_time_db);t.setState({date:a})}})}},{key:"componentWillMount",value:function(){var e=this,t=v("market");this.country_code=t.country_code,this.acc_prvdr_code=g("acc_prvdr_code"),this.app_version=v("app_version"),this.user_name=v("user_name"),this.prv=v("privileges"),this.roles=v("role_codes"),this.acc_prvdr_logo=g("acc_prvdr_logo"),Object.keys(this.prv).map(function(t){var a=e.prv[t].split(",");e[t]={},a.map(function(a){e[t][a]=!0})})}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"sidebar sidebar-rewidth","data-color":"purple","data-background-color":"default"},r.a.createElement("div",{class:"logo"},r.a.createElement(ee.a,{to:"/",className:"simple-text logo-mini"},r.a.createElement("img",{src:"/icon_new.png",width:"34"})),r.a.createElement(ee.a,{to:"/",className:"simple-text logo-normal"},r.a.createElement("img",{src:"/logo_white_new.png",width:"100"}))),r.a.createElement("div",{className:"sidebar-wrapper sidebar-wrapper-rewidth"},r.a.createElement("div",{className:"user"},r.a.createElement("div",{className:"photo"},r.a.createElement("img",{src:"/avatar.png"})),r.a.createElement("div",{className:"user-info"},r.a.createElement("a",{"data-toggle":"collapse",href:"#collapseExample",className:"username"},r.a.createElement("span",null,"\xa0\xa0",this.user_name,r.a.createElement("br",null),"\xa0\xa0",this.roles)))),r.a.createElement("ul",{className:"nav"},"investor"!=this.roles&&r.a.createElement("li",{className:"nav-item"},r.a.createElement(ee.a,{to:"/",className:"nav-link"},r.a.createElement("i",{className:"material-icons"},"home"),r.a.createElement("p",null," Home "))),this.mgmt&&r.a.createElement(r.a.Fragment,null,E("mgmt","live_dashboard")&&r.a.createElement("li",{className:"nav-item "},r.a.createElement(ee.a,{to:"/management-dashboard",className:"nav-link"},r.a.createElement("i",{style:{marginTop:"-5px",marginLeft:"0px",padding:""}},r.a.createElement("img",{style:{width:"30px",height:"35px"},src:"/img/live-white.png"})),r.a.createElement("p",null," Live Dashboard "))),E("mgmt","monthly_dashboard")&&r.a.createElement("li",{className:"nav-item "},r.a.createElement(ee.a,{to:"/monthly-report",className:"nav-link"},r.a.createElement("i",{className:"material-icons"},"calendar_month"),r.a.createElement("p",null," Monthly Dashboard "))),E("mgmt","charts")&&r.a.createElement("li",{className:"nav-item "},r.a.createElement(ee.a,{to:"/charts",className:"nav-link"},r.a.createElement("i",{className:"material-icons"},"bar_chart"),r.a.createElement("p",null," Charts ")))),E("application","apply")&&["customer_success","customer_success_officer"].includes(this.roles)&&r.a.createElement("li",{className:"nav-item active "},r.a.createElement(ee.a,{to:"/fa_appl",className:"nav-link"},r.a.createElement("i",{className:"material-icons"},"touch_app"),r.a.createElement("p",null," Apply FA "))),r.a.createElement("li",{className:"nav-item "},r.a.createElement("a",{className:"nav-link","data-toggle":"collapse",href:"#search"},r.a.createElement("i",{className:"material-icons"},"search"),r.a.createElement("p",null," Search",r.a.createElement("b",{className:"caret"}))),r.a.createElement("div",{className:"collapse",id:"search"},r.a.createElement("ul",{className:"nav"},this.customer&&this.customer.search_list_view&&r.a.createElement("li",{className:"nav-item "},r.a.createElement("a",{className:"nav-link",href:"/borrower/search"},r.a.createElement("span",{className:"sidebar-normal"}," Search Customer "))),this.loan&&this.loan.search_list_view&&r.a.createElement("li",{className:"nav-item "},r.a.createElement("a",{className:"nav-link",href:"/fa/search"},r.a.createElement("span",{className:"sidebar-normal"}," Search Float Advance "))),this.application&&this.application.search_list_view&&r.a.createElement("li",{className:"nav-item "},r.a.createElement("a",{className:"nav-link",href:"/fa_appl/search"},r.a.createElement("span",{className:"sidebar-normal"}," Search FA Applications "))),this.field_visit&&(this.field_visit.all_search||this.field_visit.self_search)&&r.a.createElement("li",{className:"nav-item "},r.a.createElement("a",{className:"nav-link",href:"/field_visit/search"},r.a.createElement("span",{className:"sidebar-normal"}," Search Customer Visit "))),this.call_log&&(this.call_log.all_search||this.call_log.self_search)&&r.a.createElement("li",{className:"nav-item "},r.a.createElement("a",{className:"nav-link",href:"/call_log/search"},r.a.createElement("span",{className:"sidebar-normal"}," Search Call Log "))),E("lead","search")&&r.a.createElement("li",{className:"nav-item "},r.a.createElement("a",{className:"nav-link",href:"/lead/search"},r.a.createElement("span",{className:"sidebar-normal"}," Search Lead ")))))),E("cs_mgnt","cs_rosters")&&r.a.createElement("li",{className:"nav-item "},r.a.createElement("a",{className:"nav-link","data-toggle":"collapse",href:"#cs_management"},r.a.createElement("p",null," CS Management",r.a.createElement("b",{className:"caret"}))),r.a.createElement("div",{className:"collapse",id:"cs_management"},r.a.createElement("ul",{className:"nav"},r.a.createElement("li",{className:"nav-item "},r.a.createElement("a",{className:"nav-link",href:"/cs_management/cs_rosters"},r.a.createElement("span",{className:"sidebar-normal"}," CS Rosters ")))))),E("biz_ops","reports")&&r.a.createElement("li",{className:"nav-item "},r.a.createElement("a",{className:"nav-link","data-toggle":"collapse",href:"#biz_ops"},r.a.createElement("i",{className:"material-icons"}),r.a.createElement("p",null," Biz Ops",r.a.createElement("b",{className:"caret"}))),r.a.createElement("div",{className:"collapse",id:"biz_ops"},r.a.createElement("ul",{className:"nav"},r.a.createElement("li",{className:"nav-item "},r.a.createElement("a",{className:"nav-link",href:"/stmt_imports/search"},r.a.createElement("span",{className:"sidebar-normal"}," Search Statement Imports "))),r.a.createElement("li",{className:"nav-item "},r.a.createElement("a",{className:"nav-link",href:"/sms_logs"},r.a.createElement("span",{className:"sidebar-normal"}," Search SMS logs"))),r.a.createElement("li",{className:"nav-item "},r.a.createElement("a",{className:"nav-link",href:"/report/sms_report"},r.a.createElement("span",{className:"sidebar-normal"}," SMS Report ")))))),this.report&&r.a.createElement("li",{className:"nav-item "},r.a.createElement("a",{className:"nav-link","data-toggle":"collapse",href:"#reports"},r.a.createElement("i",{className:"material-icons"}),r.a.createElement("p",null," Reports",r.a.createElement("b",{className:"caret"}))),r.a.createElement("div",{className:"collapse",id:"reports"},r.a.createElement("ul",{className:"nav"},this.report.flow_kpi_dashboard&&r.a.createElement(r.a.Fragment,null,this.report.risk_category&&r.a.createElement("li",{className:"nav-item "},r.a.createElement("a",{className:"nav-link",href:"/report/risk_report"},r.a.createElement("span",{className:"sidebar-normal"}," Risk Category Report "))),this.report.lead_conversion&&r.a.createElement("li",{className:"nav-item "},r.a.createElement("a",{className:"nav-link",href:"/report/lead_conversion"},r.a.createElement("span",{className:"sidebar-normal"}," Lead Conversion Report")))),this.report.product_takeup&&r.a.createElement("li",{className:"nav-item "},r.a.createElement("a",{className:"nav-link",href:"/report/product_takeup"},r.a.createElement("span",{className:"sidebar-normal"}," Product Takeup Report "))),this.report.daily_activity&&r.a.createElement("li",{className:"nav-item "},r.a.createElement("a",{className:"nav-link",href:"/report/daily_activity"},r.a.createElement("span",{className:"sidebar-normal"}," Daily Activity Report "))),this.report.portfolio_quality&&r.a.createElement("li",{className:"nav-item "},r.a.createElement("a",{className:"nav-link",href:"/report/portfolio_quality"},r.a.createElement("span",{className:"sidebar-normal"}," Portfolio Quality "))),this.report.capital_funds&&r.a.createElement("li",{className:"nav-item "},r.a.createElement("a",{className:"nav-link",href:"/report/capital_funds"},r.a.createElement("span",{className:"sidebar-normal"}," Capital Funds "))),this.report.risk_portfolio&&r.a.createElement("li",{className:"nav-item "},r.a.createElement("a",{className:"nav-link",href:"/portfolio_at_risk"},r.a.createElement("span",{className:"sidebar-normal"}," Portfolio at Risk (GDS) "))),this.report.cust_performance&&r.a.createElement("li",{className:"nav-item "},r.a.createElement("a",{className:"nav-link",href:"/customer_performance"},r.a.createElement("span",{className:"sidebar-normal"}," Customer Performance (GDS) "))),this.report.os_advance&&r.a.createElement("li",{className:"nav-item "},r.a.createElement("a",{className:"nav-link",href:"/outstanding_advances"},r.a.createElement("span",{className:"sidebar-normal"}," Outstanding Advances (GDS) "))),E("report","mgmt_dashboard_live")&&r.a.createElement(r.a.Fragment,null,r.a.createElement("li",{className:"nav-item "},r.a.createElement("a",{className:"nav-link",href:"/management-dashboard"},r.a.createElement("span",{className:"sidebar-normal"}," Management Dashboard "))),r.a.createElement("li",{className:"nav-item "},r.a.createElement("a",{className:"nav-link",href:"/charts"},r.a.createElement("span",{className:"sidebar-normal"}," Charts ")))),E("report","mgmt_dashboard_monthly")&&r.a.createElement("li",{className:"nav-item "},r.a.createElement("a",{className:"nav-link",href:"/monthly-report"},r.a.createElement("span",{className:"sidebar-normal"}," Monthly Report ")))))),E("cust","raised_complaints")&&r.a.createElement("li",{className:"nav-item "},r.a.createElement(ee.a,{to:"/complaint_lists",className:"nav-link"},r.a.createElement("p",null,"  Complaints "))),(E("rm_mgnt","rm_target")||E("rm_mgnt","rm_assign"))&&r.a.createElement("li",{className:"nav-item "},r.a.createElement("a",{className:"nav-link","data-toggle":"collapse",href:"#assign"},r.a.createElement("i",{className:"material-icons"}),r.a.createElement("p",null," RM Management",r.a.createElement("b",{className:"caret"}))),r.a.createElement("div",{className:"collapse",id:"assign"},r.a.createElement("ul",{className:"nav"},r.a.createElement("li",{className:"nav-item "},r.a.createElement("a",{className:"nav-link",href:"/assign/rm_target"},r.a.createElement("span",{className:"sidebar-normal"}," RM Targets ")))),r.a.createElement("ul",{className:"nav"},this.report.rm_report&&r.a.createElement("li",{className:"nav-item "},r.a.createElement("a",{className:"nav-link",href:"/report/rm_report"},r.a.createElement("span",{className:"sidebar-normal"},"RM Wise Repayment Report")))),r.a.createElement("ul",{className:"nav"},r.a.createElement("li",{className:"nav-item "},r.a.createElement("a",{className:"nav-link",href:"/reassign"},r.a.createElement("span",{className:"sidebar-normal"}," RM Reassignment ")))))),this.report&&this.report.daily_activity_admin&&r.a.createElement("li",{className:"nav-item "},r.a.createElement("a",{className:"nav-link","data-toggle":"collapse",href:"#operations"},r.a.createElement("i",{className:"material-icons"}),r.a.createElement("p",null," Daily Operations",r.a.createElement("b",{className:"caret"}))),r.a.createElement("div",{className:"collapse",id:"operations"},r.a.createElement("ul",{className:"nav"},r.a.createElement("li",{className:"nav-item "},r.a.createElement("a",{className:"nav-link",href:"/report/overdue_fa_repayments"},r.a.createElement("span",{className:"sidebar-normal"}," Overdue FA Repayments "))),r.a.createElement("li",{className:"nav-item "},r.a.createElement("a",{className:"nav-link",href:"/report/daily_visits"},r.a.createElement("span",{className:"sidebar-normal"}," Daily Visits "))),r.a.createElement("li",{className:"nav-item "},r.a.createElement("a",{className:"nav-link",href:"/report/daily_agreements"},r.a.createElement("span",{className:"sidebar-normal"}," Daily Agreements ")))))),E("application","list_pre_appr")&&r.a.createElement("li",{className:"nav-item "},r.a.createElement("a",{className:"nav-link","data-toggle":"collapse",href:"#pre_appr"},r.a.createElement("i",{className:"material-icons"}),r.a.createElement("p",null," Customer Filters",r.a.createElement("b",{className:"caret"}))),r.a.createElement("div",{className:"collapse",id:"pre_appr"},r.a.createElement("ul",{className:"nav"},r.a.createElement("li",{className:"nav-item "},r.a.createElement("a",{className:"nav-link",href:"/pre_appr/list"},r.a.createElement("span",{className:"sidebar-normal"}," Pre-approved Customers "))))),r.a.createElement("div",{className:"collapse",id:"pre_appr"},r.a.createElement("ul",{className:"nav"},r.a.createElement("li",{className:"nav-item "},r.a.createElement("a",{className:"nav-link",href:"/active_cust_wo_fa/list"},r.a.createElement("span",{className:"sidebar-normal"}," Active Customers without FA "))))),r.a.createElement("div",{className:"collapse",id:"pre_appr"},r.a.createElement("ul",{className:"nav"},r.a.createElement("li",{className:"nav-item "},r.a.createElement("a",{className:"nav-link",href:"/aggrement_renewal/list"},r.a.createElement("span",{className:"sidebar-normal"},"  Agreement  Renewal ")))))),E("lead","create")&&r.a.createElement("li",{className:"nav-item "},r.a.createElement("a",{className:"nav-link","data-toggle":"collapse",href:"#create_lead"},r.a.createElement("i",{className:"material-icons"}),r.a.createElement("p",null," Lead",r.a.createElement("b",{className:"caret"}))),r.a.createElement("div",{className:"collapse",id:"create_lead"},r.a.createElement("ul",{className:"nav"},r.a.createElement("li",{className:"nav-item "},r.a.createElement("a",{className:"nav-link",href:"/lead/create"},r.a.createElement("span",{className:"sidebar-normal"}," Create Lead ")))))),this.recon&&r.a.createElement("li",{className:"nav-item "},r.a.createElement("a",{className:"nav-link","data-toggle":"collapse",href:"#recon"},r.a.createElement("i",{className:"material-icons"}),r.a.createElement("p",null," Flow's Float Accounts",r.a.createElement("b",{className:"caret"}))),r.a.createElement("div",{className:"collapse",id:"recon"},r.a.createElement("ul",{className:"nav"},this.recon.search&&r.a.createElement("li",{className:"nav-item "},r.a.createElement("a",{className:"nav-link",href:"/lender/accounts"},r.a.createElement("span",{className:"sidebar-normal"}," Statement "))),this.recon.search&&r.a.createElement("li",{className:"nav-item "},r.a.createElement("a",{className:"nav-link",href:"/unknown_txns"},r.a.createElement("span",{className:"sidebar-normal"}," Unknown Txns "))),this.recon.manual_capture_txns&&r.a.createElement("li",{className:"nav-item "},r.a.createElement("a",{className:"nav-link",href:"/manual_capture_txns"},r.a.createElement("span",{className:"sidebar-normal"}," Manual Capture Txns ")))))),this.product&&r.a.createElement("li",{className:"nav-item "},r.a.createElement("a",{className:"nav-link","data-toggle":"collapse",href:"#product"},r.a.createElement("i",{className:"material-icons"}),r.a.createElement("p",null," Product",r.a.createElement("b",{className:"caret"}))),r.a.createElement("div",{className:"collapse",id:"product"},r.a.createElement("ul",{className:"nav"},this.product.create&&r.a.createElement("li",{className:"nav-item "},r.a.createElement("a",{className:"nav-link",href:"/fa_product/create"},r.a.createElement("span",{className:"sidebar-normal"}," Add Product "))),this.product.search_list_view&&r.a.createElement("li",{className:"nav-item "},r.a.createElement("a",{className:"nav-link",href:"/fa_product/list"},r.a.createElement("span",{className:"sidebar-normal"}," Search Products ")))))),this.score&&r.a.createElement("li",{className:"nav-item "},r.a.createElement("a",{className:"nav-link","data-toggle":"collapse",href:"#score"},r.a.createElement("i",{className:"material-icons"}),r.a.createElement("p",null," Score",r.a.createElement("b",{className:"caret"}))),r.a.createElement("div",{className:"collapse",id:"score"},r.a.createElement("ul",{className:"nav"},this.score.list&&r.a.createElement("li",{className:"nav-item "},r.a.createElement("a",{className:"nav-link",href:"/score_models"},r.a.createElement("span",{className:"sidebar-normal"}," Score Models "))),this.score.factor_list&&r.a.createElement("li",{className:"nav-item "},r.a.createElement("a",{className:"nav-link",href:"/score_factors"},r.a.createElement("span",{className:"sidebar-normal"}," Score Factors "))),this.score.cust_txn&&r.a.createElement("li",{className:"nav-item "},r.a.createElement("a",{className:"nav-link",href:"/upload_cust_txns"},r.a.createElement("span",{className:"sidebar-normal"}," Upload Customer Transaction ")))))),this.master_agreement&&r.a.createElement("li",{className:"nav-item "},r.a.createElement("a",{className:"nav-link","data-toggle":"collapse",href:"#agreement"},r.a.createElement("i",{className:"material-icons"}),r.a.createElement("p",null," Agreement",r.a.createElement("b",{className:"caret"}))),r.a.createElement("div",{className:"collapse",id:"agreement"},r.a.createElement("ul",{className:"nav"},this.master_agreement.create&&r.a.createElement("li",{className:"nav-item "},r.a.createElement("a",{className:"nav-link",href:"/agreement/create"},r.a.createElement("span",{className:"sidebar-normal"}," Create Master Agreement "))),this.master_agreement.list_view&&r.a.createElement("li",{className:"nav-item "},r.a.createElement("a",{className:"nav-link",href:"/agreement/list"},r.a.createElement("span",{className:"sidebar-normal"}," List Master Agreement")))))),(this.market||this.acc_prvdr||this.flow_rel_mgr||this.lender)&&r.a.createElement("li",{className:"nav-item "},r.a.createElement("a",{className:"nav-link","data-toggle":"collapse",href:"#market"},r.a.createElement("i",{className:"material-icons"}),r.a.createElement("p",null,"  FLOW (Market)",r.a.createElement("b",{className:"caret"}))),r.a.createElement("div",{className:"collapse",id:"market"},r.a.createElement("ul",{className:"nav"},this.market&&this.market.create&&r.a.createElement("li",{className:"nav-item "},r.a.createElement("a",{className:"nav-link",href:"/market/create"},r.a.createElement("span",{className:"sidebar-normal"}," Create Market "))),this.market&&this.market.list_view&&r.a.createElement("li",{className:"nav-item "},r.a.createElement("a",{className:"nav-link",href:"/market/list"},r.a.createElement("span",{className:"sidebar-normal"}," List Markets"))),this.user&&this.user.create&&r.a.createElement("li",{className:"nav-item "},r.a.createElement("a",{className:"nav-link",href:"/user/create"},r.a.createElement("span",{className:"sidebar-normal"}," Create FLOW User"))),this.user&&this.user.list_view&&r.a.createElement("li",{className:"nav-item "},r.a.createElement("a",{className:"nav-link",href:"/user/list"},r.a.createElement("span",{className:"sidebar-normal"}," List FLOW Users"))),this.lender&&this.lender.create&&r.a.createElement("li",{className:"nav-item "},r.a.createElement("a",{className:"nav-link",href:"/lender/create"},r.a.createElement("span",{className:"sidebar-normal"}," Create Lender"))),this.lender&&this.lender.list_view&&r.a.createElement("li",{className:"nav-item "},r.a.createElement("a",{className:"nav-link",href:"/lender/list"},r.a.createElement("span",{className:"sidebar-normal"}," List Lenders"))),this.acc_prvdr&&this.acc_prvdr.create&&r.a.createElement("li",{className:"nav-item "},r.a.createElement("a",{className:"nav-link",href:"/account_provider/create"},r.a.createElement("span",{className:"sidebar-normal"}," Create Account Provider"))),this.acc_prvdr&&this.acc_prvdr.list_view&&r.a.createElement("li",{className:"nav-item "},r.a.createElement("a",{className:"nav-link",href:"/account_provider/list"},r.a.createElement("span",{className:"sidebar-normal"}," List Account Providers")))))),this.master_data&&r.a.createElement("li",{className:"nav-item "},r.a.createElement("a",{className:"nav-link","data-toggle":"collapse",href:"#master_data"},r.a.createElement("i",{className:"material-icons"}),r.a.createElement("p",null," Master Data",r.a.createElement("b",{className:"caret"}))),r.a.createElement("div",{className:"collapse",id:"master_data"},r.a.createElement("ul",{className:"nav"},this.master_data.create&&r.a.createElement("li",{className:"nav-item "},r.a.createElement("a",{className:"nav-link",href:"/master_data/add"},r.a.createElement("span",{className:"sidebar-normal"}," Add Master Data "))),this.data_key.create&&r.a.createElement("li",{className:"nav-item "},r.a.createElement("a",{className:"nav-link",href:"/master_data_key/add"},r.a.createElement("span",{className:"sidebar-normal"}," Add Master Data Key"))),this.data_key.list_view&&r.a.createElement("li",{className:"nav-item "},r.a.createElement("a",{className:"nav-link",href:"/master_data_key/list"},r.a.createElement("span",{className:"sidebar-normal"}," List Master Data Keys")))))),r.a.createElement("li",{className:"nav-item"},r.a.createElement(ee.a,{to:"/logout",className:"nav-link"},r.a.createElement("i",{class:"fa-solid fa-arrow-right-from-bracket"}),r.a.createElement("p",null," Logout "))),["it_admin","app_support","super_admin"].includes(this.roles)&&r.a.createElement("li",{className:"nav-item"},r.a.createElement(ee.a,{to:"/whatsapp",className:"nav-link"},r.a.createElement("i",{class:"fab fa-whatsapp"}),r.a.createElement("p",null," Whatsapp Services ")))))))}}]),a}(ot),Sd=a(99),Od=a(50),Ad=a(118),jd=a(101);function Rd(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(u.a)(e);if(t){var r=Object(u.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(m.a)(this,a)}}var Dd=function(e){Object(d.a)(a,e);var t=Rd(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(e=t.call.apply(t,[this].concat(l))).state={cust_token:!1,modalBox:!1,capture_payment:!1,cust_profile:"hide_div",repayment_style:"disable_div",loan_type:"",loan_data:{},call_log:{},cust_data:{},checkin_req:{},timer_sec:0,timer:"",timer_min:0,reviewed:0,opacity:""},e.handle_custID_change=function(t){e.setState({cust_token:t.target.value})},e.refresh_timer=function(){setInterval(function(){return e.tick()},1e3)},e.handleIncomingCall=function(){e.setState({modalBox:!0}),e.server_time(),0==e.state.timer_sec?e.refresh_timer():e.setState({timer_sec:0,timer_min:0})},e.handleClose=function(t){e.setState({modalBox:!1,cust_profile:"hide_div",cust_data:{}})},e.CaptureModalClose=function(t){e.setState({capture_payment:!1,opacity:""})},e.submit_capture_payment=function(t){if(0!=window.confirm("Are you sure capture the payment?")){var a={loan_doc_id:e.state.selected_payment.loan_doc_id,acc_stmt_txn_id:e.state.selected_payment.acc_stmt_txn_id,amount:e.state.selected_payment.amount};Sn(e.req(a)).then(function(t){if(!t)return null;"success"===t.status?(e.setState({opacity:""}),alert("Payment captured successfully"),e.handleValidateCustomer(),e.CaptureModalClose()):alert(t.message)})}},e.handleCallLog=function(t,a,n){var r=null;if("incoming"==t?r=window.confirm("Are you sure right now you have received a call from the ".concat(n," and speaking with the customer ?")):"outgoing"==t&&(r=window.confirm("Are you sure right now you have dialed ".concat(n," and speaking with the customer ?"))),0!=r){var l=e.state.call_log;l.cust_id=a,l.call_type=t,Gl(e.req({call_log:l})).then(function(a){if(e.resp(a),a)if("success"===a.status){var n=a.data,r=!0;"lastcall"==n.action&&(r=window.confirm(n.message)),r&&n.call_log_id&&window.open("/compl_call_log/"+n.cust_id+"/"+n.call_log_id+"?type="+t,"_blank")}else alert(a.message+"\n"+JSON.stringify(a.data))})}},e.handleCheckIn=function(t,a,n){if(!1!==window.confirm("Are you sure, right now you are at ".concat(n,"'s business location and would like to check-in?"))){var r=e.state.checkin_req;r.cust_id=a,mn(e.req({checkin_req:r})).then(function(a){if(e.resp(a),a)if("success"===a.status){var n=a.data,r=!0;"lastvisit"==n.action&&(r=window.confirm(n.message)),r&&n.visit_id&&window.open("/checkout/"+n.cust_id+"/"+n.visit_id+"?type="+t,"_blank")}else alert(a.message+"\n"+JSON.stringify(a.data))})}},e.handleValidateCustomer=function(t){t&&(e.target=t.target.id);var a=e.state.cust_token;if(!a)return alert("Please Enter Customer ID / Mobile Number / National ID"),!1;ba(e.req({cust_token:a,incl_profile:!0},!0)).then(function(t){e.resp(t),t&&("success"===t.status?t.data&&t.data.cust_id&&("log_visit"==e.target?e.handleCheckIn(e.target,t.data.cust_id,t.data.cust_name):"incoming"==e.target||"outgoing"==e.target?e.handleCallLog(e.target,t.data.cust_id,t.data.cust_name):"apply_fa"==e.target?window.open("/fa_appl_for/".concat(t.data.cust_id),"_blank"):"view_profile"==e.target&&window.open("/borrower/indiv/view/".concat(t.data.cust_id),"_blank")):alert(t.message+"\n"+JSON.stringify(t.data)))})},e.RepaymentSummaryModal=function(t,a){return t?r.a.createElement(rt.a,{show:e.state.capture_payment,onHide:e.CaptureModalClose,size:"l"},r.a.createElement(rt.a.Header,{closeButton:!0,show:e.state.capture_payment,onHide:e.CaptureModalClose},r.a.createElement(rt.a.Title,null,"Capture FA Payment (",t.loan_doc_id,")")),r.a.createElement(rt.a.Body,null,r.a.createElement("div",{className:"container"},r.a.createElement("p",null,"Review the below payment data by clicking over them. "),r.a.createElement("form",null,r.a.createElement("div",{className:"rule-form-group form-group row reset-margin"},r.a.createElement("label",{for:"",className:"col-sm-4 label__name reset-padding"},"Account txn ID"),r.a.createElement("div",{className:"col-sm-8 reset-padding"},r.a.createElement("div",null,r.a.createElement("input",{type:"checkbox",id:"toggle_1",className:"toggle visually-hidden",onChange:e.handleReviewChange,value:"1"}),r.a.createElement("label",{className:"select_toogle",for:"toggle_1"},t.stmt_txn_id," "),r.a.createElement("div",{className:"control-me"})))),r.a.createElement("div",{className:"rule-form-group form-group row reset-margin"},r.a.createElement("label",{for:"",className:"col-sm-4 label__name reset-padding"},"Txn description"),r.a.createElement("div",{className:"col-sm-8 reset-padding"},r.a.createElement("div",null,r.a.createElement("input",{type:"checkbox",id:"toggle_2",className:"toggle visually-hidden",onChange:e.handleReviewChange,value:"1"}),r.a.createElement("label",{className:"select_toogle",for:"toggle_2"},t.descr),r.a.createElement("div",{className:"control-me"})))),r.a.createElement("div",{className:"rule-form-group form-group row reset-margin"},r.a.createElement("label",{for:"",className:"col-sm-4 label__name reset-padding"},"Customer"),r.a.createElement("div",{className:"col-sm-8 reset-padding"},r.a.createElement("div",null,r.a.createElement("input",{type:"checkbox",id:"toggle_3",className:"toggle visually-hidden",onChange:e.handleReviewChange,value:"1"}),r.a.createElement("label",{className:"select_toogle",for:"toggle_3"},t.cust_name," | ",t.biz_name),r.a.createElement("div",{className:"control-me"})))),r.a.createElement("div",{className:"rule-form-group form-group row reset-margin"},r.a.createElement("label",{for:"",className:"col-sm-4 label__name reset-padding"},"Cust ID"),r.a.createElement("div",{className:"col-sm-8 reset-padding"},r.a.createElement("div",null,r.a.createElement("input",{type:"checkbox",id:"toggle_4",className:"toggle visually-hidden",onChange:e.handleReviewChange,value:"2"}),r.a.createElement("label",{className:"select_toogle",for:"toggle_4"},t.cust_id," | ",t.acc_number),r.a.createElement("div",{className:"control-me"})))),r.a.createElement("div",{className:"rule-form-group form-group row reset-margin"},r.a.createElement("label",{for:"",className:"col-sm-4 label__name reset-padding"},"Payment amount"),r.a.createElement("div",{className:"col-sm-8 reset-padding"},r.a.createElement("div",null,r.a.createElement("input",{type:"checkbox",id:"toggle_5",className:"toggle visually-hidden",onChange:e.handleReviewChange,value:"3"}),r.a.createElement("label",{className:"select_toogle",for:"toggle_5"},xe(a.paid_amount,e.currency_code)),r.a.createElement("div",{className:"control-me"})))),r.a.createElement("div",{className:"rule-form-group form-group row reset-margin"},r.a.createElement("label",{for:"",className:"col-sm-4 label__name reset-padding"},"Outstanding amount"),r.a.createElement("div",{className:"col-sm-8 reset-padding"},r.a.createElement("div",null,r.a.createElement("input",{type:"checkbox",id:"toggle_6",className:"toggle visually-hidden",onChange:e.handleReviewChange,value:"3"}),r.a.createElement("label",{className:"select_toogle",for:"toggle_6"},xe(t.current_os_amount,e.currency_code)),r.a.createElement("div",{className:"control-me"})))),r.a.createElement("div",{className:"row"},r.a.createElement("label",null,r.a.createElement("input",{type:"checkbox",onChange:e.handleSMSCheckboxClick,defaultChecked:!0}),"\xa0 Send payment confirmation notification SMS")))),e.state.processing&&r.a.createElement("p",{style:{color:"red",textAlign:"right"}},e.state.processing)),r.a.createElement(rt.a.Footer,null,r.a.createElement("div",{className:"col-md-8 reset-margin reset-padding"},r.a.createElement("button",{type:"button",className:"btn btn-primary float-right mr-1 ".concat(e.state.repayment_style),onClick:e.submit_capture_payment,disable:!0},"Capture Payment "),r.a.createElement("button",{type:"button",className:"btn btn-outline-primary float-right mr-1",onClick:e.CaptureModalClose,"data-dismiss":"modal","aria-label":"Close"},"Cancel")))):null},e}return Object(o.a)(a,[{key:"tick",value:function(){0==this.state.timer_sec||0!=this.state.timer_sec?(this.setState({timer_sec:this.state.timer_sec+1}),60==this.state.timer_sec&&this.setState({timer_min:this.state.timer_min+1,timer_sec:0})):this.refresh_timer()}},{key:"render",value:function(){var e=this,t=this.state.cust_data,a=t.biz_name,n=t.cust_name,l=t.acc_number,c=t.cust_id,s=(t.cust_mobile_num,t.cust_dob,t.ongoing_loan_doc_id,t.last_loan_doc_id,this.state.loan_data),o=s.loan_principal,i=s.duration,d=s.flow_fee,m=s.due_amount,u=s.loan_doc_id,p=s.cust_acc_id,_=s.to_acc_num,h=s.lender_code,f=s.acc_prvdr_code,v=s.currency_code,g=s.due_date;s.status,s.paid_amount,s.current_os_amount,s.overdue_days,this.state.loan_type;return this.instant_disburse_loan={biz_name:a,cust_name:n,acc_number:l,loan_principal:o,duration:i,flow_fee:d,due_amount:m,loan_doc_id:u,cust_id:c,cust_acc_id:p,to_acc_num:_,lender_code:h,acc_prvdr_code:f,currency_code:v,due_date:g},r.a.createElement(r.a.Fragment,null,this.RepaymentSummaryModal(this.state.selected_payment,this.state.loan_data),r.a.createElement("div",{className:"home-menu box col-lg-5 col-md-5 text-center"},r.a.createElement("div",{className:"card card-pricing "},r.a.createElement("div",{className:"card-body"},(E("application","apply")||E("field_visit","checkin")||E("call_log","post"))&&r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",{className:"card-title"},"Quick Actions"),r.a.createElement(O.a.Control,{id:"cust_token",autocomplete:"off",placeholder:"Any Customer ID / Mobile No / National ID",onChange:function(t){e.handle_custID_change(t)}})),r.a.createElement("p",{className:"card-description"},E("application","apply")&&r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{type:"button",className:"btn btn-primary",id:"apply_fa",onClick:this.handleValidateCustomer},r.a.createElement(Od.b,{className:"mr-1",color:"white"}),"Apply FA"),r.a.createElement("button",{type:"button",className:"btn btn-primary",id:"view_profile",onClick:this.handleValidateCustomer},r.a.createElement(Ad.a,{className:"mr-1",color:"white"}),"View Profile")),E("field_visit","checkin")&&r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{id:"log_visit",type:"button",className:"btn btn-primary",disabled:this.state.calling_api,onClick:this.handleValidateCustomer},r.a.createElement(Oc.b,{className:"mr-2",color:"white"}),"Checkin")),E("call_log","post")&&r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{id:"incoming",type:"button",disabled:this.state.calling_api,className:"btn btn-secondary",onClick:this.handleValidateCustomer},r.a.createElement(jd.a,{className:"mr-1",color:"white"}),"Log Incoming Call "),r.a.createElement("button",{id:"outgoing",type:"button",className:"btn btn-secondary",disabled:this.state.calling_api,onClick:this.handleValidateCustomer},r.a.createElement(jd.b,{className:"mr-1",color:"white"}),"Log Outgoing Call")))))),r.a.createElement("div",{className:"home-menu box col-lg-3 col-md-3"},r.a.createElement("div",{className:"card card-pricing "},r.a.createElement("div",{className:"card-body"},E("home","shortcuts")&&r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",{className:"card-title"},"Shortcuts"),r.a.createElement("p",{className:"card-description text-left"},r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("h3",null," ",r.a.createElement(Sd.a,{className:"icon"}))),r.a.createElement("td",null,r.a.createElement(ee.a,{to:"/borrower/search"},"Search Customer"))),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("h3",null," ",r.a.createElement(Od.a,{className:"icon"}))),r.a.createElement("td",null,r.a.createElement(ee.a,{to:"/fa/search"},"Search FA"))),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("h3",null," ",r.a.createElement(Ma.d,{className:"icon",value:{color:"blue"}}))),r.a.createElement("td",null,r.a.createElement(ee.a,{to:"lender/accounts/todayfa"},"Today Disbursed FAs")))))))))}}]),a}(ut);function Fd(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(u.a)(e);if(t){var r=Object(u.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(m.a)(this,a)}}var Ld=function(e){Object(d.a)(a,e);var t=Fd(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={rowdatas:[],copy:[],columns:[],show_table:!1,last_import:10,refresh:!1,date:null},e.refreshList=function(){e.setState({refresh:!0}),e.drawTable()},e.handleLastImport=function(t){e.setState({last_import:t}),e.drawTable(t,"last_import")},e.handleDateChange=function(t){var a=ce()(t).format("YYYY-MM-DD");e.drawTable(a,"date")},e}return Object(o.a)(a,[{key:"componentWillMount",value:function(){this.drawTable()}},{key:"componentDidUpdate",value:function(e){e.refresh!=this.props.refresh&&this.refreshList()}},{key:"drawTable",value:function(e,t){var a=this,n={};"date"==t&&e&&this.setState({date:e}),n.date="date"==t?e:this.state.date,n.last_limit="last_import"==t?e:" ",this.server_time(this.time_zone),function(e){return P(D+"/common/stmt_imports",e)}(this.req(n)).then(function(e){a.resp(e),e&&e&&(a.setState({refresh:!1}),a.setState(function(t){return t.rowdatas=e.data}),a.setState(function(t){return t.copy=e.data}),a.setState(function(e){return e.columns=a.columndatas()}))})}},{key:"columndatas",value:function(){var e=this;return[{Header:"Network",id:"network_prvdr_code",minWidth:100,accessor:function(e){return r.a.createElement(Le,{logotype:e.network_prvdr_code})}},{Header:"Acc Number",id:"acc_number",minWidth:100,accessor:function(e){return r.a.createElement("div",{style:{height:30,width:60}},r.a.createElement("img",{className:"img-fluid",src:"/img/".concat(e.acc_prvdr_code,"_logo_color.png"),alt:e.acc_prvdr_code}),r.a.createElement(ee.a,{to:"/account/".concat(e.account_id,"/statement")},r.a.createElement("span",{className:"ml-2",style:{color:"#17a2b8"}},e.acc_number)," "))}},{Header:"Today's Imports",id:"total_imports",minWidth:100,accessor:function(e){return r.a.createElement("span",null,r.a.createElement("p",{style:{color:"#17a2b8"}},e.total_success," Imports / Avg ",e.avg_time>60?Ee(e.avg_time):"".concat(e.avg_time," Sec")))}},{Header:"Today's Failures",id:"total_failures",minWidth:100,accessor:function(e){return r.a.createElement("p",{className:"ml-5",style:{color:"#17a2b8"}},e.total_failures)}},{Header:"Today's Success %",id:"success_perc",minWidth:100,accessor:function(e){return r.a.createElement("p",{className:"ml-5",style:{color:"#17a2b8"}},e.success_perc," %")}},{Header:"Last ".concat(this.state.last_import," Imports"),id:"last_import",minWidth:100,accessor:function(t){return r.a.createElement("p",{className:"ml-5",style:{color:"#17a2b8"}},t.last_import," / ",e.state.last_import)}},{Header:"Last Import",id:"start_time",minWidth:100,accessor:function(t){return r.a.createElement("p",{style:{color:"#17a2b8"}},ye(e.state.server_time.server_time_db,t.start_time))}}]}},{key:"render",value:function(){var e=this;return r.a.createElement(ka.a,{className:"w-100"},r.a.createElement(ka.a.Header,{style:{backgroundColor:"#01062c",color:"white"}},r.a.createElement("h4",null,"Today's Statement Imports")),r.a.createElement(ka.a.Body,null,r.a.createElement("div",{className:"col-md-2 m-3"},r.a.createElement("span",null,"Date"),r.a.createElement(Ht.a,{onChange:function(t){e.handleDateChange(t)},closeOnSelect:!0,dateFormat:"DD MMM YYYY",timeFormat:!1})),r.a.createElement("div",{className:"col-md-12 "},r.a.createElement("div",{className:"col-md-10  no-padding"},r.a.createElement("ul",{className:"manDash_currencySelector mr-5 my-0 no-padding  justify-content-end align-items-center"},r.a.createElement("li",{onClick:function(){return e.handleLastImport(5)},style:{backgroundColor:5===this.state.last_import?"lightgray":""},className:"border_left"},r.a.createElement("p",{className:"no-margin"},"5")),r.a.createElement("li",{onClick:function(){return e.handleLastImport(10)},style:{backgroundColor:10===this.state.last_import?"lightgray":""}},r.a.createElement("p",{className:"no-margin"},"10")),r.a.createElement("li",{onClick:function(){return e.handleLastImport(15)},style:{backgroundColor:15===this.state.last_import?"lightgray":""}},r.a.createElement("p",{className:"no-margin"},"15")),r.a.createElement("li",{onClick:function(){return e.handleLastImport(20)},style:{backgroundColor:20===this.state.last_import?"lightgray":""}},r.a.createElement("p",{className:"no-margin"},"20")),r.a.createElement("li",{onClick:function(){return e.handleLastImport(25)},style:{backgroundColor:25===this.state.last_import?"lightgray":""}},r.a.createElement("p",{className:"no-margin"},"25")),r.a.createElement("li",{onClick:function(){return e.handleLastImport(30)},className:"border_right",style:{backgroundColor:30===this.state.last_import?"lightgray":""}},r.a.createElement("p",{className:"no-margin"},"30")))),r.a.createElement(za,{showPag:!1,defaultPageSize:20,minRow:0,row_data:void 0!==this.state.copy?this.state.copy:[],column_data:this.state.columns,resizable:!1,defaultSorted:[{id:"acc_prvdr_code"},{id:"network_prvdr_code"}]}))))}}]),a}(ut);function Pd(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(u.a)(e);if(t){var r=Object(u.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(m.a)(this,a)}}var Bd=function(e){Object(d.a)(a,e);var t=Pd(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={rowdatas:[],columndatas:[],show_table:!1},e.handleToggle=function(t){switch(t){case"Account":e.setState(function(t){return t.show_table=!e.state.show_table})}},e.takeAction=function(e,t,a){if("requires_flow_rm_approval"==t||"eligible"==t||"first_n_fas_wo_score"==t){var n=e.target.id;alert("Please approve/reject the FA from the new tab"),window.open("/fa_appl/view/"+n,"_blank")}else window.open("/borrower/indiv/view/"+a,"_blank")},e}return Object(o.a)(a,[{key:"componentWillMount",value:function(){var e=this,t={status:"pending_approval",loan_approver_id:v("user_id")};Ll(this.req({loan_appl_search_criteria:t},!0)).then(function(t){t&&t&&(e.setState(function(e){return e.rowdatas=t.data}),e.setState(function(t){return t.columndatas=e.columndatas()}))})}},{key:"sortBiz",value:function(e,t){return eo(e,t)}},{key:"sortAmt",value:function(e,t){var a=e.props.children,n=t.props.children;return $s(a,n)}},{key:"sortDate",value:function(e,t){var a=e.props.children[1],n=t.props.children[1];return ao(a,n)}},{key:"columndatas",value:function(){var e=this;return[{Header:"FA Application ID",id:"loan_appl_doc_id",sortable:!1,accessor:function(e){return e.loan_appl_doc_id}},{Header:"A/C Number",id:"acc_number",sortable:!1,accessor:function(e){return r.a.createElement(ee.a,{to:"/borrower/indiv/view/"+e.acc_number,target:"_blank"},e.acc_number)}},{Header:"Cust Name",id:"cust_name",sortable:!1,accessor:function(e){return e.cust_name}},{Header:"Cust ID",id:"cust_id",sortable:!1,accessor:function(e){return e.cust_id}},{Header:"Biz Name",id:"biz_name",sortMethod:function(t,a){return e.sortBiz(t,a)},accessor:function(e){return e.biz_name}},{Header:function(){return r.a.createElement("div",{className:"tableAmount_centerAlign"},"FA Amount")},id:"loan_principal",sortMethod:function(t,a){return e.sortAmt(t,a)},accessor:function(t){return r.a.createElement("div",{className:"tableAmount_rightAlign"},xe(t.loan_principal,e.currency_code))}},{Header:"Date",id:"loan_appl_date",sortMethod:function(t,a){return e.sortDate(t,a)},accessor:function(e){return _e(e.loan_appl_date)}},{Header:"Action",id:"cs_result_code",sortable:!1,accessor:function(e){return e.cs_result_code?"ineligible"==e.cs_result_code?"Ineligible":"requires_flow_rm_approval"==e.cs_result_code||"first_n_fas_wo_score"==e.cs_result_code?"Need Approval":"NULL":"NULL"}}]}},{key:"render",value:function(){var e=this;return r.a.createElement(kc.a,null,r.a.createElement(ka.a,null,r.a.createElement("div",{className:"card-header card-header-icon card-header-primary home_header_d-flex_at_response justify-space-between"},r.a.createElement("h4",{className:"card-title text-white d-inline-block tableHead_font title-bottom "},"FA Applications Pending Your Approval"),r.a.createElement(kc.a.Toggle,{className:"col",as:ka.a.Header,eventKey:"0",onClick:function(){return e.handleToggle("Account")}},r.a.createElement(Oc.a,{className:this.state.show_table?"arrow-icon down accordin-arrow":"arrow-icon accordin-arrow",size:"18"}))),r.a.createElement("div",{className:"card-body no-padding"},r.a.createElement(kc.a.Collapse,{eventKey:"0"},r.a.createElement(ka.a.Body,null,r.a.createElement(za,{showPag:!1,defaultPageSize:50,minRow:0,row_data:void 0!==this.state.rowdatas?this.state.rowdatas:[],column_data:this.state.columndatas,resizable:!1,defaultSorted:[{id:"loan_appl_date",desc:!0}]}))))))}}]),a}(ut);function Md(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(u.a)(e);if(t){var r=Object(u.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(m.a)(this,a)}}var Td=function(e){Object(d.a)(a,e);var t=Md(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={modalBox:!1,disable:"disable_div",disbursal_txn:{},capture_btn:"disable_div",txn_data:""},e.attempt={},e.handleDisburseClick=function(t){var a={lender_code:e.props.data.lender_code,network_prvdr_code:e.props.data.acc_prvdr_code,acc_purpose:"disbursement",status:"enabled",cust_id:e.props.data.cust_id};e.setOptionsListToStateFromAppApi("common","lender_accounts",e.req({lender_account:a}),["account_id","acc_num_disp_txt"]),e.disbursal_txn={amount:e.attempt.disbursed_amount,loan_doc_id:e.props.data.loan_doc_id,from_ac_id:e.attempt.from_acc_id,to_ac_id:e.attempt.to_acc_id,txn_date:ce()(e.props.data.attempt_time).format("YYYY-MM-DD")},e.setState({modalBox:!0})},e.handleClose=function(t){e.setState({modalBox:!1})},e.enableTxnID=function(t){var a=e.disbursal_txn;a.amount>0&&null!=a.from_ac_id&&null!=a.txn_date&&e.setState({txn_id_style:""})},e.handleSubmit=function(t){if(t.preventDefault(),window.confirm("Have you verified in the Data Provider's A/C statement if you could locate debit transaction(s) on "+_e(e.disbursal_txn.txn_date)+" for "+e.attempt.disbursed_amount+" "+e.currency_code+" related to this FA?")){console.log("DSB TXN"+JSON.stringify(e.disbursal_txn));var a=e.disbursal_txn;a.send_sms=!0,a.txn_exec_by=1,a.txn_mode="instant_disbursal",a.capture_only=!0,Nn(e.req({disbursal_txn:a})).then(function(t){e.resp(t),t&&("success"===t.status?(e.setState({modalBox:!1}),window.location.reload()):alert(t.message+"\n"+JSON.stringify(t.data)))})}},e}return Object(o.a)(a,[{key:"componentWillMount",value:function(){var e=this,t={loan_doc_id:this.props.data.loan_doc_id};(function(e){return P(D+"/loan/get_disb_attempt",e)})(this.req(t)).then(function(t){e.resp(t),e.attempt=t.data})}},{key:"handleTxnId",value:function(){var e=this,t=this.disbursal_txn.txn_id;t.length>1&&Bn(this.req({loan_doc_id:this.disbursal_txn.loan_doc_id,acc_id:this.disbursal_txn.from_ac_id,txn_id:t,mode:"debit",txn_date:this.disbursal_txn.txn_date},!0)).then(function(t){e.resp(t),t&&("success"===t.status?(e.setState({capture_btn:"disable_div",txn_data:"",txn_failed_msg:""}),t.data?t.data.hasOwnProperty("ignore_check")?e.setState({capture_btn:""}):t.data.hasOwnProperty("message")?e.setState({txn_failed_msg:t.data.message}):t.data.total_amount==e.disbursal_txn.amount?e.setState({txn_data:t.data.acc_stmt_records,capture_btn:""}):t.data.total_amount!=e.disbursal_txn.amount&&e.setState({txn_data:t.data.acc_stmt_records}):e.setState({txn_failed_msg:"Please check the transaction ID. No payment received to the account with this transaction ID."})):alert(t.message+"\n"+JSON.stringify(t.data)))})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"text-center"},r.a.createElement("div",null,r.a.createElement("input",{type:"button",className:"btn btn-primary btn-std",value:"Capture Disbursal",onClick:this.handleDisburseClick})),r.a.createElement(rt.a,{show:this.state.modalBox,onHide:this.handleClose,size:"xl"},r.a.createElement(rt.a.Header,{closeButton:!0,show:this.state.modalBox,onHide:this.handleClose},r.a.createElement(rt.a.Title,null,"FA Disbursal")),r.a.createElement(rt.a.Body,null,r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-6"},r.a.createElement("h4",null,"Float Advance ID: ",this.props.data.loan_doc_id," ")),r.a.createElement("div",{className:"col-md-6"},r.a.createElement("h4",null,"Float Advance Amount: ",Re(ft(this.attempt.disbursed_amount,this.currency_code))," "))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-6"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-5"},r.a.createElement("label",null,"Disburse From A/C",r.a.createElement("br",null),r.a.createElement("font",{className:"text-danger"},"   *  "))),r.a.createElement("div",{className:"col-md-7"},r.a.createElement("div",{className:"".concat(this.state.disable)},r.a.createElement("select",{type:"text",id:"amount",onChange:this.handleSelfChange,value:this.attempt.from_acc_id,className:"form-control"},r.a.createElement("option",{value:this.attempt.from_acc_id,selected:"true"},this.attempt.from_acc_id," - ",this.attempt.from_acc_num))))),r.a.createElement("br",null),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-5"},r.a.createElement("label",null,"Amount Disbursed"),r.a.createElement("font",{className:"text-danger"},"   *  ")),r.a.createElement("div",{className:"col-md-7"},r.a.createElement("div",{id:"",className:"".concat(this.state.disable)},r.a.createElement("input",{type:"text",id:"amount",onChange:this.handleSelfChange,value:this.attempt.disbursed_amount,className:"form-control"})))),r.a.createElement("br",null),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-5"},r.a.createElement("label",null,"Disbursal Transaction ID"),r.a.createElement("font",{className:"text-danger"},"   *  ")),r.a.createElement("div",{className:"col-md-7"},r.a.createElement("input",{type:"text",id:"txn_id",onChange:function(t){e.handleSelfChange(t),e.handleTxnId(t)},className:"form-control spacing",tabIndex:"-1",required:"required"}))),r.a.createElement("br",null)),r.a.createElement("div",{className:"col-md-6"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-5"},r.a.createElement("label",null,"Customer's A/C"),r.a.createElement("font",{className:"text-danger"},"   *  ")),r.a.createElement("div",{className:"col-md-7"},r.a.createElement("div",{className:"".concat(this.state.disable)},r.a.createElement("select",{type:"text",id:"amount",onChange:this.handleSelfChange,value:this.attempt.from_acc_id,className:"form-control"},r.a.createElement("option",{value:this.attempt.to_acc_id,selected:!0},this.attempt.to_acc_id," - ",this.attempt.to_acc_num))))),r.a.createElement("br",null),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-5"},r.a.createElement("label",null,"Disbursal Date"),r.a.createElement("font",{className:"text-danger"},"   *  ")),r.a.createElement("div",{className:"col-md-7"},r.a.createElement(Ht.a,{defaultValue:_e(this.props.data.attempt_time),closeOnSelect:!0,onChange:function(t){e.handleSelfDateChange("txn_date",t),e.enableTxnID(t)},dateFormat:"DD MMM YYYY",timeFormat:!1,required:"required"}))),r.a.createElement("br",null),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-5"},r.a.createElement("label",null,"Remarks")),r.a.createElement("div",{className:"col-md-7"},r.a.createElement("input",{type:"text",id:"remarks",onChange:this.handleSelfChange,className:"form-control",required:"required"}))),r.a.createElement("br",null))),r.a.createElement("br",null),r.a.createElement("div",{className:"row"},this.state.txn_data&&r.a.createElement(r.a.Fragment,null,r.a.createElement("br",null),r.a.createElement("div",{class:"alert alert-success"},this.state.txn_data.map(function(e){return r.a.createElement("h6",null,"Amount : ",e.dr_amt," | Txn Date : ",e.stmt_txn_date," | Description : ",e.descr)}))),this.state.txn_failed_msg&&r.a.createElement("div",{class:"alert alert-danger"},r.a.createElement("h6",null,this.state.txn_failed_msg))),r.a.createElement("br",null))),r.a.createElement(rt.a.Footer,null,r.a.createElement(lt.a,{variant:"secondary",onClick:this.handleClose},"Cancel"),r.a.createElement("input",{type:"button",className:"btn btn-primary ".concat(this.state.capture_btn),onClick:this.handleSubmit,value:"Submit",disabled:this.state.calling_api}))))}}]),a}(ut);function Hd(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(u.a)(e);if(t){var r=Object(u.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(m.a)(this,a)}}n.Component;function qd(){qd=function(){return e};var e={},t=Object.prototype,a=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",l=n.asyncIterator||"@@asyncIterator",c=n.toStringTag||"@@toStringTag";function s(e,t,a){return Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(k){s=function(e,t,a){return e[t]=a}}function o(e,t,a,n){var r=t&&t.prototype instanceof m?t:m,l=Object.create(r.prototype),c=new N(n||[]);return l._invoke=function(e,t,a){var n="suspendedStart";return function(r,l){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===r)throw l;return C()}for(a.method=r,a.arg=l;;){var c=a.delegate;if(c){var s=E(c,a);if(s){if(s===d)continue;return s}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===n)throw n="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);n="executing";var o=i(e,t,a);if("normal"===o.type){if(n=a.done?"completed":"suspendedYield",o.arg===d)continue;return{value:o.arg,done:a.done}}"throw"===o.type&&(n="completed",a.method="throw",a.arg=o.arg)}}}(e,a,c),l}function i(e,t,a){try{return{type:"normal",arg:e.call(t,a)}}catch(k){return{type:"throw",arg:k}}}e.wrap=o;var d={};function m(){}function u(){}function p(){}var _={};s(_,r,function(){return this});var h=Object.getPrototypeOf,f=h&&h(h(x([])));f&&f!==t&&a.call(f,r)&&(_=f);var v=p.prototype=m.prototype=Object.create(_);function g(e){["next","throw","return"].forEach(function(t){s(e,t,function(e){return this._invoke(t,e)})})}function y(e,t){var n;this._invoke=function(r,l){function c(){return new t(function(n,c){!function n(r,l,c,s){var o=i(e[r],e,l);if("throw"!==o.type){var d=o.arg,m=d.value;return m&&"object"==typeof m&&a.call(m,"__await")?t.resolve(m.__await).then(function(e){n("next",e,c,s)},function(e){n("throw",e,c,s)}):t.resolve(m).then(function(e){d.value=e,c(d)},function(e){return n("throw",e,c,s)})}s(o.arg)}(r,l,n,c)})}return n=n?n.then(c,c):c()}}function E(e,t){var a=e.iterator[t.method];if(void 0===a){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method))return d;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var n=i(a,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,d;var r=n.arg;return r?r.done?(t[e.resultName]=r.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):r:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function b(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function w(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function N(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(b,this),this.reset(!0)}function x(e){if(e){var t=e[r];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,l=function t(){for(;++n<e.length;)if(a.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return l.next=l}}return{next:C}}function C(){return{value:void 0,done:!0}}return u.prototype=p,s(v,"constructor",p),s(p,"constructor",u),u.displayName=s(p,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===u||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,s(e,c,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},g(y.prototype),s(y.prototype,l,function(){return this}),e.AsyncIterator=y,e.async=function(t,a,n,r,l){void 0===l&&(l=Promise);var c=new y(o(t,a,n,r),l);return e.isGeneratorFunction(a)?c:c.next().then(function(e){return e.done?e.value:c.next()})},g(v),s(v,c,"Generator"),s(v,r,function(){return this}),s(v,"toString",function(){return"[object Generator]"}),e.keys=function(e){var t=[];for(var a in e)t.push(a);return t.reverse(),function a(){for(;t.length;){var n=t.pop();if(n in e)return a.value=n,a.done=!1,a}return a.done=!0,a}},e.values=x,N.prototype={constructor:N,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!e)for(var t in this)"t"===t.charAt(0)&&a.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(a,n){return c.type="throw",c.arg=e,t.next=a,n&&(t.method="next",t.arg=void 0),!!n}for(var r=this.tryEntries.length-1;r>=0;--r){var l=this.tryEntries[r],c=l.completion;if("root"===l.tryLoc)return n("end");if(l.tryLoc<=this.prev){var s=a.call(l,"catchLoc"),o=a.call(l,"finallyLoc");if(s&&o){if(this.prev<l.catchLoc)return n(l.catchLoc,!0);if(this.prev<l.finallyLoc)return n(l.finallyLoc)}else if(s){if(this.prev<l.catchLoc)return n(l.catchLoc,!0)}else{if(!o)throw new Error("try statement without catch or finally");if(this.prev<l.finallyLoc)return n(l.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&a.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var l=r;break}}l&&("break"===e||"continue"===e)&&l.tryLoc<=t&&t<=l.finallyLoc&&(l=null);var c=l?l.completion:{};return c.type=e,c.arg=t,l?(this.method="next",this.next=l.finallyLoc,d):this.complete(c)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.finallyLoc===e)return this.complete(a.completion,a.afterLoc),w(a),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.tryLoc===e){var n=a.completion;if("throw"===n.type){var r=n.arg;w(a)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,a){return this.delegate={iterator:x(e),resultName:t,nextLoc:a},"next"===this.method&&(this.arg=void 0),d}},e}function zd(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(u.a)(e);if(t){var r=Object(u.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(m.a)(this,a)}}var Id=function(e){Object(d.a)(a,e);var t=zd(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(e=t.call.apply(t,[this].concat(l))).state={refresh:!1,rowdatas:[],columndatas:[],copy:[],dyn_Btn_selected:[],all_count:0,filter_actions:{},all_Btn_status:!1,all_Acc_pvdrs:[],disb_manually:!0,show_table:!1},e.handleToggle=function(t){switch(t){case"Account":e.setState(function(t){return t.show_table=!e.state.show_table})}},e.drawTable=Object(j.a)(qd().mark(function t(){var a,n,r,l,c;return qd().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=v("market"),n=a.country_code,r={status:"stalled",disburse_attempt:!0,mode:"search"},t.next=5,vn(e.req({loan_search_criteria:r},!0));case 5:if(l=t.sent,e.resp(l),l){t.next=9;break}return t.abrupt("return");case 9:l&&(e.setState(function(t){return t.columndatas=e.columndatas()}),e.setState(function(e){return e.copy=[]}),e.setState(function(e){return e.server_time=l.server_time}),(l.data.results.length>0||0===l.data.results.length)&&(e.setState(function(e){return e.all_count=l.data.results.length}),e.setState(function(e){return e.rowdatas=l.data.results}),c=void 0===v([n]+"_faPendingdisb")?e.state.all_Acc_pvdrs:v([n]+"_faPendingdisb"),e.state.all_Acc_pvdrs.map(function(t){var a=e.state.rowdatas.filter(function(e){return e.acc_prvdr_code===t}).length;e.setState(function(e){return e.filter_actions[t]=[{count:0},{status:c.includes(t)}]}),e.dynClickhandler(e.state.filter_actions[t][1].status,t),e.setState(function(e){return e.filter_actions[t][0].count=a})})));case 11:case"end":return t.stop()}},t)})),e.cancelLoan=function(t){if(0!=window.confirm("Are you sure to cancel FA?")){var a={cancel_loan:{loan_doc_id:t,ignore_consent_check:!0}};bn(e.req(a)).then(function(e){e&&"success"===e.status&&window.location.reload()})}},e.refreshList=Object(j.a)(qd().mark(function t(){return qd().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({refresh:!0}),t.next=3,e.drawTable();case 3:case"end":return t.stop()}},t)})),e.buttonName=function(t){var a;if("pending_disb_capture"==t.disbursal_status&&E("loan","home_capture_disbursal"))a=r.a.createElement(Td,{id:"disbursal_txn",data:t,title:"Disbursal Loan"});else if("failed"==t.disbursal_status||"pending_mnl_dsbrsl"==t.status){var n=t;n.amount=t.loan_principal;var l=v("market");a=r.a.createElement("div",{className:"text-center"},"  ",console.log("this.state.acc_prvdr_support_ussd[ls_market.country_code][0]",e.state.acc_prvdr_support_ussd),void 0!=e.state.acc_prvdr_support_ussd&&e.state.acc_prvdr_support_ussd[l.country_code][0]===t.acc_prvdr_code?r.a.createElement(se.a,{style:{color:"#559f58"},placement:"top",trigger:"click",overlay:r.a.createElement(oe.a,{style:{textAlign:"center"}},r.a.createElement(oe.a.Content,null,r.a.createElement("div",{style:{marginBottom:"4%",marginTop:"3%"}},E("loan","retry_disbursal")&&"pending_mnl_dsbrsl"!=t.status&&r.a.createElement("input",{style:{marginBottom:"3%",color:"#202940"},id:t.loan_doc_id,type:"submit",value:"Retry with USSD",disabled:e.state.calling_api,onClick:function(a){e.retryFA(t.loan_doc_id,"mob")},className:"btn btn-retry btn-sm"})),r.a.createElement("div",{style:{marginBottom:"4%"}},E("loan","retry_disbursal")&&"pending_mnl_dsbrsl"!=t.status&&r.a.createElement("input",{style:{marginBottom:"1%",backgroundColor:"#202940"},id:t.loan_doc_id,type:"submit",value:"Retry in web mode",disabled:e.state.calling_api,onClick:function(a){e.retryFA(t.loan_doc_id,"web")},className:"btn btn-retry btn-sm"}))))},r.a.createElement(lt.a,{className:"btn btn-primary btn-sm",variant:"success"}," Retry ")):E("loan","retry_disbursal")&&"pending_mnl_dsbrsl"!=t.status&&r.a.createElement("input",{style:{marginBottom:"3%",color:"#202940"},id:t.loan_doc_id,type:"submit",value:"Retry",disabled:e.state.calling_api,onClick:function(a){e.retryFA(t.loan_doc_id)},className:"btn btn-retry btn-sm"}),E("loan","disburse_manually")&&r.a.createElement(Mi,{id:"disbursal_txn",data:n,parent:"home",disabled:e.state.calling_api,onStatusChange:e.refreshList,onDisburseClick:function(t){return e.setState({disb_manually:t})}}))}else"unknown"==t.disbursal_status&&E("loan","release")&&t.allow_status_change&&(a=r.a.createElement("td",null,r.a.createElement("select",{style:{minHeight:"30px",width:90},onChange:function(a){e.statusChange(a,t)}},r.a.createElement("option",{disabled:!0,selected:!0,hidden:!0,className:"text-white"},"choose"),r.a.createElement("option",{value:"pending_disb_capture",className:"text-white"},"Pending Capture"),r.a.createElement("option",{value:"failed",className:"text-white"},"Failed"))));return a},e.retryFA=function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;e.state.calling_api||window.confirm("Have you verified in the Data Provider's A/C statement if there is no debit transaction found related to this FA?\n\nPlease note that clicking OK will re-attempt Disbursal")&&jn(e.req({loan_doc_id:t,int_type:a},!0)).then(function(t){e.resp(t),window.location.reload()})},e}return Object(o.a)(a,[{key:"componentWillMount",value:function(){var e=this,t=C("fa_late1"),a=C("fa_late2");this.setState({fa_late1:t,fa_late2:a});var n=v("market"),r=C("acc_prvdr_support_ussd");this.setState({acc_prvdr_support_ussd:r});var l={country_code:n.country_code,time_zone:n.time_zone,status:""};_r(Object(X.a)({},l,{status:"enabled",biz_account:!0})).then(function(t){if(t&&"success"===t.status){var a=[];t.data.list.map(function(e){return a.push(e.acc_prvdr_code)}),e.setState(function(e){return e.all_Acc_pvdrs=a}),N("acc_pvdrs",a)}}),this.drawTable()}},{key:"dynClickhandler",value:function(e,t){var a=this,n=v("market").country_code;if(e)if("ALL"!==t){-1==this.state.dyn_Btn_selected.findIndex(function(e){return e===t})&&(this.state.dyn_Btn_selected.push(t),this.setState(function(a){return a.filter_actions[t][1].status=e}),this.state.dyn_Btn_selected.length===this.state.all_Acc_pvdrs.length&&this.setState(function(e){return e.all_Btn_status=!0})),localStorage.setItem([n]+"_faPendingdisb",JSON.stringify(this.state.dyn_Btn_selected))}else{var r=[];this.state.all_Acc_pvdrs.map(function(e){a.state.filter_actions[e][1].status=!0,r.push(e)}),this.setState(function(e){return e.dyn_Btn_selected=r}),localStorage.setItem([n]+"_faPendingdisb",JSON.stringify(r)),this.setState(function(t){return t.all_Btn_status=e})}else if(!e)if("ALL"!==t){var l=this.state.dyn_Btn_selected.findIndex(function(e){return e===t});l>-1&&(this.state.dyn_Btn_selected.splice(l,1),this.setState(function(a){return a.filter_actions[t][1].status=e})),this.setState(function(e){return e.all_Btn_status=!1}),localStorage.setItem([n]+"_faPendingdisb",JSON.stringify(this.state.dyn_Btn_selected))}else this.state.all_Acc_pvdrs.map(function(e){return a.state.filter_actions[e][1].status=!1}),this.setState(function(e){return e.dyn_Btn_selected=[]}),localStorage.setItem([n]+"_faPendingdisb",JSON.stringify([])),this.setState(function(t){return t.all_Btn_status=e});var c=v([n]+"_faPendingdisb"),s=[];c.map(function(e){var t=a.state.rowdatas.filter(function(t){return t.acc_prvdr_code===e});s.push.apply(s,Object(re.a)(t))}),this.setState(function(e){return e.copy=s})}},{key:"getOverlayInfo",value:function(e,t){var a;return"failed"===e?a="Float not transferred. App Support Will Retry":"pending_disb_capture"===e?a="Float Transferred. Not Captured on Flow App. Customer Success will Capture":"unknown"===e?a="App Support Will Process":"sent_to_disbursal_queue"===e?a="Float will be transferred shortly":null!==e||t.customer_consent_rcvd||(a="Customer has not sent the confirmation code"),a}},{key:"sortAmt",value:function(e,t){var a=e.props.children,n=t.props.children;return $s(a,n)}},{key:"sortBiz",value:function(e,t){var a=e.props.children[0].props.full_text,n=t.props.children[0].props.full_text;return eo(a,n)}},{key:"sortTime",value:function(e,t){var a=e.props.data.loan_appl_date,n=t.props.data.loan_appl_date,r=this.state.server_time;return to(a,n,r)}},{key:"columndatas",value:function(){var e=this;return[{Header:"ACC PRVDR",id:"acc_prvdr_code",sortable:!1,maxWidth:85,accessor:function(e){return r.a.createElement(Le,{logotype:e.acc_prvdr_code})}},{Header:"FA ID & A/C Number",id:"loan_doc_id",minWidth:140,sortable:!1,accessor:function(e){return r.a.createElement("div",null,r.a.createElement(ee.a,{className:"d-block",to:"/fa/view/"+e.loan_doc_id,target:"_blank"},e.loan_doc_id),r.a.createElement(ee.a,{className:"d-block",to:"/borrower/indiv/view/"+e.cust_id,target:"_blank"},e.acc_number))}},{Header:r.a.createElement(r.a.Fragment,null,"Biz Name",r.a.createElement("br",null),"& Mobile Number"),id:"cust_mobile_num",sortMethod:function(t,a){return e.sortBiz(t,a)},minWidth:150,accessor:function(t){return r.a.createElement("div",null,r.a.createElement(Rt,{className:"d-block",full_text:t.biz_name,overlay:"".concat(t.cust_name," / ").concat(xe(t.loan_principal,e.currency_code)),no_reduce:!0}),r.a.createElement("label",{className:"no-margin d-block"},t.cust_mobile_num))}},{Header:"Applied & Approved",id:"loan_appl_date",width:170,sortable:!1,accessor:function(t){return r.a.createElement("div",null,r.a.createElement("span",null,"Applied :  ",r.a.createElement(Ft,{data:t,timedata:e.state.server_time,item:"applied",time_limit:[e.state.fa_late1,e.state.fa_late2]})),r.a.createElement("br",null),r.a.createElement("span",null,"Approved :  ",r.a.createElement(Ft,{data:t,timedata:e.state.server_time,item:"approved",time_limit:[e.state.fa_late1,e.state.fa_late2]})))}},{Header:r.a.createElement("div",{style:{paddingLeft:15}},"Attempted"),id:"first_attempt_time",minWidth:190,maxWidth:190,sortable:!1,accessor:function(t){return r.a.createElement("div",{style:{paddingLeft:15}},t.attempts>1?r.a.createElement(r.a.Fragment,null,t.first_attempt_time&&r.a.createElement(r.a.Fragment,null,r.a.createElement("span",null,"First Attempt : ",r.a.createElement(Ft,{data:t,timedata:e.state.server_time,item:"first_attempt_time",time_limit:[e.state.fa_late1,e.state.fa_late2]})),r.a.createElement("br",null)),t.attempt_time&&r.a.createElement(r.a.Fragment,null,r.a.createElement("span",null,"Last Attempt"," ("+t.attempts+")"," : ",r.a.createElement(Ft,{data:t,timedata:e.state.server_time,item:"last_attempt_time",time_limit:[e.state.fa_late1,e.state.fa_late2]})))):r.a.createElement("span",null,r.a.createElement("span",{style:{display:1===t.attempts?"inline-flex":"none"}},"Attempted :"),r.a.createElement(Ft,{data:t,timedata:e.state.server_time,item:"first_attempt_time",time_limit:[e.state.fa_late1,e.state.fa_late2]})))}},{Header:r.a.createElement(r.a.Fragment,null,"FA Status",r.a.createElement("br",null),"Disbursal Status"),id:"status",minWidth:140,maxWidth:200,sortable:!1,accessor:function(t){return r.a.createElement("div",null,r.a.createElement("span",null,Ze(t.status)),r.a.createElement("br",null),null!=t.disbursal_status?r.a.createElement(se.a,{placement:"auto",trigger:["hover","focus"],overlay:r.a.createElement(oe.a,{style:{fontSize:"15px",padding:"15px",color:"mediumblue",fontFamily:"Montserrat"}},e.getOverlayInfo(t.disbursal_status,t))},r.a.createElement("span",null,pe(t.disbursal_status||"not_initiated")," ",r.a.createElement("sup",null,r.a.createElement(ie.a,{size:14})))):r.a.createElement(r.a.Fragment,null))}},{Header:function(){return r.a.createElement("div",{className:"text-center"},"Action")},sortable:!1,id:"btn",minWidth:120,accessor:function(t){return e.buttonName(t)}},{Header:function(){return r.a.createElement("div",{className:"text-center"},"Action")},sortable:!1,id:"bttn",minWidth:120,accessor:function(t){return r.a.createElement("div",{className:"text-center"},E("loan","home_screen_cancel_btn")&&r.a.createElement("button",{className:"btn-primary no-padding",style:{margin:"10px !important"},onClick:function(){return e.cancelLoan(t.loan_doc_id)}},"Cancel this FA"))}}]}},{key:"statusChange",value:function(e,t){var a=this,n=e.target.value,r="";if("pending_disb_capture"===n?r="Are you sure if the disbursal attempt is successful and there is a debit transaction to the customer found in the Data Provider A/C statement on "+t.attempt_time+"?":"failed"===n&&(r="Are you sure the disbursal attempt got failed and there is no debit transaction to the customer found in the Data Provider A/C statement?"),window.confirm(r)){var l={loan_doc_id:t.loan_doc_id,disbursal_status:n};Rn(this.req(l)).then(function(e){a.resp(e),e&&"success"==e.status&&a.refreshList()})}}},{key:"componentDidUpdate",value:function(e,t,a){e.refresh!=this.props.refresh&&1==this.state.disb_manually&&this.refreshList()}},{key:"render",value:function(){var e=this;return r.a.createElement(kc.a,null,r.a.createElement(ka.a,null,r.a.createElement("div",{className:"card-header card-header-icon card-header-primary home_header_d-flex_at_response justify-space-between"},r.a.createElement("h4",{className:"card-title text-white tableHead_font title-bottom "},"FAs Pending Disbursal"),this.state.rowdatas.length>0&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"countREL card-title"},r.a.createElement("button",{className:"filterBtns allBtn_size",onClick:function(){return e.dynClickhandler(!e.state.all_Btn_status,"ALL")},style:{filter:this.state.all_Btn_status?"":"opacity(0.5)"}},"ALL"),r.a.createElement("div",{className:"countABS",style:{backgroundColor:this.state.all_Btn_status?"":"lightgrey"}},r.a.createElement("label",null,this.state.all_count))),this.state.all_Acc_pvdrs.map(function(t,a){return r.a.createElement("div",{key:a,className:"countREL card-title"},r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:{width:60,height:30},className:"filterBtns",onClick:function(){return e.dynClickhandler(!e.state.filter_actions[t][1].status,t)}},r.a.createElement("img",{className:"img-fluid",src:"/img/".concat(t,"_logo_color.png"),style:{filter:e.state.filter_actions[t]&&!e.state.filter_actions[t][1].status?"opacity(0.5)":""}})),r.a.createElement("div",{className:"countABS",style:{backgroundColor:e.state.filter_actions[t]&&!e.state.filter_actions[t][1].status?"lightgrey":""}},r.a.createElement("label",null,e.state.filter_actions[t]&&e.state.filter_actions[t][0].count))))})),r.a.createElement(kc.a.Toggle,{className:"col",as:ka.a.Header,eventKey:"0",onClick:function(){return e.handleToggle("Account")}},r.a.createElement(Oc.a,{className:this.state.show_table?"arrow-icon down accordin-arrow":"arrow-icon accordin-arrow",size:"18"}))),r.a.createElement("div",{className:"card-body no-padding"},this.state.server_time&&r.a.createElement(kc.a.Collapse,{eventKey:"0"},r.a.createElement(ka.a.Body,null,r.a.createElement(za,{showPag:!1,minRow:0,row_data:void 0!==this.state.copy?this.state.copy:[],column_data:this.state.columndatas,resizable:!1,defaultPageSize:50,defaultSorted:[{id:"loan_appl_date",desc:!0}],excessTimeaction:!0,timeServer:this.state.server_time,appliedRowblink:!1,approveRowblinktime:this.state.fa_late2}))))))}}]),a}(ut);function Wd(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(u.a)(e);if(t){var r=Object(u.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(m.a)(this,a)}}var Yd=function(e){Object(d.a)(a,e);var t=Wd(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={columns:[],lists:[],copy:[],dyn_Btn_selected:[],all_count:0,filter_actions:{},all_Btn_status:!1,all_Acc_pvdrs:[],show_table:!1},e.handleToggle=function(t){switch(t){case"Account":e.setState(function(t){return t.show_table=!e.state.show_table})}},e.handleAuditKyc=function(t,a){var n=a._original.audited_by,r=a._original.auditor_name;null==n&&"operations_auditor"==v("role_codes")?window.confirm("You are going to initiate the audit KYC process for this lead. Once you start, no other auditor can act on this lead.Are you sure?")&&mc(e.req({id:a.id})).then(function(t){e.resp(t),t&&"success"===t.status&&(window.location.href="/lead/audit_kyc/"+a.id)}):null!=n&&v("user_id")!=n?(window.alert("".concat(r," has already initiated audit process for this KYC record. You can not take action. However you can view the KYC record")),window.location.href="/lead/audit_kyc/"+a.id):null!=n&&v("user_id")==n&&(window.location.href="/lead/audit_kyc/"+a.id)},e}return Object(o.a)(a,[{key:"componentWillMount",value:function(){var e=this,t=v("market"),a={country_code:t.country_code,time_zone:t.time_zone,status:""};_r(Object(X.a)({},a,{status:"enabled",biz_account:!0})).then(function(t){if(t&&"success"===t.status){var a=[];t.data.list.map(function(e){return a.push(e.acc_prvdr_code)}),e.setState(function(e){return e.all_Acc_pvdrs=a})}}),this.drawTable()}},{key:"sortDate",value:function(e,t){var a=e.props.children[1],n=t.props.children[1];return ao(a,n)}},{key:"sortBiz",value:function(e,t){return eo(e.props.full_text,t.props.full_text)}},{key:"drawTable",value:function(){var e=this,t=v("market").country_code;oc(this.req({lead_search_criteria:{status:"pending_name_n_audit"}})).then(function(a){if(a&&"success"===a.status&&(e.setState(function(t){return t.columns=e.columndatas()}),a.data.length>0)){e.setState({lists:a.data}),e.setState(function(e){return e.all_count=a.data.length});var n=void 0===v([t]+"_kycAuditpending")?e.state.all_Acc_pvdrs:v([t]+"_kycAuditpending");e.state.all_Acc_pvdrs.map(function(t){var a=e.state.lists.filter(function(e){return e.acc_prvdr_code===t}).length;e.setState(function(e){return e.filter_actions[t]=[{count:0},{status:n.includes(t)}]}),e.dynClickhandler(e.state.filter_actions[t][1].status,t),e.setState(function(e){return e.filter_actions[t][0].count=a})})}})}},{key:"columndatas",value:function(){var e=this;return[{Header:"Biz Name",id:"biz_name",sortMethod:function(t,a){return e.sortBiz(t,a)},accessor:function(e){return r.a.createElement(Rt,{full_text:e.biz_name,overlay:e.cust_name,no_reduce:!0})}},{Header:"Reg Date",id:"lead_date",sortMethod:function(t,a){return e.sortDate(t,a)},accessor:function(e){return ve(e.lead_date)}},{Header:"ACC PRVDR",id:"acc_prvdr_code",sortable:!1,accessor:function(e){return r.a.createElement(Le,{logotype:e.acc_prvdr_code})}},{Header:"A/C Number",sortable:!1,accessor:"account_num"},{Header:"Mobile Number",sortable:!1,id:"mobile_num",accessor:function(e){return e.mobile_num}},{Header:"RM Name",sortable:!1,id:"flow_rel_mgr_name",accessor:function(e){return r.a.createElement("div",{className:"rmUpper_case"},null!==e.flow_rel_mgr_name&&function(e){var t=e,a=t.split(/(\s+)/),n=t.match(/\b(\w)/g);return r.a.createElement("p",null,a[0],"\xa0",n[1])}(e.flow_rel_mgr_name))}},{Header:"Action",sortable:!1,accessor:"id",Cell:function(t){var a=t.row;return r.a.createElement(lt.a,{variant:"primary",onClick:function(t){return e.handleAuditKyc(t,a)}},"Audit KYC")}}]}},{key:"dynClickhandler",value:function(e,t){var a=this,n=v("market").country_code;if(e)if("ALL"!==t){-1==this.state.dyn_Btn_selected.findIndex(function(e){return e===t})&&(this.state.dyn_Btn_selected.push(t),this.setState(function(a){return a.filter_actions[t][1].status=e}),this.state.dyn_Btn_selected.length===this.state.all_Acc_pvdrs.length&&this.setState(function(e){return e.all_Btn_status=!0})),localStorage.setItem([n]+"_kycAuditpending",JSON.stringify(this.state.dyn_Btn_selected))}else{var r=[];this.state.all_Acc_pvdrs.map(function(e){a.state.filter_actions[e][1].status=!0,r.push(e)}),this.setState(function(e){return e.dyn_Btn_selected=r}),localStorage.setItem([n]+"_kycAuditpending",JSON.stringify(r)),this.setState(function(t){return t.all_Btn_status=e})}else if(!e)if("ALL"!==t){var l=this.state.dyn_Btn_selected.findIndex(function(e){return e===t});l>-1&&(this.state.dyn_Btn_selected.splice(l,1),this.setState(function(a){return a.filter_actions[t][1].status=e})),this.setState(function(e){return e.all_Btn_status=!1}),localStorage.setItem([n]+"_kycAuditpending",JSON.stringify(this.state.dyn_Btn_selected))}else this.state.all_Acc_pvdrs.map(function(e){return a.state.filter_actions[e][1].status=!1}),this.setState(function(e){return e.dyn_Btn_selected=[]}),localStorage.setItem([n]+"_kycAuditpending",JSON.stringify([])),this.setState(function(t){return t.all_Btn_status=e});var c=v([n]+"_kycAuditpending"),s=[];c.map(function(e){var t=a.state.lists.filter(function(t){return t.acc_prvdr_code===e});s.push.apply(s,Object(re.a)(t))}),this.setState(function(e){return e.copy=s})}},{key:"render",value:function(){var e=this;return r.a.createElement(kc.a,null,r.a.createElement(ka.a,null,r.a.createElement("div",{className:"card-header card-header-icon card-header-primary home_header_d-flex_at_response justify-space-between"},r.a.createElement("h4",{className:"card-title text-white tableHead_font title-bottom"},"Leads with Pending KYC Audit"),this.state.lists.length>0&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"countREL card-title"},r.a.createElement("button",{className:"filterBtns allBtn_size",onClick:function(){return e.dynClickhandler(!e.state.all_Btn_status,"ALL")},style:{filter:this.state.all_Btn_status?"":"opacity(0.5)"}},"ALL"),r.a.createElement("div",{className:"countABS",style:{backgroundColor:this.state.all_Btn_status?"":"lightgrey"}},r.a.createElement("label",null,this.state.all_count))),this.state.all_Acc_pvdrs.map(function(t,a){return r.a.createElement("div",{key:a,className:"countREL  card-title"},r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:{width:60,height:30},className:"filterBtns",onClick:function(){return e.dynClickhandler(!e.state.filter_actions[t][1].status,t)}},r.a.createElement("img",{className:"img-fluid",src:"/img/".concat(t,"_logo_color.png"),style:{filter:e.state.filter_actions[t]&&!e.state.filter_actions[t][1].status?"opacity(0.5)":""}})),r.a.createElement("div",{className:"countABS",style:{backgroundColor:e.state.filter_actions[t]&&!e.state.filter_actions[t][1].status?"lightgrey":""}},r.a.createElement("label",null,e.state.filter_actions[t]&&e.state.filter_actions[t][0].count))))})),r.a.createElement(kc.a.Toggle,{className:"col",as:ka.a.Header,eventKey:"0",onClick:function(){return e.handleToggle("Account")}},r.a.createElement(Oc.a,{className:this.state.show_table?"arrow-icon down accordin-arrow":"arrow-icon accordin-arrow",size:"18"}))),r.a.createElement("div",{className:"card-body no-padding"},r.a.createElement(kc.a.Collapse,{eventKey:"0"},r.a.createElement(ka.a.Body,null,r.a.createElement(za,{showPag:!1,defaultPageSize:50,minRow:0,row_data:void 0!==this.state.copy?this.state.copy:[],column_data:this.state.columns,resizable:!1,defaultSorted:[{id:"lead_date",desc:!0}]}))))))}}]),a}(ut);function Vd(){Vd=function(){return e};var e={},t=Object.prototype,a=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",l=n.asyncIterator||"@@asyncIterator",c=n.toStringTag||"@@toStringTag";function s(e,t,a){return Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(k){s=function(e,t,a){return e[t]=a}}function o(e,t,a,n){var r=t&&t.prototype instanceof m?t:m,l=Object.create(r.prototype),c=new N(n||[]);return l._invoke=function(e,t,a){var n="suspendedStart";return function(r,l){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===r)throw l;return C()}for(a.method=r,a.arg=l;;){var c=a.delegate;if(c){var s=E(c,a);if(s){if(s===d)continue;return s}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===n)throw n="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);n="executing";var o=i(e,t,a);if("normal"===o.type){if(n=a.done?"completed":"suspendedYield",o.arg===d)continue;return{value:o.arg,done:a.done}}"throw"===o.type&&(n="completed",a.method="throw",a.arg=o.arg)}}}(e,a,c),l}function i(e,t,a){try{return{type:"normal",arg:e.call(t,a)}}catch(k){return{type:"throw",arg:k}}}e.wrap=o;var d={};function m(){}function u(){}function p(){}var _={};s(_,r,function(){return this});var h=Object.getPrototypeOf,f=h&&h(h(x([])));f&&f!==t&&a.call(f,r)&&(_=f);var v=p.prototype=m.prototype=Object.create(_);function g(e){["next","throw","return"].forEach(function(t){s(e,t,function(e){return this._invoke(t,e)})})}function y(e,t){var n;this._invoke=function(r,l){function c(){return new t(function(n,c){!function n(r,l,c,s){var o=i(e[r],e,l);if("throw"!==o.type){var d=o.arg,m=d.value;return m&&"object"==typeof m&&a.call(m,"__await")?t.resolve(m.__await).then(function(e){n("next",e,c,s)},function(e){n("throw",e,c,s)}):t.resolve(m).then(function(e){d.value=e,c(d)},function(e){return n("throw",e,c,s)})}s(o.arg)}(r,l,n,c)})}return n=n?n.then(c,c):c()}}function E(e,t){var a=e.iterator[t.method];if(void 0===a){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method))return d;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var n=i(a,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,d;var r=n.arg;return r?r.done?(t[e.resultName]=r.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):r:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function b(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function w(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function N(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(b,this),this.reset(!0)}function x(e){if(e){var t=e[r];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,l=function t(){for(;++n<e.length;)if(a.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return l.next=l}}return{next:C}}function C(){return{value:void 0,done:!0}}return u.prototype=p,s(v,"constructor",p),s(p,"constructor",u),u.displayName=s(p,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===u||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,s(e,c,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},g(y.prototype),s(y.prototype,l,function(){return this}),e.AsyncIterator=y,e.async=function(t,a,n,r,l){void 0===l&&(l=Promise);var c=new y(o(t,a,n,r),l);return e.isGeneratorFunction(a)?c:c.next().then(function(e){return e.done?e.value:c.next()})},g(v),s(v,c,"Generator"),s(v,r,function(){return this}),s(v,"toString",function(){return"[object Generator]"}),e.keys=function(e){var t=[];for(var a in e)t.push(a);return t.reverse(),function a(){for(;t.length;){var n=t.pop();if(n in e)return a.value=n,a.done=!1,a}return a.done=!0,a}},e.values=x,N.prototype={constructor:N,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!e)for(var t in this)"t"===t.charAt(0)&&a.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(a,n){return c.type="throw",c.arg=e,t.next=a,n&&(t.method="next",t.arg=void 0),!!n}for(var r=this.tryEntries.length-1;r>=0;--r){var l=this.tryEntries[r],c=l.completion;if("root"===l.tryLoc)return n("end");if(l.tryLoc<=this.prev){var s=a.call(l,"catchLoc"),o=a.call(l,"finallyLoc");if(s&&o){if(this.prev<l.catchLoc)return n(l.catchLoc,!0);if(this.prev<l.finallyLoc)return n(l.finallyLoc)}else if(s){if(this.prev<l.catchLoc)return n(l.catchLoc,!0)}else{if(!o)throw new Error("try statement without catch or finally");if(this.prev<l.finallyLoc)return n(l.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&a.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var l=r;break}}l&&("break"===e||"continue"===e)&&l.tryLoc<=t&&t<=l.finallyLoc&&(l=null);var c=l?l.completion:{};return c.type=e,c.arg=t,l?(this.method="next",this.next=l.finallyLoc,d):this.complete(c)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.finallyLoc===e)return this.complete(a.completion,a.afterLoc),w(a),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.tryLoc===e){var n=a.completion;if("throw"===n.type){var r=n.arg;w(a)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,a){return this.delegate={iterator:x(e),resultName:t,nextLoc:a},"next"===this.method&&(this.arg=void 0),d}},e}function Ud(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(u.a)(e);if(t){var r=Object(u.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(m.a)(this,a)}}var Gd=function(e){Object(d.a)(a,e);var t=Ud(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(e=t.call.apply(t,[this].concat(l))).state={refresh:!1,lists:[],columndatas:[],copy:[],dyn_Btn_selected:[],all_count:0,filter_actions:{},all_Btn_status:!1,all_Acc_pvdrs:[],show_table:!1},e.handleToggle=function(t){switch(t){case"Account":e.setState(function(t){return t.show_table=!e.state.show_table})}},e.handleReinitiateRecon=function(t,a){var n="credit"==a.stmt_txn_type?a.cr_amt:"debit"==a.stmt_txn_type&&a.dr_amt;0!=window.confirm("Are you sure to reinitiate this recon transaction ?")&&Wn(e.req({acc_stmt_id:a.id,txn_id:a.stmt_txn_id,amount:n})).then(function(t){e.resp(t),t&&"success"===t.status&&(alert(t.message),e.getList())})},e.getList=Object(j.a)(Vd().mark(function t(){var a,n;return Vd().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:a=v("market"),n=a.country_code,e.getListRows().then(function(t){var a=e.getListColumns();if(e.setState({lists:t,columndatas:a}),e.setState(function(e){return e.all_count=t.length}),"unmatched_credits"===e.props.list_name){if(e.setState(function(e){return e.copy=[]}),0!==t.length){var r=void 0===v([n]+"_unMatchedCredits")?e.state.all_Acc_pvdrs:v([n]+"_unMatchedCredits");e.state.all_Acc_pvdrs.map(function(a){var n=t.filter(function(e){return e.acc_prvdr_code===a}).length;e.setState(function(e){return e.filter_actions[a]=[{count:0},{status:r.includes(a)}]}),e.unMatchPaydynClickhandler(e.state.filter_actions[a][1].status,a),e.setState(function(e){return e.filter_actions[a][0].count=n})})}}else if("review_pending_payments"===e.props.list_name){if(e.setState(function(e){return e.copy=[]}),0!==t.length){var l=void 0===v([n]+"_reviewPendingPayments")?e.state.all_Acc_pvdrs:v([n]+"_reviewPendingPayments");e.state.all_Acc_pvdrs.map(function(a){var n=t.filter(function(e){return e.acc_prvdr_code===a}).length;e.setState(function(e){return e.filter_actions[a]=[{count:0},{status:l.includes(a)}]}),e.reviewPendingPaydynClickhandler(e.state.filter_actions[a][1].status,a),e.setState(function(e){return e.filter_actions[a][0].count=n})})}}else if("unmatched_debits"===e.props.list_name&&(e.setState(function(e){return e.copy=[]}),0!==t.length)){var c=void 0===v([n]+"_unMatchedDebits")?e.state.all_Acc_pvdrs:v([n]+"_unMatchedDebits");e.state.all_Acc_pvdrs.map(function(a){var n=t.filter(function(e){return e.acc_prvdr_code===a}).length;e.setState(function(e){return e.filter_actions[a]=[{count:0},{status:c.includes(a)}]}),e.unMatchDebitdynClickhandler(e.state.filter_actions[a][1].status,a),e.setState(function(e){return e.filter_actions[a][0].count=n})})}});case 3:case"end":return t.stop()}},t)})),e.getListRows=Object(j.a)(Vd().mark(function t(){var a,n,r,l,c;return Vd().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:t.t0=e.props.list_name,t.next="unmatched_credits"===t.t0?3:"review_pending_payments"===t.t0?9:"unmatched_debits"===t.t0?15:20;break;case 3:return r={stmt_txn_type:"credit",recon_status:"unmatched_credits",stmt_txn_date__from:ce()().subtract(5,"days").format("YYYY-MM-DD"),stmt_txn_date__to:ce()().format("YYYY-MM-DD")},t.next=6,ia(e.req({statement_search:r},!1,"statement_search"));case 6:return(a=t.sent)&&"success"===a.status&&(n=a.data.account_txns),t.abrupt("break",20);case 9:return l={stmt_txn_type:"credit",recon_status:"review_pending_payments"},t.next=12,ia(e.req({statement_search:l},!1,"statement_search"));case 12:return(a=t.sent)&&"success"===a.status&&(n=a.data.account_txns),t.abrupt("break",20);case 15:return c={stmt_txn_type:"debit",recon_status:"unmatched_debits",stmt_txn_date__from:ce()().subtract(5,"days").format("YYYY-MM-DD"),stmt_txn_date__to:ce()().format("YYYY-MM-DD")},t.next=18,ia(e.req({statement_search:c},!1,"statement_search"));case 18:(a=t.sent)&&"success"===a.status&&(n=a.data.account_txns);case 20:if(!a||"success"!==a.status){t.next=23;break}return e.setState(function(e){return e.server_time=a.server_time}),t.abrupt("return",n);case 23:case"end":return t.stop()}},t)})),e.handle_capture=function(e){return r.a.createElement(er,{mode:"recon",title:"Review & Sync",data:e,parent:"home"})},e.getListColumns=function(){switch(e.props.list_name){case"unmatched_credits":return[{Header:"Network",accessor:"network_prvdr_code",sortable:!1,width:85,Cell:function(e){return r.a.createElement(Le,{logotype:e.value})}},{Header:"Account Number",accessor:"acc_prvdr_code",sortable:!1,width:150,Cell:function(e){return r.a.createElement("div",{className:"d-flex align-items-center"},r.a.createElement("div",null,r.a.createElement(Le,{logotype:e.value})),r.a.createElement("div",{style:{paddingLeft:"10px"}},e.original.acc_number))}},{Header:"Stmt Txn Date",accessor:"stmt_txn_date",Cell:function(e){return ve(e.value,!0)}},{Header:r.a.createElement("div",{className:"text-right"},"Amount"),accessor:"cr_amt",Cell:function(t){return Re(xe(t.value,e.currency_code))}},{Header:"Stmt Txn ID",accessor:"stmt_txn_id"},{Header:"Description",accessor:"descr",width:230,Cell:function(e){return r.a.createElement(Rt,{full_text:Ze(e.value),no_reduce:!0})}},{Header:"Last Updated at",sortable:!1,id:"updated_at",accessor:function(t){return r.a.createElement(Ft,{data:t,timedata:e.state.server_time,item:"last_updated_at",time_limit:[e.state.capture_payment_late1,e.state.capture_payment_late2]})}},{Header:r.a.createElement("div",{className:"text-center"},"Matching FA ID"),id:"chk_fa_id",accessor:function(t){return r.a.createElement("div",{className:"text-center"}," ",e.chk_fa_id(t))}},{Header:"Matching Status",id:"recon_status",accessor:function(e){return r.a.createElement(Rt,{full_text:Ze(e.recon_status),overlay:e.recon_desc,no_reduce:!0})}},{Header:"Action",id:"action",minWidth:140,maxWidth:180,show:!!E("recon","reinitiate_recon"),accessor:function(t){return r.a.createElement(ar,{parent:"home",show_btn:!0,data:t,onSync:e.getList})}},{Header:"Action",id:"reinitiate",minWidth:140,maxWidth:180,show:!!E("recon","reinitiate_recon"),accessor:function(t){return r.a.createElement(r.a.Fragment,null," ","80_recon_done"!=t.recon_status&&"10_capture_payment_pending"!=t.recon_status||null!=t.recon_status&&"10_capture_payment_pending"!=t.recon_status&&null==t.loan_doc_id?r.a.createElement("input",{id:t.id,type:"button",value:"Recon Again",onClick:function(a){e.handleReinitiateRecon(a,t)},className:"btn btn-primary btn-std}"}):r.a.createElement("input",{disabled:!0,id:t.id,type:"button",value:"Recon Again",onClick:function(a){e.handleReinitiateRecon(a,t)},className:"btn btn-primary btn-std}"}))}}];case"unmatched_debits":return[{Header:"Network",accessor:"network_prvdr_code",sortable:!1,maxWidth:85,Cell:function(e){return r.a.createElement(Le,{logotype:e.value})}},{Header:"Account Number",accessor:"acc_prvdr_code",sortable:!1,width:150,maxWidth:150,Cell:function(e){return r.a.createElement("div",{className:"d-flex align-items-center"}," ",r.a.createElement("div",null,r.a.createElement(Le,{logotype:e.value,style:{width:"30px",height:"20px"}})),r.a.createElement("div",{style:{paddingLeft:"10px"}},e.original.acc_number))}},{Header:"Stmt Txn Date",width:150,maxWidth:150,accessor:"stmt_txn_date",Cell:function(e){return ve(e.value,!0)}},{Header:r.a.createElement("div",{className:"text-right"},"Amount"),width:130,maxWidth:130,accessor:"dr_amt",Cell:function(t){return Re(xe(t.value,e.currency_code))}},{Header:"Stmt Txn ID",width:100,maxWidth:100,accessor:"stmt_txn_id"},{Header:r.a.createElement("div",{className:"text-center"},"Description"),accessor:"descr",Cell:function(e){return r.a.createElement(Rt,{full_text:Ze(e.value),no_reduce:!0})}},{Header:"Last Updated at",sortable:!1,width:130,maxWidth:130,id:"updated_at",accessor:function(t){return r.a.createElement(Ft,{data:t,timedata:e.state.server_time,item:"last_updated_at",time_limit:[e.state.capture_payment_late1,e.state.capture_payment_late2]})}},{Header:r.a.createElement("div",{className:"text-center"},"Matching FA ID"),minWidth:140,maxWidth:180,id:"chk_fa_id",accessor:function(t){return r.a.createElement("div",{className:"text-center"},e.chk_fa_id(t))}},{Header:"Matching Status",minWidth:140,maxWidth:200,id:"recon_status",accessor:function(e){return r.a.createElement(Rt,{full_text:Ze(e.recon_status),overlay:e.recon_desc,no_reduce:!0})}},{Header:"Action",id:"action",minWidth:140,maxWidth:180,show:!!E("recon","reinitiate_recon"),accessor:function(t){return r.a.createElement(ar,{parent:"home",show_btn:!0,data:t,onSync:e.getList})}},{Header:"Action",id:"reinitiate",minWidth:140,maxWidth:180,show:!!E("recon","reinitiate_recon"),accessor:function(t){return r.a.createElement(r.a.Fragment,null," ","80_recon_done"!=t.recon_status&&"10_capture_payment_pending"!=t.recon_status||null!=t.recon_status&&"10_capture_payment_pending"!=t.recon_status&&null==t.loan_doc_id?r.a.createElement("input",{id:t.id,type:"button",value:"Recon Again",onClick:function(a){e.handleReinitiateRecon(a,t)},className:"btn btn-primary btn-std}"}):r.a.createElement("input",{disabled:!0,id:t.id,type:"button",value:"Recon Again",onClick:function(a){e.handleReinitiateRecon(a,t)},className:"btn btn-primary btn-std}"}))}}];case"review_pending_payments":return[{Header:"Network",accessor:"network_prvdr_code",sortable:!1,maxWidth:85,Cell:function(e){return r.a.createElement(Le,{logotype:e.value})}},{Header:"Account Number",accessor:"acc_prvdr_code",sortable:!1,width:150,maxWidth:150,Cell:function(e){return r.a.createElement("div",{className:"d-flex align-items-center"}," ",r.a.createElement("div",null,r.a.createElement(Le,{logotype:e.value,style:{width:"30px",height:"20px"}})),r.a.createElement("div",{style:{paddingLeft:"10px"}},e.original.acc_number))}},{Header:"Stmt Txn Date",width:110,accessor:"stmt_txn_date",Cell:function(e){return ve(e.value,!0)}},{Header:r.a.createElement("div",{className:"text-right"},"Amount"),width:120,accessor:"cr_amt",Cell:function(t){return Re(xe(t.value,e.currency_code))}},{Header:"Stmt Txn ID",width:130,accessor:"stmt_txn_id"},{Header:"Description",accessor:"descr",Cell:function(e){return r.a.createElement(Rt,{full_text:Ze(e.value),no_reduce:!0})}},{Header:"Last Updated at",minWxidth:190,maxWidth:190,sortable:!1,id:"updated_at",accessor:function(t){return r.a.createElement(Ft,{data:t,timedata:e.state.server_time,item:"last_updated_at",time_limit:[e.state.capture_payment_late1,e.state.capture_payment_late2]})}},{Header:"Matching FA ID",minWidth:140,maxWidth:200,id:"chk_fa_id",accessor:function(t){return e.chk_fa_id(t)}},{Header:"Review Reason",minWidth:140,maxWidth:200,id:"review_reason",accessor:function(e){return Ze(e.review_reason)}},{Header:"Action",minWidth:140,maxWidth:200,id:"recon_status",accessor:function(t){return e.handle_capture(t)}}]}},e.refreshList=Object(j.a)(Vd().mark(function t(){return Vd().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({refresh:!0}),t.next=3,e.getList();case 3:case"end":return t.stop()}},t)})),e.getListTitle=function(){switch(e.props.list_name){case"unmatched_credits":return"Unknown Credit Txns (Last 5 days) ";case"review_pending_payments":return"Review Pending Payments";case"unmatched_debits":return"Unknown Debit Txns (Last 5 days) "}},e}return Object(o.a)(a,[{key:"componentWillMount",value:function(){var e=this;setInterval(function(){return e.refreshList()},6e4);var t=C("capture_payment_late1"),a=C("capture_payment_late2");this.setState({capture_payment_late1:t,capture_payment_late2:a});var n=v("market"),r={country_code:n.country_code,time_zone:n.time_zone,status:""};_r(Object(X.a)({},r,{status:"enabled",biz_account:!0})).then(function(t){if(t&&"success"===t.status){var a=[];t.data.list.map(function(e){return a.push(e.acc_prvdr_code)}),e.setState(function(e){return e.all_Acc_pvdrs=a})}}),this.getList()}},{key:"chk_fa_id",value:function(e){var t=e.loan_doc_id;e.recon_status;return t?r.a.createElement(ee.a,{to:"/fa/view/"+t,style:{color:"grey"},target:"_blank"},t):"NA"}},{key:"unMatchPaydynClickhandler",value:function(e,t){var a=this,n=v("market").country_code;if(e)if("ALL"!==t){-1==this.state.dyn_Btn_selected.findIndex(function(e){return e===t})&&(this.state.dyn_Btn_selected.push(t),this.setState(function(a){return a.filter_actions[t][1].status=e}),this.state.dyn_Btn_selected.length===this.state.all_Acc_pvdrs.length&&this.setState(function(e){return e.all_Btn_status=!0})),localStorage.setItem([n]+"_unMatchedCredits",JSON.stringify(this.state.dyn_Btn_selected))}else{var r=[];this.state.all_Acc_pvdrs.map(function(e){a.state.filter_actions[e][1].status=!0,r.push(e)}),this.setState(function(e){return e.dyn_Btn_selected=r}),localStorage.setItem([n]+"_unMatchedCredits",JSON.stringify(r)),this.setState(function(t){return t.all_Btn_status=e})}else if(!e)if("ALL"!==t){var l=this.state.dyn_Btn_selected.findIndex(function(e){return e===t});l>-1&&(this.state.dyn_Btn_selected.splice(l,1),this.setState(function(a){return a.filter_actions[t][1].status=e})),this.setState(function(e){return e.all_Btn_status=!1}),localStorage.setItem([n]+"_unMatchedCredits",JSON.stringify(this.state.dyn_Btn_selected))}else this.state.all_Acc_pvdrs.map(function(e){return a.state.filter_actions[e][1].status=!1}),this.setState(function(e){return e.dyn_Btn_selected=[]}),localStorage.setItem([n]+"_unMatchedCredits",JSON.stringify([])),this.setState(function(t){return t.all_Btn_status=e});var c=v([n]+"_unMatchedCredits"),s=[];c.map(function(e){var t=a.state.lists.filter(function(t){return t.acc_prvdr_code===e});s.push.apply(s,Object(re.a)(t))}),this.setState(function(e){return e.copy=s})}},{key:"unMatchDebitdynClickhandler",value:function(e,t){var a=this,n=v("market").country_code;if(e)if("ALL"!==t){-1==this.state.dyn_Btn_selected.findIndex(function(e){return e===t})&&(this.state.dyn_Btn_selected.push(t),this.setState(function(a){return a.filter_actions[t][1].status=e}),this.state.dyn_Btn_selected.length===this.state.all_Acc_pvdrs.length&&this.setState(function(e){return e.all_Btn_status=!0})),localStorage.setItem([n]+"_unMatchedDebits",JSON.stringify(this.state.dyn_Btn_selected))}else{var r=[];this.state.all_Acc_pvdrs.map(function(e){a.state.filter_actions[e][1].status=!0,r.push(e)}),this.setState(function(e){return e.dyn_Btn_selected=r}),localStorage.setItem([n]+"_unMatchedDebits",JSON.stringify(r)),this.setState(function(t){return t.all_Btn_status=e})}else if(!e)if("ALL"!==t){var l=this.state.dyn_Btn_selected.findIndex(function(e){return e===t});l>-1&&(this.state.dyn_Btn_selected.splice(l,1),this.setState(function(a){return a.filter_actions[t][1].status=e})),this.setState(function(e){return e.all_Btn_status=!1}),localStorage.setItem([n]+"_unMatchedDebits",JSON.stringify(this.state.dyn_Btn_selected))}else this.state.all_Acc_pvdrs.map(function(e){return a.state.filter_actions[e][1].status=!1}),this.setState(function(e){return e.dyn_Btn_selected=[]}),localStorage.setItem([n]+"_unMatchedDebits",JSON.stringify([])),this.setState(function(t){return t.all_Btn_status=e});var c=v([n]+"_unMatchedDebits"),s=[];c.map(function(e){var t=a.state.lists.filter(function(t){return t.acc_prvdr_code===e});s.push.apply(s,Object(re.a)(t))}),this.setState(function(e){return e.copy=s})}},{key:"reviewPendingPaydynClickhandler",value:function(e,t){var a=this,n=v("market").country_code;if(e)if("ALL"!==t){-1==this.state.dyn_Btn_selected.findIndex(function(e){return e===t})&&(this.state.dyn_Btn_selected.push(t),this.setState(function(a){return a.filter_actions[t][1].status=e}),this.state.dyn_Btn_selected.length===this.state.all_Acc_pvdrs.length&&this.setState(function(e){return e.all_Btn_status=!0})),localStorage.setItem([n]+"_reviewPendingPayments",JSON.stringify(this.state.dyn_Btn_selected))}else{var r=[];this.state.all_Acc_pvdrs.map(function(e){a.state.filter_actions[e][1].status=!0,r.push(e)}),this.setState(function(e){return e.dyn_Btn_selected=r}),localStorage.setItem([n]+"_reviewPendingPayments",JSON.stringify(r)),this.setState(function(t){return t.all_Btn_status=e})}else if(!e)if("ALL"!==t){var l=this.state.dyn_Btn_selected.findIndex(function(e){return e===t});l>-1&&(this.state.dyn_Btn_selected.splice(l,1),this.setState(function(a){return a.filter_actions[t][1].status=e})),this.setState(function(e){return e.all_Btn_status=!1}),localStorage.setItem([n]+"_reviewPendingPayments",JSON.stringify(this.state.dyn_Btn_selected))}else this.state.all_Acc_pvdrs.map(function(e){return a.state.filter_actions[e][1].status=!1}),this.setState(function(e){return e.dyn_Btn_selected=[]}),localStorage.setItem([n]+"_reviewPendingPayments",JSON.stringify([])),this.setState(function(t){return t.all_Btn_status=e});var c=v([n]+"_reviewPendingPayments"),s=[];c.map(function(e){var t=a.state.lists.filter(function(t){return t.acc_prvdr_code===e});s.push.apply(s,Object(re.a)(t))}),this.setState(function(e){return e.copy=s})}},{key:"componentDidUpdate",value:function(e,t,a){e.refresh!=this.props.refresh&&this.refreshList()}},{key:"render",value:function(){var e=this;return r.a.createElement(kc.a,null,r.a.createElement(ka.a,null,r.a.createElement("div",{className:"card-header card-header-icon card-header-primary home_header_d-flex_at_response justify-space-between"},"unmatched_credits"==this.props.list_name&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"home_header_d-flex_at_response"},r.a.createElement("h4",{className:"card-title text-white tableHead_font "},this.getListTitle()),this.state.lists.length>0&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"countREL card-title"},r.a.createElement("button",{className:"filterBtns allBtn_size",onClick:function(){return e.unMatchPaydynClickhandler(!e.state.all_Btn_status,"ALL")},style:{filter:this.state.all_Btn_status?"":"opacity(0.5)"}},"ALL"),r.a.createElement("div",{className:"countABS",style:{backgroundColor:this.state.all_Btn_status?"":"lightgrey"}},r.a.createElement("label",null,this.state.all_count))),this.state.all_Acc_pvdrs.map(function(t,a){return r.a.createElement("div",{key:a,className:"countREL card-title"},r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:{width:60,height:30},className:"filterBtns",onClick:function(){return e.unMatchPaydynClickhandler(!e.state.filter_actions[t][1].status,t)}},r.a.createElement("img",{className:"img-fluid",src:"/img/".concat(t,"_logo_color.png"),style:{filter:e.state.filter_actions[t]&&!e.state.filter_actions[t][1].status?"opacity(0.5)":""}})),r.a.createElement("div",{className:"countABS",style:{backgroundColor:e.state.filter_actions[t]&&!e.state.filter_actions[t][1].status?"lightgrey":""}},r.a.createElement("label",null,e.state.filter_actions[t]&&e.state.filter_actions[t][0].count))))}))),r.a.createElement(kc.a.Toggle,{className:"col",as:ka.a.Header,eventKey:"0",onClick:function(){return e.handleToggle("Account")}},r.a.createElement(Oc.a,{className:this.state.show_table?"arrow-icon down accordin-arrow":"arrow-icon accordin-arrow",size:"18"}))),"unmatched_debits"==this.props.list_name&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"home_header_d-flex_at_response"},r.a.createElement("h4",{className:"card-title text-white tableHead_font  "},this.getListTitle()),r.a.createElement("br",null),this.state.lists.length>0&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"countREL card-title"},r.a.createElement("button",{className:"filterBtns allBtn_size",onClick:function(){return e.unMatchDebitdynClickhandler(!e.state.all_Btn_status,"ALL")},style:{filter:this.state.all_Btn_status?"":"opacity(0.5)"}},"ALL"),r.a.createElement("div",{className:"countABS",style:{backgroundColor:this.state.all_Btn_status?"":"lightgrey"}},r.a.createElement("label",null,this.state.all_count))),this.state.all_Acc_pvdrs.map(function(t,a){return r.a.createElement("div",{key:a,className:"countREL card-title"},r.a.createElement("div",{style:{width:60,height:30},className:"filterBtns",onClick:function(){return e.unMatchDebitdynClickhandler(!e.state.filter_actions[t][1].status,t)}},r.a.createElement("img",{className:"img-fluid",src:"/img/".concat(t,"_logo_color.png"),style:{filter:e.state.filter_actions[t]&&!e.state.filter_actions[t][1].status?"opacity(0.5)":""}})),r.a.createElement("div",{className:"countABS",style:{backgroundColor:e.state.filter_actions[t]&&!e.state.filter_actions[t][1].status?"lightgrey":""}},r.a.createElement("label",null,e.state.filter_actions[t]&&e.state.filter_actions[t][0].count)))}))),r.a.createElement(kc.a.Toggle,{className:"col",as:ka.a.Header,eventKey:"0",onClick:function(){return e.handleToggle("Account")}},r.a.createElement(Oc.a,{className:this.state.show_table?"arrow-icon down accordin-arrow":"arrow-icon accordin-arrow",size:"18"}))),"review_pending_payments"==this.props.list_name&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"home_header_d-flex_at_response"},r.a.createElement("h4",{className:"card-title text-white tableHead_font card-body title-bottom"},this.getListTitle()),r.a.createElement("br",null),this.state.lists.length>0&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"countREL card-title"},r.a.createElement("button",{className:"filterBtns allBtn_size",onClick:function(){return e.reviewPendingPaydynClickhandler(!e.state.all_Btn_status,"ALL")},style:{filter:this.state.all_Btn_status?"":"opacity(0.5)"}},"ALL"),r.a.createElement("div",{className:"countABS",style:{backgroundColor:this.state.all_Btn_status?"":"lightgrey"}},r.a.createElement("label",null,this.state.all_count))),this.state.all_Acc_pvdrs.map(function(t,a){return r.a.createElement("div",{key:a,className:"countREL card-title"},r.a.createElement("div",{style:{width:60,height:30},className:"filterBtns",onClick:function(){return e.reviewPendingPaydynClickhandler(!e.state.filter_actions[t][1].status,t)}},r.a.createElement("img",{className:"img-fluid",src:"/img/".concat(t,"_logo_color.png"),style:{filter:e.state.filter_actions[t]&&!e.state.filter_actions[t][1].status?"opacity(0.5)":""}})),r.a.createElement("div",{className:"countABS",style:{backgroundColor:e.state.filter_actions[t]&&!e.state.filter_actions[t][1].status?"lightgrey":""}},r.a.createElement("label",null,e.state.filter_actions[t]&&e.state.filter_actions[t][0].count)))}))),r.a.createElement(kc.a.Toggle,{className:"col",as:ka.a.Header,eventKey:"0",onClick:function(){return e.handleToggle("Account")}},r.a.createElement(Oc.a,{className:this.state.show_table?"arrow-icon down accordin-arrow":"arrow-icon accordin-arrow",size:"18"})))),r.a.createElement("div",{className:"card-body no-padding",style:{padding:"0 !important"}},this.state.server_time&&r.a.createElement(kc.a.Collapse,{eventKey:"0"},r.a.createElement(ka.a.Body,{style:{marginTop:(this.props.list_name,"28px")}},r.a.createElement(za,{showPag:!0,minRow:0,row_data:void 0!==this.state.copy?this.state.copy:[],column_data:this.state.columndatas,defaultSorted:[{id:"stmt_txn_date",desc:!0}],resizable:!1,defaultPageSize:10,timeServer:this.state.server_time,excessTimeaction:!0,appliedRowblink:!1,paymentRowblinktime:this.state.capture_payment_late2,exportCSV:"review_pending_payments"!==this.props.list_name,csvData:void 0!==this.state.copy?this.state.copy:[],csvFile:this.getListTitle(),csvstyle:!0,loader:void 0!==this.state.copy}))))))}}]),a}(ut);function Jd(){Jd=function(){return e};var e={},t=Object.prototype,a=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",l=n.asyncIterator||"@@asyncIterator",c=n.toStringTag||"@@toStringTag";function s(e,t,a){return Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(k){s=function(e,t,a){return e[t]=a}}function o(e,t,a,n){var r=t&&t.prototype instanceof m?t:m,l=Object.create(r.prototype),c=new N(n||[]);return l._invoke=function(e,t,a){var n="suspendedStart";return function(r,l){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===r)throw l;return C()}for(a.method=r,a.arg=l;;){var c=a.delegate;if(c){var s=E(c,a);if(s){if(s===d)continue;return s}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===n)throw n="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);n="executing";var o=i(e,t,a);if("normal"===o.type){if(n=a.done?"completed":"suspendedYield",o.arg===d)continue;return{value:o.arg,done:a.done}}"throw"===o.type&&(n="completed",a.method="throw",a.arg=o.arg)}}}(e,a,c),l}function i(e,t,a){try{return{type:"normal",arg:e.call(t,a)}}catch(k){return{type:"throw",arg:k}}}e.wrap=o;var d={};function m(){}function u(){}function p(){}var _={};s(_,r,function(){return this});var h=Object.getPrototypeOf,f=h&&h(h(x([])));f&&f!==t&&a.call(f,r)&&(_=f);var v=p.prototype=m.prototype=Object.create(_);function g(e){["next","throw","return"].forEach(function(t){s(e,t,function(e){return this._invoke(t,e)})})}function y(e,t){var n;this._invoke=function(r,l){function c(){return new t(function(n,c){!function n(r,l,c,s){var o=i(e[r],e,l);if("throw"!==o.type){var d=o.arg,m=d.value;return m&&"object"==typeof m&&a.call(m,"__await")?t.resolve(m.__await).then(function(e){n("next",e,c,s)},function(e){n("throw",e,c,s)}):t.resolve(m).then(function(e){d.value=e,c(d)},function(e){return n("throw",e,c,s)})}s(o.arg)}(r,l,n,c)})}return n=n?n.then(c,c):c()}}function E(e,t){var a=e.iterator[t.method];if(void 0===a){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method))return d;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var n=i(a,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,d;var r=n.arg;return r?r.done?(t[e.resultName]=r.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):r:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function b(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function w(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function N(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(b,this),this.reset(!0)}function x(e){if(e){var t=e[r];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,l=function t(){for(;++n<e.length;)if(a.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return l.next=l}}return{next:C}}function C(){return{value:void 0,done:!0}}return u.prototype=p,s(v,"constructor",p),s(p,"constructor",u),u.displayName=s(p,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===u||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,s(e,c,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},g(y.prototype),s(y.prototype,l,function(){return this}),e.AsyncIterator=y,e.async=function(t,a,n,r,l){void 0===l&&(l=Promise);var c=new y(o(t,a,n,r),l);return e.isGeneratorFunction(a)?c:c.next().then(function(e){return e.done?e.value:c.next()})},g(v),s(v,c,"Generator"),s(v,r,function(){return this}),s(v,"toString",function(){return"[object Generator]"}),e.keys=function(e){var t=[];for(var a in e)t.push(a);return t.reverse(),function a(){for(;t.length;){var n=t.pop();if(n in e)return a.value=n,a.done=!1,a}return a.done=!0,a}},e.values=x,N.prototype={constructor:N,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!e)for(var t in this)"t"===t.charAt(0)&&a.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(a,n){return c.type="throw",c.arg=e,t.next=a,n&&(t.method="next",t.arg=void 0),!!n}for(var r=this.tryEntries.length-1;r>=0;--r){var l=this.tryEntries[r],c=l.completion;if("root"===l.tryLoc)return n("end");if(l.tryLoc<=this.prev){var s=a.call(l,"catchLoc"),o=a.call(l,"finallyLoc");if(s&&o){if(this.prev<l.catchLoc)return n(l.catchLoc,!0);if(this.prev<l.finallyLoc)return n(l.finallyLoc)}else if(s){if(this.prev<l.catchLoc)return n(l.catchLoc,!0)}else{if(!o)throw new Error("try statement without catch or finally");if(this.prev<l.finallyLoc)return n(l.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&a.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var l=r;break}}l&&("break"===e||"continue"===e)&&l.tryLoc<=t&&t<=l.finallyLoc&&(l=null);var c=l?l.completion:{};return c.type=e,c.arg=t,l?(this.method="next",this.next=l.finallyLoc,d):this.complete(c)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.finallyLoc===e)return this.complete(a.completion,a.afterLoc),w(a),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.tryLoc===e){var n=a.completion;if("throw"===n.type){var r=n.arg;w(a)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,a){return this.delegate={iterator:x(e),resultName:t,nextLoc:a},"next"===this.method&&(this.arg=void 0),d}},e}function Kd(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(u.a)(e);if(t){var r=Object(u.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(m.a)(this,a)}}var Qd=function(e){Object(d.a)(a,e);var t=Kd(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(e=t.call.apply(t,[this].concat(l))).state={columns:[],lists:[],copy:[],refresh:!1,dyn_Btn_selected:[],all_count:0,filter_actions:{},all_Btn_status:!1,all_Acc_pvdrs:[],modal:!1,sortVariable:"",defaultSortOrder:!0,disb_manually:!0,show_table:!1},e.handleToggle=function(t){switch(t){case"Account":e.setState(function(t){return t.show_table=!e.state.show_table})}},e.getListData=function(){var t=C("fa_rm_approval_late1"),a=C("fa_rm_approval_late2"),n=C("fa_late1"),r=C("fa_late2"),l=C("fa_cust_late1"),c=C("fa_cust_late2");e.setState({fa_rm_approval_late1:t,fa_rm_approval_late2:a,fa_late1:n,fa_late2:r,fa_cust_late1:l,fa_cust_late2:c});var s=v("market").country_code;e.getListRows().then(function(t){if(t){var a=e.getListColumns();if(e.setState({lists:t,columns:a,refresh:!1}),e.setState(function(e){return e.all_count=t.length}),"pending_w_cust"===e.props.list_name){if(e.setState(function(e){return e.copy=[]}),0!==t.length){var n=void 0===v([s]+"_pendingCUS")?e.state.all_Acc_pvdrs:v([s]+"_pendingCUS");e.state.all_Acc_pvdrs.map(function(a){var r=t.filter(function(e){return e.acc_prvdr_code===a}).length;e.setState(function(e){return e.filter_actions[a]=[{count:0},{status:n.includes(a)}]}),e.CUSdynClickhandler(e.state.filter_actions[a][1].status,a),e.setState(function(e){return e.filter_actions[a][0].count=r})})}}else if("pending_w_rm"===e.props.list_name){if(e.setState(function(e){return e.copy=[]}),0!==t.length){var r=void 0===v([s]+"_pendingRM")?e.state.all_Acc_pvdrs:v([s]+"_pendingRM");e.state.all_Acc_pvdrs.map(function(a){var n=t.filter(function(e){return e.acc_prvdr_code===a}).length;e.setState(function(e){return e.filter_actions[a]=[{count:0},{status:r.includes(a)}]}),e.RMdynClickhandler(e.state.filter_actions[a][1].status,a),e.setState(function(e){return e.filter_actions[a][0].count=n})})}}else if("active_cust_without_fa"===e.props.list_name){if(0!==t.length){var l=void 0===v([s]+"_withoutFa")?e.state.all_Acc_pvdrs:v([s]+"_withoutFa");e.state.all_Acc_pvdrs.map(function(a){var n=t.filter(function(e){return e.acc_prvdr_code===a}).length;e.setState(function(e){return e.filter_actions[a]=[{count:0},{status:l.includes(a)}]}),e.CustWithOutFaClickhandler(e.state.filter_actions[a][1].status,a),e.setState(function(e){return e.filter_actions[a][0].count=n})})}}else if("pending_capture_disbursal"===e.props.list_name&&(e.setState(function(e){return e.copy=[]}),0!==t.length)){var c=void 0===v([s]+"_faPendingdisbcapture")?e.state.all_Acc_pvdrs:v([s]+"_faPendingdisbcapture");e.state.all_Acc_pvdrs.map(function(a){var n=t.filter(function(e){return e.acc_prvdr_code===a}).length;e.setState(function(e){return e.filter_actions[a]=[{count:0},{status:c.includes(a)}]}),e.FAPendingCaptureClickhandler(e.state.filter_actions[a][1].status,a),e.setState(function(e){return e.filter_actions[a][0].count=n})})}}})},e.getListRows=Object(j.a)(Jd().mark(function t(){var a,n,r,l,c,s;return Jd().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:t.t0=e.props.list_name,t.next="pending_w_cust"===t.t0?3:"pending_w_rm"===t.t0?10:"active_cust_without_fa"===t.t0?17:"pending_capture_disbursal"===t.t0?25:32;break;case 3:return r={pending_w_cust:"true",mode:"search",alert:!1},t.next=6,fn(e.req({loan_search_criteria:r}));case 6:return a=t.sent,e.setState(function(e){return e.sortVariable="loan_doc_id"}),a&&"success"===a.status&&(n=a.data.results),t.abrupt("break",32);case 10:return l={pending_w_rm:"true"},t.next=13,Ll(e.req({loan_appl_search_criteria:l}));case 13:return a=t.sent,e.setState(function(e){return e.sortVariable="loan_doc_id"}),a&&"success"===a.status&&(n=a.data),t.abrupt("break",32);case 17:return c={active_cust:"true",not_have_ongoing_loan:"true",not_have_overdue_loan:"true",not_have_pending_loan_appl:"true",profile_status:"open",status:"enabled"},t.next=20,ga(e.req({borrower_search_criteria:c}));case 20:return a=t.sent,e.setState(function(e){return e.sortVariable="row"}),e.setState(function(e){return e.defaultSortOrder=!1}),a&&"success"===a.status&&(n=a.data.results),t.abrupt("break",32);case 25:return s={status:"pending_disb_capture",disburse_attempt:!1,mode:"search"},t.next=28,vn(e.req({loan_search_criteria:s}));case 28:a=t.sent,e.setState(function(e){return e.sortVariable="row"}),e.setState(function(e){return e.defaultSortOrder=!1}),a&&"success"===a.status&&(n=a.data.results);case 32:if(!a||"success"!==a.status){t.next=35;break}return e.setState(function(e){return e.server_time=a.server_time}),t.abrupt("return",n);case 35:case"end":return t.stop()}},t)})),e.getListColumns=function(){var t=E("customer","risk_category");switch(e.props.list_name){case"pending_w_cust":return[{Header:"ACC PRVDR",id:"acc_prvdr_code",sortable:!1,maxWidth:85,accessor:function(e){return r.a.createElement(Le,{logotype:e.acc_prvdr_code})}},{Header:"FA ID",id:"loan_doc_id",sortable:!1,accessor:function(e){return r.a.createElement(ee.a,{to:"fa/view/"+e.loan_doc_id,target:"_blank"},e.loan_doc_id)}},{Header:"A/C Number",sortable:!1,maxWidth:250,id:"acc_number",accessor:function(e){return r.a.createElement(ee.a,{to:"/borrower/indiv/view/"+e.cust_id,target:"_blank"},e.acc_number)}},{Header:r.a.createElement(r.a.Fragment,null,"Biz Name &",r.a.createElement("br",null),"Mobile Number"),id:"biz_name",maxWidth:300,sortMethod:function(t,a){return e.sortBiz(t,a)},accessor:function(e){return r.a.createElement("div",null,r.a.createElement(Rt,{full_text:e.biz_name,overlay:e.cust_name,no_reduce:!0}),r.a.createElement("label",{className:"no-margin d-block"},e.cust_mobile_num))}},{Header:function(){return r.a.createElement("div",{className:"tableAmount_rightAlign",style:{paddingRight:15}},"FA Amount")},id:"loan_principal",sortMethod:function(t,a){return e.sortAmount(t,a)},accessor:function(t){return r.a.createElement("div",{className:"tableAmount_rightAlign",style:{paddingRight:15}},xe(t.loan_principal,e.currency_code))}},{Header:"Applied & Approved",id:"loan_appl_date",minWidth:210,maxWidth:275,sortMethod:function(t,a){return e.sortTime(t,a)},accessor:function(t){return r.a.createElement("div",null,r.a.createElement("span",null,"Applied : ",r.a.createElement(Ft,{data:t,timedata:e.state.server_time,item:"applied",time_limit:[e.state.fa_late1,e.state.fa_late2]})),r.a.createElement("br",null),r.a.createElement("span",null,"Approved : ",r.a.createElement(Ft,{data:t,timedata:e.state.server_time,item:"approved",time_limit:[e.state.fa_cust_late1,e.state.fa_cust_late2]})))}},{Header:function(){return r.a.createElement("div",{className:"tableAmount_centerAlign"},"Next Action")},id:"action",width:190,accessor:function(t){return r.a.createElement(Ft,{data:t,timedata:e.state.server_time,item:"next_action_conf",action:e.handleOpen,time_limit:[e.state.fa_late1,e.state.fa_late2]})}}];case"pending_w_rm":return[{Header:"ACC PRVDR",id:"acc_prvdr_code",sortable:!1,maxWidth:85,accessor:function(e){return r.a.createElement(Le,{logotype:e.acc_prvdr_code})}},{Header:"FA Application ID",sortable:!1,id:"loan_appl_doc_id",accessor:function(e){return r.a.createElement(ee.a,{to:"/fa_appl/view/"+e.loan_appl_doc_id,target:"_blank"},e.loan_appl_doc_id)}},{Header:"A/C Number",sortable:!1,id:"acc_number",accessor:function(e){return r.a.createElement(ee.a,{to:"/borrower/indiv/view/"+e.cust_id,target:"_blank"},e.acc_number)}},{Header:"Mobile Number",sortable:!1,id:"cust_mobile_num",accessor:function(e){return e.cust_mobile_num}},{Header:"Biz Name",sortMethod:function(t,a){return e.sortBiz(t,a)},id:"biz_name",accessor:function(e){return r.a.createElement(Rt,{full_text:e.biz_name,overlay:e.cust_name,no_reduce:!0})}},{Header:function(){return r.a.createElement("div",{className:"tableAmount_rightAlign",style:{paddingRight:15}},"FA Amount")},id:"loan_principal",sortMethod:function(t,a){return e.sortAmount(t,a)},accessor:function(t){return r.a.createElement("div",{className:"tableAmount_rightAlign",style:{paddingRight:15}},xe(t.loan_principal,e.currency_code))}},{Header:"Applied",sortMethod:function(t,a){return e.sortTime(t,a)},id:"loan_appl_date",accessor:function(t){return r.a.createElement(Ft,{data:t,timedata:e.state.server_time,item:"applied",time_limit:[e.state.fa_rm_approval_late1,e.state.fa_rm_approval_late2]})}},{Header:"Next Action",id:"loan_approver_name",sortable:!1,accessor:function(t){return r.a.createElement(Ft,{data:t,timedata:e.state.server_time,item:"next_action",time_limit:[e.state.fa_rm_approval_late1,e.state.fa_rm_approval_late2]})}}];case"active_cust_without_fa":return[{Header:"SI No.",id:"row",Cell:function(e){return r.a.createElement("div",null,e.index+1)}},{Header:"ACC PRVDR",id:"acc_prvdr_code",sortable:!1,accessor:function(e){return r.a.createElement(Le,{logotype:e.acc_prvdr_code})}},{Header:"FLOW Cust ID",id:"cust_id",sortable:!1,accessor:function(e){return r.a.createElement(ee.a,{to:"/borrower/indiv/view/"+e.cust_id,target:"_blank",className:"flow_custid"},e.cust_id)}},{Header:"A/C Number",id:"acc_number",sortable:!1,accessor:function(e){return e.acc_number}},{Header:"Category",id:"category",accessor:function(e){return e.category}},{Header:"Business Name",id:"biz_name",sortMethod:function(t,a){return e.sortBiz(t,a)},accessor:function(e){return r.a.createElement(Rt,{full_text:e.biz_name,overlay:Ne(e)})}},{Header:"RM Name",id:"flow_rel_mgr_name",accessor:function(e){return e.flow_rel_mgr_name}},{Header:"Reg RM Name",id:"reg_flow_rel_mgr_name",accessor:function(e){return e.reg_flow_rel_mgr_name}},{Header:"Total FAs",id:"tot_loans",accessor:function(e){return e.tot_loans?e.tot_loans:0}},{Header:"Reg Date",id:"reg_date",sortMethod:function(t,a){return e.sortDate(t,a)},accessor:function(e){return e.reg_date?r.a.createElement("span",null,ge(e.reg_date)):"NA"}},{Header:"Last Visit",id:"last_visit_date",sortMethod:function(t,a){return e.sortDate(t,a)},accessor:function(e){return e.last_visit_date?r.a.createElement("span",null,ge(e.last_visit_date)):"NA"}},{Header:"Last FA",id:"last_loan_date",sortMethod:function(t,a){return e.sortDate(t,a)},accessor:function(e){return e.last_loan_date?r.a.createElement("span",null,ge(e.last_loan_date)):"NA"}},{Header:"Cond Count",id:"cond_count",accessor:function(e){return e.cond_count}},{Header:"Territory",id:"territory",accessor:function(e){return Ze(e.territory)}},{Header:"Location",id:"location",accessor:function(e){return Ze(e.location)}},{Header:"Profile Status",id:"profile_status",accessor:function(e){return Ze(e.profile_status)}},{Header:"Risk Category",id:"risk_category",show:t,accessor:function(e){return t&&Ze(e.risk_category)}}];case"pending_capture_disbursal":return[{Header:"ACC PRVDR",id:"acc_prvdr_code",sortable:!1,maxWidth:85,accessor:function(e){return r.a.createElement(Le,{logotype:e.acc_prvdr_code})}},{Header:"FA ID & A/C Number",id:"loan_doc_id",minWidth:140,sortable:!1,accessor:function(e){return r.a.createElement("div",null,r.a.createElement(ee.a,{className:"d-block",to:"/fa/view/"+e.loan_doc_id,target:"_blank"},e.loan_doc_id),r.a.createElement(ee.a,{className:"d-block",to:"/borrower/indiv/view/"+e.cust_id,target:"_blank"},e.acc_number))}},{Header:r.a.createElement(r.a.Fragment,null,"Biz Name",r.a.createElement("br",null),"& Mobile Number"),id:"cust_mobile_num",sortMethod:function(t,a){return e.sortBiz(t,a)},minWidth:150,accessor:function(t){return r.a.createElement("div",null,r.a.createElement(Rt,{className:"d-block",full_text:t.biz_name,overlay:"".concat(t.cust_name," / ").concat(xe(t.loan_principal,e.currency_code)),no_reduce:!0}),r.a.createElement("label",{className:"no-margin d-block"},t.cust_mobile_num))}},{Header:"Applied & Approved",id:"loan_appl_date",width:185,sortable:!1,accessor:function(t){return r.a.createElement("div",null,r.a.createElement("span",null,"Applied :  ",r.a.createElement(Ft,{data:t,timedata:e.state.server_time,item:"applied",time_limit:[e.state.fa_late1,e.state.fa_late2]})),r.a.createElement("br",null),r.a.createElement("span",null,"Approved :  ",r.a.createElement(Ft,{data:t,timedata:e.state.server_time,item:"approved",time_limit:[e.state.fa_late1,e.state.fa_late2]})))}},{Header:r.a.createElement(r.a.Fragment,null,"FA Status",r.a.createElement("br",null),"Disbursal Status"),id:"status",minWidth:140,maxWidth:200,sortable:!1,accessor:function(e){return r.a.createElement("div",null,r.a.createElement("span",null,Ze(e.status)),r.a.createElement("br",null),null!=e.disbursal_status?r.a.createElement(se.a,{placement:"auto",trigger:["hover","focus"],overlay:r.a.createElement(oe.a,{style:{fontSize:"15px",padding:"15px",color:"mediumblue",fontFamily:"Montserrat"}},"Float Transferred. Not Captured on Flow App")},r.a.createElement("span",null,pe(e.disbursal_status||"not_initiated")," ",r.a.createElement("sup",null,r.a.createElement(ie.a,{size:14})))):r.a.createElement(r.a.Fragment,null))}},{Header:function(){return r.a.createElement(r.a.Fragment,null,E("loan","home_capture_disbursal")&&r.a.createElement("div",{className:"text-center"},"Action"))},sortable:!1,id:"btn",minWidth:100,accessor:function(t){return r.a.createElement(r.a.Fragment,null,E("loan","home_capture_disbursal")&&e.buttonName(t))}}]}},e.buttonName=function(t){var a;if("pending_disb_capture"==t.disbursal_status)a=r.a.createElement(Td,{id:"disbursal_txn",data:t,title:"Disbursal Loan"});else if("pending_mnl_dsbrsl"==t.status){var n=t;n.amount=t.loan_principal,a=r.a.createElement("div",{className:"text-center"},E("loan","disburse_manually")&&r.a.createElement(Mi,{id:"disbursal_txn",data:n,parent:"home",disabled:e.state.calling_api,onStatusChange:e.refreshList,onDisburseClick:function(t){return e.setState({disb_manually:t})}}))}return a},e.refreshList=function(){e.setState({refresh:!0}),e.getListData()},e.handleClose=function(){e.setState({modal:!1})},e.handleOpen=function(t,a){var n={cust_id:t,call_type:"outgoing"};Gl(e.req({call_log:n})).then(function(a){if(e.resp(a),a)if("success"===a.status){var n=a.data,r=!0;"lastcall"==n.action&&(r=window.confirm(n.message)),r&&n.call_log_id&&e.setState({modal:!0,call_cust_id:t,call_id:n.call_log_id})}else alert(a.message+"\n"+JSON.stringify(a.data))})},e.getListTitle=function(){switch(e.props.list_name){case"pending_w_cust":return"FAs Pending Customer Confirmation";case"pending_w_rm":return"FAs Pending RM Approval";case"active_cust_without_fa":return"Active Customers Without FA";case"pending_capture_disbursal":return"FAs with Pending Capture/Manual Disbursal"}},e}return Object(o.a)(a,[{key:"componentWillMount",value:function(){var e=this,t=v("market"),a={country_code:t.country_code,time_zone:t.time_zone,status:""};_r(Object(X.a)({},a,{status:"enabled",biz_account:!0})).then(function(t){if(t&&"success"===t.status){var a=[];t.data.list.map(function(e){return a.push(e.acc_prvdr_code)}),e.setState(function(e){return e.all_Acc_pvdrs=a})}}),this.getListData()}},{key:"RMdynClickhandler",value:function(e,t){var a=this,n=v("market"),r=n.country_code;if(e)if("ALL"!==t){-1==this.state.dyn_Btn_selected.findIndex(function(e){return e===t})&&(this.state.dyn_Btn_selected.push(t),this.setState(function(a){return a.filter_actions[t][1].status=e}),this.state.dyn_Btn_selected.length===this.state.all_Acc_pvdrs.length&&this.setState(function(e){return e.all_Btn_status=!0})),localStorage.setItem([r]+"_pendingRM",JSON.stringify(this.state.dyn_Btn_selected))}else{var l=[];this.state.all_Acc_pvdrs.map(function(e){a.state.filter_actions[e][1].status=!0,l.push(e)}),this.setState(function(e){return e.dyn_Btn_selected=l});var c=n.country_code;localStorage.setItem([c]+"_pendingRM",JSON.stringify(l)),this.setState(function(t){return t.all_Btn_status=e})}else if(!e)if("ALL"!==t){var s=this.state.dyn_Btn_selected.findIndex(function(e){return e===t});s>-1&&(this.state.dyn_Btn_selected.splice(s,1),this.setState(function(a){return a.filter_actions[t][1].status=e})),this.setState(function(e){return e.all_Btn_status=!1}),localStorage.setItem([r]+"_pendingRM",JSON.stringify(this.state.dyn_Btn_selected))}else this.state.all_Acc_pvdrs.map(function(e){return a.state.filter_actions[e][1].status=!1}),this.setState(function(e){return e.dyn_Btn_selected=[]}),localStorage.setItem([r]+"_pendingRM",JSON.stringify([])),this.setState(function(t){return t.all_Btn_status=e});var o=v([r]+"_pendingRM"),i=[];o.map(function(e){var t=a.state.lists.filter(function(t){return t.acc_prvdr_code===e});i.push.apply(i,Object(re.a)(t))}),this.setState(function(e){return e.copy=i})}},{key:"CUSdynClickhandler",value:function(e,t){var a=this,n=v("market").country_code;if(e)if("ALL"!==t){-1==this.state.dyn_Btn_selected.findIndex(function(e){return e===t})&&(this.state.dyn_Btn_selected.push(t),this.setState(function(a){return a.filter_actions[t][1].status=e}),this.state.dyn_Btn_selected.length===this.state.all_Acc_pvdrs.length&&this.setState(function(e){return e.all_Btn_status=!0})),localStorage.setItem([n]+"_pendingCUS",JSON.stringify(this.state.dyn_Btn_selected))}else{var r=[];this.state.all_Acc_pvdrs.map(function(e){a.state.filter_actions[e][1].status=!0,r.push(e)}),this.setState(function(e){return e.dyn_Btn_selected=r}),localStorage.setItem([n]+"_pendingCUS",JSON.stringify(r)),this.setState(function(t){return t.all_Btn_status=e})}else if(!e)if("ALL"!==t){var l=this.state.dyn_Btn_selected.findIndex(function(e){return e===t});l>-1&&(this.state.dyn_Btn_selected.splice(l,1),this.setState(function(a){return a.filter_actions[t][1].status=e})),this.setState(function(e){return e.all_Btn_status=!1}),localStorage.setItem([n]+"_pendingCUS",JSON.stringify(this.state.dyn_Btn_selected))}else this.state.all_Acc_pvdrs.map(function(e){return a.state.filter_actions[e][1].status=!1}),this.setState(function(e){return e.dyn_Btn_selected=[]}),localStorage.setItem([n]+"_pendingCUS",JSON.stringify([])),this.setState(function(t){return t.all_Btn_status=e});var c=v([n]+"_pendingCUS"),s=[];c.map(function(e){var t=a.state.lists.filter(function(t){return t.acc_prvdr_code===e});s.push.apply(s,Object(re.a)(t))}),this.setState(function(e){return e.copy=s})}},{key:"CustWithOutFaClickhandler",value:function(e,t){var a=this,n=v("market").country_code;if(e)if("ALL"!==t){-1==this.state.dyn_Btn_selected.findIndex(function(e){return e===t})&&(this.state.dyn_Btn_selected.push(t),this.setState(function(a){return a.filter_actions[t][1].status=e}),this.state.dyn_Btn_selected.length===this.state.all_Acc_pvdrs.length&&this.setState(function(e){return e.all_Btn_status=!0})),localStorage.setItem([n]+"_withoutFa",JSON.stringify(this.state.dyn_Btn_selected))}else{var r=[];this.state.all_Acc_pvdrs.map(function(e){a.state.filter_actions[e][1].status=!0,r.push(e)}),this.setState(function(e){return e.dyn_Btn_selected=r}),localStorage.setItem([n]+"_withoutFa",JSON.stringify(r)),this.setState(function(t){return t.all_Btn_status=e})}else if(!e)if("ALL"!==t){var l=this.state.dyn_Btn_selected.findIndex(function(e){return e===t});l>-1&&(this.state.dyn_Btn_selected.splice(l,1),this.setState(function(a){return a.filter_actions[t][1].status=e})),this.setState(function(e){return e.all_Btn_status=!1}),localStorage.setItem([n]+"_withoutFa",JSON.stringify(this.state.dyn_Btn_selected))}else this.state.all_Acc_pvdrs.map(function(e){return a.state.filter_actions[e][1].status=!1}),this.setState(function(e){return e.dyn_Btn_selected=[]}),localStorage.setItem([n]+"_withoutFa",JSON.stringify([])),this.setState(function(t){return t.all_Btn_status=e});var c=v([n]+"_withoutFa"),s=[];c.map(function(e){var t=a.state.lists.filter(function(t){return t.acc_prvdr_code===e});s.push.apply(s,Object(re.a)(t))}),this.setState(function(e){return e.copy=s})}},{key:"FAPendingCaptureClickhandler",value:function(e,t){var a=this,n=v("market").country_code;if(e)if("ALL"!==t){-1==this.state.dyn_Btn_selected.findIndex(function(e){return e===t})&&(this.state.dyn_Btn_selected.push(t),this.setState(function(a){return a.filter_actions[t][1].status=e}),this.state.dyn_Btn_selected.length===this.state.all_Acc_pvdrs.length&&this.setState(function(e){return e.all_Btn_status=!0})),localStorage.setItem([n]+"_faPendingdisbcapture",JSON.stringify(this.state.dyn_Btn_selected))}else{var r=[];this.state.all_Acc_pvdrs.map(function(e){a.state.filter_actions[e][1].status=!0,r.push(e)}),this.setState(function(e){return e.dyn_Btn_selected=r}),localStorage.setItem([n]+"_faPendingdisbcapture",JSON.stringify(r)),this.setState(function(t){return t.all_Btn_status=e})}else if(!e)if("ALL"!==t){var l=this.state.dyn_Btn_selected.findIndex(function(e){return e===t});l>-1&&(this.state.dyn_Btn_selected.splice(l,1),this.setState(function(a){return a.filter_actions[t][1].status=e})),this.setState(function(e){return e.all_Btn_status=!1}),localStorage.setItem([n]+"_faPendingdisbcapture",JSON.stringify(this.state.dyn_Btn_selected))}else this.state.all_Acc_pvdrs.map(function(e){return a.state.filter_actions[e][1].status=!1}),this.setState(function(e){return e.dyn_Btn_selected=[]}),localStorage.setItem([n]+"_faPendingdisbcapture",JSON.stringify([])),this.setState(function(t){return t.all_Btn_status=e});var c=v([n]+"_faPendingdisbcapture"),s=[];c.map(function(e){var t=a.state.lists.filter(function(t){return t.acc_prvdr_code===e});s.push.apply(s,Object(re.a)(t))}),this.setState(function(e){return e.copy=s})}},{key:"sortBiz",value:function(e,t){return eo(e.props.full_text,t.props.full_text)}},{key:"sortAmount",value:function(e,t){return $s(e.props.children,t.props.children)}},{key:"sortTime",value:function(e,t){var a=e.props.data.loan_appl_date,n=t.props.data.loan_appl_date,r=this.state.server_time;return to(a,n,r)}},{key:"componentDidUpdate",value:function(e,t,a){e.refresh!=this.props.refresh&&1==this.state.disb_manually&&this.refreshList()}},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,"pending_w_cust"==this.props.list_name&&r.a.createElement(rt.a,{dialogClassName:"rec-form-modal",show:this.state.modal,onHide:this.handleClose},r.a.createElement(rt.a.Body,{closeButton:!0},r.a.createElement(tc,{is_conf:!0,match:{params:{id:this.state.call_id,cust_id:this.state.call_cust_id}},onComplete:function(){return window.location.reload()},onCancel:function(){return e.setState({modal:!1})}}))),r.a.createElement(kc.a,null,r.a.createElement(ka.a,null,r.a.createElement("div",{className:"card-header card-header-icon card-header-primary home_header_d-flex_at_response justify-space-between"},"pending_w_cust"==this.props.list_name&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"home_header_d-flex_at_response"},r.a.createElement("h4",{className:"card-title text-white tableHead_font "},this.getListTitle()),this.state.lists.length>0&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"countREL card-title"},r.a.createElement("button",{className:"filterBtns allBtn_size",onClick:function(){return e.CUSdynClickhandler(!e.state.all_Btn_status,"ALL")},style:{filter:this.state.all_Btn_status?"":"opacity(0.5)"}},"ALL"),r.a.createElement("div",{className:"countABS",style:{backgroundColor:this.state.all_Btn_status?"":"lightgrey"}},r.a.createElement("label",null,this.state.all_count))),this.state.all_Acc_pvdrs.map(function(t,a){return r.a.createElement("div",{key:a,className:"countREL card-title"},r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:{width:60,height:30},className:"filterBtns",onClick:function(){return e.CUSdynClickhandler(!e.state.filter_actions[t][1].status,t)}},r.a.createElement("img",{className:"img-fluid",src:"/img/".concat(t,"_logo_color.png"),style:{filter:e.state.filter_actions[t]&&!e.state.filter_actions[t][1].status?"opacity(0.5)":""}})),r.a.createElement("div",{className:"countABS",style:{backgroundColor:e.state.filter_actions[t]&&!e.state.filter_actions[t][1].status?"lightgrey":""}},r.a.createElement("label",null,e.state.filter_actions[t]&&e.state.filter_actions[t][0].count))))}))),r.a.createElement(kc.a.Toggle,{className:"col",as:ka.a.Header,eventKey:"0",onClick:function(){return e.handleToggle("Account")}},r.a.createElement(Oc.a,{className:this.state.show_table?"arrow-icon accordin-arrow down ":"arrow-icon accordin-arrow",size:"18"}))),"pending_w_rm"===this.props.list_name&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"home_header_d-flex_at_response"},r.a.createElement("h4",{className:"card-title text-white tableHead_font "},this.getListTitle()),this.state.lists.length>0&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"countREL card-title"},r.a.createElement("button",{className:"filterBtns allBtn_size",onClick:function(){return e.RMdynClickhandler(!e.state.all_Btn_status,"ALL")},style:{filter:this.state.all_Btn_status?"":"opacity(0.5)"}},"ALL"),r.a.createElement("div",{className:"countABS",style:{backgroundColor:this.state.all_Btn_status?"":"lightgrey"}},r.a.createElement("label",null,this.state.all_count))),this.state.all_Acc_pvdrs.map(function(t,a){return r.a.createElement("div",{key:a,className:"countREL card-title"},r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:{width:60,height:30},className:"filterBtns",onClick:function(){return e.RMdynClickhandler(!e.state.filter_actions[t][1].status,t)}},r.a.createElement("img",{className:"img-fluid",src:"/img/".concat(t,"_logo_color.png"),style:{filter:e.state.filter_actions[t]&&!e.state.filter_actions[t][1].status?"opacity(0.5)":""}})),r.a.createElement("div",{className:"countABS",style:{backgroundColor:e.state.filter_actions[t]&&!e.state.filter_actions[t][1].status?"lightgrey":""}},r.a.createElement("label",null,e.state.filter_actions[t]&&e.state.filter_actions[t][0].count))))}))),r.a.createElement(kc.a.Toggle,{className:"col",as:ka.a.Header,eventKey:"0",onClick:function(){return e.handleToggle("Account")}},r.a.createElement(Oc.a,{className:this.state.show_table?"arrow-icon down accordin-arrow":"arrow-icon accordin-arrow",size:"18"}))),"active_cust_without_fa"===this.props.list_name&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"home_header_d-flex_at_response"},r.a.createElement("h4",{className:"card-title text-white tableHead_font "},this.getListTitle()),this.state.lists.length>0&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"countREL card-title"},r.a.createElement("button",{className:"filterBtns allBtn_size",onClick:function(){return e.CustWithOutFaClickhandler(!e.state.all_Btn_status,"ALL")},style:{filter:this.state.all_Btn_status?"":"opacity(0.5)"}},"ALL"),r.a.createElement("div",{className:"countABS",style:{backgroundColor:this.state.all_Btn_status?"":"lightgrey"}},r.a.createElement("label",null,this.state.all_count))),this.state.all_Acc_pvdrs.map(function(t,a){return r.a.createElement("div",{key:a,className:"countREL card-title"},r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:{width:60,height:30},className:"filterBtns",onClick:function(){return e.CustWithOutFaClickhandler(!e.state.filter_actions[t][1].status,t)}},r.a.createElement("img",{className:"img-fluid",src:"/img/".concat(t,"_logo_color.png"),style:{filter:e.state.filter_actions[t]&&!e.state.filter_actions[t][1].status?"opacity(0.5)":""}})),r.a.createElement("div",{className:"countABS",style:{backgroundColor:e.state.filter_actions[t]&&!e.state.filter_actions[t][1].status?"lightgrey":""}},r.a.createElement("label",null,e.state.filter_actions[t]&&e.state.filter_actions[t][0].count))))}))),r.a.createElement(kc.a.Toggle,{className:"col",as:ka.a.Header,eventKey:"0",onClick:function(){return e.handleToggle("Account")}},r.a.createElement(Oc.a,{className:this.state.show_table?"arrow-icon down accordin-arrow":"arrow-icon accordin-arrow",size:"18"}))),"pending_capture_disbursal"===this.props.list_name&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"home_header_d-flex_at_response"},r.a.createElement("h4",{className:"card-title text-white tableHead_font "},this.getListTitle()),this.state.lists.length>0&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"countREL card-title"},r.a.createElement("button",{className:"filterBtns allBtn_size",onClick:function(){return e.FAPendingCaptureClickhandler(!e.state.all_Btn_status,"ALL")},style:{filter:this.state.all_Btn_status?"":"opacity(0.5)"}},"ALL"),r.a.createElement("div",{className:"countABS",style:{backgroundColor:this.state.all_Btn_status?"":"lightgrey"}},r.a.createElement("label",null,this.state.all_count))),this.state.all_Acc_pvdrs.map(function(t,a){return r.a.createElement("div",{key:a,className:"countREL card-title"},r.a.createElement("div",{style:{width:60,height:30},className:"filterBtns",onClick:function(){return e.FAPendingCaptureClickhandler(!e.state.filter_actions[t][1].status,t)}},r.a.createElement("img",{className:"img-fluid",src:"/img/".concat(t,"_logo_color.png"),style:{filter:e.state.filter_actions[t]&&!e.state.filter_actions[t][1].status?"opacity(0.5)":""}})),r.a.createElement("div",{className:"countABS",style:{backgroundColor:e.state.filter_actions[t]&&!e.state.filter_actions[t][1].status?"lightgrey":""}},r.a.createElement("label",null,e.state.filter_actions[t]&&e.state.filter_actions[t][0].count)))}))),r.a.createElement(kc.a.Toggle,{className:"col",as:ka.a.Header,eventKey:"0",onClick:function(){return e.handleToggle("Account")}},r.a.createElement(Oc.a,{className:this.state.show_table?"arrow-icon down accordin-arrow":"arrow-icon accordin-arrow",size:"18"})))),r.a.createElement("div",{className:"card-body no-padding"},this.state.server_time&&r.a.createElement(kc.a.Collapse,{eventKey:"0"},r.a.createElement(ka.a.Body,null,r.a.createElement(za,{showPag:"active_cust_without_fa"===this.props.list_name,defaultPageSize:"active_cust_without_fa"===this.props.list_name?10:50,minRow:0,row_data:void 0!==this.state.copy?this.state.copy:[],column_data:this.state.columns,resizable:!1,defaultSorted:[{id:this.state.sortVariable,desc:this.state.defaultSortOrder}],timeServer:this.state.server_time,excessTimeaction:!0,appliedRowblink:"pending_w_rm"===this.props.list_name,appliedRowblinktime:this.state.fa_rm_approval_late2,approveRowblinktime:this.state.fa_late2,exportCSV:"active_cust_without_fa"===this.props.list_name,csvData:void 0!==this.state.copy?this.state.copy:[],csvFile:"Active Customers Without FA"})))))))}}]),a}(ut);function Zd(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(u.a)(e);if(t){var r=Object(u.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(m.a)(this,a)}}var Xd=function(e){Object(d.a)(a,e);var t=Zd(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(e=t.call.apply(t,[this].concat(l))).state={rowdatas:[],copy:[],columns:[],approval_modal:!1,modal_data:{},show_table:!1},e.handleToggle=function(t){switch(t){case"Account":e.setState(function(t){return t.show_table=!e.state.show_table})}},e.getcolumndatas=function(){var t=[{Header:"Status",id:"approval_json",minWidth:100,accessor:function(e){return e.approval_json.filter(function(e){return e.person_id==v("user_id")}).map(function(e){return r.a.createElement("p",{style:{fontSize:"13"}},e.approved?"Pending with others":"Pending your Approval")})}},{Header:"Requested On",id:"created_at",minWidth:100,accessor:function(e){return ge(e.created_at)}},{Header:"Action",id:"ids",Cell:function(t){var a=t.row;return r.a.createElement(lt.a,{variant:"primary",onClick:function(t){return e.handleApprovalModal(t,a)}},"view")}}];switch(e.props.task_type){case"waiver_request":return[{Header:"Cust ID",id:"cust_id",minWidth:100,accessor:function(e){return r.a.createElement(ee.a,{style:{color:"#17a2b8 !important"},to:"/borrower/indiv/view/"+e.cust_id,target:"_blank"},e.cust_id)}},{Header:"Loan Doc ID",id:"loan_doc_id",accessor:function(e){return r.a.createElement(ee.a,{style:{color:"#17a2b8 !important"},to:"/fa/view/"+e.loan_doc_id,target:"_blank"},e.loan_doc_id)}},{Header:"Biz Name",id:"biz_name",minWidth:100,accessor:function(e){return pe(e.biz_name)}},{Header:"Waiver Amount",id:"task_json",minWidth:100,accessor:function(t){return xe(t.task_json.waiver_penalty,e.currency_code)}}].concat(t)}},e.handleApprovalModal=function(t,a){e.setState({approval_modal:!0,modal_data:a})},e.handleApprovalModalClose=function(t){e.setState({approval_modal:!1})},e.handleTaskRequest=function(t){var a=t.target.value,n=t.target.id,r=e.props.task_type;0!=window.confirm("Are you sure to ".concat(a," ?"))&&Qn(e.req({action:a,task_id:n,task_type:r})).then(function(t){e.resp(t),t&&t&&"success"===t.status&&(alert(t.message),e.setState({approval_modal:!1}),e.drawTable())})},e}return Object(o.a)(a,[{key:"componentWillMount",value:function(){this.drawTable()}},{key:"drawTable",value:function(){var e,t=this;(e=this.req({task_type:this.props.task_type}),P(D+"/task/list",e)).then(function(e){t.resp(e),e&&e&&(t.setState({refresh:!1}),t.setState(function(t){return t.rowdatas=e.data}),t.setState(function(t){return t.copy=e.data}),t.setState(function(e){return e.columns=t.getcolumndatas()}))})}},{key:"render",value:function(){var e=this,t=!1;return this.state.modal_data._original&&this.state.modal_data._original.approval_json.filter(function(e){return e.person_id==v("user_id")}).map(function(e){return t=e.approved}),r.a.createElement(r.a.Fragment,null,r.a.createElement(kc.a,null,r.a.createElement(ka.a,null,r.a.createElement("div",{className:"card-header card-header-icon card-header-primary home_header_d-flex_at_response justify-space-between"},r.a.createElement("h4",{className:"card-title text-white tableHead_font title-bottom "},this.props.title),r.a.createElement(kc.a.Toggle,{className:"col",as:ka.a.Header,eventKey:"0",onClick:function(){return e.handleToggle("Account")}},r.a.createElement(Oc.a,{className:this.state.show_table?"arrow-icon down accordin-arrow":"arrow-icon accordin-arrow",size:"18"}))),r.a.createElement("div",{className:"card-body no-padding justify-content-center"},r.a.createElement(kc.a.Collapse,{eventKey:"0"},r.a.createElement(ka.a.Body,null,r.a.createElement(za,{showPag:!0,defaultPageSize:20,minRow:0,row_data:void 0!==this.state.copy?this.state.copy:[],column_data:this.state.columns,resizable:!1,defaultSorted:[{id:"created_at",desc:!0}]})))))),r.a.createElement(rt.a,{show:this.state.approval_modal,onHide:this.handleApprovalModalClose,backdrop:"static",size:"xl",style:{position:"fixed"}},r.a.createElement(rt.a.Header,{closeButton:!0,className:"modal-close-btn",show:this.state.approval_modal,onHide:this.handleApprovalModalClose},r.a.createElement(rt.a.Title,null,Ze(this.props.task_type))),r.a.createElement(rt.a.Body,null,r.a.createElement("form",null,"waiver_request"==this.props.task_type&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"floatAdvanceperiodHeaderBox"},r.a.createElement("h3",{style:{fontSize:"18px"},className:"floatAdvanceperiodHeader no-margin"},"Customer :",r.a.createElement("h1",{className:"floatAdvanceBluetitle no-margin"},this.state.modal_data.cust_id))),r.a.createElement("div",{className:"row no-margin pastFloatAdvanceBox justify-content-center"},r.a.createElement("div",{className:"col-lg-10 no-padding personalDetailsbox "},r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement("div",{className:"row no-margin justify-content-center"},r.a.createElement("div",{className:"no-padding col-lg-5"},r.a.createElement("p",{className:"personalDetailstext no-margin"},"Biz Name")),r.a.createElement("div",{className:"col-lg-5 no-padding"},r.a.createElement("ul",{className:"personalPastDetailstext"},r.a.createElement("li",null,this.state.modal_data.biz_name))))),r.a.createElement("li",null,r.a.createElement("div",{className:"row no-margin justify-content-center"},r.a.createElement("div",{className:"no-padding col-lg-5"},r.a.createElement("p",{className:"personalDetailstext no-margin"},"FA ID")),r.a.createElement("div",{className:"col-lg-5 no-padding"},r.a.createElement("ul",{className:"personalPastDetailstext"},r.a.createElement("li",null,this.state.modal_data.loan_doc_id))))),this.state.modal_data._original&&this.state.modal_data._original.task_json&&r.a.createElement(r.a.Fragment,null,r.a.createElement("li",null,r.a.createElement("div",{className:"row no-margin justify-content-center"},r.a.createElement("div",{className:"no-padding col-lg-5"},r.a.createElement("p",{className:"personalDetailstext no-margin"},"Current OS Penalty")),r.a.createElement("div",{className:"col-lg-5 no-padding"},r.a.createElement("ul",{className:"personalPastDetailstext"},r.a.createElement("li",null,xe(this.state.modal_data._original.task_json.os_penalty,this.currency_code)))))),r.a.createElement("li",null,r.a.createElement("div",{className:"row no-margin justify-content-center"},r.a.createElement("div",{className:"no-padding col-lg-5"},r.a.createElement("p",{className:"personalDetailstext no-margin"},"Request Waiver Amount")),r.a.createElement("div",{className:"col-lg-5 no-padding"},r.a.createElement("ul",{className:"personalPastDetailstext"},r.a.createElement("li",null,xe(this.state.modal_data._original.task_json.waiver_penalty,this.currency_code)))))),r.a.createElement("li",null,r.a.createElement("div",{className:"row no-margin justify-content-center"},r.a.createElement("div",{className:"no-padding col-lg-5"},r.a.createElement("p",{className:"personalDetailstext no-margin"},"Late For")),r.a.createElement("div",{className:"col-lg-5 no-padding"},r.a.createElement("ul",{className:"personalPastDetailstext"},r.a.createElement("li",null,this.state.modal_data._original.task_json.penalty_days," days")))))),r.a.createElement("li",null,r.a.createElement("div",{className:"row no-margin justify-content-center"},r.a.createElement("div",{className:"no-padding col-lg-5"},r.a.createElement("p",{className:"personalDetailstext no-margin"},"Requested On")),r.a.createElement("div",{className:"col-lg-5 no-padding"},r.a.createElement("ul",{className:"personalPastDetailstext"},r.a.createElement("li",null,this.state.modal_data.created_at))))))))),this.state.modal_data.cust_id&&r.a.createElement(bi,{cust_id:this.state.modal_data.cust_id.props.children,last_n_fas:"4"}),this.state.modal_data._original&&this.state.modal_data._original.approval_json&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"floatAdvanceperiodHeaderBox mt-2"},r.a.createElement("h2",{className:"floatAdvanceperiodHeader no-margin"},"All Approvers")),this.state.modal_data._original.approval_json.map(function(e){return r.a.createElement("div",{className:"row no-margin pastFloatAdvanceBox justify-content-center"},r.a.createElement("div",{className:"col-lg-10 no-padding personalDetailsbox "},r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement("div",{className:"row no-margin justify-content-center"},r.a.createElement("div",{className:"no-padding col-lg-5"},r.a.createElement("p",{className:"personalDetailstext no-margin"},Ze(e.approver_name),r.a.createElement("br",null),e.person_id==v("user_id")&&r.a.createElement(r.a.Fragment,null,"(You)"))),r.a.createElement("div",{className:"col-lg-5 no-padding"},r.a.createElement("ul",{className:"personalPastDetailstext"},r.a.createElement("li",null,e.approved?"Approved":"Pending"))))))))})))),r.a.createElement(rt.a.Footer,{className:"row my-2 justify-content-center align-items-center py-2"},this.state.modal_data._original&&0==t&&r.a.createElement(r.a.Fragment,null,r.a.createElement(lt.a,{id:this.state.modal_data._original.id,value:"approve",variant:"primary",disabled:this.state.calling_api,onClick:this.handleTaskRequest},"Approve"),r.a.createElement("div",null),r.a.createElement(lt.a,{id:this.state.modal_data._original.id,value:"reject",variant:"danger",disabled:this.state.calling_api,style:{marginLeft:10},onClick:this.handleTaskRequest},"Reject")))))}}]),a}(ut);function $d(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(u.a)(e);if(t){var r=Object(u.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(m.a)(this,a)}}var em=function(e){Object(d.a)(a,e);var t=$d(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={columns:[],lists:[],copy:[],dyn_Btn_selected:[],all_count:0,filter_actions:{},all_Btn_status:!1,all_Acc_pvdrs:[],show_table:!1},e.handleToggle=function(t){switch(t){case"Account":e.setState(function(t){return t.show_table=!e.state.show_table})}},e}return Object(o.a)(a,[{key:"componentWillMount",value:function(){var e=this,t=v("market"),a={country_code:t.country_code,time_zone:t.time_zone,status:""};_r(Object(X.a)({},a,{status:"enabled",biz_account:!0})).then(function(t){if(t&&"success"===t.status){var a=[];t.data.list.map(function(e){return a.push(e.acc_prvdr_code)}),e.setState(function(e){return e.all_Acc_pvdrs=a})}}),this.drawTable()}},{key:"drawTable",value:function(){var e=this,t=v("market").country_code;oc(this.req({lead_search_criteria:{status:"09_pending_rm_alloc"}})).then(function(a){if(a&&"success"===a.status&&(e.setState(function(t){return t.columns=e.columndatas()}),a.data.length>0)){e.setState({lists:a.data}),e.setState(function(e){return e.all_count=a.data.length});var n=void 0===v([t]+"_rmAllocpending")?e.state.all_Acc_pvdrs:v([t]+"_rmAllocpending");e.state.all_Acc_pvdrs.map(function(t){var a=e.state.lists.filter(function(e){return e.acc_prvdr_code===t}).length;e.setState(function(e){return e.filter_actions[t]=[{count:0},{status:n.includes(t)}]}),e.dynClickhandler(e.state.filter_actions[t][1].status,t),e.setState(function(e){return e.filter_actions[t][0].count=a})})}})}},{key:"columndatas",value:function(){return[{Header:"Business Name",accessor:"biz_name",Cell:function(e){return r.a.createElement(Rt,{full_text:e.original.biz_name,overlay:[e.original.first_name,e.original.last_name].join(" "),no_reduce:!0})}},{Header:"Reg Date",accessor:"lead_date",Cell:function(e){return ve(e.value)}},{Header:"ACC PRVDR",accessor:"acc_prvdr_code",Cell:function(e){return r.a.createElement(Le,{logotype:e.value})}},{Header:"A/C Number",accessor:"account_num",minWidth:160},{Header:"Mobile Number",accessor:"mobile_num"},{Header:"Location",accessor:"location"},{Header:"Action",sortable:!1,accessor:"id",Cell:function(e){return r.a.createElement(ee.a,{to:"lead/edit/"+e.value,target:"_blank"},"Allocate RM")}}]}},{key:"dynClickhandler",value:function(e,t){var a=this,n=v("market").country_code;if(e)if("ALL"!==t){-1==this.state.dyn_Btn_selected.findIndex(function(e){return e===t})&&(this.state.dyn_Btn_selected.push(t),this.setState(function(a){return a.filter_actions[t][1].status=e}),this.state.dyn_Btn_selected.length===this.state.all_Acc_pvdrs.length&&this.setState(function(e){return e.all_Btn_status=!0})),localStorage.setItem([n]+"_rmAllocpending",JSON.stringify(this.state.dyn_Btn_selected))}else{var r=[];this.state.all_Acc_pvdrs.map(function(e){a.state.filter_actions[e][1].status=!0,r.push(e)}),this.setState(function(e){return e.dyn_Btn_selected=r}),localStorage.setItem([n]+"_rmAllocpending",JSON.stringify(r)),this.setState(function(t){return t.all_Btn_status=e})}else if(!e)if("ALL"!==t){var l=this.state.dyn_Btn_selected.findIndex(function(e){return e===t});l>-1&&(this.state.dyn_Btn_selected.splice(l,1),this.setState(function(a){return a.filter_actions[t][1].status=e})),this.setState(function(e){return e.all_Btn_status=!1}),localStorage.setItem([n]+"_rmAllocpending",JSON.stringify(this.state.dyn_Btn_selected))}else this.state.all_Acc_pvdrs.map(function(e){return a.state.filter_actions[e][1].status=!1}),this.setState(function(e){return e.dyn_Btn_selected=[]}),localStorage.setItem([n]+"_rmAllocpending",JSON.stringify([])),this.setState(function(t){return t.all_Btn_status=e});var c=v([n]+"_rmAllocpending"),s=[];c.map(function(e){var t=a.state.lists.filter(function(t){return t.acc_prvdr_code===e});s.push.apply(s,Object(re.a)(t))}),this.setState(function(e){return e.copy=s})}},{key:"render",value:function(){var e=this;return r.a.createElement(kc.a,null,r.a.createElement(ka.a,null,r.a.createElement("div",{className:"card-header card-header-icon card-header-primary home_header_d-flex_at_response justify-space-between"},r.a.createElement("h4",{className:"card-title text-white  tableHead_font"},"Leads with Pending RM Allocation"),this.state.lists.length>0&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"countREL card-title"},r.a.createElement("button",{className:"filterBtns allBtn_size",onClick:function(){return e.dynClickhandler(!e.state.all_Btn_status,"ALL")},style:{filter:this.state.all_Btn_status?"":"opacity(0.5)"}},"ALL"),r.a.createElement("div",{className:"countABS",style:{backgroundColor:this.state.all_Btn_status?"":"lightgrey"}},r.a.createElement("label",null,this.state.all_count))),this.state.all_Acc_pvdrs.map(function(t,a){return r.a.createElement("div",{key:a,className:"countREL card-title"},r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:{width:60,height:30},className:"filterBtns",onClick:function(){return e.dynClickhandler(!e.state.filter_actions[t][1].status,t)}},r.a.createElement("img",{className:"img-fluid",src:"/img/".concat(t,"_logo_color.png"),style:{filter:e.state.filter_actions[t]&&!e.state.filter_actions[t][1].status?"opacity(0.5)":""}})),r.a.createElement("div",{className:"countABS",style:{backgroundColor:e.state.filter_actions[t]&&!e.state.filter_actions[t][1].status?"lightgrey":""}},r.a.createElement("label",null,e.state.filter_actions[t]&&e.state.filter_actions[t][0].count))))})),r.a.createElement(kc.a.Toggle,{className:"col",as:ka.a.Header,eventKey:"0",onClick:function(){return e.handleToggle("Account")}},r.a.createElement(Oc.a,{className:this.state.show_table?"arrow-icon down accordin-arrow":"arrow-icon accordin-arrow",size:"18"}))),r.a.createElement("div",{className:"card-body no-padding"},r.a.createElement(kc.a.Collapse,{eventKey:"0"},r.a.createElement(ka.a.Body,null,r.a.createElement(za,{showPag:!1,defaultPageSize:50,minRow:0,row_data:void 0!==this.state.copy?this.state.copy:[],column_data:this.state.columns,resizable:!1,defaultSorted:[{id:"lead_date",desc:!0}]}))))))}}]),a}(ut);function tm(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(u.a)(e);if(t){var r=Object(u.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(m.a)(this,a)}}var am=function(e){Object(d.a)(a,e);var t=tm(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={rowdatas:[],copy:[],columns:[],approval_modal:!1,modal_data:{},upgrade_amt:null,show_table:!1},e.handleToggle=function(t){switch(t){case"Account":e.setState(function(t){return t.show_table=!e.state.show_table})}},e.handleApprovalModal=function(t,a){e.setState({approval_modal:!0,modal_data:a})},e.handleApprovalModalClose=function(t){e.setState({approval_modal:!1})},e.handleupdReqStatus=function(t){var a=t.target.value,n=t.target.id,r=e.state.upgrade_amt;if(r||"approve"!=a){if(0==window.confirm("Are you sure to ".concat(a," ?")))return;zn(e.req({action:a,id:n,amount:r})).then(function(t){e.resp(t),t&&t&&"success"===t.status&&(alert(t.message),e.setState({approval_modal:!1}),e.drawTable())})}else alert("Please select the amount")},e.handleUpgradeAmtCheckbox=function(t){e.setState({upgrade_amt:t.target.value})},e}return Object(o.a)(a,[{key:"componentWillMount",value:function(){this.drawTable()}},{key:"drawTable",value:function(){var e,t=this;(e=this.req(),P(D+"/loan/list_upg_reqs",e)).then(function(e){t.resp(e),e&&e&&(t.setState({refresh:!1}),t.setState(function(t){return t.rowdatas=e.data}),t.setState(function(t){return t.copy=e.data}),t.setState(function(e){return e.columns=t.columndatas()}))})}},{key:"columndatas",value:function(){var e=this;return[{Header:"Cust ID",id:"cust_id",minWidth:100,accessor:function(e){return r.a.createElement(ee.a,{style:{fontSize:"18px",color:"#17a2b8 !important"},to:"/borrower/indiv/view/"+e.cust_id,target:"_blank"},e.cust_id)}},{Header:"Biz Name",id:"biz_name",minWidth:100,accessor:function(e){return pe(e.biz_name)}},{Header:"Requested Amount",id:"requested_amount",minWidth:100,accessor:function(t){return xe(t.requested_amount,e.currency_code)}},{Header:"Available amounts",id:"available_amounts",show:!1,minWidth:100,accessor:function(e){return e.available_amounts}},{Header:"Status",id:"approval_json",minWidth:100,accessor:function(e){return e.approval_json.filter(function(e){return e.person_id==v("user_id")}).map(function(e){return r.a.createElement("p",{style:{fontSize:"13"}},e.approved?"Pending with others":"Pending your Approval")})}},{Header:"Current FA Limit",id:"crnt_fa_limit",minWidth:100,accessor:function(t){return xe(t.crnt_fa_limit,e.currency_code)}},{Header:"Requested On",id:"created_at",minWidth:100,accessor:function(e){return ge(e.created_at)}},{Header:"Action",id:"ids",Cell:function(t){var a=t.row;return r.a.createElement(lt.a,{variant:"primary",onClick:function(t){return e.handleApprovalModal(t,a)}},"view")}}]}},{key:"render",value:function(){var e=this,t=!1;return this.state.modal_data._original&&this.state.modal_data._original.approval_json.filter(function(e){return e.person_id==v("user_id")}).map(function(e){return t=e.approved}),r.a.createElement(r.a.Fragment,null,r.a.createElement(kc.a,null,r.a.createElement(ka.a,null,r.a.createElement("div",{className:"card-header card-header-icon card-header-primary home_header_d-flex_at_response justify-space-between"},r.a.createElement("h4",{className:"card-title text-white tableHead_font title-bottom "},"Pending FA Upgrade Requests"),r.a.createElement(kc.a.Toggle,{className:"col",as:ka.a.Header,eventKey:"0",onClick:function(){return e.handleToggle("Account")}},r.a.createElement(Oc.a,{className:this.state.show_table?"arrow-icon down accordin-arrow":"arrow-icon accordin-arrow",size:"18"}))),r.a.createElement("div",{className:"card-body no-padding justify-content-center"},r.a.createElement(kc.a.Collapse,{eventKey:"0"},r.a.createElement(ka.a.Body,null,r.a.createElement(za,{showPag:!0,defaultPageSize:20,minRow:0,row_data:void 0!==this.state.copy?this.state.copy:[],column_data:this.state.columns,resizable:!1,defaultSorted:[{id:"created_at",desc:!0}]})))))),r.a.createElement(rt.a,{show:this.state.approval_modal,onHide:this.handleApprovalModalClose,backdrop:"static",size:"xl",style:{position:"fixed"}},r.a.createElement(rt.a.Header,{closeButton:!0,className:"modal-close-btn",show:this.state.approval_modal,onHide:this.handleApprovalModalClose},r.a.createElement(rt.a.Title,null,"FA Upgrade Request")),r.a.createElement(rt.a.Body,null,r.a.createElement("form",null,r.a.createElement("div",{className:"floatAdvanceperiodHeaderBox"},r.a.createElement("h2",{className:"floatAdvanceperiodHeader no-margin"},"Customer :",r.a.createElement("h2",{className:"floatAdvanceBluetitle no-margin"},this.state.modal_data.cust_id))),r.a.createElement("div",{className:"row no-margin pastFloatAdvanceBox justify-content-center"},r.a.createElement("div",{className:"col-lg-10 no-padding personalDetailsbox "},r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement("div",{className:"row no-margin justify-content-center"},r.a.createElement("div",{className:"no-padding col-lg-5"},r.a.createElement("p",{className:"personalDetailstext no-margin"},"Biz Name")),r.a.createElement("div",{className:"col-lg-5 no-padding"},r.a.createElement("ul",{className:"personalPastDetailstext"},r.a.createElement("li",null,this.state.modal_data.biz_name))))),r.a.createElement("li",null,r.a.createElement("div",{className:"row no-margin justify-content-center"},r.a.createElement("div",{className:"no-padding col-lg-5"},r.a.createElement("p",{className:"personalDetailstext no-margin"},"Requested On")),r.a.createElement("div",{className:"col-lg-5 no-padding"},r.a.createElement("ul",{className:"personalPastDetailstext"},r.a.createElement("li",null,this.state.modal_data.created_at)))))))),this.state.modal_data.cust_id&&r.a.createElement(bi,{cust_id:this.state.modal_data.cust_id.props.children,last_n_fas:"4"}),this.state.modal_data._original&&this.state.modal_data._original.last_loan&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"floatAdvanceperiodHeaderBox mt-2"},r.a.createElement("h2",{className:"floatAdvanceperiodHeader no-margin"},"Last FA")),r.a.createElement("div",{className:"row no-margin pastFloatAdvanceBox justify-content-center"},r.a.createElement("div",{className:"col-lg-10 no-padding personalDetailsbox "},r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement("div",{className:"row no-margin justify-content-center"},r.a.createElement("div",{className:"no-padding col-lg-5"},r.a.createElement("p",{className:"personalDetailstext no-margin"},"Float Advance")),r.a.createElement("div",{className:"col-lg-5 no-padding"},r.a.createElement("ul",{className:"personalPastDetailstext"},r.a.createElement("li",null,xe(this.state.modal_data._original.last_loan.loan_principal,this.currency_code)))))),r.a.createElement("li",null,r.a.createElement("div",{className:"row no-margin justify-content-center"},r.a.createElement("div",{className:"no-padding col-lg-5"},r.a.createElement("p",{className:"personalDetailstext no-margin"},"Disbursed Date")),r.a.createElement("div",{className:"col-lg-5 no-padding"},r.a.createElement("ul",{className:"personalPastDetailstext"},r.a.createElement("li",null,ge(this.state.modal_data._original.last_loan.disbursal_date)))))))))),this.state.modal_data._original&&this.state.modal_data._original.approval_json&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"floatAdvanceperiodHeaderBox mt-2"},r.a.createElement("h2",{className:"floatAdvanceperiodHeader no-margin"},"All Approvers")),this.state.modal_data._original.approval_json.map(function(e){return r.a.createElement("div",{className:"row no-margin pastFloatAdvanceBox justify-content-center"},r.a.createElement("div",{className:"col-lg-10 no-padding personalDetailsbox "},r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement("div",{className:"row no-margin justify-content-center"},r.a.createElement("div",{className:"no-padding col-lg-5"},r.a.createElement("p",{className:"personalDetailstext no-margin"},Ze(e.approver_name),r.a.createElement("br",null),e.person_id==v("user_id")&&r.a.createElement(r.a.Fragment,null,"(You)"))),r.a.createElement("div",{className:"col-lg-5 no-padding"},r.a.createElement("ul",{className:"personalPastDetailstext"},r.a.createElement("li",null,e.approved?"Approved":"Pending"))))))))})),r.a.createElement("div",{className:"row justify-content-center align-items-center "},r.a.createElement("label",{className:"col-sm-3 personalDetailstext no-margin no-padding"},r.a.createElement("p",{className:"personalDetailstext",style:{paddingTop:"20px"}},"Select Amount to upgrade")),this.state.modal_data.available_amounts&&this.state.modal_data.available_amounts.map(function(t){return r.a.createElement("ul",{className:"personalPastDetailstext"},r.a.createElement("li",null,r.a.createElement("label",null,r.a.createElement("input",{type:"radio",name:"appr",value:t,onClick:e.handleUpgradeAmtCheckbox})," \xa0\xa0",e.state.modal_data._original.requested_amount==t?r.a.createElement(r.a.Fragment,null,r.a.createElement("b",null,xe(t,e.currency_code)," "),e.state.modal_data.available_amounts.length>1?r.a.createElement("span",null,"(customer requested amount)"):r.a.createElement("span",null)):xe(t,e.currency_code),"\xa0\xa0\xa0")))})))),r.a.createElement(rt.a.Footer,{className:"row my-2 justify-content-center align-items-center py-2"},this.state.modal_data._original&&0==t&&r.a.createElement(r.a.Fragment,null,r.a.createElement(lt.a,{id:this.state.modal_data._original.id,value:"approve",variant:"primary",disabled:this.state.calling_api,onClick:this.handleupdReqStatus},"Approve"),r.a.createElement("div",null),r.a.createElement(lt.a,{id:this.state.modal_data._original.id,value:"reject",variant:"danger",disabled:this.state.calling_api,style:{marginLeft:10},onClick:this.handleupdReqStatus},"Reject")))))}}]),a}(ut);function nm(){nm=function(){return e};var e={},t=Object.prototype,a=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",l=n.asyncIterator||"@@asyncIterator",c=n.toStringTag||"@@toStringTag";function s(e,t,a){return Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(k){s=function(e,t,a){return e[t]=a}}function o(e,t,a,n){var r=t&&t.prototype instanceof m?t:m,l=Object.create(r.prototype),c=new N(n||[]);return l._invoke=function(e,t,a){var n="suspendedStart";return function(r,l){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===r)throw l;return C()}for(a.method=r,a.arg=l;;){var c=a.delegate;if(c){var s=E(c,a);if(s){if(s===d)continue;return s}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===n)throw n="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);n="executing";var o=i(e,t,a);if("normal"===o.type){if(n=a.done?"completed":"suspendedYield",o.arg===d)continue;return{value:o.arg,done:a.done}}"throw"===o.type&&(n="completed",a.method="throw",a.arg=o.arg)}}}(e,a,c),l}function i(e,t,a){try{return{type:"normal",arg:e.call(t,a)}}catch(k){return{type:"throw",arg:k}}}e.wrap=o;var d={};function m(){}function u(){}function p(){}var _={};s(_,r,function(){return this});var h=Object.getPrototypeOf,f=h&&h(h(x([])));f&&f!==t&&a.call(f,r)&&(_=f);var v=p.prototype=m.prototype=Object.create(_);function g(e){["next","throw","return"].forEach(function(t){s(e,t,function(e){return this._invoke(t,e)})})}function y(e,t){var n;this._invoke=function(r,l){function c(){return new t(function(n,c){!function n(r,l,c,s){var o=i(e[r],e,l);if("throw"!==o.type){var d=o.arg,m=d.value;return m&&"object"==typeof m&&a.call(m,"__await")?t.resolve(m.__await).then(function(e){n("next",e,c,s)},function(e){n("throw",e,c,s)}):t.resolve(m).then(function(e){d.value=e,c(d)},function(e){return n("throw",e,c,s)})}s(o.arg)}(r,l,n,c)})}return n=n?n.then(c,c):c()}}function E(e,t){var a=e.iterator[t.method];if(void 0===a){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method))return d;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var n=i(a,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,d;var r=n.arg;return r?r.done?(t[e.resultName]=r.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):r:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function b(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function w(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function N(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(b,this),this.reset(!0)}function x(e){if(e){var t=e[r];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,l=function t(){for(;++n<e.length;)if(a.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return l.next=l}}return{next:C}}function C(){return{value:void 0,done:!0}}return u.prototype=p,s(v,"constructor",p),s(p,"constructor",u),u.displayName=s(p,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===u||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,s(e,c,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},g(y.prototype),s(y.prototype,l,function(){return this}),e.AsyncIterator=y,e.async=function(t,a,n,r,l){void 0===l&&(l=Promise);var c=new y(o(t,a,n,r),l);return e.isGeneratorFunction(a)?c:c.next().then(function(e){return e.done?e.value:c.next()})},g(v),s(v,c,"Generator"),s(v,r,function(){return this}),s(v,"toString",function(){return"[object Generator]"}),e.keys=function(e){var t=[];for(var a in e)t.push(a);return t.reverse(),function a(){for(;t.length;){var n=t.pop();if(n in e)return a.value=n,a.done=!1,a}return a.done=!0,a}},e.values=x,N.prototype={constructor:N,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!e)for(var t in this)"t"===t.charAt(0)&&a.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(a,n){return c.type="throw",c.arg=e,t.next=a,n&&(t.method="next",t.arg=void 0),!!n}for(var r=this.tryEntries.length-1;r>=0;--r){var l=this.tryEntries[r],c=l.completion;if("root"===l.tryLoc)return n("end");if(l.tryLoc<=this.prev){var s=a.call(l,"catchLoc"),o=a.call(l,"finallyLoc");if(s&&o){if(this.prev<l.catchLoc)return n(l.catchLoc,!0);if(this.prev<l.finallyLoc)return n(l.finallyLoc)}else if(s){if(this.prev<l.catchLoc)return n(l.catchLoc,!0)}else{if(!o)throw new Error("try statement without catch or finally");if(this.prev<l.finallyLoc)return n(l.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&a.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var l=r;break}}l&&("break"===e||"continue"===e)&&l.tryLoc<=t&&t<=l.finallyLoc&&(l=null);var c=l?l.completion:{};return c.type=e,c.arg=t,l?(this.method="next",this.next=l.finallyLoc,d):this.complete(c)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.finallyLoc===e)return this.complete(a.completion,a.afterLoc),w(a),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.tryLoc===e){var n=a.completion;if("throw"===n.type){var r=n.arg;w(a)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,a){return this.delegate={iterator:x(e),resultName:t,nextLoc:a},"next"===this.method&&(this.arg=void 0),d}},e}function rm(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(u.a)(e);if(t){var r=Object(u.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(m.a)(this,a)}}var lm=function(e){Object(d.a)(a,e);var t=rm(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={toSelectMarket:!1,acc_prvdr:"",data_list:"",server_time:{}},n.timeDiff=function(e){var t=new Date(n.state.server_time),a=new Date(e),r=Math.round((t.getTime()-a.getTime())/6e4),l="min ago";return r>1&&(l="mins ago"),r+" "+l},n.status_handler=function(e){return"imported"==e?r.a.createElement("p",{className:"no-margin",style:{paddingLeft:"10px"}}," ",r.a.createElement(Ma.a,{className:"icon icon-tick"})):r.a.createElement("p",{className:"no-margin",style:{paddingLeft:"10px"}}," ",r.a.createElement(Ma.e,{className:"icon icon-wrong"}))},n.load_home_accounts=function(){window.location.pathname},n.state={refresh_count:0},n.selectAccPrvdr=function(e){"super_admin"===n.roles||"it_admin"===n.roles?(n.toChange="acc_prvdr",wd.push("/management-dashboard")):n.toChange="acc_prvdr_only",console.log('"first"',"first"),n.setState({toSelectMarket:!0})},n.selectMarket=function(e){"super_admin"!==v("role_codes")&&"it_admin"!==v("role_codes")||(n.toChange="market",n.setState({toSelectMarket:!0}))},n.load_home_accounts=n.load_home_accounts.bind(Object(i.a)(n)),n}return Object(o.a)(a,[{key:"componentWillMount",value:function(){var e=Object(j.a)(nm().mark(function e(){var t,n,r=this;return nm().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={country_code:v("market").country_code,time_zone:v("market").time_zone,status:""},_r(Object(X.a)({},t,{status:"enabled",biz_account:!0})).then(function(e){if(e&&"success"===e.status){var t=[],a={};e.data.list.map(function(e){return t.push(e.acc_prvdr_code)}),e.data.list.map(function(e){return a[e.acc_prvdr_code]=e.acc_provider_logo}),r.setState({acc_prvdr:t}),localStorage.setItem("acc_prvdr_logos",JSON.stringify(a))}}),e.next=4,Object($.a)(Object(u.a)(a.prototype),"touch_async",this).call(this);case 4:n=e.sent,this.setState({logout:n}),this.load_home_accounts(),console.log("this.state.server_time",this.state.server_time),setInterval(function(){return r.setState({refresh_count:r.state.refresh_count+1})},6e4);case 9:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=this;"investor"==v("role_codes")&&"/"==window.location.pathname&&wd.push("/management-dashboard");var t={lender_code:this.lender_code,country_code:this.country_code,to_recon:!0,status:"enabled"};Pa(this.req({account:t})).then(function(t){if(t)if("success"===t.status){if(""!=t.data){e.setState({server_time:t.server_time});var a=t.data.map(function(a,n){return r.a.createElement("li",null,r.a.createElement(ee.a,{to:"/account/".concat(a.id,"/statement"),target:"blank"},a.name),r.a.createElement("p",{className:"d-flex align-items-center no-padding no-margin  justify-content-center"},r.a.createElement("p",{className:"no-padding no-margin ",style:{color:"#dce0dd"}},e.timeDiff(t.data[n].float_acc_stmt_end_time)),r.a.createElement("p",{className:"no-padding no-margin"},e.status_handler(t.data[n].status))))});e.setState({account_list:a})}}else alert(t.message+"\n"+JSON.stringify(t.data))})}},{key:"render",value:function(){var e=this;if(this.state.toSelectMarket)return r.a.createElement(xd,{toChange:this.toChange,action:"change",onClose:function(){return e.setState({toSelectMarket:!1})}});if(this.state.logout)return r.a.createElement(r.a.Fragment,null);var t=v("role_codes");return r.a.createElement("div",null,E("mgmt","live_dashboard")&&r.a.createElement(r.a.Fragment,null,xo),E("mgmt","live_dashboard")&&r.a.createElement(r.a.Fragment,null,ko),"/management-dashboard/print"!==window.location.pathname&&"/monthly-report/print"!==window.location.pathname&&r.a.createElement("div",{className:"wrapper"},r.a.createElement(kd,{load_home_accounts:this.load_home_accounts}),r.a.createElement("div",{className:"main-panel"},r.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-transparent navbar-absolute fixed-top pb-3"},r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"navbar-wrapper"},r.a.createElement("div",{className:"navbar-minimize"})),r.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","aria-controls":"navigation-index","aria-expanded":"false","aria-label":"Toggle navigation"},r.a.createElement("span",{className:"sr-only"},"Toggle navigation"),r.a.createElement("span",{className:"navbar-toggler-icon icon-bar"}),r.a.createElement("span",{className:"navbar-toggler-icon icon-bar"}),r.a.createElement("span",{className:"navbar-toggler-icon icon-bar"})),r.a.createElement("div",{className:"collapse navbar-collapse justify-content-end"},r.a.createElement("ul",{className:"navbar-nav"},r.a.createElement("li",null,r.a.createElement("div",{className:("super_admin"==v("role_codes")||"it_admin"==v("role_codes"))&&"flag_cursor",onClick:this.selectMarket},r.a.createElement(ae.a,{id:"market",name:this.country_code,format:"png",pngSize:48,shiny:!1,alt:this.country_code,basePath:"/img/flags"}))),["super_admin","ops_admin","market_admin","it_admin"].includes(t)&&r.a.createElement("li",null,r.a.createElement("div",{className:"flag_cursor pl-5",onClick:this.selectAccPrvdr},r.a.createElement(Jn,{file_name:"t_"+v("acc_prvdr_logo"),entity:"acc_prvdr",entity_code:v("acc_prvdr_code"),country_code:this.country_code,color:"logo_style"}),"\xa0\xa0")),r.a.createElement("li",{className:"nav-item dropdown"},r.a.createElement(ee.a,{to:"/logout",className:"nav-link logoutLink",href:"javascript:;",id:"navbarDropdownProfile","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},r.a.createElement("i",{className:"material-icons fs-2"},"logout"),r.a.createElement("p",{className:"d-lg-none d-md-block"},"Account"))))))),r.a.createElement("div",{className:"content"},r.a.createElement("div",{className:"container-fluid"},hd,fd,vd,yd,Ed,oo,io,mo,uo,po,_o,ho,fo,vo,go,yo,Eo,gd,No,wo,Co,bo,So,Oo,Ao,"/"==window.location.pathname&&E("home","quick_access")&&r.a.createElement("div",{className:"row home-menu-container mb-5"},r.a.createElement(Dd,null),this.state.account_list&&E("recon","search")&&r.a.createElement("div",{className:"home-menu box col-lg-3 col-md-6 text-center align-items-center"},r.a.createElement("div",{className:"card card-pricing "},r.a.createElement("div",{className:"card-body"},r.a.createElement("h3",{className:"card-title"},"Wallet Statements"),r.a.createElement("div",null,r.a.createElement("div",{className:"wallet_statement_mobno align-items-center"},this.state.account_list)))))),"/"==window.location.pathname&&E("stmt_imports","search")&&r.a.createElement("div",{className:""},r.a.createElement(Ld,{refresh:this.state.refresh_count})),"/"==window.location.pathname&&E("loan","capture_repayment_new")&&r.a.createElement("div",{className:""},r.a.createElement(Gd,{list_name:"review_pending_payments",refresh:this.state.refresh_count})),"/"==window.location.pathname&&E("statement","unknown_txns")&&r.a.createElement("div",{className:""},r.a.createElement(Gd,{list_name:"unmatched_debits",refresh:this.state.refresh_count})),"/"==window.location.pathname&&E("statement","unknown_txns")&&r.a.createElement("div",{className:""},r.a.createElement(Gd,{list_name:"unmatched_credits",refresh:this.state.refresh_count})),"/"==window.location.pathname&&E("application","delayed_approval_list")&&r.a.createElement("div",{className:"home_stalled_fas"},r.a.createElement(Qd,{list_name:"pending_w_rm",refresh:this.state.refresh_count})),"/"==window.location.pathname&&E("loan","pending_confirmation_list")&&r.a.createElement("div",{className:"home_stalled_fas"},r.a.createElement(Qd,{list_name:"pending_w_cust",refresh:this.state.refresh_count})),"/"==window.location.pathname&&E("loan","hold_loan_list")&&r.a.createElement("div",{className:"home_stalled_fas"},r.a.createElement(Id,{refresh:this.state.refresh_count})),"/"==window.location.pathname&&E("loan","hold_loan_list")&&r.a.createElement("div",{className:"home_stalled_fa"},r.a.createElement(Qd,{list_name:"pending_capture_disbursal",refresh:this.state.refresh_count})),"/"==window.location.pathname&&E("customer","perform_kyc")&&r.a.createElement("div",{className:"home_stalled_fas"},r.a.createElement(Yd,null)),"/"==window.location.pathname&&E("loan","upgrade_requests")&&r.a.createElement("div",{className:"home_stalled_fas"},r.a.createElement(am,null)),"/"==window.location.pathname&&E("loan","upgrade_requests")&&r.a.createElement("div",{className:"home_stalled_fas"},r.a.createElement(Xd,{task_type:"waiver_request",title:"Pending Waiver Requests"})),"/"==window.location.pathname&&E("lead","edit")&&r.a.createElement("div",{className:"home_stalled_fas"},r.a.createElement(em,null)),"/"==window.location.pathname&&E("application","approval")&&r.a.createElement("div",{className:""},r.a.createElement(Bd,null)))))))}}]),a}(ut);function cm(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(u.a)(e);if(t){var r=Object(u.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(m.a)(this,a)}}la.a.dataTable=a(53),a(68),a(162),a(163),a(164),a(165);var sm=function(e){Object(d.a)(a,e);var t=cm(a);function a(){var e;return Object(s.a)(this,a),(e=t.call(this)).state={routes:[],home:[],selectMarket:!1},e.loadScreen=function(t){"admin"===t?e.setState({home:r.a.createElement(lm,null)}):"login"===t?e.setState({home:r.a.createElement(J,{onLogon:e.loadUser})}):"market"!==t&&"acc_prvdr"!==t&&"acc_prvdr_only"!==t||e.setState({home:r.a.createElement(xd,{toChange:t,action:"select",onSelect:e.loadUser})})},e.loadUser=e.loadUser.bind(Object(i.a)(e)),console.log(a.state),e}return Object(o.a)(a,[{key:"componentWillMount",value:function(){this.loadUser()}},{key:"loadUser",value:function(){this.role_codes=v("role_codes");var e=null,t=null,a=v("market"),n=["super_admin","ops_admin","market_admin","it_admin"];n.includes(this.role_codes)&&(t=g("acc_prvdr_code")),this.role_codes?n.includes(this.role_codes)?a?t||(e="acc_prvdr_only"):e="market":!n.includes(this.role_codes)&&a?e="admin":alert("Unable to obtain User's Market Information or No Market has been configured in the system"):e="login",a&&t&&(e="admin"),this.loadScreen(e)}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"App"},r.a.createElement(p.a,{history:wd},r.a.createElement(_.a,null,r.a.createElement(f.a,{path:"/login",component:function(){return r.a.createElement(J,{onLogon:e.loadUser})}}),r.a.createElement(f.a,{path:"/logout",component:function(){return r.a.createElement(Z,null)}}),r.a.createElement(f.a,{path:"/"},r.a.createElement(r.a.Fragment,null,this.state.home)))))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(sm,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},41:function(e,t,a){}},[[123,1,2]]]);
//# sourceMappingURL=main.8936acf5.chunk.js.map